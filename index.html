<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Checkout sdk headless store</title>

    <script src="index.js"></script>
</head>
<body>
    <div>
        <h1>Input data</h1>
        <div style="padding-bottom: 20px">
            <label for="env-select">Environment:</label>
            <br/>
            <select name="env" id="env-select">
                <option value="local" selected="selected">Local</option>
                <option value="int">Integration</option>
                <option value="prod">Production</option>
            </select>
        </div>
        <div style="padding-bottom: 20px">
            <label for="storefront-host-url">Storefront Host Url (example: https://my-dev-store-165941143.store.bcdev/): </label>
            <br/>
            <input
                id="storefront-host-url"
                type="text"
                value="https://my-dev-store-165941143.store.bcdev/"
                style="width: 700px"
            />
        </div>

        <button id="render-paypal-button">Render PayPal Button</button>

        <div style="margin-top: 40px">Here should be a paypal button:</div>
        <div id="paypalcommerce-button"></div>

        <script async>
            function onRenderPayPalButtonClick() {
                const bcStoreUrl = document.getElementById('storefront-host-url').value;
                const env = document.getElementById('env-select').value;

                console.log({ bcStoreUrl, env });

                if (!bcStoreUrl) {
                    console.error('Can\'t render PayPal button because bc store url is not provided');

                    return;
                }

                window.BigCommerce.renderWalletButtons({
                    bcStoreUrl,
                    env,
                    walletButtons: [
                        {
                            paymentMethodId: 'paypalcommerce.paypal',
                            containerId: 'paypalcommerce-button',
                            options: {
                                style: {"color":"gold","label":"checkout"},
                                onComplete: () => {
                                    const url = '/checkout/order-confirmation';
                                    location.replace(url);
                                    return new Promise();
                                },
                            },
                        },
                    ],
                });
            }

            const button = document.getElementById('render-paypal-button');
            button.addEventListener('click', onRenderPayPalButtonClick);
        </script>
    </div>
</body>
</html>
