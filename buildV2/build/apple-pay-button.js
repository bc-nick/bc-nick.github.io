"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["apple-pay-button"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/apple-pay.js":
/*!*************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/apple-pay.js ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApplePayButtonStrategy: () => (/* binding */ W),\n/* harmony export */   createApplePayCustomerStrategy: () => (/* binding */ ie),\n/* harmony export */   createApplePayPaymentStrategy: () => (/* binding */ Q)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\nvar a={};function r(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=\"3.128.0\",l=\"3.123.2\",d=\"3.106.0\";class c{constructor(e){this.paymentIntegrationService=e,this.braintreeWindow=window}getSDKVersion(){const e=this.paymentIntegrationService.getState().getStoreConfig(),t=(null==e?void 0:e.checkoutSettings.features)||{};return this.getPreloadedSDKVersion()||(r(t,\"PAYPAL-5809.braintree_hosted_fields_fix_version\")?s:r(t,\"PAYPAL-5636.update_braintree_sdk_version\")?l:d)}getPreloadedSDKVersion(){const e=this.braintreeWindow.braintree;if(e){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(Object.values(e),e=>!!e.VERSION);return null==t?void 0:t.VERSION}}}class h extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class u extends h{constructor(e){super(e||\"Unsupported browser error\"),this.name=\"UnsupportedBrowserError\",this.type=\"unsupported_browser\"}}var p,m,y,g,v,S,b,C;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(p||(p={}));class f extends h{constructor(e){super(function(e){switch(e){case p.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case p.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case p.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case p.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}!function(e){e.ESTIMATED=\"ESTIMATED\",e.FINAL=\"FINAL\",e.NOT_CURRENTLY_KNOWN=\"NOT_CURRENTLY_KNOWN\"}(m||(m={})),function(e){e.Completed=\"COMPLETED\",e.Pending=\"PENDING\",e.Failed=\"FAILED\"}(y||(y={})),function(e){e.TRUSTLY=\"trustly\"}(g||(g={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"cancelled\",e.UNRECOGNIZED=\"unrecognized\"}(v||(v={})),function(e){e.Customer=\"CUSTOMER\",e.Merchant=\"MERCHANT\",e.Network=\"NETWORK\",e.Internal=\"INTERNAL\",e.Unknown=\"UNKNOWN\"}(S||(S={})),function(e){e.KountNotEnabled=\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"}(b||(b={})),function(e){e.Visa=\"visa\",e.Mastercard=\"mastercard\",e.AmericanExpress=\"american-express\",e.DinersClub=\"diners-club\",e.Discover=\"discover\",e.Jcb=\"jcb\",e.UnionPay=\"union-pay\",e.Maestro=\"maestro\",e.Elo=\"elo\",e.Mir=\"mir\",e.Hiper=\"hiper\",e.Hipercard=\"hipercard\"}(C||(C={}));var w,_,P,T=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};class I{constructor(e){this.braintreeScriptLoader=e}initialize(e){this.setClientToken(e)}deinitialize(){return T(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollector),this.dataCollector=void 0})}getClient(){return T(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=yield t.create({authorization:e})}return this.client})}getDataCollectorOrThrow(e){return T(this,void 0,void 0,function*(){const t={deviceData:void 0,teardown:()=>Promise.resolve()};if(!this.dataCollector)try{const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadDataCollector(),n=Object.assign({client:t,kount:!0},e);this.dataCollector=yield i.create(n)}catch(e){if(function(e){return Boolean(\"object\"==typeof e&&null!==e&&(\"type\"in e||\"message\"in e||\"code\"in e))}(e)&&e.code===b.KountNotEnabled)return t;throw e}return this.dataCollector})}getBraintreeGooglePayment(){return T(this,void 0,void 0,function*(){if(!this.googlePayment){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadGooglePayment()]);this.googlePayment=yield t.create({client:e})}return this.googlePayment})}getBraintreeThreeDS(){return T(this,void 0,void 0,function*(){if(!this.threeDS){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]);this.threeDS=yield t.create({client:e,version:2})}return this.threeDS})}getBraintreeLocalPayment(e){return T(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment){const[t,i]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadLocalPayment()]);this.braintreeLocalPayment=yield new Promise((n,o)=>{i.create({client:t,merchantAccountId:e},(e,t)=>{e&&o(e),n(t)})})}return this.braintreeLocalPayment})}getUsBankAccount(){return T(this,void 0,void 0,function*(){if(!this.usBankAccount){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadUsBankAccount();this.usBankAccount=yield t.create({client:e})}return this.usBankAccount})}getBraintreeVisaCheckout(){return this.visaCheckout||(this.visaCheckout=Promise.all([this.getClient(),this.braintreeScriptLoader.loadVisaCheckout()]).then(([e,t])=>t.create({client:e}))),this.visaCheckout}getVisaCheckoutSdk(e){return T(this,void 0,void 0,function*(){return this.visaCheckoutSDK||(this.visaCheckoutSDK=yield this.braintreeScriptLoader.loadVisaCheckoutSdk(e)),this.visaCheckoutSDK})}getVenmoCheckoutOrThrow(){return T(this,void 0,void 0,function*(){if(!this.braintreeVenmo){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadVenmoCheckout(),i={client:e,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},n=yield t.create(i);if(!n.isBrowserSupported())throw new u;this.braintreeVenmo=n}return this.braintreeVenmo})}setClientToken(e){this.clientToken=e}getClientTokenOrThrow(){if(!this.clientToken)throw new f(p.PaymentNotInitialized);return this.clientToken}teardownModule(e){return e?e.teardown():Promise.resolve()}}class k extends h{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e.Sandbox=\"sandbox\",e.Production=\"production\"}(w||(w={})),function(e){e.Client=\"client\",e.DataCollector=\"dataCollector\",e.Fastlane=\"fastlane\",e.GooglePayment=\"googlePayment\",e.HostedFields=\"hostedFields\",e.LocalPayment=\"localPayment\",e.Paypal=\"paypal\",e.PaypalCheckout=\"paypalCheckout\",e.ThreeDSecure=\"threeDSecure\",e.UsBankAccount=\"usBankAccount\",e.Venmo=\"venmo\",e.VisaCheckout=\"visaCheckout\"}(_||(_={})),function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\"}(P||(P={}));const M={[d]:{[_.Client]:\"sha384-26BXDNnJI23JYRyFBj4xe4sVNrUSSiSSu11kxVXNM/vEPONm4LuL00w6ZaTgQewt\",[_.PaypalCheckout]:\"sha384-B+vzbZwnQtzWBthpkT4TXKUibO65tyeK7eCxSvpblgprTep2+IAXB2Cxxjrn710O\",[_.Paypal]:\"sha384-uyAGL1/3+XJAHnGoNy4eCoXdzJ4f7Ilzp+6w9PNnEjs6DCCz9WMyJjMN1gzc78U+\",[_.LocalPayment]:\"sha384-LIvOEMkIVEwVuYBdVOQc1AC5YbGGlwyfUheS0ACK218D2STuVYQlZ4FyEPowAEfT\",[_.DataCollector]:\"sha384-1bo9JDz+Kscthc085cCKWur8CLwUoBpoNyxsDi7932mCl0zFq3A5mv+FQLw9GHpV\",[_.UsBankAccount]:\"sha384-xmHBVaU+w74V+OebD3AaPONFxHUGMf+QRs8G/JxVPXNNP7MDa2jL0ICWHIe2tTfJ\",[_.GooglePayment]:\"sha384-WKDJl8mqoP82qZpMGH6AbZxnvXnSW8ILV4M64CyMLiugGMwu7LyP89wjCkHqsiBe\",[_.ThreeDSecure]:\"sha384-VQUlpGHzsGvs5XeiGFip7EXRsvoHWEXDVmgCacfbyieZI9mdBOqq3NSoyo28OCOB\",[_.VisaCheckout]:\"sha384-yx7mADfzTN0T43Q6rlH49LIg1EJ0iUZgBp/EczX9LXsUGkySgxrD+nWHQRBkyfoT\",[_.Venmo]:\"sha384-QX4rPjoj1ZDhuG0aSyKs56lEKDqTMTcjYxUHY1SzO5VZDsqIE2NTkqot7KNSCyov\",[_.HostedFields]:\"sha384-VvYBACfSu0Cr/J32uKmxG7AXcNOJE1AzIIL3kbikyS7YKp5fz5Is+NzNP/lyauNy\",[_.Fastlane]:\"sha384-9oGsZMRZwpGtDEDYa/dFt76dECqj1xAni9gIKgc3KfMIiRnR73nEeeUDLiBzxhFa\"},[l]:{[_.Client]:\"sha384-o+nbQGcwNNxIBeXeu3+XmbSq+Cg8R3EN3N0l5hXCgMMU2RGY0t1z0LroSEIAbfAO\",[_.PaypalCheckout]:\"sha384-WrfbWPBS4mH86GAoycPSgiH8hQ8KH7A67C93Hjhunv/xhNk2YpBn3wbFA4Fhg9U/\",[_.Paypal]:\"sha384-VF389nvvrRUgDsTXMxTYORDtVegB9IQa3Cxr//DyJnLYnz8/X8VCzEvck2c+Megt\",[_.LocalPayment]:\"sha384-tZKx2rEQbfmZpoPSY5VPmJEhaq4X75dLvwHMs3VE9U+C8lPyw+hWTIL1+GPvWCIH\",[_.DataCollector]:\"sha384-E6k3wOpP7syCDDwaRDLF06942Y00NkbwJvWi2OQXwwKzGwG5fd3E7RFUvCCecfvO\",[_.UsBankAccount]:\"sha384-258FON8LZGG0W9Qaz4Jij83pZHu30YnKjJA7gNulLBh6CclkucgF+tHDQuYFRYfW\",[_.GooglePayment]:\"sha384-taJ2p/0+n0VH328POAoBiuEbL3tnHUTE9S42hK1V+Txs3X+QYjZOyKW35JgHRFfO\",[_.ThreeDSecure]:\"sha384-+NSZH4Zj3sO5bdWvPKhU5N16QDxeueTVTnUVeleeESkhLSaz4Ob1hh/5myecc9Ym\",[_.VisaCheckout]:\"sha384-66DiBjghxk1OmBj8aksN8gbQ+CwoQcx1vPfiXUN08g1iQVM+BwewF0p7toM3i7SS\",[_.Venmo]:\"sha384-B5UwY42kE4RoLoWbQ7YpqosUlUad2/DlGWiw0HhoZbSPk30CQAaSA10ohyLDTkDU\",[_.HostedFields]:\"sha384-Aw9EesSaUeWxe36PqEHiOyOyOq8M6CIb1gw7/yHNVPRzGtFXXcd2OQ8qXrIlOj2P\",[_.Fastlane]:\"sha384-rhBL1hpZ71JqG+2TsT0Dih47mbjx8cjJCpeZjk9tw3df1gFMKfCTmMyZunhr7H4Y\"},[s]:{[_.Client]:\"sha384-0WNxksIpRP+fYZiIdr12g6DBUQfLDzYCQJZtR/C8KkcwSGhPHfcFp3tTaGcMyFTq\",[_.PaypalCheckout]:\"sha384-lWM1jk4BOxoDNV6Kop7tVNvQgINlmEVz0c/OwM+HNHK3QC8xqwd54Ovrt2QRDTjh\",[_.Paypal]:\"sha384-fXUmVxC2EMZBDXZ7eTHSTL/LFBrHej/MSXT/vTBXvra4lzgLNGvREAp+x0GYObuH\",[_.LocalPayment]:\"sha384-pha1xGuGSkmZH5x9aqHvRaO4xLea7rmQ/79PFj9zxNzxuFcOWZg7gOP7FibygOEC\",[_.DataCollector]:\"sha384-Q6PI2F9eekWbAxhroybl+aEcvqhdowN/EQlGwBUyJOzPFn9982u9xl6SU6XfGKzc\",[_.UsBankAccount]:\"sha384-W3RLQSKJL1tQ3+Y7mP6tmkamtZ8bV4Yw/XxL9Jj5JtXHraD8loMF8hAIG5m2zK7F\",[_.GooglePayment]:\"sha384-TITQMsFWA3elDNGP2mWz2oKBo4qjt+TlqzovcaPoeBiAh/wPBi6nae50ADdgU1/i\",[_.ThreeDSecure]:\"sha384-YiycYN89ZlL/Evcaq4y1ajW1mhd7JYfZBDuOwHtIn4/Jnm20GL+/XCM+zYAwWD8D\",[_.VisaCheckout]:\"sha384-/OdaTv9qrkKzjObtUe6yzfDhHozFW/+uXlrSl736sOZRJpjGQETvpYXqMFFg69xv\",[_.Venmo]:\"sha384-dA+ojdW9vbJS4JavcXyOs9d5uZHJg5dNtYupoPSH2zsXIiYDVS5amLb/u8qmQ6oz\",[_.HostedFields]:\"sha384-31ZkS58+iaWsW06ftW52zzVZFp43WPd7pNYRiddYynSNg6Oh7WGbSFGorAUH6T1z\",[_.Fastlane]:\"sha384-jlbrwNvL3HvLAUCtLSmrnQ2GH1udCUrRS/bVmReAS5fuIVvcW8Pko/Gkg82tlgtr\"}};var A,N,O=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};class E{constructor(e,t,i){this.scriptLoader=e,this.braintreeHostWindow=t,this.braintreeSDKVersionManager=i}loadClient(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.Client,\"client.min.js\")})}loadFastlane(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.Fastlane,\"fastlane.min.js\")})}loadPaypalCheckout(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.PaypalCheckout,\"paypal-checkout.min.js\")})}loadPaypal(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.Paypal,\"paypal.min.js\")})}loadLocalPayment(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.LocalPayment,\"local-payment.min.js\")})}loadDataCollector(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.DataCollector,\"data-collector.min.js\")})}loadUsBankAccount(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.UsBankAccount,\"us-bank-account.min.js\")})}loadGooglePayment(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.GooglePayment,\"google-payment.min.js\")})}load3DS(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.ThreeDSecure,\"three-d-secure.min.js\")})}loadVisaCheckout(){return this.loadBraintreeModuleOrThrow(_.VisaCheckout,\"visa-checkout.min.js\")}loadVenmoCheckout(){return this.loadBraintreeModuleOrThrow(_.Venmo,\"venmo.min.js\")}loadHostedFields(){return O(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(_.HostedFields,\"hosted-fields.min.js\")})}loadVisaCheckoutSdk(e){return O(this,void 0,void 0,function*(){if(this.braintreeHostWindow.V)return this.braintreeHostWindow.V;const t=e?\"sha384-0eu1s1GtqzXlL9DtLgmwzC5WWlEH/ADRM0n38cVQkvtT+W/gey96rcb1LwuUOPDm\":\"sha384-1f1csvP3ZFxg4dILH1GaY4LHlZ0oX7Rk83rxmLlwbnIi4TM0NYzXoev1VoEiVDS6\";return this.scriptLoader.loadScript(`//${e?\"sandbox-\":\"\"}assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`,{async:!0,attributes:{integrity:t,crossorigin:\"anonymous\"}}).then(()=>{if(!this.braintreeHostWindow.V)throw new k;return this.braintreeHostWindow.V})})}loadBraintreeModuleOrThrow(e,t){return O(this,void 0,void 0,function*(){let i=this.getBraintreeModule(e);if(i)return i;const n=this.braintreeSDKVersionManager.getSDKVersion(),o=`//js.braintreegateway.com/web/${n}/js/${t}`,a=n in M?this.getIntegrityValuesByModuleName(e,n):void 0;if(yield this.scriptLoader.loadScript(o,a?{async:!0,attributes:{integrity:a,crossorigin:\"anonymous\"}}:void 0),i=this.getBraintreeModule(e),!i)throw new k;return i})}getBraintreeModule(e){var t;return null===(t=this.braintreeHostWindow.braintree)||void 0===t?void 0:t[e]}getIntegrityValuesByModuleName(e,t){const i=M[t][e];if(!i)throw new Error(\"Unexpected fileName value\");return i}}function D(e,t){return Object.assign(e,{resolveIds:t})}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(A||(A={}));class L extends h{constructor(e){super(function(e){switch(e){case A.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case A.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case A.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case A.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case A.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case A.MissingCheckoutConfig:case A.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case A.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case A.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case A.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case A.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case A.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case A.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class B extends h{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class z extends h{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}class x extends h{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}!function(e){e.BRAINTREE=\"braintree\",e.BRAINTREE_FASTLANE=\"braintreeacceleratedcheckout\"}(N||(N={}));var U,F,V=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}(U||(U={})),function(e){e.Black=\"black\",e.White=\"white\",e.WhiteBorder=\"white-border\"}(F||(F={}));class R{constructor(e,t,i,n,a){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=a,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._subTotalLabel=U.Subtotal,this._shippingLabel=U.Shipping}initialize(e){var t,i;return V(this,void 0,void 0,function*(){const{methodId:n,containerId:o,applepay:a}=e;if(!n||!a)throw new L(A.MissingPaymentMethod);yield this._applePayScriptLoader.loadSdk();const{onPaymentAuthorize:r,buyNowInitializeOptions:s,requiresShipping:l}=a;this._requiresShipping=l,this._buyNowInitializeOptions=s,this._onAuthorizeCallback=r,s||(yield this._paymentIntegrationService.loadDefaultCheckout()),yield this._paymentIntegrationService.loadPaymentMethod(n);const d=this._paymentIntegrationService.getState();return this._paymentMethod=d.getPaymentMethodOrThrow(n),d.getCart()&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection()),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===N.BRAINTREE&&this._paymentMethod.clientToken&&this._braintreeSdk.initialize(this._paymentMethod.clientToken),this._applePayButton=this._createButton(o,null===(i=this._paymentMethod.initializationData)||void 0===i?void 0:i.styleOption),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),Promise.resolve()})}deinitialize(){return Promise.resolve()}_createButton(e,t){const i=document.getElementById(e);if(!i)throw new B(\"Unable to create wallet button without valid container ID.\");const n=this._createApplePayButtonElement(t);return i.appendChild(n),n}_createApplePayButtonElement(e){const t=document.createElement(\"apple-pay-button\");return t.setAttribute(\"buttonstyle\",(e=>{switch(e){case F.White:return\"white\";case F.WhiteBorder:return\"white-outline\";case F.Black:default:return\"black\"}})(e)),t.setAttribute(\"type\",\"plain\"),t.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 40px; --apple-pay-button-border-radius: 4px;\"),t}_handleWalletButtonClick(e){var t;return V(this,void 0,void 0,function*(){if(e.preventDefault(),!this._paymentMethod||!this._paymentMethod.initializationData)throw new L(A.MissingPaymentMethod);if(this._buyNowInitializeOptions&&\"function\"==typeof this._buyNowInitializeOptions.getBuyNowCartRequestBody){const{countryCode:e,currencyCode:i,merchantCapabilities:n,supportedNetworks:o,storeName:a}=this._paymentMethod.initializationData,r=this._getRequestWithEmptyTotal(e,i,o,n);this._requiresShipping&&(null===(t=r.requiredShippingContactFields)||void 0===t||t.push(\"postalAddress\"));const s=this._sessionFactory.create(r);this._handleApplePayEvents(s,this._paymentMethod,a),s.begin()}else{const e=this._paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getStoreConfigOrThrow(),n=e.getCheckoutOrThrow(),o=this._getBaseRequest(t,n,i,this._paymentMethod),a=this._sessionFactory.create(o);this._handleApplePayEvents(a,this._paymentMethod,i.storeProfile.storeName),a.begin()}})}_getRequestWithEmptyTotal(e,t,i,n){return{countryCode:e,currencyCode:t,supportedNetworks:i,merchantCapabilities:n,total:{label:\"\",amount:\"0\",type:\"pending\"},requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"]}}_getBaseRequest(e,t,i,n){var o;const{storeProfile:{storeCountryCode:a,storeName:r}}=i,{currency:{code:s,decimalPlaces:l}}=e,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=n,h=e.lineItems.physicalItems.length>0,u={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:a,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:[],total:h?{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"pending\"}:{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"final\"}};if(h)null===(o=u.requiredShippingContactFields)||void 0===o||o.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(l)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(l)}`})),u.lineItems=e}return u}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>V(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){throw new Error(\"Merchant validation failed\")}}),this._buyNowInitializeOptions&&!this._requiresShipping&&(e.onpaymentmethodselected=()=>V(this,void 0,void 0,function*(){yield this._createBuyNowCart(),this._handlePaymentMethodSelected(e)})),e.onshippingcontactselected=t=>V(this,void 0,void 0,function*(){this._buyNowInitializeOptions&&this._requiresShipping&&(yield this._createBuyNowCart()),yield this._handleShippingContactSelected(e,i,t)}),e.onshippingmethodselected=t=>V(this,void 0,void 0,function*(){yield this._handleShippingMethodSelected(e,i,t)}),e.oncancel=()=>V(this,void 0,void 0,function*(){try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){throw new z}}),e.onpaymentauthorized=i=>V(this,void 0,void 0,function*(){return this._onPaymentAuthorized(i,e,t)})}_createBuyNowCart(){var e,t;return V(this,void 0,void 0,function*(){try{const i=null===(t=null===(e=this._buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)||void 0===t?void 0:t.call(e);if(!i)throw new L(A.MissingCart);const n=yield this._paymentIntegrationService.createBuyNowCart(i);yield this._paymentIntegrationService.loadCheckout(n.id);const o=this._paymentIntegrationService.getState(),{shouldExecuteSpamCheck:a}=o.getCheckoutOrThrow();a&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection())}catch(e){throw new x}})}_handlePaymentMethodSelected(e){const t=this._paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getStoreConfigOrThrow(),o=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new L(A.MissingPaymentMethod);const a=this._getBaseRequest(i,o,n,this._paymentMethod);delete a.total.type,e.completePaymentMethodSelection({newTotal:a.total,newLineItems:a.lineItems})}_handleShippingContactSelected(e,t,i){var n;return V(this,void 0,void 0,function*(){const o=this._transformContactToAddress(i.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(o)}catch(t){throw e.abort(),new Error(\"Shipping address update failed\")}let a=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:r}}=a.getCartOrThrow();let s=a.getCheckoutOrThrow();const l=null===(n=s.consignments[0].selectedShippingOption)||void 0===n?void 0:n.id,d=s.consignments[0].availableShippingOptions,c=null==d?void 0:d.find(({id:e})=>e===l),h=null==d?void 0:d.filter(e=>e.id!==l),u=c?[{label:c.description,amount:`${c.cost.toFixed(r)}`,detail:c.additionalDescription,identifier:c.id}]:[];if(h&&[...h.filter(e=>e.isRecommended),...h.filter(e=>!e.isRecommended)].forEach(e=>u.push({label:e.description,amount:`${e.cost.toFixed(r)}`,detail:e.additionalDescription,identifier:e.id})),!(d instanceof Array))throw new Error(\"Shipping options not available.\");if(0===d.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:t,amount:`${s.grandTotal.toFixed(r)}`},[]);const p=d.find(e=>e.isRecommended),m=p?p.id:d[0].id,y=c?c.id:m;try{yield this._updateShippingOption(y)}catch(e){throw new Error(\"Shipping options update failed\")}a=this._paymentIntegrationService.getState(),s=a.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:u,newTotal:{type:\"final\",label:t,amount:`${s.grandTotal.toFixed(r)}`},newLineItems:this._getUpdatedLineItems(s,r)})})}_handleShippingMethodSelected(e,t,i){return V(this,void 0,void 0,function*(){const{shippingMethod:{identifier:n}}=i;try{yield this._updateShippingOption(n)}catch(t){throw e.abort(),new Error(\"Shipping option selection update failed.\")}const o=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:a}}=o.getCartOrThrow(),r=o.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:t,amount:`${r.grandTotal.toFixed(a)}`},newLineItems:this._getUpdatedLineItems(r,a)})})}_getUpdatedLineItems(e,t){const i=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>i.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),i.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),i}_updateShippingOption(e){return V(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return V(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i){var n;return V(this,void 0,void 0,function*(){const{token:o,billingContact:a,shippingContact:r}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let l;(null===(n=i.initializationData)||void 0===n?void 0:n.gateway)===N.BRAINTREE&&(l=yield this._getBraintreeDeviceData());const d={methodId:i.id,paymentData:{deviceSessionId:l,formattedPayload:{apple_pay_token:{payment_data:o.paymentData,payment_method:o.paymentMethod,transaction_id:o.transactionIdentifier}}}},c=this._transformContactToAddress(a),h=this._transformContactToAddress(r),u=null==r?void 0:r.emailAddress,p=(null==r?void 0:r.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},c),{email:u,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(h)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(d),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){throw t.completePayment(ApplePaySession.STATUS_FAILURE),new Error(\"Payment cannot complete\")}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return V(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}}function j(e){if(!function(e){return\"ApplePaySession\"in e}(e))throw new Error(\"Apple pay is not supported\")}class q{create(e){return j(window),new ApplePaySession(1,e)}}class H{constructor(e){this.scriptLoader=e,this.sdkVersion=\"1.latest\"}loadSdk(){return e=this,t=void 0,n=function*(){(function(e){return\"ApplePaySDK\"in e})(window)||(yield this.scriptLoader.loadScript(`https://applepay.cdn-apple.com/jsapi/${this.sdkVersion}/apple-pay-sdk.js`),j(window))},new((i=void 0)||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())});// removed by dead control flow\n var e, t, i, n; }}const W=D(n=>{const{getHost:o}=n.getState(),a=new c(n);return new R((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:o()}),n,new q,new I(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,a)),new H(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);class G extends B{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class $ extends h{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}var K,X=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Shipping=\"Shipping\",e.Subtotal=\"Subtotal\",e.StoreCredit=\"Store Credit\"}(K||(K={}));class Y{constructor(e,t,i,n,o){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=o,this._shippingLabel=K.Shipping,this._subTotalLabel=K.Subtotal,this._storeCreditLabel=K.StoreCredit}initialize(e){var t,i,n,o;return X(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new B('Unable to submit payment because \"options.methodId\" argument is not provided.');const{methodId:a}=e;yield this._applePayScriptLoader.loadSdk(),this._shippingLabel=(null===(t=e.applepay)||void 0===t?void 0:t.shippingLabel)||K.Shipping,this._subTotalLabel=(null===(i=e.applepay)||void 0===i?void 0:i.subtotalLabel)||K.Subtotal,this._storeCreditLabel=(null===(n=e.applepay)||void 0===n?void 0:n.storeCreditLabel)||K.StoreCredit;const r=(yield this._paymentIntegrationService.loadPaymentMethod(a)).getPaymentMethodOrThrow(a);(null===(o=r.initializationData)||void 0===o?void 0:o.gateway)===N.BRAINTREE&&r.clientToken&&this._braintreeSdk.initialize(r.clientToken)})}execute(e,t){return X(this,void 0,void 0,function*(){const{payment:i}=e,n=this._paymentIntegrationService.getState();if(!i)throw new G([\"payment\"]);const{methodId:o}=i,a=n.getPaymentMethodOrThrow(o),r=this._getBaseRequest(n,a),s=this._sessionFactory.create(r);return yield this._paymentIntegrationService.submitOrder({useStoreCredit:e.useStoreCredit},t),s.begin(),new Promise((e,t)=>{this._handleApplePayEvents(s,a,{resolve:e,reject:t})})})}finalize(){return Promise.reject(new $)}deinitialize(){return Promise.resolve()}_getBaseRequest(e,t){const i=e.getCheckoutOrThrow(),n=e.getCartOrThrow(),o=e.getStoreConfigOrThrow(),{storeProfile:{storeCountryCode:a,storeName:r}}=o,{currency:{code:s,decimalPlaces:l}}=n,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=t,{grandTotal:h,isStoreCreditApplied:u,outstandingBalance:p}=i,m=[{label:this._subTotalLabel,amount:`${i.subtotal.toFixed(l)}`}];if(i.taxes.forEach(e=>m.push({label:e.name,amount:`${e.amount.toFixed(l)}`})),m.push({label:this._shippingLabel,amount:`${i.shippingCostTotal.toFixed(l)}`}),u){const{storeCredit:t}=e.getCustomerOrThrow();m.push({label:this._storeCreditLabel,amount:`-${Math.min(h,t).toFixed(l)}`})}return{countryCode:a,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:m,total:{label:r,amount:`${p.toFixed(l)}`,type:\"final\"}}}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>X(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){throw new Error(\"Merchant validation failed\")}}),e.oncancel=()=>X(this,void 0,void 0,function*(){return i.reject(new z(\"Continue with applepay\"))}),e.onpaymentauthorized=n=>this._onPaymentAuthorized(n,e,t,i)}_onValidateMerchant(e,t){return X(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i,n){var o;return X(this,void 0,void 0,function*(){const{token:a}=e.payment;let r;(null===(o=i.initializationData)||void 0===o?void 0:o.gateway)===N.BRAINTREE&&(r=yield this._getBraintreeDeviceData());const s={methodId:i.id,paymentData:{deviceSessionId:r,formattedPayload:{apple_pay_token:{payment_data:a.paymentData,payment_method:a.paymentMethod,transaction_id:a.transactionIdentifier}}}};try{return yield this._paymentIntegrationService.submitPayment(s),t.completePayment(ApplePaySession.STATUS_SUCCESS),n.resolve()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),n.reject(new f(p.PaymentNotInitialized))}})}_getBraintreeDeviceData(){return X(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}}const Q=D(n=>{const{getHost:o}=n.getState(),a=new c(n);return new Y((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:o()}),n,new q,new I(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,a)),new H(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);class Z extends h{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var J,ee=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}(J||(J={}));class te{constructor(e,t,i,n,a){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=a,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._onError=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._onClick=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._subTotalLabel=J.Subtotal,this._shippingLabel=J.Shipping,this._hasApplePaySession=!1}initialize(e){var t;return ee(this,void 0,void 0,function*(){const{methodId:i,applepay:n}=e;if(!i||!n)throw new L(A.MissingPaymentMethod);const{container:a,shippingLabel:r,subtotalLabel:s,onError:l=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,onClick:d=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,onPaymentAuthorize:c}=n;this._shippingLabel=r||J.Shipping,this._subTotalLabel=s||J.Subtotal,this._onAuthorizeCallback=c,this._onError=l,this._onClick=d;let h=this._paymentIntegrationService.getState();yield this._applePayScriptLoader.loadSdk();try{this._paymentMethod=h.getPaymentMethodOrThrow(i)}catch(e){h=yield this._paymentIntegrationService.loadPaymentMethod(i),this._paymentMethod=h.getPaymentMethodOrThrow(i)}yield this._paymentIntegrationService.verifyCheckoutSpamProtection(),this._applePayButton=this._createButton(a),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===N.BRAINTREE&&this._paymentMethod.clientToken&&this._braintreeSdk.initialize(this._paymentMethod.clientToken)})}deinitialize(){return Promise.resolve()}signIn(){throw new Z('In order to sign in via Apple, the shopper must click on \"Apple Pay\" button.')}signOut(){throw new Z(\"Need to do signout via apple.\")}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}_createButton(e){const t=document.getElementById(e);if(!t)throw new B(\"Unable to create sign-in button without valid container ID.\");const i=this._createApplePayButtonElement();return t.appendChild(i),i}_createApplePayButtonElement(){const e=document.createElement(\"apple-pay-button\");return e.setAttribute(\"buttonstyle\",\"black\"),e.setAttribute(\"type\",\"plain\"),e.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 40px; --apple-pay-button-border-radius: 4px;\"),e}_handleWalletButtonClick(e){if(e.preventDefault(),this._hasApplePaySession)return;this._onClick();const t=this._paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getStoreConfigOrThrow(),o=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new L(A.MissingPaymentMethod);const a=this._getBaseRequest(i,o,n,this._paymentMethod),r=this._sessionFactory.create(a);this._handleApplePayEvents(r,this._paymentMethod,n),r.begin(),this._hasApplePaySession=!0}_getBaseRequest(e,t,i,n){var o;const{storeProfile:{storeCountryCode:a,storeName:r}}=i,{currency:{code:s,decimalPlaces:l}}=e,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=n,h=e.lineItems.physicalItems.length>0,u={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:a,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:[],total:h?{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"pending\"}:{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"final\"}};if(h)null===(o=u.requiredShippingContactFields)||void 0===o||o.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(l)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(l)}`})),u.lineItems=e}return u}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>ee(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){this._onError(e)}}),e.onshippingcontactselected=t=>ee(this,void 0,void 0,function*(){return this._handleShippingContactSelected(e,i,t)}),e.onshippingmethodselected=t=>ee(this,void 0,void 0,function*(){return this._handleShippingMethodSelected(e,i,t)}),e.oncancel=()=>ee(this,void 0,void 0,function*(){this._hasApplePaySession=!1;try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){return this._onError(new z)}}),e.onpaymentauthorized=i=>ee(this,void 0,void 0,function*(){return this._onPaymentAuthorized(i,e,t)})}_handleShippingContactSelected(e,t,i){var n;return ee(this,void 0,void 0,function*(){const o=this._transformContactToAddress(i.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(o)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const{storeProfile:{storeName:a}}=t;let r=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:s}}=r.getCartOrThrow();let l=r.getCheckoutOrThrow();const d=null===(n=l.consignments[0].selectedShippingOption)||void 0===n?void 0:n.id,c=l.consignments[0].availableShippingOptions,h=null==c?void 0:c.find(({id:e})=>e===d),u=null==c?void 0:c.filter(e=>e.id!==d),p=h?[{label:h.description,amount:`${h.cost.toFixed(s)}`,detail:h.additionalDescription,identifier:h.id}]:[];if(u&&[...u.filter(e=>e.isRecommended),...u.filter(e=>!e.isRecommended)].forEach(e=>p.push({label:e.description,amount:`${e.cost.toFixed(s)}`,detail:e.additionalDescription,identifier:e.id})),!(c instanceof Array))throw new Error(\"Shipping options not available.\");if(0===c.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:a,amount:`${l.grandTotal.toFixed(s)}`},[]);const m=c.find(e=>e.isRecommended),y=m?m.id:c[0].id,g=h?h.id:y;try{yield this._updateShippingOption(g)}catch(e){return this._onError(e)}r=this._paymentIntegrationService.getState(),l=r.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:p,newTotal:{type:\"final\",label:a,amount:`${l.grandTotal.toFixed(s)}`},newLineItems:this._getUpdatedLineItems(l,s)})})}_handleShippingMethodSelected(e,t,i){return ee(this,void 0,void 0,function*(){const{storeProfile:{storeName:n}}=t,{shippingMethod:{identifier:o}}=i;try{yield this._updateShippingOption(o)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const a=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:r}}=a.getCartOrThrow(),s=a.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:n,amount:`${s.grandTotal.toFixed(r)}`},newLineItems:this._getUpdatedLineItems(s,r)})})}_getUpdatedLineItems(e,t){const i=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>i.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),i.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),i}_updateShippingOption(e){return ee(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return ee(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i){var n;return ee(this,void 0,void 0,function*(){const{token:o,billingContact:a,shippingContact:r}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let l;(null===(n=i.initializationData)||void 0===n?void 0:n.gateway)===N.BRAINTREE&&(l=yield this._getBraintreeDeviceData());const d={methodId:i.id,paymentData:{deviceSessionId:l,formattedPayload:{apple_pay_token:{payment_data:o.paymentData,payment_method:o.paymentMethod,transaction_id:o.transactionIdentifier}}}},c=this._transformContactToAddress(a),h=this._transformContactToAddress(r),u=null==r?void 0:r.emailAddress,p=(null==r?void 0:r.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},c),{email:u,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(h)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(d),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),this._onError(e)}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return ee(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}}const ie=D(n=>{const{getHost:o}=n.getState(),a=new c(n);return new te((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:o()}),n,new q,new I(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,a)),new H(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);\n//# sourceMappingURL=apple-pay.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hcHBsZS1wYXkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5TCxTQUFTLHFCQUFxQixNQUFNLHVDQUF1QyxZQUFZLCtEQUErRCx1QkFBdUIsRUFBRSxzREFBc0QsMENBQTBDLFFBQVEsZUFBZSw2REFBNkQsZ0JBQWdCLHNIQUFzSCxxSkFBcUoseUJBQXlCLHVDQUF1QyxNQUFNLFFBQVEsNENBQUMsa0NBQWtDLGtDQUFrQyxzQkFBc0IsZUFBZSxNQUFNLHVUQUF1VCxrQkFBa0IsZUFBZSwyR0FBMkcsb0JBQW9CLGFBQWEseVNBQXlTLFNBQVMsR0FBRyxrQkFBa0IsZUFBZSxrQkFBa0IsVUFBVSx3SEFBd0gsc0hBQXNILHdIQUF3SCw2SEFBNkgsNEZBQTRGLGlGQUFpRixhQUFhLG9GQUFvRixTQUFTLGVBQWUsOERBQThELFNBQVMsZUFBZSxvQkFBb0IsU0FBUyxlQUFlLCtGQUErRixTQUFTLGVBQWUsMEdBQTBHLFNBQVMsZUFBZSxxREFBcUQsU0FBUyxlQUFlLHFQQUFxUCxTQUFTLEdBQUcsOEJBQThCLHlDQUF5QyxjQUFjLElBQUksYUFBYSxTQUFTLE1BQU0sY0FBYyxJQUFJLGNBQWMsU0FBUyxNQUFNLGNBQWMsTUFBTSxnRUFBZ0UsS0FBSyxhQUFhLCtCQUErQixHQUFHLFFBQVEsZUFBZSw2QkFBNkIsY0FBYyx1QkFBdUIsZUFBZSx3Q0FBd0Msd0VBQXdFLEVBQUUsWUFBWSx3Q0FBd0MsaUJBQWlCLHFGQUFxRiw0QkFBNEIsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQUUsMkJBQTJCLHdDQUF3QyxTQUFTLGtEQUFrRCwyQkFBMkIsdUdBQXVHLGtCQUFrQixJQUFJLHFDQUFxQyxTQUFTLGVBQWUsc0ZBQXNGLHlDQUF5QyxRQUFRLDBCQUEwQixFQUFFLDRCQUE0Qix3Q0FBd0Msd0JBQXdCLGdHQUFnRyxtQ0FBbUMsU0FBUyxFQUFFLDBCQUEwQixFQUFFLHNCQUFzQix3Q0FBd0Msa0JBQWtC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QUFnSixJQUFJLGdHQUFnRyxLQUFLLGdCQUFnQiwwSEFBMEgsa0JBQWtCLHVJQUF1SSxTQUFTLDJFQUEyRSxFQUFFLDhCQUE4QixPQUFPLG9oQkFBb2hCLDBCQUEwQix5Q0FBeUMsSUFBSSxNQUFNLGFBQWEsb0RBQW9ELFNBQVMsV0FBVyxHQUFHLGVBQWUsTUFBTSxVQUFVLHlCQUF5QixjQUFjLGdGQUFDLEVBQUUsU0FBUyxzQkFBc0IsMkVBQUMsd0JBQXdCLG9FQUFDLEdBQUcsR0FBRyxjQUFjLEdBQXFIO0FBQ2hxMkMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uLi9jaGVja291dC1zZGstanMvZGlzdC9lc20vaW50ZWdyYXRpb25zL2FwcGxlLXBheS5qcz81NTFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydHtjcmVhdGVSZXF1ZXN0U2VuZGVyIGFzIGV9ZnJvbVwiQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyXCI7aW1wb3J0e1NjcmlwdExvYWRlciBhcyB0LGdldFNjcmlwdExvYWRlciBhcyBpfWZyb21cIkBiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyXCI7aW1wb3J0e2ZpbmQgYXMgbixub29wIGFzIG99ZnJvbVwibG9kYXNoXCI7dmFyIGE9e307ZnVuY3Rpb24gcihlLHQsaT0hMCl7dmFyIG47cmV0dXJuIG51bGwhPT0obj1lW3RdKSYmdm9pZCAwIT09bj9uOml9YS5kPShlLHQpPT57Zm9yKHZhciBpIGluIHQpYS5vKHQsaSkmJiFhLm8oZSxpKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSx7ZW51bWVyYWJsZTohMCxnZXQ6dFtpXX0pfSxhLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO2NvbnN0IHM9XCIzLjEyOC4wXCIsbD1cIjMuMTIzLjJcIixkPVwiMy4xMDYuMFwiO2NsYXNzIGN7Y29uc3RydWN0b3IoZSl7dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPWUsdGhpcy5icmFpbnRyZWVXaW5kb3c9d2luZG93fWdldFNES1ZlcnNpb24oKXtjb25zdCBlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFN0b3JlQ29uZmlnKCksdD0obnVsbD09ZT92b2lkIDA6ZS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzKXx8e307cmV0dXJuIHRoaXMuZ2V0UHJlbG9hZGVkU0RLVmVyc2lvbigpfHwocih0LFwiUEFZUEFMLTU4MDkuYnJhaW50cmVlX2hvc3RlZF9maWVsZHNfZml4X3ZlcnNpb25cIik/czpyKHQsXCJQQVlQQUwtNTYzNi51cGRhdGVfYnJhaW50cmVlX3Nka192ZXJzaW9uXCIpP2w6ZCl9Z2V0UHJlbG9hZGVkU0RLVmVyc2lvbigpe2NvbnN0IGU9dGhpcy5icmFpbnRyZWVXaW5kb3cuYnJhaW50cmVlO2lmKGUpe2NvbnN0IHQ9bihPYmplY3QudmFsdWVzKGUpLGU9PiEhZS5WRVJTSU9OKTtyZXR1cm4gbnVsbD09dD92b2lkIDA6dC5WRVJTSU9OfX19Y2xhc3MgaCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUpe3ZhciB0O3N1cGVyKGV8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuXCIpLHRoaXMubmFtZT1cIlN0YW5kYXJkRXJyb3JcIix0aGlzLnR5cGU9XCJzdGFuZGFyZFwiLHQ9bmV3LnRhcmdldC5wcm90b3R5cGUsT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLHQpOnRoaXMuX19wcm90b19fPXQsXCJmdW5jdGlvblwiPT10eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxuZXcudGFyZ2V0KTp0aGlzLnN0YWNrPW5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrfX1jbGFzcyB1IGV4dGVuZHMgaHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIlVuc3VwcG9ydGVkIGJyb3dzZXIgZXJyb3JcIiksdGhpcy5uYW1lPVwiVW5zdXBwb3J0ZWRCcm93c2VyRXJyb3JcIix0aGlzLnR5cGU9XCJ1bnN1cHBvcnRlZF9icm93c2VyXCJ9fXZhciBwLG0seSxnLHYsUyxiLEM7IWZ1bmN0aW9uKGUpe2VbZS5DaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkPTBdPVwiQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZFwiLGVbZS5DdXN0b21lck5vdEluaXRpYWxpemVkPTFdPVwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZFwiLGVbZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ9Ml09XCJQYXltZW50Tm90SW5pdGlhbGl6ZWRcIixlW2UuU2hpcHBpbmdOb3RJbml0aWFsaXplZD0zXT1cIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWRcIixlW2UuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZD00XT1cIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWRcIn0ocHx8KHA9e30pKTtjbGFzcyBmIGV4dGVuZHMgaHtjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBwLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtjYXNlIHAuUGF5bWVudE5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtjYXNlIHAuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgcC5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtkZWZhdWx0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIn19KGUpKSx0aGlzLnN1YnR5cGU9ZSx0aGlzLm5hbWU9XCJOb3RJbml0aWFsaXplZEVycm9yXCIsdGhpcy50eXBlPVwibm90X2luaXRpYWxpemVkXCJ9fSFmdW5jdGlvbihlKXtlLkVTVElNQVRFRD1cIkVTVElNQVRFRFwiLGUuRklOQUw9XCJGSU5BTFwiLGUuTk9UX0NVUlJFTlRMWV9LTk9XTj1cIk5PVF9DVVJSRU5UTFlfS05PV05cIn0obXx8KG09e30pKSxmdW5jdGlvbihlKXtlLkNvbXBsZXRlZD1cIkNPTVBMRVRFRFwiLGUuUGVuZGluZz1cIlBFTkRJTkdcIixlLkZhaWxlZD1cIkZBSUxFRFwifSh5fHwoeT17fSkpLGZ1bmN0aW9uKGUpe2UuVFJVU1RMWT1cInRydXN0bHlcIn0oZ3x8KGc9e30pKSxmdW5jdGlvbihlKXtlLlNVQ0NFRURFRD1cInN1Y2NlZWRlZFwiLGUuRkFJTEVEPVwiZmFpbGVkXCIsZS5DQU5DRUxFRD1cImNhbmNlbGxlZFwiLGUuVU5SRUNPR05JWkVEPVwidW5yZWNvZ25pemVkXCJ9KHZ8fCh2PXt9KSksZnVuY3Rpb24oZSl7ZS5DdXN0b21lcj1cIkNVU1RPTUVSXCIsZS5NZXJjaGFudD1cIk1FUkNIQU5UXCIsZS5OZXR3b3JrPVwiTkVUV09SS1wiLGUuSW50ZXJuYWw9XCJJTlRFUk5BTFwiLGUuVW5rbm93bj1cIlVOS05PV05cIn0oU3x8KFM9e30pKSxmdW5jdGlvbihlKXtlLktvdW50Tm90RW5hYmxlZD1cIkRBVEFfQ09MTEVDVE9SX0tPVU5UX05PVF9FTkFCTEVEXCJ9KGJ8fChiPXt9KSksZnVuY3Rpb24oZSl7ZS5WaXNhPVwidmlzYVwiLGUuTWFzdGVyY2FyZD1cIm1hc3RlcmNhcmRcIixlLkFtZXJpY2FuRXhwcmVzcz1cImFtZXJpY2FuLWV4cHJlc3NcIixlLkRpbmVyc0NsdWI9XCJkaW5lcnMtY2x1YlwiLGUuRGlzY292ZXI9XCJkaXNjb3ZlclwiLGUuSmNiPVwiamNiXCIsZS5VbmlvblBheT1cInVuaW9uLXBheVwiLGUuTWFlc3Rybz1cIm1hZXN0cm9cIixlLkVsbz1cImVsb1wiLGUuTWlyPVwibWlyXCIsZS5IaXBlcj1cImhpcGVyXCIsZS5IaXBlcmNhcmQ9XCJoaXBlcmNhcmRcIn0oQ3x8KEM9e30pKTt2YXIgdyxfLFAsVD1mdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gbmV3KGl8fChpPVByb21pc2UpKShmdW5jdGlvbihvLGEpe2Z1bmN0aW9uIHIoZSl7dHJ5e2wobi5uZXh0KGUpKX1jYXRjaChlKXthKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtsKG4udGhyb3coZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGwoZSl7dmFyIHQ7ZS5kb25lP28oZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2YgaT90Om5ldyBpKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihyLHMpfWwoKG49bi5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfTtjbGFzcyBJe2NvbnN0cnVjdG9yKGUpe3RoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyPWV9aW5pdGlhbGl6ZShlKXt0aGlzLnNldENsaWVudFRva2VuKGUpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBUKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnRlYXJkb3duTW9kdWxlKHRoaXMuZGF0YUNvbGxlY3RvciksdGhpcy5kYXRhQ29sbGVjdG9yPXZvaWQgMH0pfWdldENsaWVudCgpe3JldHVybiBUKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5jbGllbnQpe2NvbnN0IGU9dGhpcy5nZXRDbGllbnRUb2tlbk9yVGhyb3coKSx0PXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRDbGllbnQoKTt0aGlzLmNsaWVudD15aWVsZCB0LmNyZWF0ZSh7YXV0aG9yaXphdGlvbjplfSl9cmV0dXJuIHRoaXMuY2xpZW50fSl9Z2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coZSl7cmV0dXJuIFQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IHQ9e2RldmljZURhdGE6dm9pZCAwLHRlYXJkb3duOigpPT5Qcm9taXNlLnJlc29sdmUoKX07aWYoIXRoaXMuZGF0YUNvbGxlY3Rvcil0cnl7Y29uc3QgdD15aWVsZCB0aGlzLmdldENsaWVudCgpLGk9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZERhdGFDb2xsZWN0b3IoKSxuPU9iamVjdC5hc3NpZ24oe2NsaWVudDp0LGtvdW50OiEwfSxlKTt0aGlzLmRhdGFDb2xsZWN0b3I9eWllbGQgaS5jcmVhdGUobil9Y2F0Y2goZSl7aWYoZnVuY3Rpb24oZSl7cmV0dXJuIEJvb2xlYW4oXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lJiYoXCJ0eXBlXCJpbiBlfHxcIm1lc3NhZ2VcImluIGV8fFwiY29kZVwiaW4gZSkpfShlKSYmZS5jb2RlPT09Yi5Lb3VudE5vdEVuYWJsZWQpcmV0dXJuIHQ7dGhyb3cgZX1yZXR1cm4gdGhpcy5kYXRhQ29sbGVjdG9yfSl9Z2V0QnJhaW50cmVlR29vZ2xlUGF5bWVudCgpe3JldHVybiBUKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5nb29nbGVQYXltZW50KXtjb25zdFtlLHRdPXlpZWxkIFByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRHb29nbGVQYXltZW50KCldKTt0aGlzLmdvb2dsZVBheW1lbnQ9eWllbGQgdC5jcmVhdGUoe2NsaWVudDplfSl9cmV0dXJuIHRoaXMuZ29vZ2xlUGF5bWVudH0pfWdldEJyYWludHJlZVRocmVlRFMoKXtyZXR1cm4gVCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMudGhyZWVEUyl7Y29uc3RbZSx0XT15aWVsZCBQcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkM0RTKCldKTt0aGlzLnRocmVlRFM9eWllbGQgdC5jcmVhdGUoe2NsaWVudDplLHZlcnNpb246Mn0pfXJldHVybiB0aGlzLnRocmVlRFN9KX1nZXRCcmFpbnRyZWVMb2NhbFBheW1lbnQoZSl7cmV0dXJuIFQodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudCl7Y29uc3RbdCxpXT15aWVsZCBQcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkTG9jYWxQYXltZW50KCldKTt0aGlzLmJyYWludHJlZUxvY2FsUGF5bWVudD15aWVsZCBuZXcgUHJvbWlzZSgobixvKT0+e2kuY3JlYXRlKHtjbGllbnQ6dCxtZXJjaGFudEFjY291bnRJZDplfSwoZSx0KT0+e2UmJm8oZSksbih0KX0pfSl9cmV0dXJuIHRoaXMuYnJhaW50cmVlTG9jYWxQYXltZW50fSl9Z2V0VXNCYW5rQWNjb3VudCgpe3JldHVybiBUKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy51c0JhbmtBY2NvdW50KXtjb25zdCBlPXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCksdD15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVXNCYW5rQWNjb3VudCgpO3RoaXMudXNCYW5rQWNjb3VudD15aWVsZCB0LmNyZWF0ZSh7Y2xpZW50OmV9KX1yZXR1cm4gdGhpcy51c0JhbmtBY2NvdW50fSl9Z2V0QnJhaW50cmVlVmlzYUNoZWNrb3V0KCl7cmV0dXJuIHRoaXMudmlzYUNoZWNrb3V0fHwodGhpcy52aXNhQ2hlY2tvdXQ9UHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2xpZW50KCksdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFZpc2FDaGVja291dCgpXSkudGhlbigoW2UsdF0pPT50LmNyZWF0ZSh7Y2xpZW50OmV9KSkpLHRoaXMudmlzYUNoZWNrb3V0fWdldFZpc2FDaGVja291dFNkayhlKXtyZXR1cm4gVCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMudmlzYUNoZWNrb3V0U0RLfHwodGhpcy52aXNhQ2hlY2tvdXRTREs9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFZpc2FDaGVja291dFNkayhlKSksdGhpcy52aXNhQ2hlY2tvdXRTREt9KX1nZXRWZW5tb0NoZWNrb3V0T3JUaHJvdygpe3JldHVybiBUKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy5icmFpbnRyZWVWZW5tbyl7Y29uc3QgZT15aWVsZCB0aGlzLmdldENsaWVudCgpLHQ9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZFZlbm1vQ2hlY2tvdXQoKSxpPXtjbGllbnQ6ZSxhbGxvd0Rlc2t0b3A6ITAscGF5bWVudE1ldGhvZFVzYWdlOlwibXVsdGlfdXNlXCJ9LG49eWllbGQgdC5jcmVhdGUoaSk7aWYoIW4uaXNCcm93c2VyU3VwcG9ydGVkKCkpdGhyb3cgbmV3IHU7dGhpcy5icmFpbnRyZWVWZW5tbz1ufXJldHVybiB0aGlzLmJyYWludHJlZVZlbm1vfSl9c2V0Q2xpZW50VG9rZW4oZSl7dGhpcy5jbGllbnRUb2tlbj1lfWdldENsaWVudFRva2VuT3JUaHJvdygpe2lmKCF0aGlzLmNsaWVudFRva2VuKXRocm93IG5ldyBmKHAuUGF5bWVudE5vdEluaXRpYWxpemVkKTtyZXR1cm4gdGhpcy5jbGllbnRUb2tlbn10ZWFyZG93bk1vZHVsZShlKXtyZXR1cm4gZT9lLnRlYXJkb3duKCk6UHJvbWlzZS5yZXNvbHZlKCl9fWNsYXNzIGsgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuXCIpLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yXCIsdGhpcy50eXBlPVwicGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlXCJ9fSFmdW5jdGlvbihlKXtlLlNhbmRib3g9XCJzYW5kYm94XCIsZS5Qcm9kdWN0aW9uPVwicHJvZHVjdGlvblwifSh3fHwodz17fSkpLGZ1bmN0aW9uKGUpe2UuQ2xpZW50PVwiY2xpZW50XCIsZS5EYXRhQ29sbGVjdG9yPVwiZGF0YUNvbGxlY3RvclwiLGUuRmFzdGxhbmU9XCJmYXN0bGFuZVwiLGUuR29vZ2xlUGF5bWVudD1cImdvb2dsZVBheW1lbnRcIixlLkhvc3RlZEZpZWxkcz1cImhvc3RlZEZpZWxkc1wiLGUuTG9jYWxQYXltZW50PVwibG9jYWxQYXltZW50XCIsZS5QYXlwYWw9XCJwYXlwYWxcIixlLlBheXBhbENoZWNrb3V0PVwicGF5cGFsQ2hlY2tvdXRcIixlLlRocmVlRFNlY3VyZT1cInRocmVlRFNlY3VyZVwiLGUuVXNCYW5rQWNjb3VudD1cInVzQmFua0FjY291bnRcIixlLlZlbm1vPVwidmVubW9cIixlLlZpc2FDaGVja291dD1cInZpc2FDaGVja291dFwifShffHwoXz17fSkpLGZ1bmN0aW9uKGUpe2UuQ2FyZENvZGU9XCJjYXJkQ29kZVwiLGUuQ2FyZENvZGVWZXJpZmljYXRpb249XCJjYXJkQ29kZVZlcmlmaWNhdGlvblwiLGUuQ2FyZEV4cGlyeT1cImNhcmRFeHBpcnlcIixlLkNhcmROYW1lPVwiY2FyZE5hbWVcIixlLkNhcmROdW1iZXI9XCJjYXJkTnVtYmVyXCIsZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uPVwiY2FyZE51bWJlclZlcmlmaWNhdGlvblwifShQfHwoUD17fSkpO2NvbnN0IE09e1tkXTp7W18uQ2xpZW50XTpcInNoYTM4NC0yNkJYRE5uSkkyM0pZUnlGQmo0eGU0c1ZOclVTU2lTU3UxMWt4VlhOTS92RVBPTm00THVMMDB3NlphVGdRZXd0XCIsW18uUGF5cGFsQ2hlY2tvdXRdOlwic2hhMzg0LUIrdnpiWnduUXR6V0J0aHBrVDRUWEtVaWJPNjV0eWVLN2VDeFN2cGJsZ3ByVGVwMitJQVhCMkN4eGpybjcxME9cIixbXy5QYXlwYWxdOlwic2hhMzg0LXV5QUdMMS8zK1hKQUhuR29OeTRlQ29YZHpKNGY3SWx6cCs2dzlQTm5FanM2RENDejlXTXlKak1OMWd6Yzc4VStcIixbXy5Mb2NhbFBheW1lbnRdOlwic2hhMzg0LUxJdk9FTWtJVkV3VnVZQmRWT1FjMUFDNVliR0dsd3lmVWhlUzBBQ0syMThEMlNUdVZZUWxaNEZ5RVBvd0FFZlRcIixbXy5EYXRhQ29sbGVjdG9yXTpcInNoYTM4NC0xYm85SkR6K0tzY3RoYzA4NWNDS1d1cjhDTHdVb0Jwb055eHNEaTc5MzJtQ2wwekZxM0E1bXYrRlFMdzlHSHBWXCIsW18uVXNCYW5rQWNjb3VudF06XCJzaGEzODQteG1IQlZhVSt3NzRWK09lYkQzQWFQT05GeEhVR01mK1FSczhHL0p4VlBYTk5QN01EYTJqTDBJQ1dISWUydFRmSlwiLFtfLkdvb2dsZVBheW1lbnRdOlwic2hhMzg0LVdLREpsOG1xb1A4MnFacE1HSDZBYlp4bnZYblNXOElMVjRNNjRDeU1MaXVnR013dTdMeVA4OXdqQ2tIcXNpQmVcIixbXy5UaHJlZURTZWN1cmVdOlwic2hhMzg0LVZRVWxwR0h6c0d2czVYZWlHRmlwN0VYUnN2b0hXRVhEVm1nQ2FjZmJ5aWVaSTltZEJPcXEzTlNveW8yOE9DT0JcIixbXy5WaXNhQ2hlY2tvdXRdOlwic2hhMzg0LXl4N21BRGZ6VE4wVDQzUTZybEg0OUxJZzFFSjBpVVpnQnAvRWN6WDlMWHNVR2t5U2d4ckQrbldIUVJCa3lmb1RcIixbXy5WZW5tb106XCJzaGEzODQtUVg0clBqb2oxWkRodUcwYVN5S3M1NmxFS0RxVE1UY2pZeFVIWTFTek81VlpEc3FJRTJOVGtxb3Q3S05TQ3lvdlwiLFtfLkhvc3RlZEZpZWxkc106XCJzaGEzODQtVnZZQkFDZlN1MENyL0ozMnVLbXhHN0FYY05PSkUxQXpJSUwza2Jpa3lTN1lLcDVmejVJcytOek5QL2x5YXVOeVwiLFtfLkZhc3RsYW5lXTpcInNoYTM4NC05b0dzWk1SWndwR3RERURZYS9kRnQ3NmRFQ3FqMXhBbmk5Z0lLZ2MzS2ZNSWlSblI3M25FZWVVRExpQnp4aEZhXCJ9LFtsXTp7W18uQ2xpZW50XTpcInNoYTM4NC1vK25iUUdjd05OeElCZVhldTMrWG1iU3ErQ2c4UjNFTjNOMGw1aFhDZ01NVTJSR1kwdDF6MExyb1NFSUFiZkFPXCIsW18uUGF5cGFsQ2hlY2tvdXRdOlwic2hhMzg0LVdyZmJXUEJTNG1IODZHQW95Y1BTZ2lIOGhROEtIN0E2N0M5M0hqaHVudi94aE5rMllwQm4zd2JGQTRGaGc5VS9cIixbXy5QYXlwYWxdOlwic2hhMzg0LVZGMzg5bnZ2clJVZ0RzVFhNeFRZT1JEdFZlZ0I5SVFhM0N4ci8vRHlKbkxZbno4L1g4VkN6RXZjazJjK01lZ3RcIixbXy5Mb2NhbFBheW1lbnRdOlwic2hhMzg0LXRaS3gyckVRYmZtWnBvUFNZNVZQbUpFaGFxNFg3NWRMdndITXMzVkU5VStDOGxQeXcraFdUSUwxK0dQdldDSUhcIixbXy5EYXRhQ29sbGVjdG9yXTpcInNoYTM4NC1FNmszd09wUDdzeUNERHdhUkRMRjA2OTQyWTAwTmtid0p2V2kyT1FYd3dLekd3RzVmZDNFN1JGVXZDQ2VjZnZPXCIsW18uVXNCYW5rQWNjb3VudF06XCJzaGEzODQtMjU4Rk9OOExaR0cwVzlRYXo0SmlqODNwWkh1MzBZbktqSkE3Z051bExCaDZDY2xrdWNnRit0SERRdVlGUllmV1wiLFtfLkdvb2dsZVBheW1lbnRdOlwic2hhMzg0LXRhSjJwLzArbjBWSDMyOFBPQW9CaXVFYkwzdG5IVVRFOVM0MmhLMVYrVHhzM1grUVlqWk95S1czNUpnSFJGZk9cIixbXy5UaHJlZURTZWN1cmVdOlwic2hhMzg0LStOU1pINFpqM3NPNWJkV3ZQS2hVNU4xNlFEeGV1ZVRWVG5VVmVsZWVFU2toTFNhejRPYjFoaC81bXllY2M5WW1cIixbXy5WaXNhQ2hlY2tvdXRdOlwic2hhMzg0LTY2RGlCamdoeGsxT21Cajhha3NOOGdiUStDd29RY3gxdlBmaVhVTjA4ZzFpUVZNK0J3ZXdGMHA3dG9NM2k3U1NcIixbXy5WZW5tb106XCJzaGEzODQtQjVVd1k0MmtFNFJvTG9XYlE3WXBxb3NVbFVhZDIvRGxHV2l3MEhob1piU1BrMzBDUUFhU0ExMG9oeUxEVGtEVVwiLFtfLkhvc3RlZEZpZWxkc106XCJzaGEzODQtQXc5RWVzU2FVZVd4ZTM2UHFFSGlPeU95T3E4TTZDSWIxZ3c3L3lITlZQUnpHdEZYWGNkMk9ROHFYcklsT2oyUFwiLFtfLkZhc3RsYW5lXTpcInNoYTM4NC1yaEJMMWhwWjcxSnFHKzJUc1QwRGloNDdtYmp4OGNqSkNwZVpqazl0dzNkZjFnRk1LZkNUbU15WnVuaHI3SDRZXCJ9LFtzXTp7W18uQ2xpZW50XTpcInNoYTM4NC0wV054a3NJcFJQK2ZZWmlJZHIxMmc2REJVUWZMRHpZQ1FKWnRSL0M4S2tjd1NHaFBIZmNGcDN0VGFHY015RlRxXCIsW18uUGF5cGFsQ2hlY2tvdXRdOlwic2hhMzg0LWxXTTFqazRCT3hvRE5WNktvcDd0Vk52UWdJTmxtRVZ6MGMvT3dNK0hOSEszUUM4eHF3ZDU0T3ZydDJRUkRUamhcIixbXy5QYXlwYWxdOlwic2hhMzg0LWZYVW1WeEMyRU1aQkRYWjdlVEhTVEwvTEZCckhlai9NU1hUL3ZUQlh2cmE0bHpnTE5HdlJFQXAreDBHWU9idUhcIixbXy5Mb2NhbFBheW1lbnRdOlwic2hhMzg0LXBoYTF4R3VHU2ttWkg1eDlhcUh2UmFPNHhMZWE3cm1RLzc5UEZqOXp4Tnp4dUZjT1daZzdnT1A3RmlieWdPRUNcIixbXy5EYXRhQ29sbGVjdG9yXTpcInNoYTM4NC1RNlBJMkY5ZWVrV2JBeGhyb3libCthRWN2cWhkb3dOL0VRbEd3QlV5Sk96UEZuOTk4MnU5eGw2U1U2WGZHS3pjXCIsW18uVXNCYW5rQWNjb3VudF06XCJzaGEzODQtVzNSTFFTS0pMMXRRMytZN21QNnRta2FtdFo4YlY0WXcvWHhMOUpqNUp0WEhyYUQ4bG9NRjhoQUlHNW0yeks3RlwiLFtfLkdvb2dsZVBheW1lbnRdOlwic2hhMzg0LVRJVFFNc0ZXQTNlbEROR1AybVd6Mm9LQm80cWp0K1RscXpvdmNhUG9lQmlBaC93UEJpNm5hZTUwQURkZ1UxL2lcIixbXy5UaHJlZURTZWN1cmVdOlwic2hhMzg0LVlpeWNZTjg5WmxML0V2Y2FxNHkxYWpXMW1oZDdKWWZaQkR1T3dIdEluNC9Kbm0yMEdMKy9YQ00rellBd1dEOERcIixbXy5WaXNhQ2hlY2tvdXRdOlwic2hhMzg0LS9PZGFUdjlxcmtLempPYnRVZTZ5emZEaEhvekZXLyt1WGxyU2w3MzZzT1pSSnBqR1FFVHZwWVhxTUZGZzY5eHZcIixbXy5WZW5tb106XCJzaGEzODQtZEErb2pkVzl2YkpTNEphdmNYeU9zOWQ1dVpISmc1ZE50WXVwb1BTSDJ6c1hJaVlEVlM1YW1MYi91OHFtUTZvelwiLFtfLkhvc3RlZEZpZWxkc106XCJzaGEzODQtMzFaa1M1OCtpYVdzVzA2ZnRXNTJ6elZaRnA0M1dQZDdwTllSaWRkWXluU05nNk9oN1dHYlNGR29yQVVINlQxelwiLFtfLkZhc3RsYW5lXTpcInNoYTM4NC1qbGJyd052TDNIdkxBVUN0TFNtcm5RMkdIMXVkQ1VyUlMvYlZtUmVBUzVmdUlWdmNXOFBrby9Ha2c4MnRsZ3RyXCJ9fTt2YXIgQSxOLE89ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIG5ldyhpfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24obyxhKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXthKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9vKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgRXtjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c9dCx0aGlzLmJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyPWl9bG9hZENsaWVudCgpe3JldHVybiBPKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhfLkNsaWVudCxcImNsaWVudC5taW4uanNcIil9KX1sb2FkRmFzdGxhbmUoKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5GYXN0bGFuZSxcImZhc3RsYW5lLm1pbi5qc1wiKX0pfWxvYWRQYXlwYWxDaGVja291dCgpe3JldHVybiBPKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhfLlBheXBhbENoZWNrb3V0LFwicGF5cGFsLWNoZWNrb3V0Lm1pbi5qc1wiKX0pfWxvYWRQYXlwYWwoKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5QYXlwYWwsXCJwYXlwYWwubWluLmpzXCIpfSl9bG9hZExvY2FsUGF5bWVudCgpe3JldHVybiBPKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhfLkxvY2FsUGF5bWVudCxcImxvY2FsLXBheW1lbnQubWluLmpzXCIpfSl9bG9hZERhdGFDb2xsZWN0b3IoKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5EYXRhQ29sbGVjdG9yLFwiZGF0YS1jb2xsZWN0b3IubWluLmpzXCIpfSl9bG9hZFVzQmFua0FjY291bnQoKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5Vc0JhbmtBY2NvdW50LFwidXMtYmFuay1hY2NvdW50Lm1pbi5qc1wiKX0pfWxvYWRHb29nbGVQYXltZW50KCl7cmV0dXJuIE8odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KF8uR29vZ2xlUGF5bWVudCxcImdvb2dsZS1wYXltZW50Lm1pbi5qc1wiKX0pfWxvYWQzRFMoKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5UaHJlZURTZWN1cmUsXCJ0aHJlZS1kLXNlY3VyZS5taW4uanNcIil9KX1sb2FkVmlzYUNoZWNrb3V0KCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coXy5WaXNhQ2hlY2tvdXQsXCJ2aXNhLWNoZWNrb3V0Lm1pbi5qc1wiKX1sb2FkVmVubW9DaGVja291dCgpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KF8uVmVubW8sXCJ2ZW5tby5taW4uanNcIil9bG9hZEhvc3RlZEZpZWxkcygpe3JldHVybiBPKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyhfLkhvc3RlZEZpZWxkcyxcImhvc3RlZC1maWVsZHMubWluLmpzXCIpfSl9bG9hZFZpc2FDaGVja291dFNkayhlKXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYodGhpcy5icmFpbnRyZWVIb3N0V2luZG93LlYpcmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WO2NvbnN0IHQ9ZT9cInNoYTM4NC0wZXUxczFHdHF6WGxMOUR0TGdtd3pDNVdXbEVIL0FEUk0wbjM4Y1ZRa3Z0VCtXL2dleTk2cmNiMUx3dVVPUERtXCI6XCJzaGEzODQtMWYxY3N2UDNaRnhnNGRJTEgxR2FZNExIbFowb1g3Ums4M3J4bUxsd2JuSWk0VE0wTll6WG9ldjFWb0VpVkRTNlwiO3JldHVybiB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAvLyR7ZT9cInNhbmRib3gtXCI6XCJcIn1hc3NldHMuc2VjdXJlLmNoZWNrb3V0LnZpc2EuY29tL2NoZWNrb3V0LXdpZGdldC9yZXNvdXJjZXMvanMvaW50ZWdyYXRpb24vdjEvc2RrLmpzYCx7YXN5bmM6ITAsYXR0cmlidXRlczp7aW50ZWdyaXR5OnQsY3Jvc3NvcmlnaW46XCJhbm9ueW1vdXNcIn19KS50aGVuKCgpPT57aWYoIXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WKXRocm93IG5ldyBrO3JldHVybiB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVn0pfSl9bG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coZSx0KXtyZXR1cm4gTyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5nZXRCcmFpbnRyZWVNb2R1bGUoZSk7aWYoaSlyZXR1cm4gaTtjb25zdCBuPXRoaXMuYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIuZ2V0U0RLVmVyc2lvbigpLG89YC8vanMuYnJhaW50cmVlZ2F0ZXdheS5jb20vd2ViLyR7bn0vanMvJHt0fWAsYT1uIGluIE0/dGhpcy5nZXRJbnRlZ3JpdHlWYWx1ZXNCeU1vZHVsZU5hbWUoZSxuKTp2b2lkIDA7aWYoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChvLGE/e2FzeW5jOiEwLGF0dHJpYnV0ZXM6e2ludGVncml0eTphLGNyb3Nzb3JpZ2luOlwiYW5vbnltb3VzXCJ9fTp2b2lkIDApLGk9dGhpcy5nZXRCcmFpbnRyZWVNb2R1bGUoZSksIWkpdGhyb3cgbmV3IGs7cmV0dXJuIGl9KX1nZXRCcmFpbnRyZWVNb2R1bGUoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuYnJhaW50cmVlKXx8dm9pZCAwPT09dD92b2lkIDA6dFtlXX1nZXRJbnRlZ3JpdHlWYWx1ZXNCeU1vZHVsZU5hbWUoZSx0KXtjb25zdCBpPU1bdF1bZV07aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmaWxlTmFtZSB2YWx1ZVwiKTtyZXR1cm4gaX19ZnVuY3Rpb24gRChlLHQpe3JldHVybiBPYmplY3QuYXNzaWduKGUse3Jlc29sdmVJZHM6dH0pfSFmdW5jdGlvbihlKXtlW2UuTWlzc2luZ0JpbGxpbmdBZGRyZXNzPTBdPVwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzXCIsZVtlLk1pc3NpbmdDYXJ0PTFdPVwiTWlzc2luZ0NhcnRcIixlW2UuTWlzc2luZ0NoZWNrb3V0PTJdPVwiTWlzc2luZ0NoZWNrb3V0XCIsZVtlLk1pc3NpbmdDb25zaWdubWVudHM9M109XCJNaXNzaW5nQ29uc2lnbm1lbnRzXCIsZVtlLk1pc3NpbmdDdXN0b21lcj00XT1cIk1pc3NpbmdDdXN0b21lclwiLGVbZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc9NV09XCJNaXNzaW5nQ2hlY2tvdXRDb25maWdcIixlW2UuTWlzc2luZ09yZGVyPTZdPVwiTWlzc2luZ09yZGVyXCIsZVtlLk1pc3NpbmdPcmRlckNvbmZpZz03XT1cIk1pc3NpbmdPcmRlckNvbmZpZ1wiLGVbZS5NaXNzaW5nT3JkZXJJZD04XT1cIk1pc3NpbmdPcmRlcklkXCIsZVtlLk1pc3NpbmdQYXltZW50PTldPVwiTWlzc2luZ1BheW1lbnRcIixlW2UuTWlzc2luZ1BheW1lbnRJZD0xMF09XCJNaXNzaW5nUGF5bWVudElkXCIsZVtlLk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudD0xMV09XCJNaXNzaW5nUGF5bWVudEluc3RydW1lbnRcIixlW2UuTWlzc2luZ1BheW1lbnRNZXRob2Q9MTJdPVwiTWlzc2luZ1BheW1lbnRNZXRob2RcIixlW2UuTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybD0xM109XCJNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsXCIsZVtlLk1pc3NpbmdQYXltZW50U3RhdHVzPTE0XT1cIk1pc3NpbmdQYXltZW50U3RhdHVzXCIsZVtlLk1pc3NpbmdQYXltZW50VG9rZW49MTVdPVwiTWlzc2luZ1BheW1lbnRUb2tlblwiLGVbZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzPTE2XT1cIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3NcIn0oQXx8KEE9e30pKTtjbGFzcyBMIGV4dGVuZHMgaHtjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBBLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBBLk1pc3NpbmdDYXJ0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBBLk1pc3NpbmdDb25zaWdubWVudHM6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgQS5NaXNzaW5nQ2hlY2tvdXQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBBLk1pc3NpbmdDdXN0b21lcjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEEuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOmNhc2UgQS5NaXNzaW5nT3JkZXJDb25maWc6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEEuTWlzc2luZ09yZGVyOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgQS5NaXNzaW5nT3JkZXJJZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuXCI7Y2FzZSBBLk1pc3NpbmdQYXltZW50OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBBLk1pc3NpbmdQYXltZW50VG9rZW46cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuXCI7Y2FzZSBBLk1pc3NpbmdQYXltZW50TWV0aG9kOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLlwiO2Nhc2UgQS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7ZGVmYXVsdDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuXCJ9fShlKSksdGhpcy5zdWJ0eXBlPWUsdGhpcy5uYW1lPVwiTWlzc2luZ0RhdGFFcnJvclwiLHRoaXMudHlwZT1cIm1pc3NpbmdfZGF0YVwifX1jbGFzcyBCIGV4dGVuZHMgaHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIkludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC5cIiksdGhpcy5uYW1lPVwiSW52YWxpZEFyZ3VtZW50RXJyb3JcIix0aGlzLnR5cGU9XCJpbnZhbGlkX2FyZ3VtZW50XCJ9fWNsYXNzIHogZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuXCIpLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvclwiLHRoaXMudHlwZT1cInBheW1lbnRfY2FuY2VsbGVkXCJ9fWNsYXNzIHggZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGJ1eSBub3cgY2FydCBjcmVhdGlvbiBwcm9jZXNzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKSx0aGlzLm5hbWU9XCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvclwiLHRoaXMudHlwZT1cImJ1eV9ub3dfY2FydF9jcmVhdGlvbl9lcnJvclwifX0hZnVuY3Rpb24oZSl7ZS5CUkFJTlRSRUU9XCJicmFpbnRyZWVcIixlLkJSQUlOVFJFRV9GQVNUTEFORT1cImJyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXRcIn0oTnx8KE49e30pKTt2YXIgVSxGLFY9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIG5ldyhpfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24obyxhKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXthKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9vKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07IWZ1bmN0aW9uKGUpe2UuU3VidG90YWw9XCJTdWJ0b3RhbFwiLGUuU2hpcHBpbmc9XCJTaGlwcGluZ1wifShVfHwoVT17fSkpLGZ1bmN0aW9uKGUpe2UuQmxhY2s9XCJibGFja1wiLGUuV2hpdGU9XCJ3aGl0ZVwiLGUuV2hpdGVCb3JkZXI9XCJ3aGl0ZS1ib3JkZXJcIn0oRnx8KEY9e30pKTtjbGFzcyBSe2NvbnN0cnVjdG9yKGUsdCxpLG4sYSl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLl9zZXNzaW9uRmFjdG9yeT1pLHRoaXMuX2JyYWludHJlZVNkaz1uLHRoaXMuX2FwcGxlUGF5U2NyaXB0TG9hZGVyPWEsdGhpcy5fb25BdXRob3JpemVDYWxsYmFjaz1vLHRoaXMuX3N1YlRvdGFsTGFiZWw9VS5TdWJ0b3RhbCx0aGlzLl9zaGlwcGluZ0xhYmVsPVUuU2hpcHBpbmd9aW5pdGlhbGl6ZShlKXt2YXIgdCxpO3JldHVybiBWKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDpuLGNvbnRhaW5lcklkOm8sYXBwbGVwYXk6YX09ZTtpZighbnx8IWEpdGhyb3cgbmV3IEwoQS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO2NvbnN0e29uUGF5bWVudEF1dGhvcml6ZTpyLGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOnMscmVxdWlyZXNTaGlwcGluZzpsfT1hO3RoaXMuX3JlcXVpcmVzU2hpcHBpbmc9bCx0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucz1zLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9cixzfHwoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3QgZD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHRoaXMuX3BheW1lbnRNZXRob2Q9ZC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSxkLmdldENhcnQoKSYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudmVyaWZ5Q2hlY2tvdXRTcGFtUHJvdGVjdGlvbigpKSwobnVsbD09PSh0PXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nYXRld2F5KT09PU4uQlJBSU5UUkVFJiZ0aGlzLl9wYXltZW50TWV0aG9kLmNsaWVudFRva2VuJiZ0aGlzLl9icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZSh0aGlzLl9wYXltZW50TWV0aG9kLmNsaWVudFRva2VuKSx0aGlzLl9hcHBsZVBheUJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24obyxudWxsPT09KGk9dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0eWxlT3B0aW9uKSx0aGlzLl9hcHBsZVBheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9oYW5kbGVXYWxsZXRCdXR0b25DbGljay5iaW5kKHRoaXMpKSxQcm9taXNlLnJlc29sdmUoKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fY3JlYXRlQnV0dG9uKGUsdCl7Y29uc3QgaT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTtpZighaSl0aHJvdyBuZXcgQihcIlVuYWJsZSB0byBjcmVhdGUgd2FsbGV0IGJ1dHRvbiB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC5cIik7Y29uc3Qgbj10aGlzLl9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQodCk7cmV0dXJuIGkuYXBwZW5kQ2hpbGQobiksbn1fY3JlYXRlQXBwbGVQYXlCdXR0b25FbGVtZW50KGUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFwcGxlLXBheS1idXR0b25cIik7cmV0dXJuIHQuc2V0QXR0cmlidXRlKFwiYnV0dG9uc3R5bGVcIiwoZT0+e3N3aXRjaChlKXtjYXNlIEYuV2hpdGU6cmV0dXJuXCJ3aGl0ZVwiO2Nhc2UgRi5XaGl0ZUJvcmRlcjpyZXR1cm5cIndoaXRlLW91dGxpbmVcIjtjYXNlIEYuQmxhY2s6ZGVmYXVsdDpyZXR1cm5cImJsYWNrXCJ9fSkoZSkpLHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicGxhaW5cIiksdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiLS1hcHBsZS1wYXktYnV0dG9uLXdpZHRoOiAxMDAlOyAtLWFwcGxlLXBheS1idXR0b24taGVpZ2h0OiA0MHB4OyAtLWFwcGxlLXBheS1idXR0b24tYm9yZGVyLXJhZGl1czogNHB4O1wiKSx0fV9oYW5kbGVXYWxsZXRCdXR0b25DbGljayhlKXt2YXIgdDtyZXR1cm4gVih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IEwoQS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7aWYodGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSl7Y29uc3R7Y291bnRyeUNvZGU6ZSxjdXJyZW5jeUNvZGU6aSxtZXJjaGFudENhcGFiaWxpdGllczpuLHN1cHBvcnRlZE5ldHdvcmtzOm8sc3RvcmVOYW1lOmF9PXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhLHI9dGhpcy5fZ2V0UmVxdWVzdFdpdGhFbXB0eVRvdGFsKGUsaSxvLG4pO3RoaXMuX3JlcXVpcmVzU2hpcHBpbmcmJihudWxsPT09KHQ9ci5yZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkcyl8fHZvaWQgMD09PXR8fHQucHVzaChcInBvc3RhbEFkZHJlc3NcIikpO2NvbnN0IHM9dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKHIpO3RoaXMuX2hhbmRsZUFwcGxlUGF5RXZlbnRzKHMsdGhpcy5fcGF5bWVudE1ldGhvZCxhKSxzLmJlZ2luKCl9ZWxzZXtjb25zdCBlPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx0PWUuZ2V0Q2FydE9yVGhyb3coKSxpPWUuZ2V0U3RvcmVDb25maWdPclRocm93KCksbj1lLmdldENoZWNrb3V0T3JUaHJvdygpLG89dGhpcy5fZ2V0QmFzZVJlcXVlc3QodCxuLGksdGhpcy5fcGF5bWVudE1ldGhvZCksYT10aGlzLl9zZXNzaW9uRmFjdG9yeS5jcmVhdGUobyk7dGhpcy5faGFuZGxlQXBwbGVQYXlFdmVudHMoYSx0aGlzLl9wYXltZW50TWV0aG9kLGkuc3RvcmVQcm9maWxlLnN0b3JlTmFtZSksYS5iZWdpbigpfX0pfV9nZXRSZXF1ZXN0V2l0aEVtcHR5VG90YWwoZSx0LGksbil7cmV0dXJue2NvdW50cnlDb2RlOmUsY3VycmVuY3lDb2RlOnQsc3VwcG9ydGVkTmV0d29ya3M6aSxtZXJjaGFudENhcGFiaWxpdGllczpuLHRvdGFsOntsYWJlbDpcIlwiLGFtb3VudDpcIjBcIix0eXBlOlwicGVuZGluZ1wifSxyZXF1aXJlZEJpbGxpbmdDb250YWN0RmllbGRzOltcInBvc3RhbEFkZHJlc3NcIl0scmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHM6W1wiZW1haWxcIixcInBob25lXCJdfX1fZ2V0QmFzZVJlcXVlc3QoZSx0LGksbil7dmFyIG87Y29uc3R7c3RvcmVQcm9maWxlOntzdG9yZUNvdW50cnlDb2RlOmEsc3RvcmVOYW1lOnJ9fT1pLHtjdXJyZW5jeTp7Y29kZTpzLGRlY2ltYWxQbGFjZXM6bH19PWUse2luaXRpYWxpemF0aW9uRGF0YTp7bWVyY2hhbnRDYXBhYmlsaXRpZXM6ZCxzdXBwb3J0ZWROZXR3b3JrczpjfX09bixoPWUubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjAsdT17cmVxdWlyZWRCaWxsaW5nQ29udGFjdEZpZWxkczpbXCJwb3N0YWxBZGRyZXNzXCJdLHJlcXVpcmVkU2hpcHBpbmdDb250YWN0RmllbGRzOltcImVtYWlsXCIsXCJwaG9uZVwiXSxjb3VudHJ5Q29kZTphLGN1cnJlbmN5Q29kZTpzLG1lcmNoYW50Q2FwYWJpbGl0aWVzOmQsc3VwcG9ydGVkTmV0d29ya3M6YyxsaW5lSXRlbXM6W10sdG90YWw6aD97bGFiZWw6cixhbW91bnQ6YCR7dC5ncmFuZFRvdGFsLnRvRml4ZWQobCl9YCx0eXBlOlwicGVuZGluZ1wifTp7bGFiZWw6cixhbW91bnQ6YCR7dC5ncmFuZFRvdGFsLnRvRml4ZWQobCl9YCx0eXBlOlwiZmluYWxcIn19O2lmKGgpbnVsbD09PShvPXUucmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHMpfHx2b2lkIDA9PT1vfHxvLnB1c2goXCJwb3N0YWxBZGRyZXNzXCIpO2Vsc2V7Y29uc3QgZT1be2xhYmVsOnRoaXMuX3N1YlRvdGFsTGFiZWwsYW1vdW50OmAke3Quc3VidG90YWwudG9GaXhlZChsKX1gfV07dC50YXhlcy5mb3JFYWNoKHQ9PmUucHVzaCh7bGFiZWw6dC5uYW1lLGFtb3VudDpgJHt0LmFtb3VudC50b0ZpeGVkKGwpfWB9KSksdS5saW5lSXRlbXM9ZX1yZXR1cm4gdX1faGFuZGxlQXBwbGVQYXlFdmVudHMoZSx0LGkpe2Uub252YWxpZGF0ZW1lcmNoYW50PWk9PlYodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtib2R5Om59PXlpZWxkIHRoaXMuX29uVmFsaWRhdGVNZXJjaGFudCh0LGkpO2UuY29tcGxldGVNZXJjaGFudFZhbGlkYXRpb24obil9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiTWVyY2hhbnQgdmFsaWRhdGlvbiBmYWlsZWRcIil9fSksdGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMmJiF0aGlzLl9yZXF1aXJlc1NoaXBwaW5nJiYoZS5vbnBheW1lbnRtZXRob2RzZWxlY3RlZD0oKT0+Vih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fY3JlYXRlQnV5Tm93Q2FydCgpLHRoaXMuX2hhbmRsZVBheW1lbnRNZXRob2RTZWxlY3RlZChlKX0pKSxlLm9uc2hpcHBpbmdjb250YWN0c2VsZWN0ZWQ9dD0+Vih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMmJnRoaXMuX3JlcXVpcmVzU2hpcHBpbmcmJih5aWVsZCB0aGlzLl9jcmVhdGVCdXlOb3dDYXJ0KCkpLHlpZWxkIHRoaXMuX2hhbmRsZVNoaXBwaW5nQ29udGFjdFNlbGVjdGVkKGUsaSx0KX0pLGUub25zaGlwcGluZ21ldGhvZHNlbGVjdGVkPXQ9PlYodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSxpLHQpfSksZS5vbmNhbmNlbD0oKT0+Vih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IGU9YC9yZW1vdGUtY2hlY2tvdXQvJHt0LmlkfS9zaWdub3V0YDtyZXR1cm4geWllbGQgdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoZSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoKX1jYXRjaChlKXt0aHJvdyBuZXcgen19KSxlLm9ucGF5bWVudGF1dGhvcml6ZWQ9aT0+Vih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX29uUGF5bWVudEF1dGhvcml6ZWQoaSxlLHQpfSl9X2NyZWF0ZUJ1eU5vd0NhcnQoKXt2YXIgZSx0O3JldHVybiBWKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3QgaT1udWxsPT09KHQ9bnVsbD09PShlPXRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNhbGwoZSk7aWYoIWkpdGhyb3cgbmV3IEwoQS5NaXNzaW5nQ2FydCk7Y29uc3Qgbj15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoaSk7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQobi5pZCk7Y29uc3Qgbz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse3Nob3VsZEV4ZWN1dGVTcGFtQ2hlY2s6YX09by5nZXRDaGVja291dE9yVGhyb3coKTthJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS52ZXJpZnlDaGVja291dFNwYW1Qcm90ZWN0aW9uKCkpfWNhdGNoKGUpe3Rocm93IG5ldyB4fX0pfV9oYW5kbGVQYXltZW50TWV0aG9kU2VsZWN0ZWQoZSl7Y29uc3QgdD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksaT10LmdldENhcnRPclRocm93KCksbj10LmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLG89dC5nZXRDaGVja291dE9yVGhyb3coKTtpZighdGhpcy5fcGF5bWVudE1ldGhvZHx8IXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBMKEEuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0IGE9dGhpcy5fZ2V0QmFzZVJlcXVlc3QoaSxvLG4sdGhpcy5fcGF5bWVudE1ldGhvZCk7ZGVsZXRlIGEudG90YWwudHlwZSxlLmNvbXBsZXRlUGF5bWVudE1ldGhvZFNlbGVjdGlvbih7bmV3VG90YWw6YS50b3RhbCxuZXdMaW5lSXRlbXM6YS5saW5lSXRlbXN9KX1faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSx0LGkpe3ZhciBuO3JldHVybiBWKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBvPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoaS5zaGlwcGluZ0NvbnRhY3QpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhvKX1jYXRjaCh0KXt0aHJvdyBlLmFib3J0KCksbmV3IEVycm9yKFwiU2hpcHBpbmcgYWRkcmVzcyB1cGRhdGUgZmFpbGVkXCIpfWxldCBhPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtjb25zdHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpyfX09YS5nZXRDYXJ0T3JUaHJvdygpO2xldCBzPWEuZ2V0Q2hlY2tvdXRPclRocm93KCk7Y29uc3QgbD1udWxsPT09KG49cy5jb25zaWdubWVudHNbMF0uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQsZD1zLmNvbnNpZ25tZW50c1swXS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsYz1udWxsPT1kP3ZvaWQgMDpkLmZpbmQoKHtpZDplfSk9PmU9PT1sKSxoPW51bGw9PWQ/dm9pZCAwOmQuZmlsdGVyKGU9PmUuaWQhPT1sKSx1PWM/W3tsYWJlbDpjLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtjLmNvc3QudG9GaXhlZChyKX1gLGRldGFpbDpjLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmMuaWR9XTpbXTtpZihoJiZbLi4uaC5maWx0ZXIoZT0+ZS5pc1JlY29tbWVuZGVkKSwuLi5oLmZpbHRlcihlPT4hZS5pc1JlY29tbWVuZGVkKV0uZm9yRWFjaChlPT51LnB1c2goe2xhYmVsOmUuZGVzY3JpcHRpb24sYW1vdW50OmAke2UuY29zdC50b0ZpeGVkKHIpfWAsZGV0YWlsOmUuYWRkaXRpb25hbERlc2NyaXB0aW9uLGlkZW50aWZpZXI6ZS5pZH0pKSwhKGQgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9ucyBub3QgYXZhaWxhYmxlLlwiKTtpZigwPT09ZC5sZW5ndGgpcmV0dXJuIHZvaWQgZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbihBcHBsZVBheVNlc3Npb24uU1RBVFVTX0lOVkFMSURfU0hJUFBJTkdfUE9TVEFMX0FERFJFU1MsW10se3R5cGU6XCJwZW5kaW5nXCIsbGFiZWw6dCxhbW91bnQ6YCR7cy5ncmFuZFRvdGFsLnRvRml4ZWQocil9YH0sW10pO2NvbnN0IHA9ZC5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCksbT1wP3AuaWQ6ZFswXS5pZCx5PWM/Yy5pZDptO3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbih5KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJTaGlwcGluZyBvcHRpb25zIHVwZGF0ZSBmYWlsZWRcIil9YT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscz1hLmdldENoZWNrb3V0T3JUaHJvdygpLGUuY29tcGxldGVTaGlwcGluZ0NvbnRhY3RTZWxlY3Rpb24oe25ld1NoaXBwaW5nTWV0aG9kczp1LG5ld1RvdGFsOnt0eXBlOlwiZmluYWxcIixsYWJlbDp0LGFtb3VudDpgJHtzLmdyYW5kVG90YWwudG9GaXhlZChyKX1gfSxuZXdMaW5lSXRlbXM6dGhpcy5fZ2V0VXBkYXRlZExpbmVJdGVtcyhzLHIpfSl9KX1faGFuZGxlU2hpcHBpbmdNZXRob2RTZWxlY3RlZChlLHQsaSl7cmV0dXJuIFYodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3NoaXBwaW5nTWV0aG9kOntpZGVudGlmaWVyOm59fT1pO3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbihuKX1jYXRjaCh0KXt0aHJvdyBlLmFib3J0KCksbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9uIHNlbGVjdGlvbiB1cGRhdGUgZmFpbGVkLlwiKX1jb25zdCBvPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Y3VycmVuY3k6e2RlY2ltYWxQbGFjZXM6YX19PW8uZ2V0Q2FydE9yVGhyb3coKSxyPW8uZ2V0Q2hlY2tvdXRPclRocm93KCk7ZS5jb21wbGV0ZVNoaXBwaW5nTWV0aG9kU2VsZWN0aW9uKHtuZXdUb3RhbDp7dHlwZTpcImZpbmFsXCIsbGFiZWw6dCxhbW91bnQ6YCR7ci5ncmFuZFRvdGFsLnRvRml4ZWQoYSl9YH0sbmV3TGluZUl0ZW1zOnRoaXMuX2dldFVwZGF0ZWRMaW5lSXRlbXMocixhKX0pfSl9X2dldFVwZGF0ZWRMaW5lSXRlbXMoZSx0KXtjb25zdCBpPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7ZS5zdWJ0b3RhbC50b0ZpeGVkKHQpfWB9XTtyZXR1cm4gZS50YXhlcy5mb3JFYWNoKGU9PmkucHVzaCh7bGFiZWw6ZS5uYW1lLGFtb3VudDpgJHtlLmFtb3VudC50b0ZpeGVkKHQpfWB9KSksaS5wdXNoKHtsYWJlbDp0aGlzLl9zaGlwcGluZ0xhYmVsLGFtb3VudDpgJHtlLnNoaXBwaW5nQ29zdFRvdGFsLnRvRml4ZWQodCl9YH0pLGl9X3VwZGF0ZVNoaXBwaW5nT3B0aW9uKGUpe3JldHVybiBWKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihlKX0pfV9vblZhbGlkYXRlTWVyY2hhbnQoZSx0KXtyZXR1cm4gVih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT1bYHZhbGlkYXRpb25Vcmw9JHt0LnZhbGlkYXRpb25VUkx9YCxgbWVyY2hhbnRJZGVudGlmaWVyPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEubWVyY2hhbnRJZH1gLGBkaXNwbGF5TmFtZT0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLnN0b3JlTmFtZX1gLGBkb21haW5OYW1lPSR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBdLmpvaW4oXCImXCIpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoYCR7ZS5pbml0aWFsaXphdGlvbkRhdGEucGF5bWVudHNVcmx9L2FwaS9wdWJsaWMvdjEvcGF5bWVudHMvYXBwbGVwYXkvdmFsaWRhdGVfbWVyY2hhbnRgLHtjcmVkZW50aWFsczohMSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH0sYm9keTppfSl9KX1fb25QYXltZW50QXV0aG9yaXplZChlLHQsaSl7dmFyIG47cmV0dXJuIFYodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Rva2VuOm8sYmlsbGluZ0NvbnRhY3Q6YSxzaGlwcGluZ0NvbnRhY3Q6cn09ZS5wYXltZW50LHM9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjA7bGV0IGw7KG51bGw9PT0obj1pLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2F0ZXdheSk9PT1OLkJSQUlOVFJFRSYmKGw9eWllbGQgdGhpcy5fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpKTtjb25zdCBkPXttZXRob2RJZDppLmlkLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6bCxmb3JtYXR0ZWRQYXlsb2FkOnthcHBsZV9wYXlfdG9rZW46e3BheW1lbnRfZGF0YTpvLnBheW1lbnREYXRhLHBheW1lbnRfbWV0aG9kOm8ucGF5bWVudE1ldGhvZCx0cmFuc2FjdGlvbl9pZDpvLnRyYW5zYWN0aW9uSWRlbnRpZmllcn19fX0sYz10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKGEpLGg9dGhpcy5fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhyKSx1PW51bGw9PXI/dm9pZCAwOnIuZW1haWxBZGRyZXNzLHA9KG51bGw9PXI/dm9pZCAwOnIucGhvbmVOdW1iZXIpfHxcIlwiO3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYykse2VtYWlsOnUscGhvbmU6cH0pKSxzJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoaCkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe3VzZVN0b3JlQ3JlZGl0OiExfSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGQpLHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfU1VDQ0VTUyksdGhpcy5fb25BdXRob3JpemVDYWxsYmFjaygpfWNhdGNoKGUpe3Rocm93IHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfRkFJTFVSRSksbmV3IEVycm9yKFwiUGF5bWVudCBjYW5ub3QgY29tcGxldGVcIil9fSl9X3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoZSl7cmV0dXJue2ZpcnN0TmFtZToobnVsbD09ZT92b2lkIDA6ZS5naXZlbk5hbWUpfHxcIlwiLGxhc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmZhbWlseU5hbWUpfHxcIlwiLGNpdHk6KG51bGw9PWU/dm9pZCAwOmUubG9jYWxpdHkpfHxcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMToobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1swXXx8XCJcIixhZGRyZXNzMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1sxXXx8XCJcIixwb3N0YWxDb2RlOihudWxsPT1lP3ZvaWQgMDplLnBvc3RhbENvZGUpfHxcIlwiLGNvdW50cnlDb2RlOihudWxsPT1lP3ZvaWQgMDplLmNvdW50cnlDb2RlKXx8XCJcIixwaG9uZToobnVsbD09ZT92b2lkIDA6ZS5waG9uZU51bWJlcil8fFwiXCIsc3RhdGVPclByb3ZpbmNlOihudWxsPT1lP3ZvaWQgMDplLmFkbWluaXN0cmF0aXZlQXJlYSl8fFwiXCIsc3RhdGVPclByb3ZpbmNlQ29kZToobnVsbD09ZT92b2lkIDA6ZS5hZG1pbmlzdHJhdGl2ZUFyZWEpfHxcIlwiLGN1c3RvbUZpZWxkczpbXX19X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gVih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2RldmljZURhdGE6ZX09eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCk7cmV0dXJuIGV9Y2F0Y2goZSl7fX0pfX1mdW5jdGlvbiBqKGUpe2lmKCFmdW5jdGlvbihlKXtyZXR1cm5cIkFwcGxlUGF5U2Vzc2lvblwiaW4gZX0oZSkpdGhyb3cgbmV3IEVycm9yKFwiQXBwbGUgcGF5IGlzIG5vdCBzdXBwb3J0ZWRcIil9Y2xhc3MgcXtjcmVhdGUoZSl7cmV0dXJuIGood2luZG93KSxuZXcgQXBwbGVQYXlTZXNzaW9uKDEsZSl9fWNsYXNzIEh7Y29uc3RydWN0b3IoZSl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLnNka1ZlcnNpb249XCIxLmxhdGVzdFwifWxvYWRTZGsoKXtyZXR1cm4gZT10aGlzLHQ9dm9pZCAwLG49ZnVuY3Rpb24qKCl7KGZ1bmN0aW9uKGUpe3JldHVyblwiQXBwbGVQYXlTREtcImluIGV9KSh3aW5kb3cpfHwoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChgaHR0cHM6Ly9hcHBsZXBheS5jZG4tYXBwbGUuY29tL2pzYXBpLyR7dGhpcy5zZGtWZXJzaW9ufS9hcHBsZS1wYXktc2RrLmpzYCksaih3aW5kb3cpKX0sbmV3KChpPXZvaWQgMCl8fChpPVByb21pc2UpKShmdW5jdGlvbihvLGEpe2Z1bmN0aW9uIHIoZSl7dHJ5e2wobi5uZXh0KGUpKX1jYXRjaChlKXthKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtsKG4udGhyb3coZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGwoZSl7dmFyIHQ7ZS5kb25lP28oZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2YgaT90Om5ldyBpKGZ1bmN0aW9uKGUpe2UodCl9KSkudGhlbihyLHMpfWwoKG49bi5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pO3ZhciBlLHQsaSxufX1jb25zdCBXPUQobj0+e2NvbnN0e2dldEhvc3Q6b309bi5nZXRTdGF0ZSgpLGE9bmV3IGMobik7cmV0dXJuIG5ldyBSKGUoe2hvc3Q6bygpfSksbixuZXcgcSxuZXcgSShuZXcgRShpKCksd2luZG93LGEpKSxuZXcgSChuZXcgdCkpfSxbe2lkOlwiYXBwbGVwYXlcIn1dKTtjbGFzcyBHIGV4dGVuZHMgQntjb25zdHJ1Y3RvcihlKXtsZXQgdD1cIlVuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC5cIjtlJiYodD1gJHt0fSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtlLmpvaW4oXCIsIFwiKX0uYCksc3VwZXIodCksdGhpcy5uYW1lPVwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yXCJ9fWNsYXNzICQgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKCl7c3VwZXIoXCJUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLlwiKSx0aGlzLm5hbWU9XCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3JcIix0aGlzLnR5cGU9XCJvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkXCJ9fXZhciBLLFg9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIG5ldyhpfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24obyxhKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXthKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9vKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07IWZ1bmN0aW9uKGUpe2UuU2hpcHBpbmc9XCJTaGlwcGluZ1wiLGUuU3VidG90YWw9XCJTdWJ0b3RhbFwiLGUuU3RvcmVDcmVkaXQ9XCJTdG9yZSBDcmVkaXRcIn0oS3x8KEs9e30pKTtjbGFzcyBZe2NvbnN0cnVjdG9yKGUsdCxpLG4sbyl7dGhpcy5fcmVxdWVzdFNlbmRlcj1lLHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9dCx0aGlzLl9zZXNzaW9uRmFjdG9yeT1pLHRoaXMuX2JyYWludHJlZVNkaz1uLHRoaXMuX2FwcGxlUGF5U2NyaXB0TG9hZGVyPW8sdGhpcy5fc2hpcHBpbmdMYWJlbD1LLlNoaXBwaW5nLHRoaXMuX3N1YlRvdGFsTGFiZWw9Sy5TdWJ0b3RhbCx0aGlzLl9zdG9yZUNyZWRpdExhYmVsPUsuU3RvcmVDcmVkaXR9aW5pdGlhbGl6ZShlKXt2YXIgdCxpLG4sbztyZXR1cm4gWCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIShudWxsPT1lP3ZvaWQgMDplLm1ldGhvZElkKSl0aHJvdyBuZXcgQignVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0e21ldGhvZElkOmF9PWU7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpLHRoaXMuX3NoaXBwaW5nTGFiZWw9KG51bGw9PT0odD1lLmFwcGxlcGF5KXx8dm9pZCAwPT09dD92b2lkIDA6dC5zaGlwcGluZ0xhYmVsKXx8Sy5TaGlwcGluZyx0aGlzLl9zdWJUb3RhbExhYmVsPShudWxsPT09KGk9ZS5hcHBsZXBheSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3VidG90YWxMYWJlbCl8fEsuU3VidG90YWwsdGhpcy5fc3RvcmVDcmVkaXRMYWJlbD0obnVsbD09PShuPWUuYXBwbGVwYXkpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnN0b3JlQ3JlZGl0TGFiZWwpfHxLLlN0b3JlQ3JlZGl0O2NvbnN0IHI9KHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoYSkpLmdldFBheW1lbnRNZXRob2RPclRocm93KGEpOyhudWxsPT09KG89ci5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmdhdGV3YXkpPT09Ti5CUkFJTlRSRUUmJnIuY2xpZW50VG9rZW4mJnRoaXMuX2JyYWludHJlZVNkay5pbml0aWFsaXplKHIuY2xpZW50VG9rZW4pfSl9ZXhlY3V0ZShlLHQpe3JldHVybiBYKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtwYXltZW50Oml9PWUsbj10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7aWYoIWkpdGhyb3cgbmV3IEcoW1wicGF5bWVudFwiXSk7Y29uc3R7bWV0aG9kSWQ6b309aSxhPW4uZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobykscj10aGlzLl9nZXRCYXNlUmVxdWVzdChuLGEpLHM9dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKHIpO3JldHVybiB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt1c2VTdG9yZUNyZWRpdDplLnVzZVN0b3JlQ3JlZGl0fSx0KSxzLmJlZ2luKCksbmV3IFByb21pc2UoKGUsdCk9Pnt0aGlzLl9oYW5kbGVBcHBsZVBheUV2ZW50cyhzLGEse3Jlc29sdmU6ZSxyZWplY3Q6dH0pfSl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgJCl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfV9nZXRCYXNlUmVxdWVzdChlLHQpe2NvbnN0IGk9ZS5nZXRDaGVja291dE9yVGhyb3coKSxuPWUuZ2V0Q2FydE9yVGhyb3coKSxvPWUuZ2V0U3RvcmVDb25maWdPclRocm93KCkse3N0b3JlUHJvZmlsZTp7c3RvcmVDb3VudHJ5Q29kZTphLHN0b3JlTmFtZTpyfX09byx7Y3VycmVuY3k6e2NvZGU6cyxkZWNpbWFsUGxhY2VzOmx9fT1uLHtpbml0aWFsaXphdGlvbkRhdGE6e21lcmNoYW50Q2FwYWJpbGl0aWVzOmQsc3VwcG9ydGVkTmV0d29ya3M6Y319PXQse2dyYW5kVG90YWw6aCxpc1N0b3JlQ3JlZGl0QXBwbGllZDp1LG91dHN0YW5kaW5nQmFsYW5jZTpwfT1pLG09W3tsYWJlbDp0aGlzLl9zdWJUb3RhbExhYmVsLGFtb3VudDpgJHtpLnN1YnRvdGFsLnRvRml4ZWQobCl9YH1dO2lmKGkudGF4ZXMuZm9yRWFjaChlPT5tLnB1c2goe2xhYmVsOmUubmFtZSxhbW91bnQ6YCR7ZS5hbW91bnQudG9GaXhlZChsKX1gfSkpLG0ucHVzaCh7bGFiZWw6dGhpcy5fc2hpcHBpbmdMYWJlbCxhbW91bnQ6YCR7aS5zaGlwcGluZ0Nvc3RUb3RhbC50b0ZpeGVkKGwpfWB9KSx1KXtjb25zdHtzdG9yZUNyZWRpdDp0fT1lLmdldEN1c3RvbWVyT3JUaHJvdygpO20ucHVzaCh7bGFiZWw6dGhpcy5fc3RvcmVDcmVkaXRMYWJlbCxhbW91bnQ6YC0ke01hdGgubWluKGgsdCkudG9GaXhlZChsKX1gfSl9cmV0dXJue2NvdW50cnlDb2RlOmEsY3VycmVuY3lDb2RlOnMsbWVyY2hhbnRDYXBhYmlsaXRpZXM6ZCxzdXBwb3J0ZWROZXR3b3JrczpjLGxpbmVJdGVtczptLHRvdGFsOntsYWJlbDpyLGFtb3VudDpgJHtwLnRvRml4ZWQobCl9YCx0eXBlOlwiZmluYWxcIn19fV9oYW5kbGVBcHBsZVBheUV2ZW50cyhlLHQsaSl7ZS5vbnZhbGlkYXRlbWVyY2hhbnQ9aT0+WCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2JvZHk6bn09eWllbGQgdGhpcy5fb25WYWxpZGF0ZU1lcmNoYW50KHQsaSk7ZS5jb21wbGV0ZU1lcmNoYW50VmFsaWRhdGlvbihuKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXJjaGFudCB2YWxpZGF0aW9uIGZhaWxlZFwiKX19KSxlLm9uY2FuY2VsPSgpPT5YKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gaS5yZWplY3QobmV3IHooXCJDb250aW51ZSB3aXRoIGFwcGxlcGF5XCIpKX0pLGUub25wYXltZW50YXV0aG9yaXplZD1uPT50aGlzLl9vblBheW1lbnRBdXRob3JpemVkKG4sZSx0LGkpfV9vblZhbGlkYXRlTWVyY2hhbnQoZSx0KXtyZXR1cm4gWCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT1bYHZhbGlkYXRpb25Vcmw9JHt0LnZhbGlkYXRpb25VUkx9YCxgbWVyY2hhbnRJZGVudGlmaWVyPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEubWVyY2hhbnRJZH1gLGBkaXNwbGF5TmFtZT0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLnN0b3JlTmFtZX1gLGBkb21haW5OYW1lPSR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBdLmpvaW4oXCImXCIpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoYCR7ZS5pbml0aWFsaXphdGlvbkRhdGEucGF5bWVudHNVcmx9L2FwaS9wdWJsaWMvdjEvcGF5bWVudHMvYXBwbGVwYXkvdmFsaWRhdGVfbWVyY2hhbnRgLHtjcmVkZW50aWFsczohMSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH0sYm9keTppfSl9KX1fb25QYXltZW50QXV0aG9yaXplZChlLHQsaSxuKXt2YXIgbztyZXR1cm4gWCh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7dG9rZW46YX09ZS5wYXltZW50O2xldCByOyhudWxsPT09KG89aS5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmdhdGV3YXkpPT09Ti5CUkFJTlRSRUUmJihyPXlpZWxkIHRoaXMuX2dldEJyYWludHJlZURldmljZURhdGEoKSk7Y29uc3Qgcz17bWV0aG9kSWQ6aS5pZCxwYXltZW50RGF0YTp7ZGV2aWNlU2Vzc2lvbklkOnIsZm9ybWF0dGVkUGF5bG9hZDp7YXBwbGVfcGF5X3Rva2VuOntwYXltZW50X2RhdGE6YS5wYXltZW50RGF0YSxwYXltZW50X21ldGhvZDphLnBheW1lbnRNZXRob2QsdHJhbnNhY3Rpb25faWQ6YS50cmFuc2FjdGlvbklkZW50aWZpZXJ9fX19O3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHMpLHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfU1VDQ0VTUyksbi5yZXNvbHZlKCl9Y2F0Y2goZSl7cmV0dXJuIHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfRkFJTFVSRSksbi5yZWplY3QobmV3IGYocC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKX19KX1fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpe3JldHVybiBYKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7ZGV2aWNlRGF0YTplfT15aWVsZCB0aGlzLl9icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKTtyZXR1cm4gZX1jYXRjaChlKXt9fSl9fWNvbnN0IFE9RChuPT57Y29uc3R7Z2V0SG9zdDpvfT1uLmdldFN0YXRlKCksYT1uZXcgYyhuKTtyZXR1cm4gbmV3IFkoZSh7aG9zdDpvKCl9KSxuLG5ldyBxLG5ldyBJKG5ldyBFKGkoKSx3aW5kb3csYSkpLG5ldyBIKG5ldyB0KSl9LFt7aWQ6XCJhcHBsZXBheVwifV0pO2NsYXNzIFogZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiTm90IGltcGxlbWVudGVkLlwiKSx0aGlzLm5hbWU9XCJOb3RJbXBsZW1lbnRlZEVycm9yXCIsdGhpcy50eXBlPVwibm90X2ltcGxlbWVudGVkXCJ9fXZhciBKLGVlPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcihlKXt0cnl7bChuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2wobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gbChlKXt2YXIgdDtlLmRvbmU/byhlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBpP3Q6bmV3IGkoZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKHIscyl9bCgobj1uLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9OyFmdW5jdGlvbihlKXtlLlN1YnRvdGFsPVwiU3VidG90YWxcIixlLlNoaXBwaW5nPVwiU2hpcHBpbmdcIn0oSnx8KEo9e30pKTtjbGFzcyB0ZXtjb25zdHJ1Y3RvcihlLHQsaSxuLGEpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5fc2Vzc2lvbkZhY3Rvcnk9aSx0aGlzLl9icmFpbnRyZWVTZGs9bix0aGlzLl9hcHBsZVBheVNjcmlwdExvYWRlcj1hLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9byx0aGlzLl9vbkVycm9yPW8sdGhpcy5fb25DbGljaz1vLHRoaXMuX3N1YlRvdGFsTGFiZWw9Si5TdWJ0b3RhbCx0aGlzLl9zaGlwcGluZ0xhYmVsPUouU2hpcHBpbmcsdGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSExfWluaXRpYWxpemUoZSl7dmFyIHQ7cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDppLGFwcGxlcGF5Om59PWU7aWYoIWl8fCFuKXRocm93IG5ldyBMKEEuTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2NvbnRhaW5lcjphLHNoaXBwaW5nTGFiZWw6cixzdWJ0b3RhbExhYmVsOnMsb25FcnJvcjpsPW8sb25DbGljazpkPW8sb25QYXltZW50QXV0aG9yaXplOmN9PW47dGhpcy5fc2hpcHBpbmdMYWJlbD1yfHxKLlNoaXBwaW5nLHRoaXMuX3N1YlRvdGFsTGFiZWw9c3x8Si5TdWJ0b3RhbCx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrPWMsdGhpcy5fb25FcnJvcj1sLHRoaXMuX29uQ2xpY2s9ZDtsZXQgaD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO3RyeXt0aGlzLl9wYXltZW50TWV0aG9kPWguZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSl9Y2F0Y2goZSl7aD15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGkpLHRoaXMuX3BheW1lbnRNZXRob2Q9aC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKX15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKSx0aGlzLl9hcHBsZVBheUJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24oYSksdGhpcy5fYXBwbGVQYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2suYmluZCh0aGlzKSksKG51bGw9PT0odD10aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2F0ZXdheSk9PT1OLkJSQUlOVFJFRSYmdGhpcy5fcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbiYmdGhpcy5fYnJhaW50cmVlU2RrLmluaXRpYWxpemUodGhpcy5fcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbil9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKCl7dGhyb3cgbmV3IFooJ0luIG9yZGVyIHRvIHNpZ24gaW4gdmlhIEFwcGxlLCB0aGUgc2hvcHBlciBtdXN0IGNsaWNrIG9uIFwiQXBwbGUgUGF5XCIgYnV0dG9uLicpfXNpZ25PdXQoKXt0aHJvdyBuZXcgWihcIk5lZWQgdG8gZG8gc2lnbm91dCB2aWEgYXBwbGUuXCIpfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2spfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCF0KXRocm93IG5ldyBCKFwiVW5hYmxlIHRvIGNyZWF0ZSBzaWduLWluIGJ1dHRvbiB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC5cIik7Y29uc3QgaT10aGlzLl9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQoKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChpKSxpfV9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhcHBsZS1wYXktYnV0dG9uXCIpO3JldHVybiBlLnNldEF0dHJpYnV0ZShcImJ1dHRvbnN0eWxlXCIsXCJibGFja1wiKSxlLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInBsYWluXCIpLGUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIi0tYXBwbGUtcGF5LWJ1dHRvbi13aWR0aDogMTAwJTsgLS1hcHBsZS1wYXktYnV0dG9uLWhlaWdodDogNDBweDsgLS1hcHBsZS1wYXktYnV0dG9uLWJvcmRlci1yYWRpdXM6IDRweDtcIiksZX1faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2soZSl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbilyZXR1cm47dGhpcy5fb25DbGljaygpO2NvbnN0IHQ9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9dC5nZXRDYXJ0T3JUaHJvdygpLG49dC5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKSxvPXQuZ2V0Q2hlY2tvdXRPclRocm93KCk7aWYoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl0aHJvdyBuZXcgTChBLk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBhPXRoaXMuX2dldEJhc2VSZXF1ZXN0KGksbyxuLHRoaXMuX3BheW1lbnRNZXRob2QpLHI9dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKGEpO3RoaXMuX2hhbmRsZUFwcGxlUGF5RXZlbnRzKHIsdGhpcy5fcGF5bWVudE1ldGhvZCxuKSxyLmJlZ2luKCksdGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSEwfV9nZXRCYXNlUmVxdWVzdChlLHQsaSxuKXt2YXIgbztjb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlQ291bnRyeUNvZGU6YSxzdG9yZU5hbWU6cn19PWkse2N1cnJlbmN5Ontjb2RlOnMsZGVjaW1hbFBsYWNlczpsfX09ZSx7aW5pdGlhbGl6YXRpb25EYXRhOnttZXJjaGFudENhcGFiaWxpdGllczpkLHN1cHBvcnRlZE5ldHdvcmtzOmN9fT1uLGg9ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCx1PXtyZXF1aXJlZEJpbGxpbmdDb250YWN0RmllbGRzOltcInBvc3RhbEFkZHJlc3NcIl0scmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHM6W1wiZW1haWxcIixcInBob25lXCJdLGNvdW50cnlDb2RlOmEsY3VycmVuY3lDb2RlOnMsbWVyY2hhbnRDYXBhYmlsaXRpZXM6ZCxzdXBwb3J0ZWROZXR3b3JrczpjLGxpbmVJdGVtczpbXSx0b3RhbDpoP3tsYWJlbDpyLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChsKX1gLHR5cGU6XCJwZW5kaW5nXCJ9OntsYWJlbDpyLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChsKX1gLHR5cGU6XCJmaW5hbFwifX07aWYoaCludWxsPT09KG89dS5yZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkcyl8fHZvaWQgMD09PW98fG8ucHVzaChcInBvc3RhbEFkZHJlc3NcIik7ZWxzZXtjb25zdCBlPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7dC5zdWJ0b3RhbC50b0ZpeGVkKGwpfWB9XTt0LnRheGVzLmZvckVhY2godD0+ZS5wdXNoKHtsYWJlbDp0Lm5hbWUsYW1vdW50OmAke3QuYW1vdW50LnRvRml4ZWQobCl9YH0pKSx1LmxpbmVJdGVtcz1lfXJldHVybiB1fV9oYW5kbGVBcHBsZVBheUV2ZW50cyhlLHQsaSl7ZS5vbnZhbGlkYXRlbWVyY2hhbnQ9aT0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtib2R5Om59PXlpZWxkIHRoaXMuX29uVmFsaWRhdGVNZXJjaGFudCh0LGkpO2UuY29tcGxldGVNZXJjaGFudFZhbGlkYXRpb24obil9Y2F0Y2goZSl7dGhpcy5fb25FcnJvcihlKX19KSxlLm9uc2hpcHBpbmdjb250YWN0c2VsZWN0ZWQ9dD0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9oYW5kbGVTaGlwcGluZ0NvbnRhY3RTZWxlY3RlZChlLGksdCl9KSxlLm9uc2hpcHBpbmdtZXRob2RzZWxlY3RlZD10PT5lZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSxpLHQpfSksZS5vbmNhbmNlbD0oKT0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMTt0cnl7Y29uc3QgZT1gL3JlbW90ZS1jaGVja291dC8ke3QuaWR9L3NpZ25vdXRgO3JldHVybiB5aWVsZCB0aGlzLl9yZXF1ZXN0U2VuZGVyLmdldChlKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCgpfWNhdGNoKGUpe3JldHVybiB0aGlzLl9vbkVycm9yKG5ldyB6KX19KSxlLm9ucGF5bWVudGF1dGhvcml6ZWQ9aT0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9vblBheW1lbnRBdXRob3JpemVkKGksZSx0KX0pfV9oYW5kbGVTaGlwcGluZ0NvbnRhY3RTZWxlY3RlZChlLHQsaSl7dmFyIG47cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBvPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoaS5zaGlwcGluZ0NvbnRhY3QpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhvKX1jYXRjaCh0KXtyZXR1cm4gZS5hYm9ydCgpLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMSx0aGlzLl9vbkVycm9yKHQpfWNvbnN0e3N0b3JlUHJvZmlsZTp7c3RvcmVOYW1lOmF9fT10O2xldCByPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtjb25zdHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpzfX09ci5nZXRDYXJ0T3JUaHJvdygpO2xldCBsPXIuZ2V0Q2hlY2tvdXRPclRocm93KCk7Y29uc3QgZD1udWxsPT09KG49bC5jb25zaWdubWVudHNbMF0uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQsYz1sLmNvbnNpZ25tZW50c1swXS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsaD1udWxsPT1jP3ZvaWQgMDpjLmZpbmQoKHtpZDplfSk9PmU9PT1kKSx1PW51bGw9PWM/dm9pZCAwOmMuZmlsdGVyKGU9PmUuaWQhPT1kKSxwPWg/W3tsYWJlbDpoLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtoLmNvc3QudG9GaXhlZChzKX1gLGRldGFpbDpoLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmguaWR9XTpbXTtpZih1JiZbLi4udS5maWx0ZXIoZT0+ZS5pc1JlY29tbWVuZGVkKSwuLi51LmZpbHRlcihlPT4hZS5pc1JlY29tbWVuZGVkKV0uZm9yRWFjaChlPT5wLnB1c2goe2xhYmVsOmUuZGVzY3JpcHRpb24sYW1vdW50OmAke2UuY29zdC50b0ZpeGVkKHMpfWAsZGV0YWlsOmUuYWRkaXRpb25hbERlc2NyaXB0aW9uLGlkZW50aWZpZXI6ZS5pZH0pKSwhKGMgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9ucyBub3QgYXZhaWxhYmxlLlwiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIHZvaWQgZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbihBcHBsZVBheVNlc3Npb24uU1RBVFVTX0lOVkFMSURfU0hJUFBJTkdfUE9TVEFMX0FERFJFU1MsW10se3R5cGU6XCJwZW5kaW5nXCIsbGFiZWw6YSxhbW91bnQ6YCR7bC5ncmFuZFRvdGFsLnRvRml4ZWQocyl9YH0sW10pO2NvbnN0IG09Yy5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCkseT1tP20uaWQ6Y1swXS5pZCxnPWg/aC5pZDp5O3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbihnKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fb25FcnJvcihlKX1yPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxsPXIuZ2V0Q2hlY2tvdXRPclRocm93KCksZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbih7bmV3U2hpcHBpbmdNZXRob2RzOnAsbmV3VG90YWw6e3R5cGU6XCJmaW5hbFwiLGxhYmVsOmEsYW1vdW50OmAke2wuZ3JhbmRUb3RhbC50b0ZpeGVkKHMpfWB9LG5ld0xpbmVJdGVtczp0aGlzLl9nZXRVcGRhdGVkTGluZUl0ZW1zKGwscyl9KX0pfV9oYW5kbGVTaGlwcGluZ01ldGhvZFNlbGVjdGVkKGUsdCxpKXtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3N0b3JlUHJvZmlsZTp7c3RvcmVOYW1lOm59fT10LHtzaGlwcGluZ01ldGhvZDp7aWRlbnRpZmllcjpvfX09aTt0cnl7eWllbGQgdGhpcy5fdXBkYXRlU2hpcHBpbmdPcHRpb24obyl9Y2F0Y2godCl7cmV0dXJuIGUuYWJvcnQoKSx0aGlzLl9oYXNBcHBsZVBheVNlc3Npb249ITEsdGhpcy5fb25FcnJvcih0KX1jb25zdCBhPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Y3VycmVuY3k6e2RlY2ltYWxQbGFjZXM6cn19PWEuZ2V0Q2FydE9yVGhyb3coKSxzPWEuZ2V0Q2hlY2tvdXRPclRocm93KCk7ZS5jb21wbGV0ZVNoaXBwaW5nTWV0aG9kU2VsZWN0aW9uKHtuZXdUb3RhbDp7dHlwZTpcImZpbmFsXCIsbGFiZWw6bixhbW91bnQ6YCR7cy5ncmFuZFRvdGFsLnRvRml4ZWQocil9YH0sbmV3TGluZUl0ZW1zOnRoaXMuX2dldFVwZGF0ZWRMaW5lSXRlbXMocyxyKX0pfSl9X2dldFVwZGF0ZWRMaW5lSXRlbXMoZSx0KXtjb25zdCBpPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7ZS5zdWJ0b3RhbC50b0ZpeGVkKHQpfWB9XTtyZXR1cm4gZS50YXhlcy5mb3JFYWNoKGU9PmkucHVzaCh7bGFiZWw6ZS5uYW1lLGFtb3VudDpgJHtlLmFtb3VudC50b0ZpeGVkKHQpfWB9KSksaS5wdXNoKHtsYWJlbDp0aGlzLl9zaGlwcGluZ0xhYmVsLGFtb3VudDpgJHtlLnNoaXBwaW5nQ29zdFRvdGFsLnRvRml4ZWQodCl9YH0pLGl9X3VwZGF0ZVNoaXBwaW5nT3B0aW9uKGUpe3JldHVybiBlZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oZSl9KX1fb25WYWxpZGF0ZU1lcmNoYW50KGUsdCl7cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPVtgdmFsaWRhdGlvblVybD0ke3QudmFsaWRhdGlvblVSTH1gLGBtZXJjaGFudElkZW50aWZpZXI9JHtlLmluaXRpYWxpemF0aW9uRGF0YS5tZXJjaGFudElkfWAsYGRpc3BsYXlOYW1lPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEuc3RvcmVOYW1lfWAsYGRvbWFpbk5hbWU9JHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9YF0uam9pbihcIiZcIik7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChgJHtlLmluaXRpYWxpemF0aW9uRGF0YS5wYXltZW50c1VybH0vYXBpL3B1YmxpYy92MS9wYXltZW50cy9hcHBsZXBheS92YWxpZGF0ZV9tZXJjaGFudGAse2NyZWRlbnRpYWxzOiExLGhlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXCJYLVhTUkYtVE9LRU5cIjpudWxsfSxib2R5Oml9KX0pfV9vblBheW1lbnRBdXRob3JpemVkKGUsdCxpKXt2YXIgbjtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Rva2VuOm8sYmlsbGluZ0NvbnRhY3Q6YSxzaGlwcGluZ0NvbnRhY3Q6cn09ZS5wYXltZW50LHM9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoPjA7bGV0IGw7KG51bGw9PT0obj1pLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZ2F0ZXdheSk9PT1OLkJSQUlOVFJFRSYmKGw9eWllbGQgdGhpcy5fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpKTtjb25zdCBkPXttZXRob2RJZDppLmlkLHBheW1lbnREYXRhOntkZXZpY2VTZXNzaW9uSWQ6bCxmb3JtYXR0ZWRQYXlsb2FkOnthcHBsZV9wYXlfdG9rZW46e3BheW1lbnRfZGF0YTpvLnBheW1lbnREYXRhLHBheW1lbnRfbWV0aG9kOm8ucGF5bWVudE1ldGhvZCx0cmFuc2FjdGlvbl9pZDpvLnRyYW5zYWN0aW9uSWRlbnRpZmllcn19fX0sYz10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKGEpLGg9dGhpcy5fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhyKSx1PW51bGw9PXI/dm9pZCAwOnIuZW1haWxBZGRyZXNzLHA9KG51bGw9PXI/dm9pZCAwOnIucGhvbmVOdW1iZXIpfHxcIlwiO3RyeXtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sYykse2VtYWlsOnUscGhvbmU6cH0pKSxzJiYoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoaCkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe3VzZVN0b3JlQ3JlZGl0OiExfSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KGQpLHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfU1VDQ0VTUyksdGhpcy5fb25BdXRob3JpemVDYWxsYmFjaygpfWNhdGNoKGUpe3JldHVybiB0LmNvbXBsZXRlUGF5bWVudChBcHBsZVBheVNlc3Npb24uU1RBVFVTX0ZBSUxVUkUpLHRoaXMuX29uRXJyb3IoZSl9fSl9X3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoZSl7cmV0dXJue2ZpcnN0TmFtZToobnVsbD09ZT92b2lkIDA6ZS5naXZlbk5hbWUpfHxcIlwiLGxhc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmZhbWlseU5hbWUpfHxcIlwiLGNpdHk6KG51bGw9PWU/dm9pZCAwOmUubG9jYWxpdHkpfHxcIlwiLGNvbXBhbnk6XCJcIixhZGRyZXNzMToobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1swXXx8XCJcIixhZGRyZXNzMjoobnVsbD09ZT92b2lkIDA6ZS5hZGRyZXNzTGluZXMpJiZlLmFkZHJlc3NMaW5lc1sxXXx8XCJcIixwb3N0YWxDb2RlOihudWxsPT1lP3ZvaWQgMDplLnBvc3RhbENvZGUpfHxcIlwiLGNvdW50cnlDb2RlOihudWxsPT1lP3ZvaWQgMDplLmNvdW50cnlDb2RlKXx8XCJcIixwaG9uZToobnVsbD09ZT92b2lkIDA6ZS5waG9uZU51bWJlcil8fFwiXCIsc3RhdGVPclByb3ZpbmNlOihudWxsPT1lP3ZvaWQgMDplLmFkbWluaXN0cmF0aXZlQXJlYSl8fFwiXCIsc3RhdGVPclByb3ZpbmNlQ29kZToobnVsbD09ZT92b2lkIDA6ZS5hZG1pbmlzdHJhdGl2ZUFyZWEpfHxcIlwiLGN1c3RvbUZpZWxkczpbXX19X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtkZXZpY2VEYXRhOmV9PXlpZWxkIHRoaXMuX2JyYWludHJlZVNkay5nZXREYXRhQ29sbGVjdG9yT3JUaHJvdygpO3JldHVybiBlfWNhdGNoKGUpe319KX19Y29uc3QgaWU9RChuPT57Y29uc3R7Z2V0SG9zdDpvfT1uLmdldFN0YXRlKCksYT1uZXcgYyhuKTtyZXR1cm4gbmV3IHRlKGUoe2hvc3Q6bygpfSksbixuZXcgcSxuZXcgSShuZXcgRShpKCksd2luZG93LGEpKSxuZXcgSChuZXcgdCkpfSxbe2lkOlwiYXBwbGVwYXlcIn1dKTtleHBvcnR7VyBhcyBjcmVhdGVBcHBsZVBheUJ1dHRvblN0cmF0ZWd5LGllIGFzIGNyZWF0ZUFwcGxlUGF5Q3VzdG9tZXJTdHJhdGVneSxRIGFzIGNyZWF0ZUFwcGxlUGF5UGF5bWVudFN0cmF0ZWd5fTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcGxlLXBheS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/apple-pay.js\n\n}");

/***/ }),

/***/ "./packages/apple-pay-integration/src/ApplePayButton.tsx":
/*!***************************************************************!*\
  !*** ./packages/apple-pay-integration/src/ApplePayButton.tsx ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_apple_pay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/apple-pay */ \"../checkout-sdk-js/dist/esm/integrations/apple-pay.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/checkout-button-integration */ \"./packages/checkout-button-integration/src/CheckoutButton.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_utility__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/utility */ \"./packages/utility/src/navigateToOrderConfirmation.ts\");\n\n\n\n\n\nconst ApplePayButton = (props) => {\n    const { language, onUnhandledError } = props;\n    const integrations = [_bigcommerce_checkout_sdk_integrations_apple_pay__WEBPACK_IMPORTED_MODULE_0__.createApplePayCustomerStrategy];\n    const additionalInitializationOptions = {\n        shippingLabel: language.translate('cart.shipping_text'),\n        subtotalLabel: language.translate('cart.subtotal_text'),\n        onPaymentAuthorize: _bigcommerce_checkout_utility__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        onError: onUnhandledError,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({ additionalInitializationOptions: additionalInitializationOptions, integrations: integrations }, props)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(ApplePayButton, [\n    { id: 'applepay' },\n]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hcHBsZS1wYXktaW50ZWdyYXRpb24vc3JjL0FwcGxlUGF5QnV0dG9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtHO0FBQzVDO0FBRTZCO0FBSzVCO0FBQ3FCO0FBRTVFLE1BQU0sY0FBYyxHQUEyQyxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3JFLE1BQU0sRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFFN0MsTUFBTSxZQUFZLEdBQUcsQ0FBQyw0R0FBOEIsQ0FBQyxDQUFDO0lBRXRELE1BQU0sK0JBQStCLEdBQUc7UUFDcEMsYUFBYSxFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUM7UUFDdkQsYUFBYSxFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMsb0JBQW9CLENBQUM7UUFDdkQsa0JBQWtCLEVBQUUscUVBQTJCO1FBQy9DLE9BQU8sRUFBRSxnQkFBZ0I7S0FDNUIsQ0FBQztJQUVGLE9BQU8sQ0FDSCwyREFBQyx5RkFBYyxrQkFDWCwrQkFBK0IsRUFBRSwrQkFBK0IsRUFDaEUsWUFBWSxFQUFFLFlBQVksSUFDdEIsS0FBSyxFQUNYLENBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUErQyxjQUFjLEVBQUU7SUFDL0YsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFO0NBQ3JCLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYXBwbGUtcGF5LWludGVncmF0aW9uL3NyYy9BcHBsZVBheUJ1dHRvbi50c3g/YmJlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBcHBsZVBheUN1c3RvbWVyU3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9hcHBsZS1wYXknO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENoZWNrb3V0QnV0dG9uIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2NoZWNrb3V0LWJ1dHRvbi1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIHR5cGUgQ2hlY2tvdXRCdXR0b25Qcm9wcyxcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IG5hdmlnYXRlVG9PcmRlckNvbmZpcm1hdGlvbiB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91dGlsaXR5JztcblxuY29uc3QgQXBwbGVQYXlCdXR0b246IEZ1bmN0aW9uQ29tcG9uZW50PENoZWNrb3V0QnV0dG9uUHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3QgeyBsYW5ndWFnZSwgb25VbmhhbmRsZWRFcnJvciB9ID0gcHJvcHM7XG5cbiAgICBjb25zdCBpbnRlZ3JhdGlvbnMgPSBbY3JlYXRlQXBwbGVQYXlDdXN0b21lclN0cmF0ZWd5XTtcblxuICAgIGNvbnN0IGFkZGl0aW9uYWxJbml0aWFsaXphdGlvbk9wdGlvbnMgPSB7XG4gICAgICAgIHNoaXBwaW5nTGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZSgnY2FydC5zaGlwcGluZ190ZXh0JyksXG4gICAgICAgIHN1YnRvdGFsTGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZSgnY2FydC5zdWJ0b3RhbF90ZXh0JyksXG4gICAgICAgIG9uUGF5bWVudEF1dGhvcml6ZTogbmF2aWdhdGVUb09yZGVyQ29uZmlybWF0aW9uLFxuICAgICAgICBvbkVycm9yOiBvblVuaGFuZGxlZEVycm9yLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Q2hlY2tvdXRCdXR0b25cbiAgICAgICAgICAgIGFkZGl0aW9uYWxJbml0aWFsaXphdGlvbk9wdGlvbnM9e2FkZGl0aW9uYWxJbml0aWFsaXphdGlvbk9wdGlvbnN9XG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM9e2ludGVncmF0aW9uc31cbiAgICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PENoZWNrb3V0QnV0dG9uUHJvcHMsIENoZWNrb3V0QnV0dG9uUmVzb2x2ZUlkPihBcHBsZVBheUJ1dHRvbiwgW1xuICAgIHsgaWQ6ICdhcHBsZXBheScgfSxcbl0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/apple-pay-integration/src/ApplePayButton.tsx\n\n}");

/***/ }),

/***/ "./packages/apple-pay-integration/src/ApplePayPaymentMethod.tsx":
/*!**********************************************************************!*\
  !*** ./packages/apple-pay-integration/src/ApplePayPaymentMethod.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_apple_pay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/apple-pay */ \"../checkout-sdk-js/dist/esm/integrations/apple-pay.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\nconst ApplePayPaymentMethod = ({ method, checkoutService, language, onUnhandledError, }) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n        const initializePayment = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n            try {\n                yield checkoutService.initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                    integrations: [_bigcommerce_checkout_sdk_integrations_apple_pay__WEBPACK_IMPORTED_MODULE_1__.createApplePayPaymentStrategy],\n                    applepay: {\n                        shippingLabel: language.translate('cart.shipping_text'),\n                        subtotalLabel: language.translate('cart.subtotal_text'),\n                    },\n                });\n            }\n            catch (error) {\n                if (error instanceof Error) {\n                    onUnhandledError(error);\n                }\n            }\n        });\n        void initializePayment();\n        return () => {\n            const deinitializePayment = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n                try {\n                    yield checkoutService.deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                }\n                catch (error) {\n                    if (error instanceof Error) {\n                        onUnhandledError(error);\n                    }\n                }\n            });\n            void deinitializePayment();\n        };\n    }, [checkoutService, language, method, onUnhandledError]);\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment), null);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(ApplePayPaymentMethod, [{ id: 'applepay' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hcHBsZS1wYXktaW50ZWdyYXRpb24vc3JjL0FwcGxlUGF5UGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRztBQUNoQztBQU1WO0FBRXZELE1BQU0scUJBQXFCLEdBQTBDLENBQUMsRUFDbEUsTUFBTSxFQUNOLGVBQWUsRUFDZixRQUFRLEVBQ1IsZ0JBQWdCLEdBQ25CLEVBQUUsRUFBRTtJQUNELGdEQUFTLENBQUMsR0FBRyxFQUFFO1FBQ1gsTUFBTSxpQkFBaUIsR0FBRyxHQUFTLEVBQUUsQ0FBQztZQUNsQyxJQUFJLENBQUM7Z0JBQ0QsTUFBTSxlQUFlLENBQUMsaUJBQWlCLENBQUM7b0JBQ3BDLFNBQVMsRUFBRSxNQUFNLENBQUMsT0FBTztvQkFDekIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO29CQUNuQixZQUFZLEVBQUUsQ0FBQywyR0FBNkIsQ0FBQztvQkFDN0MsUUFBUSxFQUFFO3dCQUNOLGFBQWEsRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLG9CQUFvQixDQUFDO3dCQUN2RCxhQUFhLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQztxQkFDMUQ7aUJBQ0osQ0FBQyxDQUFDO1lBQ1AsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2IsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7b0JBQ3pCLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUM1QixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUMsRUFBQztRQUVGLEtBQUssaUJBQWlCLEVBQUUsQ0FBQztRQUV6QixPQUFPLEdBQUcsRUFBRTtZQUNSLE1BQU0sbUJBQW1CLEdBQUcsR0FBUyxFQUFFLENBQUM7Z0JBQ3BDLElBQUksQ0FBQztvQkFDRCxNQUFNLGVBQWUsQ0FBQyxtQkFBbUIsQ0FBQzt3QkFDdEMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxPQUFPO3dCQUN6QixRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7cUJBQ3RCLENBQUMsQ0FBQztnQkFDUCxDQUFDO2dCQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7b0JBQ2IsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7d0JBQ3pCLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM1QixDQUFDO2dCQUNMLENBQUM7WUFDTCxDQUFDLEVBQUM7WUFFRixLQUFLLG1CQUFtQixFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFDO0lBQ04sQ0FBQyxFQUFFLENBQUMsZUFBZSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO0lBRTFELHlEQUF5RDtJQUN6RCxPQUFPLHlIQUFLLENBQUM7QUFDakIsQ0FBQyxDQUFDO0FBRUYsaUVBQWUseUZBQXFCLENBQ2hDLHFCQUFxQixFQUNyQixDQUFDLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQ3ZCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2FwcGxlLXBheS1pbnRlZ3JhdGlvbi9zcmMvQXBwbGVQYXlQYXltZW50TWV0aG9kLnRzeD9kOTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFwcGxlUGF5UGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvYXBwbGUtcGF5JztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7XG4gICAgdHlwZSBQYXltZW50TWV0aG9kUHJvcHMsXG4gICAgdHlwZSBQYXltZW50TWV0aG9kUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuY29uc3QgQXBwbGVQYXlQYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGxhbmd1YWdlLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG59KSA9PiB7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc3QgaW5pdGlhbGl6ZVBheW1lbnQgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrb3V0U2VydmljZS5pbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZDogbWV0aG9kLmdhdGV3YXksXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkOiBtZXRob2QuaWQsXG4gICAgICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFwcGxlUGF5UGF5bWVudFN0cmF0ZWd5XSxcbiAgICAgICAgICAgICAgICAgICAgYXBwbGVwYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaXBwaW5nTGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZSgnY2FydC5zaGlwcGluZ190ZXh0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0b3RhbExhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoJ2NhcnQuc3VidG90YWxfdGV4dCcpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdm9pZCBpbml0aWFsaXplUGF5bWVudCgpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWluaXRpYWxpemVQYXltZW50ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNoZWNrb3V0U2VydmljZS5kZWluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZDogbWV0aG9kLmdhdGV3YXksXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogbWV0aG9kLmlkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2b2lkIGRlaW5pdGlhbGl6ZVBheW1lbnQoKTtcbiAgICAgICAgfTtcbiAgICB9LCBbY2hlY2tvdXRTZXJ2aWNlLCBsYW5ndWFnZSwgbWV0aG9kLCBvblVuaGFuZGxlZEVycm9yXSk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QvanN4LW5vLXVzZWxlc3MtZnJhZ21lbnRcbiAgICByZXR1cm4gPD48Lz47XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBBcHBsZVBheVBheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICdhcHBsZXBheScgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/apple-pay-integration/src/ApplePayPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/apple-pay-integration/src/index.ts":
/*!*****************************************************!*\
  !*** ./packages/apple-pay-integration/src/index.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApplePayButton: () => (/* reexport safe */ _ApplePayButton__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   ApplePayPaymentMethod: () => (/* reexport safe */ _ApplePayPaymentMethod__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _ApplePayButton__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ApplePayButton */ \"./packages/apple-pay-integration/src/ApplePayButton.tsx\");\n/* harmony import */ var _ApplePayPaymentMethod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ApplePayPaymentMethod */ \"./packages/apple-pay-integration/src/ApplePayPaymentMethod.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hcHBsZS1wYXktaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkQ7QUFDYyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYXBwbGUtcGF5LWludGVncmF0aW9uL3NyYy9pbmRleC50cz8zZWM3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGRlZmF1bHQgYXMgQXBwbGVQYXlCdXR0b24gfSBmcm9tICcuL0FwcGxlUGF5QnV0dG9uJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXBwbGVQYXlQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9BcHBsZVBheVBheW1lbnRNZXRob2QnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/apple-pay-integration/src/index.ts\n\n}");

/***/ }),

/***/ "./packages/checkout-button-integration/src/CheckoutButton.tsx":
/*!*********************************************************************!*\
  !*** ./packages/checkout-button-integration/src/CheckoutButton.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\nconst CheckoutButton = ({ checkoutService: { deinitializeCustomer, initializeCustomer }, checkoutButtonContainerClass, containerId, methodId, onUnhandledError, onWalletButtonClick, additionalInitializationOptions, integrations, }) => {\n    const initializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield initializeCustomer({\n                methodId,\n                integrations,\n                [methodId]: Object.assign({ container: containerId, onUnhandledError, onClick: () => onWalletButtonClick(methodId) }, additionalInitializationOptions),\n            });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    const deinitializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield deinitializeCustomer({ methodId });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        void initializeCustomerStrategyOrThrow();\n        return () => {\n            void deinitializeCustomerStrategyOrThrow();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: checkoutButtonContainerClass, \"data-test\": containerId, id: containerId }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(CheckoutButton, []));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9jaGVja291dC1idXR0b24taW50ZWdyYXRpb24vc3JjL0NoZWNrb3V0QnV0dG9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUU7QUFNVjtBQUV2RCxNQUFNLGNBQWMsR0FBMkMsQ0FBQyxFQUM1RCxlQUFlLEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxFQUM3RCw0QkFBNEIsRUFDNUIsV0FBVyxFQUNYLFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBQ25CLCtCQUErQixFQUMvQixZQUFZLEdBQ2YsRUFBRSxFQUFFO0lBQ0QsTUFBTSxpQ0FBaUMsR0FBRyxHQUFTLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUM7WUFDRCxNQUFNLGtCQUFrQixDQUFDO2dCQUNyQixRQUFRO2dCQUNSLFlBQVk7Z0JBQ1osQ0FBQyxRQUFRLENBQUMsa0JBQ04sU0FBUyxFQUFFLFdBQVcsRUFDdEIsZ0JBQWdCLEVBQ2hCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFDekMsK0JBQStCLENBQ3JDO2FBQ0osQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDYixJQUFJLE9BQU8sZ0JBQWdCLEtBQUssVUFBVSxJQUFJLEtBQUssWUFBWSxLQUFLLEVBQUUsQ0FBQztnQkFDbkUsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUIsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLEVBQUM7SUFFRixNQUFNLG1DQUFtQyxHQUFHLEdBQVMsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQztZQUNELE1BQU0sb0JBQW9CLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2IsSUFBSSxPQUFPLGdCQUFnQixLQUFLLFVBQVUsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7Z0JBQ25FLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQyxFQUFDO0lBRUYsZ0RBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDWCxLQUFLLGlDQUFpQyxFQUFFLENBQUM7UUFFekMsT0FBTyxHQUFHLEVBQUU7WUFDUixLQUFLLG1DQUFtQyxFQUFFLENBQUM7UUFDL0MsQ0FBQyxDQUFDO1FBQ0YsdURBQXVEO0lBQzNELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE9BQU8sQ0FDSCxvRUFBSyxTQUFTLEVBQUUsNEJBQTRCLGVBQWEsV0FBVyxFQUFFLEVBQUUsRUFBRSxXQUFXLEdBQUksQ0FDNUYsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxjQUFjLEVBQ2QsRUFBRSxDQUNMLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2NoZWNrb3V0LWJ1dHRvbi1pbnRlZ3JhdGlvbi9zcmMvQ2hlY2tvdXRCdXR0b24udHN4P2Y2NzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUHJvcHMsXG4gICAgdHlwZSBDaGVja291dEJ1dHRvblJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmNvbnN0IENoZWNrb3V0QnV0dG9uOiBGdW5jdGlvbkNvbXBvbmVudDxDaGVja291dEJ1dHRvblByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlOiB7IGRlaW5pdGlhbGl6ZUN1c3RvbWVyLCBpbml0aWFsaXplQ3VzdG9tZXIgfSxcbiAgICBjaGVja291dEJ1dHRvbkNvbnRhaW5lckNsYXNzLFxuICAgIGNvbnRhaW5lcklkLFxuICAgIG1ldGhvZElkLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgb25XYWxsZXRCdXR0b25DbGljayxcbiAgICBhZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgIGludGVncmF0aW9ucyxcbn0pID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBpbml0aWFsaXplQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgICAgICBbbWV0aG9kSWRdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IG9uV2FsbGV0QnV0dG9uQ2xpY2sobWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25VbmhhbmRsZWRFcnJvciA9PT0gJ2Z1bmN0aW9uJyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGVpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWluaXRpYWxpemVDdXN0b21lcih7IG1ldGhvZElkIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvblVuaGFuZGxlZEVycm9yID09PSAnZnVuY3Rpb24nICYmIGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2b2lkIGluaXRpYWxpemVDdXN0b21lclN0cmF0ZWd5T3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2b2lkIGRlaW5pdGlhbGl6ZUN1c3RvbWVyU3RyYXRlZ3lPclRocm93KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2hlY2tvdXRCdXR0b25Db250YWluZXJDbGFzc30gZGF0YS10ZXN0PXtjb250YWluZXJJZH0gaWQ9e2NvbnRhaW5lcklkfSAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8Q2hlY2tvdXRCdXR0b25Qcm9wcywgQ2hlY2tvdXRCdXR0b25SZXNvbHZlSWQ+KFxuICAgIENoZWNrb3V0QnV0dG9uLFxuICAgIFtdLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/checkout-button-integration/src/CheckoutButton.tsx\n\n}");

/***/ }),

/***/ "./packages/payment-integration-api/src/toResolvableComponent.tsx":
/*!************************************************************************!*\
  !*** ./packages/payment-integration-api/src/toResolvableComponent.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ toResolvableComponent)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction toResolvableComponent(\n// eslint-disable-next-line @typescript-eslint/naming-convention\nComponent, resolveIds) {\n    return Object.assign((props) => react__WEBPACK_IMPORTED_MODULE_0___default().createElement(Component, Object.assign({}, props)), { resolveIds });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG9SZXNvbHZhYmxlQ29tcG9uZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0Q7QUFJbkMsU0FBUyxxQkFBcUI7QUFDekMsZ0VBQWdFO0FBQ2hFLFNBQWdDLEVBQ2hDLFVBQXlCO0lBRXpCLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQWEsRUFBRSxFQUFFLENBQUMsMkRBQUMsU0FBUyxvQkFBSyxLQUFLLEVBQUksRUFBRSxFQUFFLFVBQVUsRUFBRSxDQUFDLENBQUM7QUFDdEYsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvUmVzb2x2YWJsZUNvbXBvbmVudC50c3g/ZjFhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdHlwZSBDb21wb25lbnRUeXBlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgdHlwZSBSZXNvbHZhYmxlQ29tcG9uZW50IGZyb20gJy4vUmVzb2x2YWJsZUNvbXBvbmVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZUNvbXBvbmVudDxUUHJvcHMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBUSWRlbnRpZmllcj4oXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIENvbXBvbmVudDogQ29tcG9uZW50VHlwZTxUUHJvcHM+LFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlQ29tcG9uZW50PFRQcm9wcywgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbigocHJvcHM6IFRQcm9wcykgPT4gPENvbXBvbmVudCB7Li4ucHJvcHN9IC8+LCB7IHJlc29sdmVJZHMgfSk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/payment-integration-api/src/toResolvableComponent.tsx\n\n}");

/***/ })

}]);