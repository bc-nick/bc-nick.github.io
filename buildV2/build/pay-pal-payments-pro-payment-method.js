"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["pay-pal-payments-pro-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-pro.js":
/*!**************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-pro.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalProPaymentStrategy: () => (/* binding */ F)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar o,d,c=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class u{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return c(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode),yield this._cardinalClient.configure(yield this._getClientToken(e))})}start(e,t,n,r){return c(this,void 0,void 0,function*(){const{getCardInstrument:s,getPaymentMethodOrThrow:o}=this._paymentIntegrationService.getState(),{payment:{methodId:d=\"\",paymentData:c={}}={}}=t,u=function(e){return Boolean(e.instrumentId)}(c)&&s(c.instrumentId),l=u?u.iin:r&&r.getBin();l&&(yield this._cardinalClient.runBinProcess(l));try{return yield e((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t,{payment:{paymentData:{threeDSecure:{token:o(d).clientToken}}}}),n)}catch(e){if(!(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;const n=yield this._cardinalClient.getThreeDSecureData(e.body.three_ds_result,this._getOrderData());if(!r)return void(yield this._paymentIntegrationService.submitPayment((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}})));yield r.submit((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}}))}})}_getClientToken(e){return c(this,void 0,void 0,function*(){return e.clientToken?e.clientToken:(yield this._paymentIntegrationService.loadPaymentMethod(e.id),this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.id).clientToken||\"\")})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),i=e.getCheckoutOrThrow(),r=e.getOrderOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i.cart.currency.code,id:r.orderId.toString(),amount:i.cart.cartAmount}}}class l extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(o||(o={}));class h extends l{constructor(e){super(function(e){switch(e){case o.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case o.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case o.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case o.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case o.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case o.MissingCheckoutConfig:case o.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case o.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case o.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case o.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case o.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case o.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case o.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class m extends l{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(d||(d={}));class p extends l{constructor(e){super(function(e){switch(e){case d.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case d.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case d.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case d.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const g=[100004,1010,1011,1020];var y,b,f,v,_,C,I;!function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(y||(y={})),function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(b||(b={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(f||(f={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(v||(v={})),function(e){e.BinProcess=\"bin.process\"}(_||(_={})),function(e){e.CCA=\"cca\"}(C||(C={})),function(e){e.Yes=\"Y\",e.No=\"N\"}(I||(I={}));class P{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(y.SetupCompleted,()=>{n.off(y.SetupCompleted),n.off(y.Validated),this._configurationToken=e,i()}),n.on(y.Validated,e=>{n.off(y.SetupCompleted),n.off(y.Validated),e.ActionCode===f.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(g,e.ErrorNumber)&&r(new h(o.MissingPaymentMethod)),r(new m(e.ErrorDescription)))}),n.setup(b.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(_.BinProcess,e).catch(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)).then(e=>{if(!e||!e.Status)throw new p(d.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(y.Validated,(e,t)=>{if(n.off(y.Validated),!t)return r(new m(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case f.Success:return i({token:t});case f.NoAction:return e.ErrorNumber>0?r(new m(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===I.Yes?i({token:t}):r(new m(\"Transaction signature could not be validated.\"));case f.Failure:return r(new m(\"User failed authentication or an error was encountered while processing the transaction.\"));case f.Error:return r(new m(e.ErrorDescription))}});const a={AcsUrl:e.acs_url,Payload:e.merchant_data},s=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(C.CCA,a,s)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new p(d.PaymentNotInitialized);return this._sdk}}class w extends l{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class S{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://static.client.cardinaltrusted.com/songbird/v2.0.0/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new w;return this._window.Cardinal})}}class M extends l{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class O extends l{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class A extends M{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}var E,N=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})},k=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class D{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new M;const r=this._paymentIntegrationService.createHostedForm(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new O)}_executeWithoutHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=k(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new A([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))})}_executeWithHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=k(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new p(d.PaymentNotInitialized);if(!n||!n.methodId)throw new A([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(E||(E={}));const T=E;var x=function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{d(i.next(e))}catch(e){a(e)}}function o(e){try{d(i.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,o)}d((i=i.apply(e,t||[])).next())})};class z extends D{constructor(e,t){super(e),this.paymentIntegrationService=e,this.threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return x(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId);n.config.is3dsEnabled&&(yield this.threeDSecureFlow.prepare(n))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return x(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,r=this.paymentIntegrationService.getState();return r.getPaymentStatus()===T.ACKNOWLEDGE?(yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:{methodId:i}}),t),Promise.resolve()):r.getPaymentMethodOrThrow(i).config.is3dsEnabled?this.threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const F=(U=t=>new z(t,new u(t,new P(new S((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),j=[{id:\"paypal\"}],Object.assign(U,{resolveIds:j}));var U,j;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtcHJvLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7SUFFWUEsRUNBQUMsRSxrU0NhRyxNQUFNQyxFQUNqQixXQUFBQyxDQUNZQyxFQUNBQyxHQURBLEtBQUFELDJCQUFBQSxFQUNBLEtBQUFDLGdCQUFBQSxDQUNULENBRUcsT0FBQUMsQ0FBUUMsRyw4Q0FDSkMsS0FBS0gsZ0JBQWdCSSxLQUFLRixFQUFPRyxHQUFJSCxFQUFPSSxPQUFPQyxnQkFDbkRKLEtBQUtILGdCQUFnQlEsZ0JBQWdCTCxLQUFLTSxnQkFBZ0JQLEdBQ3BFLEUsQ0FFTSxLQUFBUSxDQUNGQyxFQUNBQyxFQUNBQyxFQUNBQyxHLHdDQUVBLE1BQU0sa0JBQUVDLEVBQWlCLHdCQUFFQyxHQUN2QmIsS0FBS0osMkJBQTJCa0IsWUFFNUJDLFNBQVMsU0FBRUMsRUFBVyxHQUFFLFlBQUVDLEVBQWMsQ0FBQyxHQUFNLENBQUMsR0FBTVIsRUFDeERTLEVDNUJDLFNBQ1hBLEdBRUEsT0FBT0MsUUFBU0QsRUFBaUNFLGFBQ3JELENEeUJZQyxDQUFvQkosSUFBZ0JMLEVBQWtCSyxFQUFZRyxjQUNoRUUsRUFBTUosRUFBYUEsRUFBV0ssSUFBTVosR0FBY0EsRUFBV2EsU0FFL0RGLFVBQ010QixLQUFLSCxnQkFBZ0I0QixjQUFjSCxJQUc3QyxJQUNJLGFBQWFkLEVBQ1RrQiw2Q0FBQUEsQ0FBTWpCLEVBQVMsQ0FDWE0sUUFBUyxDQUNMRSxZQUFhLENBQ1RVLGFBQWMsQ0FBRUMsTUFBT2YsRUFBd0JHLEdBQVVhLGlCQUlyRW5CLEUsQ0FFTixNQUFPb0IsR0FDTCxJRXJEVyxDQUFDQSxHQUNJLGlCQUFWQSxHQUFnQyxPQUFWQSxHQUFrQixTQUFVQSxFRnFEbkQsQ0FBZUEsS0FDZkMsNENBQUFBLENBQUtELEVBQU1FLEtBQUtDLE9BQVEsQ0FBRUMsS0FBTSw0QkFFakMsTUFBTUosRUFHVixNQUFNSCxRQUFxQjNCLEtBQUtILGdCQUFn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QUNyQyxNQUFRSyxTQUFTLFNBQUVDLEVBQVcsSUFBTyxDQUFDLEdBQU1QLEVBRXRDZ0MsRUFBUXpDLEtBQUtrUCwwQkFBMEJwTyxXQUU3QyxPQUFJMkIsRUFBTTZNLHFCQUF1QixFQUFtQkMsbUJBQzFDdlAsS0FBS2tQLDBCQUEwQlIsWUFBWSxPQUFELHdCQUVyQ2pPLEdBQU8sQ0FDVk0sUUFBUyxDQUFFQyxjQUVmTixHQUdHa0csUUFBUUMsV0FHZnBFLEVBQU01Qix3QkFBd0JHLEdBQVViLE9BQU9rUCxhQUN4Q3JQLEtBQUttUCxpQkFBaUI1TyxNQUN6QixFQUFNQyxRQUFRZ1AsS0FBS3hQLE1BQ25CUyxFQUNBQyxFQUNBVixLQUFLc08sYUFJTixFQUFNOU4sUUFBTyxVQUFDQyxFQUFTQyxFQUNsQyxFLEVDMUNKLE1BV0EsR0N0QkkrTyxFRFlBUCxHQUVBLElBQUlELEVBQ0FDLEVBQ0EsSUFBSXhQLEVBQ0F3UCxFQUNBLElBQUkvSSxFQUFlLElBQUlzRyxFQUFxQmlELDJFQUFBQSxPQ2pCcERDLEVEcUI4RCxDQUFDLENBQUV6UCxHQUFJLFdDbkI5RDhELE9BQU80TCxPQUFPSCxFQUFRLENBQUVFLGdCQUpwQixJQUNYRixFQUNBRSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NhcmRpbmFsLWludGVncmF0aW9uL3NyYy9jYXJkaW5hbC10aHJlZS1kLXNlY3VyZS1mbG93LnRzP2JjMzkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLXZhdWx0ZWQtaW5zdHJ1bWVudC50cz8xODBmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1mYWlsZWQtZXJyb3IudHM/MDdkZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLnRzPzViZmMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NhcmRpbmFsLWludGVncmF0aW9uL3NyYy9jYXJkaW5hbC1jbGllbnQudHM/MjIxNyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLXNjcmlwdC1sb2FkZXIudHM/M2JiMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9wYXltZW50LXN0YXR1cy10eXBlcy50cz8wYjgwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz8yODlmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtcHJvLWludGVncmF0aW9uL3NyYy9wYXlwYWwtcHJvLXBheW1lbnQtc3RyYXRlZ3kudHM/OGIxYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXByby1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXBheXBhbC1wcm8tcGF5bWVudC1zdHJhdGVneS50cz8zYmJhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbWVyZ2UsIHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IENhcmRpbmFsQ2xpZW50LCB7IENhcmRpbmFsT3JkZXJEYXRhIH0gZnJvbSAnLi9jYXJkaW5hbC1jbGllbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3cge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF9jYXJkaW5hbENsaWVudDogQ2FyZGluYWxDbGllbnQsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgcHJlcGFyZShtZXRob2Q6IFBheW1lbnRNZXRob2QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQubG9hZChtZXRob2QuaWQsIG1ldGhvZC5jb25maWcudGVzdE1vZGUpO1xuICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5jb25maWd1cmUoYXdhaXQgdGhpcy5fZ2V0Q2xpZW50VG9rZW4obWV0aG9kKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3RhcnQoXG4gICAgICAgIGV4ZWN1dGU6IFBheW1lbnRTdHJhdGVneVsnZXhlY3V0ZSddLFxuICAgICAgICBwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgICAgICBob3N0ZWRGb3JtPzogSG9zdGVkRm9ybSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnZXRDYXJkSW5zdHJ1bWVudCwgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cgfSA9XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50OiB7IG1ldGhvZElkID0gJycsIHBheW1lbnREYXRhID0ge30gfSA9IHt9IH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50ID1cbiAgICAgICAgICAgIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGdldENhcmRJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCk7XG4gICAgICAgIGNvbnN0IGJpbiA9IGluc3RydW1lbnQgPyBpbnN0cnVtZW50LmlpbiA6IGhvc3RlZEZvcm0gJiYgaG9zdGVkRm9ybS5nZXRCaW4oKTtcblxuICAgICAgICBpZiAoYmluKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5ydW5CaW5Qcm9jZXNzKGJpbik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGUoXG4gICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZCwge1xuICAgICAgICAgICAgICAgICAgICBwYXltZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVlRFNlY3VyZTogeyB0b2tlbjogZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpLmNsaWVudFRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGhyZWVEU2VjdXJlID0gYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgICAgICAgICBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdCxcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRPcmRlckRhdGEoKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZC5wYXltZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YTogeyB0aHJlZURTZWN1cmUgfSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgaG9zdGVkRm9ybS5zdWJtaXQoXG4gICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZC5wYXltZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2dldENsaWVudFRva2VuKG1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGlmIChtZXRob2QuY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuY2xpZW50VG9rZW47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZC5pZCk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kLmlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbiB8fCAnJztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRPcmRlckRhdGEoKTogQ2FyZGluYWxPcmRlckRhdGEge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gc3RhdGUuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXJPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjaGVja291dC5jYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBpZDogb3JkZXIub3JkZXJJZC50b1N0cmluZygpLFxuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5jYXJ0LmNhcnRBbW91bnQsXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLy8gSGF2ZSB0byB1c2UgYGFzYCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83Mzk4NzA0NC90eXBlZ3VhcmRpbmctYW4tdW5rbm93bi1uZXN0ZWQtb2JqZWN0IHNob3VsZCBiZSBmaXhlZCBpbiA0LjgrXG5jb25zdCBpc1JlcXVlc3RFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlcXVlc3RFcnJvciA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2JvZHknIGluIGVycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNSZXF1ZXN0RXJyb3I7XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBUaHJlZURTZWN1cmUsIFRocmVlRFNlY3VyZVRva2VuIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBjb25zdCBDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMgPSBbMTAwMDA0LCAxMDEwLCAxMDExLCAxMDIwXTtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFNESyB7XG4gICAgY29uZmlndXJlKHBhcmFtczogQ2FyZGluYWxDb25maWd1cmF0aW9uKTogdm9pZDtcbiAgICBvbihwYXJhbXM6IENhcmRpbmFsRXZlbnRUeXBlLCBjYWxsYmFjazogQ2FyZGluYWxFdmVudE1hcFtDYXJkaW5hbEV2ZW50VHlwZV0pOiB2b2lkO1xuICAgIG9mZihwYXJhbXM6IENhcmRpbmFsRXZlbnRUeXBlKTogdm9pZDtcbiAgICBzZXR1cDxLIGV4dGVuZHMga2V5b2YgQ2FyZGluYWxJbml0aWFsaXphdGlvbkRhdGFNYXA+KFxuICAgICAgICBpbml0aWFsaXphdGlvblR5cGU6IEssXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogQ2FyZGluYWxJbml0aWFsaXphdGlvbkRhdGFNYXBbS10sXG4gICAgKTogdm9pZDtcbiAgICB0cmlnZ2VyKFxuICAgICAgICBldmVudDogQ2FyZGluYWxUcmlnZ2VyRXZlbnRzLFxuICAgICAgICBkYXRhPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q2FyZGluYWxCaW5Qcm9jZXNzUmVzcG9uc2UgfCB2b2lkPjtcbiAgICBjb250aW51ZShcbiAgICAgICAgcGF5bWVudEJyYW5kOiBDYXJkaW5hbFBheW1lbnRCcmFuZCxcbiAgICAgICAgY29udGludWVPYmplY3Q6IENhcmRpbmFsQ29udGludWUsXG4gICAgICAgIG9yZGVyOiBDYXJkaW5hbFBhcnRpYWxPcmRlcixcbiAgICApOiB2b2lkO1xuICAgIHN0YXJ0KHBheW1lbnRCcmFuZDogQ2FyZGluYWxQYXltZW50QnJhbmQsIG9yZGVyOiBDYXJkaW5hbFBhcnRpYWxPcmRlciwgand0Pzogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgQ2FyZGluYWw/OiBDYXJkaW5hbFNESztcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxFdmVudFR5cGUge1xuICAgIFNldHVwQ29tcGxldGVkID0gJ3BheW1lbnRzLnNldHVwQ29tcGxldGUnLFxuICAgIFZhbGlkYXRlZCA9ICdwYXltZW50cy52YWxpZGF0ZWQnLFxufVxuXG5leHBvcnQgdHlwZSBzZXR1cENvbXBsZXRlRm4gPSAoc2V0dXBDb21wbGV0ZURhdGE6IENhcmRpbmFsU2V0dXBDb21wbGV0ZWREYXRhKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgdmFsaWRhdGVkRm4gPSAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhLCBqd3Q/OiBzdHJpbmcpID0+IHZvaWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxFdmVudE1hcCB7XG4gICAgW0NhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkXTogc2V0dXBDb21wbGV0ZUZuO1xuICAgIFtDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWRdOiB2YWxpZGF0ZWRGbjtcbn1cblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxDb25maWd1cmF0aW9uID0gUGFydGlhbDx7XG4gICAgbG9nZ2luZzoge1xuICAgICAgICBsZXZlbDogc3RyaW5nO1xuICAgIH07XG4gICAgcGF5bWVudDoge1xuICAgICAgICB2aWV3OiBzdHJpbmc7XG4gICAgICAgIGZyYW1ld29yazogc3RyaW5nO1xuICAgICAgICBkaXNwbGF5TG9hZGluZzogYm9vbGVhbjtcbiAgICB9O1xufT47XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxTZXR1cENvbXBsZXRlZERhdGEge1xuICAgIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIG1vZHVsZXM6IENhcmRpbmFsTW9kdWxlU3RhdGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbE1vZHVsZVN0YXRlIHtcbiAgICBsb2FkZWQ6IGJvb2xlYW47XG4gICAgbW9kdWxlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlIHtcbiAgICBJbml0ID0gJ2luaXQnLFxuICAgIENvbXBsZXRlID0gJ2NvbXBsZXRlJyxcbiAgICBDb25maXJtID0gJ2NvbmZpcm0nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsSW5pdGlhbGl6YXRpb25EYXRhTWFwIHtcbiAgICBbQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuSW5pdF06IENhcmRpbmFsSW5pdFR5cGVEYXRhO1xuICAgIFtDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZS5Db21wbGV0ZV06IENhcmRpbmFsQ29tcGxldGVUeXBlRGF0YTtcbiAgICBbQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuQ29uZmlybV06IENhcmRpbmFsQ29uZmlybVR5cGVEYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsSW5pdFR5cGVEYXRhIHtcbiAgICBqd3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbXBsZXRlVHlwZURhdGEge1xuICAgIFN0YXR1czogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29uZmlybVR5cGVEYXRhIHtcbiAgICBqd3Q6IHN0cmluZztcbiAgICBjYXJkaW5hbFJlc3BvbnNlSnd0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxWYWxpZGF0ZWREYXRhIHtcbiAgICBBY3Rpb25Db2RlPzogQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb247XG4gICAgRXJyb3JEZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIEVycm9yTnVtYmVyOiBudW1iZXI7XG4gICAgVmFsaWRhdGVkPzogYm9vbGVhbjtcbiAgICBQYXltZW50PzogQ2FyZGluYWxQYXltZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsUGF5bWVudCB7XG4gICAgRXh0ZW5kZWREYXRhPzogQ2FyZGluYWxDQ0FFeHRlbmRlZERhdGE7XG4gICAgUHJvY2Vzc29yVHJhbnNhY3Rpb25JZDogc3RyaW5nO1xuICAgIFR5cGU6IENhcmRpbmFsUGF5bWVudFR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxCaW5Qcm9jZXNzUmVzcG9uc2Uge1xuICAgIFN0YXR1czogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbnRpbnVlIHtcbiAgICBBY3NVcmw6IHN0cmluZztcbiAgICBQYXlsb2FkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxQYXJ0aWFsT3JkZXIge1xuICAgIE9yZGVyRGV0YWlsczogQ2FyZGluYWxPcmRlckRldGFpbHM7XG4gICAgQ29uc3VtZXI/OiBDYXJkaW5hbENvbnN1bWVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQ29uc3VtZXIge1xuICAgIEVtYWlsMT86IHN0cmluZztcbiAgICBFbWFpbDI/OiBzdHJpbmc7XG4gICAgU2hpcHBpbmdBZGRyZXNzPzogQ2FyZGluYWxBZGRyZXNzO1xuICAgIEJpbGxpbmdBZGRyZXNzPzogQ2FyZGluYWxBZGRyZXNzO1xuICAgIEFjY291bnQ/OiBDYXJkaW5hbEFjY291bnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxBY2NvdW50IHtcbiAgICBBY2NvdW50TnVtYmVyOiBudW1iZXI7XG4gICAgRXhwaXJhdGlvbk1vbnRoOiBudW1iZXI7XG4gICAgRXhwaXJhdGlvblllYXI6IG51bWJlcjtcbiAgICBOYW1lT25BY2NvdW50OiBzdHJpbmc7XG4gICAgQ2FyZENvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEFkZHJlc3Mge1xuICAgIEZ1bGxOYW1lPzogc3RyaW5nO1xuICAgIEZpcnN0TmFtZTogc3RyaW5nO1xuICAgIE1pZGRsZU5hbWU/OiBzdHJpbmc7XG4gICAgTGFzdE5hbWU6IHN0cmluZztcbiAgICBBZGRyZXNzMTogc3RyaW5nO1xuICAgIEFkZHJlc3MyPzogc3RyaW5nO1xuICAgIEFkZHJlc3MzPzogc3RyaW5nO1xuICAgIENpdHk6IHN0cmluZztcbiAgICBTdGF0ZTogc3RyaW5nO1xuICAgIFBvc3RhbENvZGU6IHN0cmluZztcbiAgICBDb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIFBob25lMT86IHN0cmluZztcbiAgICBQaG9uZTI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxPcmRlckRldGFpbHMge1xuICAgIE9yZGVyTnVtYmVyOiBzdHJpbmc7XG4gICAgQW1vdW50OiBudW1iZXI7XG4gICAgQ3VycmVuY3lDb2RlOiBzdHJpbmc7XG4gICAgT3JkZXJEZXNjcmlwdGlvbj86IHN0cmluZztcbiAgICBPcmRlckNoYW5uZWw6IHN0cmluZztcbiAgICBUcmFuc2FjdGlvbklkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBDYXJkaW5hbENDQUV4dGVuZGVkRGF0YSA9IFBhcnRpYWw8e1xuICAgIENBVlY6IHN0cmluZztcbiAgICBFQ0lGbGFnOiBzdHJpbmc7XG4gICAgUEFSZXNTdGF0dXM6IHN0cmluZztcbiAgICBTaWduYXR1cmVWZXJpZmljYXRpb246IHN0cmluZztcbiAgICBYSUQ6IHN0cmluZztcbiAgICBVQ0FGSW5kaWNhdG9yOiBzdHJpbmc7XG4gICAgQ2hhbGxlbmdlQ2FuY2VsOiBzdHJpbmc7XG59PjtcblxuZXhwb3J0IGVudW0gQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24ge1xuICAgIFN1Y2Nlc3MgPSAnU1VDQ0VTUycsXG4gICAgTm9BY3Rpb24gPSAnTk9BQ1RJT04nLFxuICAgIEZhaWx1cmUgPSAnRkFJTFVSRScsXG4gICAgRXJyb3IgPSAnRVJST1InLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFBheW1lbnRUeXBlIHtcbiAgICBDQ0EgPSAnQ0NBJyxcbiAgICBQYXlwYWwgPSAnUGF5cGFsJyxcbiAgICBXYWxsZXQgPSAnV2FsbGV0JyxcbiAgICBWaXNhQ2hlY2tvdXQgPSAnVmlzYUNoZWNrb3V0JyxcbiAgICBBcHBsZVBheSA9ICdBcHBsZVBheScsXG4gICAgRGlzY292ZXJXYWxsZXQgPSAnRGlzY292ZXJXYWxsZXQnLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFRyaWdnZXJFdmVudHMge1xuICAgIEJpblByb2Nlc3MgPSAnYmluLnByb2Nlc3MnLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFBheW1lbnRCcmFuZCB7XG4gICAgQ0NBID0gJ2NjYScsXG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uIHtcbiAgICBZZXMgPSAnWScsXG4gICAgTm8gPSAnTicsXG59XG5cbmV4cG9ydCB0eXBlIENhcmRpbmFsVGhyZWVEU2VjdXJlVG9rZW4gPSBQaWNrPFRocmVlRFNlY3VyZSwgJ3hpZCc+IHwgVGhyZWVEU2VjdXJlVG9rZW47XG4iLCJpbXBvcnQgeyBpbmNsdWRlcywgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQWRkcmVzcyxcbiAgICBCaWxsaW5nQWRkcmVzcyxcbiAgICBDcmVkaXRDYXJkSW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFRocmVlRFNlY3VyZVRva2VuLFxuICAgIFRocmVlRHNSZXN1bHQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIENhcmRpbmFsQWNjb3VudCxcbiAgICBDYXJkaW5hbEFkZHJlc3MsXG4gICAgQ2FyZGluYWxDb25zdW1lcixcbiAgICBDYXJkaW5hbEV2ZW50VHlwZSxcbiAgICBDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZSxcbiAgICBDYXJkaW5hbFBhcnRpYWxPcmRlcixcbiAgICBDYXJkaW5hbFBheW1lbnRCcmFuZCxcbiAgICBDYXJkaW5hbFNESyxcbiAgICBDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMsXG4gICAgQ2FyZGluYWxTaWduYXR1cmVWZXJpZmljYXRpb24sXG4gICAgQ2FyZGluYWxUcmlnZ2VyRXZlbnRzLFxuICAgIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLFxuICAgIENhcmRpbmFsVmFsaWRhdGVkRGF0YSxcbn0gZnJvbSAnLi9jYXJkaW5hbCc7XG5pbXBvcnQgQ2FyZGluYWxTY3JpcHRMb2FkZXIgZnJvbSAnLi9jYXJkaW5hbC1zY3JpcHQtbG9hZGVyJztcblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxTdXBwb3J0ZWRQYXltZW50SW5zdHJ1bWVudCA9IENyZWRpdENhcmRJbnN0cnVtZW50IHwgVmF1bHRlZEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxPcmRlckRhdGEge1xuICAgIGJpbGxpbmdBZGRyZXNzOiBCaWxsaW5nQWRkcmVzcztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBBZGRyZXNzO1xuICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nO1xuICAgIGlkOiBzdHJpbmc7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGF5bWVudERhdGE/OiBDcmVkaXRDYXJkSW5zdHJ1bWVudDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZGluYWxDbGllbnQge1xuICAgIHByaXZhdGUgX3Byb3ZpZGVyID0gJyc7XG4gICAgcHJpdmF0ZSBfdGVzdE1vZGUgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9zZGs/OiBQcm9taXNlPENhcmRpbmFsU0RLPjtcbiAgICBwcml2YXRlIF9jb25maWd1cmF0aW9uVG9rZW4gPSAnJztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3NjcmlwdExvYWRlcjogQ2FyZGluYWxTY3JpcHRMb2FkZXIpIHt9XG5cbiAgICBsb2FkKHByb3ZpZGVyOiBzdHJpbmcsIHRlc3RNb2RlID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fcHJvdmlkZXIgPSBwcm92aWRlcjtcbiAgICAgICAgdGhpcy5fdGVzdE1vZGUgPSB0ZXN0TW9kZTtcblxuICAgICAgICBpZiAoIXRoaXMuX3Nkaykge1xuICAgICAgICAgICAgdGhpcy5fc2RrID0gdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQocHJvdmlkZXIsIHRlc3RNb2RlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZGsudGhlbihub29wKTtcbiAgICB9XG5cbiAgICBjb25maWd1cmUoY2xpZW50VG9rZW46IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvblRva2VuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29uZmlndXJhdGlvblRva2VuID09PSBjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc2RrID0gdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWQoYCR7dGhpcy5fcHJvdmlkZXJ9LiR7RGF0ZS5ub3coKX1gLCB0aGlzLl90ZXN0TW9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbihcbiAgICAgICAgICAgIChjbGllbnQpID0+XG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGllbnQub24oQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWQsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuU2V0dXBDb21wbGV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5WYWxpZGF0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25maWd1cmF0aW9uVG9rZW4gPSBjbGllbnRUb2tlbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjbGllbnQub24oQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkLCAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLkFjdGlvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZXMoQ2FyZGluYWxTaWduYXR1cmVWYWxpZGF0aW9uRXJyb3JzLCBkYXRhLkVycm9yTnVtYmVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBNaXNzaW5nRGF0YUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGRhdGEuRXJyb3JEZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50LnNldHVwKENhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLkluaXQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGp3dDogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHJ1bkJpblByb2Nlc3MoYmluTnVtYmVyOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpXG4gICAgICAgICAgICAudGhlbigoY2xpZW50KSA9PlxuICAgICAgICAgICAgICAgIGNsaWVudC50cmlnZ2VyKENhcmRpbmFsVHJpZ2dlckV2ZW50cy5CaW5Qcm9jZXNzLCBiaW5OdW1iZXIpLmNhdGNoKG5vb3ApLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0IHx8ICFyZXN1bHQuU3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgdGhyZWVEU2VjdXJlRGF0YTogVGhyZWVEc1Jlc3VsdCxcbiAgICAgICAgb3JkZXJEYXRhOiBDYXJkaW5hbE9yZGVyRGF0YSxcbiAgICApOiBQcm9taXNlPFRocmVlRFNlY3VyZVRva2VuPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDbGllbnRTREsoKS50aGVuKChjbGllbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxUaHJlZURTZWN1cmVUb2tlbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsaWVudC5vbihcbiAgICAgICAgICAgICAgICAgICAgQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkLFxuICAgICAgICAgICAgICAgICAgICAoZGF0YTogQ2FyZGluYWxWYWxpZGF0ZWREYXRhLCBqd3Q/OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFqd3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5FcnJvckRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBkYXRhLkVycm9yRGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdBbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEuQWN0aW9uQ29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdG9rZW46IGp3dCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkYXRhLkFjdGlvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLlN1Y2Nlc3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHsgdG9rZW46IGp3dCB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24uTm9BY3Rpb246XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLkVycm9yTnVtYmVyID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGRhdGEuRXJyb3JEZXNjcmlwdGlvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEuUGF5bWVudCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRhdGEuUGF5bWVudC5FeHRlbmRlZERhdGEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuUGF5bWVudC5FeHRlbmRlZERhdGEuU2lnbmF0dXJlVmVyaWZpY2F0aW9uICE9PVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uLlllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1RyYW5zYWN0aW9uIHNpZ25hdHVyZSBjb3VsZCBub3QgYmUgdmFsaWRhdGVkLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRva2VuOiBqd3QgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkZhaWx1cmU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyIGZhaWxlZCBhdXRoZW50aWNhdGlvbiBvciBhbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb24uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLkVycm9yOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoZGF0YS5FcnJvckRlc2NyaXB0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRpbnVlT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICBBY3NVcmw6IHRocmVlRFNlY3VyZURhdGEuYWNzX3VybCxcbiAgICAgICAgICAgICAgICAgICAgUGF5bG9hZDogdGhyZWVEU2VjdXJlRGF0YS5tZXJjaGFudF9kYXRhLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsT3JkZXIgPSB0aGlzLl9tYXBUb1BhcnRpYWxPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEYXRhLFxuICAgICAgICAgICAgICAgICAgICB0aHJlZURTZWN1cmVEYXRhLnBheWVyX2F1dGhfcmVxdWVzdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgY2xpZW50LmNvbnRpbnVlKENhcmRpbmFsUGF5bWVudEJyYW5kLkNDQSwgY29udGludWVPYmplY3QsIHBhcnRpYWxPcmRlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFwVG9QYXJ0aWFsT3JkZXIoXG4gICAgICAgIG9yZGVyRGF0YTogQ2FyZGluYWxPcmRlckRhdGEsXG4gICAgICAgIHRyYW5zYWN0aW9uSWQ6IHN0cmluZyxcbiAgICApOiBDYXJkaW5hbFBhcnRpYWxPcmRlciB7XG4gICAgICAgIGNvbnN0IGNvbnN1bWVyOiBDYXJkaW5hbENvbnN1bWVyID0ge1xuICAgICAgICAgICAgQmlsbGluZ0FkZHJlc3M6IHRoaXMuX21hcFRvQ2FyZGluYWxBZGRyZXNzKG9yZGVyRGF0YS5iaWxsaW5nQWRkcmVzcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG9yZGVyRGF0YS5wYXltZW50RGF0YSkge1xuICAgICAgICAgICAgY29uc3VtZXIuQWNjb3VudCA9IHRoaXMuX21hcFRvQ2FyZGluYWxBY2NvdW50KG9yZGVyRGF0YS5wYXltZW50RGF0YSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JkZXJEYXRhLmJpbGxpbmdBZGRyZXNzLmVtYWlsKSB7XG4gICAgICAgICAgICBjb25zdW1lci5FbWFpbDEgPSBvcmRlckRhdGEuYmlsbGluZ0FkZHJlc3MuZW1haWw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3JkZXJEYXRhLnNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3VtZXIuU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fbWFwVG9DYXJkaW5hbEFkZHJlc3Mob3JkZXJEYXRhLnNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQ29uc3VtZXI6IGNvbnN1bWVyLFxuICAgICAgICAgICAgT3JkZXJEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgT3JkZXJOdW1iZXI6IG9yZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICBBbW91bnQ6IG9yZGVyRGF0YS5hbW91bnQsXG4gICAgICAgICAgICAgICAgQ3VycmVuY3lDb2RlOiBvcmRlckRhdGEuY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIE9yZGVyQ2hhbm5lbDogJ1MnLFxuICAgICAgICAgICAgICAgIFRyYW5zYWN0aW9uSWQ6IHRyYW5zYWN0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFRvQ2FyZGluYWxBY2NvdW50KHBheW1lbnREYXRhOiBDcmVkaXRDYXJkSW5zdHJ1bWVudCk6IENhcmRpbmFsQWNjb3VudCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBBY2NvdW50TnVtYmVyOiBOdW1iZXIocGF5bWVudERhdGEuY2NOdW1iZXIpLFxuICAgICAgICAgICAgRXhwaXJhdGlvbk1vbnRoOiBOdW1iZXIocGF5bWVudERhdGEuY2NFeHBpcnkubW9udGgpLFxuICAgICAgICAgICAgRXhwaXJhdGlvblllYXI6IE51bWJlcihwYXltZW50RGF0YS5jY0V4cGlyeS55ZWFyKSxcbiAgICAgICAgICAgIE5hbWVPbkFjY291bnQ6IHBheW1lbnREYXRhLmNjTmFtZSxcbiAgICAgICAgICAgIENhcmRDb2RlOiBOdW1iZXIocGF5bWVudERhdGEuY2NDdnYpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFRvQ2FyZGluYWxBZGRyZXNzKGFkZHJlc3M6IEFkZHJlc3MpOiBDYXJkaW5hbEFkZHJlc3Mge1xuICAgICAgICBjb25zdCBjYXJkaW5hbEFkZHJlc3M6IENhcmRpbmFsQWRkcmVzcyA9IHtcbiAgICAgICAgICAgIEZpcnN0TmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBMYXN0TmFtZTogYWRkcmVzcy5sYXN0TmFtZSxcbiAgICAgICAgICAgIEFkZHJlc3MxOiBhZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgQ2l0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgU3RhdGU6IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgUG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgQ291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGFkZHJlc3MuYWRkcmVzczIpIHtcbiAgICAgICAgICAgIGNhcmRpbmFsQWRkcmVzcy5BZGRyZXNzMiA9IGFkZHJlc3MuYWRkcmVzczI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWRkcmVzcy5waG9uZSkge1xuICAgICAgICAgICAgY2FyZGluYWxBZGRyZXNzLlBob25lMSA9IGFkZHJlc3MucGhvbmU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FyZGluYWxBZGRyZXNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldENsaWVudFNESygpOiBQcm9taXNlPENhcmRpbmFsU0RLPiB7XG4gICAgICAgIGlmICghdGhpcy5fc2RrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NkaztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IENhcmRpbmFsU0RLLCBDYXJkaW5hbFdpbmRvdyB9IGZyb20gJy4vY2FyZGluYWwnO1xuXG5jb25zdCBTREtfVEVTVF9VUkwgPSAnaHR0cHM6Ly9zb25nYmlyZHN0YWcuY2FyZGluYWxjb21tZXJjZS5jb20vZWRnZS92MS9zb25nYmlyZC5qcyc7XG5cbmNvbnN0IFNES19QUk9EX1VSTCA9ICdodHRwczovL3N0YXRpYy5jbGllbnQuY2FyZGluYWx0cnVzdGVkLmNvbS9zb25nYmlyZC92Mi4wLjAvc29uZ2JpcmQuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkaW5hbFNjcmlwdExvYWRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsIHByaXZhdGUgX3dpbmRvdzogQ2FyZGluYWxXaW5kb3cgPSB3aW5kb3cpIHt9XG5cbiAgICBsb2FkKHByb3ZpZGVyOiBzdHJpbmcsIHRlc3RNb2RlPzogYm9vbGVhbik6IFByb21pc2U8Q2FyZGluYWxTREs+IHtcbiAgICAgICAgY29uc3QgdXJsID0gdGVzdE1vZGUgPyBTREtfVEVTVF9VUkwgOiBTREtfUFJPRF9VUkw7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAke3VybH0/dj0ke3Byb3ZpZGVyfWApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cuQ2FyZGluYWwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvdy5DYXJkaW5hbDtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImVudW0gUGF5bWVudFN0YXR1c1R5cGVzIHtcbiAgICBBQ0tOT1dMRURHRSA9ICdBQ0tOT1dMRURHRScsXG4gICAgRklOQUxJWkUgPSAnRklOQUxJWkUnLFxuICAgIElOSVRJQUxJWkUgPSAnSU5JVElBTElaRScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRTdGF0dXNUeXBlcztcbiIsImltcG9ydCB7IGlzTmlsLCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9jcmVkaXQtY2FyZC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByb3RlY3RlZCBfaG9zdGVkRm9ybT86IEhvc3RlZEZvcm07XG4gICAgcHJvdGVjdGVkIF9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkge31cblxuICAgIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoXG4gICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQ/Lm1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5nYXRld2F5SWQsXG4gICAgICAgICkgJiYgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybVxuICAgICAgICAgICAgPyB0aGlzLl9leGVjdXRlV2l0aEhvc3RlZEZvcm0ocGF5bG9hZCwgb3B0aW9ucylcbiAgICAgICAgICAgIDogdGhpcy5fZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG9wdGlvbnM/Lm1ldGhvZElkLCBvcHRpb25zPy5nYXRld2F5SWQpIHx8XG4gICAgICAgICAgICAhdGhpcy5faXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShvcHRpb25zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybU9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudFNldHRpbmdzOiB7IGJpZ3BheUJhc2VVcmw6IGhvc3QgPSAnJyB9ID0ge30gfSA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaG9zdCwgZm9ybU9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmb3JtLmF0dGFjaCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtID0gZm9ybTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9ob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSBwYXltZW50ICYmIHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50RGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoeyAuLi5wYXltZW50LCBwYXltZW50RGF0YSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgZm9ybSA9IHRoaXMuX2hvc3RlZEZvcm07XG5cbiAgICAgICAgaWYgKCFmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5tZXRob2RJZCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGF3YWl0IGZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IGZvcm0uc3VibWl0KHBheW1lbnQpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkPzogc3RyaW5nLCBnYXRld2F5SWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdmFsdWVzKG9wdGlvbnMgJiYgb3B0aW9ucy5jcmVkaXRDYXJkICYmIG9wdGlvbnMuY3JlZGl0Q2FyZC5mb3JtLmZpZWxkcykuZXZlcnkoXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3cgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7IENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NyZWRpdC1jYXJkLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0YXR1c1R5cGVzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsUHJvUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByb3RlY3RlZCBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHRocmVlRFNlY3VyZUZsb3c6IENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyxcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGF5bWVudEludGVncmF0aW9uU2VydmljZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZShvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy50aHJlZURTZWN1cmVGbG93LnByZXBhcmUocGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50OiB7IG1ldGhvZElkID0gJycgfSA9IHt9IH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgaWYgKHN0YXRlLmdldFBheW1lbnRTdGF0dXMoKSA9PT0gUGF5bWVudFN0YXR1c1R5cGVzLkFDS05PV0xFREdFKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50OiB7IG1ldGhvZElkIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKS5jb25maWcuaXMzZHNFbmFibGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheXBhbFByb1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1wcm8tcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbFByb1BheW1lbnRTdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8UGF5cGFsUHJvUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PlxuICAgIG5ldyBQYXlwYWxQcm9QYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3coXG4gICAgICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgbmV3IENhcmRpbmFsQ2xpZW50KG5ldyBDYXJkaW5hbFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSkpLFxuICAgICAgICApLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxQcm9QYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsJyB9XSk7XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IiwiY29uc3RydWN0b3IiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsIl9jYXJkaW5hbENsaWVudCIsInByZXBhcmUiLCJtZXRob2QiLCJ0aGlzIiwibG9hZCIsImlkIiwiY29uZmlnIiwidGVzdE1vZGUiLCJjb25maWd1cmUiLCJfZ2V0Q2xpZW50VG9rZW4iLCJzdGFydCIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsImhvc3RlZEZvcm0iLCJnZXRDYXJkSW5zdHJ1bWVudCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiZ2V0U3RhdGUiLCJwYXltZW50IiwibWV0aG9kSWQiLCJwYXltZW50RGF0YSIsImluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsImJpbiIsImlpbiIsImdldEJpbiIsInJ1bkJpblByb2Nlc3MiLCJtZXJnZSIsInRocmVlRFNlY3VyZSIsInRva2VuIiwiY2xpZW50VG9rZW4iLCJlcnJvciIsInNvbWUiLCJib2R5IiwiZXJyb3JzIiwiY29kZSIsImdldFRocmVlRFNlY3VyZURhdGEiLCJ0aHJlZV9kc19yZXN1bHQiLCJfZ2V0T3JkZXJEYXRhIiwic3VibWl0UGF5bWVudCIsInN1Ym1pdCIsImxvYWRQYXltZW50TWV0aG9kIiwic3RhdGUiLCJiaWxsaW5nQWRkcmVzcyIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsInNoaXBwaW5nQWRkcmVzcyIsImdldFNoaXBwaW5nQWRkcmVzcyIsImNoZWNrb3V0IiwiZ2V0Q2hlY2tvdXRPclRocm93Iiwib3JkZXIiLCJnZXRPcmRlck9yVGhyb3ciLCJjdXJyZW5jeUNvZGUiLCJjYXJ0IiwiY3VycmVuY3kiLCJvcmRlcklkIiwidG9TdHJpbmciLCJhbW91bnQiLCJjYXJ0QW1vdW50IiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIkNhcmRpbmFsU2lnbmF0dXJlVmFsaWRhdGlvbkVycm9ycyIsIkNhcmRpbmFsRXZlbnRUeXBlIiwiQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUiLCJDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbiIsIkNhcmRpbmFsUGF5bWVudFR5cGUiLCJDYXJkaW5hbFRyaWdnZXJFdmVudHMiLCJDYXJkaW5hbFBheW1lbnRCcmFuZCIsIkNhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uIiwiQ2FyZGluYWxDbGllbnQiLCJfc2NyaXB0TG9hZGVyIiwiX3Byb3ZpZGVyIiwiX3Rlc3RNb2RlIiwiX2NvbmZpZ3VyYXRpb25Ub2tlbiIsInByb3ZpZGVyIiwiX3NkayIsInRoZW4iLCJub29wIiwiUHJvbWlzZSIsInJlc29sdmUiLCJEYXRlIiwibm93IiwiX2dldENsaWVudFNESyIsImNsaWVudCIsInJlamVjdCIsIm9uIiwiU2V0dXBDb21wbGV0ZWQiLCJvZmYiLCJWYWxpZGF0ZWQiLCJkYXRhIiwiQWN0aW9uQ29kZSIsImluY2x1ZGVzIiwiRXJyb3JOdW1iZXIiLCJFcnJvckRlc2NyaXB0aW9uIiwic2V0dXAiLCJJbml0Iiwiand0IiwiYmluTnVtYmVyIiwidHJpZ2dlciIsIkJpblByb2Nlc3MiLCJjYXRjaCIsInJlc3VsdCIsIlN0YXR1cyIsInRocmVlRFNlY3VyZURhdGEiLCJvcmRlckRhdGEiLCJTdWNjZXNzIiwiTm9BY3Rpb24iLCJQYXltZW50IiwiRXh0ZW5kZWREYXRhIiwiU2lnbmF0dXJlVmVyaWZpY2F0aW9uIiwiWWVzIiwiRmFpbHVyZSIsImNvbnRpbnVlT2JqZWN0IiwiQWNzVXJsIiwiYWNzX3VybCIsIlBheWxvYWQiLCJtZXJjaGFudF9kYXRhIiwicGFydGlhbE9yZGVyIiwiX21hcFRvUGFydGlhbE9yZGVyIiwicGF5ZXJfYXV0aF9yZXF1ZXN0IiwiY29udGludWUiLCJDQ0EiLCJ0cmFuc2FjdGlvbklkIiwiY29uc3VtZXIiLCJCaWxsaW5nQWRkcmVzcyIsIl9tYXBUb0NhcmRpbmFsQWRkcmVzcyIsIkFjY291bnQiLCJfbWFwVG9DYXJkaW5hbEFjY291bnQiLCJlbWFpbCIsIkVtYWlsMSIsIlNoaXBwaW5nQWRkcmVzcyIsIkNvbnN1bWVyIiwiT3JkZXJEZXRhaWxzIiwiT3JkZXJOdW1iZXIiLCJBbW91bnQiLCJDdXJyZW5jeUNvZGUiLCJPcmRlckNoYW5uZWwiLCJUcmFuc2FjdGlvbklkIiwiQWNjb3VudE51bWJlciIsIk51bWJlciIsImNjTnVtYmVyIiwiRXhwaXJhdGlvbk1vbnRoIiwiY2NFeHBpcnkiLCJtb250aCIsIkV4cGlyYXRpb25ZZWFyIiwieWVhciIsIk5hbWVPbkFjY291bnQiLCJjY05hbWUiLCJDYXJkQ29kZSIsImNjQ3Z2IiwiYWRkcmVzcyIsImNhcmRpbmFsQWRkcmVzcyIsIkZpcnN0TmFtZSIsImZpcnN0TmFtZSIsIkxhc3ROYW1lIiwibGFzdE5hbWUiLCJBZGRyZXNzMSIsImFkZHJlc3MxIiwiQ2l0eSIsImNpdHkiLCJTdGF0ZSIsInN0YXRlT3JQcm92aW5jZSIsIlBvc3RhbENvZGUiLCJwb3N0YWxDb2RlIiwiQ291bnRyeUNvZGUiLCJjb3VudHJ5Q29kZSIsImFkZHJlc3MyIiwiQWRkcmVzczIiLCJwaG9uZSIsIlBob25lMSIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiQ2FyZGluYWxTY3JpcHRMb2FkZXIiLCJfd2luZG93Iiwid2luZG93IiwidXJsIiwibG9hZFNjcmlwdCIsIkNhcmRpbmFsIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIlBheW1lbnRTdGF0dXNUeXBlcyIsIkNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiZm9ybU9wdGlvbnMiLCJjcmVkaXRDYXJkIiwiZm9ybSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsIl9ob3N0ZWRGb3JtIiwiZGVpbml0aWFsaXplIiwiZGV0YWNoIiwiZmluYWxpemUiLCJzdWJtaXRPcmRlciIsInZhbGlkYXRlIiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsInZhbHVlcyIsImZpZWxkcyIsImV2ZXJ5IiwiaXNOaWwiLCJQYXlwYWxQcm9QYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwidGhyZWVEU2VjdXJlRmxvdyIsInBheW1lbnRNZXRob2QiLCJpczNkc0VuYWJsZWQiLCJnZXRQYXltZW50U3RhdHVzIiwiQUNLTk9XTEVER0UiLCJiaW5kIiwibW9kdWxlIiwiZ2V0U2NyaXB0TG9hZGVyIiwicmVzb2x2ZUlkcyIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-pro.js\n\n}");

/***/ }),

/***/ "./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx":
/*!***************************************************************************************!*\
  !*** ./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/memoize */ \"./node_modules/@bigcommerce/memoize/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isAccountInstrument/isAccountInstrument.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentFeatureAvailable/isInstrumentFeatureAvailable.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/AccountInstrumentFieldset/AccountInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/storedInstrument/StoreInstrumentFieldset/StoreInstrumentFieldset.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n\n\n\n\n\n\nfunction getHostedPaymentMethodDerivedProps(props) {\n    const filterAccountInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"]));\n    const filterTrustedInstruments = (0,_bigcommerce_memoize__WEBPACK_IMPORTED_MODULE_1__.memoizeOne)((instruments = []) => instruments.filter(({ trustedShippingAddress }) => trustedShippingAddress));\n    const { checkoutService, checkoutState, isUsingMultiShipping = false, method } = props;\n    const { data: { getCart, getConfig, getCustomer, getInstruments, isPaymentDataRequired, isPaymentDataSubmitted, }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const cart = getCart();\n    const config = getConfig();\n    const customer = getCustomer();\n    if (!config || !cart || !customer) {\n        throw new Error('Unable to get checkout');\n    }\n    const currentMethodInstruments = filterAccountInstruments(getInstruments(method));\n    const trustedInstruments = filterTrustedInstruments(currentMethodInstruments);\n    return {\n        instruments: trustedInstruments,\n        isNewAddress: trustedInstruments.length === 0 && currentMethodInstruments.length > 0,\n        isInstrumentFeatureAvailable: !isPaymentDataSubmitted(method.id, method.gateway) &&\n            (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n                config,\n                customer,\n                isUsingMultiShipping,\n                paymentMethod: method,\n            }),\n        isLoadingInstruments: isLoadingInstruments(),\n        isPaymentDataRequired: isPaymentDataRequired(),\n        loadInstruments: checkoutService.loadInstruments,\n    };\n}\nconst HostedPaymentMethodComponent = (props) => {\n    const { description, isInitializing = false, initializePayment, method, onUnhandledError = lodash__WEBPACK_IMPORTED_MODULE_2__.noop, deinitializePayment, } = props;\n    const [isAddingNewInstrument, setIsAddingNewInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [selectedInstrument, setSelectedInstrument] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)();\n    const derivedProps = getHostedPaymentMethodDerivedProps(props);\n    const { isLoadingInstruments, instruments, isNewAddress, isInstrumentFeatureAvailable: isInstrumentFeatureAvailableProp, loadInstruments, } = derivedProps;\n    const getDefaultInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        if (isAddingNewInstrument || !instruments.length) {\n            return;\n        }\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { defaultInstrument: true }) || instruments[0];\n    }, [isAddingNewInstrument, instruments]);\n    const handleUseNewInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n        setIsAddingNewInstrument(true);\n        setSelectedInstrument(undefined);\n    }, []);\n    const handleSelectInstrument = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((id) => {\n        setIsAddingNewInstrument(false);\n        setSelectedInstrument((0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(instruments, { bigpayToken: id }));\n    }, [instruments]);\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(() => {\n        const initializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n            try {\n                yield initializePayment({\n                    gatewayId: method.gateway,\n                    methodId: method.id,\n                });\n                if (isInstrumentFeatureAvailableProp) {\n                    yield loadInstruments();\n                }\n            }\n            catch (error) {\n                onUnhandledError(error);\n            }\n        });\n        void initializePaymentAsync();\n        return () => {\n            const deinitializePaymentAsync = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n                try {\n                    yield deinitializePayment({\n                        gatewayId: method.gateway,\n                        methodId: method.id,\n                    });\n                }\n                catch (error) {\n                    onUnhandledError(error);\n                }\n            });\n            void deinitializePaymentAsync();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    const currentSelectedInstrument = selectedInstrument || getDefaultInstrument();\n    const isLoading = isInitializing || isLoadingInstruments;\n    const shouldShowInstrumentFieldset = isInstrumentFeatureAvailableProp && (instruments.length > 0 || isNewAddress);\n    if (!description && !isInstrumentFeatureAvailableProp) {\n        return null;\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_8__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n        react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", { className: \"paymentMethod paymentMethod--hosted\" },\n            description,\n            shouldShowInstrumentFieldset && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { instruments: instruments, onSelectInstrument: handleSelectInstrument, onUseNewInstrument: handleUseNewInstrument, selectedInstrument: currentSelectedInstrument })),\n            isInstrumentFeatureAvailableProp && (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_7__[\"default\"], { instrumentId: currentSelectedInstrument && currentSelectedInstrument.bigpayToken, instruments: instruments, isAccountInstrument: true })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostedPaymentMethodComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtcGF5bWVudC1pbnRlZ3JhdGlvbi9zcmMvY29tcG9uZW50cy9Ib3N0ZWRQYXltZW50Q29tcG9uZW50LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBVWtEO0FBQ2Q7QUFDNEM7QUFPaEM7QUFFVTtBQXlCMUQsU0FBUyxrQ0FBa0MsQ0FDdkMsS0FBa0M7SUFFbEMsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyw4RUFBbUIsQ0FBQyxDQUMxQyxDQUFDO0lBQ0YsTUFBTSx3QkFBd0IsR0FBRyxnRUFBVSxDQUFDLENBQUMsY0FBbUMsRUFBRSxFQUFFLEVBQUUsQ0FDbEYsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsc0JBQXNCLEVBQUUsRUFBRSxFQUFFLENBQUMsc0JBQXNCLENBQUMsQ0FDN0UsQ0FBQztJQUNGLE1BQU0sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLG9CQUFvQixHQUFHLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFFdkYsTUFBTSxFQUNGLElBQUksRUFBRSxFQUNGLE9BQU8sRUFDUCxTQUFTLEVBQ1QsV0FBVyxFQUNYLGNBQWMsRUFDZCxxQkFBcUIsRUFDckIsc0JBQXNCLEdBQ3pCLEVBQ0QsUUFBUSxFQUFFLEVBQUUsb0JBQW9CLEVBQUUsR0FDckMsR0FBRyxhQUFhLENBQUM7SUFFbEIsTUFBTSxJQUFJLEdBQUcsT0FBTyxFQUFFLENBQUM7SUFDdkIsTUFBTSxNQUFNLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDM0IsTUFBTSxRQUFRLEdBQUcsV0FBVyxFQUFFLENBQUM7SUFFL0IsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2hDLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lB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QVcsRUFDeEIsa0JBQWtCLEVBQUUsc0JBQXNCLEVBQzFDLGtCQUFrQixFQUFFLHNCQUFzQixFQUMxQyxrQkFBa0IsRUFBRSx5QkFBeUIsR0FDL0MsQ0FDTDtZQUVBLGdDQUFnQyxJQUFJLENBQ2pDLDJEQUFDLDhFQUF1QixJQUNwQixZQUFZLEVBQ1IseUJBQXlCLElBQUkseUJBQXlCLENBQUMsV0FBVyxFQUV0RSxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxJQUFJLEdBQzNCLENBQ0wsQ0FDQyxDQUNPLENBQ3BCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSw0QkFBNEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaG9zdGVkLXBheW1lbnQtaW50ZWdyYXRpb24vc3JjL2NvbXBvbmVudHMvSG9zdGVkUGF5bWVudENvbXBvbmVudC50c3g/YWUyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWNjb3VudEluc3RydW1lbnQsXG4gICAgdHlwZSBDaGVja291dFNlbGVjdG9ycyxcbiAgICB0eXBlIENoZWNrb3V0U2VydmljZSxcbiAgICB0eXBlIExhbmd1YWdlU2VydmljZSxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICB0eXBlIFBheW1lbnRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbiAgICB0eXBlIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL21lbW9pemUnO1xuaW1wb3J0IHsgZmluZCwgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBSZWFjdE5vZGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQge1xuICAgIEFjY291bnRJbnN0cnVtZW50RmllbGRzZXQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlLFxuICAgIFN0b3JlSW5zdHJ1bWVudEZpZWxkc2V0LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQgeyB0eXBlIFBheW1lbnRGb3JtU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nT3ZlcmxheSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC91aSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzIHtcbiAgICBjaGVja291dFNlcnZpY2U6IENoZWNrb3V0U2VydmljZTtcbiAgICBjaGVja291dFN0YXRlOiBDaGVja291dFNlbGVjdG9ycztcbiAgICBkZXNjcmlwdGlvbj86IFJlYWN0Tm9kZTtcbiAgICBpc0luaXRpYWxpemluZz86IGJvb2xlYW47XG4gICAgaXNVc2luZ011bHRpU2hpcHBpbmc/OiBib29sZWFuO1xuICAgIGxhbmd1YWdlOiBMYW5ndWFnZVNlcnZpY2U7XG4gICAgbWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIHBheW1lbnRGb3JtOiBQYXltZW50Rm9ybVNlcnZpY2U7XG4gICAgZGVpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBpbml0aWFsaXplUGF5bWVudChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbiAgICBvblVuaGFuZGxlZEVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W107XG4gICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZTogYm9vbGVhbjtcbiAgICBpc0xvYWRpbmdJbnN0cnVtZW50czogYm9vbGVhbjtcbiAgICBpc05ld0FkZHJlc3M6IGJvb2xlYW47XG4gICAgaXNQYXltZW50RGF0YVJlcXVpcmVkOiBib29sZWFuO1xuICAgIGxvYWRJbnN0cnVtZW50cygpOiBQcm9taXNlPENoZWNrb3V0U2VsZWN0b3JzPjtcbn1cblxuZnVuY3Rpb24gZ2V0SG9zdGVkUGF5bWVudE1ldGhvZERlcml2ZWRQcm9wcyhcbiAgICBwcm9wczogSG9zdGVkUGF5bWVudENvbXBvbmVudFByb3BzLFxuKTogSG9zdGVkUGF5bWVudENvbXBvbmVudERlcml2ZWRQcm9wcyB7XG4gICAgY29uc3QgZmlsdGVyQWNjb3VudEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IFBheW1lbnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKGlzQWNjb3VudEluc3RydW1lbnQpLFxuICAgICk7XG4gICAgY29uc3QgZmlsdGVyVHJ1c3RlZEluc3RydW1lbnRzID0gbWVtb2l6ZU9uZSgoaW5zdHJ1bWVudHM6IEFjY291bnRJbnN0cnVtZW50W10gPSBbXSkgPT5cbiAgICAgICAgaW5zdHJ1bWVudHMuZmlsdGVyKCh7IHRydXN0ZWRTaGlwcGluZ0FkZHJlc3MgfSkgPT4gdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyksXG4gICAgKTtcbiAgICBjb25zdCB7IGNoZWNrb3V0U2VydmljZSwgY2hlY2tvdXRTdGF0ZSwgaXNVc2luZ011bHRpU2hpcHBpbmcgPSBmYWxzZSwgbWV0aG9kIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZ2V0Q2FydCxcbiAgICAgICAgICAgIGdldENvbmZpZyxcbiAgICAgICAgICAgIGdldEN1c3RvbWVyLFxuICAgICAgICAgICAgZ2V0SW5zdHJ1bWVudHMsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQsXG4gICAgICAgICAgICBpc1BheW1lbnREYXRhU3VibWl0dGVkLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0dXNlczogeyBpc0xvYWRpbmdJbnN0cnVtZW50cyB9LFxuICAgIH0gPSBjaGVja291dFN0YXRlO1xuXG4gICAgY29uc3QgY2FydCA9IGdldENhcnQoKTtcbiAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGdldEN1c3RvbWVyKCk7XG5cbiAgICBpZiAoIWNvbmZpZyB8fCAhY2FydCB8fCAhY3VzdG9tZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZ2V0IGNoZWNrb3V0Jyk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE1ldGhvZEluc3RydW1lbnRzID0gZmlsdGVyQWNjb3VudEluc3RydW1lbnRzKGdldEluc3RydW1lbnRzKG1ldGhvZCkpO1xuICAgIGNvbnN0IHRydXN0ZWRJbnN0cnVtZW50cyA9IGZpbHRlclRydXN0ZWRJbnN0cnVtZW50cyhjdXJyZW50TWV0aG9kSW5zdHJ1bWVudHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5zdHJ1bWVudHM6IHRydXN0ZWRJbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzOiB0cnVzdGVkSW5zdHJ1bWVudHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRNZXRob2RJbnN0cnVtZW50cy5sZW5ndGggPiAwLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOlxuICAgICAgICAgICAgIWlzUGF5bWVudERhdGFTdWJtaXR0ZWQobWV0aG9kLmlkLCBtZXRob2QuZ2F0ZXdheSkgJiZcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUoe1xuICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICBjdXN0b21lcixcbiAgICAgICAgICAgICAgICBpc1VzaW5nTXVsdGlTaGlwcGluZyxcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM6IGlzTG9hZGluZ0luc3RydW1lbnRzKCksXG4gICAgICAgIGlzUGF5bWVudERhdGFSZXF1aXJlZDogaXNQYXltZW50RGF0YVJlcXVpcmVkKCksXG4gICAgICAgIGxvYWRJbnN0cnVtZW50czogY2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50cyxcbiAgICB9O1xufVxuXG5jb25zdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50OiBSZWFjdC5GQzxIb3N0ZWRQYXltZW50Q29tcG9uZW50UHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgaXNJbml0aWFsaXppbmcgPSBmYWxzZSxcbiAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvciA9IG5vb3AsXG4gICAgICAgIGRlaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRJbnN0cnVtZW50LCBzZXRTZWxlY3RlZEluc3RydW1lbnRdID0gdXNlU3RhdGU8QWNjb3VudEluc3RydW1lbnQgfCB1bmRlZmluZWQ+KCk7XG5cbiAgICBjb25zdCBkZXJpdmVkUHJvcHMgPSBnZXRIb3N0ZWRQYXltZW50TWV0aG9kRGVyaXZlZFByb3BzKHByb3BzKTtcbiAgICBjb25zdCB7XG4gICAgICAgIGlzTG9hZGluZ0luc3RydW1lbnRzLFxuICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgaXNOZXdBZGRyZXNzLFxuICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlOiBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCxcbiAgICAgICAgbG9hZEluc3RydW1lbnRzLFxuICAgIH0gPSBkZXJpdmVkUHJvcHM7XG5cbiAgICBjb25zdCBnZXREZWZhdWx0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKCgpOiBBY2NvdW50SW5zdHJ1bWVudCB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICAgIGlmIChpc0FkZGluZ05ld0luc3RydW1lbnQgfHwgIWluc3RydW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZpbmQoaW5zdHJ1bWVudHMsIHsgZGVmYXVsdEluc3RydW1lbnQ6IHRydWUgfSkgfHwgaW5zdHJ1bWVudHNbMF07XG4gICAgfSwgW2lzQWRkaW5nTmV3SW5zdHJ1bWVudCwgaW5zdHJ1bWVudHNdKTtcblxuICAgIGNvbnN0IGhhbmRsZVVzZU5ld0luc3RydW1lbnQgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaW5nTmV3SW5zdHJ1bWVudCh0cnVlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbnN0cnVtZW50KHVuZGVmaW5lZCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaGFuZGxlU2VsZWN0SW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgc2V0SXNBZGRpbmdOZXdJbnN0cnVtZW50KGZhbHNlKTtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkSW5zdHJ1bWVudChmaW5kKGluc3RydW1lbnRzLCB7IGJpZ3BheVRva2VuOiBpZCB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIFtpbnN0cnVtZW50c10sXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkOiBtZXRob2QuZ2F0ZXdheSxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsb2FkSW5zdHJ1bWVudHMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHZvaWQgaW5pdGlhbGl6ZVBheW1lbnRBc3luYygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVpbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQ6IG1ldGhvZC5nYXRld2F5LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IG1ldGhvZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdm9pZCBkZWluaXRpYWxpemVQYXltZW50QXN5bmMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQgPSBzZWxlY3RlZEluc3RydW1lbnQgfHwgZ2V0RGVmYXVsdEluc3RydW1lbnQoKTtcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBpc0luaXRpYWxpemluZyB8fCBpc0xvYWRpbmdJbnN0cnVtZW50cztcbiAgICBjb25zdCBzaG91bGRTaG93SW5zdHJ1bWVudEZpZWxkc2V0ID1cbiAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZVByb3AgJiYgKGluc3RydW1lbnRzLmxlbmd0aCA+IDAgfHwgaXNOZXdBZGRyZXNzKTtcblxuICAgIGlmICghZGVzY3JpcHRpb24gJiYgIWlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGVQcm9wKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudE1ldGhvZCBwYXltZW50TWV0aG9kLS1ob3N0ZWRcIj5cbiAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb259XG5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd0luc3RydW1lbnRGaWVsZHNldCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxBY2NvdW50SW5zdHJ1bWVudEZpZWxkc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdEluc3RydW1lbnQ9e2hhbmRsZVNlbGVjdEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvblVzZU5ld0luc3RydW1lbnQ9e2hhbmRsZVVzZU5ld0luc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e2N1cnJlbnRTZWxlY3RlZEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgICAgIHtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlUHJvcCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxTdG9yZUluc3RydW1lbnRGaWVsZHNldFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkPXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VsZWN0ZWRJbnN0cnVtZW50ICYmIGN1cnJlbnRTZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQWNjb3VudEluc3RydW1lbnQ9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0xvYWRpbmdPdmVybGF5PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRQYXltZW50TWV0aG9kQ29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\n\n}");

/***/ }),

/***/ "./packages/paypal-payments-pro-integration/src/PayPalPaymentsProPaymentMethod.tsx":
/*!*****************************************************************************************!*\
  !*** ./packages/paypal-payments-pro-integration/src/PayPalPaymentsProPaymentMethod.tsx ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_paypal_pro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/paypal-pro */ \"../checkout-sdk-js/dist/esm/integrations/paypal-pro.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-credit-card-integration */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-payment-integration */ \"./packages/hosted-payment-integration/src/components/HostedPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\nconst PayPalPaymentsProPaymentMethod = ({ method, checkoutService, checkoutState, paymentForm, language, onUnhandledError, }) => {\n    const initializePayment = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((options) => {\n        var _a;\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { gatewayId: method.gateway, methodId: method.id, \n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n            integrations: [...((_a = options.integrations) !== null && _a !== void 0 ? _a : []), _bigcommerce_checkout_sdk_integrations_paypal_pro__WEBPACK_IMPORTED_MODULE_0__.createPayPalProPaymentStrategy] }));\n    }, [checkoutService, method]);\n    if (method.type === 'PAYMENT_TYPE_HOSTED') {\n        return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_payment_integration__WEBPACK_IMPORTED_MODULE_3__[\"default\"], { checkoutService: checkoutService, checkoutState: checkoutState, deinitializePayment: checkoutService.deinitializePayment, initializePayment: initializePayment, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm }));\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_credit_card_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { checkoutService: checkoutService, checkoutState: checkoutState, initializePayment: initializePayment, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(PayPalPaymentsProPaymentMethod, [{ id: 'paypal' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9wYXlwYWwtcGF5bWVudHMtcHJvLWludGVncmF0aW9uL3NyYy9QYXlQYWxQYXltZW50c1Byb1BheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDbUc7QUFDaEM7QUFFOEI7QUFDUDtBQUtuQztBQUV2RCxNQUFNLDhCQUE4QixHQUEwQyxDQUFDLEVBQzNFLE1BQU0sRUFDTixlQUFlLEVBQ2YsYUFBYSxFQUNiLFdBQVcsRUFDWCxRQUFRLEVBQ1IsZ0JBQWdCLEdBQ25CLEVBQUUsRUFBRTtJQUNELE1BQU0saUJBQWlCLEdBQXlDLGtEQUFXLENBQ3ZFLENBQUMsT0FBTyxFQUFFLEVBQUU7O1FBQ1IsT0FBTyxlQUFlLENBQUMsaUJBQWlCLGlDQUNqQyxPQUFPLEtBQ1YsU0FBUyxFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQ3pCLFFBQVEsRUFBRSxNQUFNLENBQUMsRUFBRTtZQUNuQixtRUFBbUU7WUFDbkUsWUFBWSxFQUFFLENBQUMsR0FBRyxDQUFDLGFBQU8sQ0FBQyxZQUFZLG1DQUFJLEVBQUUsQ0FBQyxFQUFFLDZHQUE4QixDQUFDLElBQ2pGLENBQUM7SUFDUCxDQUFDLEVBQ0QsQ0FBQyxlQUFlLEVBQUUsTUFBTSxDQUFDLENBQzVCLENBQUM7SUFFRixJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUsscUJBQXFCLEVBQUUsQ0FBQztRQUN4QyxPQUFPLENBQ0gsMkRBQUMsd0ZBQXNCLElBQ25CLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQ3BDLFFBQVEsRUFBRSxRQUFRLEVBQ2xCLE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLFdBQVcsRUFBRSxXQUFXLEdBQzFCLENBQ0wsQ0FBQztJQUNOLENBQUM7SUFFRCxPQUFPLENBQ0gsMkRBQUMsNEZBQXlCLElBQ3RCLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLGdCQUFnQixFQUFFLGdCQUFnQixFQUNsQyxXQUFXLEVBQUUsV0FBVyxHQUMxQixDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsOEJBQThCLEVBQzlCLENBQUMsRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FDckIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvcGF5cGFsLXBheW1lbnRzLXByby1pbnRlZ3JhdGlvbi9zcmMvUGF5UGFsUGF5bWVudHNQcm9QYXltZW50TWV0aG9kLnRzeD8xZjJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgQ2hlY2tvdXRTZXJ2aWNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVQYXlQYWxQcm9QYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9wYXlwYWwtcHJvJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgSG9zdGVkQ3JlZGl0Q2FyZENvbXBvbmVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHsgSG9zdGVkUGF5bWVudENvbXBvbmVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9ob3N0ZWQtcGF5bWVudC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIHR5cGUgUGF5bWVudE1ldGhvZFByb3BzLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmNvbnN0IFBheVBhbFBheW1lbnRzUHJvUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgbWV0aG9kLFxuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIHBheW1lbnRGb3JtLFxuICAgIGxhbmd1YWdlLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG59KSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZVBheW1lbnQ6IENoZWNrb3V0U2VydmljZVsnaW5pdGlhbGl6ZVBheW1lbnQnXSA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrb3V0U2VydmljZS5pbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQ6IG1ldGhvZC5nYXRld2F5LFxuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBtZXRob2QuaWQsXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogWy4uLihvcHRpb25zLmludGVncmF0aW9ucyA/PyBbXSksIGNyZWF0ZVBheVBhbFByb1BheW1lbnRTdHJhdGVneV0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZSwgbWV0aG9kXSxcbiAgICApO1xuXG4gICAgaWYgKG1ldGhvZC50eXBlID09PSAnUEFZTUVOVF9UWVBFX0hPU1RFRCcpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxIb3N0ZWRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZT17Y2hlY2tvdXRTdGF0ZX1cbiAgICAgICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2U9e2xhbmd1YWdlfVxuICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3I9e29uVW5oYW5kbGVkRXJyb3J9XG4gICAgICAgICAgICAgICAgcGF5bWVudEZvcm09e3BheW1lbnRGb3JtfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8SG9zdGVkQ3JlZGl0Q2FyZENvbXBvbmVudFxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlPXtjaGVja291dFNlcnZpY2V9XG4gICAgICAgICAgICBjaGVja291dFN0YXRlPXtjaGVja291dFN0YXRlfVxuICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgbGFuZ3VhZ2U9e2xhbmd1YWdlfVxuICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgcGF5bWVudEZvcm09e3BheW1lbnRGb3JtfVxuICAgICAgICAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBQYXlQYWxQYXltZW50c1Byb1BheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICdwYXlwYWwnIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/paypal-payments-pro-integration/src/PayPalPaymentsProPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/paypal-payments-pro-integration/src/index.ts":
/*!***************************************************************!*\
  !*** ./packages/paypal-payments-pro-integration/src/index.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PayPalPaymentsProPaymentMethod: () => (/* reexport safe */ _PayPalPaymentsProPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _PayPalPaymentsProPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PayPalPaymentsProPaymentMethod */ \"./packages/paypal-payments-pro-integration/src/PayPalPaymentsProPaymentMethod.tsx\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9wYXlwYWwtcGF5bWVudHMtcHJvLWludGVncmF0aW9uL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2RiIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvcGF5cGFsLXBheW1lbnRzLXByby1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHM/NGM1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIFBheVBhbFBheW1lbnRzUHJvUGF5bWVudE1ldGhvZCB9IGZyb20gJy4vUGF5UGFsUGF5bWVudHNQcm9QYXltZW50TWV0aG9kJztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/paypal-payments-pro-integration/src/index.ts\n\n}");

/***/ })

}]);