"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_paypal-commerce_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js":
/*!*******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalCommerceAlternativeMethodsButtonStrategy: () => (/* binding */ Ct),\n/* harmony export */   createPayPalCommerceAlternativeMethodsPaymentStrategy: () => (/* binding */ Ye),\n/* harmony export */   createPayPalCommerceButtonStrategy: () => (/* binding */ yt),\n/* harmony export */   createPayPalCommerceCreditButtonStrategy: () => (/* binding */ ft),\n/* harmony export */   createPayPalCommerceCreditCardsPaymentStrategy: () => (/* binding */ ot),\n/* harmony export */   createPayPalCommerceCreditCustomerStrategy: () => (/* binding */ $),\n/* harmony export */   createPayPalCommerceCreditPaymentStrategy: () => (/* binding */ xe),\n/* harmony export */   createPayPalCommerceCustomerStrategy: () => (/* binding */ V),\n/* harmony export */   createPayPalCommerceFastlaneCustomerStrategy: () => (/* binding */ me),\n/* harmony export */   createPayPalCommerceFastlanePaymentStrategy: () => (/* binding */ pt),\n/* harmony export */   createPayPalCommercePaymentStrategy: () => (/* binding */ Fe),\n/* harmony export */   createPayPalCommerceRatePayPaymentStrategy: () => (/* binding */ st),\n/* harmony export */   createPayPalCommerceVenmoButtonStrategy: () => (/* binding */ wt),\n/* harmony export */   createPayPalCommerceVenmoCustomerStrategy: () => (/* binding */ H),\n/* harmony export */   createPayPalCommerceVenmoPaymentStrategy: () => (/* binding */ je)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function p(e,t){return Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class y extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class m extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const g={body:{},headers:{},status:0};class v extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:a}=e||g;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=a,this.errors=i||[]}}var f,S,I,w,b,P,C,O;!function(e){e.BuyNow=\"BUY_NOW\"}(f||(f={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(S||(S={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(I||(I={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(w||(w={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(b||(b={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(P||(P={})),function(e){e.OXXO=\"oxxo\",e.IDEAL=\"ideal\"}(C||(C={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(O||(O={}));var k=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class A{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalCommerceRequestSender=i,this.paypalCommerceScriptLoader=n}loadPayPalSdk(e,t,i,n){return k(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),a=t||o.getCartOrThrow().currency.code,r=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalCommerceScriptLoader.getPayPalSDK(r,a,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return k(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new m}})}createOrder(e,t){return k(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return k(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return k(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.paypalCommerceRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new v}})}getOrderStatus(e,t){return k(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalCommerceRequestSender.getOrderStatus(e,t);return i}catch(e){throw new v}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===f.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return k(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[a,...r]=o.split(\" \");return this.getAddress({firstName:a,lastName:r.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},r={color:t&&b[t]?t:void 0,height:this.getValidHeight(i),label:n&&w[n]?n:void 0,shape:o&&P[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(r,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const E=\"This API endpoint is for internal use only and may change in the future\";var T;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(T||(T={}));const z=T,F={\"X-Checkout-SDK-Version\":\"1.867.0\"};var B=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class M{constructor(e){this.requestSender=e}createOrder(e,t){return B(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return B(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.put(\"/api/storefront/initialization/paypalcommerce\",{headers:i,body:t})).body})}getOrderStatus(e=\"paypalcommerce\",t){return B(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var D=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class x{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return D(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return D(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:a}=e;if(!(null==a?void 0:a.clientId))throw new y(l.MissingPaymentMethod);const{intent:r,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:m,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=a,I=h||i,w=\"paypalcommercecreditcards\"===n,b=w?[\"card\"]:[],P=m?[\"credit\",\"paylater\"]:[],C=u?[\"venmo\"]:[],O=S?[\"googlepay\"]:[],k=i?[\"card-fields\"]:[],A=[...w?[]:[\"card\"],...m?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...v.filter(e=>!f.includes(e))],E=[...b,...P,...C,...f];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":E.length>0?E:void 0,\"disable-funding\":A.length>0?A:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...O,...k],currency:t,intent:r},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const N=i=>{const{getHost:o}=i.getState();return new A((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),i,new M((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:o()})),new x((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()))};class _ extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}var j=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class U{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return j(this,void 0,void 0,function*(){const{paypalcommerce:t,methodId:i}=e;if(!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(!t.container)throw new _('Unable to initialize payment because \"options.paypalcommerce.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new _('Unable to initialize payment because \"options.paypalcommerce.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return j(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return j(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){var i,n;const{container:o,onClick:a,onComplete:r}=t,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:l,paymentButtonStyles:c,isAppSwitchEnabled:p}=d.initializationData||{},{checkoutTopButtonStyles:u}=c||{},h=Object.assign(Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)}),a&&{onClick:()=>a()}),y=Object.assign(Object.assign({},!p&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,r)}),m=Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},u),{height:40}))},h),l&&y),g=s.Buttons(m);g.isEligible()?(null===(i=g.hasReturned)||void 0===i?void 0:i.call(g))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(n=g.resume)||void 0===n||n.call(g):g.render(`#${o}`):this.paypalCommerceIntegrationService.removeElement(o)}onHostedCheckoutApprove(e,t,i,n){return j(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return j(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return j(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const V=p(e=>new U(e,N(e)),[{id:\"paypalcommerce\"}]);var R=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class L{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return R(this,void 0,void 0,function*(){const{paypalcommercecredit:t,methodId:i}=e;if(!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(!t.container)throw new _('Unable to initialize payment because \"options.paypalcommercecredit.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new _('Unable to initialize payment because \"options.paypalcommercecredit.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return R(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return R(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:l}=r.initializationData||{},{checkoutTopButtonStyles:c}=d||{},p=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),u=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)}),h=[a.FUNDING.PAYLATER,a.FUNDING.CREDIT];let y=!1;h.forEach(e=>{if(!y){const t=Object.assign(Object.assign({fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:40}))},p),s&&u),n=a.Buttons(t);n.isEligible()&&(n.render(`#${i}`),y=!0)}}),y||this.paypalCommerceIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return R(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return R(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return R(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const $=p(e=>new L(e,N(e)),[{id:\"paypalcommercecredit\"}]);var q=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class G{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return q(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,methodId:i}=e;if(!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(!t.container)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return q(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return q(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=a.initializationData||{},{checkoutTopButtonStyles:s}=r||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:40})),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.paypalCommerceIntegrationService.removeElement(i)}}const H=p(e=>new G(e,N(e)),[{id:\"paypalcommercevenmo\"}]);var Y,W,K,X,J,Z,Q,ee,te,ie,ne,oe=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ae{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return oe(this,void 0,void 0,function*(){if(!this.window.paypal||n){const n=this.getPayPalSdkScriptConfigOrThrow(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypal)throw new h}return this.window.paypal})}getPayPalFastlaneSdk(e,t,i){return oe(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return oe(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return oe(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return oe(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return oe(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:a}=e;if(!a||!a.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:m,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=a,I=h||i,w=\"paypalcommercecreditcards\"===n||\"bigcommerce_payments_creditcards\"===n,b=w?[\"card\"]:[],P=m?[\"credit\",\"paylater\"]:[],C=u?[\"venmo\"]:[],O=S?[\"googlepay\"]:[],k=i?[\"card-fields\"]:[],A=[...w?[]:[\"card\"],...m?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...v.filter(e=>!f.includes(e))],E=[...b,...P,...C,...f];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":E.length>0?E:void 0,\"disable-funding\":A.length>0?A:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...O,...k],currency:t,intent:r},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":r,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:a},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":r,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:a},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:a,buyerCountry:r,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":a,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":r}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:a,isDeveloperModeApplicable:r,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},r&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":a}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function re(){return new ae((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.createScriptLoader)())}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(Y||(Y={}));class se{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:a,domain:r,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}a&&(n+=`; path=${a}`),r&&(n+=`; domain=${r}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){se.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(W||(W={})),function(e){e.Always=\"SCA_ALWAYS\"}(K||(K={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(X||(X={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(J||(J={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(Z||(Z={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Q||(Q={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(ee||(ee={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(te||(te={})),(ie||(ie={})).OXXO=\"oxxo\",function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(ne||(ne={}));var de=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class le{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return de(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return de(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return de(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};se.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){se.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return se.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:a,profileData:r}=t,s=null===(o=null===(n=null===(i=null==r?void 0:r.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==r?void 0:r.shippingAddress,l=null==r?void 0:r.name,c=null==r?void 0:r.card,p=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],y=this.filterAddresses([p,u]);return{authenticationState:a||te.UNRECOGNIZED,addresses:y,billingAddress:u,shippingAddress:p,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:a,lastDigits:r}=n.card,[s,d]=a.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:r,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:Y.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,a]=t.fullName.split(\" \"),r=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||a||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+r,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function ce(){return new le}function pe(e){return\"string\"!=typeof e}function ue(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,pe),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,pe),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,pe),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,pe),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,pe),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(a).length&&(n.input=a),Object.keys(r).length&&(n.toggle=r),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,a,r,s,d,l,c,p,u,h,y,m,g,v,f,S,I,w,b,P;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(w=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===w?void 0:w.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(P=null===(b=null==t?void 0:t.text)||void 0===b?void 0:b.caption)||void 0===P?void 0:P.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var he=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ye{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalSdkScriptLoader=t,this.paypalFastlaneUtils=i}initialize(e){var t;return he(this,void 0,void 0,function*(){const{methodId:i,paypalcommercefastlane:n}=e;if(!i)throw new _('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),a=e.getPaymentMethodOrThrow(i),r=!!(null===(t=a.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(a,o.currency.code,o.id);yield this.paypalFastlaneUtils.initializePayPalFastlane(s,r,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return he(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return he(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return he(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return he(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new _('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new _('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return he(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),a=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:r}=yield this.paypalFastlaneUtils.lookupCustomerOrThrow(a),s=yield this.paypalFastlaneUtils.triggerAuthenticationFlowOrThrow(r),d=s.authenticationState===te.CANCELED;yield this.updateCustomerDataState(e,s),d?this.paypalFastlaneUtils.removeStorageSessionId():this.paypalFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return he(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:a,billingAddress:r,shippingAddress:s,instruments:d}=this.paypalFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:a,instruments:d}),r&&(yield this.paymentIntegrationService.updateBillingAddress(r)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},a=t.getConsignments()||[],r=(null===(i=a[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=r[0],l=r.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return ue(o?n:{},null==t?void 0:t.styles)}}const me=p(e=>new ye(e,re(),ce()),[{id:\"paypalcommerceacceleratedcheckout\"},{id:\"paypalcommercecreditcards\"}]);var ge=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ve{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return ge(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return ge(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return ge(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return ge(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return ge(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":r,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:a},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":r,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:a},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:a,buyerCountry:r,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":a,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":r}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:a,isDeveloperModeApplicable:r,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},r&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":a}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const fe={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},Se=\"embedded-checkout-loading-indicator-rotation\";class Ie{constructor(e){this.styles=Object.assign(Object.assign({},fe),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${Se} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(Se))return;const t=document.createElement(\"style\");t.id=Se,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${Se} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const we={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class be extends _{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class Pe extends v{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Ce extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Oe(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function ke(e){return Boolean(e.instrumentId)}const Ae=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};function Ee(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var Te=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ze{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n}initialize(e){var t;return Te(this,void 0,void 0,function*(){const{methodId:i,paypalcommerce:n}=e||{};if(this.paypalcommerce=n,!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new _('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),a=o.getPaymentMethodOrThrow(i),{container:r,bannerContainerId:s}=n,{orderId:d,paypalBNPLConfiguration:l=[],isPayPalCreditAvailable:c}=a.initializationData||{};if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==l?void 0:l.find(({id:e})=>\"checkout\"===e);if(c||!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(a,o.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,s,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}d?this.orderId=null===(t=a.initializationData)||void 0===t?void 0:t.orderId:(this.loadingIndicatorContainer=null==r?void 0:r.split(\"#\")[1],yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),n.onInit&&\"function\"==typeof n.onInit&&n.onInit(()=>this.renderButton(i,n)),(void 0===n.shouldRenderPayPalButtonOnInitialization||n.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(i,n))})}execute(e,t){var i,n;return Te(this,void 0,void 0,function*(){const{payment:o}=e,a=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:r}=this.paypalcommerce||{};if(!o)throw new be([\"payment\"]);const{methodId:s,paymentData:d}=o;if(this.isPayPalVaultedInstrumentPaymentData(d)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new Pe;const l=this.isPayPalVaultedInstrumentPaymentData(d)?this.prepareVaultedInstrumentPaymentPayload(s,this.orderId,d):this.preparePaymentPayload(s,this.orderId,d);try{yield this.paymentIntegrationService.submitOrder(a,t),yield this.paymentIntegrationService.submitPayment(l)}catch(e){if(function(e){var t;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&\"offsite_redirect\"===(null===(t=e.body.additional_action_required)||void 0===t?void 0:t.type)}(e)){const t=null===(n=null===(i=e.body.additional_action_required)||void 0===i?void 0:i.data)||void 0===n?void 0:n.redirect_url;return new Promise(()=>window.location.replace(t))}return this.isProviderError(e)&&(yield this.paypalCommerceIntegrationService.loadPayPalSdk(o.methodId),yield new Promise((e,t)=>{var i;this.paypalcommerce&&(null===(i=this.paypalButton)||void 0===i||i.close(),this.renderButton(o.methodId,this.paypalcommerce),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),r)),t()})),this.handleError(e,r),Promise.reject()}})}finalize(){return Promise.reject(new Ce)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,a=!this.isTrustedVaultingFlow(i);return a?{methodId:e,paymentData:{shouldSaveInstrument:a,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Oe(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){var i,n,o,a;const r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:d}=s.initializationData||{},{checkoutPaymentButtonStyles:l}=d||{},{container:c,onError:p,onRenderButton:u,onValidate:h,submitForm:y}=t;if(!c)throw new _('Unable to initialize payment because \"container\" argument is not provided.');const m=Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{fundingSource:r.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(l),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,h),onApprove:e=>this.handleApprove(e,y),onError:e=>this.handleError(e,p),onCancel:()=>this.toggleLoadingIndicator(!1)});this.paypalButton=r.Buttons(m),this.paypalButton.isEligible()&&(u&&\"function\"==typeof u&&u(),(null===(n=(i=this.paypalButton).hasReturned)||void 0===n?void 0:n.call(i))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(a=(o=this.paypalButton).resume)||void 0===a||a.call(o):this.paypalButton.render(c))}handleClick(e,t){return Te(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return Te(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.paypalcommerce||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&ke(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>Ee(t)&&t.bigpayToken===e.instrumentId);return!(Ee(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&ke(e)&&Oe(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:Ae(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const Fe=p(e=>new ze(e,N(e),new ve((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()),new Ie({containerStyles:we})),[{id:\"paypalcommerce\"}]);class Be extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var Me=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class De{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.paypalCommerceSdk=n}initialize(e){return Me(this,void 0,void 0,function*(){const{methodId:t,paypalcommerce:i,paypalcommercecredit:n}=e||{},o=n||i;if(!t)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new _('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const a=this.paymentIntegrationService.getState(),r=a.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:s=[],orderId:d}=r.initializationData||{},{bannerContainerId:l,container:c}=o;if(void 0!==l){if(!document.getElementById(l))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=s&&s.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(r,a.getCartOrThrow().currency.code);return this.renderMessages(t,l,e)}d?this.orderId=d:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==c?void 0:c.split(\"#\")[1],this.renderButton(t,o))})}execute(e,t){return Me(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);if(!this.orderId)throw new Pe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Ce)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new _('Unable to initialize payment because \"container\" argument is not provided.');const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:a}=o||{},{container:r,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;p.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecreditcheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(t),this.paypalButton.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.paypalButton.isEligible()&&e===i.FUNDING.CREDIT)throw new Be(`PayPal ${e} is not available for your region. Please use PayPal Checkout instead.`);d&&\"function\"==typeof d&&d(),this.paypalButton.render(r),u=!0}})}handleClick(e,t){return Me(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;if(t&&\"function\"==typeof t)return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:Ae(i)};e.Messages(n).render(`#${t}`)}}const xe=p(e=>new De(e,N(e),new Ie({containerStyles:we}),new ve((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.createScriptLoader)())),[{id:\"paypalcommercecredit\"}]);var Ne=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class _e{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return Ne(this,void 0,void 0,function*(){const{methodId:n,paypalcommerce:o,paypalcommercevenmo:a}=e||{},r=a||o;if(!n)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=s.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=s.initializationData)||void 0===i?void 0:i.orderId:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=r.container.split(\"#\")[1],this.renderButton(n,r))})}execute(e,t){return Ne(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);if(!this.orderId)throw new Pe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Ce)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:a}=o||{},{container:r,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p={fundingSource:i.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(p),!this.paypalButton.isEligible())throw new Be(\"PayPal Venmo is not available for your region. Please use PayPal Checkout instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(r)}handleClick(e,t){return Ne(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const je=p(e=>new _e(e,N(e),new Ie({styles:{backgroundColor:\"black\"}})),[{id:\"paypalcommercevenmo\"}]);var Ue=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Ve{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalRequestSender=i,this.paypalSdkLoader=n}loadPayPalSdk(e,t,i,n){return Ue(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),a=t||o.getCartOrThrow().currency.code,r=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalSdkLoader.getPayPalSDK(r,a,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return Ue(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new m}})}createOrder(e,t){return Ue(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return Ue(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(e,t,i){return Ue(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),o=n.getCartOrThrow(),a=n.getConsignmentsOrThrow()[0];try{yield this.paypalRequestSender.updateOrder(e,Object.assign(Object.assign({availableShippingOptions:a.availableShippingOptions,cartId:o.id,selectedShippingOption:a.selectedShippingOption},t?{methodId:t}:{}),i?{orderId:i}:{}))}catch(e){throw new v}})}getOrderStatus(e,t){return Ue(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalRequestSender.getOrderStatus(e,t);return i}catch(e){throw new v}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===f.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return Ue(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{if(t.selectedShippingOption){const i=t.selectedShippingOption.id;return e.id===i}return!1}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[a,...r]=o.split(\" \");return this.getAddress({firstName:a,lastName:r.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e={}){const{color:t,height:i,label:n,shape:o}=e,r={color:t&&Q[t]?t:void 0,height:this.getValidHeight(i),label:n&&Z[n]?n:void 0,shape:o&&ee[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(r,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}var Re=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Le{constructor(e){this.requestSender=e}createOrder(e,t){return Re(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e,t){return Re(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.put(i,{headers:o,body:n})).body})}getOrderStatus(e,t){return Re(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":E,\"Content-Type\":z.Json},F);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}const $e=i=>{const{getHost:n}=i.getState();return new Ve((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),i,new Le((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:n()})),re())};class qe extends v{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var Ge=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class He{constructor(e,t,i,n,o=3e3,a=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalSdkScriptLoader=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=a,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isOrderApprovedProcessing=!1}initialize(e){return Ge(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerce:n,paypalcommercealternativemethods:o}=e,a=o||n;if(this.paypalcommercealternativemethods=o,!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!a)throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');const r=this.paymentIntegrationService.getState(),s=r.getPaymentMethodOrThrow(i,t),{orderId:d,shouldRenderFields:l}=s.initializationData||{},c=r.getStoreConfigOrThrow().checkoutSettings.features;this.isOrderApprovedProcessing=function(e,t,i=!0){var n;return null!==(n=e[\"PAYPAL-5431.order_approved_processing\"])&&void 0!==n?n:i}(c),d?this.orderId=d:(this.paypalApms=yield this.paypalSdkScriptLoader.getPayPalApmsSdk(s,r.getCartOrThrow().currency.code),this.loadingIndicatorContainer=a.container.split(\"#\")[1],this.renderButton(i,t,a),l&&this.renderFields(i,a))})}execute(e,t){return Ge(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);const{methodId:o,gatewayId:a}=i;if(!this.orderId)throw new Pe;this.isOrderApprovedProcessing||\"ideal\"!==o||(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,a)})),this.isNonInstantPaymentMethod(o)&&(o!==C.IDEAL||this.isOrderApprovedProcessing)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.paypalCommerceIntegrationService.submitPayment(o,this.orderId,a)})}finalize(){return Promise.reject(new Ce)}deinitialize(){var e;return this.orderId=void 0,this.isOrderApprovedProcessing||this.resetPollingMechanism(),null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return Ge(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(null!=n?n:\"paypalcommerce\"),a=o===O.Approved,r=o===O.PollingError;if(a)return this.deinitializePollingMechanism(),t();if(r)return i();if(!a&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommercealternativemethods:this.paypalcommercealternativemethods}),this.handleError(new qe)}catch(e){i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return Ge(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.paypalcommercealternativemethods||{};this.isOrderApprovedProcessing||this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:a}=o.initializationData||{},{container:r,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deinitializePollingMechanism()},onError:e=>{this.deinitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>Ge(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.paypalButton=n.Buttons(c),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(r))}onCreateOrder(e,t,i){var n;return Ge(this,void 0,void 0,function*(){const{onValidate:o}=i;yield o(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const a=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\");if(this.isNonInstantPaymentMethod(e)&&(e===C.IDEAL&&this.isOrderApprovedProcessing||e===C.OXXO)){const i={useStoreCredit:!1},o={params:{methodId:e,gatewayId:t}};if(yield this.paymentIntegrationService.submitOrder(i,o),e===C.IDEAL){const t=this.paymentIntegrationService.getState(),i=null===(n=t.getOrder())||void 0===n?void 0:n.orderId;yield this.paypalCommerceIntegrationService.updateOrder(\"paypalcommercealternativemethods\",e,i)}yield this.paypalCommerceIntegrationService.submitPayment(e,a,t)}return a})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:a,email:r}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${a}`},email:{value:r}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in C}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const Ye=p(e=>new He(e,$e(e),re(),new Ie({containerStyles:we})),[{gateway:\"paypalcommercealternativemethods\"}]);var We;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(We||(We={}));const Ke=We;function Xe(e){return Ke.CardNumber in e&&Ke.CardName in e&&Ke.CardExpiry in e}function Je(e){return Ke.CardNumberVerification in e&&Ke.CardCodeVerification in e&&Ke.CardExpiryVerification in e}class Ze extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var Qe;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(Qe||(Qe={}));class et extends u{constructor(e){super(function(e){switch(e){case Qe.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case Qe.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case Qe.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case Qe.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class tt extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var it=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class nt{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalIntegrationService=t,this.paypalSdkScriptLoader=i,this.paypalFastlaneUtils=n}initialize(e){return it(this,void 0,void 0,function*(){const{methodId:t,paypalcommercecreditcards:i,paypalcommerce:n}=e,o=i||n,{form:a,onCreditCardFieldsRenderingError:r,onLoadComplete:s}=o||{};if(!t)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!a)throw new _('Unable to proceed because \"options.paypalcommercecreditcards.form\" argument is not provided.');this.hostedFormOptions=a,this.isCreditCardForm=Xe(a.fields),this.isCreditCardVaultedForm=Je(a.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.paypalIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(a,r)),null==s||s(),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return it(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:a}=i||{};if(!i||!o)throw new be([\"payment\"]);if(this.executionPaymentData=a,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const r=this.preparePaymentPayload(o,a,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(r)})}finalize(){return Promise.reject(new Ce)}deinitialize(){var e,t,i,n;return it(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:r=!1}=Oe(t)?t:{},s=t&&ke(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:r,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return it(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.paypalIntegrationService.getPayPalSdkOrThrow(),a=this.getExecuteCallback(i),r=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===S.No||i===S.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new Ze},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},a);if(this.cardFields=yield o.CardFields(r),!this.cardFields.isEligible())throw new et(Qe.PaymentNotInitialized);try{this.stylizeInputContainers(i),Xe(i)&&(yield this.renderFields(i)),Je(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return Je(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>it(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>it(this,void 0,void 0,function*(){const{orderId:e}=(yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return it(this,void 0,void 0,function*(){const a=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=a.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=a.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=a.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=a.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return it(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Oe(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(ke(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return it(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new Ze(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return it(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new tt(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case Ke.CardCode:case Ke.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case Ke.CardNumber:case Ke.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case Ke.CardExpiry:case Ke.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return Ke.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?Ke.CardNumber:Ke.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?Ke.CardExpiry:Ke.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?Ke.CardCode:Ke.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new et(Qe.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},a=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:a,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":a,\":focus\":a}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),a=n.getPaymentProviderCustomer(),r=(s=a)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?a:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isPayPalCommerceAnalyticsV2Enabled)&&!(null==r?void 0:r.authenticationState)}initializePayPalFastlaneOrThrow(e){return it(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const a=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.paypalFastlaneUtils.initializePayPalFastlane(a,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const ot=p(e=>new nt(e,$e(e),re(),ce()),[{id:\"paypalcommercecreditcards\"}]);var at=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class rt{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return at(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerceratepay:n}=e;if(!i)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new _('Unable to initialize payment because \"options.paypalcommerceratepay\" argument is not provided.');const{legalTextContainer:o,container:a,loadingContainerId:r}=n;if(!a)throw new _('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new _('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!r)throw new _('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=r;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new _(\"Unable to initialize payment because merchantId argument is not provided.\");this.paypalcommerceratepay=n,yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,a)})}execute(e,t){return at(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.paypalcommerceratepay||{};if(!i)throw new be([\"payment\"]);if(!o||\"function\"!=typeof o)throw new _('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\",{metadataId:this.guid}),{ratepayBirthDate:a,ratepayPhoneNumber:r,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(a),phone:{national_number:r,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new Ce)}deinitialize(){const{legalTextContainer:e}=this.paypalcommerceratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),a=null==o?void 0:o.parentNode,r=document.createElement(\"div\");r.style.marginBottom=\"20px\",r.setAttribute(\"id\",i),null==a||a.prepend(r);const s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new _('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.paypalcommerceratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,a=document.createElement(\"script\");a.setAttribute(\"type\",\"application/json\"),a.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),a.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const r={f:this.guid,s:`${e}_checkout-page`,sandbox:o};a.innerHTML=JSON.stringify(r),document.body.appendChild(a)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return at(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return at(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(\"paypalcommercealternativemethods\",{params:{useMetadata:!0}}),a=o===O.PollingStop,r=o===O.PollingError;if(a)return this.deinitializePollingMechanism(),t();if(r)return i();if(!a&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommerceratepay:this.paypalcommerceratepay}),this.handleError(new qe)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const st=p(e=>new rt(e,N(e),new Ie({containerStyles:Object.assign(Object.assign({},we),{position:\"fixed\"})})),[{gateway:\"paypalcommercealternativemethods\",id:\"ratepay\"}]);function dt(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceRequestSender=t,this.paypalSdkScriptLoader=i,this.paypalFastlaneUtils=n}initialize(e){var t,i;return lt(this,void 0,void 0,function*(){const{methodId:n,paypalcommercefastlane:o}=e;if(this.methodId=n,this.paypalcommercefastlane=o,!n)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new _('Unable to initialize payment because \"options.paypalcommercefastlane\" argument is not provided.');if(!o.onInit||\"function\"!=typeof o.onInit)throw new _('Unable to initialize payment because \"options.paypalcommercefastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new _('Unable to initialize payment because \"options.paypalcommercefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const a=this.paymentIntegrationService.getState(),r=a.getCartOrThrow(),s=a.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(s,r.currency.code,r.id);const c=ue(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.paypalFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return lt(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);const{paymentData:o,methodId:a}=i,r=o&&ke(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=r?yield this.prepareVaultedInstrumentPaymentPayload(a,o):yield this.preparePaymentPayload(a,o);yield this.paymentIntegrationService.submitPayment(e),this.paypalFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"body\"in e.response&&\"name\"in e.response.body}(e)&&\"INVALID_REQUEST\"===e.response.body.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new Ce)}deinitialize(){return lt(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=dt(n)?n:{},a=this.paypalFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===te.CANCELED||(null==o?void 0:o.authenticationState)||a!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return lt(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),a=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:r}=yield this.paypalFastlaneUtils.lookupCustomerOrThrow(a),s=yield this.paypalFastlaneUtils.triggerAuthenticationFlowOrThrow(r),{authenticationState:d,addresses:l,instruments:c}=this.paypalFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===te.CANCELED?this.paypalFastlaneUtils.removeStorageSessionId():this.paypalFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return lt(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.paypalFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new _('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return lt(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).config.is3dsEnabled?yield this.get3DSNonce(i):i;return yield this.createOrder(n),{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:n}}}}})}preparePaymentPayload(e,t){return lt(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),a=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:r}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield r({name:{fullName:a},billingAddress:this.paypalFastlaneUtils.mapBcToPayPalAddress(n)}),d=o.config.is3dsEnabled?yield this.get3DSNonce(s):s;yield this.createOrder(d);const{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:c=!1}=Oe(t)?t:{};return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:c,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:d}}})}})}createOrder(e){return lt(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.paypalCommerceRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return lt(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),a=i.getStoreConfigOrThrow().links.checkoutLink,r=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!r)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:this.threeDSVerificationMethod===K.Always,transactionContext:{experience_context:{locale:\"en-US\",return_url:a,cancel_url:a}}},d=yield r.isEligible(s);if(this.threeDSVerificationMethod===K.Always&&!d)throw new Pe;if(d){const{liabilityShift:e,authenticationState:t,nonce:i}=yield r.show();if(e===S.No||e===S.Unknown||t===X.Errored||t===X.Cancelled)throw new Pe;if(t===X.Succeeded&&[S.Yes,S.Possible].includes(e))return i}return e})}handlePayPalStoredInstrumentChange(e){return lt(this,void 0,void 0,function*(){const t=this.paypalFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=dt(t)?t:{},o=this.paypalFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}handleError(e){var t;(null===(t=this.paypalcommercefastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.paypalcommercefastlane.onError&&this.paypalcommercefastlane.onError(e)}}const pt=p(e=>{const{getHost:i}=e.getState();return new ct(e,new M((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:i()})),re(),ce())},[{id:\"paypalcommerceacceleratedcheckout\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){var t;return ut(this,void 0,void 0,function*(){const{paypalcommerce:i,containerId:n,methodId:o}=e,a=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new _('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new _('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(a&&!i.currencyCode)throw new _('Unable to initialize payment because \"options.paypalcommerce.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new _('Unable to initialize payment because \"options.paypalcommerce.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const r=a?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,r,!1),this.renderButton(n,o,i,a)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i,n){var o,a;const{buyNowInitializeOptions:r,style:s,onComplete:d,onEligibilityFailure:l}=i,c=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),p=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:u,isAppSwitchEnabled:h}=p.initializationData||{},y=Object.assign(Object.assign({},!n&&this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)}),m={onClick:()=>this.handleClick(r),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},g=Object.assign(Object.assign({},!h&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,d)}),v=Object.assign(Object.assign(Object.assign({fundingSource:c.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(s)},y),r&&m),u&&g),f=c.Buttons(v);f.isEligible()?(null===(o=f.hasReturned)||void 0===o?void 0:o.call(f))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(a=f.resume)||void 0===a||a.call(f):f.render(`#${e}`):l&&\"function\"==typeof l?l():this.paypalCommerceIntegrationService.removeElement(e)}handleClick(e){return ut(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return ut(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return ut(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return ut(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const yt=p(e=>new ht(e,N(e)),[{id:\"paypalcommerce\"}]),mt=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};var gt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class vt{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalIntegrationService=t,this.paypalCommerceSdk=i}initialize(e){var t;return gt(this,void 0,void 0,function*(){const{paypalcommercecredit:i,containerId:n,methodId:o}=e,{buyNowInitializeOptions:a,currencyCode:r,messagingContainerId:s}=i||{},d=!!a;if(!o)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new _('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new _('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(d&&!r)throw new _('Unable to initialize payment because \"options.paypalcommercecredit.currencyCode\" argument is not provided.');if(d&&\"function\"!=typeof(null==a?void 0:a.getBuyNowCartRequestBody))throw new _('Unable to initialize payment because \"options.paypalcommercecredit.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');d||(yield this.paymentIntegrationService.loadDefaultCheckout());const l=this.paymentIntegrationService.getState(),c=d?r:l.getCartOrThrow().currency.code;yield this.paypalIntegrationService.loadPayPalSdk(o,c,!1),this.renderButton(n,o,i);const p=l.getStoreConfigOrThrow().checkoutSettings.features;if(null!==(t=p[\"PAYPAL-5557.Hide_ppc_banner_implementation\"])&&void 0!==t&&t)return;const u=s&&document.getElementById(s);if(c&&u){const e=l.getPaymentMethodOrThrow(o),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;u.removeAttribute(\"data-pp-style-logo-type\"),u.removeAttribute(\"data-pp-style-logo-position\"),u.removeAttribute(\"data-pp-style-text-color\"),u.removeAttribute(\"data-pp-style-text-size\");const n=yield this.paypalCommerceSdk.getPayPalMessages(e,c);this.renderMessages(n,s,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:a,onEligibilityFailure:r}=i,s=this.paypalIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l,isAppSwitchEnabled:c}=d.initializationData||{},p={createOrder:()=>this.paypalIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:e})=>this.paypalIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,a)}),y=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let m=!1;y.forEach(t=>{if(!m){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.paypalIntegrationService.getValidButtonStyle(o)},p),n&&u),l&&h),a=s.Buttons(i);a.isEligible()?(a.render(`#${e}`),m=!0):r&&\"function\"==typeof r&&r()}}),m||this.paypalIntegrationService.removeElement(e)}handleClick(e){return gt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return gt(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return gt(this,void 0,void 0,function*(){const t=this.paypalIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return gt(this,void 0,void 0,function*(){const t=this.paypalIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:mt(i)};e.Messages(n).render(`#${t}`)}}const ft=p(e=>new vt(e,$e(e),re()),[{id:\"paypalcommercecredit\"}]);var St=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class It{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return St(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:a}=t||{},r=!!o;if(!n)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new _('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(r&&!a)throw new _('Unable to initialize payment because \"options.paypalcommercevenmo.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new _('Unable to initialize payment because \"options.paypalcommercevenmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=r?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:a}=i,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=r.FUNDING.VENMO,d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),p=r.Buttons(c);p.isEligible()?p.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.paypalCommerceIntegrationService.getValidButtonStyle(e);return t.color===b.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return St(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const wt=p(e=>new It(e,N(e)),[{id:\"paypalcommercevenmo\"}]);var bt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Pt{constructor(e,t){this.paymentIntegrationService=e,this.paypalIntegrationService=t}initialize(e){return bt(this,void 0,void 0,function*(){const{paypalcommercealternativemethods:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:a,currencyCode:r}=t||{},s=!!a;if(!n)throw new _('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new _('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');if(!o)throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods.apm\" argument is not provided.');if(s&&!r)throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==a?void 0:a.getBuyNowCartRequestBody))throw new _('Unable to initialize payment because \"options.paypalcommercealternativemethods.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:a,onEligibilityFailure:r}=i,s=this.paypalIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new _('Unable to initialize PayPal button because \"options.paypalcommercealternativemethods.apm\" argument is not valid funding source.');const d={createOrder:()=>this.paypalIntegrationService.createOrder(\"paypalcommercealternativemethod\"),onApprove:({orderID:e})=>this.paypalIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.paypalIntegrationService.getValidButtonStyle(a)},d),o&&l),p=s.Buttons(c);p.isEligible()?p.render(`#${e}`):r&&\"function\"==typeof r?r():this.paypalIntegrationService.removeElement(e)}handleClick(e){return bt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const Ct=p(e=>new Pt(e,$e(e)),[{id:\"paypalcommercealternativemethods\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtY29tbWVyY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFRERSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBRUEsT0FBT0MsT0FBT0MsT0FBT0gsRUFBUSxDQUFFQyxjQUNuQyxDQ05BSCxFQUFvQk0sRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTmJKLFNBQVkxQixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9E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Q0FFYyxXQUFBdkosQ0FDVjlnQixHLHlDQUVBLEdBQUlBLEVBQXlCLENBQ3pCLE1BQU13MEIsUUFBbUJuNEIsS0FBSzBxQix5QkFBeUJobkIsd0JBQ25EQyxTQUdFM0QsS0FBS3VDLDBCQUEwQjYxQixhQUFhRCxFQUFXL3pCLEcsQ0FFckUsRSxFQ3BKSixNQVFBLEdBQWU5RixFQU5WaUUsR0FDRCxJQUFJdTJCLEdBQ0F2MkIsRUFDQSxHQUErQkEsSUFHaUQsQ0FDcEYsQ0FBRTZCLEdBQUksc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvYnV5LW5vdy1jYXJ0LWNyZWF0aW9uLWVycm9yLnRzP2Q2MDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2FydC9jYXJ0LXNvdXJjZS50cz8zODhhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS10eXBlcy50cz8zNTYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzYzNWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyLnRzP2Q3YTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXNjcmlwdC1sb2FkZXIudHM/NjRlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UudHM/M2Y5OCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz80ZTUzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2hlY2tvdXQtYnV0dG9ucy9kZWZhdWx0LWNoZWNrb3V0LWJ1dHRvbi1oZWlnaHQudHM/ZDQyNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz8zMDgwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneS50cz80ZDYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3kudHM/MzVhZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2NkYmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/NmFkOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaW5zdHJ1bWVudC50cz9mMmI2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC10eXBlcy50cz8xMzdmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC1zZGstc2NyaXB0LWxvYWRlci50cz9lMTU3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtc2RrLXNjcmlwdC1sb2FkZXIudHM/ZmNiZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RvcmFnZS9zcmMvY29va2llLXN0b3JhZ2UudHM/MTUzYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy9wYXlwYWwtZmFzdGxhbmUtdXRpbHMudHM/MjI5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy9jcmVhdGUtcGF5cGFsLWZhc3RsYW5lLXV0aWxzLnRzPzdhOGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvdXRpbHMvZ2V0LWZhc3RsYW5lLXN0eWxlcy50cz9kMGQ3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/OTk2ZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneS50cz8yZmE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3BheXBhbC1jb21tZXJjZS1zZGsudHM/ZmNlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdWkvc3JjL2xvYWRpbmctaW5kaWNhdG9yL2xvYWRpbmctaW5kaWNhdG9yLnRzP2IwODciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cy50cz83ZDQ5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWludmFsaWQtZXJyb3IudHM/M2FkZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pcy1yZXF1ZXN0LWVycm9yLnRzP2I0M2QiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvZ2V0LXBheXBhbC1tZXNzYWdlcy1zdHlsZXMtZnJvbS1ibnBsLWNvbmZpZy50cz8wNTA4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1iYXNlLWluc3RydW1lbnQvaXMtYmFzZS1pbnN0cnVtZW50LnRzP2U5MmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1wYXltZW50LXN0cmF0ZWd5LnRzPzFmMmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcmVkaXJlY3QtYWN0aW9uLWVycm9yLnRzPzU1MjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWNvbW1lcmNlLXByb3ZpZGVyLWVycm9yLnRzP2M3NGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneS50cz8yNzZiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbXBsZW1lbnRlZC1lcnJvci50cz8zYTM1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1wYXltZW50LXN0cmF0ZWd5LnRzPzdhZjQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1wYXltZW50LXN0cmF0ZWd5LnRzPzg5NmEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1zZGsudHM/MWQ1NiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3kudHM/ODhmZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vY3JlYXRlLXBheXBhbC1jb21tZXJjZS12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzPzc4OTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvcGF5cGFsLWludGVncmF0aW9uLXNlcnZpY2UudHM/NjJlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy9wYXlwYWwtcmVxdWVzdC1zZW5kZXIudHM/N2Y5NSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy9jcmVhdGUtcGF5cGFsLWludGVncmF0aW9uLXNlcnZpY2UudHM/Yzc2MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy90aW1lb3V0LWVycm9yLnRzPzA4MGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz9kNzM3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1leHBlcmltZW50LWVuYWJsZWQvaXMtZXhwZXJpbWVudC1lbmFibGVkLnRzP2M5YTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3kudHM/ZWFkOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2hvc3RlZC1maWVsZC10eXBlLnRzPzY1ZDgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9pcy1jcmVkaXQtY2FyZC1mb3JtLWZpZWxkcy50cz8wZmFhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaXMtY3JlZGl0LWNhcmQtdmF1bHRlZC1mb3JtLWZpZWxkcy50cz9mM2IzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtaW52YWxpZC1mb3JtLWVycm9yLnRzP2MwZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneS50cz8xMGU2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXBheXBhbC1jb21tZXJjZS1hY2NlbGVyYXRlZC1jaGVja291dC1jdXN0b21lci50cz83M2YzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5LnRzPzY3ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXkvcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneS50cz8yMjAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5L2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5LnRzPzcwNGUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLWN1c3RvbWVyLnRzPzU5OTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzP2QxNWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLXJlcXVlc3QtZXJyb3IudHM/YmU4YiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzPzQwMGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1idXR0b24tc3RyYXRlZ3kudHM/NGM5ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1idXR0b24tc3RyYXRlZ3kudHM/YWY1ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy91dGlscy9nZXQtcGF5cGFsLW1lc3NhZ2VzLXN0eWxlcy1mcm9tLWJucGwtY29uZmlnLnRzP2Y2ZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWJ1dHRvbi1zdHJhdGVneS50cz8xOGNlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5LnRzPzZlZTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/ZmUyMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vY3JlYXRlLXBheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3kudHM/MTMxMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3kudHM/NWYyNyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5LnRzP2YyZjIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gQ2FydFNvdXJjZSB7XG4gICAgQnV5Tm93ID0gJ0JVWV9OT1cnLFxufVxuIiwiaW1wb3J0IHtcbiAgICBCdXlOb3dDYXJ0UmVxdWVzdEJvZHksXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBTaGlwcGluZ09wdGlvbixcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nW107XG5leHBvcnQgdHlwZSBFbmFibGVGdW5kaW5nVHlwZSA9IEZ1bmRpbmdUeXBlIHwgc3RyaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlU0RLRnVuZGluZyB7XG4gICAgQ0FSRDogc3RyaW5nO1xuICAgIFBBWVBBTDogc3RyaW5nO1xuICAgIENSRURJVDogc3RyaW5nO1xuICAgIFBBWUxBVEVSOiBzdHJpbmc7XG4gICAgT1hYTzogc3RyaW5nO1xuICAgIFNFUEE6IHN0cmluZztcbiAgICBWRU5NTzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgU0RLXG4gKlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uRm9jdXMoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkJsdXIoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgfTtcbiAgICBjcmVhdGVWYXVsdFNldHVwVG9rZW4/OiAoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpID0+IHZvaWQ7XG4gICAgY3JlYXRlT3JkZXI/OiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gICAgc3R5bGU6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEpOiB2b2lkO1xuICAgIG9uRXJyb3IoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhIHtcbiAgICB2YXVsdFNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogTGlhYmlsaXR5U2hpZnRFbnVtO1xufVxuXG5leHBvcnQgZW51bSBMaWFiaWxpdHlTaGlmdEVudW0ge1xuICAgIFBvc3NpYmxlID0gJ1BPU1NJQkxFJyxcbiAgICBObyA9ICdOTycsXG4gICAgVW5rbm93biA9ICdVTktOT1dOJyxcbiAgICBZZXMgPSAnWUVTJyxcbn1cblxuaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ2FyZCA9IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZDtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBpc0Zvcm1WYWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICAgIGZpZWxkczoge1xuICAgICAgICBjYXJkQ3Z2RmllbGQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE51bWJlckZpZWxkOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmRFeHBpcnlGaWVsZDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcyB7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgIENWVkZpZWxkKGNvbmZpZz86IFBheVBhbENvbW1lcmNlRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgRXhwaXJ5RmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOdW1iZXJGaWVsZChjb25maWc/OiBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHN1Ym1pdChjb25maWc/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdWJtaXRDb25maWcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGdldFN0YXRlKCk6IFByb21pc2U8UGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyB7XG4gICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgY29tcGFueT86IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICAgICAgYWRtaW5BcmVhMTogc3RyaW5nOyAvLyBTdGF0ZVxuICAgICAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNESyB7XG4gICAgQ2FyZEZpZWxkczogKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZykgPT4gUHJvbWlzZTxQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHM+O1xuICAgIEdvb2dsZXBheTogKCkgPT4ge1xuICAgICAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICAgICAgY29uZmlybU9yZGVyOiAoYXJnMDoge1xuICAgICAgICAgICAgb3JkZXJJZDogc3RyaW5nO1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG4gICAgICAgIH0pID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICAgICAgaW5pdGlhdGVQYXllckFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICB9O1xuICAgIEZVTkRJTkc6IFBheVBhbENvbW1lcmNlU0RLRnVuZGluZztcbiAgICBIb3N0ZWRGaWVsZHM6IHtcbiAgICAgICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgICAgICByZW5kZXIoZGF0YTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMob3B0aW9uczogUGF5UGFsQ29tbWVyY2VQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcztcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlTWVzc2FnZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU9yZGVyRGF0YSB7XG4gICAgdG9rZW5pemF0aW9uRGF0YToge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbmZvOiB7XG4gICAgICAgIGNhcmROZXR3b3JrOiBzdHJpbmc7XG4gICAgICAgIGNhcmREZXRhaWxzOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlUGF5Q29uZmlnIHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IEFsbG93ZWRQYXltZW50TWV0aG9kc1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBhcGlWZXJzaW9uTWlub3I6IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIGlzRWxpZ2libGU6IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJbmZvOiB7XG4gICAgICAgIG1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRPcmlnaW46IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsbG93ZWRQYXltZW50TWV0aG9kcyB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgICAgYWxsb3dlZENhcmROZXR3b3Jrczogc3RyaW5nW107XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGFzc3VyYW5jZURldGFpbHNSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHRva2VuaXphdGlvblNwZWNpZmljYXRpb246IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBnYXRld2F5OiBzdHJpbmc7XG4gICAgICAgICAgICBnYXRld2F5TWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbExlZ2FsID0gKHBhcmFtczogeyBmdW5kaW5nU291cmNlOiBzdHJpbmcgfSkgPT4ge1xuICAgIHJlbmRlcihjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIExlZ2FsRnVuZGluZyB7XG4gICAgRlVORElORzoge1xuICAgICAgICBQQVlfVVBPTl9JTlZPSUNFOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaXJ0aERhdGUge1xuICAgIGdldEZ1bGxZZWFyKCk6IG51bWJlcjtcbiAgICBnZXREYXRlKCk6IG51bWJlcjtcbiAgICBnZXRNb250aCgpOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZTtcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEVuYWJsZUZ1bmRpbmdUeXBlO1xuICAgICAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICAgICAgY29tbWl0PzogYm9vbGVhbjtcbiAgICAgICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBDb21wb25lbnRzU2NyaXB0VHlwZTtcbiAgICB9O1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXVzZXItaWQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbENvbW1lcmNlSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBDb21wb25lbnRzU2NyaXB0VHlwZSA9IEFycmF5PFxuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbD86IFBheVBhbFNESztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEluaXRpYWxpemF0aW9uIERhdGFcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU/OiBib29sZWFuO1xuICAgIGludGVudD86IFBheVBhbENvbW1lcmNlSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47XG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW1bXTtcbiAgICBpc0FwcFN3aXRjaEVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3RhdHVzOiBib29sZWFuO1xuICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1eU5vd1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk6IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keTtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zIHtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHBheW1lbnRzU0RLPzogYm9vbGVhbjtcbiAgICBzdHlsZXM/OiB7XG4gICAgICAgIGlucHV0PzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy5pbnZhbGlkJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgICAgICcudmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJzpmb2N1cyc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH07XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb24ge1xuICAgIHNlbGVjdG9yOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHMge1xuICAgIHN1Ym1pdChcbiAgICAgICAgb3B0aW9ucz86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZT47XG4gICAgZ2V0U3RhdGUoKTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zIHtcbiAgICBjb250aW5nZW5jaWVzPzogQXJyYXk8JzNEX1NFQ1VSRSc+O1xuICAgIGNhcmRob2xkZXJOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBudW1iZXI/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbk1vbnRoPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25ZZWFyPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBwb3N0YWxDb2RlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1dHRvbnNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VCdXR0b25zIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgY2xvc2UoKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgaGFzUmV0dXJuZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVzdW1lPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMge1xuICAgIGV4cGVyaWVuY2U/OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oZGF0YTogSW5pdENhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogSW5pdENhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD47XG4gICAgb25Db21wbGV0ZT8oZGF0YTogQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhkYXRhOiBDbGlja0NhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZDtcbiAgICBvbkVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xuICAgIG9uQ2FuY2VsPygpOiB2b2lkO1xuICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBQYXlQYWxTZWxlY3RlZFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNoaXBwaW5nQWRkcmVzczogUGF5UGFsQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGlja0NhbGxiYWNrUGF5bG9hZCB7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICByZWplY3QoKTogdm9pZDtcbiAgICByZXNvbHZlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrUGF5bG9hZCB7XG4gICAgY29ycmVsYXRpb25JRDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluaXRDYWxsYmFja0FjdGlvbnMge1xuICAgIGRpc2FibGUoKTogdm9pZDtcbiAgICBlbmFibGUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxBZGRyZXNzIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxBZGRyZXNzQ2FsbGJhY2tEYXRhIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb24ge1xuICAgIGFtb3VudDoge1xuICAgICAgICBjdXJyZW5jeV9jb2RlOiBzdHJpbmc7XG4gICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpZDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcHJvdmVDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySUQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyB7XG4gICAgb3JkZXI6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiBQcm9taXNlPFBheVBhbE9yZGVyRGV0YWlscz47XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckRldGFpbHMge1xuICAgIHBheWVyOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIGdpdmVuX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIHN1cm5hbWU6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWxfYWRkcmVzczogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIHBob25lPzoge1xuICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcHVyY2hhc2VfdW5pdHM6IEFycmF5PHtcbiAgICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICBmdWxsX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkZHJlc3NfbGluZV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8xPzogc3RyaW5nO1xuICAgIHBvc3RhbF9jb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkIHtcbiAgICBpbnRlbnQ6IHN0cmluZztcbiAgICBvcmRlcklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uTGFiZWwge1xuICAgIHBheXBhbCA9ICdwYXlwYWwnLFxuICAgIGNoZWNrb3V0ID0gJ2NoZWNrb3V0JyxcbiAgICBidXlub3cgPSAnYnV5bm93JyxcbiAgICBwYXkgPSAncGF5JyxcbiAgICBpbnN0YWxsbWVudCA9ICdpbnN0YWxsbWVudCcsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uQ29sb3Ige1xuICAgIGdvbGQgPSAnZ29sZCcsXG4gICAgYmx1ZSA9ICdibHVlJyxcbiAgICBzaWx2ZXIgPSAnc2lsdmVyJyxcbiAgICBibGFjayA9ICdibGFjaycsXG4gICAgd2hpdGUgPSAnd2hpdGUnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvblNoYXBlIHtcbiAgICBwaWxsID0gJ3BpbGwnLFxuICAgIHJlY3QgPSAncmVjdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IFN0eWxlQnV0dG9uQ29sb3I7XG4gICAgc2hhcGU/OiBTdHlsZUJ1dHRvblNoYXBlO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBsYWJlbD86IFN0eWxlQnV0dG9uTGFiZWw7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBQYXltZW50IGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbENvbW1lcmNlRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWxDb21tZXJjZSBNZXNzYWdlc1xuICovXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlPzogc3RyaW5nO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgbGF5b3V0Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBPdGhlclxuICpcbiAqL1xuZXhwb3J0IGVudW0gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMge1xuICAgIE9YWE8gPSAnb3h4bycsXG4gICAgSURFQUwgPSAnaWRlYWwnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGF0YSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgYXBwcm92ZVVybDogc3RyaW5nO1xuICAgIGZhc3RsYW5lVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSB7XG4gICAgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zPzogU2hpcHBpbmdPcHRpb25bXTtcbiAgICBjYXJ0SWQ6IHN0cmluZztcbiAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uPzogU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZSB7XG4gICAgc3RhdHVzQ29kZTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHkgZXh0ZW5kcyBIb3N0ZWRJbnN0cnVtZW50LCBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgbWV0YWRhdGFJZD86IHN0cmluZztcbiAgICBzZXR1cFRva2VuPzogYm9vbGVhbjtcbiAgICBmYXN0bGFuZVRva2VuPzogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBQYXlQYWxPcmRlclN0YXR1cyB7XG4gICAgQXBwcm92ZWQgPSAnQVBQUk9WRUQnLFxuICAgIENyZWF0ZWQgPSAnQ1JFQVRFRCcsXG4gICAgUGF5ZXJBY3Rpb25SZXF1aXJlZCA9ICdQQVlFUl9BQ1RJT05fUkVRVUlSRUQnLFxuICAgIFBvbGxpbmdTdG9wID0gJ1BPTExJTkdfU1RPUCcsXG4gICAgUG9sbGluZ0Vycm9yID0gJ1BPTExJTkdfRVJST1InLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyU3RhdHVzRGF0YSB7XG4gICAgc3RhdHVzOiBQYXlQYWxPcmRlclN0YXR1cztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG59XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHksXG4gICAgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IsXG4gICAgQ2FydCxcbiAgICBDYXJ0U291cmNlLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBSZXF1ZXN0RXJyb3IsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU2hpcHBpbmdPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyIGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlciBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7XG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxuICAgIFBheVBhbFNESyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxuICAgIFN0eWxlQnV0dG9uTGFiZWwsXG4gICAgU3R5bGVCdXR0b25TaGFwZSxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBwYXlwYWxTZGs/OiBQYXlQYWxTREs7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBmb3JtUG9zdGVyOiBGb3JtUG9zdGVyLFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyOiBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTY3JpcHRMb2FkZXI6IFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsU0RLIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRQYXlQYWxTZGsoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHByb3ZpZGVkQ3VycmVuY3lDb2RlPzogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBwcm92aWRlZEN1cnJlbmN5Q29kZSB8fCBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLnBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIuZ2V0UGF5UGFsU0RLKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICBmb3JjZUxvYWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIGdldFBheVBhbFNka09yVGhyb3coKTogUGF5UGFsU0RLIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbFNkaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxTZGs7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXkgTm93IGNhcnQgY3JlYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPENhcnQ+IHtcbiAgICAgICAgY29uc3QgY2FydFJlcXVlc3RCb2R5ID0gYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk7XG5cbiAgICAgICAgaWYgKCFjYXJ0UmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoY2FydFJlcXVlc3RCb2R5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBPcmRlciBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHByb3ZpZGVySWQsIHtcbiAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8UGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNldHVwVG9rZW4gfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7IG9yZGVySWQsIC4uLihzZXR1cFRva2VuID8geyBzZXR1cFRva2VuIH0gOiB7fSkgfTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci51cGRhdGVPcmRlcih7XG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zOiBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsXG4gICAgICAgICAgICAgICAgY2FydElkOiBjYXJ0LmlkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhtZXRob2RJZD86IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1cz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBzdWJtaXR0aW5nIGFuZCB0b2tlbml6aW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHRva2VuaXplUGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghb3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAuLi4oY2FydC5zb3VyY2UgPT09IENhcnRTb3VyY2UuQnV5Tm93ICYmIHsgY2FydF9pZDogY2FydC5pZCB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3VibWl0UGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgLi4uKGdhdGV3YXlJZCA/IHsgZ2F0ZXdheUlkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2hpcHBpbmcgb3B0aW9ucyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkPzogc3RyaW5nKTogU2hpcHBpbmdPcHRpb24ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICBjb25zdCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG5cbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZFxuICAgICAgICAgICAgPyBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZClcbiAgICAgICAgICAgIDogYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24/LmlkLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uVG9TZWxlY3QgPVxuICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB8fCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcblxuICAgICAgICBpZiAoIXNoaXBwaW5nT3B0aW9uVG9TZWxlY3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdXIgb3JkZXIgY2FuJ3QgYmUgc2hpcHBlZCB0byB0aGlzIGFkZHJlc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2hpcHBpbmdPcHRpb25Ub1NlbGVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEFkZHJlc3MgdHJhbnNmb3JtaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldEFkZHJlc3MoYWRkcmVzcz86IFBhcnRpYWw8QmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keT4pOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYWRkcmVzcz8uZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGFkZHJlc3M/Lmxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgZW1haWw6IGFkZHJlc3M/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgcGhvbmU6IGFkZHJlc3M/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcz8uYWRkcmVzczIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3M/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2VDb2RlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoeyBwYXllciB9OiBQYXlQYWxPcmRlckRldGFpbHMpOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBheWVyLm5hbWUuZ2l2ZW5fbmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwYXllci5uYW1lLnN1cm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogcGF5ZXIuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBwYXllci5hZGRyZXNzLmFkZHJlc3NfbGluZV8xLFxuICAgICAgICAgICAgYWRkcmVzczI6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzIsXG4gICAgICAgICAgICBjaXR5OiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMixcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBwYXllci5hZGRyZXNzLmNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHBheWVyLmFkZHJlc3MucG9zdGFsX2NvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMSxcbiAgICAgICAgICAgIHBob25lOiBwYXllci5waG9uZT8ucGhvbmVfbnVtYmVyPy5uYXRpb25hbF9udW1iZXIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgIG9yZGVyRGV0YWlsczogUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgICk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICBjb25zdCB7IHBheWVyLCBwdXJjaGFzZV91bml0cyB9ID0gb3JkZXJEZXRhaWxzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgbmFtZTogeyBmdWxsX25hbWUgfSxcbiAgICAgICAgfSA9IHB1cmNoYXNlX3VuaXRzWzBdLnNoaXBwaW5nO1xuXG4gICAgICAgIGNvbnN0IFtmaXJzdE5hbWUsIC4uLmxhc3ROYW1lXSA9IGZ1bGxfbmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lLmpvaW4oJyAnKSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbnMgc3R5bGUgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyk6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IHsgY29sb3IsIGhlaWdodCwgbGFiZWwsIHNoYXBlIH0gPSBzdHlsZSB8fCB7fTtcblxuICAgICAgICBjb25zdCB2YWxpZFN0eWxlcyA9IHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvciAmJiBTdHlsZUJ1dHRvbkNvbG9yW2NvbG9yXSA/IGNvbG9yIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmdldFZhbGlkSGVpZ2h0KGhlaWdodCksXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgJiYgU3R5bGVCdXR0b25MYWJlbFtsYWJlbF0gPyBsYWJlbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNoYXBlOiBzaGFwZSAmJiBTdHlsZUJ1dHRvblNoYXBlW3NoYXBlXSA/IHNoYXBlIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvbWl0QnkodmFsaWRTdHlsZXMsIGlzTmlsKTtcbiAgICB9XG5cbiAgICBnZXRWYWxpZEhlaWdodChoZWlnaHQ/OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gNDA7XG4gICAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDI1O1xuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSA1NTtcblxuICAgICAgICBpZiAoIWhlaWdodCB8fCB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA8IG1pbkhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlscyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudElkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEZvciBub3cgdGhpcyBpcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiwgZnVydGhlciByZW1vdmVFbGVtZW50IG1ldGhvZCB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBJTlRFUk5BTF9VU0VfT05MWSA9XG4gICAgJ1RoaXMgQVBJIGVuZHBvaW50IGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlJztcbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzRGF0YSxcbiAgICBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2UsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcXVlc3RTZW5kZXI6IFJlcXVlc3RTZW5kZXIpIHt9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keTogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPFBheVBhbE9yZGVyRGF0YT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHtwcm92aWRlcklkfWA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wb3N0PFBheVBhbE9yZGVyRGF0YT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKFxuICAgICAgICByZXF1ZXN0Qm9keTogUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICApOiBQcm9taXNlPFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi9wYXlwYWxjb21tZXJjZWA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wdXQ8UGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKFxuICAgICAgICBtZXRob2RJZCA9ICdwYXlwYWxjb21tZXJjZScsXG4gICAgICAgIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbE9yZGVyU3RhdHVzRGF0YT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uLyR7bWV0aG9kSWR9YDtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5nZXQ8UGF5UGFsT3JkZXJTdGF0dXNEYXRhPih1cmwsIHtcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgQ29tcG9uZW50c1NjcmlwdFR5cGUsXG4gICAgRnVuZGluZ1R5cGUsXG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93LFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zLFxuICAgIFBheVBhbFNESyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlciB7XG4gICAgcHJpdmF0ZSB3aW5kb3c6IFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsU0RLKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRQYXlQYWxTREsocGF5cGFsU2RrU2NyaXB0Q29uZmlnLCBmb3JjZUxvYWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheVBhbFNESyhcbiAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnOiBQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtcyxcbiAgICAgICAgZm9yY2VMb2FkID0gZmFsc2UsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxTREs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWwgfHwgZm9yY2VMb2FkKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXNbJ29wdGlvbnMnXT4oXG4gICAgICAgICAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnLm9wdGlvbnMsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zWydhdHRyaWJ1dGVzJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrVXJsID0gJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzJztcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoc2NyaXB0U3JjLCB7IGFzeW5jOiB0cnVlLCBhdHRyaWJ1dGVzIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSA9IHRydWUsXG4gICAgKTogUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMge1xuICAgICAgICBjb25zdCB7IGlkLCBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhPy5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzVmVubW9FbmFibGVkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgaXNHb29nbGVQYXlFbmFibGVkLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkRW5hYmxlQ2FyZCA9IGlkID09PSAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcyc7XG4gICAgICAgIGNvbnN0IGVuYWJsZUNhcmRGdW5kaW5nID0gc2hvdWxkRW5hYmxlQ2FyZCA/IFsnY2FyZCddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVDYXJkRnVuZGluZyA9ICFzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcblxuICAgICAgICBjb25zdCBlbmFibGVDcmVkaXRGdW5kaW5nID0gaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVDcmVkaXRGdW5kaW5nID0gIWlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlID8gWydjcmVkaXQnLCAncGF5bGF0ZXInXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZVZlbm1vRnVuZGluZyA9IGlzVmVubW9FbmFibGVkID8gWyd2ZW5tbyddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVWZW5tb0Z1bmRpbmcgPSAhaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUFQTXNGdW5kaW5nID0gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBnb29nbGVQYXlDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaXNHb29nbGVQYXlFbmFibGVkID8gWydnb29nbGVwYXknXSA6IFtdO1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzQ29tcG9uZW50OiBDb21wb25lbnRzU2NyaXB0VHlwZSA9IGluaXRpYWxpemVzT25DaGVja291dFBhZ2VcbiAgICAgICAgICAgID8gWydjYXJkLWZpZWxkcyddXG4gICAgICAgICAgICA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlRnVuZGluZzogRnVuZGluZ1R5cGUgPSBbXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGVuYWJsZUZ1bmRpbmc6IEZ1bmRpbmdUeXBlID0gW1xuICAgICAgICAgICAgLi4uZW5hYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVDcmVkaXRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZW5hYmxlVmVubW9GdW5kaW5nLFxuICAgICAgICAgICAgLi4uZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMsXG4gICAgICAgIF07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnaG9zdGVkLWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdsZWdhbCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdvb2dsZVBheUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FyZEZpZWxkc0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIsXG4gICAgUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIsXG59IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBjcmVhdGVGb3JtUG9zdGVyKCksXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZS5vbkNsaWNrICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZS5vbkNsaWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2Uub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gcGF5cGFsY29tbWVyY2Uub25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxdOiBQYXlQYWwgQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2U6IFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2ssIG9uQ29tcGxldGUgfSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIHBheW1lbnRCdXR0b25TdHlsZXMsIGlzQXBwU3dpdGNoRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4odGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkgJiYge1xuICAgICAgICAgICAgICAgIGFwcFN3aXRjaFdoZW5BdmFpbGFibGU6IHRydWUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZScpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGV4Y2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBBcHBTd2l0Y2ggZW5hYmxpbmcgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FwcFN3aXRjaEVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxufVxuIiwiY29uc3QgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0ID0gNDA7XG5cbmV4cG9ydCBkZWZhdWx0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodDtcbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlY3JlZGl0LCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0LmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0LmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZWNyZWRpdC5vbkNsaWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gcGF5cGFsY29tbWVyY2VjcmVkaXQub25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxdOiBQYXlQYWwgQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VjcmVkaXQpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbENvbW1lcmNlQ3JlZGl0OiBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNvbXBsZXRlLCBvbkNsaWNrIH0gPSBwYXlwYWxDb21tZXJjZUNyZWRpdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2VjcmVkaXQnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0FwcFN3aXRjaEVuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbcGF5cGFsU2RrLkZVTkRJTkcuUEFZTEFURVIsIHBheXBhbFNkay5GVU5ESU5HLkNSRURJVF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGV4Y2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdCcgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2V2ZW5tbywgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZXZlbm1vKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2V2ZW5tby5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZXZlbm1vLm9uQ2xpY2sgJiYgdHlwZW9mIHBheXBhbGNvbW1lcmNldmVubW8ub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8ub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZXZlbm1vKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vOiBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2sgfSA9IHBheXBhbGNvbW1lcmNldmVubW87XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2V2ZW5tbycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCwgTm9uY2VJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxudHlwZSBQYXltZW50SW5zdHJ1bWVudCA9IENhcmRJbnN0cnVtZW50IHwgQWNjb3VudEluc3RydW1lbnQgfCBIb3N0ZWRJbnN0cnVtZW50IHwgTm9uY2VJbnN0cnVtZW50O1xuXG5leHBvcnQgZGVmYXVsdCBQYXltZW50SW5zdHJ1bWVudDtcblxuZXhwb3J0IGludGVyZmFjZSBCYXNlSW5zdHJ1bWVudCB7XG4gICAgYmlncGF5VG9rZW46IHN0cmluZztcbiAgICBkZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBwcm92aWRlcjogc3RyaW5nO1xuICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlIHtcbiAgICBDVlYgPSAnY3Z2JyxcbiAgICBQQU4gPSAncGFuJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeU1vbnRoOiBzdHJpbmc7XG4gICAgZXhwaXJ5WWVhcjogc3RyaW5nO1xuICAgIGlpbjogc3RyaW5nO1xuICAgIGxhc3Q0OiBzdHJpbmc7XG4gICAgdHlwZTogJ2NhcmQnO1xuICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGU7XG59XG5cbmludGVyZmFjZSBCYXNlQWNjb3VudEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlSW5zdHJ1bWVudCB7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2FjY291bnQnIHwgJ2JhbmsnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGV4dGVybmFsSWQ6IHN0cmluZztcbiAgICBtZXRob2Q6ICdwYXlwYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjaEluc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGlzc3Vlcjogc3RyaW5nO1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICB0eXBlOiAnYmFuayc7XG4gICAgbWV0aG9kOiAnYWNoJyB8ICdlY3AnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhbmtJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUFjY291bnRJbnN0cnVtZW50IHtcbiAgICBhY2NvdW50TnVtYmVyOiBzdHJpbmc7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgaWJhbjogc3RyaW5nO1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbn1cblxuZXhwb3J0IHR5cGUgQWNjb3VudEluc3RydW1lbnQgPSBQYXlQYWxJbnN0cnVtZW50IHwgQmFua0luc3RydW1lbnQgfCBBY2hJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIFZhdWx0QWNjZXNzVG9rZW4ge1xuICAgIHZhdWx0QWNjZXNzVG9rZW46IHN0cmluZztcbiAgICB2YXVsdEFjY2Vzc0V4cGlyeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25Db250ZXh0IHtcbiAgICBjdXN0b21lcklkOiBudW1iZXI7XG4gICAgc3RvcmVJZDogc3RyaW5nO1xuICAgIGN1cnJlbmN5Q29kZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnN0cnVtZW50UmVxdWVzdENvbnRleHQgZXh0ZW5kcyBTZXNzaW9uQ29udGV4dCB7XG4gICAgYXV0aFRva2VuOiBzdHJpbmc7XG59XG4iLCJpbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBDYXJkSW5zdHJ1bWVudCxcbiAgICBDdXN0b21lckFkZHJlc3MsXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBTaGlwcGluZ09wdGlvbixcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nW107XG5leHBvcnQgdHlwZSBFbmFibGVGdW5kaW5nVHlwZSA9IEZ1bmRpbmdUeXBlIHwgc3RyaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlU0RLRnVuZGluZyB7XG4gICAgQ0FSRDogc3RyaW5nO1xuICAgIFBBWVBBTDogc3RyaW5nO1xuICAgIENSRURJVDogc3RyaW5nO1xuICAgIFBBWUxBVEVSOiBzdHJpbmc7XG4gICAgT1hYTzogc3RyaW5nO1xuICAgIFNFUEE6IHN0cmluZztcbiAgICBWRU5NTzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQnV5Tm93XG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zIHtcbiAgICBnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTogQnV5Tm93Q2FydFJlcXVlc3RCb2R5O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVTdHlsZXM/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzO1xuICAgIGNvbm5lY3RDbGllbnRUb2tlbj86IHN0cmluZzsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gUFBDUCBGYXN0bGFuZSBBL0IgdGVzdCB3aWxsIGJlIGZpbmlzaGVkXG4gICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU/OiBib29sZWFuO1xuICAgIGludGVudD86IFBheVBhbEludGVudDtcbiAgICBpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNQYXlQYWxBbmFseXRpY3NWMkVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENvbW1lcmNlQW5hbHl0aWNzVjJFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gUFBDUCBGYXN0bGFuZSBBL0IgdGVzdCB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW1bXTtcbiAgICB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIGlzQXBwU3dpdGNoRW5hYmxlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbEhvc3RXaW5kb3cgY29udGFpbnMgZGlmZmVyZW50XG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlcyBmb3IgZGlmZmVyZW50IHB1cnBvc2VzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbD86IFBheVBhbFNESztcbiAgICBwYXlwYWxGYXN0bGFuZT86IFBheVBhbEZhc3RsYW5lO1xuICAgIHBheXBhbEZhc3RsYW5lU2RrPzogUGF5UGFsRmFzdGxhbmVTZGs7XG4gICAgcGF5cGFsTWVzc2FnZXM/OiBQYXlQYWxNZXNzYWdlc1NkaztcbiAgICBwYXlwYWxBcG1zPzogUGF5UGFsQXBtU2RrO1xuICAgIHBheXBhbEdvb2dsZVBheT86IFBheVBhbEdvb2dsZVBheVNkaztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIFNESyBjb25maWdcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2RrQ29uZmlnIHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgICdjbGllbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnbWVyY2hhbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnYnV5ZXItY291bnRyeSc/OiBzdHJpbmc7XG4gICAgICAgICdlbmFibGUtZnVuZGluZyc/OiBFbmFibGVGdW5kaW5nVHlwZTtcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IFBheVBhbEludGVudDtcbiAgICAgICAgY29tcG9uZW50cz86IFBheVBhbFNka0NvbXBvbmVudHM7XG4gICAgfTtcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1zZGstY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZW51bSBQYXlQYWxJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbFNka0NvbXBvbmVudHMgPSBBcnJheTxcbiAgICB8ICdmYXN0bGFuZSdcbiAgICB8ICd0aHJlZS1kb21haW4tc2VjdXJlJ1xuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IHR5cGUgUGF5UGFsTGVnYWwgPSAocGFyYW1zOiB7IGZ1bmRpbmdTb3VyY2U6IHN0cmluZyB9KSA9PiB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWxGdW5kaW5nIHtcbiAgICBGVU5ESU5HOiB7XG4gICAgICAgIFBBWV9VUE9OX0lOVk9JQ0U6IHN0cmluZztcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTREsge1xuICAgIENhcmRGaWVsZHM6IChkYXRhOiBQYXlwYWxDYXJkRmllbGRzQ29uZmlnKSA9PiBQcm9taXNlPFBheVBhbENhcmRGaWVsZHM+O1xuICAgIEdvb2dsZXBheTogKCkgPT4ge1xuICAgICAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICAgICAgY29uZmlybU9yZGVyOiAoYXJnMDoge1xuICAgICAgICAgICAgb3JkZXJJZDogc3RyaW5nO1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG4gICAgICAgIH0pID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICAgICAgaW5pdGlhdGVQYXllckFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICB9O1xuICAgIEZVTkRJTkc6IFBheVBhbENvbW1lcmNlU0RLRnVuZGluZztcbiAgICBIb3N0ZWRGaWVsZHM6IHtcbiAgICAgICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgICAgICByZW5kZXIoZGF0YTogUGF5UGFsSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9ucyk6IFByb21pc2U8UGF5UGFsSG9zdGVkRmllbGRzPjtcbiAgICB9O1xuICAgIExlZ2FsOiBQYXlQYWxMZWdhbCAmIExlZ2FsRnVuZGluZztcbiAgICBCdXR0b25zKG9wdGlvbnM6IFBheVBhbEJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQnV0dG9ucztcbiAgICBQYXltZW50RmllbGRzKG9wdGlvbnM6IFBheVBhbFBheW1lbnRGaWVsZHNPcHRpb25zKTogUGF5UGFsUGF5bWVudEZpZWxkcztcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBQYXlQYWxNZXNzYWdlc09wdGlvbnMpOiBQYXlQYWxNZXNzYWdlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBQYXlQYWxDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkZvY3VzKGRhdGE6IFBheVBhbENhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uQmx1cihkYXRhOiBQYXlQYWxDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBQYXlQYWxDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgIH07XG4gICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuPzogKGRhdGE6IFBheVBhbENhcmRGaWVsZHNTdGF0ZSkgPT4gdm9pZDtcbiAgICBjcmVhdGVPcmRlcj86ICgpID0+IFByb21pc2U8c3RyaW5nPjtcbiAgICBzdHlsZTogUGF5UGFsSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IFBheVBhbENhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKTogdm9pZDtcbiAgICBvbkVycm9yKCk6IHZvaWQ7XG59XG5cbmludGVyZmFjZSBQYXlQYWxGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENhcmRGaWVsZHMge1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICBDVlZGaWVsZChjb25maWc/OiBQYXlQYWxGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxGaWVsZHM7XG4gICAgRXhwaXJ5RmllbGQoY29uZmlnPzogUGF5UGFsRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsRmllbGRzO1xuICAgIE5hbWVGaWVsZChjb25maWc/OiBQYXlQYWxGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxGaWVsZHM7XG4gICAgTnVtYmVyRmllbGQoY29uZmlnPzogUGF5UGFsRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsRmllbGRzO1xuICAgIHN1Ym1pdChjb25maWc/OiBQYXlQYWxDYXJkRmllbGRzU3VibWl0Q29uZmlnKTogUHJvbWlzZTx2b2lkPjtcbiAgICBnZXRTdGF0ZSgpOiBQcm9taXNlPFBheVBhbENhcmRGaWVsZHNTdGF0ZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyB7XG4gICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgY29tcGFueT86IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICAgICAgYWRtaW5BcmVhMTogc3RyaW5nOyAvLyBTdGF0ZVxuICAgICAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENhcmRGaWVsZHNPbkFwcHJvdmVEYXRhIHtcbiAgICB2YXVsdFNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogTGlhYmlsaXR5U2hpZnRFbnVtO1xufVxuXG5pbnRlcmZhY2UgUGF5UGFsQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgUGF5UGFsQ2FyZEZpZWxkc0NhcmQgPSBQYXlQYWxIb3N0ZWRGaWVsZHNDYXJkO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENhcmRGaWVsZHNDYXJkW107XG4gICAgZW1pdHRlZEJ5OiBzdHJpbmc7XG4gICAgaXNGb3JtVmFsaWQ6IGJvb2xlYW47XG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgY2FyZEN2dkZpZWxkOiBQYXlQYWxDYXJkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjYXJkTnVtYmVyRmllbGQ6IFBheVBhbENhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBQYXlQYWxDYXJkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjYXJkRXhwaXJ5RmllbGQ6IFBheVBhbENhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lU2RrIHtcbiAgICBUaHJlZURvbWFpblNlY3VyZUNsaWVudDoge1xuICAgICAgICBpc0VsaWdpYmxlKHBhcmFtczogdGhyZWVEU2VjdXJlUGFyYW1ldGVycyk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgIHNob3coKTogUHJvbWlzZTxUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZT47XG4gICAgfTtcbiAgICBGYXN0bGFuZShvcHRpb25zPzogUGF5UGFsRmFzdGxhbmVPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT47XG59XG5cbmludGVyZmFjZSBUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZSB7XG4gICAgbGlhYmlsaXR5U2hpZnQ6IExpYWJpbGl0eVNoaWZ0RW51bTtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgbm9uY2U6IHN0cmluZzsgLy8gRW5yaWNoZWQgbm9uY2Ugb3IgdGhlIG9yaWdpbmFsIG5vbmNlXG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kIHtcbiAgICBBbHdheXMgPSAnU0NBX0FMV0FZUycsXG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU3VjY2VlZGVkID0gJ3N1Y2NlZWRlZCcsXG4gICAgQ2FuY2VsbGVkID0gJ2NhbmNlbGxlZCcsXG4gICAgRXJyb3JlZCA9ICdlcnJvcmVkJyxcbn1cblxuZXhwb3J0IGVudW0gTGlhYmlsaXR5U2hpZnRFbnVtIHtcbiAgICBQb3NzaWJsZSA9ICdQT1NTSUJMRScsXG4gICAgTm8gPSAnTk8nLFxuICAgIFVua25vd24gPSAnVU5LTk9XTicsXG4gICAgWWVzID0gJ1lFUycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgdGhyZWVEU2VjdXJlUGFyYW1ldGVycyB7XG4gICAgYW1vdW50OiBzdHJpbmc7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgICBub25jZTogc3RyaW5nO1xuICAgIHRocmVlRFNSZXF1ZXN0ZWQ6IGJvb2xlYW47XG4gICAgdHJhbnNhY3Rpb25Db250ZXh0OiB7XG4gICAgICAgIGV4cGVyaWVuY2VfY29udGV4dDoge1xuICAgICAgICAgICAgYnJhbmRfbmFtZT86IHN0cmluZztcbiAgICAgICAgICAgIGxvY2FsZTogc3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuX3VybDogc3RyaW5nO1xuICAgICAgICAgICAgY2FuY2VsX3VybDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsTWVzc2FnZXNTZGsge1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMpOiBNZXNzYWdpbmdSZW5kZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQXBtU2RrIHtcbiAgICBCdXR0b25zKG9wdGlvbnM6IFBheVBhbEJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQnV0dG9ucztcbiAgICBQYXltZW50RmllbGRzKG9wdGlvbnM6IFBheVBhbFBheW1lbnRGaWVsZHNPcHRpb25zKTogUGF5UGFsUGF5bWVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxHb29nbGVQYXlTZGsge1xuICAgIEdvb2dsZXBheSgpOiBHb29nbGVQYXk7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBQYXltZW50cyBIb3N0ZWQgRmllbGRzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMge1xuICAgIGZpZWxkcz86IHtcbiAgICAgICAgbnVtYmVyPzogUGF5UGFsSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGN2dj86IFBheVBhbEhvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBleHBpcmF0aW9uRGF0ZT86IFBheVBhbEhvc3RlZEZpZWxkT3B0aW9uO1xuICAgIH07XG4gICAgcGF5bWVudHNTREs/OiBib29sZWFuO1xuICAgIHN0eWxlcz86IHtcbiAgICAgICAgaW5wdXQ/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnLmludmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy52YWxpZCc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnOmZvY3VzJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgfTtcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRPcHRpb24ge1xuICAgIHNlbGVjdG9yOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRzIHtcbiAgICBzdWJtaXQob3B0aW9ucz86IFBheVBhbEhvc3RlZEZpZWxkc1N1Ym1pdE9wdGlvbnMpOiBQcm9taXNlPFBheVBhbEhvc3RlZEZpZWxkc0FwcHJvdmU+O1xuICAgIGdldFN0YXRlKCk6IFBheVBhbEhvc3RlZEZpZWxkc1N0YXRlO1xuICAgIG9uKGV2ZW50TmFtZTogc3RyaW5nLCBjYWxsYmFjazogKGV2ZW50OiBQYXlQYWxIb3N0ZWRGaWVsZHNTdGF0ZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyB7XG4gICAgY29udGluZ2VuY2llcz86IEFycmF5PCczRF9TRUNVUkUnPjtcbiAgICBjYXJkaG9sZGVyTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxIb3N0ZWRGaWVsZHNBcHByb3ZlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgbGlhYmlsaXR5U2hpZnQ/OiAnUE9TU0lCTEUnIHwgJ05PJyB8ICdVTktOT1dOJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxIb3N0ZWRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbEhvc3RlZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbnVtYmVyPzogUGF5UGFsSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uRGF0ZT86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbk1vbnRoPzogUGF5UGFsSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uWWVhcj86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY3Z2PzogUGF5UGFsSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBwb3N0YWxDb2RlPzogUGF5UGFsSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRzQ2FyZCB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIG5pY2VUeXBlOiBzdHJpbmc7XG4gICAgY29kZToge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHNpemU6IG51bWJlcjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIEJ1dHRvbnNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbnNPcHRpb25zIHtcbiAgICBleHBlcmllbmNlPzogc3RyaW5nO1xuICAgIHN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG4gICAgb25BcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbiB8IHZvaWQ+IHwgdm9pZDtcbiAgICBvbkluaXQ/KGRhdGE6IEluaXRDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEluaXRDYWxsYmFja0FjdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ29tcGxldGU/KGRhdGE6IENvbXBsZXRlQ2FsbGJhY2tEYXRhUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25DbGljaz8oZGF0YTogQ2xpY2tDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XG4gICAgb25FcnJvcj8oZXJyb3I6IEVycm9yKTogdm9pZDtcbiAgICBvbkNhbmNlbD8oKTogdm9pZDtcbiAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZT8oZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZT8oZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbjogUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja1BheWxvYWQge1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGlja0NhbGxiYWNrQWN0aW9ucyB7XG4gICAgcmVqZWN0KCk6IHZvaWQ7XG4gICAgcmVzb2x2ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluaXRDYWxsYmFja1BheWxvYWQge1xuICAgIGNvcnJlbGF0aW9uSUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tBY3Rpb25zIHtcbiAgICBkaXNhYmxlKCk6IHZvaWQ7XG4gICAgZW5hYmxlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQWRkcmVzcyB7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQWRkcmVzc0NhbGxiYWNrRGF0YSB7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIGNvdW50cnlfY29kZTogc3RyaW5nO1xuICAgIHBvc3RhbF9jb2RlOiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTZWxlY3RlZFNoaXBwaW5nT3B0aW9uIHtcbiAgICBhbW91bnQ6IHtcbiAgICAgICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xuICAgICAgICB2YWx1ZTogc3RyaW5nO1xuICAgIH07XG4gICAgaWQ6IHN0cmluZztcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIHNlbGVjdGVkOiBib29sZWFuO1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklEPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMge1xuICAgIG9yZGVyOiB7XG4gICAgICAgIGdldDogKCkgPT4gUHJvbWlzZTxQYXlQYWxPcmRlckRldGFpbHM+O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJEZXRhaWxzIHtcbiAgICBwYXllcjoge1xuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICBnaXZlbl9uYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICBzdXJuYW1lOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGVtYWlsX2FkZHJlc3M6IHN0cmluZztcbiAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICBwaG9uZT86IHtcbiAgICAgICAgICAgIHBob25lX251bWJlcjoge1xuICAgICAgICAgICAgICAgIG5hdGlvbmFsX251bWJlcjogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHB1cmNoYXNlX3VuaXRzOiBBcnJheTx7XG4gICAgICAgIHNoaXBwaW5nOiB7XG4gICAgICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgZnVsbF9uYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyQWRkcmVzcyB7XG4gICAgYWRkcmVzc19saW5lXzE6IHN0cmluZztcbiAgICBhZGRyZXNzX2xpbmVfMjogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMjogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMT86IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRlQ2FsbGJhY2tEYXRhUGF5bG9hZCB7XG4gICAgaW50ZW50OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkxhYmVsIHtcbiAgICBwYXlwYWwgPSAncGF5cGFsJyxcbiAgICBjaGVja291dCA9ICdjaGVja291dCcsXG4gICAgYnV5bm93ID0gJ2J1eW5vdycsXG4gICAgcGF5ID0gJ3BheScsXG4gICAgaW5zdGFsbG1lbnQgPSAnaW5zdGFsbG1lbnQnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkNvbG9yIHtcbiAgICBnb2xkID0gJ2dvbGQnLFxuICAgIGJsdWUgPSAnYmx1ZScsXG4gICAgc2lsdmVyID0gJ3NpbHZlcicsXG4gICAgYmxhY2sgPSAnYmxhY2snLFxuICAgIHdoaXRlID0gJ3doaXRlJyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25TaGFwZSB7XG4gICAgcGlsbCA9ICdwaWxsJyxcbiAgICByZWN0ID0gJ3JlY3QnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBTdHlsZUJ1dHRvbkNvbG9yO1xuICAgIHNoYXBlPzogU3R5bGVCdXR0b25TaGFwZTtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgbGFiZWw/OiBTdHlsZUJ1dHRvbkxhYmVsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbk9wdGlvbnMge1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbiAgICBvbkNhbmNlbD86ICgpID0+IHZvaWQ7XG4gICAgb25QYXltZW50Q29tcGxldGU/OiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgTWVzc2FnZXNcbiAqL1xuLy8gVE9ETzogVGhpcyBpbnRlcmZhY2UgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgUGF5UGF5U0RLIGludGVyZmFjZSBpcyByZW1vdmVkXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE1lc3NhZ2VzIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogUGF5UGFsTWVzc2FnZXNTdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZT86IHN0cmluZztcbn1cblxuLy8gVE9ETzogVGhpcyBpbnRlcmZhY2UgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgUGF5UGF5U0RLIGludGVyZmFjZSBpcyByZW1vdmVkXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBsYXlvdXQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEdvb2dsZSBQYXkgcmVsYXRlZCB0eXBlc1xuICpcbiAqL1xuXG5pbnRlcmZhY2UgR29vZ2xlUGF5IHtcbiAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICBjb25maXJtT3JkZXI6IChjb25maXJtT3JkZXJDb25maWc6IENvbmZpcm1PcmRlckNvbmZpZykgPT4gUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nIH0+O1xuICAgIGluaXRpYXRlUGF5ZXJBY3Rpb246IChwYXllckFjdGlvbkNvbmZpZzogUGF5ZXJBY3Rpb25Db25maWcpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmludGVyZmFjZSBDb25maXJtT3JkZXJDb25maWcge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kRGF0YTogQ29uZmlybU9yZGVyRGF0YTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtT3JkZXJEYXRhIHtcbiAgICB0b2tlbml6YXRpb25EYXRhOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIGluZm86IHtcbiAgICAgICAgY2FyZE5ldHdvcms6IHN0cmluZztcbiAgICAgICAgY2FyZERldGFpbHM6IHN0cmluZztcbiAgICB9O1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBheWVyQWN0aW9uQ29uZmlnIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlUGF5Q29uZmlnIHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IEFsbG93ZWRQYXltZW50TWV0aG9kc1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBhcGlWZXJzaW9uTWlub3I6IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIGlzRWxpZ2libGU6IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJbmZvOiB7XG4gICAgICAgIG1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRPcmlnaW46IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsbG93ZWRQYXltZW50TWV0aG9kcyB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgICAgYWxsb3dlZENhcmROZXR3b3Jrczogc3RyaW5nW107XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGFzc3VyYW5jZURldGFpbHNSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHRva2VuaXphdGlvblNwZWNpZmljYXRpb246IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBnYXRld2F5OiBzdHJpbmc7XG4gICAgICAgICAgICBnYXRld2F5TWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCAgUGF5bWVudCBmaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFBheW1lbnRGaWVsZHNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbEZpZWxkc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG5hbWU/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWw/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheUxhdGVyIE1lc3NhZ2VzIHJlbGF0ZWQgdHlwZXNcbiAqIGRvYzogaHR0cHM6Ly9kZXZlbG9wZXIucGF5cGFsLmNvbS9kb2NzL2NoZWNrb3V0L3BheS1sYXRlci91cy9pbnRlZ3JhdGUvcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsdWUnIHwgJ2JsYWNrJyB8ICd3aGl0ZScgfCAnd2hpdGUtbm8tYm9yZGVyJyB8ICdncmF5JyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgbGF5b3V0Pzogc3RyaW5nOyAvLyAndGV4dCcgfCAnZmxleCdcbiAgICBsb2dvPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nOyAvLyAncHJpbWFyeScgfCAnYWx0ZXJuYXRpdmUnIHwgJ2lubGluZScgfCAnbm9uZSdcbiAgICAgICAgcG9zaXRpb24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJ1xuICAgIH07XG4gICAgcmF0aW8/OiBzdHJpbmc7IC8vICcxeDEnIHwgJzF4NCcgfCAnOHgxJyB8ICcyMHgxJ1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGFsaWduPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICAgICAgY29sb3I/OiBzdHJpbmc7IC8vICdibGFjaycgfCAnd2hpdGUnIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICAgICAgc2l6ZT86IG51bWJlcjsgLy8gZnJvbSAxMCB0byAxNlxuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBNZXNzYWdlc1N0eWxlT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogYm9vbGVhbjtcbiAgICBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lIHtcbiAgICBpZGVudGl0eTogUGF5UGFsRmFzdGxhbmVJZGVudGl0eTtcbiAgICBldmVudHM6IFBheVBhbEZhc3RsYW5lRXZlbnRzO1xuICAgIHByb2ZpbGU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9wdGlvbnMge1xuICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lSWRlbnRpdHkge1xuICAgIGxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD47XG4gICAgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0IHtcbiAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlPzogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIHByb2ZpbGVEYXRhPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG4gICAgVU5SRUNPR05JWkVEID0gJ3VucmVjb2duaXplZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YSB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzO1xuICAgIGNhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSB7XG4gICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUge1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgbmF0aW9uYWxOdW1iZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcyB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBwaG9uZU51bWJlcjogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmU7XG4gICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQge1xuICAgIGlkOiBzdHJpbmc7IC8vIG5vbmNlIC8gdG9rZW5cbiAgICBwYXltZW50U291cmNlOiBQYXlQYWxGYXN0bGFuZVBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlIHtcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZUNhcmRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nOyAvLyBcIllZWVktTU1cIlxuICAgIGxhc3REaWdpdHM6IHN0cmluZzsgLy8gXCIxMTExXCJcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBhZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQ3VzdG9tZXJBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBpbnN0cnVtZW50czogQ2FyZEluc3RydW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlIHtcbiAgICBzaG93Q2FyZFNlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZT47XG4gICAgc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzc1NlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQ2FyZDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ+O1xuICAgIHJlbmRlcihlbGVtZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyB7XG4gICAgbmFtZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgZmllbGRzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudHMge1xuICAgIGFwbVNlbGVjdGVkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBlbWFpbFN1Ym1pdHRlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIG9yZGVyUGxhY2VkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgY29udGV4dF90eXBlOiAnY3NfaWQnO1xuICAgIGNvbnRleHRfaWQ6IHN0cmluZzsgLy8gY2hlY2tvdXQgc2Vzc2lvbiBpZFxuICAgIHBhZ2VfdHlwZTogJ2NoZWNrb3V0X3BhZ2UnO1xuICAgIHBhZ2VfbmFtZTogc3RyaW5nOyAvLyB0aXRsZSBvZiB0aGUgY2hlY2tvdXQgaW5pdGlhdGlvbiBwYWdlXG4gICAgcGFydG5lcl9uYW1lOiAnYmlnYyc7XG4gICAgdXNlcl90eXBlOiAnc3RvcmVfbWVtYmVyJyB8ICdzdG9yZV9ndWVzdCc7IC8vIHR5cGUgb2YgdGhlIHVzZXIgb24gdGhlIG1lcmNoYW50IHNpdGVcbiAgICBzdG9yZV9pZDogc3RyaW5nO1xuICAgIG1lcmNoYW50X25hbWU6IHN0cmluZztcbiAgICBleHBlcmltZW50OiBzdHJpbmc7IC8vIHN0cmluZ2lmeSBKU09OIG9iamVjdCBcIlt7IHRyZWF0bWVudF9ncm91cDogJ3Rlc3QnIHwgJ2NvbnRyb2wnIH1dXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9zZWxlY3RlZDogc3RyaW5nOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWQgLyBtZXRob2RJZFxuICAgIGFwbV9sb2NhdGlvbjogJ3ByZS1lbWFpbCBzZWN0aW9uJyB8ICdwYXltZW50IHNlY3Rpb24nOyAvLyBwbGFjZW1lbnQgb2YgQVBNLCB3aGV0aGVyIGl0IGJlIGFib3ZlIHRoZSBlbWFpbCBlbnRyeSBvciBpbiB0aGUgcmFkaW8gYnV0dG9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHNlbGVjdGVkX3BheW1lbnRfbWV0aG9kOiBzdHJpbmc7XG4gICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQge1xuICAgIHBheXBhbF9jb25uZWN0X3Rva2VuPzoge1xuICAgICAgICBvcmRlcl9pZD86IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXN0bGFuZVN0eWxlc1NldHRpbmdzIHtcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZz86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICBmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzPzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBPdGhlclxuICpcbiAqL1xuZXhwb3J0IGVudW0gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMge1xuICAgIE9YWE8gPSAnb3h4bycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJEYXRhIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbiAgICBhcHByb3ZlVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSB7XG4gICAgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zPzogU2hpcHBpbmdPcHRpb25bXTtcbiAgICBjYXJ0SWQ6IHN0cmluZztcbiAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uPzogU2hpcHBpbmdPcHRpb247XG4gICAgbWV0aG9kSWQ/OiBzdHJpbmc7XG4gICAgb3JkZXJJZD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSBleHRlbmRzIEhvc3RlZEluc3RydW1lbnQsIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICBjYXJ0SWQ6IHN0cmluZztcbiAgICBtZXRhZGF0YUlkPzogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBib29sZWFuO1xuICAgIGZhc3RsYW5lVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbE9yZGVyU3RhdHVzIHtcbiAgICBBcHByb3ZlZCA9ICdBUFBST1ZFRCcsXG4gICAgQ3JlYXRlZCA9ICdDUkVBVEVEJyxcbiAgICBQYXllckFjdGlvblJlcXVpcmVkID0gJ1BBWUVSX0FDVElPTl9SRVFVSVJFRCcsXG4gICAgUG9sbGluZ1N0b3AgPSAnUE9MTElOR19TVE9QJyxcbiAgICBQb2xsaW5nRXJyb3IgPSAnUE9MTElOR19FUlJPUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJTdGF0dXNEYXRhIHtcbiAgICBzdGF0dXM6IFBheVBhbE9yZGVyU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIEZ1bmRpbmdUeXBlLFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEdvb2dsZVBheVNkayxcbiAgICBQYXlQYWxIb3N0V2luZG93LFxuICAgIFBheVBhbEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTREssXG4gICAgUGF5UGFsU2RrQ29tcG9uZW50cyxcbiAgICBQYXlQYWxTZGtDb25maWcsXG59IGZyb20gJy4vcGF5cGFsLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsU2RrU2NyaXB0TG9hZGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsU0RLKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka1NjcmlwdENvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGs7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbEdvb2dsZVBheVNkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheSB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka1NjcmlwdENvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEFwbXNTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKHBheW1lbnRNZXRob2QsIGN1cnJlbmN5Q29kZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxBcG1zO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsTWVzc2FnZXNTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTWVzc2FnZXNDb25maWcgPSB0aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBsb2FkUGF5UGFsU2RrIGlzIGEgcGF5cGFsIHNkayBzY3JpcHQgbG9hZGVyXG4gICAgICogIHdoaWNoIGxvYWRzIHBheXBhbCBzZGsgYmFzZWQgb24gcHJvdmlkZWQgY29uZmlndXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU2RrKHsgb3B0aW9ucywgYXR0cmlidXRlcyB9OiBQYXlQYWxTZGtDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0T3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snb3B0aW9ucyddPihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0QXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snYXR0cmlidXRlcyddPihhdHRyaWJ1dGVzKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2NyaXB0T3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogc2NyaXB0QXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25maWd1cmF0aW9ucyBzZWN0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzVmVubW9FbmFibGVkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgaXNHb29nbGVQYXlFbmFibGVkLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkRW5hYmxlQ2FyZCA9XG4gICAgICAgICAgICBpZCA9PT0gJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMnIHx8IGlkID09PSAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMnO1xuICAgICAgICBjb25zdCBlbmFibGVDYXJkRnVuZGluZyA9IHNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ2FyZEZ1bmRpbmcgPSAhc2hvdWxkRW5hYmxlQ2FyZCA/IFsnY2FyZCddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQ3JlZGl0RnVuZGluZyA9IGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlID8gWydjcmVkaXQnLCAncGF5bGF0ZXInXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQ3JlZGl0RnVuZGluZyA9ICFpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcblxuICAgICAgICBjb25zdCBlbmFibGVWZW5tb0Z1bmRpbmcgPSBpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlVmVubW9GdW5kaW5nID0gIWlzVmVubW9FbmFibGVkID8gWyd2ZW5tbyddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZ29vZ2xlUGF5Q29tcG9uZW50OiBQYXlQYWxTZGtDb21wb25lbnRzID0gaXNHb29nbGVQYXlFbmFibGVkID8gWydnb29nbGVwYXknXSA6IFtdO1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzQ29tcG9uZW50OiBQYXlQYWxTZGtDb21wb25lbnRzID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZSA9IFtcbiAgICAgICAgICAgIC4uLmRpc2FibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVDcmVkaXRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZGlzYWJsZVZlbm1vRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVBUE1zRnVuZGluZyxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgZW5hYmxlRnVuZGluZzogRnVuZGluZ1R5cGUgPSBbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICAgICAgXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUZ1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc6IGRpc2FibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xlZ2FsJyxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ29vZ2xlUGF5Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAuLi5jYXJkRmllbGRzQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbnRlbnQsIGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnZmFzdGxhbmUnLFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RocmVlLWRvbWFpbi1zZWN1cmUnLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc6IHNlc3Npb25JZC5yZXBsYWNlKC8tL2csICcnKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsRmFzdGxhbmVTZGsnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBjb21taXQgPSBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB8fCBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnZ29vZ2xlcGF5J10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEdvb2dsZVBheScsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgZW5hYmxlQVBNc0Z1bmRpbmcgPSBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcztcbiAgICAgICAgY29uc3QgZGlzYWJsZUFQTXNGdW5kaW5nID0gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJzogZW5hYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUFQTXNGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlQVBNc0Z1bmRpbmcubGVuZ3RoID4gMCA/IGRpc2FibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydidXR0b25zJywgJ3BheW1lbnQtZmllbGRzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEFwbXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkLCBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBidXllckNvdW50cnkgfSA9XG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ21lc3NhZ2VzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsTWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgUGF5UGFsU2RrU2NyaXB0TG9hZGVyIGZyb20gJy4vcGF5cGFsLXNkay1zY3JpcHQtbG9hZGVyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCk6IFBheVBhbFNka1NjcmlwdExvYWRlciB7XG4gICAgcmV0dXJuIG5ldyBQYXlQYWxTZGtTY3JpcHRMb2FkZXIoY3JlYXRlU2NyaXB0TG9hZGVyKCkpO1xufVxuIiwiaW50ZXJmYWNlIENvb2tpZU9wdGlvbnMge1xuICAgIGV4cGlyZXM/OiBEYXRlO1xuICAgIHBhdGg/OiBzdHJpbmc7XG4gICAgZG9tYWluPzogc3RyaW5nO1xuICAgIHNlY3VyZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvb2tpZVN0b3JhZ2Uge1xuICAgIHN0YXRpYyBnZXQobmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGNvb2tpZUtleSA9IGAke2VuY29kZVVSSUNvbXBvbmVudChgJHtuYW1lfWApfT1gO1xuICAgICAgICBjb25zdCBjb29raWUgPSBkb2N1bWVudC5jb29raWU7XG5cbiAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcblxuICAgICAgICBjb25zdCBmaXJzdEluZGV4ID0gY29va2llLmluZGV4T2YoY29va2llS2V5KTtcblxuICAgICAgICBpZiAoZmlyc3RJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgbGFzdEluZGV4ID0gY29va2llLmluZGV4T2YoJzsnLCBmaXJzdEluZGV4KTtcblxuICAgICAgICAgICAgaWYgKGxhc3RJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBjb29raWUubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudChjb29raWUuc3Vic3RyaW5nKGZpcnN0SW5kZXggKyBjb29raWVLZXkubGVuZ3RoLCBsYXN0SW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucyA9IHsgc2VjdXJlOiB0cnVlIH0pIHtcbiAgICAgICAgbGV0IGNvb2tpZVRleHQgPSBgJHtlbmNvZGVVUklDb21wb25lbnQobmFtZSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuXG4gICAgICAgIGNvbnN0IHsgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke2V4cGlyZXMudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIC8vIGluZm86IGRlZmF1bHQgY29va2llIGV4cGlyYXRpb24gdGltZSBhZnRlciBzZXR1cFxuICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IDYwO1xuXG4gICAgICAgICAgICBub3cuc2V0VGltZShub3cuZ2V0VGltZSgpICsgbWludXRlcyAqIDYwICogMTAwMCk7XG5cbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZXhwaXJlcz0ke25vdy50b1VUQ1N0cmluZygpfWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF0aCkge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBwYXRoPSR7cGF0aH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBkb21haW49JHtkb21haW59YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gJzsgc2VjdXJlJztcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZVRleHQ7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlbW92ZShuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBDb29raWVPcHRpb25zKSB7XG4gICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0KG5hbWUsICcnLCB7IGV4cGlyZXM6IG5ldyBEYXRlKDApLCAuLi5vcHRpb25zIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzRXF1YWwsIG9taXQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgQ3VzdG9tZXJBZGRyZXNzLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgQ29va2llU3RvcmFnZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RvcmFnZSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsRmFzdGxhbmUsXG4gICAgUGF5UGFsRmFzdGxhbmVBZGRyZXNzLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVQaG9uZSxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhTWFwcGluZ1Jlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICBQYXlQYWxIb3N0V2luZG93LFxufSBmcm9tICcuL3BheXBhbC10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheXBhbEZhc3RsYW5lVXRpbHMge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlQYWxIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgcGF5cGFsRmFzdGxhbmVTZGs6IFBheVBhbEZhc3RsYW5lU2RrLFxuICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZDogYm9vbGVhbixcbiAgICAgICAgc3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT4ge1xuICAgICAgICBpZiAoaXNUZXN0TW9kZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZmFzdGxhbmVFbnYnLCAnc2FuZGJveCcpO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdheG9FbnYnLCAnc2FuZGJveCcpOyAvLyBUT0RPOiByZW1vdmUgaWYgdGhpcyBrZXkgZG9lcyBub3QgdXNlIG9uIFBheVBhbCBzaWRlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0U3R5bGVzID0ge1xuICAgICAgICAgICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZVNkay5GYXN0bGFuZSh7XG4gICAgICAgICAgICAgICAgc3R5bGVzOiBzdHlsZXMgfHwgZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lO1xuICAgIH1cblxuICAgIGdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpOiBQYXlQYWxGYXN0bGFuZSB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRGV0ZWN0cyB0aGUgY3VzdG9tZXIgdG8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0aW9uIGFuZFxuICAgICAqIHJldHVybnMgY3VzdG9tZXJDb250ZXh0SWQgdG8gdXNlIGl0IGZvciBhdXRoZW50aWNhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9va3VwQ3VzdG9tZXJPclRocm93KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4gcGF5cGFsRmFzdGxhbmUuaWRlbnRpdHkubG9va3VwQ3VzdG9tZXJCeUVtYWlsKGVtYWlsKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFRyaWdnZXJzIGF1dGhlbnRpY2F0aW9uIGZsb3cgKHNob3dzIE9UUCBwb3B1cCkgaWYgdGhlIGN1c3RvbWVyIHJlY29nbmlzZWQgYXMgUGF5UGFsIEZhc3RsYW5lIHVzZXJcbiAgICAgKiBhbmQgcmV0dXJucyBQYXlQYWwgRmFzdGxhbmUgUHJvZmlsZSBkYXRhIHRvIHVzZSBpdCBpbiBCQyBjaGVja291dFxuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgIGN1c3RvbWVyQ29udGV4dElkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdD4ge1xuICAgICAgICBpZiAoIWN1c3RvbWVyQ29udGV4dElkKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbEZhc3RsYW5lLmlkZW50aXR5LnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3coY3VzdG9tZXJDb250ZXh0SWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogJ3VwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQnIG1ldGhvZCBpcyB1c2VkIHRvOlxuICAgICAqIC0gc2V0IHNlc3Npb24gaWQgYWZ0ZXIgdXNlciB3YXMgYXV0aGVudGljYXRlZCAob3IgdW5yZWNvZ25pc2VkKSB0byB0cmlnZ2VyIGF1dGhlbnRpY2F0aW9uIGFmdGVyIHBhZ2UgcmVmcmVzaFxuICAgICAqXG4gICAgICogRmxvdyBpbmZvOlxuICAgICAqIElmIHVzZXIgdW5yZWNvZ25pc2VkIHRoZW4gdGhlIGxvb2t1cCBtZXRob2Qgd2lsbCBiZSB3b3JraW5nIGJ1dCB0aGUgT1RQIHdpbGwgbm90IGJlIHNob3duXG4gICAgICogSWYgdXNlciByZWNvZ25pc2VkIGFuZCBub3QgY2FuY2VsZWQgdGhlbiB0aGUgbG9va3VwIG1ldGhvZCB3aWxsIGJlIHdvcmtpbmcgYW5kIHRoZSBPVFAgd2lsbCBiZSBzaG93biBvbmx5IGlmIG5lZWRlZFxuICAgICAqIElmIHVzZXIgY2FuY2VscyB0aGUgT1BUIHRoZW4gT1RQIHdpbGwgbm90IGJlIHRyaWdnZXJlZCBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgKlxuICAgICAqL1xuICAgIHVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoc2Vzc2lvbklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgZXhwaXJlcy5zZXREYXRlKGV4cGlyZXMuZ2V0RGF0ZSgpICsgMTQpOyAvLyAyIHdlZWtzIGV4cGlyeVxuXG4gICAgICAgIGNvbnN0IGNvb2tpZXNPcHRpb24gPSB7XG4gICAgICAgICAgICBleHBpcmVzLFxuICAgICAgICAgICAgc2VjdXJlOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0KCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnLCBzZXNzaW9uSWQsIGNvb2tpZXNPcHRpb24pO1xuICAgIH1cblxuICAgIHJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTogdm9pZCB7XG4gICAgICAgIENvb2tpZVN0b3JhZ2UucmVtb3ZlKCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnKTtcbiAgICB9XG5cbiAgICBnZXRTdG9yYWdlU2Vzc2lvbklkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBDb29raWVTdG9yYWdlLmdldCgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJykgfHwgJyc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAnbWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YScgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvcjpcbiAgICAgKiAtIG1hcHBpbmcgUGF5UGFsIEZhc3RsYW5lIFByb2ZpbGUgZGF0YSB0byBCQyBkYXRhIHNoYXBlXG4gICAgICogLSByZXR1cm5pbmcgbWFwcGVkIGRhdGEgdG8gdXNlIGZvciB1cGRhdGluZyBQYXltZW50UHJvdmlkZXJDdXN0b21lciBzdGF0ZSBhbmRcbiAgICAgKiB1cGRhdGUgc2hpcHBpbmcgYW5kIGJpbGxpbmcgYWRkcmVzc2VzXG4gICAgICpcbiAgICAgKi9cbiAgICBtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdDogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICApOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhTWFwcGluZ1Jlc3VsdCB7XG4gICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgcHJvZmlsZURhdGEgfSA9IGF1dGhlbnRpY2F0aW9uUmVzdWx0O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJpbGxpbmdBZGRyZXNzID0gcHJvZmlsZURhdGE/LmNhcmQ/LnBheW1lbnRTb3VyY2U/LmNhcmQ/LmJpbGxpbmdBZGRyZXNzO1xuICAgICAgICBjb25zdCBwYXlwYWxTaGlwcGluZ0FkZHJlc3MgPSBwcm9maWxlRGF0YT8uc2hpcHBpbmdBZGRyZXNzO1xuICAgICAgICBjb25zdCBwYXlwYWxQcm9maWxlTmFtZSA9IHByb2ZpbGVEYXRhPy5uYW1lO1xuICAgICAgICBjb25zdCBwYXlwYWxJbnN0cnVtZW50ID0gcHJvZmlsZURhdGE/LmNhcmQ7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gcGF5cGFsU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICA/IHRoaXMubWFwUGF5UGFsVG9CY0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MuYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLnBob25lTnVtYmVyLFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgcGF5cGFsQmlsbGluZ0FkZHJlc3MgJiYgcGF5cGFsUHJvZmlsZU5hbWVcbiAgICAgICAgICAgICAgICA/IHRoaXMubWFwUGF5UGFsVG9CY0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgICAgICAgcGF5cGFsQmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgcGF5cGFsUHJvZmlsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzPy5waG9uZU51bWJlcixcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudHMgPSBwYXlwYWxJbnN0cnVtZW50XG4gICAgICAgICAgICA/IHRoaXMubWFwUGF5UGFsVG9CY0luc3RydW1lbnQobWV0aG9kSWQsIHBheXBhbEluc3RydW1lbnQpXG4gICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IHRoaXMuZmlsdGVyQWRkcmVzc2VzKFtzaGlwcGluZ0FkZHJlc3MsIGJpbGxpbmdBZGRyZXNzXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSB8fCBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuVU5SRUNPR05JWkVELFxuICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBtYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgaW5zdHJ1bWVudDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZCxcbiAgICApOiBDYXJkSW5zdHJ1bWVudFtdIHtcbiAgICAgICAgY29uc3QgeyBpZCwgcGF5bWVudFNvdXJjZSB9ID0gaW5zdHJ1bWVudDtcbiAgICAgICAgY29uc3QgeyBicmFuZCwgZXhwaXJ5LCBsYXN0RGlnaXRzIH0gPSBwYXltZW50U291cmNlLmNhcmQ7XG5cbiAgICAgICAgY29uc3QgW2V4cGlyeVllYXIsIGV4cGlyeU1vbnRoXSA9IGV4cGlyeS5zcGxpdCgnLScpO1xuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYmlncGF5VG9rZW46IGlkLFxuICAgICAgICAgICAgICAgIGJyYW5kLFxuICAgICAgICAgICAgICAgIGRlZmF1bHRJbnN0cnVtZW50OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBleHBpcnlNb250aCxcbiAgICAgICAgICAgICAgICBleHBpcnlZZWFyLFxuICAgICAgICAgICAgICAgIGlpbjogJycsXG4gICAgICAgICAgICAgICAgbGFzdDQ6IGxhc3REaWdpdHMsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZS5QQU4sXG4gICAgICAgICAgICAgICAgdHlwZTogJ2NhcmQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBtYXBCY1RvUGF5UGFsQWRkcmVzcyhhZGRyZXNzPzogQWRkcmVzcyk6IFBheVBhbEZhc3RsYW5lQWRkcmVzcyB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wYW55OiBhZGRyZXNzPy5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzc0xpbmUxOiBhZGRyZXNzPy5hZGRyZXNzMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3NMaW5lMjogYWRkcmVzcz8uYWRkcmVzczIgfHwgJycsXG4gICAgICAgICAgICBhZG1pbkFyZWExOiBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2VDb2RlIHx8IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZSB8fCAnJyxcbiAgICAgICAgICAgIGFkbWluQXJlYTI6IGFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3M/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICBhZGRyZXNzOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3MsXG4gICAgICAgIHByb2ZpbGVOYW1lOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lLFxuICAgICAgICBwaG9uZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lLFxuICAgICAgICBjdXN0b21GaWVsZHM/OiBDdXN0b21lckFkZHJlc3NbJ2N1c3RvbUZpZWxkcyddLFxuICAgICk6IEN1c3RvbWVyQWRkcmVzcyB7XG4gICAgICAgIGNvbnN0IFtmaXJzdE5hbWUsIGxhc3ROYW1lXSA9IHByb2ZpbGVOYW1lLmZ1bGxOYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgY29uc3QgcGhvbmVEYXRhID0ge1xuICAgICAgICAgICAgbmF0aW9uYWxOdW1iZXI6IHBob25lPy5uYXRpb25hbE51bWJlciB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBwaG9uZT8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgdHlwZTogJ3BheXBhbC1hZGRyZXNzJyxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcHJvZmlsZU5hbWUuZmlyc3ROYW1lIHx8IGZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwcm9maWxlTmFtZS5sYXN0TmFtZSB8fCBsYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6IGFkZHJlc3MuY29tcGFueSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzLmFkZHJlc3NMaW5lMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmFkZHJlc3NMaW5lMiB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MuYWRtaW5BcmVhMixcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogYWRkcmVzcy5hZG1pbkFyZWExLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5hZG1pbkFyZWExLFxuICAgICAgICAgICAgY291bnRyeTogYWRkcmVzcy5jb3VudHJ5Q29kZSB8fCAnJywgLy8gVE9ETzogdXBkYXRlIGNvdW50cnkgd2l0aCB2YWxpZCBuYW1pbmdcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgcGhvbmU6IHBob25lRGF0YS5jb3VudHJ5Q29kZSArIHBob25lRGF0YS5uYXRpb25hbE51bWJlcixcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkczogY3VzdG9tRmllbGRzIHx8IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yIGZpbHRlcmluZyBQYXlQYWwgRmFzdGxhbmUgYWRkcmVzc2VzIGlmIHRoZXkgYXJlIHRoZSBzYW1lXG4gICAgICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgYWRkcmVzc2VzIHRvIHVzZSB0aGVtIGZvciBzaGlwcGluZyBhbmQvb3IgYmlsbGluZyBhZGRyZXNzIHNlbGVjdGlvbnNcbiAgICAgKiBzbyB0aGUgY3VzdG9tZXIgd2lsbCBiZSBhYmxlIHRvIHVzZSBhZGRyZXNzZXMgZnJvbSBQYXlQYWwgRmFzdGxhbmUgaW4gY2hlY2tvdXQgZmxvd1xuICAgICAqXG4gICAgICovXG4gICAgZmlsdGVyQWRkcmVzc2VzKGFkZHJlc3NlczogQXJyYXk8Q3VzdG9tZXJBZGRyZXNzIHwgdW5kZWZpbmVkPik6IEN1c3RvbWVyQWRkcmVzc1tdIHtcbiAgICAgICAgcmV0dXJuIGFkZHJlc3Nlcy5yZWR1Y2UoXG4gICAgICAgICAgICAoY3VzdG9tZXJBZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdLCBjdXJyZW50QWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50QWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VzdG9tZXJBZGRyZXNzZXM7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtZUFkZHJlc3NJblRoZUFycmF5ID0gY3VzdG9tZXJBZGRyZXNzZXMuc29tZSgoY3VzdG9tZXJBZGRyZXNzKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXF1YWxBZGRyZXNzZXMoY3VzdG9tZXJBZGRyZXNzLCBjdXJyZW50QWRkcmVzcyksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzYW1lQWRkcmVzc0luVGhlQXJyYXlcbiAgICAgICAgICAgICAgICAgICAgPyBjdXN0b21lckFkZHJlc3Nlc1xuICAgICAgICAgICAgICAgICAgICA6IFsuLi5jdXN0b21lckFkZHJlc3NlcywgY3VycmVudEFkZHJlc3NdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtdLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNFcXVhbEFkZHJlc3NlcyhcbiAgICAgICAgZmlyc3RBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MsXG4gICAgICAgIHNlY29uZEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyxcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGlzRXF1YWwodGhpcy5ub3JtYWxpemVBZGRyZXNzKGZpcnN0QWRkcmVzcyksIHRoaXMubm9ybWFsaXplQWRkcmVzcyhzZWNvbmRBZGRyZXNzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVBZGRyZXNzKGFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcykge1xuICAgICAgICByZXR1cm4gb21pdChhZGRyZXNzLCBbJ2lkJywgJ3Bob25lJ10pO1xuICAgIH1cbn1cbiIsImltcG9ydCBQYXlwYWxGYXN0bGFuZVV0aWxzIGZyb20gJy4vcGF5cGFsLWZhc3RsYW5lLXV0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGF5cGFsRmFzdGxhbmVVdGlscygpOiBQYXlwYWxGYXN0bGFuZVV0aWxzIHtcbiAgICByZXR1cm4gbmV3IFBheXBhbEZhc3RsYW5lVXRpbHMoKTtcbn1cbiIsImltcG9ydCB7IG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIH0gZnJvbSAnLi4vaW5kZXgnO1xuXG5mdW5jdGlvbiBpc0ludmFsaWRTdHlsZU9wdGlvbihzdHlsZU9wdGlvbjogdW5rbm93bikge1xuICAgIHJldHVybiB0eXBlb2Ygc3R5bGVPcHRpb24gIT09ICdzdHJpbmcnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICBzdHlsZVNldHRpbmdzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICB1aVN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuKSB7XG4gICAgaWYgKCF1aVN0eWxlcyAmJiAhc3R5bGVTZXR0aW5ncykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhblVwRmFzdGxhbmVTdHlsZXMobWVyZ2VGYXN0bGFuZVN0eWxlcyhzdHlsZVNldHRpbmdzLCB1aVN0eWxlcykpO1xufVxuXG5mdW5jdGlvbiBtZXJnZUZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5yb290Py5iYWNrZ3JvdW5kQ29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgZXJyb3JDb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5lcnJvckNvbG9yLFxuICAgICAgICAgICAgZm9udEZhbWlseTogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IHx8IHVpU3R5bGVzPy5yb290Py5mb250RmFtaWx5LFxuICAgICAgICAgICAgZm9udFNpemVCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRTaXplQmFzZSxcbiAgICAgICAgICAgIHBhZGRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyB8fCB1aVN0eWxlcz8ucm9vdD8ucGFkZGluZyxcbiAgICAgICAgICAgIHByaW1hcnlDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8ucHJpbWFyeUNvbG9yLFxuICAgICAgICB9LFxuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlclJhZGl1cyB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlclJhZGl1cyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBmb2N1c0JvcmRlckNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uZm9jdXNCb3JkZXJDb2xvcixcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgIGJvcmRlcldpZHRoOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyV2lkdGgsXG4gICAgICAgICAgICB0ZXh0Q29sb3JCYXNlOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UgfHwgdWlTdHlsZXM/LmlucHV0Py50ZXh0Q29sb3JCYXNlLFxuICAgICAgICB9LFxuICAgICAgICB0b2dnbGU6IHtcbiAgICAgICAgICAgIGNvbG9yUHJpbWFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IHx8IHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGNvbG9yU2Vjb25kYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50b2dnbGU/LmNvbG9yU2Vjb25kYXJ5LFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIHx8IHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhcHRpb246IHtcbiAgICAgICAgICAgICAgICBjb2xvcjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBicmFuZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIHx8IHVpU3R5bGVzPy5icmFuZGluZyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBjbGVhblVwRmFzdGxhbmVTdHlsZXMoc3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbikge1xuICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiA9IHt9O1xuXG4gICAgY29uc3Qgcm9vdCA9IG9taXRCeShzdHlsZXMucm9vdCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGlucHV0ID0gb21pdEJ5KHN0eWxlcy5pbnB1dCwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRvZ2dsZSA9IG9taXRCeShzdHlsZXMudG9nZ2xlLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dEJvZHkgPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmJvZHksIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Q2FwdGlvbiA9IG9taXRCeShzdHlsZXMudGV4dD8uY2FwdGlvbiwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IGJyYW5kaW5nID0gc3R5bGVzLmJyYW5kaW5nO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKHJvb3QpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5yb290ID0gcm9vdDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5pbnB1dCA9IGlucHV0O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0b2dnbGUpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRCb2R5KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHt9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmJvZHkgPSB0ZXh0Qm9keTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dENhcHRpb24pLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge1xuICAgICAgICAgICAgLi4uZmFzdGxhbmVTdHlsZXMudGV4dCxcbiAgICAgICAgfTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5jYXB0aW9uID0gdGV4dENhcHRpb247XG4gICAgfVxuXG4gICAgaWYgKGJyYW5kaW5nKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmJyYW5kaW5nID0gYnJhbmRpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhc3RsYW5lU3R5bGVzO1xufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0RmFzdGxhbmVTdHlsZXMsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka1NjcmlwdExvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lVXRpbHM6IFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VmYXN0bGFuZSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzVGVzdE1vZGVFbmFibGVkID0gISFwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLnBheXBhbFNka1NjcmlwdExvYWRlci5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZhc3RsYW5lU3R5bGVzKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWZhc3RsYW5lKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KFxuICAgICAgICBvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQsIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2ssIG1ldGhvZElkIH0gPVxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFja1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBhbmQgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lck9yVGhyb3coKTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIuaXNHdWVzdCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIGxvZ2dlciB0byBiZSBhYmxlIHRvIGRlYnVnIGlzc3VlcyBpZiB0aGVyZSBhbnlcbiAgICAgICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXV0aGVudGljYXRpb24gZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID0gYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhcbiAgICAgICAgICAgIGN1c3RvbWVyRW1haWwsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXN1bHQgPVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KGN1c3RvbWVyQ29udGV4dElkKTtcblxuICAgICAgICBjb25zdCBpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkID1cbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRDtcblxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlKG1ldGhvZElkLCBhdXRoZW50aWNhdGlvblJlc3VsdCk7XG5cbiAgICAgICAgaWYgKGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChjYXJ0SWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB1cGRhdGVDdXN0b21lckRhdGFTdGF0ZShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBiaWxsaW5nQWRkcmVzcywgc2hpcHBpbmdBZGRyZXNzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzICYmIGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICB1cGRhdGVkU3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCB7IGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkIH0gPVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gdXBkYXRlZFN0YXRlLmdldENvbnNpZ25tZW50cygpIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zID0gY29uc2lnbm1lbnRzWzBdPy5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG4gICAgICAgICAgICBjb25zdCBmaXJzdFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGZpcnN0U2hpcHBpbmdPcHRpb24pICYmXG4gICAgICAgICAgICAgICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uSWQgPSByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uPy5pZCB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uLmlkO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGYXN0bGFuZSBzdHlsaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmU6IFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zIHwgdW5kZWZpbmVkLFxuICAgICk6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgZmFzdGxhbmVTdHlsZXMsIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgcmV0dXJuIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkID8gZmFzdGxhbmVTdHlsZXMgOiB7fSxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VhY2NlbGVyYXRlZGNoZWNrb3V0JyB9LCAvLyB0aGlzIG1ldGhvZCBpZCB3aWxsIGJlIHByb3ZpZGVkIGZvciB1c2VycyBmcm9tIHRlc3QgZ3JvdXBcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcycgfSwgLy8gdGhpcyBtZXRob2QgaWQgd2lsbCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgZnJvbSBjb250cm9sIGdyb3VwXG5dKTtcbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxHb29nbGVQYXlTZGssXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrQ29uZmlnLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlU2RrIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGs7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsR29vZ2xlUGF5U2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5IHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihwYXltZW50TWV0aG9kLCBjdXJyZW5jeUNvZGUpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsoY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsQXBtcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsTWVzc2FnZXNTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTWVzc2FnZXNDb25maWcgPSB0aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBsb2FkUGF5UGFsU2RrIGlzIGEgcGF5cGFsIHNkayBzY3JpcHQgbG9hZGVyXG4gICAgICogIHdoaWNoIGxvYWRzIHBheXBhbCBzZGsgYmFzZWQgb24gcHJvdmlkZWQgY29uZmlndXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU2RrKHsgb3B0aW9ucywgYXR0cmlidXRlcyB9OiBQYXlQYWxTZGtDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0T3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snb3B0aW9ucyddPihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0QXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snYXR0cmlidXRlcyddPihhdHRyaWJ1dGVzKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2NyaXB0T3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogc2NyaXB0QXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25maWd1cmF0aW9ucyBzZWN0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbnRlbnQsIGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnZmFzdGxhbmUnLFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RocmVlLWRvbWFpbi1zZWN1cmUnLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc6IHNlc3Npb25JZC5yZXBsYWNlKC8tL2csICcnKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsRmFzdGxhbmVTZGsnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydnb29nbGVwYXknXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsR29vZ2xlUGF5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJzogZGlzYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnYnV0dG9ucycsICdwYXltZW50LWZpZWxkcyddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxBcG1zJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkLCBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBidXllckNvdW50cnkgfSA9XG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ21lc3NhZ2VzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsTWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzLFxuICAgIExvYWRpbmdJbmRpY2F0b3JTdHlsZXMsXG59IGZyb20gJy4vbG9hZGluZy1pbmRpY2F0b3Itc3R5bGVzJztcblxuY29uc3QgREVGQVVMVF9TVFlMRVM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXMgPSB7XG4gICAgc2l6ZTogNzAsXG4gICAgY29sb3I6ICcjZDlkOWQ5JyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMgPSB7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG5cbmNvbnN0IFJPVEFUSU9OX0FOSU1BVElPTiA9ICdlbWJlZGRlZC1jaGVja291dC1sb2FkaW5nLWluZGljYXRvci1yb3RhdGlvbic7XG5cbmludGVyZmFjZSBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucyB7XG4gICAgc3R5bGVzPzogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBjb250YWluZXJTdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nSW5kaWNhdG9yIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIHByaXZhdGUgY29udGFpbmVyU3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExvYWRpbmdJbmRpY2F0b3JPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3R5bGVzID0geyAuLi5ERUZBVUxUX1NUWUxFUywgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHlsZXMpIH07XG4gICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGVzID0geyAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLmNvbnRhaW5lclN0eWxlcykgfTtcblxuICAgICAgICB0aGlzLmRlZmluZUFuaW1hdGlvbigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5idWlsZENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmluZGljYXRvciA9IHRoaXMuYnVpbGRJbmRpY2F0b3IoKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmluZGljYXRvcik7XG4gICAgfVxuXG4gICAgc2hvdyhwYXJlbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocGFyZW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gYXR0YWNoIHRoZSBsb2FkaW5nIGluZGljYXRvciBiZWNhdXNlIHRoZSBwYXJlbnQgSUQgaXMgbm90IHZhbGlkLicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDI1MG1zIGVhc2Utb3V0JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZShjb250YWluZXIsIHRoaXMuY29udGFpbmVyU3R5bGVzKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbmRpY2F0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyQ29sb3IgPSBgJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfWA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9IGAke1JPVEFUSU9OX0FOSU1BVElPTn0gNTAwbXMgaW5maW5pdGUgY3ViaWMtYmV6aWVyKDAuNjksIDAuMzEsIDAuNTYsIDAuODMpYDtcblxuICAgICAgICByZXR1cm4gaW5kaWNhdG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KTogdm9pZCB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIGF0dHJzW2tdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWZpbmVBbmltYXRpb24oKTogdm9pZCB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGRlZmluZSBDU1MgYW5pbWF0aW9uLCB3ZSBuZWVkIHRvIGluc2VydCBhIHN0eWxlc2hlZXQgaW50byB0aGUgaG9zdCBmcmFtZS5cbiAgICAgICAgLy8gV2Ugb25seSBoYXZlIHRvIGRvIGl0IG9uY2UuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChST1RBVElPTl9BTklNQVRJT04pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgc3R5bGUuaWQgPSBST1RBVElPTl9BTklNQVRJT047XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgZG9jdW1lbnQuaGVhZD8uYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgIGlmIChzdHlsZS5zaGVldCBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgMm5kIHBhcmFtZXRlciBmb3IgSUUxMSwgZXZlbiB0aG91Z2ggaXQgaXNcbiAgICAgICAgICAgIC8vIDAgYnkgZGVmYXVsdCBmb3IgYWxsIG90aGVyIGJyb3dzZXJzLlxuICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyAke1JPVEFUSU9OX0FOSU1BVElPTn0ge1xuICAgICAgICAgICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTID0ge1xuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gc3VjY2Vzc2Z1bGx5IHN1Ym1pdCBhIHNlcnZlciByZXF1ZXN0XG4gKiB1c2luZyBhIHBheW1lbnQgbWV0aG9kIGJlY2F1c2UgdGhlIG1ldGhvZCBoYXMgaW52YWxpZCBjb25maWd1cmF0aW9uIG9yIGlzIGluXG4gKiBhbiBpbnZhbGlkIHN0YXRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kSW52YWxpZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEhvc3RlZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBpbnN0cnVtZW50ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnN0cnVtZW50ICE9PSBudWxsICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICdib29sZWFuJykgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICdib29sZWFuJylcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLy8gSGF2ZSB0byB1c2UgYGFzYCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83Mzk4NzA0NC90eXBlZ3VhcmRpbmctYW4tdW5rbm93bi1uZXN0ZWQtb2JqZWN0IHNob3VsZCBiZSBmaXhlZCBpbiA0LjgrXG5jb25zdCBpc1JlcXVlc3RFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlcXVlc3RFcnJvciA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2JvZHknIGluIGVycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNSZXF1ZXN0RXJyb3I7XG4iLCJpbXBvcnQgeyBNZXNzYWdlc1N0eWxlT3B0aW9ucywgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuZnVuY3Rpb24gZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyh7XG4gICAgc3R5bGVzLFxufTogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtKTogTWVzc2FnZXNTdHlsZU9wdGlvbnMge1xuICAgIGNvbnN0IG1lc3NhZ2VzU3R5bGVzOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKHN0eWxlcy5jb2xvcikge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5jb2xvciA9IHN0eWxlcy5jb2xvcjtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLmxheW91dCkge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5sYXlvdXQgPSBzdHlsZXMubGF5b3V0O1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddIHx8IHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28gPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWydsb2dvLXR5cGUnXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nby50eXBlID0gc3R5bGVzWydsb2dvLXR5cGUnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nby5wb3NpdGlvbiA9IHN0eWxlc1snbG9nby1wb3NpdGlvbiddO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlcy5yYXRpbykge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5yYXRpbyA9IHN0eWxlcy5yYXRpbztcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10gfHwgc3R5bGVzWyd0ZXh0LXNpemUnXSkge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0ID0ge307XG5cbiAgICAgICAgaWYgKHN0eWxlc1sndGV4dC1jb2xvciddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LmNvbG9yID0gc3R5bGVzWyd0ZXh0LWNvbG9yJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LXNpemUnXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dC5zaXplID0gK3N0eWxlc1sndGV4dC1zaXplJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbWVzc2FnZXNTdHlsZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWc7XG4iLCJleHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQ6IHVua25vd24pOiBpbnN0cnVtZW50IGlzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBpZiAodHlwZW9mIGluc3RydW1lbnQgIT09ICdvYmplY3QnIHx8IGluc3RydW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdiaWdwYXlUb2tlbicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnZGVmYXVsdEluc3RydW1lbnQnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3Byb3ZpZGVyJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0cnVzdGVkU2hpcHBpbmdBZGRyZXNzJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdtZXRob2QnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3R5cGUnIGluIGluc3RydW1lbnRcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvcixcbiAgICBpc1JlZGlyZWN0QWN0aW9uRXJyb3IsXG4gICAgTWVzc2FnaW5nT3B0aW9ucyxcbiAgICBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcbmltcG9ydCB7IGlzQmFzZUluc3RydW1lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3V0aWxpdHknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxCdXR0b24/OiBQYXlQYWxDb21tZXJjZUJ1dHRvbnM7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZT86IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VTZGs6IFBheVBhbENvbW1lcmNlU2RrLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZSA9IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBiYW5uZXJDb250YWluZXJJZCB9ID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10sXG4gICAgICAgICAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSxcbiAgICAgICAgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGlmIChiYW5uZXJDb250YWluZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lckNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID0gcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/LmZpbmQoXG4gICAgICAgICAgICAgICAgKHsgaWQgfSkgPT4gaWQgPT09ICdjaGVja291dCcsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgfHwgIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFwYXlwYWxNZXNzYWdlcyB8fCB0eXBlb2YgcGF5cGFsTWVzc2FnZXM/Lk1lc3NhZ2VzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxDb21tZXJjZSBQYXlMYXRlcl06IGJhbm5lciBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzLCBiYW5uZXJDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgUGF5UGFsIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciBQYXlQYWwgYnV0dG9uLlxuICAgICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/Lm9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGNvbnRhaW5lcj8uc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChwYXlwYWxjb21tZXJjZS5vbkluaXQgJiYgdHlwZW9mIHBheXBhbGNvbW1lcmNlLm9uSW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2Uub25Jbml0KCgpID0+IHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2Uuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZS5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucGF5cGFsY29tbWVyY2UgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICh0aGlzLmlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShwYXltZW50RGF0YSkgJiYgIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gYXdhaXQgdGhpcy5jcmVhdGVPcmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKVxuICAgICAgICAgICAgPyB0aGlzLnByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgOiB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgdGhpcy5vcmRlcklkLCBwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAoaXNSZWRpcmVjdEFjdGlvbkVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZD8uZGF0YT8ucmVkaXJlY3RfdXJsO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJlZGlyZWN0VXJsKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsocGF5bWVudC5tZXRob2RJZCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXlwYWxjb21tZXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihwYXltZW50Lm1ldGhvZElkLCB0aGlzLnBheXBhbGNvbW1lcmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKCdJTlNUUlVNRU5UX0RFQ0xJTkVEJyksIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3JkZXJJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50LFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkQ29uZmlybUluc3RydW1lbnQgPSAhdGhpcy5pc1RydXN0ZWRWYXVsdGluZ0Zsb3cocGF5bWVudERhdGEpO1xuXG4gICAgICAgIGlmIChzaG91bGRDb25maXJtSW5zdHJ1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudDogc2hvdWxkQ29uZmlybUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZTogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSAmJiB7XG4gICAgICAgICAgICAgICAgYXBwU3dpdGNoV2hlbkF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMuY3JlYXRlT3JkZXIoKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wYXlwYWxCdXR0b24uaGFzUmV0dXJuZWQ/LigpICYmIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvblZhbGlkYXRlPy4ob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybT8uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIG9uRXJyb3I6IFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBmaWVsZHNWYWx1ZXMgPSB0aGlzLmdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWNoZWNrb3V0Jywge1xuICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IGZpZWxkc1ZhbHVlcz8uc2hvdWxkU2F2ZUluc3RydW1lbnQgfHwgZmFsc2UsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmF1bHRpbmcgZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgZ2V0RmllbGRzVmFsdWVzKCk6IEhvc3RlZEluc3RydW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZSB8fCB7fTtcblxuICAgICAgICByZXR1cm4gdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyA9PT0gJ2Z1bmN0aW9uJyA/IGdldEZpZWxkc1ZhbHVlcygpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUcnVzdGVkVmF1bHRpbmdGbG93KHBheW1lbnREYXRhPzogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1bWVudHMgPSBzdGF0ZS5nZXRJbnN0cnVtZW50cygpO1xuICAgICAgICAgICAgY29uc3QgZmluZEluc3RydW1lbnQgPSBpbnN0cnVtZW50cz8uZmluZChcbiAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudCkgPT5cbiAgICAgICAgICAgICAgICAgICAgaXNCYXNlSW5zdHJ1bWVudChpbnN0cnVtZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50LmJpZ3BheVRva2VuID09PSBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyA9IGlzQmFzZUluc3RydW1lbnQoZmluZEluc3RydW1lbnQpXG4gICAgICAgICAgICAgICAgPyBmaW5kSW5zdHJ1bWVudC50cnVzdGVkU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgcmV0dXJuICEhdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEd1YXJkc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEoXG4gICAgICAgIHBheW1lbnREYXRhPzogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgICk6IHBheW1lbnREYXRhIGlzIFZhdWx0ZWRJbnN0cnVtZW50ICYgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhIXBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXIgUGF5IExhdGVyIE1lc3NhZ2VzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgYmFubmVyQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAncGF5bWVudCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpLnJlbmRlcihgIyR7YmFubmVyQ29udGFpbmVySWR9YCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBFcnJvciBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1Byb3ZpZGVyRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKGlzUGF5cGFsQ29tbWVyY2VQcm92aWRlckVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsUHJvdmlkZXJFcnJvciA9IGVycm9yPy5lcnJvcnM/LmZpbHRlcigoZSkgPT4gZS5wcm92aWRlcl9lcnJvcikgfHwgW107XG5cbiAgICAgICAgICAgIHJldHVybiBwYXlwYWxQcm92aWRlckVycm9yWzBdPy5wcm92aWRlcl9lcnJvcj8uY29kZSA9PT0gJ0lOU1RSVU1FTlRfREVDTElORUQnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEFwcFN3aXRjaCBlbmFibGluZyBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzQXBwU3dpdGNoRW5hYmxlZCB8fCBmYWxzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc1JlcXVlc3RFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBQcm92aWRlckVycm9yIH0gZnJvbSAnLi9pcy1wYXlwYWwtY29tbWVyY2UtcHJvdmlkZXItZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlZGlyZWN0QWN0aW9uRXJyb3IgZXh0ZW5kcyBQcm92aWRlckVycm9yIHtcbiAgICBib2R5OiB7XG4gICAgICAgIGFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkOiB7XG4gICAgICAgICAgICB0eXBlOiAnb2Zmc2l0ZV9yZWRpcmVjdCc7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJsOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUmVkaXJlY3RBY3Rpb25FcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlZGlyZWN0QWN0aW9uRXJyb3Ige1xuICAgIHJldHVybiAoXG4gICAgICAgIGlzUmVxdWVzdEVycm9yKGVycm9yKSAmJiBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkPy50eXBlID09PSAnb2Zmc2l0ZV9yZWRpcmVjdCdcbiAgICApO1xufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGVycm9ycz86IEVycm9yRWxlbWVudFtdO1xuICAgIHN0YXR1cz86IHN0cmluZztcbiAgICB0aHJlZV9kc19yZXN1bHQ/OiB7XG4gICAgICAgIGFjc191cmw6IHVua25vd247XG4gICAgICAgIHBheWVyX2F1dGhfcmVxdWVzdDogdW5rbm93bjtcbiAgICAgICAgbWVyY2hhbnRfZGF0YTogdW5rbm93bjtcbiAgICAgICAgY2FsbGJhY2tfdXJsOiB1bmtub3duO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JFbGVtZW50IHtcbiAgICBjb2RlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHByb3ZpZGVyX2Vycm9yPzoge1xuICAgICAgICBjb2RlOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlwYWxDb21tZXJjZVByb3ZpZGVyRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBQcm92aWRlckVycm9yIHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnZXJyb3JzJyBpbiBlcnJvcjtcbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBQYXlQYWxDb21tZXJjZVNkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgUGF5UGFsQ29tbWVyY2VTZGsoZ2V0U2NyaXB0TG9hZGVyKCkpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ3BheXBhbGNvbW1lcmNlJyB9XSk7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIHRyeSB0byBjYWxsIGEgbWV0aG9kIHRoYXQgaXMgb25seSBhIHN0dWIgYW5kIGhhcyBub3RcbiAqIGJlZW4gZnVsbHkgaW1wbGVtZW50ZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEltcGxlbWVudGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ05vdCBpbXBsZW1lbnRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW1wbGVtZW50ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW1wbGVtZW50ZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW1wbGVtZW50ZWRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxDb21tZXJjZVNkayxcbiAgICBQYXlQYWxNZXNzYWdlc1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UsIHBheXBhbGNvbW1lcmNlY3JlZGl0IH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE9wdGlvbnMgPSBwYXlwYWxjb21tZXJjZWNyZWRpdCB8fCBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSwgb3JkZXJJZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgYmFubmVyQ29udGFpbmVySWQsIGNvbnRhaW5lciB9ID0gcGF5cGFsT3B0aW9ucztcblxuICAgICAgICBpZiAoYmFubmVyQ29udGFpbmVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiYW5uZXJDb250YWluZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gJiZcbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbi5maW5kKCh7IGlkIH0pID0+IGlkID09PSAnY2hlY2tvdXQnKTtcblxuICAgICAgICAgICAgaWYgKCFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlck1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzLCBiYW5uZXJDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgUGF5UGFsIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciBQYXlQYWwgYnV0dG9uLlxuICAgICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBjb250YWluZXI/LnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbE9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50Lm1ldGhvZElkLCB0aGlzLm9yZGVySWQpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBpZiAoIXBheXBhbE9wdGlvbnM/LmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gcGF5cGFsT3B0aW9ucztcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUiwgcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkgJiYgZnVuZGluZ1NvdXJjZSA9PT0gcGF5cGFsU2RrLkZVTkRJTkcuUEFZTEFURVIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpICYmIGZ1bmRpbmdTb3VyY2UgPT09IHBheXBhbFNkay5GVU5ESU5HLkNSRURJVCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgUGF5UGFsICR7ZnVuZGluZ1NvdXJjZX0gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSB1c2UgUGF5UGFsIENoZWNrb3V0IGluc3RlYWQuYCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob25WYWxpZGF0ZSAmJiB0eXBlb2Ygb25WYWxpZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGUob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBpZiAoc3VibWl0Rm9ybSAmJiB0eXBlb2Ygc3VibWl0Rm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyIFBheSBMYXRlciBNZXNzYWdlc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlczogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIGJhbm5lckNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ3BheW1lbnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgcGF5cGFsTWVzc2FnZXMuTWVzc2FnZXMocGF5cGFsTWVzc2FnZXNPcHRpb25zKS5yZW5kZXIoYCMke2Jhbm5lckNvbnRhaW5lcklkfWApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZVNkaygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdCcgfSxcbl0pO1xuIiwiaW1wb3J0IHsgY3JlYXRlU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VTZGsgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2Utc2RrJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlUGF5UGFsQ29tbWVyY2VTZGsoKTogUGF5UGFsQ29tbWVyY2VTZGsge1xuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VTZGsoY3JlYXRlU2NyaXB0TG9hZGVyKCkpO1xufVxuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxCdXR0b24/OiBQYXlQYWxDb21tZXJjZUJ1dHRvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UsIHBheXBhbGNvbW1lcmNldmVubW8gfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgY29uc3QgcGF5cGFsT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNldmVubW8gfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/Lm9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gcGF5cGFsT3B0aW9ucy5jb250YWluZXIuc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnQubWV0aG9kSWQsIHRoaXMub3JkZXJJZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2V2ZW5tbzogUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIG9uVmFsaWRhdGUsIHN1Ym1pdEZvcm0gfSA9IHBheXBhbGNvbW1lcmNldmVubW87XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2V2ZW5tb2NoZWNrb3V0JyksXG4gICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihcbiAgICAgICAgICAgICAgICBgUGF5UGFsIFZlbm1vIGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgcmVnaW9uLiBQbGVhc2UgdXNlIFBheVBhbCBDaGVja291dCBpbnN0ZWFkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHsgc3R5bGVzOiB7IGJhY2tncm91bmRDb2xvcjogJ2JsYWNrJyB9IH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNldmVubW8nIH0sXG5dKTtcbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSxcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDYXJ0LFxuICAgIENhcnRTb3VyY2UsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTaGlwcGluZ09wdGlvbixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxSZXF1ZXN0U2VuZGVyIGZyb20gJy4vcGF5cGFsLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCBQYXlQYWxTZGtTY3JpcHRMb2FkZXIgZnJvbSAnLi9wYXlwYWwtc2RrLXNjcmlwdC1sb2FkZXInO1xuaW1wb3J0IHtcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2UsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxuICAgIFBheVBhbFNESyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxuICAgIFN0eWxlQnV0dG9uTGFiZWwsXG4gICAgU3R5bGVCdXR0b25TaGFwZSxcbn0gZnJvbSAnLi9wYXlwYWwtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgcGF5cGFsU2RrPzogUGF5UGFsU0RLO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFJlcXVlc3RTZW5kZXI6IFBheVBhbFJlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsU2RrTG9hZGVyOiBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWxTREsgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFBheVBhbFNkayhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcHJvdmlkZWRDdXJyZW5jeUNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHByb3ZpZGVkQ3VycmVuY3lDb2RlIHx8IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMucGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxTZGtMb2FkZXIuZ2V0UGF5UGFsU0RLKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICBmb3JjZUxvYWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIGdldFBheVBhbFNka09yVGhyb3coKTogUGF5UGFsU0RLIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbFNkaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxTZGs7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXkgTm93IGNhcnQgY3JlYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPENhcnQ+IHtcbiAgICAgICAgY29uc3QgY2FydFJlcXVlc3RCb2R5ID0gYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk7XG5cbiAgICAgICAgaWYgKCFjYXJ0UmVxdWVzdEJvZHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnQoY2FydFJlcXVlc3RCb2R5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBPcmRlciBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcihwcm92aWRlcklkLCB7XG4gICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5PzogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkLCBzZXR1cFRva2VuIH0gPSBhd2FpdCB0aGlzLnBheXBhbFJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIocHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7IG9yZGVySWQsIC4uLihzZXR1cFRva2VuID8geyBzZXR1cFRva2VuIH0gOiB7fSkgfTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcihwcm92aWRlcklkOiBzdHJpbmcsIG1ldGhvZElkPzogc3RyaW5nLCBvcmRlcklkPzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxSZXF1ZXN0U2VuZGVyLnVwZGF0ZU9yZGVyKHByb3ZpZGVySWQsIHtcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM6IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBjYXJ0SWQ6IGNhcnQuaWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbjogY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbixcbiAgICAgICAgICAgICAgICAuLi4obWV0aG9kSWQgPyB7IG1ldGhvZElkIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgLi4uKG9yZGVySWQgPyB7IG9yZGVySWQgfSA6IHt9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKG1ldGhvZElkOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXM+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCB0aGlzLnBheXBhbFJlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMobWV0aG9kSWQsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBzdWJtaXR0aW5nIGFuZCB0b2tlbml6aW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHRva2VuaXplUGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghb3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAuLi4oY2FydC5zb3VyY2UgPT09IENhcnRTb3VyY2UuQnV5Tm93ICYmIHsgY2FydF9pZDogY2FydC5pZCB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3VibWl0UGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgLi4uKGdhdGV3YXlJZCA/IHsgZ2F0ZXdheUlkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2hpcHBpbmcgb3B0aW9ucyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkPzogc3RyaW5nKTogU2hpcHBpbmdPcHRpb24ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICBjb25zdCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG5cbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZFxuICAgICAgICAgICAgPyBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZClcbiAgICAgICAgICAgIDogYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbklkID0gY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZDtcblxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb24uaWQgPT09IHNoaXBwaW5nT3B0aW9uSWQ7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCA9XG4gICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIHx8IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gfHwgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuXG4gICAgICAgIGlmICghc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBvcmRlciBjYW4ndCBiZSBzaGlwcGVkIHRvIHRoaXMgYWRkcmVzc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGlwcGluZ09wdGlvblRvU2VsZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWRkcmVzcyB0cmFuc2Zvcm1pbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcyhhZGRyZXNzPzogUGFydGlhbDxCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5Pik6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhZGRyZXNzPy5maXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogYWRkcmVzcz8ubGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBlbWFpbDogYWRkcmVzcz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICBwaG9uZTogYWRkcmVzcz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzPy5hZGRyZXNzMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyh7IHBheWVyIH06IFBheVBhbE9yZGVyRGV0YWlscyk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGF5ZXIubmFtZS5naXZlbl9uYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBheWVyLm5hbWUuc3VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBheWVyLmFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogcGF5ZXIuYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICAgICAgcGhvbmU6IHBheWVyLnBob25lPy5waG9uZV9udW1iZXI/Lm5hdGlvbmFsX251bWJlcixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgb3JkZXJEZXRhaWxzOiBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIGNvbnN0IHsgcGF5ZXIsIHB1cmNoYXNlX3VuaXRzIH0gPSBvcmRlckRldGFpbHM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxfbmFtZSB9LFxuICAgICAgICB9ID0gcHVyY2hhc2VfdW5pdHNbMF0uc2hpcHBpbmc7XG5cbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgLi4ubGFzdE5hbWVdID0gZnVsbF9uYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUuam9pbignICcpLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9ucyBzdHlsZSBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlOiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMgPSB7fSk6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IHsgY29sb3IsIGhlaWdodCwgbGFiZWwsIHNoYXBlIH0gPSBzdHlsZTtcblxuICAgICAgICBjb25zdCB2YWxpZFN0eWxlcyA9IHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvciAmJiBTdHlsZUJ1dHRvbkNvbG9yW2NvbG9yXSA/IGNvbG9yIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmdldFZhbGlkSGVpZ2h0KGhlaWdodCksXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgJiYgU3R5bGVCdXR0b25MYWJlbFtsYWJlbF0gPyBsYWJlbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNoYXBlOiBzaGFwZSAmJiBTdHlsZUJ1dHRvblNoYXBlW3NoYXBlXSA/IHNoYXBlIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvbWl0QnkodmFsaWRTdHlsZXMsIGlzTmlsKTtcbiAgICB9XG5cbiAgICBnZXRWYWxpZEhlaWdodChoZWlnaHQ/OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gNDA7XG4gICAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDI1O1xuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSA1NTtcblxuICAgICAgICBpZiAoIWhlaWdodCB8fCB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA8IG1pbkhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlscyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudElkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEZvciBub3cgdGhpcyBpcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiwgZnVydGhlciByZW1vdmVFbGVtZW50IG1ldGhvZCB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzRGF0YSxcbiAgICBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2UsXG59IGZyb20gJy4vcGF5cGFsLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsUmVxdWVzdFNlbmRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlckRhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9wYXltZW50LyR7cHJvdmlkZXJJZH1gO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucG9zdDxQYXlQYWxPcmRlckRhdGE+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHttZXRob2RJZH1gO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0PFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXNEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHttZXRob2RJZH1gO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLmdldDxQYXlQYWxPcmRlclN0YXR1c0RhdGE+KHVybCwge1xuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgeyBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIgZnJvbSAnLi9jcmVhdGUtcGF5cGFsLXNkay1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCBQYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi9wYXlwYWwtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgUGF5cGFsUmVxdWVzdFNlbmRlciBmcm9tICcuL3BheXBhbC1yZXF1ZXN0LXNlbmRlcic7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZSA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IFBheXBhbEludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgUGF5cGFsUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZTtcbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSByZXF1ZXN0IGZhaWxzIHRvIGNvbXBsZXRlIHdpdGhpbiBpdHMgcmVxdWlyZWQgdGltZWZyYW1lXG4gKiBiZWNhdXNlIG9mIGEgbmV0d29yayBpc3N1ZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZW91dEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlIHJlcXVlc3QgaGFzIHRpbWVkIG91dCBvciBhYm9ydGVkLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdUaW1lb3V0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAndGltZW91dCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBUaW1lb3V0RXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBQYXlQYWxBcG1TZGssXG4gICAgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcbmltcG9ydCB7IGlzRXhwZXJpbWVudEVuYWJsZWQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3V0aWxpdHknO1xuXG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcbiAgICBwcml2YXRlIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuICAgIHByaXZhdGUgaXNPcmRlckFwcHJvdmVkUHJvY2Vzc2luZyA9IGZhbHNlO1xuICAgIHByaXZhdGUgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM/OiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka1NjcmlwdExvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZSwgLy8gRklYTUU6IHRoaXMgb3B0aW9uIGlzIGRlcHJlY2F0ZWRcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLFxuICAgICAgICB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgcGF5cGFsT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzIHx8IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgPSBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBvcmRlcklkLCBzaG91bGRSZW5kZXJGaWVsZHMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG5cbiAgICAgICAgdGhpcy5pc09yZGVyQXBwcm92ZWRQcm9jZXNzaW5nID0gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICAgICAgICAgIGZlYXR1cmVzLFxuICAgICAgICAgICAgJ1BBWVBBTC01NDMxLm9yZGVyX2FwcHJvdmVkX3Byb2Nlc3NpbmcnLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEFwbXMgPSBhd2FpdCB0aGlzLnBheXBhbFNka1NjcmlwdExvYWRlci5nZXRQYXlQYWxBcG1zU2RrKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBwYXlwYWxPcHRpb25zLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBnYXRld2F5SWQsIHBheXBhbE9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChzaG91bGRSZW5kZXJGaWVsZHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmllbGRzKG1ldGhvZElkLCBwYXlwYWxPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNPcmRlckFwcHJvdmVkUHJvY2Vzc2luZyAmJiBtZXRob2RJZCA9PT0gJ2lkZWFsJykge1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShtZXRob2RJZCwgcmVzb2x2ZSwgcmVqZWN0LCBnYXRld2F5SWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkKSB8fFxuICAgICAgICAgICAgKG1ldGhvZElkID09PSBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5JREVBTCAmJlxuICAgICAgICAgICAgICAgICF0aGlzLmlzT3JkZXJBcHByb3ZlZFByb2Nlc3NpbmcpXG4gICAgICAgICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoIXRoaXMuaXNPcmRlckFwcHJvdmVkUHJvY2Vzc2luZykge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkID8/ICdwYXlwYWxjb21tZXJjZScsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBpc09yZGVyQXBwcm92ZWQgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuQXBwcm92ZWQ7XG4gICAgICAgICAgICBjb25zdCBpc1BvbGxpbmdFcnJvciA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nRXJyb3I7XG5cbiAgICAgICAgICAgIGlmIChpc09yZGVyQXBwcm92ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlUHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNQb2xsaW5nRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzT3JkZXJBcHByb3ZlZCAmJiB0aGlzLnBvbGxpbmdUaW1lciA8IHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlaW5pdGlhbGl6ZVN0cmF0ZWd5KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM6IHRoaXMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgVGltZW91dEVycm9yKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ1RpbWVyID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWluaXRpYWxpemVTdHJhdGVneShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWluaXRpYWxpemUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzIHx8IHt9O1xuXG4gICAgICAgIGlmICghdGhpcy5pc09yZGVyQXBwcm92ZWRQcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IGJ1dHRvblN0eWxlIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIHN1Ym1pdEZvcm0gfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShidXR0b25TdHlsZSksXG4gICAgICAgICAgICBvbkluaXQ6IChfLCBhY3Rpb25zKSA9PiBwYXlwYWxPcHRpb25zLm9uSW5pdEJ1dHRvbihhY3Rpb25zKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLm9uQ3JlYXRlT3JkZXIobWV0aG9kSWQsIGdhdGV3YXlJZCwgcGF5cGFsT3B0aW9ucyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVGYWlsdXJlKGVycm9yLCBvbkVycm9yKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoXywgYWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICBwYXlwYWxPcHRpb25zLm9uVmFsaWRhdGUoYWN0aW9ucy5yZXNvbHZlLCBhY3Rpb25zLnJlamVjdCksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxBbXBzU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uQ3JlYXRlT3JkZXIoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcHRpb25zOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHsgb25WYWxpZGF0ZSB9ID0gcGF5cGFsT3B0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgbm9vcCk7XG5cbiAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNjaGVja291dCcsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkKSAmJlxuICAgICAgICAgICAgKChtZXRob2RJZCA9PT0gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuSURFQUwgJiZcbiAgICAgICAgICAgICAgICB0aGlzLmlzT3JkZXJBcHByb3ZlZFByb2Nlc3NpbmcpIHx8XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQgPT09IE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLk9YWE8pXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXIgPSB7IHVzZVN0b3JlQ3JlZGl0OiBmYWxzZSB9O1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKG1ldGhvZElkID09PSBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5JREVBTCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmNPcmRlcklkID0gc3RhdGUuZ2V0T3JkZXIoKT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcycsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBiY09yZGVySWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBvcmRlcklkLCBnYXRld2F5SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZhaWx1cmUoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJGaWVsZHMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwgfSA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXBtRmllbGRzQ29udGFpbmVyLCBhcG1GaWVsZHNTdHlsZXMgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFhcG1GaWVsZHNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wiIGFyZ3VtZW50IHNob3VsZCBjb250YWluIFwiYXBtRmllbGRzQ29udGFpbmVyXCIuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwbUZpZWxkc0NvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKGZpZWxkQ29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGRzT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IGFwbUZpZWxkc1N0eWxlcyB8fCB7fSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVtYWlsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFBheW1lbnRGaWVsZHMgPSBwYXlwYWxBbXBzU2RrLlBheW1lbnRGaWVsZHMoZmllbGRzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsUGF5bWVudEZpZWxkcy5yZW5kZXIoYXBtRmllbGRzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZC50b1VwcGVyQ2FzZSgpIGluIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbEFwbXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBGZWF0dXJlcyB7XG4gICAgW2ZlYXR1cmVOYW1lOiBzdHJpbmddOiBib29sZWFuIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgIGZlYXR1cmVzOiBGZWF0dXJlcyxcbiAgICBleHBlcmltZW50TmFtZTogc3RyaW5nLFxuICAgIGZhbGxiYWNrVmFsdWUgPSB0cnVlLFxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZlYXR1cmVzW2V4cGVyaW1lbnROYW1lXSA/PyBmYWxsYmFja1ZhbHVlO1xufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZSxcbiAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIoKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iLCIvLyBjb3BpZWQgZnJvbSBwYWNrYWdlcy9jb3JlL3NyYy9ob3N0ZWQtZm9ybS9ob3N0ZWQtZmllbGQtdHlwZS50c1xuXG5lbnVtIEhvc3RlZEZpZWxkVHlwZSB7XG4gICAgQ2FyZENvZGUgPSAnY2FyZENvZGUnLFxuICAgIENhcmRDb2RlVmVyaWZpY2F0aW9uID0gJ2NhcmRDb2RlVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5ID0gJ2NhcmRFeHBpcnknLFxuICAgIENhcmROYW1lID0gJ2NhcmROYW1lJyxcbiAgICBDYXJkTnVtYmVyID0gJ2NhcmROdW1iZXInLFxuICAgIENhcmROdW1iZXJWZXJpZmljYXRpb24gPSAnY2FyZE51bWJlclZlcmlmaWNhdGlvbicsXG4gICAgQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiA9ICdjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgSG9zdGVkRmllbGRUeXBlO1xuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRGb3JtRmllbGRzKFxuICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4pOiBmaWVsZHMgaXMgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXIgaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTmFtZSBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnkgaW4gZmllbGRzXG4gICAgKTtcbn1cbiIsImltcG9ydCBIb3N0ZWRGaWVsZFR5cGUgZnJvbSAnLi9ob3N0ZWQtZmllbGQtdHlwZSc7XG5pbXBvcnQgeyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIH0gZnJvbSAnLi9ob3N0ZWQtZm9ybS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbiBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50SW52YWxpZEZvcm1FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkZXRhaWxzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGNvbnRhaW5zIGludmFsaWQgZGF0YS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEludmFsaWRGb3JtRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9pbnZhbGlkX2Zvcm0nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZENhcmRGaWVsZE9wdGlvbnMsXG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBIb3N0ZWRGaWVsZEJsdXJFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgIEhvc3RlZEZpZWxkVHlwZSxcbiAgICBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhLFxuICAgIEhvc3RlZEZvcm1PcHRpb25zLFxuICAgIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyxcbiAgICBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyxcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheVBhbFNka1NjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQge1xuICAgIExpYWJpbGl0eVNoaWZ0RW51bSxcbiAgICBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnLFxuICAgIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGV4ZWN1dGlvblBheW1lbnREYXRhPzogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ107XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRGb3JtPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgY2FyZEZpZWxkcz86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcztcbiAgICBwcml2YXRlIGN2dkZpZWxkPzogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgcHJpdmF0ZSBleHBpcnlGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHByaXZhdGUgbnVtYmVyRmllbGQ/OiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBwcml2YXRlIG5hbWVGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuXG4gICAgcHJpdmF0ZSBob3N0ZWRGb3JtT3B0aW9ucz86IEhvc3RlZEZvcm1PcHRpb25zO1xuICAgIHByaXZhdGUgcmV0dXJuZWRPcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcmV0dXJuZWRWYXVsdGVkVG9rZW4/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka1NjcmlwdExvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lVXRpbHM6IFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMsIHBheXBhbGNvbW1lcmNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgeyBmb3JtLCBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciwgb25Mb2FkQ29tcGxldGUgfSA9XG4gICAgICAgICAgICBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyA9IGZvcm07XG5cbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRGb3JtID0gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcyk7XG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0gPVxuICAgICAgICAgICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpICYmICF0aGlzLmhhc1VuZGVmaW5lZFZhbHVlcygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIHVuZGVmaW5lZCwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25Mb2FkQ29tcGxldGU/LigpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VibWl0SG9zdGVkRm9ybSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBjb25kaXRpb24gaXMgdHJpZ2dlcmVkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50IGFuZCBzaGlwcGluZyBhZGRyZXNzIGlzIHRydXN0ZVxuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJtaXRQYXltZW50UGF5bG9hZCA9IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRPcmRlcklkLFxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbixcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChzdWJtaXRQYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5leHBpcnlGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQ/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU3VibWl0IFBheW1lbnQgUGF5bG9hZCBwcmVwYXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKiBgdmF1bHRlZFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh3aXRoIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqIGBzZXR1cFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh1bnRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcylcbiAgICAgKiBgb3JkZXJJZGAgaXMgdXNlZCBpbiBldmVyeSBjYXNlIChiYXNpYyBjYXJkIHBheW1lbnQsIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqL1xuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgICAgIG9yZGVySWQ/OiBzdHJpbmcsXG4gICAgICAgIG5vbmNlPzogc3RyaW5nLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICBjb25zdCBpbnN0cnVtZW50SWQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgYmlncGF5X3Rva2VuID0gb21pdEJ5KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9ub25jZTogbm9uY2UsXG4gICAgICAgICAgICAgICAgdG9rZW46IGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG5vbmNlIHx8IGluc3RydW1lbnRJZCA/IHsgYmlncGF5X3Rva2VuIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihvcmRlcklkID8geyBjYXJkX3dpdGhfb3JkZXI6IHsgb3JkZXJfaWQ6IG9yZGVySWQgfSB9IDoge30pLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2FyZCBmaWVsZHMgaW5pdGlhbGl6ZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRmllbGRzKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yPzogUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3InXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBmaWVsZHMsIHN0eWxlcyB9ID0gZm9ybU9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ2FsbGJhY2sgPSB0aGlzLmdldEV4ZWN1dGVDYWxsYmFjayhmaWVsZHMpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb25maWc6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldElucHV0U3R5bGVzKHN0eWxlcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7XG4gICAgICAgICAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHsgb3JkZXJJRCwgdmF1bHRTZXR1cFRva2VuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLm9uQ2hhbmdlSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6IChldmVudCkgPT4gdGhpcy5vbkZvY3VzSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB0aGlzLm9uQmx1ckhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdDogKGV2ZW50KSA9PiB0aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZXhlY3V0ZUNhbGxiYWNrLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHBheXBhbFNkay5DYXJkRmllbGRzKGNhcmRGaWVsZHNDb25maWcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMoZmllbGRzKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgZXhlY3V0ZSBjYWxsYmFjayBtZXRob2RcbiAgICAgKiBEZXBlbmRzIG9uIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZCBvciBub3Qgd2Ugc2hvdWxkIHBhc3MgdG8gUFBcbiAgICAgKiBgY3JlYXRlVmF1bHRTZXR1cFRva2VuYCBjYWxsYmFjayBpZiBhZGRyZXNzIGlzIHVudHJ1c3RlZCBvclxuICAgICAqIGBjcmVhdGVPcmRlcmAgaWYgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRm9ybSA9IGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcyk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmF1bHRlZEZvcm0gPyB0aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkgOiB0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXR1cFRva2VuIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBUb2tlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwVG9rZW47XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3JkZXJDYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBvbkFwcHJvdmUgbWV0aG9kXG4gICAgICogV2hlbiBzdWJtaXR0aW5nIGEgZm9ybSB3aXRoIGEgYHN1Ym1pdEhvc3RlZEZvcm1gIG1ldGhvZCBpZiB0aGVyZSBpcyBubyBlcnJvclxuICAgICAqIHRoZW4gb25BcHByb3ZlIGNhbGxiYWNrIGlzIHRyaWdnZXJlZCBhbmQgZGVwZW5kcyBvbiB0aGUgZmxvd1xuICAgICAqIHdlIHdpbGwgcmVjZWl2ZSBhbiBgb3JkZXJJRGAgaWYgaXQncyBiYXNpYyBwYXlpbmcgYW5kIGB2YXVsdFNldHVwVG9rZW5gIGlmIHdlIGFyZSBwYXlpbmdcbiAgICAgKiB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCBhbmQgc2hpcHBpbmcgYWRkcmVzcyBpcyB1bnRydXN0ZWRcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZSh7IG9yZGVySUQsIHZhdWx0U2V0dXBUb2tlbiB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSB7XG4gICAgICAgIGlmIChvcmRlcklEKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmF1bHRTZXR1cFRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkVmF1bHRlZFRva2VuID0gdmF1bHRTZXR1cFRva2VuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXJpbmcgQ2FyZCBGaWVsZHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGUuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5Py5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnkuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTmFtZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gY2FyZEZpZWxkcy5OYW1lRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROYW1lLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlcj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXIuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlclZhdWx0ZWRGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGVWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnlWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5udW1iZXJGaWVsZCA9IGNhcmRGaWVsZHMuTnVtYmVyRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5zdHJ1bWVudCBwYXJhbXMgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEluc3RydW1lbnRQYXJhbXMoKTogSG9zdGVkSW5zdHJ1bWVudCB8IFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVmF1bHRlZEluc3RydW1lbnQodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCh7XG4gICAgICAgIGVtaXR0ZWRCeSxcbiAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6XG4gICAgICAgIHwgSG9zdGVkRmllbGRCbHVyRXZlbnREYXRhXG4gICAgICAgIHwgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRUeXBlOiB0aGlzLm1hcEZpZWxkVHlwZShlbWl0dGVkQnkpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRm9ybSBzdWJtaXQgbWV0aG9kXG4gICAgICogVHJpZ2dlcnMgYSBmb3JtIHN1Ym1pdFxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXRIb3N0ZWRGb3JtKCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN1Ym1pdENvbmZpZyA9IHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgY29tcGFueTogYmlsbGluZ0FkZHJlc3MuY29tcGFueSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTE6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMjogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMTogYmlsbGluZ0FkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgICAgICBhZG1pbkFyZWEyOiBiaWxsaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGJpbGxpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGJpbGxpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdChzdWJtaXRDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICdGYWlsZWQgYXV0aGVudGljYXRpb24uIFBsZWFzZSB0cnkgdG8gYXV0aG9yaXplIGFnYWluLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBWYWxpZGF0aW9uIGFuZCBlcnJvcnNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkc1N0YXRlID0gYXdhaXQgY2FyZEZpZWxkcy5nZXRTdGF0ZSgpLnRoZW4oKGRhdGEpID0+IGRhdGEpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRGF0YSA9IHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGNhcmRGaWVsZHNTdGF0ZSk7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25EYXRhLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaG9zdGVkRm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih2YWxpZGF0aW9uRGF0YSk7XG5cbiAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKHRoaXMubWFwVmFsaWRhdGlvbkVycm9ycyh2YWxpZGF0aW9uRGF0YS5lcnJvcnMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbGlkaXR5RGF0YSh7XG4gICAgICAgIGZpZWxkcyxcbiAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEge1xuICAgICAgICBjb25zdCB1cGRhdGVkRmllbGRzID0geyAuLi5maWVsZHMgfTtcblxuICAgICAgICBkZWxldGUgdXBkYXRlZEZpZWxkcy5jYXJkTmFtZUZpZWxkO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkc0tleXMgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmllbGRzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlWydmaWVsZHMnXVxuICAgICAgICA+O1xuXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBmaWVsZHNLZXlzLmV2ZXJ5KChrZXkpID0+IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZCk7XG5cbiAgICAgICAgY29uc3QgZXJyb3JzID0gZmllbGRzS2V5cy5yZWR1Y2UoKGZpZWxkc0Vycm9ycywga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSB0aGlzLm1hcEZpZWxkVHlwZShrZXkpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkc0Vycm9ycyxcbiAgICAgICAgICAgICAgICBbZmllbGRUeXBlXTogdXBkYXRlZEZpZWxkc1trZXldPy5pc1ZhbGlkXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogW3RoaXMuZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlKV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZCwgZXJyb3JzIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShmaWVsZFR5cGU6IHN0cmluZyk6IEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEge1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGU6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgY29kZScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfY29kZScsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlcjpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIG51bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfbnVtYmVyJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5OlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9leHBpcnknLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmaWVsZCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBWYWxpZGF0aW9uRXJyb3JzKFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwID0ge30sXG4gICAgKTogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMgPSB7fTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yc0tleXMgPSBPYmplY3Qua2V5cyh2YWxpZGF0aW9uRXJyb3JzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGFNYXBcbiAgICAgICAgPjtcblxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvbkVycm9yc1trZXldPy5bMF0/Lm1lc3NhZ2UgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZpZWxkcyBtYXBwZXJzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIG1hcEZpZWxkVHlwZSh0eXBlOiBzdHJpbmcpOiBIb3N0ZWRGaWVsZFR5cGUge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE5hbWU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmROdW1iZXJGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkRXhwaXJ5RmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnZXhwaXJ5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEN2dkZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2N2dic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmllbGQgdHlwZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlsc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRDYXJkRmllbGRzT3JUaHJvdygpOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMge1xuICAgICAgICBpZiAoIXRoaXMuY2FyZEZpZWxkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRGaWVsZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnB1dFN0eWxlcyhcbiAgICAgICAgc3R5bGVzPzogSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgKTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zWydzdHlsZXMnXSB7XG4gICAgICAgIGNvbnN0IGNvbW1vblN0eWxlcyA9IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRTaXplIHx8ICcxcmVtJyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6XG4gICAgICAgICAgICAgICAgc3R5bGVzPy5kZWZhdWx0Py5mb250RmFtaWx5IHx8ICdNb250c2VycmF0LCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250LXdlaWdodCc6IHN0eWxlcz8uZGVmYXVsdD8uZm9udFdlaWdodCB8fCAnNDAwJyxcbiAgICAgICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICc5cHggMTNweCcsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJyMzMzMzMzMnIH07XG4gICAgICAgIGNvbnN0IGVycm9yU3R5bGVzID0geyAuLi5jb21tb25TdHlsZXMsIGNvbG9yOiAncmVkJyB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dDogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgICcuaW52YWxpZCc6IGVycm9yU3R5bGVzLFxuICAgICAgICAgICAgJy52YWxpZCc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnOmZvY3VzJzogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0eWxpemVJbnB1dENvbnRhaW5lcnMoXG4gICAgICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMoZmllbGRzIHx8IHt9KS5mb3JFYWNoKChpZDogSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkPy5jb250YWluZXJJZCB8fCAnJ31gKTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9ICctNXB4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNVbmRlZmluZWRWYWx1ZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3RlZEZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLmhvc3RlZEZvcm1PcHRpb25zLmZpZWxkcykuc29tZShcbiAgICAgICAgICAgICAgICAodmFsdWUpID0+IHZhbHVlID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBJbnB1dCBldmVudHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNoYW5nZUhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZvY3VzSGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkZvY3VzPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25CbHVySGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkJsdXI/Lih0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbklucHV0U3VibWl0UmVxdWVzdChcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkVudGVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIENvbW1lcmNlIEFjY2VsZXJhdGVkIGNoZWNrb3V0IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIFBQQ1AgQVhPIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIHNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICAgICAgICAgIHBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQgJiZcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8uaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZCAmJlxuICAgICAgICAgICAgIXBheXBhbENvbW1lcmNlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBwYXJ0IHdoZW4gUFBDUCBBWE8gQS9CIHRlc3Rpbmcgd2lsbCBiZSBmaW5pc2hlZFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGE/LmNvbm5lY3RDbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5UGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLnBheXBhbFNka1NjcmlwdExvYWRlci5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICAhIWluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF86IHVua25vd24pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCB0aHJvd2luZyBhbnkgZXJyb3IgZnJvbSB0aGlzIGZsb3cgdG8gZG8gbm8gYnJha2UgZGVmYXVsdCBmbG93XG4gICAgICAgICAgICAvLyBUaGlzIGZsb3cgaXMgb3B0aW9uYWxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5cGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5cGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBUaW1lb3V0RXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBCaXJ0aERhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCB7XG4gICAgUGF5cGFsQ29tbWVyY2VSYXRlUGF5LFxuICAgIFdpdGhQYXlQYWxDb21tZXJjZVJhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXktaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgZ3VpZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbGNvbW1lcmNlcmF0ZXBheT86IFBheXBhbENvbW1lcmNlUmF0ZVBheTtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlcmF0ZXBheSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VyYXRlcGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VyYXRlcGF5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIsIGNvbnRhaW5lciwgbG9hZGluZ0NvbnRhaW5lcklkIH0gPSBwYXlwYWxjb21tZXJjZXJhdGVwYXk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxlZ2FsVGV4dENvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbG9hZGluZ0NvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubG9hZGluZ0NvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gbG9hZGluZ0NvbnRhaW5lcklkO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBtZXJjaGFudElkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBpZiAoIW1lcmNoYW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIG1lcmNoYW50SWQgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgPSBwYXlwYWxjb21tZXJjZXJhdGVwYXk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUZyYXVkTmV0U2NyaXB0KG1lcmNoYW50SWQsIG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHRoaXMubG9hZEZyYXVkbmV0Q29uZmlnKCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJMZWdhbFRleHQobGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0RmllbGRzVmFsdWVzIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnZXRGaWVsZHNWYWx1ZXMgfHwgdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdldEZpZWxkc1ZhbHVlc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIHsgbWV0YWRhdGFJZDogdGhpcy5ndWlkIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB7IHJhdGVwYXlCaXJ0aERhdGUsIHJhdGVwYXlQaG9uZU51bWJlciwgcmF0ZXBheVBob25lQ291bnRyeUNvZGUgfSA9XG4gICAgICAgICAgICAgICAgZ2V0RmllbGRzVmFsdWVzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZF9pZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmF0ZV9wYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpcnRoX2RhdGU6IHRoaXMubm9ybWFsaXplRGF0ZShyYXRlcGF5QmlydGhEYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiByYXRlcGF5UGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeV9jb2RlOiByYXRlcGF5UGhvbmVDb3VudHJ5Q29kZS5zcGxpdCgnKycpWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50LmdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiByZWplY3QoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGxlZ2FsVGV4dENvbnRhaW5lciB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgfHwge307XG4gICAgICAgIGNvbnN0IGZyYXVkTmV0U2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJmcmF1ZG5ldFNjcmlwdFwiXScpWzBdO1xuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRDb25maWdcIl0nKVswXTtcblxuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICBmcmF1ZE5ldFNjcmlwdC5yZW1vdmUoKTtcbiAgICAgICAgZnJhdWROZXRDb25maWcucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplRGF0ZShkYXRlOiBCaXJ0aERhdGUpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldERhdGUoKSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1vbnRoID0gdGhpcy5mb3JtYXREYXRlKGRhdGUuZ2V0TW9udGgoKSArIDEpO1xuXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7Zm9ybWF0dGVkTW9udGh9LSR7Zm9ybWF0dGVkRGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7ZGF0ZSA8IDEwID8gMCA6ICcnfSR7ZGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDogc3RyaW5nLCBjb250YWluZXI6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXJJZCA9IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVySWQgPSBjb250YWluZXIuc3BsaXQoJyMnKVsxXTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uQ29udGFpbmVySWQpO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJQYXJlbnQgPSBidXR0b25Db250YWluZXI/LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgbGVnYWxUZXh0Q29udGFpbmVySWQpO1xuICAgICAgICBidXR0b25Db250YWluZXJQYXJlbnQ/LnByZXBlbmQobGVnYWxUZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcmF0ZVBheUJ1dHRvbiA9IHBheXBhbFNkay5MZWdhbCh7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuTGVnYWwuRlVORElORy5QQVlfVVBPTl9JTlZPSUNFLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAobGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgcmF0ZVBheUJ1dHRvbi5yZW5kZXIoYCMke2xlZ2FsVGV4dENvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50XCIgYXJndW1lbnQgaXMgbm90IGZvdW5kLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5IHx8IHt9O1xuXG4gICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkOiBzdHJpbmcsIG1ldGhvZElkOiBzdHJpbmcsIGdhdGV3YXlJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgY29uc3QgeyB0ZXN0TW9kZSB9ID0gcGF5bWVudE1ldGhvZC5jb25maWc7XG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdmbmNscycsICdmbnBhcmFtcy1kZWRlN2NjNS0xNWZkLTRjNzUtYTlmNC0zNmM0MzBlZTNhOTknKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRTY3JpcHQnKTtcbiAgICAgICAgdGhpcy5ndWlkID0gdGhpcy5nZW5lcmF0ZUdVSUQoKTtcblxuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IHtcbiAgICAgICAgICAgIGY6IHRoaXMuZ3VpZCxcbiAgICAgICAgICAgIHM6IGAke21lcmNoYW50SWR9X2NoZWNrb3V0LXBhZ2VgLFxuICAgICAgICAgICAgc2FuZGJveDogdGVzdE1vZGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShmcmF1ZE5ldENvbmZpZyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUdVSUQoKSB7XG4gICAgICAgIGxldCBndWlkID0gJyc7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCk7XG5cbiAgICAgICAgICAgIGd1aWQgKz0gY2hhcmFjdGVyc1tyYW5kb21JbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3VpZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRGcmF1ZG5ldENvbmZpZygpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsICdmcmF1ZG5ldENvbmZpZycpO1xuICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vYy5wYXlwYWwuY29tL2RhL3IvZmIuanMnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWluaXRpYWxpemVTdHJhdGVneShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWluaXRpYWxpemUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VNZXRhZGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaXNPcmRlckFwcHJvdmVkID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdTdG9wO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ0Vycm9yO1xuXG4gICAgICAgICAgICBpZiAoaXNPcmRlckFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG9sbGluZ0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc09yZGVyQXBwcm92ZWQgJiYgdGhpcy5wb2xsaW5nVGltZXIgPCB0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3RQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlcmF0ZXBheTogdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgVGltZW91dEVycm9yKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogeyAuLi5MT0FESU5HX0lORElDQVRPUl9TVFlMRVMsIHBvc2l0aW9uOiAnZml4ZWQnIH0sXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGdhdGV3YXk6ICdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcycsIGlkOiAncmF0ZXBheScgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vLyBUT0RPOiB1cGRhdGUgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHdpdGggUGF5UGFsRmFzdGxhbmVDdXN0b21lclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKFxuICAgIGN1c3RvbWVyPzogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBQYXlQYWxDb25uZWN0Q3VzdG9tZXIge1xuICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdhdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lciB8fCAnYWRkcmVzc2VzJyBpbiBjdXN0b21lciB8fCAnaW5zdHJ1bWVudHMnIGluIGN1c3RvbWVyXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGdldEZhc3RsYW5lU3R5bGVzLFxuICAgIGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICBpc1BheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzLFxuICAgIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgUGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZCxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxGYXN0bGFuZVV0aWxzLFxuICAgIFBheVBhbEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IExpYWJpbGl0eVNoaWZ0RW51bSB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBwYXlwYWxDb21wb25lbnRNZXRob2RzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcztcbiAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lU2RrPzogUGF5UGFsRmFzdGxhbmVTZGs7XG4gICAgcHJpdmF0ZSB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsY29tbWVyY2VmYXN0bGFuZT86IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgbWV0aG9kSWQ/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcjogUGF5UGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka1NjcmlwdExvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lVXRpbHM6IFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5tZXRob2RJZCA9IG1ldGhvZElkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZSA9IHBheXBhbGNvbW1lcmNlZmFzdGxhbmU7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWZhc3RsYW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXQgfHwgdHlwZW9mIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25Jbml0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZSB8fFxuICAgICAgICAgICAgdHlwZW9mIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25DaGFuZ2UgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LnRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMucGF5cGFsU2RrU2NyaXB0TG9hZGVyLmdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIGNhcnQuaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTdHlsaW5nID0gaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkXG4gICAgICAgICAgICA/IHBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8uZmFzdGxhbmVTdHlsZXNcbiAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgY29uc3QgZmFzdGxhbmVTdHlsZXMgPSBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgICAgIHBheXBhbEZhc3RsYW5lU3R5bGluZyxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICEhaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGZhc3RsYW5lU3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpO1xuXG4gICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25Jbml0KChjb250YWluZXI6IHN0cmluZykgPT5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudChjb250YWluZXIpLFxuICAgICAgICApO1xuICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlKCgpID0+IHRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShtZXRob2RJZCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSwgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRmxvdyA9IHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGlzVmF1bHRlZEZsb3dcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4oXG4gICAgICAgICAgICAgICAgcGF5bWVudFBheWxvYWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IoZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UuYm9keS5uYW1lID09PSAnSU5WQUxJRF9SRVFVRVNUJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3RFcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdwYXltZW50LmVycm9ycy5pbnZhbGlkX3JlcXVlc3RfZXJyb3InLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGludmFsaWRSZXF1ZXN0RXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgIT09ICdGYXN0bGFuZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID0gdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmdldFN0b3JhZ2VTZXNzaW9uSWQoKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhY3VzdG9tZXIuaXNHdWVzdCB8fFxuICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZSA9PT1cbiAgICAgICAgICAgICAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRURcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gIXBheXBhbEZhc3RsYW5lQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGUgJiYgcGF5cGFsRmFzdGxhbmVTZXNzaW9uSWQgPT09IGNhcnQuaWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSBjdXN0b21lcj8uZW1haWwgfHwgYmlsbGluZ0FkZHJlc3M/LmVtYWlsIHx8ICcnO1xuXG4gICAgICAgICAgICBjb25zdCB7IGN1c3RvbWVyQ29udGV4dElkIH0gPSBhd2FpdCB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KFxuICAgICAgICAgICAgICAgIGN1c3RvbWVyRW1haWwsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlc3VsdCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KGN1c3RvbWVyQ29udGV4dElkKTtcblxuICAgICAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBhZGRyZXNzZXMsIGluc3RydW1lbnRzIH0gPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkID1cbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRDtcblxuICAgICAgICAgICAgaWYgKGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMudXBkYXRlU3RvcmFnZVNlc3Npb25JZChjYXJ0LmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEluZm86IERvIG5vdCB0aHJvdyBhbnl0aGluZyBoZXJlIHRvIGF2b2lkIGJsb2NraW5nIGN1c3RvbWVyIGZyb20gcGFzc2luZyBjaGVja291dCBmbG93XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBGYXN0bGFuZSBDYXJkIENvbXBvbmVudCByZW5kZXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwaG9uZSA9IGJpbGxpbmdBZGRyZXNzLnBob25lO1xuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50T3B0aW9uczogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IGZ1bGxOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKHBob25lICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZS5GYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgICAgICBjYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbENvbXBvbmVudE1ldGhvZHMgPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHJlbmRlciBjYXJkIGNvbXBvbmVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5cGFsQ29tcG9uZW50TWV0aG9kcy5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBQYXlsb2FkIHByZXBhcmF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHBheW1lbnREYXRhO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IGlzM0RTRW5hYmxlZCA9IHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZDtcblxuICAgICAgICBjb25zdCBub25jZSA9IGlzM0RTRW5hYmxlZCA/IGF3YWl0IHRoaXMuZ2V0M0RTTm9uY2UoaW5zdHJ1bWVudElkKSA6IGluc3RydW1lbnRJZDtcblxuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKG5vbmNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2Zhc3RsYW5lX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IG5vbmNlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgKTogUHJvbWlzZTxQYXltZW50PFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQ+PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRUb2tlbiB9ID0gdGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGF3YWl0IGdldFBheW1lbnRUb2tlbih7XG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxOYW1lIH0sXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczogdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLm1hcEJjVG9QYXlQYWxBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaXMzRFNFbmFibGVkID0gcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGNvbnN0IG5vbmNlID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpZCkgOiBpZDtcblxuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKG5vbmNlKTtcblxuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHN0YXRlLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgaWYgKHRoaXMubWV0aG9kSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIodGhpcy5tZXRob2RJZCwge1xuICAgICAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgICAgICBmYXN0bGFuZVRva2VuOiBpZCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAzRFNlY3VyZSBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0M0RTTm9uY2Uobm9uY2U6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmdldE9yZGVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjaGVja291dFVybCA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmxpbmtzLmNoZWNrb3V0TGluaztcblxuICAgICAgICBjb25zdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCA9IHRoaXMucGF5cGFsRmFzdGxhbmVTZGs/LlRocmVlRG9tYWluU2VjdXJlQ2xpZW50O1xuXG4gICAgICAgIGlmICghdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgYW1vdW50OiBvcmRlci5vcmRlckFtb3VudC50b0ZpeGVkKDIpLFxuICAgICAgICAgICAgY3VycmVuY3k6IGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgdGhyZWVEU1JlcXVlc3RlZDogdGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kID09PSBURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZC5BbHdheXMsXG4gICAgICAgICAgICB0cmFuc2FjdGlvbkNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5fdXJsOiBjaGVja291dFVybCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3VybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlID0gYXdhaXQgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQuaXNFbGlnaWJsZShcbiAgICAgICAgICAgIHRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPT09IFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kLkFsd2F5cyAmJlxuICAgICAgICAgICAgIWlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlKSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICBub25jZTogdGhyZWVEU05vbmNlLFxuICAgICAgICAgICAgfSA9IGF3YWl0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50LnNob3coKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uTm8gfHxcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLlVua25vd24gfHxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuRXJyb3JlZCB8fFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZS5DYW5jZWxsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuU3VjY2VlZGVkICYmXG4gICAgICAgICAgICAgICAgW0xpYWJpbGl0eVNoaWZ0RW51bS5ZZXMsIExpYWJpbGl0eVNoaWZ0RW51bS5Qb3NzaWJsZV0uaW5jbHVkZXMobGlhYmlsaXR5U2hpZnQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhyZWVEU05vbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEZhc3RsYW5lIGluc3RydW1lbnQgY2hhbmdlXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxDYXJkSW5zdHJ1bWVudCB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxBeG9TZGsgPSB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25DaGFuZ2VkLCBzZWxlY3RlZENhcmQgfSA9IGF3YWl0IHBheXBhbEF4b1Nkay5wcm9maWxlLnNob3dDYXJkU2VsZWN0b3IoKTtcblxuICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudCA9IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENhcmQsXG4gICAgICAgICAgICApWzBdO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIC4uLnBheXBhbEZhc3RsYW5lQ3VzdG9tZXIsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudHM6IFtzZWxlY3RlZEluc3RydW1lbnRdLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEluc3RydW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiB2b2lkIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lPy5vbkVycm9yICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uRXJyb3IgPT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1BheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yKFxuICAgIGVycm9yOiB1bmtub3duLFxuKTogZXJyb3IgaXMgUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3Ige1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgJ21lc3NhZ2UnIGluIGVycm9yICYmXG4gICAgICAgICdyZXNwb25zZScgaW4gZXJyb3IgJiZcbiAgICAgICAgJ2JvZHknIGluIChlcnJvciBhcyBQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcikucmVzcG9uc2UgJiZcbiAgICAgICAgJ25hbWUnIGluIChlcnJvciBhcyBQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcikucmVzcG9uc2UuYm9keVxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXJlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIGNyZWF0ZVBheVBhbFNka1NjcmlwdExvYWRlcigpLFxuICAgICAgICBjcmVhdGVQYXlQYWxGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCcgfSwgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZXMgdG8gJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCcgbWV0aG9kIGlkXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2UsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSBCb29sZWFuKHBheXBhbGNvbW1lcmNlPy5idXlOb3dJbml0aWFsaXplT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcGF5cGFsY29tbWVyY2UuY3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgcGF5cGFsY29tbWVyY2UuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZS5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwYXlwYWxjb21tZXJjZS5jdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSwgaXNCdXlOb3dGbG93KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2U6IFBheVBhbENvbW1lcmNlQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGlzQnV5Tm93Rmxvdz86IGJvb2xlYW4sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkNvbXBsZXRlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgaXNBcHBTd2l0Y2hFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkgJiYge1xuICAgICAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5oYXNSZXR1cm5lZD8uKCkgJiYgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVzdW1lPy4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBGSVhNRTogRG8gd2UgcmVhbGx5IG5lZWQgdG8gcmV0dXJuIHRydWUgaGVyZT9cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGFjY2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNBcHBTd2l0Y2hFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9wYXlwYWwtdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICBzdHlsZXMsXG59OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0pOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICBpZiAoc3R5bGVzLmNvbG9yKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmNvbG9yID0gc3R5bGVzLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXMubGF5b3V0KSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxheW91dCA9IHN0eWxlcy5sYXlvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10gfHwgc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nbyA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnR5cGUgPSBzdHlsZXNbJ2xvZ28tdHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnBvc2l0aW9uID0gc3R5bGVzWydsb2dvLXBvc2l0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLnJhdGlvKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnJhdGlvID0gc3R5bGVzLnJhdGlvO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSB8fCBzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQgPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuY29sb3IgPSBzdHlsZXNbJ3RleHQtY29sb3InXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LnNpemUgPSArc3R5bGVzWyd0ZXh0LXNpemUnXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlc1N0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZztcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbEJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlY3JlZGl0LCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkLFxuICAgICAgICB9ID0gcGF5cGFsY29tbWVyY2VjcmVkaXQgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0LmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWNyZWRpdCk7XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGJhbm5lciByZW5kZXJpbmcgaW1wbGVtZW50YXRpb24gaW4gdGhpcyBmaWxlIHdoZW4gUEFZUEFMLTU1NTcuSGlkZV9wcGNfYmFubmVyX2ltcGxlbWVudGF0aW9uIHdpbGwgYmUgcm9sbGVkIG91dCB0byAxMDAlXG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcbiAgICAgICAgY29uc3QgaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkID1cbiAgICAgICAgICAgIGZlYXR1cmVzWydQQVlQQUwtNTU1Ny5IaWRlX3BwY19iYW5uZXJfaW1wbGVtZW50YXRpb24nXSA/PyBmYWxzZTtcblxuICAgICAgICBpZiAoaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdpbmdDb250YWluZXIgPVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWVzc2FnaW5nQ29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChjdXJyZW5jeUNvZGUgJiYgbWVzc2FnaW5nQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJiBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbi5maW5kKCh7IGlkIH0pID0+IGlkID09PSAnY2FydCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgY29kZSB3aGVuIGRhdGEgYXR0cmlidXRlcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYmFubmVyIGNvbnRhaW5lciBpbiBjb250ZW50IHNlcnZpY2VcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtbG9nby10eXBlJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb24nKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtdGV4dC1jb2xvcicpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS10ZXh0LXNpemUnKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsU2RrLCBtZXNzYWdpbmdDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2VjcmVkaXQ6IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkNvbXBsZXRlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID1cbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlY3JlZGl0O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWNyZWRpdCcpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbEJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG9yZGVyRGV0YWlscyk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG9yZGVyRGV0YWlscyk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRklYTUU6IERvIHdlIHJlYWxseSBuZWVkIHRvIHJldHVybiB0cnVlIGhlcmU/XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlc1NkazogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2NhcnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBwYXlwYWxNZXNzYWdlc1Nkay5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpO1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLnJlbmRlcihgIyR7bWVzc2FnaW5nQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2V2ZW5tbywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2V2ZW5tbyB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2V2ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8uY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIGN1cnJlbmN5Q29kZSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2V2ZW5tbyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNldmVubW86IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPSBwYXlwYWxjb21tZXJjZXZlbm1vO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlID0gcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU87XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNldmVubW8nKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyhzdHlsZTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkQnV0dG9uU3R5bGUgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgIGlmICh2YWxpZEJ1dHRvblN0eWxlLmNvbG9yID09PSBTdHlsZUJ1dHRvbkNvbG9yLmdvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udmFsaWRCdXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWxpZEJ1dHRvblN0eWxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25PcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbiAgICBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lcbntcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYXBtLFxuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICB9ID0gcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvbk9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYXBtLCBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBpc0F2YWlsYWJsZUZ1bmRpbmdTb3VyY2UgPSBPYmplY3QudmFsdWVzKHBheXBhbFNkay5GVU5ESU5HKS5pbmNsdWRlcyhhcG0pO1xuXG4gICAgICAgIGlmICghaXNBdmFpbGFibGVGdW5kaW5nU291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIFBheVBhbCBidXR0b24gYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuYXBtXCIgYXJndW1lbnQgaXMgbm90IHZhbGlkIGZ1bmRpbmcgc291cmNlLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBhcG0sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsIk9iamVjdCIsImFzc2lnbiIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciIsIkRFRkFVTFRfUkVTUE9OU0UiLCJib2R5IiwiaGVhZGVycyIsInN0YXR1cyIsIlJlcXVlc3RFcnJvciIsInJlc3BvbnNlIiwiZXJyb3JzIiwiQ2FydFNvdXJjZSIsIkxpYWJpbGl0eVNoaWZ0RW51bSIsIlBheVBhbENvbW1lcmNlSW50ZW50IiwiU3R5bGVCdXR0b25MYWJlbCIsIlN0eWxlQnV0dG9uQ29sb3IiLCJTdHlsZUJ1dHRvblNoYXBlIiwiTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJQYXlQYWxPcmRlclN0YXR1cyIsIlBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIiwiZm9ybVBvc3RlciIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJwYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJwYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlciIsImxvYWRQYXlQYWxTZGsiLCJtZXRob2RJZCIsInByb3ZpZGVkQ3VycmVuY3lDb2RlIiwiaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSIsImZvcmNlTG9hZCIsInN0YXRlIiwiZ2V0U3RhdGUiLCJjdXJyZW5jeUNvZGUiLCJnZXRDYXJ0T3JUaHJvdyIsImN1cnJlbmN5IiwiY29kZSIsInBheW1lbnRNZXRob2QiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsInBheXBhbFNkayIsImdldFBheVBhbFNESyIsImdldFBheVBhbFNka09yVGhyb3ciLCJjcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyIsImJ1eU5vd0luaXRpYWxpemVPcHRpb25zIiwiY2FydFJlcXVlc3RCb2R5IiwiZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5IiwiY3JlYXRlQnV5Tm93Q2FydCIsImVycm9yIiwiY3JlYXRlT3JkZXIiLCJwcm92aWRlcklkIiwicmVxdWVzdEJvZHkiLCJjYXJ0SWQiLCJpZCIsIm9yZGVySWQiLCJjcmVhdGVPcmRlckNhcmRGaWVsZHMiLCJzZXR1cFRva2VuIiwidXBkYXRlT3JkZXIiLCJjYXJ0IiwiY29uc2lnbm1lbnQiLCJnZXRDb25zaWdubWVudHNPclRocm93IiwiYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbiIsIl9lcnJvciIsImdldE9yZGVyU3RhdHVzIiwib3B0aW9ucyIsInRva2VuaXplUGF5bWVudCIsInBvc3RGb3JtIiwicGF5bWVudF90eXBlIiwiYWN0aW9uIiwicHJvdmlkZXIiLCJvcmRlcl9pZCIsInNvdXJjZSIsIkJ1eU5vdyIsImNhcnRfaWQiLCJzdWJtaXRQYXltZW50IiwiZ2F0ZXdheUlkIiwicGF5bWVudERhdGEiLCJmb3JtYXR0ZWRQYXlsb2FkIiwidmF1bHRfcGF5bWVudF9pbnN0cnVtZW50Iiwic2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQiLCJkZXZpY2VfaW5mbyIsIm1ldGhvZF9pZCIsInBheXBhbF9hY2NvdW50IiwiZ2V0U2hpcHBpbmdPcHRpb25PclRocm93Iiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkIiwicmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiIsImZpbmQiLCJvcHRpb24iLCJpc1JlY29tbWVuZGVkIiwic2hpcHBpbmdPcHRpb25Ub1NlbGVjdCIsImdldEFkZHJlc3MiLCJhZGRyZXNzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsInBob25lIiwiY29tcGFueSIsImFkZHJlc3MxIiwiYWRkcmVzczIiLCJjaXR5IiwiY291bnRyeUNvZGUiLCJwb3N0YWxDb2RlIiwic3RhdGVPclByb3ZpbmNlIiwic3RhdGVPclByb3ZpbmNlQ29kZSIsImN1c3RvbUZpZWxkcyIsImdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyIsInBheWVyIiwiZ2l2ZW5fbmFtZSIsInN1cm5hbWUiLCJlbWFpbF9hZGRyZXNzIiwiYWRkcmVzc19saW5lXzEiLCJhZGRyZXNzX2xpbmVfMiIsImFkbWluX2FyZWFfMiIsImNvdW50cnlfY29kZSIsInBvc3RhbF9jb2RlIiwiYWRtaW5fYXJlYV8xIiwicGhvbmVfbnVtYmVyIiwibmF0aW9uYWxfbnVtYmVyIiwiZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyIsIm9yZGVyRGV0YWlscyIsInB1cmNoYXNlX3VuaXRzIiwiZnVsbF9uYW1lIiwic2hpcHBpbmciLCJzcGxpdCIsImpvaW4iLCJnZXRWYWxpZEJ1dHRvblN0eWxlIiwic3R5bGUiLCJjb2xvciIsImhlaWdodCIsImxhYmVsIiwic2hhcGUiLCJ2YWxpZFN0eWxlcyIsInVuZGVmaW5lZCIsImdldFZhbGlkSGVpZ2h0Iiwib21pdEJ5IiwiaXNOaWwiLCJyZW1vdmVFbGVtZW50IiwiZWxlbWVudElkIiwiZWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJkaXNwbGF5IiwiSU5URVJOQUxfVVNFX09OTFkiLCJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJyZXF1ZXN0U2VuZGVyIiwidXJsIiwiSnNvbiIsInBvc3QiLCJwdXQiLCJQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlciIsInNjcmlwdExvYWRlciIsIndpbmRvdyIsInBheXBhbFNka1NjcmlwdENvbmZpZyIsImdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3ciLCJsb2FkUGF5UGFsU0RLIiwicGF5cGFsIiwidHJhbnNmb3JtQ29uZmlnIiwiYXR0cmlidXRlcyIsInNjcmlwdFNyYyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwibG9hZFNjcmlwdCIsImFzeW5jIiwiY2xpZW50VG9rZW4iLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjbGllbnRJZCIsImludGVudCIsIm1lcmNoYW50SWQiLCJidXllckNvdW50cnkiLCJhdHRyaWJ1dGlvbklkIiwiaXNWZW5tb0VuYWJsZWQiLCJpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCIsImlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIiwiaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSIsImF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsImlzR29vZ2xlUGF5RW5hYmxlZCIsImNvbW1pdCIsInNob3VsZEVuYWJsZUNhcmQiLCJlbmFibGVDYXJkRnVuZGluZyIsImVuYWJsZUNyZWRpdEZ1bmRpbmciLCJlbmFibGVWZW5tb0Z1bmRpbmciLCJnb29nbGVQYXlDb21wb25lbnQiLCJjYXJkRmllbGRzQ29tcG9uZW50IiwiZGlzYWJsZUZ1bmRpbmciLCJmaWx0ZXIiLCJhcG0iLCJpbmNsdWRlcyIsImVuYWJsZUZ1bmRpbmciLCJsZW5ndGgiLCJjb21wb25lbnRzIiwiY29uZmlnIiwidHJhbnNmb3JtZWRDb25maWciLCJrZXlzIiwiZm9yRWFjaCIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0SG9zdCIsImNyZWF0ZUZvcm1Qb3N0ZXIiLCJjcmVhdGVSZXF1ZXN0U2VuZGVyIiwiaG9zdCIsImdldFNjcmlwdExvYWRlciIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UiLCJvbkVycm9yIiwibm9vcCIsImluaXRpYWxpemUiLCJwYXlwYWxjb21tZXJjZSIsImNvbnRhaW5lciIsIm9uQ2xpY2siLCJnZXRQYXltZW50TWV0aG9kIiwibG9hZFBheW1lbnRNZXRob2QiLCJCdXR0b25zIiwicmVuZGVyQnV0dG9uIiwiY29uc29sZSIsImRlaW5pdGlhbGl6ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2lnbkluIiwiY3JlZGVudGlhbHMiLCJzaWduSW5DdXN0b21lciIsInNpZ25PdXQiLCJzaWduT3V0Q3VzdG9tZXIiLCJleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0IiwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayIsIm9uQ29tcGxldGUiLCJwYXltZW50QnV0dG9uU3R5bGVzIiwiaXNBcHBTd2l0Y2hFbmFibGVkIiwiY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMiLCJkZWZhdWx0Q2FsbGJhY2tzIiwiaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQiLCJhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlIiwib25BcHByb3ZlIiwib3JkZXJJRCIsImhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzIiwib25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UiLCJkYXRhIiwib25TaGlwcGluZ09wdGlvbnNDaGFuZ2UiLCJhY3Rpb25zIiwib25Ib3N0ZWRDaGVja291dEFwcHJvdmUiLCJidXR0b25SZW5kZXJPcHRpb25zIiwiZnVuZGluZ1NvdXJjZSIsIkZVTkRJTkciLCJQQVlQQUwiLCJwYXlwYWxCdXR0b24iLCJpc0VsaWdpYmxlIiwiaGFzUmV0dXJuZWQiLCJyZXN1bWUiLCJyZW5kZXIiLCJvcmRlciIsImJpbGxpbmdBZGRyZXNzIiwidXBkYXRlQmlsbGluZ0FkZHJlc3MiLCJsaW5lSXRlbXMiLCJwaHlzaWNhbEl0ZW1zIiwic2hpcHBpbmdBZGRyZXNzIiwidXBkYXRlU2hpcHBpbmdBZGRyZXNzIiwic3VibWl0T3JkZXIiLCJwYXJhbXMiLCJoYW5kbGVFcnJvciIsInNoaXBwaW5nT3B0aW9uIiwic2VsZWN0U2hpcHBpbmdPcHRpb24iLCJQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3kiLCJwYXlwYWxjb21tZXJjZWNyZWRpdCIsInBheXBhbENvbW1lcmNlQ3JlZGl0IiwiZnVuZGluZ1NvdXJjZXMiLCJQQVlMQVRFUiIsIkNSRURJVCIsImhhc1JlbmRlcmVkU21hcnRCdXR0b24iLCJQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSIsInBheXBhbGNvbW1lcmNldmVubW8iLCJWRU5NTyIsInBheXBhbEJ1dHRvblJlbmRlciIsIlVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUiLCJQYXlQYWxJbnRlbnQiLCJURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZCIsIlREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSIsIlBheVBhbFNka1NjcmlwdExvYWRlciIsImdldFBheVBhbEZhc3RsYW5lU2RrIiwic2Vzc2lvbklkIiwicGF5cGFsRmFzdGxhbmVTZGsiLCJnZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24iLCJnZXRQYXlQYWxHb29nbGVQYXlTZGsiLCJwYXlwYWxHb29nbGVQYXkiLCJnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93IiwiZ2V0UGF5UGFsQXBtc1NkayIsInBheXBhbEFwbXMiLCJnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uIiwiZ2V0UGF5UGFsTWVzc2FnZXMiLCJwYXlwYWxNZXNzYWdlcyIsInBheXBhbFNka01lc3NhZ2VzQ29uZmlnIiwiZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uIiwic2NyaXB0T3B0aW9ucyIsInNjcmlwdEF0dHJpYnV0ZXMiLCJyZXBsYWNlIiwiZW5hYmxlQVBNc0Z1bmRpbmciLCJkaXNhYmxlQVBNc0Z1bmRpbmciLCJjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIiLCJjcmVhdGVTY3JpcHRMb2FkZXIiLCJDb29raWVTdG9yYWdlIiwiY29va2llS2V5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiZmlyc3RJbmRleCIsImluZGV4T2YiLCJsYXN0SW5kZXgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHJpbmciLCJzZXQiLCJzZWN1cmUiLCJjb29raWVUZXh0IiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJ0b1VUQ1N0cmluZyIsIm5vdyIsIkRhdGUiLCJtaW51dGVzIiwic2V0VGltZSIsImdldFRpbWUiLCJyZW1vdmUiLCJQYXlwYWxGYXN0bGFuZVV0aWxzIiwiaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lIiwiaXNUZXN0TW9kZUVuYWJsZWQiLCJzdHlsZXMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicGF5cGFsRmFzdGxhbmUiLCJkZWZhdWx0U3R5bGVzIiwicm9vdCIsImJhY2tncm91bmRDb2xvclByaW1hcnkiLCJGYXN0bGFuZSIsImdldFBheVBhbEZhc3RsYW5lT3JUaHJvdyIsImxvb2t1cEN1c3RvbWVyT3JUaHJvdyIsImlkZW50aXR5IiwibG9va3VwQ3VzdG9tZXJCeUVtYWlsIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3ciLCJjdXN0b21lckNvbnRleHRJZCIsInRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3ciLCJ1cGRhdGVTdG9yYWdlU2Vzc2lvbklkIiwic2V0RGF0ZSIsImdldERhdGUiLCJjb29raWVzT3B0aW9uIiwicmVtb3ZlU3RvcmFnZVNlc3Npb25JZCIsImdldFN0b3JhZ2VTZXNzaW9uSWQiLCJtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhIiwiYXV0aGVudGljYXRpb25SZXN1bHQiLCJhdXRoZW50aWNhdGlvblN0YXRlIiwicHJvZmlsZURhdGEiLCJwYXlwYWxCaWxsaW5nQWRkcmVzcyIsImNhcmQiLCJwYXltZW50U291cmNlIiwicGF5cGFsU2hpcHBpbmdBZGRyZXNzIiwicGF5cGFsUHJvZmlsZU5hbWUiLCJwYXlwYWxJbnN0cnVtZW50IiwibWFwUGF5UGFsVG9CY0FkZHJlc3MiLCJwaG9uZU51bWJlciIsImluc3RydW1lbnRzIiwibWFwUGF5UGFsVG9CY0luc3RydW1lbnQiLCJhZGRyZXNzZXMiLCJmaWx0ZXJBZGRyZXNzZXMiLCJVTlJFQ09HTklaRUQiLCJpbnN0cnVtZW50IiwiYnJhbmQiLCJleHBpcnkiLCJsYXN0RGlnaXRzIiwiZXhwaXJ5WWVhciIsImV4cGlyeU1vbnRoIiwiYmlncGF5VG9rZW4iLCJkZWZhdWx0SW5zdHJ1bWVudCIsImlpbiIsImxhc3Q0IiwibWV0aG9kIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsInVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGUiLCJQQU4iLCJtYXBCY1RvUGF5UGFsQWRkcmVzcyIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkbWluQXJlYTEiLCJhZG1pbkFyZWEyIiwicHJvZmlsZU5hbWUiLCJmdWxsTmFtZSIsInBob25lRGF0YSIsIm5hdGlvbmFsTnVtYmVyIiwiY291bnRyeSIsInJlZHVjZSIsImN1c3RvbWVyQWRkcmVzc2VzIiwiY3VycmVudEFkZHJlc3MiLCJzb21lIiwiY3VzdG9tZXJBZGRyZXNzIiwiaXNFcXVhbEFkZHJlc3NlcyIsImZpcnN0QWRkcmVzcyIsInNlY29uZEFkZHJlc3MiLCJpc0VxdWFsIiwibm9ybWFsaXplQWRkcmVzcyIsIm9taXQiLCJjcmVhdGVQYXlwYWxGYXN0bGFuZVV0aWxzIiwiaXNJbnZhbGlkU3R5bGVPcHRpb24iLCJzdHlsZU9wdGlvbiIsImdldEZhc3RsYW5lU3R5bGVzIiwic3R5bGVTZXR0aW5ncyIsInVpU3R5bGVzIiwiZmFzdGxhbmVTdHlsZXMiLCJpbnB1dCIsInRvZ2dsZSIsInRleHRCb2R5IiwidGV4dCIsInRleHRDYXB0aW9uIiwiY2FwdGlvbiIsImJyYW5kaW5nIiwiY2xlYW5VcEZhc3RsYW5lU3R5bGVzIiwiZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJlcnJvckNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIiwiZm9udEZhbWlseSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSIsImZvbnRTaXplQmFzZSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUiLCJwYWRkaW5nIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nIiwicHJpbWFyeUNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IiLCJib3JkZXJSYWRpdXMiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMiLCJib3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlckNvbG9yIiwiZm9jdXNCb3JkZXJDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0ZvY3VzQm9yZGVyQmFzZSIsImJhY2tncm91bmRDb2xvciIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciIsImJvcmRlcldpZHRoIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGgiLCJ0ZXh0Q29sb3JCYXNlIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSIsImNvbG9yUHJpbWFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkiLCJjb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclNlY29uZGFyeSIsImZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yIiwiZm9udFNpemUiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIiwiZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MiLCJtZXJnZUZhc3RsYW5lU3R5bGVzIiwiUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kiLCJwYXlwYWxTZGtTY3JpcHRMb2FkZXIiLCJwYXlwYWxGYXN0bGFuZVV0aWxzIiwicGF5cGFsY29tbWVyY2VmYXN0bGFuZSIsIl8iLCJjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCIsImdldEN1c3RvbWVyT3JUaHJvdyIsImlzR3Vlc3QiLCJydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiY3VzdG9tZXIiLCJnZXRDdXN0b21lciIsImdldEJpbGxpbmdBZGRyZXNzIiwiY3VzdG9tZXJFbWFpbCIsImlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQiLCJDQU5DRUxFRCIsInVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlIiwidXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJ1cGRhdGVkU3RhdGUiLCJpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCIsImNvbnNpZ25tZW50cyIsImdldENvbnNpZ25tZW50cyIsImZpcnN0U2hpcHBpbmdPcHRpb24iLCJzaGlwcGluZ09wdGlvbklkIiwiaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIiwiUGF5UGFsQ29tbWVyY2VTZGsiLCJERUZBVUxUX1NUWUxFUyIsInNpemUiLCJST1RBVElPTl9BTklNQVRJT04iLCJMb2FkaW5nSW5kaWNhdG9yIiwiY29udGFpbmVyU3R5bGVzIiwiZGVmaW5lQW5pbWF0aW9uIiwiYnVpbGRDb250YWluZXIiLCJpbmRpY2F0b3IiLCJidWlsZEluZGljYXRvciIsImFwcGVuZENoaWxkIiwic2hvdyIsInBhcmVudElkIiwicGFyZW50IiwidmlzaWJpbGl0eSIsIm9wYWNpdHkiLCJoaWRlIiwiaGFuZGxlVHJhbnNpdGlvbkVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlRWxlbWVudCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsInBvc2l0aW9uIiwicmlnaHQiLCJ0b3AiLCJ0cmFuc2l0aW9uIiwic2V0U3R5bGVBdHRyaWJ1dGUiLCJib3JkZXIiLCJtYXJnaW4iLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1TdHlsZSIsImFuaW1hdGlvbiIsImF0dHJzIiwiayIsInNldFByb3BlcnR5IiwiaGVhZCIsInNoZWV0IiwiQ1NTU3R5bGVTaGVldCIsImluc2VydFJ1bGUiLCJMT0FESU5HX0lORElDQVRPUl9TVFlMRVMiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiUGF5bWVudE1ldGhvZEludmFsaWRFcnJvciIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsImlzSG9zdGVkSW5zdHJ1bWVudExpa2UiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJpc1ZhdWx0ZWRJbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsIm1lc3NhZ2VzU3R5bGVzIiwibGF5b3V0IiwibG9nbyIsInJhdGlvIiwiaXNCYXNlSW5zdHJ1bWVudCIsIlBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5IiwicGF5cGFsQ29tbWVyY2VTZGsiLCJsb2FkaW5nSW5kaWNhdG9yIiwiYmFubmVyQ29udGFpbmVySWQiLCJwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiIsImJhbm5lckNvbmZpZ3VyYXRpb24iLCJNZXNzYWdlcyIsInJlbmRlck1lc3NhZ2VzIiwibG9hZGluZ0luZGljYXRvckNvbnRhaW5lciIsIm9uSW5pdCIsInNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb24iLCJleGVjdXRlIiwicGF5bG9hZCIsInBheW1lbnQiLCJpc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEiLCJwYXltZW50UGF5bG9hZCIsInByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVBheW1lbnRQYXlsb2FkIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJpc1JlZGlyZWN0QWN0aW9uRXJyb3IiLCJyZWRpcmVjdFVybCIsInJlZGlyZWN0X3VybCIsImxvY2F0aW9uIiwiaXNQcm92aWRlckVycm9yIiwiX3Jlc29sdmUiLCJyZWplY3QiLCJjbG9zZSIsImZpbmFsaXplIiwicGF5cGFsT3JkZXJJZCIsInNob3VsZENvbmZpcm1JbnN0cnVtZW50IiwiaXNUcnVzdGVkVmF1bHRpbmdGbG93IiwiYmlncGF5X3Rva2VuIiwidG9rZW4iLCJjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMiLCJvblJlbmRlckJ1dHRvbiIsIm9uVmFsaWRhdGUiLCJzdWJtaXRGb3JtIiwiYnV0dG9uT3B0aW9ucyIsImhhbmRsZUNsaWNrIiwiaGFuZGxlQXBwcm92ZSIsIm9uQ2FuY2VsIiwidG9nZ2xlTG9hZGluZ0luZGljYXRvciIsImZpZWxkc1ZhbHVlcyIsImdldEZpZWxkc1ZhbHVlcyIsImdldEluc3RydW1lbnRzIiwiZmluZEluc3RydW1lbnQiLCJpc0xvYWRpbmciLCJwYXlwYWxNZXNzYWdlc09wdGlvbnMiLCJhbW91bnQiLCJnZXRDaGVja291dE9yVGhyb3ciLCJvdXRzdGFuZGluZ0JhbGFuY2UiLCJwbGFjZW1lbnQiLCJpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvciIsImUiLCJwcm92aWRlcl9lcnJvciIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSIsInBheXBhbE9wdGlvbnMiLCJQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5IiwiUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlIiwicGF5cGFsUmVxdWVzdFNlbmRlciIsInBheXBhbFNka0xvYWRlciIsIlBheVBhbFJlcXVlc3RTZW5kZXIiLCJUaW1lb3V0RXJyb3IiLCJQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSIsInBvbGxpbmdJbnRlcnZhbCIsIm1heFBvbGxpbmdJbnRlcnZhbFRpbWUiLCJwb2xsaW5nVGltZXIiLCJzdG9wUG9sbGluZyIsImlzT3JkZXJBcHByb3ZlZFByb2Nlc3NpbmciLCJwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyIsInNob3VsZFJlbmRlckZpZWxkcyIsImZlYXR1cmVzIiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY2hlY2tvdXRTZXR0aW5ncyIsImV4cGVyaW1lbnROYW1lIiwiZmFsbGJhY2tWYWx1ZSIsImlzRXhwZXJpbWVudEVuYWJsZWQiLCJyZW5kZXJGaWVsZHMiLCJpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsImlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QiLCJJREVBTCIsInJlc2V0UG9sbGluZ01lY2hhbmlzbSIsInJlc29sdmVQcm9taXNlIiwicmVqZWN0UHJvbWlzZSIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwib3JkZXJTdGF0dXMiLCJpc09yZGVyQXBwcm92ZWQiLCJBcHByb3ZlZCIsImlzUG9sbGluZ0Vycm9yIiwiUG9sbGluZ0Vycm9yIiwiZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsInJlaW5pdGlhbGl6ZVN0cmF0ZWd5IiwicGF5cGFsQW1wc1NkayIsImdldFBheXBhbEFtcHNTZGtPclRocm93IiwiYnV0dG9uU3R5bGUiLCJvbkluaXRCdXR0b24iLCJvbkNyZWF0ZU9yZGVyIiwiaGFuZGxlRmFpbHVyZSIsIk9YWE8iLCJ1c2VTdG9yZUNyZWRpdCIsImJjT3JkZXJJZCIsImdldE9yZGVyIiwiZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93IiwiYXBtRmllbGRzQ29udGFpbmVyIiwiYXBtRmllbGRzU3R5bGVzIiwiZmllbGRDb250YWluZXJFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImZpZWxkc09wdGlvbnMiLCJmaWVsZHMiLCJQYXltZW50RmllbGRzIiwidG9VcHBlckNhc2UiLCJnYXRld2F5IiwiSG9zdGVkRmllbGRUeXBlIiwiaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyIsIkNhcmROdW1iZXIiLCJDYXJkTmFtZSIsIkNhcmRFeHBpcnkiLCJpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyIsIkNhcmROdW1iZXJWZXJpZmljYXRpb24iLCJDYXJkQ29kZVZlcmlmaWNhdGlvbiIsIkNhcmRFeHBpcnlWZXJpZmljYXRpb24iLCJQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50SW52YWxpZEZvcm1FcnJvciIsImRldGFpbHMiLCJQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IiwicGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlIiwicGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcyIsInBheXBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25PcHRpb25zIiwiZm9ybSIsIm9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yIiwib25Mb2FkQ29tcGxldGUiLCJob3N0ZWRGb3JtT3B0aW9ucyIsImlzQ3JlZGl0Q2FyZEZvcm0iLCJpc0NyZWRpdENhcmRWYXVsdGVkRm9ybSIsImhhc1VuZGVmaW5lZFZhbHVlcyIsImluaXRpYWxpemVGaWVsZHMiLCJzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUiLCJpbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93IiwiZXhlY3V0aW9uUGF5bWVudERhdGEiLCJ2YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93Iiwic3VibWl0SG9zdGVkRm9ybSIsImdldEluc3RydW1lbnRQYXJhbXMiLCJyZXR1cm5lZE9yZGVySWQiLCJzdWJtaXRQYXltZW50UGF5bG9hZCIsInJldHVybmVkVmF1bHRlZFRva2VuIiwiY3Z2RmllbGQiLCJleHBpcnlGaWVsZCIsIm51bWJlckZpZWxkIiwibmFtZUZpZWxkIiwibm9uY2UiLCJ2ZXJpZmljYXRpb25fbm9uY2UiLCJjYXJkX3dpdGhfb3JkZXIiLCJmb3JtT3B0aW9ucyIsImV4ZWN1dGVDYWxsYmFjayIsImdldEV4ZWN1dGVDYWxsYmFjayIsImNhcmRGaWVsZHNDb25maWciLCJnZXRJbnB1dFN0eWxlcyIsInZhdWx0U2V0dXBUb2tlbiIsImxpYWJpbGl0eVNoaWZ0IiwiTm8iLCJVbmtub3duIiwiaW5wdXRFdmVudHMiLCJvbkNoYW5nZSIsImV2ZW50Iiwib25DaGFuZ2VIYW5kbGVyIiwib25Gb2N1cyIsIm9uRm9jdXNIYW5kbGVyIiwib25CbHVyIiwib25CbHVySGFuZGxlciIsIm9uSW5wdXRTdWJtaXRSZXF1ZXN0IiwiY2FyZEZpZWxkcyIsIkNhcmRGaWVsZHMiLCJzdHlsaXplSW5wdXRDb250YWluZXJzIiwicmVuZGVyVmF1bHRlZEZpZWxkcyIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrIiwiY3JlYXRlT3JkZXJDYWxsYmFjayIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbiIsImdldENhcmRGaWVsZHNPclRocm93IiwiY2FyZENvZGUiLCJjb250YWluZXJJZCIsIkNWVkZpZWxkIiwicGxhY2Vob2xkZXIiLCJjYXJkRXhwaXJ5IiwiRXhwaXJ5RmllbGQiLCJjYXJkTmFtZSIsIk5hbWVGaWVsZCIsImNhcmROdW1iZXIiLCJOdW1iZXJGaWVsZCIsImNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiY2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsImNhcmROdW1iZXJWZXJpZmljYXRpb24iLCJnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCIsImVtaXR0ZWRCeSIsImZpZWxkVHlwZSIsIm1hcEZpZWxkVHlwZSIsInN1Ym1pdENvbmZpZyIsInN1Ym1pdCIsImNhcmRGaWVsZHNTdGF0ZSIsInRoZW4iLCJ2YWxpZGF0aW9uRGF0YSIsImdldFZhbGlkaXR5RGF0YSIsImlzVmFsaWQiLCJtYXBWYWxpZGF0aW9uRXJyb3JzIiwidXBkYXRlZEZpZWxkcyIsImNhcmROYW1lRmllbGQiLCJmaWVsZHNLZXlzIiwiZXZlcnkiLCJmaWVsZHNFcnJvcnMiLCJnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZSIsIkNhcmRDb2RlIiwidmFsaWRhdGlvbkVycm9ycyIsImNvbW1vblN0eWxlcyIsImRlZmF1bHQiLCJmb250V2VpZ2h0Iiwib3V0bGluZSIsInZhbHVlcyIsImJveFNoYWRvdyIsImJhY2tncm91bmQiLCJtYXJnaW5Cb3R0b20iLCJtYXJnaW5MZWZ0Iiwib25FbnRlciIsInBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZCIsImlzUGF5UGFsQ29tbWVyY2VBbmFseXRpY3NWMkVuYWJsZWQiLCJjb25uZWN0Q2xpZW50VG9rZW4iLCJwYXlQYWxGYXN0bGFuZVNkayIsIlBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNlcmF0ZXBheSIsImxlZ2FsVGV4dENvbnRhaW5lciIsImxvYWRpbmdDb250YWluZXJJZCIsImNyZWF0ZUZyYXVkTmV0U2NyaXB0IiwibG9hZEZyYXVkbmV0Q29uZmlnIiwicmVuZGVyTGVnYWxUZXh0IiwibWV0YWRhdGFJZCIsImd1aWQiLCJyYXRlcGF5QmlydGhEYXRlIiwicmF0ZXBheVBob25lTnVtYmVyIiwicmF0ZXBheVBob25lQ291bnRyeUNvZGUiLCJyYXRlX3BheSIsImJpcnRoX2RhdGUiLCJub3JtYWxpemVEYXRlIiwiZnJhdWROZXRTY3JpcHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZnJhdWROZXRDb25maWciLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50IiwiZGF0ZSIsImZvcm1hdHRlZERhdGUiLCJmb3JtYXREYXRlIiwiZm9ybWF0dGVkTW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudElkIiwibGVnYWxUZXh0Q29udGFpbmVySWQiLCJidXR0b25Db250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lciIsImJ1dHRvbkNvbnRhaW5lclBhcmVudCIsInBhcmVudE5vZGUiLCJzZXRBdHRyaWJ1dGUiLCJwcmVwZW5kIiwicmF0ZVBheUJ1dHRvbiIsIkxlZ2FsIiwiUEFZX1VQT05fSU5WT0lDRSIsInRlc3RNb2RlIiwic2NyaXB0RWxlbWVudCIsImdlbmVyYXRlR1VJRCIsImYiLCJzIiwic2FuZGJveCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpIiwiTWF0aCIsImZsb29yIiwiY2hhcmFjdGVycyIsInJhbmRvbSIsInNjcmlwdCIsInNyYyIsInVzZU1ldGFkYXRhIiwiUG9sbGluZ1N0b3AiLCJpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIiLCJQYXlwYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IiwidGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCIsInNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdyIsImluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50IiwicmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudCIsImhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UiLCJvcmRlclJlcXVlc3QiLCJpc1ZhdWx0ZWRGbG93IiwiaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvciIsImludmFsaWRSZXF1ZXN0RXJyb3IiLCJ0cmFuc2xhdGlvbktleSIsInBheXBhbEZhc3RsYW5lQ3VzdG9tZXIiLCJwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCIsInRyaW0iLCJjYXJkQ29tcG9uZW50T3B0aW9ucyIsImNhcmRob2xkZXJOYW1lIiwicHJlZmlsbCIsImVuYWJsZWQiLCJwYXlwYWxDb21wb25lbnRNZXRob2RzIiwiRmFzdGxhbmVDYXJkQ29tcG9uZW50IiwiZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3ciLCJpczNkc0VuYWJsZWQiLCJnZXQzRFNOb25jZSIsInBheXBhbF9mYXN0bGFuZV90b2tlbiIsImdldFBheW1lbnRUb2tlbiIsImZhc3RsYW5lVG9rZW4iLCJnZXRPcmRlck9yVGhyb3ciLCJjaGVja291dFVybCIsImxpbmtzIiwiY2hlY2tvdXRMaW5rIiwidGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQiLCJUaHJlZURvbWFpblNlY3VyZUNsaWVudCIsInRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyIsIm9yZGVyQW1vdW50IiwidG9GaXhlZCIsInRocmVlRFNSZXF1ZXN0ZWQiLCJBbHdheXMiLCJ0cmFuc2FjdGlvbkNvbnRleHQiLCJleHBlcmllbmNlX2NvbnRleHQiLCJsb2NhbGUiLCJyZXR1cm5fdXJsIiwiY2FuY2VsX3VybCIsImlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSIsInRocmVlRFNOb25jZSIsIkVycm9yZWQiLCJDYW5jZWxsZWQiLCJTdWNjZWVkZWQiLCJZZXMiLCJQb3NzaWJsZSIsInBheXBhbEF4b1NkayIsInNlbGVjdGlvbkNoYW5nZWQiLCJzZWxlY3RlZENhcmQiLCJwcm9maWxlIiwic2hvd0NhcmRTZWxlY3RvciIsInNlbGVjdGVkSW5zdHJ1bWVudCIsIlBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3kiLCJpc0J1eU5vd0Zsb3ciLCJsb2FkRGVmYXVsdENoZWNrb3V0Iiwib25FbGlnaWJpbGl0eUZhaWx1cmUiLCJidXlOb3dGbG93Q2FsbGJhY2tzIiwiYnV5Tm93Q2FydCIsImxvYWRDaGVja291dCIsIlBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3kiLCJtZXNzYWdpbmdDb250YWluZXJJZCIsIm1lc3NhZ2luZ0NvbnRhaW5lciIsInJlbW92ZUF0dHJpYnV0ZSIsInBheXBhbE1lc3NhZ2VzU2RrIiwiUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5IiwiZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyIsInZhbGlkQnV0dG9uU3R5bGUiLCJnb2xkIiwiUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js\n\n}");

/***/ })

}]);