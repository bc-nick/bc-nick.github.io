"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["klarna-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/klarna.js":
/*!**********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/klarna.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKlarnaPaymentStrategy: () => (/* binding */ k),\n/* harmony export */   createKlarnaV2PaymentStrategy: () => (/* binding */ U)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar i,a,r={};function o(e,t){return Object.assign(e,{resolveIds:t})}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class s extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class d extends s{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends s{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(i||(i={}));class l extends s{constructor(e){super(function(e){switch(e){case i.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case i.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case i.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case i.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case i.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case i.MissingCheckoutConfig:case i.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case i.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case i.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case i.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case i.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case i.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case i.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class u extends s{constructor(e){super(function(e){switch(e){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class h extends s{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const p={body:{},headers:{},status:0};class m extends s{constructor(e,{message:t,errors:n}={}){const{body:i,headers:a,status:r}=e||p;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=i,this.headers=a,this.status=r,this.errors=n||[]}}class y extends m{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}const g=[\"AT\",\"BE\",\"CA\",\"CH\",\"CZ\",\"DE\",\"DK\",\"ES\",\"FI\",\"FR\",\"GB\",\"GR\",\"IE\",\"IT\",\"NL\",\"NO\",\"NZ\",\"PL\",\"PT\",\"SE\"],b=[\"AU\"];var v=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}d((i=i.apply(e,t||[])).next())})};class f{constructor(e,t){this.paymentIntegrationService=e,this.klarnaScriptLoader=t}initialize(e){return v(this,void 0,void 0,function*(){this.klarnaCredit=yield this.klarnaScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return v(this,void 0,void 0,function*(){if(!e.payment)throw new d('Unable to proceed because \"payload.payment\" argument is not provided.');const n=e.payment,{paymentData:i}=n,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(n,[\"paymentData\"]),{authorization_token:r}=yield this.authorize();yield this.paymentIntegrationService.initializePayment(a.methodId,{authorizationToken:r}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:a,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new c)}loadWidget(e){return v(this,void 0,void 0,function*(){if(!e.klarna)throw new d('Unable to load widget because \"options.klarna\" argument is not provided.');const{methodId:t,klarna:{container:n,onLoad:r}}=e;return yield this.paymentIntegrationService.loadPaymentMethod(t),new Promise(e=>{const o=this.paymentIntegrationService.getState().getPaymentMethod(t);if(!o)throw new l(i.MissingPaymentMethod);if(!this.klarnaCredit||!o.clientToken)throw new u(a.PaymentNotInitialized);this.klarnaCredit.init({client_token:o.clientToken}),this.klarnaCredit.load({container:n},t=>{r&&r(t),e(t)})})})}getUpdateSessionData(e,n){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([...g,...b],e.countryCode))return{};const i={billing_address:this.mapToKlarnaAddress(e,e.email)};return n&&(i.shipping_address=this.mapToKlarnaAddress(n,e.email)),i}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(b,e)}mapToKlarnaAddress(e,t){const n={street_address:e.address1,city:e.city,country:e.countryCode,given_name:e.firstName,family_name:e.lastName,postal_code:e.postalCode,region:this.needsStateCode(e.countryCode)?e.stateOrProvinceCode:e.stateOrProvince,email:t};return e.address2&&(n.street_address2=e.address2),e.phone&&(n.phone=e.phone),n}authorize(){return new Promise((e,t)=>{const n=this.paymentIntegrationService.getState(),r=n.getBillingAddress(),o=n.getShippingAddress();if(!r)throw new l(i.MissingBillingAddress);if(!this.klarnaCredit)throw new u(a.PaymentNotInitialized);const s=this.getUpdateSessionData(r,o);this.klarnaCredit.authorize(s,n=>n.approved?e(n):n.show_form?t(new h):void t(new y))})}}class w extends s{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class P{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,a,r;return n=this,i=void 0,r=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Credit)||(yield this.scriptLoader.loadScript(\"//credit.klarnacdn.net/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Credit))throw new w;return this.klarnaWindow.Klarna.Credit},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())})}}const k=o(t=>new f(t,new P((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{id:\"klarna\"}]);var I=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}d((i=i.apply(e,t||[])).next())})};class M{constructor(e,t,n){this.paymentIntegrationService=e,this.klarnav2ScriptLoader=t,this.klarnav2TokenUpdater=n}initialize(e){return I(this,void 0,void 0,function*(){this.klarnaPayments=yield this.klarnav2ScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadPaymentsWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadPaymentsWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return I(this,void 0,void 0,function*(){if(!e.payment)throw new d('Unable to proceed because \"payload.payment\" argument is not provided.');const n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e.payment,[]),{gatewayId:i,methodId:a}=n;if(!i)throw new d('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const r=this.paymentIntegrationService.getState(),{id:o}=r.getCartOrThrow(),{clientToken:s,initializationData:c}=r.getPaymentMethodOrThrow(a),{klarnaMultipleRadioButton:l}=c||{};yield this.klarnav2TokenUpdater.klarnaOrderInitialization(o,s);const u=this.isKlarnaMultipleRadioButtonEnabled(l,i,a),{authorization_token:h}=yield this.authorizeOrThrow(u,a);yield this.paymentIntegrationService.initializePayment(i,{authorizationToken:h}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:n,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new c)}loadPaymentsWidget(e){return I(this,void 0,void 0,function*(){if(!e.klarnav2)throw new d('Unable to load widget because \"options.klarnav2\" argument is not provided.');const{methodId:t,gatewayId:n,klarnav2:{container:r,onLoad:o}}=e;if(!n)throw new d('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const s=this.paymentIntegrationService.getState(),c={params:s.getCartOrThrow().id};return yield this.klarnav2TokenUpdater.updateClientToken(n,{params:c}).catch(()=>{throw new l(i.MissingPaymentMethod)}),new Promise(e=>{const i=s.getPaymentMethodOrThrow(t),{klarnaMultipleRadioButton:d}=i.initializationData||{};if(!this.klarnaPayments||!i.clientToken)throw new u(a.PaymentNotInitialized);this.klarnaPayments.init({client_token:i.clientToken}),this.klarnaPayments.load({container:r,payment_method_category:this.isKlarnaMultipleRadioButtonEnabled(d,n,t)},t=>{o&&o(t),e(t)})})})}getUpdateSessionData(e,n,i){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([...g,...b],n.countryCode))return{};const a={billing_address:this.mapToKlarnaAddress(e,n,n.email)};return i&&(a.shipping_address=this.mapToKlarnaAddress(e,i,n.email)),a}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(b,e)}isKlarnaMultipleRadioButtonEnabled(e,t,n){return e?n:t}mapToKlarnaAddress(e,t,n){const i=this.paymentIntegrationService.getState(),{checkoutSettings:a}=i.getStoreConfigOrThrow(),r=i.getPaymentMethodOrThrow(e),{enableBillie:o}=r.initializationData||{},s={street_address:t.address1,city:t.city,country:t.countryCode,given_name:t.firstName,family_name:t.lastName,postal_code:t.postalCode,region:this.needsStateCode(t.countryCode)?t.stateOrProvinceCode:t.stateOrProvince,email:n};return t.address2&&(s.street_address2=t.address2),t.phone&&(s.phone=t.phone),t.company&&o&&function(e,t,n=!0){var i;return null!==(i=e[\"PI-3915.b2b_payment_session_for_klarna\"])&&void 0!==i?i:n}(a.features)&&(s.organization_name=t.company),s}authorizeOrThrow(e,t){return I(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const n=this.paymentIntegrationService.getState(),i=n.getBillingAddressOrThrow(),r=n.getShippingAddress(),o=this.getUpdateSessionData(t,i,r);return new Promise((t,n)=>{if(!this.klarnaPayments)return n(new u(a.PaymentNotInitialized));this.klarnaPayments.authorize({payment_method_category:e},o,e=>e.approved?t(e):e.show_form?n(new h):void n(new y))})})}}var S;class C{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,a,r;return n=this,i=void 0,r=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Payments)||(yield this.scriptLoader.loadScript(\"https://x.klarnacdn.net/kp/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Payments))throw new w;return this.klarnaWindow.Klarna.Payments},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())})}}!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(S||(S={}));const O=S,z=\"This API endpoint is for internal use only and may change in the future\",_={\"X-Checkout-SDK-Version\":\"1.867.0\"};class T{constructor(e){this.requestSender=e}updateClientToken(e,{timeout:t,params:n}={}){const i=`/api/storefront/payments/${e}`;return this.requestSender.get(i,{timeout:t,headers:Object.assign({Accept:O.JsonV1,\"X-API-INTERNAL\":z},_),params:n})}klarnaOrderInitialization(e,t){return n=this,i=void 0,r=function*(){const n={headers:Object.assign({Accept:O.JsonV1,\"X-API-INTERNAL\":z},_),body:{cartId:e,clientToken:t}};yield this.requestSender.put(\"/api/storefront/initialization/klarna\",n)},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())});// removed by dead control flow\n var n, i, a, r; }}const U=o(t=>{const{getHost:i}=t.getState(),a=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:i()});return new M(t,new C((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),new T(a))},[{gateway:\"klarna\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9rbGFybmEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0EsSUNDWUEsRUNBQUMsRUZEUkMsRUFBc0IsQ0FBQyxFR0NaLFNBQVNDLEVBQ3BCQyxFQUNBQyxHQUVBLE9BQU9DLE9BQU9DLE9BQU9ILEVBQVEsQ0FBRUMsY0FDbkMsQ0NOQUgsRUFBb0JNLEVBQUksQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVILEVBQVNFLElBQzVFTCxPQUFPTyxlQUFlSixFQUFTRSxFQUFLLENBQUVHLFlBQVksRUFBTUMsSUFBS0wsRUFBV0MsTUNKM0VULEVBQW9CVSxFQUFJLENBQUNJLEVBQUtDLElBQVVYLE9BQU9ZLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDT25FLE1BQWVJLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDTixFRFk1Q08sTUFBTUQsR0FBVyxxQ0FKckIsS0FBQUUsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDVCxhRGNaQSxVQ2JoQ1osT0FBT3NCLGVBQ1B0QixPQUFPc0IsZURZUUMsS0NaZVgsR0RZZlcsS0NWUkMsVUFBWVosRURZb0IsbUJBQTVCSSxNQUFNUyxrQkFDYlQsTUFBTVMsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVYsTUFBTU8sS0FBS0wsU0FBU1EsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QlosRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkMsTUFBTUQsR0FBVyx5Q0FFakJLLEtBQUtILEtBQU8sdUJBQ1pHLEtBQUtGLEtBQU8sa0JBQ2hCLEVDUFcsTUFBTU8sVUFBMENiLEVBQzNELFdBQUFFLEdBQ0lFLE1BQU0sa0VBRU5JLEtBQUtILEtBQU8sb0NBQ1pHLEtBQUtGLEtBQU8saUNBQ2hCLEdSVkosU0FBWTNCLEdBQ1IscURBQ0EsaUNBQ0EseUNBQ0Es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LEdBQUEsS0FBQUEsY0FBQUEsQ0FBK0IsQ0FFbkQsaUJBQUFwQixDQUNJNUYsR0FDQSxRQUFFaUgsRUFBTyxPQUFFdEIsR0FBMkIsQ0FBQyxHQUV2QyxNQUFNdUIsRUFBTSw0QkFBNEJsSCxJQUV4QyxPQUFPbEQsS0FBS2tLLGNBQWNoTCxJQUFJa0wsRUFBSyxDQUMvQkQsVUFDQXJJLFFBQVMsT0FBRixRQUNIdUksT0FBUSxFQUFZQyxPQUNwQixpQkFBa0JQLEdBQ2ZDLEdBRVBuQixVQUVSLENBRU0seUJBQUFKLENBQ0ZMLEVBQ0FyRCxHLHFDQUVBLE1BQ01yQyxFQUFVLENBQ1paLFFBQVMsT0FBRixRQUNIdUksT0FBUSxFQUFZQyxPQUNwQixpQkFBa0JQLEdBQ2ZDLEdBRVBuSSxLQUFNLENBQ0Z1RyxTQUNBckQsc0JBSUYvRSxLQUFLa0ssY0FBY0ssSUFiYix3Q0Fhc0I3SCxFQUN0QyxFO21CQ3BDSixNQWFBLEVBQWVwRSxFQVpYaUUsSUFFQSxNQUFNLFFBQUVpSSxHQUFZakksRUFBMEJzQyxXQUN4Q3FGLEVBQWdCTyxnRkFBQUEsQ0FBb0IsQ0FBRUMsS0FBTUYsTUFFbEQsT0FBTyxJQUFJekMsRUFDUHhGLEVBQ0EsSUFBSXNILEVBQXFCaEMsMkVBQUFBLElBQ3pCLElBQUlvQyxFQUFxQkMsS0FJZ0MsQ0FBQyxDQUFFUyxRQUFTLFkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jYW5jZWxsZWQtZXJyb3IudHM/MDg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9yZXF1ZXN0LWVycm9yLnRzP2M4NDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtaW52YWxpZC1lcnJvci50cz8zYWRmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2tsYXJuYXYyL2tsYXJuYS1zdXBwb3J0ZWQtY291bnRyaWVzLnRzPzJkYTMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2tsYXJuYS1pbnRlZ3JhdGlvbi9zcmMva2xhcm5hL2tsYXJuYS1wYXltZW50LXN0cmF0ZWd5LnRzPzhiMTMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2tsYXJuYS1pbnRlZ3JhdGlvbi9zcmMva2xhcm5hL2tsYXJuYS1zY3JpcHQtbG9hZGVyLnRzPzQwZDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2tsYXJuYS1pbnRlZ3JhdGlvbi9zcmMva2xhcm5hL2NyZWF0ZS1rbGFybmEtcGF5bWVudC1zdHJhdGVneS50cz80M2RmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2tsYXJuYXYyL2tsYXJuYXYyLXBheW1lbnQtc3RyYXRlZ3kudHM/NjRmNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtZXhwZXJpbWVudC1lbmFibGVkL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC50cz9jOWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9jb250ZW50LXR5cGUudHM/NTA0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMva2xhcm5hLWludGVncmF0aW9uL3NyYy9rbGFybmF2Mi9rbGFybmF2Mi1zY3JpcHQtbG9hZGVyLnRzPzRlODgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMva2xhcm5hLWludGVncmF0aW9uL3NyYy9rbGFybmF2Mi9rbGFybmF2Mi10b2tlbi11cGRhdGVyLnRzP2YyMDciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2tsYXJuYS1pbnRlZ3JhdGlvbi9zcmMva2xhcm5hdjIvY3JlYXRlLWtsYXJuYXYyLXBheW1lbnQtc3RyYXRlZ3kudHM/ODEyYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuY29uc3QgREVGQVVMVF9SRVNQT05TRSA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBoZWFkZXJzOiB7fSxcbiAgICBzdGF0dXM6IDAsXG59O1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyLiBJdCB3cmFwc1xuICogYW55IHNlcnZlciByZXNwb25zZSBpbnRvIGEgSlMgZXJyb3Igb2JqZWN0LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0RXJyb3I8VEJvZHkgPSBhbnk+IGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgYm9keTogVEJvZHkgfCB7fTtcbiAgICBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAgIGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgc3RhdHVzOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVzcG9uc2U/OiBSZXNwb25zZTxUQm9keSB8IHt9PixcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgfToge1xuICAgICAgICAgICAgbWVzc2FnZT86IHN0cmluZztcbiAgICAgICAgICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgICAgICB9ID0ge30sXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSwgaGVhZGVycywgc3RhdHVzIH0gPSByZXNwb25zZSB8fCBERUZBVUxUX1JFU1BPTlNFO1xuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncmVxdWVzdCc7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gc3VjY2Vzc2Z1bGx5IHN1Ym1pdCBhIHNlcnZlciByZXF1ZXN0XG4gKiB1c2luZyBhIHBheW1lbnQgbWV0aG9kIGJlY2F1c2UgdGhlIG1ldGhvZCBoYXMgaW52YWxpZCBjb25maWd1cmF0aW9uIG9yIGlzIGluXG4gKiBhbiBpbnZhbGlkIHN0YXRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kSW52YWxpZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBzdXBwb3J0ZWRDb3VudHJpZXMgPSBbXG4gICAgJ0FUJyxcbiAgICAnQkUnLFxuICAgICdDQScsXG4gICAgJ0NIJyxcbiAgICAnQ1onLFxuICAgICdERScsXG4gICAgJ0RLJyxcbiAgICAnRVMnLFxuICAgICdGSScsXG4gICAgJ0ZSJyxcbiAgICAnR0InLFxuICAgICdHUicsXG4gICAgJ0lFJyxcbiAgICAnSVQnLFxuICAgICdOTCcsXG4gICAgJ05PJyxcbiAgICAnTlonLFxuICAgICdQTCcsXG4gICAgJ1BUJyxcbiAgICAnU0UnLFxuXTtcbmV4cG9ydCBjb25zdCBzdXBwb3J0ZWRDb3VudHJpZXNSZXF1aXJpbmdTdGF0ZXMgPSBbJ0FVJ107XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbmltcG9ydCB7IGluY2x1ZGVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIHN1cHBvcnRlZENvdW50cmllcyxcbiAgICBzdXBwb3J0ZWRDb3VudHJpZXNSZXF1aXJpbmdTdGF0ZXMsXG59IGZyb20gJy4uL2tsYXJuYXYyL2tsYXJuYS1zdXBwb3J0ZWQtY291bnRyaWVzJztcblxuaW1wb3J0IEtsYXJuYUNyZWRpdCwge1xuICAgIEtsYXJuYUFkZHJlc3MsXG4gICAgS2xhcm5hQXV0aG9yaXphdGlvblJlc3BvbnNlLFxuICAgIEtsYXJuYUxvYWRSZXNwb25zZSxcbiAgICBLbGFybmFVcGRhdGVTZXNzaW9uUGFyYW1zLFxufSBmcm9tICcuL2tsYXJuYS1jcmVkaXQnO1xuaW1wb3J0IHsgV2l0aEtsYXJuYVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4va2xhcm5hLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcbmltcG9ydCBLbGFybmFTY3JpcHRMb2FkZXIgZnJvbSAnLi9rbGFybmEtc2NyaXB0LWxvYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtsYXJuYVBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBrbGFybmFDcmVkaXQ/OiBLbGFybmFDcmVkaXQ7XG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZT86ICgpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGtsYXJuYVNjcmlwdExvYWRlcjogS2xhcm5hU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhLbGFybmFQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMua2xhcm5hQ3JlZGl0ID0gYXdhaXQgdGhpcy5rbGFybmFTY3JpcHRMb2FkZXIubG9hZCgpO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc1BheW1lbnRNZXRob2RJbml0aWFsaXplZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogb3B0aW9ucy5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZDogb3B0aW9ucy5nYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5sb2FkV2lkZ2V0KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja291dCA9IHN0YXRlLmdldENoZWNrb3V0KCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tvdXQgJiYgY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gc3RhdGUuZ2V0Q2hlY2tvdXQoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBjaGVja291dCAmJiBjaGVja291dC5jb3Vwb25zO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRXaWRnZXQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXBheWxvYWQucGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwicGF5bG9hZC5wYXltZW50XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgcGF5bWVudDogeyBwYXltZW50RGF0YSwgLi4ucGF5bWVudFBheWxvYWQgfSxcbiAgICAgICAgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgY29uc3QgeyBhdXRob3JpemF0aW9uX3Rva2VuOiBhdXRob3JpemF0aW9uVG9rZW4gfSA9IGF3YWl0IHRoaXMuYXV0aG9yaXplKCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHBheW1lbnRQYXlsb2FkLm1ldGhvZElkLCB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uVG9rZW4sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgIHBheW1lbnQ6IHBheW1lbnRQYXlsb2FkLFxuICAgICAgICAgICAgICAgIHVzZVN0b3JlQ3JlZGl0OiBwYXlsb2FkLnVzZVN0b3JlQ3JlZGl0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFdpZGdldChcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEtsYXJuYVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPEtsYXJuYUxvYWRSZXNwb25zZT4ge1xuICAgICAgICBpZiAoIW9wdGlvbnMua2xhcm5hKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBsb2FkIHdpZGdldCBiZWNhdXNlIFwib3B0aW9ucy5rbGFybmFcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGtsYXJuYTogeyBjb250YWluZXIsIG9uTG9hZCB9LFxuICAgICAgICB9ID0gb3B0aW9ucztcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxLbGFybmFMb2FkUmVzcG9uc2U+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLmtsYXJuYUNyZWRpdCB8fCAhcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMua2xhcm5hQ3JlZGl0LmluaXQoeyBjbGllbnRfdG9rZW46IHBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4gfSk7XG5cbiAgICAgICAgICAgIHRoaXMua2xhcm5hQ3JlZGl0LmxvYWQoeyBjb250YWluZXIgfSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9uTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICBvbkxvYWQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXBkYXRlU2Vzc2lvbkRhdGEoXG4gICAgICAgIGJpbGxpbmdBZGRyZXNzOiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzPzogQWRkcmVzcyxcbiAgICApOiBLbGFybmFVcGRhdGVTZXNzaW9uUGFyYW1zIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIFsuLi5zdXBwb3J0ZWRDb3VudHJpZXMsIC4uLnN1cHBvcnRlZENvdW50cmllc1JlcXVpcmluZ1N0YXRlc10sXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YTogS2xhcm5hVXBkYXRlU2Vzc2lvblBhcmFtcyA9IHtcbiAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzczogdGhpcy5tYXBUb0tsYXJuYUFkZHJlc3MoYmlsbGluZ0FkZHJlc3MsIGJpbGxpbmdBZGRyZXNzLmVtYWlsKSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBkYXRhLnNoaXBwaW5nX2FkZHJlc3MgPSB0aGlzLm1hcFRvS2xhcm5hQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MsIGJpbGxpbmdBZGRyZXNzLmVtYWlsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIHByaXZhdGUgbmVlZHNTdGF0ZUNvZGUoY291bnRyeUNvZGU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gaW5jbHVkZXMoc3VwcG9ydGVkQ291bnRyaWVzUmVxdWlyaW5nU3RhdGVzLCBjb3VudHJ5Q29kZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBUb0tsYXJuYUFkZHJlc3MoYWRkcmVzczogQWRkcmVzcywgZW1haWw/OiBzdHJpbmcpOiBLbGFybmFBZGRyZXNzIHtcbiAgICAgICAgY29uc3Qga2xhcm5hQWRkcmVzczogS2xhcm5hQWRkcmVzcyA9IHtcbiAgICAgICAgICAgIHN0cmVldF9hZGRyZXNzOiBhZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeTogYWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIGdpdmVuX25hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICAgICAgZmFtaWx5X25hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBwb3N0YWxfY29kZTogYWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgcmVnaW9uOiB0aGlzLm5lZWRzU3RhdGVDb2RlKGFkZHJlc3MuY291bnRyeUNvZGUpXG4gICAgICAgICAgICAgICAgPyBhZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGVcbiAgICAgICAgICAgICAgICA6IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgZW1haWwsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGFkZHJlc3MuYWRkcmVzczIpIHtcbiAgICAgICAgICAgIGtsYXJuYUFkZHJlc3Muc3RyZWV0X2FkZHJlc3MyID0gYWRkcmVzcy5hZGRyZXNzMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZGRyZXNzLnBob25lKSB7XG4gICAgICAgICAgICBrbGFybmFBZGRyZXNzLnBob25lID0gYWRkcmVzcy5waG9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrbGFybmFBZGRyZXNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXV0aG9yaXplKCk6IFByb21pc2U8S2xhcm5hQXV0aG9yaXphdGlvblJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgICAgIGlmICghYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMua2xhcm5hQ3JlZGl0KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdXBkYXRlU2Vzc2lvbkRhdGEgPSB0aGlzLmdldFVwZGF0ZVNlc3Npb25EYXRhKGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICB0aGlzLmtsYXJuYUNyZWRpdC5hdXRob3JpemUodXBkYXRlU2Vzc2lvbkRhdGEsIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zaG93X2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKCkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBLbGFybmFDcmVkaXQgZnJvbSAnLi9rbGFybmEtY3JlZGl0JztcbmltcG9ydCBLbGFybmFXaW5kb3cgZnJvbSAnLi9rbGFybmEtd2luZG93JztcblxuY29uc3QgU0RLX1VSTCA9ICcvL2NyZWRpdC5rbGFybmFjZG4ubmV0L2xpYi92MS9hcGkuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLbGFybmFTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsIHByaXZhdGUga2xhcm5hV2luZG93OiBLbGFybmFXaW5kb3cgPSB3aW5kb3cpIHt9XG5cbiAgICBhc3luYyBsb2FkKCk6IFByb21pc2U8S2xhcm5hQ3JlZGl0PiB7XG4gICAgICAgIGlmICghdGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hPy5DcmVkaXQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoU0RLX1VSTCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMua2xhcm5hV2luZG93LktsYXJuYT8uQ3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmtsYXJuYVdpbmRvdy5LbGFybmEuQ3JlZGl0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBLbGFybmFQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9rbGFybmEtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgS2xhcm5hU2NyaXB0TG9hZGVyIGZyb20gJy4va2xhcm5hLXNjcmlwdC1sb2FkZXInO1xuXG5jb25zdCBjcmVhdGVLbGFybmFQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8S2xhcm5hUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBLbGFybmFQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBLbGFybmFTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlS2xhcm5hUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ2tsYXJuYScgfV0pO1xuIiwiaW1wb3J0IHsgaW5jbHVkZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQmlsbGluZ0FkZHJlc3MsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEtsYXJuYVBheW1lbnRzLCB7XG4gICAgS2xhcm5hQWRkcmVzcyxcbiAgICBLbGFybmFBdXRob3JpemF0aW9uUmVzcG9uc2UsXG4gICAgS2xhcm5hSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEtsYXJuYUxvYWRSZXNwb25zZSxcbiAgICBLbGFybmFVcGRhdGVTZXNzaW9uUGFyYW1zLFxufSBmcm9tICcuL2tsYXJuYS1wYXltZW50cyc7XG5pbXBvcnQge1xuICAgIHN1cHBvcnRlZENvdW50cmllcyxcbiAgICBzdXBwb3J0ZWRDb3VudHJpZXNSZXF1aXJpbmdTdGF0ZXMsXG59IGZyb20gJy4va2xhcm5hLXN1cHBvcnRlZC1jb3VudHJpZXMnO1xuaW1wb3J0IHsgV2l0aEtsYXJuYVYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9rbGFybmF2Mi1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5pbXBvcnQgS2xhcm5hVjJTY3JpcHRMb2FkZXIgZnJvbSAnLi9rbGFybmF2Mi1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCBLbGFybmFWMlRva2VuVXBkYXRlciBmcm9tICcuL2tsYXJuYXYyLXRva2VuLXVwZGF0ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLbGFybmFWMlBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBrbGFybmFQYXltZW50cz86IEtsYXJuYVBheW1lbnRzO1xuICAgIHByaXZhdGUgdW5zdWJzY3JpYmU/OiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBrbGFybmF2MlNjcmlwdExvYWRlcjogS2xhcm5hVjJTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUga2xhcm5hdjJUb2tlblVwZGF0ZXI6IEtsYXJuYVYyVG9rZW5VcGRhdGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhLbGFybmFWMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5rbGFybmFQYXltZW50cyA9IGF3YWl0IHRoaXMua2xhcm5hdjJTY3JpcHRMb2FkZXIubG9hZCgpO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc1BheW1lbnRNZXRob2RJbml0aWFsaXplZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogb3B0aW9ucy5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZDogb3B0aW9ucy5nYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5sb2FkUGF5bWVudHNXaWRnZXQob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gc3RhdGUuZ2V0Q2hlY2tvdXQoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBjaGVja291dCAmJiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tvdXQgPSBzdGF0ZS5nZXRDaGVja291dCgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrb3V0ICYmIGNoZWNrb3V0LmNvdXBvbnM7XG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFBheW1lbnRzV2lkZ2V0KG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFwYXlsb2FkLnBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcInBheWxvYWQucGF5bWVudFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHBheW1lbnQ6IHsgLi4ucGF5bWVudFBheWxvYWQgfSxcbiAgICAgICAgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgZ2F0ZXdheUlkLCBtZXRob2RJZCB9ID0gcGF5bWVudFBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcInBheWxvYWQucGF5bWVudC5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGlkOiBjYXJ0SWQgfSA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEtsYXJuYUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGtsYXJuYU11bHRpcGxlUmFkaW9CdXR0b24gfSA9IGluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBhd2FpdCB0aGlzLmtsYXJuYXYyVG9rZW5VcGRhdGVyLmtsYXJuYU9yZGVySW5pdGlhbGl6YXRpb24oY2FydElkLCBjbGllbnRUb2tlbik7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZNChYXRlZ29yeSA9IHRoaXMuaXNLbGFybmFNdWx0aXBsZVJhZGlvQnV0dG9uRW5hYmxlZChcbiAgICAgICAgICAgIGtsYXJuYU11bHRpcGxlUmFkaW9CdXR0b24sXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBhdXRob3JpemF0aW9uX3Rva2VuOiBhdXRob3JpemF0aW9uVG9rZW4gfSA9IGF3YWl0IHRoaXMuYXV0aG9yaXplT3JUaHJvdyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2TQoWF0ZWdvcnksXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQoZ2F0ZXdheUlkLCB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uVG9rZW4sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5wYXlsb2FkLFxuICAgICAgICAgICAgICAgIHBheW1lbnQ6IHBheW1lbnRQYXlsb2FkLFxuICAgICAgICAgICAgICAgIHVzZVN0b3JlQ3JlZGl0OiBwYXlsb2FkLnVzZVN0b3JlQ3JlZGl0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheW1lbnRzV2lkZ2V0KFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoS2xhcm5hVjJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxLbGFybmFMb2FkUmVzcG9uc2U+IHtcbiAgICAgICAgaWYgKCFvcHRpb25zLmtsYXJuYXYyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBsb2FkIHdpZGdldCBiZWNhdXNlIFwib3B0aW9ucy5rbGFybmF2MlwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAga2xhcm5hdjI6IHsgY29udGFpbmVyLCBvbkxvYWQgfSxcbiAgICAgICAgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcInBheWxvYWQucGF5bWVudC5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7IHBhcmFtczogY2FydElkIH07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5rbGFybmF2MlRva2VuVXBkYXRlci51cGRhdGVDbGllbnRUb2tlbihnYXRld2F5SWQsIHsgcGFyYW1zIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEtsYXJuYUxvYWRSZXNwb25zZT4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxLbGFybmFJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2xhcm5hTXVsdGlwbGVSYWRpb0J1dHRvbiB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5rbGFybmFQYXltZW50cyB8fCAhcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMua2xhcm5hUGF5bWVudHMuaW5pdCh7IGNsaWVudF90b2tlbjogcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbiB9KTtcbiAgICAgICAgICAgIHRoaXMua2xhcm5hUGF5bWVudHMubG9hZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2RfY2F0ZWdvcnk6IHRoaXMuaXNLbGFybmFNdWx0aXBsZVJhZGlvQnV0dG9uRW5hYmxlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIGtsYXJuYU11bHRpcGxlUmFkaW9CdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAob25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkxvYWQocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VXBkYXRlU2Vzc2lvbkRhdGEoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpbGxpbmdBZGRyZXNzOiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzPzogQWRkcmVzcyxcbiAgICApOiBLbGFybmFVcGRhdGVTZXNzaW9uUGFyYW1zIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWluY2x1ZGVzKFxuICAgICAgICAgICAgICAgIFsuLi5zdXBwb3J0ZWRDb3VudHJpZXMsIC4uLnN1cHBvcnRlZENvdW50cmllc1JlcXVpcmluZ1N0YXRlc10sXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YTogS2xhcm5hVXBkYXRlU2Vzc2lvblBhcmFtcyA9IHtcbiAgICAgICAgICAgIGJpbGxpbmdfYWRkcmVzczogdGhpcy5tYXBUb0tsYXJuYUFkZHJlc3MoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MuZW1haWwsXG4gICAgICAgICAgICApLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGRhdGEuc2hpcHBpbmdfYWRkcmVzcyA9IHRoaXMubWFwVG9LbGFybmFBZGRyZXNzKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcy5lbWFpbCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5lZWRzU3RhdGVDb2RlKGNvdW50cnlDb2RlOiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIGluY2x1ZGVzKHN1cHBvcnRlZENvdW50cmllc1JlcXVpcmluZ1N0YXRlcywgY291bnRyeUNvZGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNLbGFybmFNdWx0aXBsZVJhZGlvQnV0dG9uRW5hYmxlZChcbiAgICAgICAga2xhcm5hTXVsdGlwbGVSYWRpb0J1dHRvbjogYm9vbGVhbiB8IHVuZGVmaW5lZCxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGtsYXJuYU11bHRpcGxlUmFkaW9CdXR0b24gPyBtZXRob2RJZCA6IGdhdGV3YXlJZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFRvS2xhcm5hQWRkcmVzcyhtZXRob2RJZDogc3RyaW5nLCBhZGRyZXNzOiBBZGRyZXNzLCBlbWFpbD86IHN0cmluZyk6IEtsYXJuYUFkZHJlc3Mge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0U2V0dGluZ3MgfSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8S2xhcm5hSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgZW5hYmxlQmlsbGllIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBrbGFybmFBZGRyZXNzOiBLbGFybmFBZGRyZXNzID0ge1xuICAgICAgICAgICAgc3RyZWV0X2FkZHJlc3M6IGFkZHJlc3MuYWRkcmVzczEsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5OiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogYWRkcmVzcy5maXJzdE5hbWUsXG4gICAgICAgICAgICBmYW1pbHlfbmFtZTogYWRkcmVzcy5sYXN0TmFtZSxcbiAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICByZWdpb246IHRoaXMubmVlZHNTdGF0ZUNvZGUoYWRkcmVzcy5jb3VudHJ5Q29kZSlcbiAgICAgICAgICAgICAgICA/IGFkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZVxuICAgICAgICAgICAgICAgIDogYWRkcmVzcy5zdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoYWRkcmVzcy5hZGRyZXNzMikge1xuICAgICAgICAgICAga2xhcm5hQWRkcmVzcy5zdHJlZXRfYWRkcmVzczIgPSBhZGRyZXNzLmFkZHJlc3MyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFkZHJlc3MucGhvbmUpIHtcbiAgICAgICAgICAgIGtsYXJuYUFkZHJlc3MucGhvbmUgPSBhZGRyZXNzLnBob25lO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYWRkcmVzcy5jb21wYW55ICYmXG4gICAgICAgICAgICBlbmFibGVCaWxsaWUgJiZcbiAgICAgICAgICAgIGlzRXhwZXJpbWVudEVuYWJsZWQoY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcywgJ1BJLTM5MTUuYjJiX3BheW1lbnRfc2Vzc2lvbl9mb3Jfa2xhcm5hJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBrbGFybmFBZGRyZXNzLm9yZ2FuaXphdGlvbl9uYW1lID0gYWRkcmVzcy5jb21wYW55O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGtsYXJuYUFkZHJlc3M7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBhdXRob3JpemVPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9k0KFhdGVnb3J5OiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxLbGFybmFBdXRob3JpemF0aW9uUmVzcG9uc2U+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dCgpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHN0YXRlLmdldFNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgIGNvbnN0IHVwZGF0ZVNlc3Npb25EYXRhID0gdGhpcy5nZXRVcGRhdGVTZXNzaW9uRGF0YShcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3MsXG4gICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEtsYXJuYUF1dGhvcml6YXRpb25SZXNwb25zZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmtsYXJuYVBheW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmtsYXJuYVBheW1lbnRzLmF1dGhvcml6ZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kX2NhdGVnb3J5OiBwYXltZW50TWV0aG9k0KFhdGVnb3J5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXBkYXRlU2Vzc2lvbkRhdGEsXG4gICAgICAgICAgICAgICAgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zaG93X2Zvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBGZWF0dXJlcyB7XG4gICAgW2ZlYXR1cmVOYW1lOiBzdHJpbmddOiBib29sZWFuIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgIGZlYXR1cmVzOiBGZWF0dXJlcyxcbiAgICBleHBlcmltZW50TmFtZTogc3RyaW5nLFxuICAgIGZhbGxiYWNrVmFsdWUgPSB0cnVlLFxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZlYXR1cmVzW2V4cGVyaW1lbnROYW1lXSA/PyBmYWxsYmFja1ZhbHVlO1xufVxuIiwiZW51bSBDb250ZW50VHlwZSB7XG4gICAgSnNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBKc29uVjEgPSAnYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50VHlwZTtcbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEtsYXJuYVBheW1lbnRzIGZyb20gJy4va2xhcm5hLXBheW1lbnRzJztcbmltcG9ydCBLbGFybmFWMldpbmRvdyBmcm9tICcuL2tsYXJuYXYyLXdpbmRvdyc7XG5cbmNvbnN0IFNES19VUkwgPSAnaHR0cHM6Ly94LmtsYXJuYWNkbi5uZXQva3AvbGliL3YxL2FwaS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtsYXJuYVYyU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBrbGFybmFXaW5kb3c6IEtsYXJuYVYyV2luZG93ID0gd2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGxvYWQoKTogUHJvbWlzZTxLbGFybmFQYXltZW50cz4ge1xuICAgICAgICBpZiAoIXRoaXMua2xhcm5hV2luZG93LktsYXJuYT8uUGF5bWVudHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoU0RLX1VSTCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMua2xhcm5hV2luZG93LktsYXJuYT8uUGF5bWVudHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMua2xhcm5hV2luZG93LktsYXJuYS5QYXltZW50cztcbiAgICB9XG59XG4iLCJleHBvcnQgY29uc3QgSU5URVJOQUxfVVNFX09OTFkgPVxuICAgICdUaGlzIEFQSSBlbmRwb2ludCBpcyBmb3IgaW50ZXJuYWwgdXNlIG9ubHkgYW5kIG1heSBjaGFuZ2UgaW4gdGhlIGZ1dHVyZSc7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIsIFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IHtcbiAgICBDb250ZW50VHlwZSxcbiAgICBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBLbGFybmFWMlRva2VuVXBkYXRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgdXBkYXRlQ2xpZW50VG9rZW4oXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICB7IHRpbWVvdXQsIHBhcmFtcyB9OiBSZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgICk6IFByb21pc2U8UmVzcG9uc2U8UGF5bWVudE1ldGhvZD4+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9wYXltZW50cy8ke2dhdGV3YXlJZH1gO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0KHVybCwge1xuICAgICAgICAgICAgdGltZW91dCxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IENvbnRlbnRUeXBlLkpzb25WMSxcbiAgICAgICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMga2xhcm5hT3JkZXJJbml0aWFsaXphdGlvbihcbiAgICAgICAgY2FydElkOiBzdHJpbmcsXG4gICAgICAgIGNsaWVudFRva2VuOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24va2xhcm5hYDtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBBY2NlcHQ6IENvbnRlbnRUeXBlLkpzb25WMSxcbiAgICAgICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgY2xpZW50VG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wdXQodXJsLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBLbGFybmFWMlBheW1lbnRTdHJhdGVneSBmcm9tICcuL2tsYXJuYXYyLXBheW1lbnQtc3RyYXRlZ3knO1xuaW1wb3J0IEtsYXJuYVYyU2NyaXB0TG9hZGVyIGZyb20gJy4va2xhcm5hdjItc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQgS2xhcm5hVjJUb2tlblVwZGF0ZXIgZnJvbSAnLi9rbGFybmF2Mi10b2tlbi11cGRhdGVyJztcblxuY29uc3QgY3JlYXRlS2xhcm5hVjJQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8S2xhcm5hVjJQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICBjb25zdCByZXF1ZXN0U2VuZGVyID0gY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KTtcblxuICAgIHJldHVybiBuZXcgS2xhcm5hVjJQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBLbGFybmFWMlNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIG5ldyBLbGFybmFWMlRva2VuVXBkYXRlcihyZXF1ZXN0U2VuZGVyKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUtsYXJuYVYyUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAna2xhcm5hJyB9XSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJ0b1Jlc29sdmFibGVNb2R1bGUiLCJtb2R1bGUiLCJyZXNvbHZlSWRzIiwiT2JqZWN0IiwiYXNzaWduIiwiZCIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiTWlzc2luZ0RhdGFFcnJvciIsInN1YnR5cGUiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEVycm9yTWVzc2FnZSIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IiLCJERUZBVUxUX1JFU1BPTlNFIiwiYm9keSIsImhlYWRlcnMiLCJzdGF0dXMiLCJSZXF1ZXN0RXJyb3IiLCJyZXNwb25zZSIsImVycm9ycyIsIlBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IiLCJzdXBwb3J0ZWRDb3VudHJpZXMiLCJzdXBwb3J0ZWRDb3VudHJpZXNSZXF1aXJpbmdTdGF0ZXMiLCJLbGFybmFQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwia2xhcm5hU2NyaXB0TG9hZGVyIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJrbGFybmFDcmVkaXQiLCJsb2FkIiwidW5zdWJzY3JpYmUiLCJzdWJzY3JpYmUiLCJzdGF0ZSIsImlzUGF5bWVudE1ldGhvZEluaXRpYWxpemVkIiwibWV0aG9kSWQiLCJnYXRld2F5SWQiLCJsb2FkV2lkZ2V0IiwiY2hlY2tvdXQiLCJnZXRDaGVja291dCIsIm91dHN0YW5kaW5nQmFsYW5jZSIsImNvdXBvbnMiLCJkZWluaXRpYWxpemUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsInBheW1lbnREYXRhIiwicGF5bWVudFBheWxvYWQiLCJhdXRob3JpemF0aW9uX3Rva2VuIiwiYXV0aG9yaXphdGlvblRva2VuIiwiYXV0aG9yaXplIiwiaW5pdGlhbGl6ZVBheW1lbnQiLCJzdWJtaXRPcmRlciIsInVzZVN0b3JlQ3JlZGl0IiwiZmluYWxpemUiLCJyZWplY3QiLCJrbGFybmEiLCJjb250YWluZXIiLCJvbkxvYWQiLCJsb2FkUGF5bWVudE1ldGhvZCIsInBheW1lbnRNZXRob2QiLCJnZXRTdGF0ZSIsImdldFBheW1lbnRNZXRob2QiLCJjbGllbnRUb2tlbiIsImluaXQiLCJjbGllbnRfdG9rZW4iLCJnZXRVcGRhdGVTZXNzaW9uRGF0YSIsImJpbGxpbmdBZGRyZXNzIiwic2hpcHBpbmdBZGRyZXNzIiwiaW5jbHVkZXMiLCJjb3VudHJ5Q29kZSIsImRhdGEiLCJiaWxsaW5nX2FkZHJlc3MiLCJtYXBUb0tsYXJuYUFkZHJlc3MiLCJlbWFpbCIsInNoaXBwaW5nX2FkZHJlc3MiLCJuZWVkc1N0YXRlQ29kZSIsImFkZHJlc3MiLCJrbGFybmFBZGRyZXNzIiwic3RyZWV0X2FkZHJlc3MiLCJhZGRyZXNzMSIsImNpdHkiLCJjb3VudHJ5IiwiZ2l2ZW5fbmFtZSIsImZpcnN0TmFtZSIsImZhbWlseV9uYW1lIiwibGFzdE5hbWUiLCJwb3N0YWxfY29kZSIsInBvc3RhbENvZGUiLCJyZWdpb24iLCJzdGF0ZU9yUHJvdmluY2VDb2RlIiwic3RhdGVPclByb3ZpbmNlIiwiYWRkcmVzczIiLCJzdHJlZXRfYWRkcmVzczIiLCJwaG9uZSIsImdldEJpbGxpbmdBZGRyZXNzIiwiZ2V0U2hpcHBpbmdBZGRyZXNzIiwidXBkYXRlU2Vzc2lvbkRhdGEiLCJyZXMiLCJhcHByb3ZlZCIsInNob3dfZm9ybSIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiS2xhcm5hU2NyaXB0TG9hZGVyIiwic2NyaXB0TG9hZGVyIiwia2xhcm5hV2luZG93Iiwid2luZG93IiwiS2xhcm5hIiwiQ3JlZGl0IiwibG9hZFNjcmlwdCIsImdldFNjcmlwdExvYWRlciIsImlkIiwiS2xhcm5hVjJQYXltZW50U3RyYXRlZ3kiLCJrbGFybmF2MlNjcmlwdExvYWRlciIsImtsYXJuYXYyVG9rZW5VcGRhdGVyIiwia2xhcm5hUGF5bWVudHMiLCJsb2FkUGF5bWVudHNXaWRnZXQiLCJjYXJ0SWQiLCJnZXRDYXJ0T3JUaHJvdyIsImluaXRpYWxpemF0aW9uRGF0YSIsImdldFBheW1lbnRNZXRob2RPclRocm93Iiwia2xhcm5hTXVsdGlwbGVSYWRpb0J1dHRvbiIsImtsYXJuYU9yZGVySW5pdGlhbGl6YXRpb24iLCJpc0tsYXJuYU11bHRpcGxlUmFkaW9CdXR0b25FbmFibGVkIiwiYXV0aG9yaXplT3JUaHJvdyIsImtsYXJuYXYyIiwicGFyYW1zIiwidXBkYXRlQ2xpZW50VG9rZW4iLCJjYXRjaCIsInBheW1lbnRfbWV0aG9kX2NhdGVnb3J5IiwiY2hlY2tvdXRTZXR0aW5ncyIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImVuYWJsZUJpbGxpZSIsImNvbXBhbnkiLCJmZWF0dXJlcyIsImV4cGVyaW1lbnROYW1lIiwiZmFsbGJhY2tWYWx1ZSIsImlzRXhwZXJpbWVudEVuYWJsZWQiLCJvcmdhbml6YXRpb25fbmFtZSIsImxvYWRDaGVja291dCIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsIkNvbnRlbnRUeXBlIiwiS2xhcm5hVjJTY3JpcHRMb2FkZXIiLCJQYXltZW50cyIsIklOVEVSTkFMX1VTRV9PTkxZIiwiU0RLX1ZFUlNJT05fSEVBREVSUyIsIktsYXJuYVYyVG9rZW5VcGRhdGVyIiwicmVxdWVzdFNlbmRlciIsInRpbWVvdXQiLCJ1cmwiLCJBY2NlcHQiLCJKc29uVjEiLCJwdXQiLCJnZXRIb3N0IiwiY3JlYXRlUmVxdWVzdFNlbmRlciIsImhvc3QiLCJnYXRld2F5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/klarna.js\n\n}");

/***/ }),

/***/ "./packages/klarna-integration/src/index.ts":
/*!**************************************************!*\
  !*** ./packages/klarna-integration/src/index.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   KlarnaPaymentMethod: () => (/* reexport safe */ _klarna_KlarnaPaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   KlarnaV2PaymentMethod: () => (/* reexport safe */ _klarnav2_KlarnaV2PaymentMethod__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _klarna_KlarnaPaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./klarna/KlarnaPaymentMethod */ \"./packages/klarna-integration/src/klarna/KlarnaPaymentMethod.tsx\");\n/* harmony import */ var _klarnav2_KlarnaV2PaymentMethod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./klarnav2/KlarnaV2PaymentMethod */ \"./packages/klarna-integration/src/klarnav2/KlarnaV2PaymentMethod.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEU7QUFDTSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMva2xhcm5hLWludGVncmF0aW9uL3NyYy9pbmRleC50cz8wNjBiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGRlZmF1bHQgYXMgS2xhcm5hUGF5bWVudE1ldGhvZCB9IGZyb20gJy4va2xhcm5hL0tsYXJuYVBheW1lbnRNZXRob2QnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBLbGFybmFWMlBheW1lbnRNZXRob2QgfSBmcm9tICcuL2tsYXJuYXYyL0tsYXJuYVYyUGF5bWVudE1ldGhvZCc7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/klarna-integration/src/index.ts\n\n}");

/***/ }),

/***/ "./packages/klarna-integration/src/klarna/KlarnaPaymentMethod.tsx":
/*!************************************************************************!*\
  !*** ./packages/klarna-integration/src/klarna/KlarnaPaymentMethod.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_klarna__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/klarna */ \"../checkout-sdk-js/dist/esm/integrations/klarna.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\n\n\nconst KlarnaPaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, method, paymentForm } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"method\", \"paymentForm\"]);\n    const initializeKlarnaPayment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options) => \n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_klarna__WEBPACK_IMPORTED_MODULE_1__.createKlarnaPaymentStrategy], klarna: {\n            container: `#${options.methodId}Widget`,\n        } })), [checkoutService]);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const { data: { getCheckout, isPaymentDataRequired }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({ containerId: `${method.id}Widget`, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializeKlarnaPayment, instruments: instruments, isInstrumentCardCodeRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState), isInstrumentCardNumberRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(checkoutState), isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: (0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(checkout === null || checkout === void 0 ? void 0 : checkout.payments, { providerId: method.id }), loadInstruments: checkoutService.loadInstruments, method: method, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, signOut: checkoutService.signOutCustomer }, rest)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(KlarnaPaymentMethod, [{ id: 'klarna' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2tsYXJuYS9LbGFybmFQYXltZW50TWV0aG9kLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNEY7QUFDOUQ7QUFDcUM7QUFFNEI7QUFJL0M7QUFLTztBQUV2RCxNQUFNLG1CQUFtQixHQUEwQyxDQUFDLEVBTW5FLEVBQUUsRUFBRTtRQU4rRCxFQUNoRSxlQUFlLEVBQ2YsYUFBYSxFQUNiLE1BQU0sRUFDTixXQUFXLE9BRWQsRUFETSxJQUFJLHFEQUx5RCw2REFNbkUsQ0FEVTtJQUVQLE1BQU0sdUJBQXVCLEdBQUcsa0RBQVcsQ0FDdkMsQ0FBQyxPQUFZLEVBQUUsRUFBRTtJQUNiLGlFQUFpRTtJQUNqRSxlQUFlLENBQUMsaUJBQWlCLGlDQUMxQixPQUFPLEtBQ1YsWUFBWSxFQUFFLENBQUMsc0dBQTJCLENBQUMsRUFDM0MsTUFBTSxFQUFFO1lBQ0osU0FBUyxFQUFFLElBQUksT0FBTyxDQUFDLFFBQVEsUUFBUTtTQUMxQyxJQUNILEVBQ04sQ0FBQyxlQUFlLENBQUMsQ0FDcEIsQ0FBQztJQUVGLE1BQU0sRUFDRix1QkFBdUIsRUFDdkIsYUFBYSxFQUNiLGFBQWEsRUFDYixTQUFTLEVBQ1QsbUJBQW1CLEdBQ3RCLEdBQUcsV0FBVyxDQUFDO0lBRWhCLE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxNQUFNLEVBQ0YsSUFBSSxFQUFFLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLEVBQzVDLFFBQVEsRUFBRSxFQUFFLG9CQUFvQixFQUFFLEdBQ3JDLEdBQUcsYUFBYSxDQUFDO0lBRWxCLE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxDQUFDO0lBQy9CLE1BQU0sUUFBUSxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEQsTUFBTSxlQUFlLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUMxQyxNQUFNLDRCQUE0QixHQUM5QixDQUFDLGVBQWUsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRWpFLE9BQU8sQ0FDSCwyREFBQyx1RkFBNEIsa0JBQ3pCLFdBQVcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFDakMsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix1QkFBdUIsRUFBRSx1QkFBdUIsRUFDaEQsaUJBQWlCLEVBQUUsdUJBQXVCLEVBQzFDLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLDRCQUE0QixFQUFFLGtGQUFvQyxDQUFDLGFBQWEsQ0FBQyxFQUNqRiw4QkFBOEIsRUFBRSxrRkFBc0MsQ0FBQyxhQUFhLENBQUMsRUFDckYsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLEVBQzVDLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLEVBQzlDLFVBQVUsRUFBRSw0Q0FBSSxDQUFDLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxRQUFRLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQy9ELGVBQWUsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUNoRCxNQUFNLEVBQUUsTUFBTSxFQUNkLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLG1CQUFtQixFQUFFLG1CQUFtQixFQUN4QyxPQUFPLEVBQUUsZUFBZSxDQUFDLGVBQWUsSUFDcEMsSUFBSSxFQUNWLENBQ0wsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxtQkFBbUIsRUFDbkIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUNyQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2tsYXJuYS9LbGFybmFQYXltZW50TWV0aG9kLnRzeD8xYWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUtsYXJuYVBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2tsYXJuYSc7XG5pbXBvcnQgeyBzb21lIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgSG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9ob3N0ZWQtd2lkZ2V0LWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yLFxuICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQge1xuICAgIHR5cGUgUGF5bWVudE1ldGhvZFByb3BzLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmNvbnN0IEtsYXJuYVBheW1lbnRNZXRob2Q6IEZ1bmN0aW9uQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcz4gPSAoe1xuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIG1ldGhvZCxcbiAgICBwYXltZW50Rm9ybSxcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZUtsYXJuYVBheW1lbnQgPSB1c2VDYWxsYmFjayhcbiAgICAgICAgKG9wdGlvbnM6IGFueSkgPT5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBbY3JlYXRlS2xhcm5hUGF5bWVudFN0cmF0ZWd5XSxcbiAgICAgICAgICAgICAgICBrbGFybmE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBgIyR7b3B0aW9ucy5tZXRob2RJZH1XaWRnZXRgLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZV0sXG4gICAgKTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b24sXG4gICAgICAgIGRpc2FibGVTdWJtaXQsXG4gICAgICAgIHNldEZpZWxkVmFsdWUsXG4gICAgICAgIHNldFN1Ym1pdCxcbiAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYSxcbiAgICB9ID0gcGF5bWVudEZvcm07XG5cbiAgICBjb25zdCBpbnN0cnVtZW50cyA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRJbnN0cnVtZW50cyhtZXRob2QpIHx8IFtdO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBkYXRhOiB7IGdldENoZWNrb3V0LCBpc1BheW1lbnREYXRhUmVxdWlyZWQgfSxcbiAgICAgICAgc3RhdHVzZXM6IHsgaXNMb2FkaW5nSW5zdHJ1bWVudHMgfSxcbiAgICB9ID0gY2hlY2tvdXRTdGF0ZTtcblxuICAgIGNvbnN0IGNoZWNrb3V0ID0gZ2V0Q2hlY2tvdXQoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRDdXN0b21lcigpO1xuICAgIGNvbnN0IGlzR3Vlc3RDdXN0b21lciA9IGN1c3RvbWVyPy5pc0d1ZXN0O1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUgPVxuICAgICAgICAhaXNHdWVzdEN1c3RvbWVyICYmIEJvb2xlYW4obWV0aG9kLmNvbmZpZy5pc1ZhdWx0aW5nRW5hYmxlZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8SG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudFxuICAgICAgICAgICAgY29udGFpbmVySWQ9e2Ake21ldGhvZC5pZH1XaWRnZXRgfVxuICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICBkaXNhYmxlU3VibWl0PXtkaXNhYmxlU3VibWl0fVxuICAgICAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b249e2hpZGVQYXltZW50U3VibWl0QnV0dG9ufVxuICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVLbGFybmFQYXltZW50fVxuICAgICAgICAgICAgaW5zdHJ1bWVudHM9e2luc3RydW1lbnRzfVxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpfVxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKX1cbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGU9e2lzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGV9XG4gICAgICAgICAgICBpc0xvYWRpbmdJbnN0cnVtZW50cz17aXNMb2FkaW5nSW5zdHJ1bWVudHMoKX1cbiAgICAgICAgICAgIGlzUGF5bWVudERhdGFSZXF1aXJlZD17aXNQYXltZW50RGF0YVJlcXVpcmVkKCl9XG4gICAgICAgICAgICBpc1NpZ25lZEluPXtzb21lKGNoZWNrb3V0Py5wYXltZW50cywgeyBwcm92aWRlcklkOiBtZXRob2QuaWQgfSl9XG4gICAgICAgICAgICBsb2FkSW5zdHJ1bWVudHM9e2NoZWNrb3V0U2VydmljZS5sb2FkSW5zdHJ1bWVudHN9XG4gICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgIHNldEZpZWxkVmFsdWU9e3NldEZpZWxkVmFsdWV9XG4gICAgICAgICAgICBzZXRTdWJtaXQ9e3NldFN1Ym1pdH1cbiAgICAgICAgICAgIHNldFZhbGlkYXRpb25TY2hlbWE9e3NldFZhbGlkYXRpb25TY2hlbWF9XG4gICAgICAgICAgICBzaWduT3V0PXtjaGVja291dFNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyfVxuICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgIC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHMsIFBheW1lbnRNZXRob2RSZXNvbHZlSWQ+KFxuICAgIEtsYXJuYVBheW1lbnRNZXRob2QsXG4gICAgW3sgaWQ6ICdrbGFybmEnIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/klarna-integration/src/klarna/KlarnaPaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/klarna-integration/src/klarnav2/KlarnaV2PaymentMethod.tsx":
/*!****************************************************************************!*\
  !*** ./packages/klarna-integration/src/klarnav2/KlarnaV2PaymentMethod.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_klarna__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/klarna */ \"../checkout-sdk-js/dist/esm/integrations/klarna.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\n\n\nconst KlarnaV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, method, paymentForm } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"method\", \"paymentForm\"]);\n    const initializeKlarnaV2Payment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options) => \n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_klarna__WEBPACK_IMPORTED_MODULE_1__.createKlarnaV2PaymentStrategy], klarnav2: {\n            container: `#${options.methodId}Widget`,\n        } })), [checkoutService]);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const { data: { getCheckout, isPaymentDataRequired }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({ containerId: `${method.id}Widget`, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializeKlarnaV2Payment, instruments: instruments, isInstrumentCardCodeRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState), isInstrumentCardNumberRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(checkoutState), isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: (0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(checkout === null || checkout === void 0 ? void 0 : checkout.payments, { providerId: method.id }), loadInstruments: checkoutService.loadInstruments, method: method, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, signOut: checkoutService.signOutCustomer }, rest)));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(KlarnaV2PaymentMethod, [{ gateway: 'klarna' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9rbGFybmEtaW50ZWdyYXRpb24vc3JjL2tsYXJuYXYyL0tsYXJuYVYyUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQThGO0FBQ2hFO0FBQ3FDO0FBRTRCO0FBSS9DO0FBS087QUFFdkQsTUFBTSxxQkFBcUIsR0FBMEMsQ0FBQyxFQU1yRSxFQUFFLEVBQUU7UUFOaUUsRUFDbEUsZUFBZSxFQUNmLGFBQWEsRUFDYixNQUFNLEVBQ04sV0FBVyxPQUVkLEVBRE0sSUFBSSxxREFMMkQsNkRBTXJFLENBRFU7SUFFUCxNQUFNLHlCQUF5QixHQUFHLGtEQUFXLENBQ3pDLENBQUMsT0FBWSxFQUFFLEVBQUU7SUFDYixpRUFBaUU7SUFDakUsZUFBZSxDQUFDLGlCQUFpQixpQ0FDMUIsT0FBTyxLQUNWLFlBQVksRUFBRSxDQUFDLHdHQUE2QixDQUFDLEVBQzdDLFFBQVEsRUFBRTtZQUNOLFNBQVMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxRQUFRLFFBQVE7U0FDMUMsSUFDSCxFQUNOLENBQUMsZUFBZSxDQUFDLENBQ3BCLENBQUM7SUFFRixNQUFNLEVBQ0YsdUJBQXVCLEVBQ3ZCLGFBQWEsRUFDYixhQUFhLEVBQ2IsU0FBUyxFQUNULG1CQUFtQixHQUN0QixHQUFHLFdBQVcsQ0FBQztJQUVoQixNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFFcEUsTUFBTSxFQUNGLElBQUksRUFBRSxFQUFFLFdBQVcsRUFBRSxxQkFBcUIsRUFBRSxFQUM1QyxRQUFRLEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxHQUNyQyxHQUFHLGFBQWEsQ0FBQztJQUVsQixNQUFNLFFBQVEsR0FBRyxXQUFXLEVBQUUsQ0FBQztJQUMvQixNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2xELE1BQU0sZUFBZSxHQUFHLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxPQUFPLENBQUM7SUFDMUMsTUFBTSw0QkFBNEIsR0FDOUIsQ0FBQyxlQUFlLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUVqRSxPQUFPLENBQ0gsMkRBQUMsdUZBQTRCLGtCQUN6QixXQUFXLEVBQUUsR0FBRyxNQUFNLENBQUMsRUFBRSxRQUFRLEVBQ2pDLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsYUFBYSxFQUFFLGFBQWEsRUFDNUIsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQ2hELGlCQUFpQixFQUFFLHlCQUF5QixFQUM1QyxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw0QkFBNEIsRUFBRSxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsRUFDakYsOEJBQThCLEVBQUUsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLEVBQ3JGLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCxvQkFBb0IsRUFBRSxvQkFBb0IsRUFBRSxFQUM1QyxxQkFBcUIsRUFBRSxxQkFBcUIsRUFBRSxFQUM5QyxVQUFVLEVBQUUsNENBQUksQ0FBQyxRQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsUUFBUSxFQUFFLEVBQUUsVUFBVSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUMvRCxlQUFlLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFDaEQsTUFBTSxFQUFFLE1BQU0sRUFDZCxhQUFhLEVBQUUsYUFBYSxFQUM1QixTQUFTLEVBQUUsU0FBUyxFQUNwQixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsT0FBTyxFQUFFLGVBQWUsQ0FBQyxlQUFlLElBQ3BDLElBQUksRUFDVixDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMscUJBQXFCLEVBQ3JCLENBQUMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FDMUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMva2xhcm5hLWludGVncmF0aW9uL3NyYy9rbGFybmF2Mi9LbGFybmFWMlBheW1lbnRNZXRob2QudHN4PzE5YTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlS2xhcm5hVjJQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9rbGFybmEnO1xuaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5jb25zdCBLbGFybmFWMlBheW1lbnRNZXRob2Q6IEZ1bmN0aW9uQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcz4gPSAoe1xuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIG1ldGhvZCxcbiAgICBwYXltZW50Rm9ybSxcbiAgICAuLi5yZXN0XG59KSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbGl6ZUtsYXJuYVYyUGF5bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAob3B0aW9uczogYW55KSA9PlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgIGNoZWNrb3V0U2VydmljZS5pbml0aWFsaXplUGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IFtjcmVhdGVLbGFybmFWMlBheW1lbnRTdHJhdGVneV0sXG4gICAgICAgICAgICAgICAga2xhcm5hdjI6IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBgIyR7b3B0aW9ucy5tZXRob2RJZH1XaWRnZXRgLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZV0sXG4gICAgKTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b24sXG4gICAgICAgIGRpc2FibGVTdWJtaXQsXG4gICAgICAgIHNldEZpZWxkVmFsdWUsXG4gICAgICAgIHNldFN1Ym1pdCxcbiAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYSxcbiAgICB9ID0gcGF5bWVudEZvcm07XG5cbiAgICBjb25zdCBpbnN0cnVtZW50cyA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRJbnN0cnVtZW50cyhtZXRob2QpIHx8IFtdO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBkYXRhOiB7IGdldENoZWNrb3V0LCBpc1BheW1lbnREYXRhUmVxdWlyZWQgfSxcbiAgICAgICAgc3RhdHVzZXM6IHsgaXNMb2FkaW5nSW5zdHJ1bWVudHMgfSxcbiAgICB9ID0gY2hlY2tvdXRTdGF0ZTtcblxuICAgIGNvbnN0IGNoZWNrb3V0ID0gZ2V0Q2hlY2tvdXQoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRDdXN0b21lcigpO1xuICAgIGNvbnN0IGlzR3Vlc3RDdXN0b21lciA9IGN1c3RvbWVyPy5pc0d1ZXN0O1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUgPVxuICAgICAgICAhaXNHdWVzdEN1c3RvbWVyICYmIEJvb2xlYW4obWV0aG9kLmNvbmZpZy5pc1ZhdWx0aW5nRW5hYmxlZCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8SG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudFxuICAgICAgICAgICAgY29udGFpbmVySWQ9e2Ake21ldGhvZC5pZH1XaWRnZXRgfVxuICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICBkaXNhYmxlU3VibWl0PXtkaXNhYmxlU3VibWl0fVxuICAgICAgICAgICAgaGlkZVBheW1lbnRTdWJtaXRCdXR0b249e2hpZGVQYXltZW50U3VibWl0QnV0dG9ufVxuICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVLbGFybmFWMlBheW1lbnR9XG4gICAgICAgICAgICBpbnN0cnVtZW50cz17aW5zdHJ1bWVudHN9XG4gICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSl9XG4gICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpfVxuICAgICAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZT17aXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZX1cbiAgICAgICAgICAgIGlzTG9hZGluZ0luc3RydW1lbnRzPXtpc0xvYWRpbmdJbnN0cnVtZW50cygpfVxuICAgICAgICAgICAgaXNQYXltZW50RGF0YVJlcXVpcmVkPXtpc1BheW1lbnREYXRhUmVxdWlyZWQoKX1cbiAgICAgICAgICAgIGlzU2lnbmVkSW49e3NvbWUoY2hlY2tvdXQ/LnBheW1lbnRzLCB7IHByb3ZpZGVySWQ6IG1ldGhvZC5pZCB9KX1cbiAgICAgICAgICAgIGxvYWRJbnN0cnVtZW50cz17Y2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50c31cbiAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZT17c2V0RmllbGRWYWx1ZX1cbiAgICAgICAgICAgIHNldFN1Ym1pdD17c2V0U3VibWl0fVxuICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgIHNpZ25PdXQ9e2NoZWNrb3V0U2VydmljZS5zaWduT3V0Q3VzdG9tZXJ9XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgS2xhcm5hVjJQYXltZW50TWV0aG9kLFxuICAgIFt7IGdhdGV3YXk6ICdrbGFybmEnIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/klarna-integration/src/klarnav2/KlarnaV2PaymentMethod.tsx\n\n}");

/***/ })

}]);