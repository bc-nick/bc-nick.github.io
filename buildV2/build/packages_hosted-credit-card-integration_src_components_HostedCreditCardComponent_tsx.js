"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["packages_hosted-credit-card-integration_src_components_HostedCreditCardComponent_tsx"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/credit-card.js":
/*!***************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/credit-card.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCreditCardPaymentStrategy: () => (/* binding */ h)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\nvar i;class n extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class r extends n{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class o extends n{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class a extends r{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(i||(i={}));class s extends n{constructor(e){super(function(e){switch(e){case i.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case i.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case i.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case i.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var d=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{d(n.next(e))}catch(e){o(e)}}function s(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})},c=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class l{constructor(e){this._paymentIntegrationService=e}execute(e,t){var i,n;return this._isHostedPaymentFormEnabled(null===(i=e.payment)||void 0===i?void 0:i.methodId,null===(n=e.payment)||void 0===n?void 0:n.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,i=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:n=\"\"}={}}=i.getStoreConfigOrThrow();if(!t)throw new r;const o=this._paymentIntegrationService.createHostedForm(n,t);return o.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=o,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new o)}_executeWithoutHostedForm(e,t){return d(this,void 0,void 0,function*(){const{payment:i}=e,n=c(e,[\"payment\"]),r=i&&i.paymentData;if(!i||!r)throw new a([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:r}))})}_executeWithHostedForm(e,t){return d(this,void 0,void 0,function*(){const{payment:n}=e,r=c(e,[\"payment\"]),o=this._hostedForm;if(!o)throw new s(i.PaymentNotInitialized);if(!n||!n.methodId)throw new a([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(r,t),yield o.validate().then(()=>o.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(i){return!(0,lodash__WEBPACK_IMPORTED_MODULE_0__.values)(i&&i.creditCard&&i.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_0__.isNil)}}const h=(u=e=>new l(e),m=[{default:!0}],Object.assign(u,{resolveIds:m}));var u,m;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9jcmVkaXQtY2FyZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDQSxJQ0NZQSxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVkVyxNQUFNQyxVQUE2QmQsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkUsTUFBTUYsR0FBVyx5Q0FFakJPLEtBQUtKLEtBQU8sdUJBQ1pJLEtBQUtILEtBQU8sa0JBQ2hCLEVDUFcsTUFBTVEsVUFBMENmLEVBQzNELFdBQUFFLEdBQ0lHLE1BQU0sa0VBRU5LLEtBQUtKLEtBQU8sb0NBQ1pJLEtBQUtILEtBQU8saUNBQ2hCLEVDTFcsTUFBTVMsVUFBb0NGLEVBQ3JELFdBQUFaLENBQVllLEdBQ1IsSUFBSWQsRUFBVSx5RUFFVmMsSUFDQWQsRUFBVSxHQUFHQSw0REFBa0VjLEVBQWNDLEtBQ3pGLFVBSVJiLE1BQU1GLEdBRU5PLEtBQUtKLEtBQU8sNkJBQ2hCLEdMbEJKLFNBQVlQLEdBQ1IsbUVBQ0EsdURBQ0EscURBQ0EsdURBQ0Esa0VBQ0gsQ0FORCxDQUFZQSxJQUFBQSxFQUF1QixLQWFwQixNQUFNb0IsVUFBNEJuQixFQUM3QyxXQUFBRSxDQUFtQmtCLEdBQ2ZmLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1IsRUFBd0JzQix1QkFDekIsTUFBTyxvRkFFWCxLQUFLdEIsRUFBd0J1QixzQkFDekIsTUFBTyxtRkFFWCxLQUFLdkIsRUFBd0J3Qix1QkFDekIsTUFBTyxvRkFFWCxLQUFLeEIsRUFBd0J5Qiw2QkFDekIsTUFBTyxtRkFFWCxRQUNJLE1BQU8sNkVBRW5CLENBeEJjQyxDQUFnQkwsSUFEUCxLQUFBQSxRQUFBQSxFQUdmVixLQUFLSixLQUFPLHNCQUNaSSxLQUFLSCxLQUFPLGlCQUNoQixFLGtuQk1IVyxNQUFNbUIsRUFJakIsV0FBQXhCLENBQXNCeUIsR0FBQSxLQUFBQSwyQkFBQUEsQ0FBd0QsQ0FFOUUsT0FBQUMsQ0FBUUMsRUFBMkJDLEcsUUFDL0IsT0FBT3BCLEtBQUtxQiw0QkFDTyxRQUFmLEVBQUFGLEVBQVFHLGVBQU8sZUFBRUMsU0FDRixRQUFmLEVBQUFKLEVBQVFHLGVBQU8sZUFBRUUsWUFDaEJ4QixLQUFLeUIsd0JBQ0p6QixLQUFLMEIsdUJBQXVCUCxFQUFTQyxHQUNyQ3BCLEtBQUsyQiwwQkFBMEJSLEVBQVNDLEVBQ2xELENBRUEsVUFBQVEsQ0FDSVIsR0FFQSxJQUNLcEIsS0FBS3FCLDRCQUE0QkQsYUFBTyxFQUFQQSxFQUFTRyxTQUFVSCxhQUFPLEVBQVBBLEVBQVNJLGFBQzdEeEIsS0FBSzZCLHdCQUF3QlQsR0FJOUIsT0FGQXBCLEtBQUt5Qix5QkFBMEIsRUFFeEJLLFFBQVFDLFVBR25CLE1BQU1DLEVBQWNaLEdBQVdBLEVBQVFhLFlBQWNiLEVBQVFhLFdBQVdDLEtBQ2xFQyxFQUFRbkMsS0FBS2lCLDJCQUEyQm1CLFlBQ3RDQyxpQkFBbUJDLGNBQWVDLEVBQU8sSUFBTyxDQUFDLEdBQ3JESixFQUFNSyx3QkFFVixJQUFLUixFQUNELE1BQU0sSUFBSTVCLEVBR2QsTUFBTThCLEVBQU9sQyxLQUFLaUIsMkJBQTJCd0IsaUJBQWlCRixFQUFNUCxHQUVwRSxPQUFPRSxFQUFLUSxTQUFTQyxLQUFLLEtBQ3RCM0MsS0FBS3lCLHlCQUEwQixFQUMvQnpCLEtBQUs0QyxZQUFjVixFQUVaSixRQUFRQyxXQUV2QixDQUVBLFlBQUFjLEdBS0ksT0FKSTdDLEtBQUs0QyxhQUNMNUMsS0FBSzRDLFlBQVlFLFNBR2RoQixRQUFRQyxTQUNuQixDQUVBLFFBQUFnQixHQUNJLE9BQU9qQixRQUFRa0IsT0FBTyxJQUFJM0MsRUFDOUIsQ0FFZ0IseUJBQUFzQixDQUNaUixFQUNBQyxHLHdDQUVBLE1BQU0sUUFBRUUsR0FBc0JILEVBQVY4QixFQUFLLEVBQUs5QixFQUF4QixhQUNBK0IsRUFBYzVCLEdBQVdBLEVBQVE0QixZQUV2QyxJQUFLNUIsSUFBWTRCLEVBQ2IsTUFBTSxJQUFJNUMsRUFBNEIsQ0FBQyw4QkFHckNOLEtBQUtpQiwyQkFBMkJrQyxZQUFZRixFQUFPN0IsU0FFbkRwQixLQUFLaUIsMkJBQTJCbUMsY0FBYyxPQUFELHdCQUFNOUIsR0FBTyxDQUFFNEIsZ0JBQ3RFLEUsQ0FFZ0Isc0JBQUF4QixDQUNaUCxFQUNBQyxHLHdDQUVBLE1BQU0sUUFBRUUsR0FBc0JILEVBQVY4QixFQUFLLEVBQUs5QixFQUF4QixhQUNBZSxFQUFPbEMsS0FBSzRDLFlBRWxCLElBQUtWLEVBQ0QsTUFBTSxJQUFJekIsRUFBb0JwQixFQUF3QnVCLHVCQUcxRCxJQUFLVSxJQUFZQSxFQUFRQyxTQUNyQixNQUFNLElBQUlqQixFQUE0QixDQUFDLDJCQUdyQ04sS0FBS2lCLDJCQUEyQmtDLFlBQVlGLEVBQU83QixTQUVuRGMsRUFBS21CLFdBQVdWLEtBQUssSUFBTVQsRUFBS29CLE9BQU9oQyxHQUNqRCxFLENBRVUsMkJBQUFELENBQTRCRSxFQUFtQkMsR0FDckQsUUFBS0QsSUFPK0MsSUFIdEN2QixLQUFLaUIsMkJBQTJCbUIsV0FDbEJtQix3QkFBd0JoQyxFQUFVQyxHQUV6Q2dDLE9BQU9DLG1CQUNoQyxDQUVRLHVCQUFBNUIsQ0FDSlQsR0FFQSxPQUFRc0MsOENBQUFBLENBQU90QyxHQUFXQSxFQUFRYSxZQUFjYixFQUFRYSxXQUFXQyxLQUFLeUIsUUFBUUMsTUFDNUVDLHlDQUFBQSxDQUVSLEVDMUhKLE1BTUEsR0NWSUMsRURLQUMsR0FFTyxJQUFJL0MsRUFBMEIrQyxHQ05yQ0MsRURTK0QsQ0FBQyxDQUFFQyxTQUFTLElDUHBFbkUsT0FBT29FLE9BQU9KLEVBQVEsQ0FBRUUsZ0JBSnBCLElBQ1hGLEVBQ0FFLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2NyZWRpdC1jYXJkLXBheW1lbnQtc3RyYXRlZ3kudHM/Mjg5ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2NyZWF0ZS1jcmVkaXQtY2FyZC1wYXltZW50LXN0cmF0ZWd5LnRzPzgzMDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBIb3N0ZWRGb3JtLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgX2hvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByb3RlY3RlZCBfc2hvdWxkUmVuZGVySG9zdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZCxcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8uZ2F0ZXdheUlkLFxuICAgICAgICApICYmIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm1cbiAgICAgICAgICAgID8gdGhpcy5fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpXG4gICAgICAgICAgICA6IHRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChvcHRpb25zPy5tZXRob2RJZCwgb3B0aW9ucz8uZ2F0ZXdheUlkKSB8fFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUob3B0aW9ucylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1PcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm07XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRTZXR0aW5nczogeyBiaWdwYXlCYXNlVXJsOiBob3N0ID0gJycgfSA9IHt9IH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFmb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKGhvc3QsIGZvcm1PcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hdHRhY2goKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSA9IGZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5faG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGEgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9ob3N0ZWRGb3JtO1xuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCBmb3JtLnZhbGlkYXRlKCkudGhlbigoKSA9PiBmb3JtLnN1Ym1pdChwYXltZW50KSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQgPT09IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbHVlcyhvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybS5maWVsZHMpLmV2ZXJ5KFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8Q3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LCBbeyBkZWZhdWx0OiB0cnVlIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIl0sIm5hbWVzIjpbIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJqb2luIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsInN1YnR5cGUiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJnZXRFcnJvck1lc3NhZ2UiLCJDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IiwiX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJleGVjdXRlIiwicGF5bG9hZCIsIm9wdGlvbnMiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJwYXltZW50IiwibWV0aG9kSWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmb3JtT3B0aW9ucyIsImNyZWRpdENhcmQiLCJmb3JtIiwic3RhdGUiLCJnZXRTdGF0ZSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsInRoZW4iLCJfaG9zdGVkRm9ybSIsImRlaW5pdGlhbGl6ZSIsImRldGFjaCIsImZpbmFsaXplIiwicmVqZWN0Iiwib3JkZXIiLCJwYXltZW50RGF0YSIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsInZhbGlkYXRlIiwic3VibWl0IiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJjb25maWciLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwidmFsdWVzIiwiZmllbGRzIiwiZXZlcnkiLCJpc05pbCIsIm1vZHVsZSIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJyZXNvbHZlSWRzIiwiZGVmYXVsdCIsImFzc2lnbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/credit-card.js\n\n}");

/***/ }),

/***/ "../checkout-sdk-js/dist/esm/integrations/td-bank.js":
/*!***********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/td-bank.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTDOnlineMartPaymentStrategy: () => (/* binding */ I)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\nvar s,o;class a extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class d extends a{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends d{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(s||(s={}));class u extends a{constructor(e){super(function(e){switch(e){case s.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case s.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case s.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case s.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case s.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case s.MissingCheckoutConfig:case s.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case s.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case s.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case s.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case s.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case s.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case s.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class l extends a{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function h(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function m(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(o||(o={}));class p extends a{constructor(e){super(function(e){switch(e){case o.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case o.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case o.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case o.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function g(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var y;!function(e){e.CARD_NUMBER=\"card-number\",e.CVV=\"cvv\",e.EXPIRY=\"expiry\"}(y||(y={}));var b=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function o(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}d((i=i.apply(e,t||[])).next())})};class f{constructor(e,t,n){this.paymentIntegrationService=e,this.tdOnlineMartScriptLoader=t,this.formPoster=n,this.tdInputs=[{id:\"ccNumber\",fieldType:y.CARD_NUMBER},{id:\"ccCvv\",fieldType:y.CVV},{id:\"ccExpiry\",fieldType:y.EXPIRY}]}initialize(e){return b(this,void 0,void 0,function*(){const{methodId:t}=e;if(!t)throw new d('Unable to initialize payment because \"options.methodId\" argument is not provided.');this.tdOnlineMartClient=yield this.loadTDOnlineMartJs(),this.mountHostedFields(t)})}execute(e,t){return b(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,[\"payment\"]);if(!n)throw new c([\"payment\"]);if(!n.methodId)throw new u(s.MissingPaymentMethod);const r=yield this.getPaymentPayloadOrThrow(n);yield this.paymentIntegrationService.submitOrder(i,t);try{yield this.paymentIntegrationService.submitPayment(r)}catch(e){yield this.processWithAdditionalAction(e)}})}finalize(){return Promise.reject(new l)}deinitialize(){return this.tdOnlineMartClient=void 0,this.tdInputs.forEach(({inputElement:e})=>{null==e||e.unmount()}),Promise.resolve()}getPaymentPayloadOrThrow(e){return b(this,void 0,void 0,function*(){const{methodId:t,paymentData:n}=e,{shouldSaveInstrument:i=!1,shouldSetAsDefaultInstrument:r=!1}=h(n)?n:{},s={browser_info:m(),shouldSaveInstrument:i,shouldSetAsDefaultInstrument:r};if(h(n)&&Boolean(n.instrumentId)&&n.instrumentId){const e=!!this.paymentIntegrationService.getState().getCartOrThrow().lineItems.digitalItems.length,i=!this.isTrustedVaultingInstrument(n.instrumentId)||e;return{methodId:t,paymentData:Object.assign(Object.assign(Object.assign({},s),{instrumentId:n.instrumentId}),i?{nonce:n.instrumentId}:{})}}let o;try{o=yield this.getTokenOrThrow()}catch(e){this.throwTokenizationError(e)}return{methodId:t,paymentData:Object.assign(Object.assign({},s),{nonce:o})}})}mountHostedFields(e){const t=this.getHostedFieldsOptions(),n=this.getTDOnlineMartClientOrThrow();this.tdInputs.forEach(i=>{const r=`${e}-${i.id}`;document.getElementById(r)&&(i.inputElement=n.create(i.fieldType,t),i.inputElement.mount(`#${r}`))})}loadTDOnlineMartJs(){return b(this,void 0,void 0,function*(){return this.tdOnlineMartClient?this.tdOnlineMartClient:this.tdOnlineMartScriptLoader.load()})}getTokenOrThrow(){return new Promise((e,t)=>{this.getTDOnlineMartClientOrThrow().createToken(n=>{const{error:i,token:r}=n;if(i||!r)return t(i);e(r)})})}getTDOnlineMartClientOrThrow(){if(!this.tdOnlineMartClient)throw new p(o.PaymentNotInitialized);return this.tdOnlineMartClient}processWithAdditionalAction(e){return b(this,void 0,void 0,function*(){if(!function(e){return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(t=e.body,(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isObject)(t)&&\"object\"==typeof t&&\"errors\"in t&&\"three_ds_result\"in t&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.isArray)(t.errors)&&(0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(t.errors,{code:\"three_d_secure_required\"}));// removed by dead control flow\n var t; }(e))throw e;const{three_ds_result:t}=e.body,{acs_url:s,payer_auth_request:o,merchant_data:a}=t||{};if(!s||!o||!a)throw new c([\"formUrl\",\"threeDSSessionData\",\"creq\"]);return new Promise(e=>{this.formPoster.postForm(s,{threeDSSessionData:o,creq:a},e,\"_top\")})})}throwTokenizationError(e){if(!function(e){return\"object\"==typeof e&&null!==e&&\"field\"in e&&\"type\"in e&&\"message\"in e}(e))throw new u(s.MissingPaymentToken);throw new Error(e.message)}getHostedFieldsOptions(){return{style:{error:{color:\"#d14343\"}},classes:{error:\"form-input--error\"}}}isTrustedVaultingInstrument(e){const t=this.paymentIntegrationService.getState().getInstruments(),n=null==t?void 0:t.find(t=>g(t)&&t.bigpayToken===e);return!(g(n)&&!n.trustedShippingAddress)}}class M extends a{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class v{constructor(e,t=window){this.scriptLoader=e,this.tdOnlineMartWindow=t}load(){return e=this,t=void 0,i=function*(){if(this.tdOnlineMartWindow.customcheckout||(yield this.scriptLoader.loadScript(\"https://libs.na.bambora.com/customcheckout/1/customcheckout.js\")),!this.tdOnlineMartWindow.customcheckout)throw new M;return this.tdOnlineMartWindow.customcheckout()},new((n=void 0)||(n=Promise))(function(r,s){function o(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}d((i=i.apply(e,t||[])).next())});// removed by dead control flow\n var e, t, n, i; }}const I=(w=n=>new f(n,new v((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)()),(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)()),O=[{id:\"tdonlinemart\"}],Object.assign(w,{resolveIds:O}));var w,O;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy90ZC1iYW5rLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQ0EsSUNDWUEsRUNBQUMsRUNLRyxNQUFlQyxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ0MsRURZNUNDLE1BQU1GLEdBQVcscUNBSnJCLEtBQUFHLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q0gsYURjWkEsVUNiaENJLE9BQU9DLGVBQ1BELE9BQU9DLGVEWVFDLEtDWmVOLEdEWWZNLEtDVlJDLFVBQVlQLEVEWW9CLG1CQUE1QkgsTUFBTVcsa0JBQ2JYLE1BQU1XLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlaLE1BQU1TLEtBQUtQLFNBQVNVLEtBRTdDLEVFZFcsTUFBTUMsVUFBNkJkLEVBQzlDLFdBQUFFLENBQVlDLEdBQ1JFLE1BQU1GLEdBQVcseUNBRWpCTyxLQUFLSixLQUFPLHVCQUNaSSxLQUFLSCxLQUFPLGtCQUNoQixFQ05XLE1BQU1RLFVBQW9DRCxFQUNyRCxXQUFBWixDQUFZYyxHQUNSLElBQUliLEVBQVUseUVBRVZhLElBQ0FiLEVBQVUsR0FBR0EsNERBQWtFYSxFQUFjQyxLQUN6RixVQUlSWixNQUFNRixHQUVOTyxLQUFLSixLQUFPLDZCQUNoQixHTGxCSixTQUFZUixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtBeUJqQixNQUFNb0IsVUFBeUJsQixFQUMxQyxXQUFBRSxDQUFtQmlCLEdBQ2ZkLE1BT1IsU0FBeUJFLEdBQ3JCLE9BQVFBLEdBQ0osS0FBS1QsRUFBcUJzQixzQkFDdEIsTUFBTyxpRUFFWCxLQUFLdEIsRUFBcUJ1QixZQUN0QixNQUFPLHNEQUVYLEtBQUt2QixFQUFxQndCLG9C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Q0EsRUFBZUcsdUJBSXpCLEVLblFXLE1BQU1DLFVBQTRDMUosRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRUNUVyxNQUFNb0osRUFDakIsV0FBQXpKLENBQ1kwSixFQUNBQyxFQUE2Q3BILFFBRDdDLEtBQUFtSCxhQUFBQSxFQUNBLEtBQUFDLG1CQUFBQSxDQUNULENBRUcsSUFBQWxDLEcscUNBT0YsR0FOS2pILEtBQUttSixtQkFBbUJDLHVCQUNuQnBKLEtBQUtrSixhQUFhRyxXQUNwQixvRUFJSHJKLEtBQUttSixtQkFBbUJDLGVBQ3pCLE1BQU0sSUFBSUosRUFHZCxPQUFPaEosS0FBS21KLG1CQUFtQkMsZ0JBQ25DLEU7bUJDYkosTUFVQSxHQ2xCSUUsRURTQS9GLEdBRU8sSUFBSUQsRUFDUEMsRUFDQSxJQUFJMEYsRUFBeUJNLDJFQUFBQSxJQUM3QkMsMEVBQUFBLElDYkpDLEVEaUJpRSxDQUFDLENBQUU5RixHQUFJLGlCQ2ZqRTdELE9BQU80SixPQUFPSixFQUFRLENBQUVHLGdCQUpwQixJQUNYSCxFQUNBRyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2Jyb3dzZXItaW5mby9nZXQtYnJvd3Nlci1pbmZvLnRzPzhiYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWJhc2UtaW5zdHJ1bWVudC9pcy1iYXNlLWluc3RydW1lbnQudHM/ZTkyZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQudHM/MDE2MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneS50cz9hZTQ3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uLnRzPzMwMzIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy90ZC1iYW5rLWludGVncmF0aW9uL3NyYy9pcy1jcmVhdGUtdG9rZW4tZXJyb3IudHM/ZTQ5MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdGQtYmFuay1pbnRlZ3JhdGlvbi9zcmMvdGQtb25saW5lLW1hcnQtc2NyaXB0LWxvYWRlci50cz85MzM2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy90ZC1iYW5rLWludGVncmF0aW9uL3NyYy9jcmVhdGUtdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneS50cz9kZTQ0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQgQnJvd3NlckluZm8gZnJvbSAnLi9icm93c2VyLWluZm8nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB7XG4gICAgY29uc3QgeyBuYXZpZ2F0b3IgfSA9IHdpbmRvdztcblxuICAgIGxldCBsYW5ndWFnZTogc3RyaW5nO1xuXG4gICAgaWYgKG5hdmlnYXRvci5sYW5ndWFnZSkge1xuICAgICAgICBsYW5ndWFnZSA9IG5hdmlnYXRvci5sYW5ndWFnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsYW5ndWFnZSA9IChuYXZpZ2F0b3IgYXMgYW55KS51c2VyTGFuZ3VhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29sb3JfZGVwdGg6IHdpbmRvdy5zY3JlZW4uY29sb3JEZXB0aCB8fCAyNCxcbiAgICAgICAgamF2YV9lbmFibGVkOiB0eXBlb2YgbmF2aWdhdG9yLmphdmFFbmFibGVkID09PSAnZnVuY3Rpb24nID8gbmF2aWdhdG9yLmphdmFFbmFibGVkKCkgOiBmYWxzZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIHNjcmVlbl9oZWlnaHQ6IHdpbmRvdy5zY3JlZW4uaGVpZ2h0LFxuICAgICAgICBzY3JlZW5fd2lkdGg6IHdpbmRvdy5zY3JlZW4ud2lkdGgsXG4gICAgICAgIHRpbWVfem9uZV9vZmZzZXQ6IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKS50b1N0cmluZygpLFxuICAgIH07XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQ6IHVua25vd24pOiBpbnN0cnVtZW50IGlzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBpZiAodHlwZW9mIGluc3RydW1lbnQgIT09ICdvYmplY3QnIHx8IGluc3RydW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdiaWdwYXlUb2tlbicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnZGVmYXVsdEluc3RydW1lbnQnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3Byb3ZpZGVyJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0cnVzdGVkU2hpcHBpbmdBZGRyZXNzJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdtZXRob2QnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3R5cGUnIGluIGluc3RydW1lbnRcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGRPbmxpbmVNYXJ0SG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgY3VzdG9tY2hlY2tvdXQ/KCk6IFREQ3VzdG9tQ2hlY2tvdXRTREs7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVERDdXN0b21DaGVja291dFNESyB7XG4gICAgY3JlYXRlKGZpZWxkVHlwZTogRmllbGRUeXBlLCBvcHRpb25zPzogRmllbGRPcHRpb25zKTogVGRPbmxpbmVNYXJ0RWxlbWVudDtcbiAgICBjcmVhdGVUb2tlbihjYWxsYmFjazogKHJlc3VsdDogQ3JlYXRlVG9rZW5SZXNwb25zZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGRPbmxpbmVNYXJ0RWxlbWVudCB7XG4gICAgbW91bnQoY3NzU2VsZWN0b3I6IHN0cmluZyk6IHZvaWQ7XG4gICAgdW5tb3VudCgpOiB2b2lkO1xufVxuXG5leHBvcnQgZW51bSBGaWVsZFR5cGUge1xuICAgIENBUkRfTlVNQkVSID0gJ2NhcmQtbnVtYmVyJyxcbiAgICBDVlYgPSAnY3Z2JyxcbiAgICBFWFBJUlkgPSAnZXhwaXJ5Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBURE9ubGluZU1hcnRJbnB1dCB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBmaWVsZFR5cGU6IEZpZWxkVHlwZTtcbiAgICBpbnB1dEVsZW1lbnQ/OiBUZE9ubGluZU1hcnRFbGVtZW50O1xufVxuXG5pbnRlcmZhY2UgQ3JlYXRlVG9rZW5SZXNwb25zZSB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIGVycm9yPzogQ3JlYXRlVG9rZW5FcnJvcjtcbiAgICB0b2tlbj86IHN0cmluZztcbiAgICBsYXN0ND86IHN0cmluZztcbiAgICBleHBpcnlNb250aD86IHN0cmluZztcbiAgICBleHBpcnlZZWFyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVRva2VuRXJyb3Ige1xuICAgIGZpZWxkOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbn1cblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5leHBvcnQgaW50ZXJmYWNlIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkge1xuICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nIH0+O1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogc3RyaW5nO1xuICAgICAgICBwYXllcl9hdXRoX3JlcXVlc3Q6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRfZGF0YTogc3RyaW5nO1xuICAgIH07XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvbiAqL1xuXG5leHBvcnQgdHlwZSBUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uID0gUmVxdWVzdEVycm9yPFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHk+O1xuXG4vLyBOb3RlOiBUaGUgc3R5bGUgcHJvcGVydHkgYWZmZWN0cyB0aGUgcmVtb3RlIHN0eWxpbmcgb2YgdGV4dCBpbnNpZGUgdGhlIGlmcmFtZSBpbnB1dC4gVGhlIGNsYXNzZXMgcHJvcGVydHkgdXBkYXRlcyB0aGUgY2xhc3MgbGlzdCBvZiB0aGUgZWxlbWVudCB0aGUgZmllbGQgaXMgbW91bnRlZCB0byBvbiB5b3VyIHBhZ2UuXG5pbnRlcmZhY2UgRmllbGRPcHRpb25zIHtcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICBzdHlsZT86IFN0eWxlcztcbiAgICBjbGFzc2VzPzogQ2xhc3NlcztcbiAgICBicmFuZHM/OiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIENsYXNzZXMge1xuICAgIGJhc2U/OiBzdHJpbmc7XG4gICAgY29tcGxldGU/OiBzdHJpbmc7XG4gICAgZW1wdHk/OiBzdHJpbmc7XG4gICAgZm9jdXM/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdHlsZXMge1xuICAgIGJhc2U/OiBDc3NTdHlsZXM7XG4gICAgY29tcGxldGU/OiBDc3NTdHlsZXM7XG4gICAgZW1wdHk/OiBDc3NTdHlsZXM7XG4gICAgZXJyb3I/OiBDc3NTdHlsZXM7XG59XG5cbmludGVyZmFjZSBDc3NTdHlsZXMge1xuICAgIGNvbG9yPzogc3RyaW5nO1xuICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgZm9udFN0eWxlPzogc3RyaW5nO1xuICAgIGZvbnRXZWlnaHQ/OiBzdHJpbmc7XG4gICAgdGV4dERlY29yYXRpb24/OiBzdHJpbmc7XG4gICAgcGFkZGluZz86IHN0cmluZztcbiAgICBwYWRkaW5nTGVmdD86IHN0cmluZztcbiAgICBwYWRkaW5nVG9wPzogc3RyaW5nO1xuICAgIHBhZGRpbmdSaWdodD86IHN0cmluZztcbiAgICBwYWRkaW5nQm90dG9tPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5cbmltcG9ydCB7XG4gICAgZ2V0QnJvd3NlckluZm8sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0Jhc2VJbnN0cnVtZW50IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IGlzQ3JlYXRlVG9rZW5FcnJvciBmcm9tICcuL2lzLWNyZWF0ZS10b2tlbi1lcnJvcic7XG5pbXBvcnQgeyBpc1RkT25saW5lTWFydEFkZGl0aW9uYWxBY3Rpb24gfSBmcm9tICcuL2lzVGRPbmxpbmVNYXJ0QWRkaXRpb25hbEFjdGlvbic7XG5pbXBvcnQge1xuICAgIEZpZWxkVHlwZSxcbiAgICBUREN1c3RvbUNoZWNrb3V0U0RLLFxuICAgIFRET25saW5lTWFydElucHV0LFxuICAgIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHksXG59IGZyb20gJy4vdGQtb25saW5lLW1hcnQnO1xuaW1wb3J0IFRET25saW5lTWFydFNjcmlwdExvYWRlciBmcm9tICcuL3RkLW9ubGluZS1tYXJ0LXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBURE9ubGluZU1hcnRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgdGRPbmxpbmVNYXJ0Q2xpZW50PzogVERDdXN0b21DaGVja291dFNESztcbiAgICBwcml2YXRlIHRkSW5wdXRzOiBURE9ubGluZU1hcnRJbnB1dFtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NjTnVtYmVyJyxcbiAgICAgICAgICAgIGZpZWxkVHlwZTogRmllbGRUeXBlLkNBUkRfTlVNQkVSLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2NjQ3Z2JyxcbiAgICAgICAgICAgIGZpZWxkVHlwZTogRmllbGRUeXBlLkNWVixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdjY0V4cGlyeScsXG4gICAgICAgICAgICBmaWVsZFR5cGU6IEZpZWxkVHlwZS5FWFBJUlksXG4gICAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgdGRPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyOiBURE9ubGluZU1hcnRTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50ID0gYXdhaXQgdGhpcy5sb2FkVERPbmxpbmVNYXJ0SnMoKTtcblxuICAgICAgICB0aGlzLm1vdW50SG9zdGVkRmllbGRzKG1ldGhvZElkKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGF3YWl0IHRoaXMuZ2V0UGF5bWVudFBheWxvYWRPclRocm93KHBheW1lbnQpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMudGRJbnB1dHMuZm9yRWFjaCgoeyBpbnB1dEVsZW1lbnQgfTogVERPbmxpbmVNYXJ0SW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudD8udW5tb3VudCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRQYXltZW50UGF5bG9hZE9yVGhyb3cocGF5bWVudDogT3JkZXJQYXltZW50UmVxdWVzdEJvZHkpIHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuICAgICAgICBjb25zdCBjb21tb25QYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICAgICAgICAgIGJyb3dzZXJfaW5mbzogZ2V0QnJvd3NlckluZm8oKSxcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSAmJlxuICAgICAgICAgICAgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiZcbiAgICAgICAgICAgIHBheW1lbnREYXRhLmluc3RydW1lbnRJZFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgZGlnaXRhbEl0ZW1zSW5DYXJ0ID0gISFjYXJ0LmxpbmVJdGVtcy5kaWdpdGFsSXRlbXMubGVuZ3RoO1xuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRBZGRWZXJpZmljYXRpb25Ub2tlbiA9XG4gICAgICAgICAgICAgICAgIXRoaXMuaXNUcnVzdGVkVmF1bHRpbmdJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCkgfHwgZGlnaXRhbEl0ZW1zSW5DYXJ0O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmNvbW1vblBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQ6IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKHNob3VsZEFkZFZlcmlmaWNhdGlvblRva2VuID8geyBub25jZTogcGF5bWVudERhdGEuaW5zdHJ1bWVudElkIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbm9uY2U6IHN0cmluZztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbm9uY2UgPSBhd2FpdCB0aGlzLmdldFRva2VuT3JUaHJvdygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy50aHJvd1Rva2VuaXphdGlvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4uY29tbW9uUGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgbW91bnRIb3N0ZWRGaWVsZHMobWV0aG9kSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5nZXRIb3N0ZWRGaWVsZHNPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IHRkT25saW5lTWFydENsaWVudCA9IHRoaXMuZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdygpO1xuXG4gICAgICAgIHRoaXMudGRJbnB1dHMuZm9yRWFjaCgoaW5wdXQ6IFRET25saW5lTWFydElucHV0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dElkID0gYCR7bWV0aG9kSWR9LSR7aW5wdXQuaWR9YDtcblxuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpbnB1dElkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQuaW5wdXRFbGVtZW50ID0gdGRPbmxpbmVNYXJ0Q2xpZW50LmNyZWF0ZShpbnB1dC5maWVsZFR5cGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaW5wdXQuaW5wdXRFbGVtZW50Lm1vdW50KGAjJHtpbnB1dElkfWApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRURE9ubGluZU1hcnRKcygpOiBQcm9taXNlPFREQ3VzdG9tQ2hlY2tvdXRTREs+IHtcbiAgICAgICAgaWYgKHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRDbGllbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy50ZE9ubGluZU1hcnRTY3JpcHRMb2FkZXIubG9hZCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VG9rZW5PclRocm93KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldFRET25saW5lTWFydENsaWVudE9yVGhyb3coKS5jcmVhdGVUb2tlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlcnJvciwgdG9rZW4gfSA9IHJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmIChlcnJvciB8fCAhdG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRURE9ubGluZU1hcnRDbGllbnRPclRocm93KCk6IFREQ3VzdG9tQ2hlY2tvdXRTREsge1xuICAgICAgICBpZiAoIXRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGRPbmxpbmVNYXJ0Q2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uKGVycm9yOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uKGVycm9yKSkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHRocmVlX2RzX3Jlc3VsdDogdGhyZWVEU1Jlc3VsdCB9OiBUZE9ubGluZU1hcnRUaHJlZURTRXJyb3JCb2R5ID0gZXJyb3IuYm9keTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWNzX3VybDogZm9ybVVybCxcbiAgICAgICAgICAgIHBheWVyX2F1dGhfcmVxdWVzdDogdGhyZWVEU1Nlc3Npb25EYXRhLFxuICAgICAgICAgICAgbWVyY2hhbnRfZGF0YTogY3JlcSxcbiAgICAgICAgfSA9IHRocmVlRFNSZXN1bHQgfHwge307XG5cbiAgICAgICAgaWYgKCFmb3JtVXJsIHx8ICF0aHJlZURTU2Vzc2lvbkRhdGEgfHwgIWNyZXEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydmb3JtVXJsJywgJ3RocmVlRFNTZXNzaW9uRGF0YScsICdjcmVxJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZvcm1Qb3N0ZXIucG9zdEZvcm0oXG4gICAgICAgICAgICAgICAgZm9ybVVybCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRocmVlRFNTZXNzaW9uRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgY3JlcSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgJ190b3AnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0aHJvd1Rva2VuaXphdGlvbkVycm9yKGVycm9yOiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoIWlzQ3JlYXRlVG9rZW5FcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SG9zdGVkRmllbGRzT3B0aW9ucygpIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSB7XG4gICAgICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2QxNDM0MycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSB7XG4gICAgICAgICAgICBlcnJvcjogJ2Zvcm0taW5wdXQtLWVycm9yJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3R5bGUsXG4gICAgICAgICAgICBjbGFzc2VzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUcnVzdGVkVmF1bHRpbmdJbnN0cnVtZW50KGluc3RydW1lbnRJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0SW5zdHJ1bWVudHMoKTtcblxuICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgKGluc3RydW1lbnQpID0+IGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudCkgJiYgaW5zdHJ1bWVudC5iaWdwYXlUb2tlbiA9PT0gaW5zdHJ1bWVudElkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgID8gZmluZEluc3RydW1lbnQudHJ1c3RlZFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCJpbXBvcnQgeyBpc0FycmF5LCBpc09iamVjdCwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IGlzUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFRkT25saW5lTWFydEFkZGl0aW9uYWxBY3Rpb24sIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkgfSBmcm9tICcuL3RkLW9ubGluZS1tYXJ0JztcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zICovXG5mdW5jdGlvbiBpc1RkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkoXG4gICAgZXJyb3JCb2R5OiB1bmtub3duLFxuKTogZXJyb3JCb2R5IGlzIFRkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkge1xuICAgIHJldHVybiAoXG4gICAgICAgIGlzT2JqZWN0KGVycm9yQm9keSkgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yQm9keSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2Vycm9ycycgaW4gZXJyb3JCb2R5ICYmXG4gICAgICAgICd0aHJlZV9kc19yZXN1bHQnIGluIGVycm9yQm9keSAmJlxuICAgICAgICBpc0FycmF5KChlcnJvckJvZHkgYXMgVGRPbmxpbmVNYXJ0VGhyZWVEU0Vycm9yQm9keSkuZXJyb3JzKSAmJlxuICAgICAgICBzb21lKChlcnJvckJvZHkgYXMgVGRPbmxpbmVNYXJ0VGhyZWVEU0Vycm9yQm9keSkuZXJyb3JzLCB7XG4gICAgICAgICAgICBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnLFxuICAgICAgICB9KVxuICAgICk7XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9ucyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uKFxuICAgIGVycm9yOiB1bmtub3duLFxuKTogZXJyb3IgaXMgVGRPbmxpbmVNYXJ0QWRkaXRpb25hbEFjdGlvbiB7XG4gICAgcmV0dXJuIGlzUmVxdWVzdEVycm9yKGVycm9yKSAmJiBpc1RkT25saW5lTWFydFRocmVlRFNFcnJvckJvZHkoZXJyb3IuYm9keSk7XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHsgQ3JlYXRlVG9rZW5FcnJvciB9IGZyb20gJy4vdGQtb25saW5lLW1hcnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWF0ZVRva2VuRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBDcmVhdGVUb2tlbkVycm9yIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgICdmaWVsZCcgaW4gZXJyb3IgJiZcbiAgICAgICAgJ3R5cGUnIGluIGVycm9yICYmXG4gICAgICAgICdtZXNzYWdlJyBpbiBlcnJvclxuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFREQ3VzdG9tQ2hlY2tvdXRTREssIFRkT25saW5lTWFydEhvc3RXaW5kb3cgfSBmcm9tICcuL3RkLW9ubGluZS1tYXJ0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSB0ZE9ubGluZU1hcnRXaW5kb3c6IFRkT25saW5lTWFydEhvc3RXaW5kb3cgPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZCgpOiBQcm9taXNlPFREQ3VzdG9tQ2hlY2tvdXRTREs+IHtcbiAgICAgICAgaWYgKCF0aGlzLnRkT25saW5lTWFydFdpbmRvdy5jdXN0b21jaGVja291dCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChcbiAgICAgICAgICAgICAgICAnaHR0cHM6Ly9saWJzLm5hLmJhbWJvcmEuY29tL2N1c3RvbWNoZWNrb3V0LzEvY3VzdG9tY2hlY2tvdXQuanMnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy50ZE9ubGluZU1hcnRXaW5kb3cuY3VzdG9tY2hlY2tvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudGRPbmxpbmVNYXJ0V2luZG93LmN1c3RvbWNoZWNrb3V0KCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vdGQtb25saW5lLW1hcnQtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIGZyb20gJy4vdGQtb25saW5lLW1hcnQtc2NyaXB0LWxvYWRlcic7XG5cbmNvbnN0IGNyZWF0ZVRET25saW5lTWFydFBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxURE9ubGluZU1hcnRQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFRET25saW5lTWFydFBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFRET25saW5lTWFydFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVRET25saW5lTWFydFBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICd0ZG9ubGluZW1hcnQnIH1dKTtcbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIl0sIm5hbWVzIjpbIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsImluc3RydW1lbnQiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJnZXRCcm93c2VySW5mbyIsIm5hdmlnYXRvciIsIndpbmRvdyIsImxhbmd1YWdlIiwidXNlckxhbmd1YWdlIiwiY29sb3JfZGVwdGgiLCJzY3JlZW4iLCJjb2xvckRlcHRoIiwiamF2YV9lbmFibGVkIiwiamF2YUVuYWJsZWQiLCJzY3JlZW5faGVpZ2h0IiwiaGVpZ2h0Iiwic2NyZWVuX3dpZHRoIiwid2lkdGgiLCJ0aW1lX3pvbmVfb2Zmc2V0IiwiRGF0ZSIsImdldFRpbWV6b25lT2Zmc2V0IiwidG9TdHJpbmciLCJOb3RJbml0aWFsaXplZEVycm9yIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiaXNCYXNlSW5zdHJ1bWVudCIsIkZpZWxkVHlwZSIsIlRET25saW5lTWFydFBheW1lbnRTdHJhdGVneSIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJ0ZE9ubGluZU1hcnRTY3JpcHRMb2FkZXIiLCJmb3JtUG9zdGVyIiwidGRJbnB1dHMiLCJpZCIsImZpZWxkVHlwZSIsIkNBUkRfTlVNQkVSIiwiQ1ZWIiwiRVhQSVJZIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJtZXRob2RJZCIsInRkT25saW5lTWFydENsaWVudCIsImxvYWRURE9ubGluZU1hcnRKcyIsIm1vdW50SG9zdGVkRmllbGRzIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJwYXltZW50Iiwib3JkZXIiLCJwYXltZW50UGF5bG9hZCIsImdldFBheW1lbnRQYXlsb2FkT3JUaHJvdyIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsImVycm9yIiwicHJvY2Vzc1dpdGhBZGRpdGlvbmFsQWN0aW9uIiwiZmluYWxpemUiLCJQcm9taXNlIiwicmVqZWN0IiwiZGVpbml0aWFsaXplIiwidW5kZWZpbmVkIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsInVubW91bnQiLCJyZXNvbHZlIiwicGF5bWVudERhdGEiLCJjb21tb25QYXltZW50RGF0YSIsImJyb3dzZXJfaW5mbyIsIkJvb2xlYW4iLCJpbnN0cnVtZW50SWQiLCJkaWdpdGFsSXRlbXNJbkNhcnQiLCJnZXRTdGF0ZSIsImdldENhcnRPclRocm93IiwibGluZUl0ZW1zIiwiZGlnaXRhbEl0ZW1zIiwibGVuZ3RoIiwic2hvdWxkQWRkVmVyaWZpY2F0aW9uVG9rZW4iLCJpc1RydXN0ZWRWYXVsdGluZ0luc3RydW1lbnQiLCJub25jZSIsImdldFRva2VuT3JUaHJvdyIsInRocm93VG9rZW5pemF0aW9uRXJyb3IiLCJnZXRIb3N0ZWRGaWVsZHNPcHRpb25zIiwiZ2V0VERPbmxpbmVNYXJ0Q2xpZW50T3JUaHJvdyIsImlucHV0IiwiaW5wdXRJZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjcmVhdGUiLCJtb3VudCIsImxvYWQiLCJjcmVhdGVUb2tlbiIsInJlc3VsdCIsInRva2VuIiwiZXJyb3JCb2R5IiwiYm9keSIsImlzT2JqZWN0IiwiaXNBcnJheSIsImVycm9ycyIsInNvbWUiLCJjb2RlIiwiaXNUZE9ubGluZU1hcnRBZGRpdGlvbmFsQWN0aW9uIiwidGhyZWVfZHNfcmVzdWx0IiwidGhyZWVEU1Jlc3VsdCIsImFjc191cmwiLCJmb3JtVXJsIiwicGF5ZXJfYXV0aF9yZXF1ZXN0IiwidGhyZWVEU1Nlc3Npb25EYXRhIiwibWVyY2hhbnRfZGF0YSIsImNyZXEiLCJwb3N0Rm9ybSIsImlzQ3JlYXRlVG9rZW5FcnJvciIsInN0eWxlIiwiY29sb3IiLCJjbGFzc2VzIiwiaW5zdHJ1bWVudHMiLCJnZXRJbnN0cnVtZW50cyIsImZpbmRJbnN0cnVtZW50IiwiZmluZCIsImJpZ3BheVRva2VuIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiVERPbmxpbmVNYXJ0U2NyaXB0TG9hZGVyIiwic2NyaXB0TG9hZGVyIiwidGRPbmxpbmVNYXJ0V2luZG93IiwiY3VzdG9tY2hlY2tvdXQiLCJsb2FkU2NyaXB0IiwibW9kdWxlIiwiZ2V0U2NyaXB0TG9hZGVyIiwiY3JlYXRlRm9ybVBvc3RlciIsInJlc29sdmVJZHMiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/td-bank.js\n\n}");

/***/ }),

/***/ "./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx":
/*!**********************************************************************************************!*\
  !*** ./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_bluesnap_direct__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/bluesnap-direct */ \"../checkout-sdk-js/dist/esm/integrations/bluesnap-direct.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_checkoutcom_custom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/checkoutcom-custom */ \"../checkout-sdk-js/dist/esm/integrations/checkoutcom-custom.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_credit_card__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/credit-card */ \"../checkout-sdk-js/dist/esm/integrations/credit-card.js\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_td_bank__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/td-bank */ \"../checkout-sdk-js/dist/esm/integrations/td-bank.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/credit-card-integration */ \"./packages/credit-card-integration/src/CreditCardPaymentMethodContainer.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/getCreditCardInputStyles/getCreditCardInputStyles.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/creditCard/CreditCardCustomerCodeField.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _getHostedCreditCardValidationSchema__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./getHostedCreditCardValidationSchema */ \"./packages/hosted-credit-card-integration/src/components/getHostedCreditCardValidationSchema/getHostedCreditCardValidationSchema.ts\");\n/* harmony import */ var _getHostedInstrumentValidationSchema__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./getHostedInstrumentValidationSchema */ \"./packages/hosted-credit-card-integration/src/components/getHostedInstrumentValidationSchema/getHostedInstrumentValidationSchema.ts\");\n/* harmony import */ var _HostedCreditCardFieldset__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./HostedCreditCardFieldset */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardFieldset/HostedCreditCardFieldset.tsx\");\n/* harmony import */ var _HostedCreditCardValidation__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./HostedCreditCardValidation */ \"./packages/hosted-credit-card-integration/src/components/HostedCreditCardValidation/HostedCreditCardValidation.tsx\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst HostedCreditCardComponent = ({ method, checkoutService, checkoutState, paymentForm, language, onUnhandledError, initializePayment: initializePaymentProp, }) => {\n    const [focusedFieldType, setFocusedFieldType] = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)();\n    const { setFieldTouched, setFieldValue, setSubmitted, submitForm } = paymentForm;\n    const isInstrumentCardCodeRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequiredProp = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(checkoutState);\n    const { config: { cardCode, showCardHolderName }, } = method;\n    const isCardCodeRequired = cardCode || cardCode === null;\n    const isCardHolderNameRequired = showCardHolderName !== null && showCardHolderName !== void 0 ? showCardHolderName : true;\n    const getHostedFieldId = (0,react__WEBPACK_IMPORTED_MODULE_6__.useCallback)((name) => {\n        return `${(0,lodash__WEBPACK_IMPORTED_MODULE_5__.compact)([method.gateway, method.id]).join('-')}-${name}`;\n    }, [method]);\n    const getHostedFormOptions = (0,react__WEBPACK_IMPORTED_MODULE_6__.useCallback)((selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const styleProps = ['color', 'fontFamily', 'fontSize', 'fontWeight'];\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        let styleContainerId = '';\n        if (selectedInstrument) {\n            if (isInstrumentCardCodeRequired) {\n                styleContainerId = getHostedFieldId('ccCvv');\n            }\n            else if (isInstrumentCardNumberRequired) {\n                styleContainerId = getHostedFieldId('ccNumber');\n            }\n        }\n        else {\n            styleContainerId = getHostedFieldId('ccNumber');\n        }\n        return {\n            fields: selectedInstrument\n                ? {\n                    cardCodeVerification: isInstrumentCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                    cardNumberVerification: isInstrumentCardNumberRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                            containerId: getHostedFieldId('ccNumber'),\n                            instrumentId: selectedInstrument.bigpayToken,\n                        }\n                        : undefined,\n                }\n                : {\n                    cardCode: isCardCodeRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_cvv_label'),\n                            containerId: getHostedFieldId('ccCvv'),\n                        }\n                        : undefined,\n                    cardExpiry: {\n                        accessibilityLabel: language.translate('payment.credit_card_expiration_label'),\n                        containerId: getHostedFieldId('ccExpiry'),\n                        placeholder: language.translate('payment.credit_card_expiration_placeholder_text'),\n                    },\n                    cardName: isCardHolderNameRequired\n                        ? {\n                            accessibilityLabel: language.translate('payment.credit_card_name_label'),\n                            containerId: getHostedFieldId('ccName'),\n                        }\n                        : undefined,\n                    cardNumber: {\n                        accessibilityLabel: language.translate('payment.credit_card_number_label'),\n                        containerId: getHostedFieldId('ccNumber'),\n                    },\n                },\n            styles: styleContainerId\n                ? {\n                    default: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(styleContainerId, styleProps),\n                    error: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__.CreditCardInputStylesType.Error),\n                    focus: yield (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(styleContainerId, styleProps, _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_8__.CreditCardInputStylesType.Focus),\n                }\n                : {},\n            onBlur: ({ fieldType }) => {\n                if (focusedFieldType === fieldType) {\n                    setFocusedFieldType(undefined);\n                }\n            },\n            onCardTypeChange: ({ cardType }) => {\n                setFieldValue('hostedForm.cardType', cardType);\n            },\n            onEnter: () => {\n                setSubmitted(true);\n                submitForm();\n            },\n            onFocus: ({ fieldType }) => {\n                setFocusedFieldType(fieldType);\n            },\n            onValidate: ({ errors = {} }) => {\n                (0,lodash__WEBPACK_IMPORTED_MODULE_5__.forIn)(errors, (fieldErrors = [], fieldType) => {\n                    var _a, _b;\n                    const errorKey = `hostedForm.errors.${fieldType}`;\n                    setFieldValue(errorKey, (_b = (_a = fieldErrors[0]) === null || _a === void 0 ? void 0 : _a.type) !== null && _b !== void 0 ? _b : '');\n                    if (fieldErrors[0]) {\n                        setFieldTouched(errorKey);\n                    }\n                });\n            },\n        };\n    }), [\n        focusedFieldType,\n        getHostedFieldId,\n        isCardCodeRequired,\n        isCardHolderNameRequired,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        language,\n        method,\n        setFieldValue,\n        setFieldTouched,\n        setFocusedFieldType,\n        setSubmitted,\n        submitForm,\n    ]);\n    const hostedFieldset = (react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_HostedCreditCardFieldset__WEBPACK_IMPORTED_MODULE_14__[\"default\"], { additionalFields: method.config.requireCustomerCode && (react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_9__[\"default\"], { name: \"ccCustomerCode\" })), cardCodeId: isCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardExpiryId: getHostedFieldId('ccExpiry'), cardNameId: isCardHolderNameRequired ? getHostedFieldId('ccName') : undefined, cardNumberId: getHostedFieldId('ccNumber'), focusedFieldType: focusedFieldType }));\n    const hostedValidationSchema = (0,_getHostedCreditCardValidationSchema__WEBPACK_IMPORTED_MODULE_12__[\"default\"])({ language });\n    const getHostedStoredCardValidationFieldset = (0,react__WEBPACK_IMPORTED_MODULE_6__.useCallback)((selectedInstrument) => {\n        const isInstrumentCardNumberRequired = selectedInstrument\n            ? isInstrumentCardNumberRequiredProp(selectedInstrument, method)\n            : false;\n        const isInstrumentCardCodeRequired = selectedInstrument\n            ? isInstrumentCardCodeRequiredProp(selectedInstrument, method)\n            : false;\n        return (react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_HostedCreditCardValidation__WEBPACK_IMPORTED_MODULE_15__[\"default\"], { cardCodeId: isInstrumentCardCodeRequired ? getHostedFieldId('ccCvv') : undefined, cardNumberId: isInstrumentCardNumberRequired\n                ? getHostedFieldId('ccNumber')\n                : undefined, focusedFieldType: focusedFieldType }));\n    }, [\n        focusedFieldType,\n        getHostedFieldId,\n        isInstrumentCardCodeRequiredProp,\n        isInstrumentCardNumberRequiredProp,\n        method,\n    ]);\n    const initializePayment = initializePaymentProp !== null && initializePaymentProp !== void 0 ? initializePaymentProp : checkoutService.initializePayment;\n    const initializeHostedCreditCardPayment = (0,react__WEBPACK_IMPORTED_MODULE_6__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        return initializePayment(Object.assign(Object.assign({}, options), { integrations: [\n                _bigcommerce_checkout_sdk_integrations_credit_card__WEBPACK_IMPORTED_MODULE_3__.createCreditCardPaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_bluesnap_direct__WEBPACK_IMPORTED_MODULE_1__.createBlueSnapDirectCreditCardPaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_td_bank__WEBPACK_IMPORTED_MODULE_4__.createTDOnlineMartPaymentStrategy,\n                _bigcommerce_checkout_sdk_integrations_checkoutcom_custom__WEBPACK_IMPORTED_MODULE_2__.createCheckoutComCreditCardPaymentStrategy,\n            ], creditCard: {\n                form: yield getHostedFormOptions(selectedInstrument),\n                bigpayToken: selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken,\n            } }));\n    }), [getHostedFormOptions, initializePayment]);\n    const hostedStoredCardValidationSchema = (0,_getHostedInstrumentValidationSchema__WEBPACK_IMPORTED_MODULE_13__[\"default\"])({ language });\n    const props = {\n        checkoutService,\n        checkoutState,\n        paymentForm,\n        language,\n        method,\n        onUnhandledError,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_bigcommerce_checkout_credit_card_integration__WEBPACK_IMPORTED_MODULE_7__[\"default\"], Object.assign({}, props, { cardFieldset: hostedFieldset, cardValidationSchema: hostedValidationSchema, deinitializePayment: checkoutService.deinitializePayment, getHostedFormOptions: getHostedFormOptions, getStoredCardValidationFieldset: getHostedStoredCardValidationFieldset, initializePayment: initializeHostedCreditCardPayment, storedCardValidationSchema: hostedStoredCardValidationSchema })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HostedCreditCardComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9ob3N0ZWQtY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2NvbXBvbmVudHMvSG9zdGVkQ3JlZGl0Q2FyZENvbXBvbmVudC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdUg7QUFDQTtBQUNsQjtBQUNGO0FBQzNEO0FBQ3FEO0FBS3RDO0FBT1A7QUFHNEM7QUFDQTtBQUN0QjtBQUNJO0FBTTFFLE1BQU0seUJBQXlCLEdBQXNELENBQUMsRUFDbEYsTUFBTSxFQUNOLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsaUJBQWlCLEVBQUUscUJBQXFCLEdBQzNDLEVBQUUsRUFBRTtJQUNELE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLCtDQUFRLEVBQVUsQ0FBQztJQUVuRSxNQUFNLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEdBQUcsV0FBVyxDQUFDO0lBQ2pGLE1BQU0sZ0NBQWdDLEdBQUcsbUZBQW9DLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDN0YsTUFBTSxrQ0FBa0MsR0FDcEMsbUZBQXNDLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDMUQsTUFBTSxFQUNGLE1BQU0sRUFBRSxFQUFFLFFBQVEsRUFBRSxrQkFBa0IsRUFBRSxHQUMzQyxHQUFHLE1BQU0sQ0FBQztJQUNYLE1BQU0sa0JBQWtCLEdBQUcsUUFBUSxJQUFJLFFBQVEsS0FBSyxJQUFJLENBQUM7SUFDekQsTUFBTSx3QkFBd0IsR0FBRyxrQkFBa0IsYUFBbEIsa0JBQWtCLGNBQWxCLGtCQUFrQixHQUFJLElBQUksQ0FBQztJQUU1RCxNQUFNLGdCQUFnQixHQUE2QixrREFBVyxDQUMxRCxDQUFDLElBQUksRUFBRSxFQUFFO1FBQ0wsT0FBTyxHQUFHLCtDQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMs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LFdBQVc7YUFDL0MsSUFDSCxDQUFDO0lBQ1AsQ0FBQyxHQUNELENBQUMsb0JBQW9CLEVBQUUsaUJBQWlCLENBQUMsQ0FDNUMsQ0FBQztJQUVOLE1BQU0sZ0NBQWdDLEdBQUcsaUZBQW1DLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBRTNGLE1BQU0sS0FBSyxHQUFHO1FBQ1YsZUFBZTtRQUNmLGFBQWE7UUFDYixXQUFXO1FBQ1gsUUFBUTtRQUNSLE1BQU07UUFDTixnQkFBZ0I7S0FDbkIsQ0FBQztJQUVGLE9BQU8sQ0FDSCwyREFBQyxxRkFBZ0Msb0JBQ3pCLEtBQUssSUFDVCxZQUFZLEVBQUUsY0FBYyxFQUM1QixvQkFBb0IsRUFBRSxzQkFBc0IsRUFDNUMsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxvQkFBb0IsRUFBRSxvQkFBb0IsRUFDMUMsK0JBQStCLEVBQUUscUNBQXFDLEVBQ3RFLGlCQUFpQixFQUFFLGlDQUFpQyxFQUNwRCwwQkFBMEIsRUFBRSxnQ0FBZ0MsSUFDOUQsQ0FDTCxDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBRUYsaUVBQWUseUJBQXlCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2hvc3RlZC1jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY29tcG9uZW50cy9Ib3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50LnRzeD8wMDBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIENoZWNrb3V0U2VydmljZSxcbiAgICB0eXBlIExlZ2FjeUhvc3RlZEZvcm1PcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZUJsdWVTbmFwRGlyZWN0Q3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2JsdWVzbmFwLWRpcmVjdCc7XG5pbXBvcnQgeyBjcmVhdGVDaGVja291dENvbUNyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9jaGVja291dGNvbS1jdXN0b20nO1xuaW1wb3J0IHsgY3JlYXRlQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2NyZWRpdC1jYXJkJztcbmltcG9ydCB7IGNyZWF0ZVRET25saW5lTWFydFBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL3RkLWJhbmsnO1xuaW1wb3J0IHsgY29tcGFjdCwgZm9ySW4gfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlLCB1c2VDYWxsYmFjaywgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7XG4gICAgQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2RDb21wb25lbnQsXG4gICAgdHlwZSBDcmVkaXRDYXJkUGF5bWVudE1ldGhvZFByb3BzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBDcmVkaXRDYXJkQ3VzdG9tZXJDb2RlRmllbGQsXG4gICAgQ3JlZGl0Q2FyZElucHV0U3R5bGVzVHlwZSxcbiAgICBnZXRDcmVkaXRDYXJkSW5wdXRTdHlsZXMsXG4gICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yLFxuICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQgeyB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IGdldEhvc3RlZENyZWRpdENhcmRWYWxpZGF0aW9uU2NoZW1hIH0gZnJvbSAnLi9nZXRIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvblNjaGVtYSc7XG5pbXBvcnQgeyBnZXRIb3N0ZWRJbnN0cnVtZW50VmFsaWRhdGlvblNjaGVtYSB9IGZyb20gJy4vZ2V0SG9zdGVkSW5zdHJ1bWVudFZhbGlkYXRpb25TY2hlbWEnO1xuaW1wb3J0IHsgSG9zdGVkQ3JlZGl0Q2FyZEZpZWxkc2V0IH0gZnJvbSAnLi9Ib3N0ZWRDcmVkaXRDYXJkRmllbGRzZXQnO1xuaW1wb3J0IHsgSG9zdGVkQ3JlZGl0Q2FyZFZhbGlkYXRpb24gfSBmcm9tICcuL0hvc3RlZENyZWRpdENhcmRWYWxpZGF0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBIb3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50UHJvcHMgZXh0ZW5kcyBQYXltZW50TWV0aG9kUHJvcHMge1xuICAgIGluaXRpYWxpemVQYXltZW50PzogQ2hlY2tvdXRTZXJ2aWNlWydpbml0aWFsaXplUGF5bWVudCddO1xufVxuXG5jb25zdCBIb3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50OiBGdW5jdGlvbkNvbXBvbmVudDxIb3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50UHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgbGFuZ3VhZ2UsXG4gICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICBpbml0aWFsaXplUGF5bWVudDogaW5pdGlhbGl6ZVBheW1lbnRQcm9wLFxufSkgPT4ge1xuICAgIGNvbnN0IFtmb2N1c2VkRmllbGRUeXBlLCBzZXRGb2N1c2VkRmllbGRUeXBlXSA9IHVzZVN0YXRlPHN0cmluZz4oKTtcblxuICAgIGNvbnN0IHsgc2V0RmllbGRUb3VjaGVkLCBzZXRGaWVsZFZhbHVlLCBzZXRTdWJtaXR0ZWQsIHN1Ym1pdEZvcm0gfSA9IHBheW1lbnRGb3JtO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFByb3AgPVxuICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKTtcbiAgICBjb25zdCB7XG4gICAgICAgIGNvbmZpZzogeyBjYXJkQ29kZSwgc2hvd0NhcmRIb2xkZXJOYW1lIH0sXG4gICAgfSA9IG1ldGhvZDtcbiAgICBjb25zdCBpc0NhcmRDb2RlUmVxdWlyZWQgPSBjYXJkQ29kZSB8fCBjYXJkQ29kZSA9PT0gbnVsbDtcbiAgICBjb25zdCBpc0NhcmRIb2xkZXJOYW1lUmVxdWlyZWQgPSBzaG93Q2FyZEhvbGRlck5hbWUgPz8gdHJ1ZTtcblxuICAgIGNvbnN0IGdldEhvc3RlZEZpZWxkSWQ6IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9IHVzZUNhbGxiYWNrKFxuICAgICAgICAobmFtZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbXBhY3QoW21ldGhvZC5nYXRld2F5LCBtZXRob2QuaWRdKS5qb2luKCctJyl9LSR7bmFtZX1gO1xuICAgICAgICB9LFxuICAgICAgICBbbWV0aG9kXSxcbiAgICApO1xuXG4gICAgY29uc3QgZ2V0SG9zdGVkRm9ybU9wdGlvbnM6IChcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50PzogQ2FyZEluc3RydW1lbnQsXG4gICAgKSA9PiBQcm9taXNlPExlZ2FjeUhvc3RlZEZvcm1PcHRpb25zPiA9IHVzZUNhbGxiYWNrKFxuICAgICAgICBhc3luYyAoc2VsZWN0ZWRJbnN0cnVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdHlsZVByb3BzID0gWydjb2xvcicsICdmb250RmFtaWx5JywgJ2ZvbnRTaXplJywgJ2ZvbnRXZWlnaHQnXTtcbiAgICAgICAgICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgID8gaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA9IHNlbGVjdGVkSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgID8gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3Aoc2VsZWN0ZWRJbnN0cnVtZW50LCBtZXRob2QpXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgICAgIGxldCBzdHlsZUNvbnRhaW5lcklkID0gJyc7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NDdnYnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZUNvbnRhaW5lcklkID0gZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlQ29udGFpbmVySWQgPSBnZXRIb3N0ZWRGaWVsZElkKCdjY051bWJlcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkczogc2VsZWN0ZWRJbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZVZlcmlmaWNhdGlvbjogaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkOiBnZXRIb3N0ZWRGaWVsZElkKCdjY0N2dicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBzZWxlY3RlZEluc3RydW1lbnQuYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkTnVtYmVyVmVyaWZpY2F0aW9uOiBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZDogc2VsZWN0ZWRJbnN0cnVtZW50LmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ29kZTogaXNDYXJkQ29kZVJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbDogbGFuZ3VhZ2UudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkRXhwaXJ5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw6IGxhbmd1YWdlLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAncGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NFeHBpcnknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfZXhwaXJhdGlvbl9wbGFjZWhvbGRlcl90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROYW1lOiBpc0NhcmRIb2xkZXJOYW1lUmVxdWlyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbmFtZV9sYWJlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ6IGdldEhvc3RlZEZpZWxkSWQoJ2NjTmFtZScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsOiBsYW5ndWFnZS50cmFuc2xhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVDb250YWluZXJJZFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKHN0eWxlQ29udGFpbmVySWQsIHN0eWxlUHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1czogYXdhaXQgZ2V0Q3JlZGl0Q2FyZElucHV0U3R5bGVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRDYXJkSW5wdXRTdHlsZXNUeXBlLkZvY3VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcbiAgICAgICAgICAgICAgICBvbkJsdXI6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkRmllbGRUeXBlID09PSBmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25DYXJkVHlwZUNoYW5nZTogKHsgY2FyZFR5cGUgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKCdob3N0ZWRGb3JtLmNhcmRUeXBlJywgY2FyZFR5cGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdWJtaXR0ZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6ICh7IGZpZWxkVHlwZSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUoZmllbGRUeXBlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uVmFsaWRhdGU6ICh7IGVycm9ycyA9IHt9IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ySW4oZXJyb3JzLCAoZmllbGRFcnJvcnMgPSBbXSwgZmllbGRUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvcktleSA9IGBob3N0ZWRGb3JtLmVycm9ycy4ke2ZpZWxkVHlwZX1gO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGaWVsZFZhbHVlKGVycm9yS2V5LCBmaWVsZEVycm9yc1swXT8udHlwZSA/PyAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZEVycm9yc1swXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZpZWxkVG91Y2hlZChlcnJvcktleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlLFxuICAgICAgICAgICAgZ2V0SG9zdGVkRmllbGRJZCxcbiAgICAgICAgICAgIGlzQ2FyZENvZGVSZXF1aXJlZCxcbiAgICAgICAgICAgIGlzQ2FyZEhvbGRlck5hbWVSZXF1aXJlZCxcbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRQcm9wLFxuICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgIGxhbmd1YWdlLFxuICAgICAgICAgICAgbWV0aG9kLFxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgICAgIHNldEZpZWxkVG91Y2hlZCxcbiAgICAgICAgICAgIHNldEZvY3VzZWRGaWVsZFR5cGUsXG4gICAgICAgICAgICBzZXRTdWJtaXR0ZWQsXG4gICAgICAgICAgICBzdWJtaXRGb3JtLFxuICAgICAgICBdLFxuICAgICk7XG5cbiAgICBjb25zdCBob3N0ZWRGaWVsZHNldCA9IChcbiAgICAgICAgPEhvc3RlZENyZWRpdENhcmRGaWVsZHNldFxuICAgICAgICAgICAgYWRkaXRpb25hbEZpZWxkcz17XG4gICAgICAgICAgICAgICAgbWV0aG9kLmNvbmZpZy5yZXF1aXJlQ3VzdG9tZXJDb2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgPENyZWRpdENhcmRDdXN0b21lckNvZGVGaWVsZCBuYW1lPVwiY2NDdXN0b21lckNvZGVcIiAvPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhcmRDb2RlSWQ9e2lzQ2FyZENvZGVSZXF1aXJlZCA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JykgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBjYXJkRXhwaXJ5SWQ9e2dldEhvc3RlZEZpZWxkSWQoJ2NjRXhwaXJ5Jyl9XG4gICAgICAgICAgICBjYXJkTmFtZUlkPXtpc0NhcmRIb2xkZXJOYW1lUmVxdWlyZWQgPyBnZXRIb3N0ZWRGaWVsZElkKCdjY05hbWUnKSA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIGNhcmROdW1iZXJJZD17Z2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKX1cbiAgICAgICAgICAgIGZvY3VzZWRGaWVsZFR5cGU9e2ZvY3VzZWRGaWVsZFR5cGV9XG4gICAgICAgIC8+XG4gICAgKTtcbiAgICBjb25zdCBob3N0ZWRWYWxpZGF0aW9uU2NoZW1hID0gZ2V0SG9zdGVkQ3JlZGl0Q2FyZFZhbGlkYXRpb25TY2hlbWEoeyBsYW5ndWFnZSB9KTtcblxuICAgIGNvbnN0IGdldEhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQ6IChzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50KSA9PiBSZWFjdE5vZGUgPVxuICAgICAgICB1c2VDYWxsYmFjayhcbiAgICAgICAgICAgIChzZWxlY3RlZEluc3RydW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQgPSBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRQcm9wKHNlbGVjdGVkSW5zdHJ1bWVudCwgbWV0aG9kKVxuICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQgPSBzZWxlY3RlZEluc3RydW1lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkUHJvcChzZWxlY3RlZEluc3RydW1lbnQsIG1ldGhvZClcbiAgICAgICAgICAgICAgICAgICAgOiBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxIb3N0ZWRDcmVkaXRDYXJkVmFsaWRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZENvZGVJZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCA/IGdldEhvc3RlZEZpZWxkSWQoJ2NjQ3Z2JykgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJJZD17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2V0SG9zdGVkRmllbGRJZCgnY2NOdW1iZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNlZEZpZWxkVHlwZT17Zm9jdXNlZEZpZWxkVHlwZX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBmb2N1c2VkRmllbGRUeXBlLFxuICAgICAgICAgICAgICAgIGdldEhvc3RlZEZpZWxkSWQsXG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFByb3AsXG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkUHJvcCxcbiAgICAgICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBdLFxuICAgICAgICApO1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZVBheW1lbnQgPSBpbml0aWFsaXplUGF5bWVudFByb3AgPz8gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50O1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZUhvc3RlZENyZWRpdENhcmRQYXltZW50OiBDcmVkaXRDYXJkUGF5bWVudE1ldGhvZFByb3BzWydpbml0aWFsaXplUGF5bWVudCddID1cbiAgICAgICAgdXNlQ2FsbGJhY2soXG4gICAgICAgICAgICBhc3luYyAob3B0aW9ucywgc2VsZWN0ZWRJbnN0cnVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQmx1ZVNuYXBEaXJlY3RDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlVERPbmxpbmVNYXJ0UGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ2hlY2tvdXRDb21DcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBjcmVkaXRDYXJkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtOiBhd2FpdCBnZXRIb3N0ZWRGb3JtT3B0aW9ucyhzZWxlY3RlZEluc3RydW1lbnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmlncGF5VG9rZW46IHNlbGVjdGVkSW5zdHJ1bWVudD8uYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW2dldEhvc3RlZEZvcm1PcHRpb25zLCBpbml0aWFsaXplUGF5bWVudF0sXG4gICAgICAgICk7XG5cbiAgICBjb25zdCBob3N0ZWRTdG9yZWRDYXJkVmFsaWRhdGlvblNjaGVtYSA9IGdldEhvc3RlZEluc3RydW1lbnRWYWxpZGF0aW9uU2NoZW1hKHsgbGFuZ3VhZ2UgfSk7XG5cbiAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgICAgICBjaGVja291dFN0YXRlLFxuICAgICAgICBwYXltZW50Rm9ybSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIG1ldGhvZCxcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvcixcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPENyZWRpdENhcmRQYXltZW50TWV0aG9kQ29tcG9uZW50XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICBjYXJkRmllbGRzZXQ9e2hvc3RlZEZpZWxkc2V0fVxuICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TY2hlbWE9e2hvc3RlZFZhbGlkYXRpb25TY2hlbWF9XG4gICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgIGdldEhvc3RlZEZvcm1PcHRpb25zPXtnZXRIb3N0ZWRGb3JtT3B0aW9uc31cbiAgICAgICAgICAgIGdldFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXQ9e2dldEhvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uRmllbGRzZXR9XG4gICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUhvc3RlZENyZWRpdENhcmRQYXltZW50fVxuICAgICAgICAgICAgc3RvcmVkQ2FyZFZhbGlkYXRpb25TY2hlbWE9e2hvc3RlZFN0b3JlZENhcmRWYWxpZGF0aW9uU2NoZW1hfVxuICAgICAgICAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBIb3N0ZWRDcmVkaXRDYXJkQ29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/hosted-credit-card-integration/src/components/HostedCreditCardComponent.tsx\n\n}");

/***/ })

}]);