"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_stripe_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/stripe.js":
/*!**********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/stripe.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLinkV2ButtonStrategy: () => (/* binding */ Pe),\n/* harmony export */   createStripeCSPaymentStrategy: () => (/* binding */ Ce),\n/* harmony export */   createStripeLinkV2CustomerStrategy: () => (/* binding */ W),\n/* harmony export */   createStripeOCSPaymentStrategy: () => (/* binding */ Se),\n/* harmony export */   createStripeUPECustomerStrategy: () => (/* binding */ k),\n/* harmony export */   createStripeUPEPaymentStrategy: () => (/* binding */ me),\n/* harmony export */   createStripeV3PaymentStrategy: () => (/* binding */ ae)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar s,a,d,l,c,u,h,p,m,y,g={};function v(e,t){return Object.assign(e,{resolveIds:t})}g.d=(e,t)=>{for(var i in t)g.o(t,i)&&!g.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class S extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class _ extends S{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e.SHIPPING=\"shipping\",e.BILLING=\"billing\"}(s||(s={})),function(e){e.SPLIT=\"split\",e.FULL=\"full\",e.ORGANIZATION=\"organization\"}(a||(a={})),function(e){e.SUCCESS=\"success\",e.ERROR=\"error\"}(d||(d={})),function(e){e.CreditCard=\"card\",e.Link=\"link\",e.EPS=\"eps\",e.GRABPAY=\"grabpay\",e.BANCONTACT=\"bancontact\",e.IDEAL=\"ideal\",e.ALIPAY=\"alipay\",e.KLARNA=\"klarna\",e.OCS=\"optimized_checkout\"}(l||(l={})),function(e){e.NEVER=\"never\",e.AUTO=\"auto\",e.ALWAYS=\"always\",e.PAYMENT=\"payment\",e.IF_REQUIRED=\"if_required\"}(c||(c={})),function(e){e.V3=\"v3\",e.ACACIA=\"acacia\",e.BASIL=\"basil\",e.CLOVER=\"clover\"}(u||(u={})),function(e){e.PAYMENT=\"payment\",e.AUTHENTICATION=\"linkAuthentication\",e.SHIPPING=\"address\",e.EXPRESS_CHECKOUT=\"expressCheckout\"}(h||(h={})),function(e){e.REQUIRES_PAYMENT_METHOD=\"requires_payment_method\",e.REQUIRES_CONFIRMATION=\"requires_confirmation\",e.REQUIRES_ACTION=\"requires_action\",e.PROCESSING=\"processing\",e.SUCCEEDED=\"succeeded\",e.CANCELED=\"canceled\"}(p||(p={})),function(e){e.CLICK=\"click\",e.CHANGE=\"change\",e.READY=\"ready\",e.SHIPPING_ADDRESS_CHANGE=\"shippingaddresschange\",e.SHIPPING_RATE_CHANGE=\"shippingratechange\",e.CONFIRM=\"confirm\",e.CANCEL=\"cancel\",e.LOADER_START=\"loaderstart\"}(m||(m={})),function(e){e.ON_SESSION=\"on_session\",e.OFF_SESSION=\"off_session\"}(y||(y={}));var f,C=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class E{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}getStripeClient(e,t,i,n,r){return C(this,void 0,void 0,function*(){if(this.stripeWindow.bcStripeClient)return this.stripeWindow.bcStripeClient;const o=yield this.load(i),{stripePublishableKey:s,stripeConnectedAccount:a}=e,d=o(s,Object.assign(Object.assign(Object.assign(Object.assign({},a?{stripeAccount:a}:{}),t?{locale:t}:{}),n?{betas:n}:{}),r?{apiVersion:r}:{}));return Object.assign(this.stripeWindow,{bcStripeClient:d}),d})}getElements(e,t){return C(this,void 0,void 0,function*(){let i=this.stripeWindow.bcStripeElements;return i?yield this.updateStripeElements(t):(i=e.elements(t),Object.assign(this.stripeWindow,{bcStripeElements:i})),i})}updateStripeElements(e){return C(this,void 0,void 0,function*(){const t=this.stripeWindow.bcStripeElements;t&&(t.update(e),yield t.fetchUpdates())})}getCheckoutSession(e,t){return C(this,void 0,void 0,function*(){let i=this.stripeWindow.bcStripeCheckoutSession;return i||(i=yield e.initCheckout(t),Object.assign(this.stripeWindow,{bcStripeCheckoutSession:i})),i})}load(e){return C(this,void 0,void 0,function*(){if(!this.stripeWindow.Stripe&&(yield this.scriptLoader.loadScript(this.getScriptUrl(e)),!this.stripeWindow.Stripe))throw new _;return this.stripeWindow.Stripe})}getScriptUrl(e){return e&&e!==u.V3?`https://js.stripe.com/${e}/stripe.js`:\"https://js.stripe.com/v3/\"}}class I extends S{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(f||(f={}));class P extends S{constructor(e){super(function(e){switch(e){case f.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case f.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case f.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case f.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case f.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case f.MissingCheckoutConfig:case f.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case f.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case f.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case f.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case f.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case f.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case f.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function b(e){return\"object\"==typeof e&&null!==e&&\"initializationData\"in e&&void 0!==e.initializationData&&null!==e.initializationData&&\"object\"==typeof e.initializationData&&\"stripePublishableKey\"in e.initializationData&&\"stripeConnectedAccount\"in e.initializationData&&\"shopperLanguage\"in e.initializationData&&void 0!==e.initializationData.stripePublishableKey&&void 0!==e.initializationData.stripeConnectedAccount&&void 0!==e.initializationData.shopperLanguage}const w=[\"payment_element_beta_2\",\"alipay_pm_beta_1\",\"link_default_integration_beta_1\",\"shipping_address_element_beta_1\",\"address_element_beta_1\"],A=\"2020-03-02;alipay_beta=v1;link_beta=v1\";function O(e){return\"stripeLinkAuthenticationState\"in e}class M{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){var t,i,n,r,o;return i=this,n=void 0,o=function*(){let i;if(!e.stripeupe)throw new I('Unable to proceed because \"options\" argument is not provided.');const{container:n,gatewayId:r,methodId:o,onEmailChange:a,getStyles:d,isLoading:l}=e.stripeupe;Object.entries(e.stripeupe).forEach(([e,t])=>{if(!t)throw new I(`Unable to proceed because \"${e}\" argument is not provided.`)}),yield this.paymentIntegrationService.loadPaymentMethod(r,{params:{method:o}});const c=this.paymentIntegrationService.getState(),p=c.getPaymentMethodOrThrow(o,r),{clientToken:y}=p;if(!b(p)||!y)throw new P(f.MissingPaymentToken);const{email:g}=c.getCustomerOrThrow(),v=c.getPaymentProviderCustomerOrThrow(),S=(O(v)?v:{}).stripeLinkAuthenticationState;if(!g){let e;const r=\"function\"==typeof d&&d();e=r?{variables:{colorPrimary:r.fieldInnerShadow,colorBackground:r.fieldBackground,colorText:r.labelText,colorDanger:r.fieldErrorText,colorTextSecondary:r.labelText,colorTextPlaceholder:r.fieldPlaceholderText},rules:{\".Input\":{borderColor:r.fieldBorder,color:r.fieldText,boxShadow:r.fieldInnerShadow}}}:{},i=yield this.scriptLoader.getStripeClient(p.initializationData,c.getCartLocale(),u.V3,w,A),this._stripeElements=yield this.scriptLoader.getElements(i,{clientSecret:y,appearance:e});const{getBillingAddress:o,getConsignments:g}=this.paymentIntegrationService.getState(),v=g(),_=null===(t=null==v?void 0:v[0])||void 0===t?void 0:t.id,{email:C}=o()||{},E=C?{defaultValues:{mode:s.SHIPPING,email:C}}:{},I=this._stripeElements.getElement(h.AUTHENTICATION)||this._stripeElements.create(h.AUTHENTICATION,E);I.on(m.CHANGE,e=>{if(!(\"authenticated\"in e))throw new P(f.MissingCustomer);this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:e.authenticated}),e.complete?a(e.authenticated,e.value.email):a(!1,\"\"),l&&l(!1),void 0===S&&e.authenticated&&_&&this.paymentIntegrationService.deleteConsignment(_)}),I.mount(`#${n}`)}},new((r=void 0)||(r=Promise))(function(e,t){function s(e){try{d(o.next(e))}catch(e){t(e)}}function a(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(s,a)}d((o=o.apply(i,n||[])).next())})}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(h.AUTHENTICATION))||void 0===t||t.unmount(),Promise.resolve()}signIn(e,t){return this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()}signOut(e){return this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}}const k=v(t=>new M(t,new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{id:\"stripeupe\"}]);class T extends S{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}class N extends S{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var R;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(R||(R={}));class D extends S{constructor(e){super(function(e){switch(e){case R.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case R.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case R.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case R.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var z=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class L{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t,this.isMounted=!1}deinitialize(){var e;null===(e=this.checkoutEventsUnsubscribe)||void 0===e||e.call(this),this.isMounted=!1}initCheckoutEventsSubscription(e,t,i,n){this.checkoutEventsUnsubscribe=this.paymentIntegrationService.subscribe(()=>z(this,void 0,void 0,function*(){var r;const o=null==n?void 0:n.getElement(h.PAYMENT);if(o){try{yield this.updateStripePaymentIntent(e,t)}catch(e){return this.isMounted&&(o.unmount(),this.isMounted=!1),void(e instanceof Error&&(null===(r=i.onError)||void 0===r||r.call(i,e)))}this.isMounted||(yield null==n?void 0:n.fetchUpdates(),this.mountElement(o,i.containerId))}}),e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.outstandingBalance},e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.coupons})}mountElement(e,t){document.getElementById(t)&&(e.mount(`#${t}`),this.isMounted=!0)}mapAppearanceVariables(e){return{colorPrimary:e.fieldInnerShadow,colorBackground:e.fieldBackground,colorText:e.labelText,colorDanger:e.fieldErrorText,colorTextSecondary:e.labelText,colorTextPlaceholder:e.fieldPlaceholderText,colorIcon:e.fieldPlaceholderText}}mapInputAppearanceRules(e){return{borderColor:e.fieldBorder,color:e.fieldText,boxShadow:e.fieldInnerShadow}}throwStripeError(e){if(\"object\"==typeof(t=e)&&null!==t&&\"type\"in t&&(this.throwDisplayableStripeError(e),this.isCancellationError(e)))throw new T;var t;throw new N}throwDisplayableStripeError(e){if((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([\"card_error\",\"invalid_request_error\",\"validation_error\"],e.type))throw new Error(e.message)}isCancellationError(e){var t;const i=null===(t=null==e?void 0:e.payment_intent.last_payment_error)||void 0===t?void 0:t.message;return!!i&&-1!==i.indexOf(\"canceled\")}throwPaymentConfirmationProceedMessage(){throw new N(\"We've received your order and are processing your payment. Once the payment is verified, your order will be completed. We will send you an email when it's completed. Please note, this process may take a few minutes depending on the processing times of your chosen method.\")}isPaymentCompleted(e,t){return z(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getPaymentMethodOrThrow(e),{features:r}=i.getStoreConfigOrThrow().checkoutSettings;if(!n.clientToken||!t||!r[\"PI-626.Block_unnecessary_payment_confirmation_for_StripeUPE\"])return!1;const{paymentIntent:o}=yield t.retrievePaymentIntent(n.clientToken);return(null==o?void 0:o.status)===p.SUCCEEDED})}mapStripePaymentData(e,t,i=!1){const n=this.paymentIntegrationService.getState().getBillingAddress(),{firstName:r=\"\",lastName:o=\"\",email:s=\"\"}=n||{},a=this._mapStripeAddress(n);if(!e)throw new D(R.PaymentNotInitialized);if(!(s&&a&&a.city&&a.country&&r&&o))throw new P(f.MissingBillingAddress);return{elements:e,redirect:c.IF_REQUIRED,confirmParams:Object.assign({payment_method_data:Object.assign(Object.assign({},i?{allow_redisplay:\"always\"}:{}),{billing_details:{email:s,address:a,name:`${r} ${o}`}})},t&&{return_url:t})}}isAdditionalActionError(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e,{code:\"additional_action_required\"})}isRedirectAction(e){const{type:t,data:{redirect_url:i}}=e;return\"redirect_to_url\"===t&&!!i}isOnPageAdditionalAction(e){const{type:t,data:{token:i}}=e;return\"additional_action_requires_payment_method\"===t&&!!i}updateStripePaymentIntent(e,t){return z(this,void 0,void 0,function*(){const i=yield this.paymentIntegrationService.loadPaymentMethod(e,{params:{method:t}}),{clientToken:n}=i.getPaymentMethodOrThrow(t);n&&this.scriptLoader.updateStripeElements({clientSecret:n})})}getStripeJsVersion(e){return e.useNewStripeJsVersion?u.CLOVER:u.V3}_mapStripeAddress(e){if(e){const{city:t,address1:i,address2:n,countryCode:r,postalCode:o,stateOrProvinceCode:s}=e;return Object.assign({city:t,country:r,postal_code:o,line1:i,line2:n},s?{state:s}:{})}throw new P(f.MissingBillingAddress)}}const U={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},V={position:\"fixed\",\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"},x=\"embedded-checkout-loading-indicator-rotation\";class j{constructor(e){this.styles=Object.assign(Object.assign({},U),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${x} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(x))return;const t=document.createElement(\"style\");t.id=x,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${x} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const B=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;class F{constructor(e){this._decimalPlaces=e}toInteger(e){return Math.round(e*Math.pow(10,this._decimalPlaces))}}const G=[\"AC\",\"AD\",\"AE\",\"AF\",\"AG\",\"AI\",\"AL\",\"AM\",\"AO\",\"AQ\",\"AR\",\"AT\",\"AU\",\"AW\",\"AX\",\"AZ\",\"BA\",\"BB\",\"BD\",\"BE\",\"BF\",\"BG\",\"BH\",\"BI\",\"BJ\",\"BL\",\"BM\",\"BN\",\"BO\",\"BQ\",\"BR\",\"BS\",\"BT\",\"BV\",\"BW\",\"BY\",\"BZ\",\"CA\",\"CD\",\"CF\",\"CG\",\"CH\",\"CI\",\"CK\",\"CL\",\"CM\",\"CN\",\"CO\",\"CR\",\"CV\",\"CW\",\"CY\",\"CZ\",\"DE\",\"DJ\",\"DK\",\"DM\",\"DO\",\"DZ\",\"EC\",\"EE\",\"EG\",\"EH\",\"ER\",\"ES\",\"ET\",\"FI\",\"FJ\",\"FK\",\"FO\",\"FR\",\"GA\",\"GB\",\"GD\",\"GE\",\"GF\",\"GG\",\"GH\",\"GI\",\"GL\",\"GM\",\"GN\",\"GP\",\"GQ\",\"GR\",\"GS\",\"GT\",\"GU\",\"GW\",\"GY\",\"HK\",\"HN\",\"HR\",\"HT\",\"HU\",\"ID\",\"IE\",\"IL\",\"IM\",\"IN\",\"IO\",\"IQ\",\"IS\",\"IT\",\"JE\",\"JM\",\"JO\",\"JP\",\"KE\",\"KG\",\"KH\",\"KI\",\"KM\",\"KN\",\"KR\",\"KW\",\"KY\",\"KZ\",\"LA\",\"LB\",\"LC\",\"LI\",\"LK\",\"LR\",\"LS\",\"LT\",\"LU\",\"LV\",\"LY\",\"MA\",\"MC\",\"MD\",\"ME\",\"MF\",\"MG\",\"MK\",\"ML\",\"MM\",\"MN\",\"MO\",\"MQ\",\"MR\",\"MS\",\"MT\",\"MU\",\"MV\",\"MW\",\"MX\",\"MY\",\"MZ\",\"NA\",\"NC\",\"NE\",\"NG\",\"NI\",\"NL\",\"NO\",\"NP\",\"NR\",\"NU\",\"NZ\",\"OM\",\"PA\",\"PE\",\"PF\",\"PG\",\"PH\",\"PK\",\"PL\",\"PM\",\"PN\",\"PR\",\"PS\",\"PT\",\"PY\",\"QA\",\"RE\",\"RO\",\"RS\",\"RU\",\"RW\",\"SA\",\"SB\",\"SC\",\"SD\",\"SE\",\"SG\",\"SH\",\"SI\",\"SJ\",\"SK\",\"SL\",\"SM\",\"SN\",\"SO\",\"SR\",\"SS\",\"ST\",\"SV\",\"SX\",\"SZ\",\"TA\",\"TC\",\"TD\",\"TF\",\"TG\",\"TH\",\"TJ\",\"TK\",\"TL\",\"TM\",\"TN\",\"TO\",\"TR\",\"TT\",\"TV\",\"TW\",\"TZ\",\"UA\",\"UG\",\"US\",\"UY\",\"UZ\",\"VA\",\"VC\",\"VE\",\"VG\",\"VN\",\"VU\",\"WF\",\"WS\",\"XK\",\"YE\",\"YT\",\"ZA\",\"ZM\",\"ZW\",\"ZZ\"];var H=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class q{constructor(e,t,i,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i,this.loadingIndicator=n}initialize(e){return H(this,void 0,void 0,function*(){const{stripeocs:t}=e||{};if(!t)throw new I('Unable to proceed because \"options\" argument is not provided.');const{methodId:i,gatewayId:n,container:r}=t;if(!r||!i||!n)throw new D(R.PaymentNotInitialized);const o=yield this.paymentIntegrationService.loadPaymentMethod(n,{params:{method:i}}),s=o.getPaymentMethodOrThrow(i,n),{loadingContainerId:a,buttonHeight:d,onComplete:l}=t;if(this._loadingIndicatorContainer=a,this._onComplete=l,!b(s))throw new P(f.MissingPaymentMethod);const{initializationData:c}=s,{captureMethod:u}=c,h=this.stripeIntegrationService.getStripeJsVersion(c);this._captureMethod=u,this._stripeClient=yield this.scriptLoader.getStripeClient(c,o.getCartLocale(),h),yield this._mountExpressCheckoutElement(r,this._stripeClient,d),this._initializeEvents(i)})}signIn(){return Promise.resolve()}signOut(){return Promise.resolve()}executePaymentMethodCheckout(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_mountExpressCheckoutElement(e,t,i=40){return H(this,void 0,void 0,function*(){const n=this._shouldRequireShippingAddress(),r=Object.assign(Object.assign(Object.assign({shippingAddressRequired:n},n?{allowedShippingCountries:yield this._getAvailableCountries()}:{}),n?{shippingRates:[{id:\"_\",amount:0,displayName:\"Pending rates\"}]}:{}),{billingAddressRequired:!0,emailRequired:!0,phoneNumberRequired:!0,paymentMethods:{link:c.AUTO,applePay:c.NEVER,googlePay:c.NEVER,amazonPay:c.NEVER,paypal:c.NEVER,klarna:c.NEVER},buttonHeight:i}),{cartAmount:o}=this.paymentIntegrationService.getState().getCartOrThrow(),s=Object.assign({mode:\"payment\",amount:this._toCents(o),currency:this._getCurrency()},this._captureMethod?{captureMethod:this._captureMethod}:{});return this._stripeElements=t.elements(s),this._linkV2Element=this._stripeElements.create(h.EXPRESS_CHECKOUT,r),this._linkV2Element.mount(`#${e}`),this._linkV2Element})}_initializeEvents(e){this._linkV2Element&&(this._shouldRequireShippingAddress()&&(this._linkV2Element.on(m.SHIPPING_ADDRESS_CHANGE,e=>H(this,void 0,void 0,function*(){return this._onShippingAddressChange(e)})),this._linkV2Element.on(m.SHIPPING_RATE_CHANGE,e=>H(this,void 0,void 0,function*(){return this._onShippingRateChange(e)}))),this._linkV2Element.on(m.CONFIRM,t=>H(this,void 0,void 0,function*(){return this._onConfirm(t,e)})),this._linkV2Element.on(m.CANCEL,this._onCancel))}_onShippingAddressChange(e){return H(this,void 0,void 0,function*(){if(!(\"address\"in e))return;const t=e.address,i={firstName:\"\",lastName:\"\",phone:\"\",company:\"\",address1:\"\",address2:\"\",city:(null==t?void 0:t.city)||\"\",countryCode:(null==t?void 0:t.country)||\"\",postalCode:(null==t?void 0:t.postal_code)||\"\",stateOrProvince:(null==t?void 0:t.state)||\"\",stateOrProvinceCode:(null==t?void 0:t.state)||\"\",customFields:[]};yield this.paymentIntegrationService.updateShippingAddress(i);const n=yield this._getAvailableShippingOptions();yield this._updateDisplayedPrice(),(null==n?void 0:n.length)?e.resolve({shippingRates:n}):e.reject()})}_onCancel(){throw new T}_onShippingRateChange(e){return H(this,void 0,void 0,function*(){if(\"shippingRate\"in e){const{shippingRate:t}=e;yield this._handleShippingOptionChange(null==t?void 0:t.id),yield this._updateDisplayedPrice(),e.resolve({})}})}_onConfirm(e,t){return H(this,void 0,void 0,function*(){if(\"billingDetails\"in e&&\"shippingAddress\"in e&&this._stripeClient&&this._stripeElements){yield this._updateShippingAndBillingAddress(e),yield this.paymentIntegrationService.submitOrder();const i=this._getPaymentPayload(t);try{yield this.paymentIntegrationService.submitPayment(i)}catch(e){yield this._processAdditionalAction(e,t)}}return Promise.resolve()})}_updateShippingAndBillingAddress(e){var t,i,n,r,o,s,a,d;return H(this,void 0,void 0,function*(){const l=this._shouldRequireShippingAddress(),c=(null===(i=null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||void 0===i?void 0:i.split(\" \")[0])||(null===(r=null===(n=e.billingDetails)||void 0===n?void 0:n.name)||void 0===r?void 0:r.split(\" \")[0])||\"\",u=(null===(s=null===(o=e.shippingAddress)||void 0===o?void 0:o.name)||void 0===s?void 0:s.split(\" \")[1])||(null===(d=null===(a=e.billingDetails)||void 0===a?void 0:a.name)||void 0===d?void 0:d.split(\" \")[1])||\"\";if(l){const t=this._mapShippingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateShippingAddress(t)}const h=this._mapBillingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateBillingAddress(h)})}_mapShippingAddress(e,t,i,n){var r,o,s,a,d,l,c;return{firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.line1)||\"\",address2:(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.line2)||\"\",city:(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.city)||\"\",countryCode:(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.country)||\"\",postalCode:(null===(d=null==e?void 0:e.address)||void 0===d?void 0:d.postal_code)||\"\",stateOrProvince:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",stateOrProvinceCode:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",customFields:[]}}_mapBillingAddress(e,t,i,n){var r,o,s,a,d,l;return{email:(null==t?void 0:t.email)||\"\",firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==t?void 0:t.address)||void 0===r?void 0:r.line1)||\"\",address2:\"\",city:(null===(o=null==t?void 0:t.address)||void 0===o?void 0:o.city)||\"\",countryCode:(null===(s=null==t?void 0:t.address)||void 0===s?void 0:s.country)||\"\",postalCode:(null===(a=null==t?void 0:t.address)||void 0===a?void 0:a.postal_code)||\"\",stateOrProvince:(null===(d=null==t?void 0:t.address)||void 0===d?void 0:d.state)||\"\",stateOrProvinceCode:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",customFields:[]}}_processAdditionalAction(e,t){return H(this,void 0,void 0,function*(){if(!B(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeClient||!this._stripeElements)throw new D(R.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(i,t),o=this._getPaymentPayload(t,(null==r?void 0:r.id)||n);try{this._toggleLoadingIndicator(!0),yield this.paymentIntegrationService.submitPayment(o),yield this._completeCheckoutFlow()}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}finally{this._toggleLoadingIndicator(!1)}})}_confirmStripePaymentOrThrow(e,t){var i,n,r;return H(this,void 0,void 0,function*(){const{token:o,redirect_url:s}=e,a=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,s);let d;try{const e=(yield this.stripeIntegrationService.isPaymentCompleted(t,this._stripeClient))?yield null===(r=this._stripeClient)||void 0===r?void 0:r.retrievePaymentIntent(o||\"\"):yield null===(i=this._stripeClient)||void 0===i?void 0:i.confirmPayment({elements:a.elements,clientSecret:o,redirect:c.IF_REQUIRED,confirmParams:{return_url:null===(n=a.confirmParams)||void 0===n?void 0:n.return_url}});if(d=null==e?void 0:e.error,d||!(null==e?void 0:e.paymentIntent))throw new N;return e}catch(e){return this.stripeIntegrationService.throwStripeError(d)}})}_completeCheckoutFlow(){return H(this,void 0,void 0,function*(){return\"function\"==typeof this._onComplete?this._onComplete():(window.location.replace(\"/order-confirmation\"),Promise.resolve())})}_getPaymentPayload(e,t){var i;const n=(null===(i=this.paymentIntegrationService.getState().getCart())||void 0===i?void 0:i.id)||\"\";return{methodId:e,paymentData:{formattedPayload:Object.assign(Object.assign({cart_id:n},t?{credit_card_token:{token:t}}:{}),{confirm:!1,method:l.Link})}}}_shouldRequireShippingAddress(){const{getCartOrThrow:e}=this.paymentIntegrationService.getState(),{lineItems:t}=e();return!!t.physicalItems.length}_updateDisplayedPrice(){return H(this,void 0,void 0,function*(){this._stripeElements&&this._stripeElements.update({currency:this._getCurrency(),mode:\"payment\",amount:yield this._getTotalPrice()})})}_getCurrency(){if(!this._currencyCode){const{code:e}=this.paymentIntegrationService.getState().getCartOrThrow().currency;this._currencyCode=e.toLowerCase()}return this._currencyCode}_getTotalPrice(){return H(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:e,getCartOrThrow:t}=this.paymentIntegrationService.getState(),{decimalPlaces:i}=t().currency,n=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.round)(e().outstandingBalance,i).toFixed(i);return this._toCents(+n)})}_getAvailableCountries(){var e;return H(this,void 0,void 0,function*(){const t=yield this.paymentIntegrationService.loadShippingCountries();return((null===(e=t.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code))||[]).filter(e=>G.includes(e))})}_getAvailableShippingOptions(){var e,t,i;return H(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getConsignments();if(!(null==n?void 0:n[0]))return;const r=n[0],o=(r.availableShippingOptions||[]).map(this._getStripeShippingOption.bind(this)),s=null===(e=r.availableShippingOptions)||void 0===e?void 0:e.find(e=>e.isRecommended),a=null===(t=r.selectedShippingOption)||void 0===t?void 0:t.id,d=null==s?void 0:s.id;return a?o.sort(e=>e.id===a?-1:0):d?(o.sort(e=>e.id===d?-1:0),yield this._handleShippingOptionChange(d)):yield this._handleShippingOptionChange(null===(i=o[0])||void 0===i?void 0:i.id),o})}_getStripeShippingOption({id:e,cost:t,description:i}){return{id:e,displayName:i,amount:this._toCents(t)}}_handleShippingOptionChange(e){return H(this,void 0,void 0,function*(){if(e&&\"shipping_option_unselected\"!==e)return this.paymentIntegrationService.selectShippingOption(e)})}_getAmountTransformer(){if(this._amountTransformer)return this._amountTransformer;const{getCart:e}=this.paymentIntegrationService.getState(),{currency:t}=e()||{};return t?new F(t.decimalPlaces):void 0}_toCents(e){const t=Math.round(100*e),i=this._getAmountTransformer();return i?i.toInteger(e):t}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this.loadingIndicator.show(this._loadingIndicatorContainer):this.loadingIndicator.hide()}}const W=v(t=>{const i=new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),n=new j({containerStyles:V});return new q(t,i,new L(t,i),n)},[{id:\"stripeocs\"}]);class Y extends I{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}function $(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function J(e){return Boolean(e.instrumentId)}class K extends S{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Z(e){return null!==e&&\"object\"==typeof e&&\"cardNumberElementOptions\"in e&&\"cardCvcElementOptions\"in e&&\"cardExpiryElementOptions\"in e&&void 0!==e.cardNumberElementOptions&&void 0!==e.cardCvcElementOptions&&void 0!==e.cardExpiryElementOptions}var Q,X,ee,te;!function(e){e.Solid=\"solid\",e.Default=\"default\"}(Q||(Q={})),function(e){e.Alipay=\"alipay\",e.CardCvc=\"cardCvc\",e.CardExpiry=\"cardExpiry\",e.CardNumber=\"cardNumber\",e.CreditCard=\"card\",e.IDEAL=\"idealBank\",e.Sepa=\"iban\"}(X||(X={})),function(e){e.Alipay=\"alipay\",e.CreditCard=\"card\",e.IDEAL=\"ideal\",e.Sepa=\"sepa_debit\"}(ee||(ee={})),function(e){e.AuthFailure=\"auth_failure\"}(te||(te={}));class ie extends S{constructor(e){super(e===te.AuthFailure?\"User did not authenticate\":\"There was an error while processing your payment. Please try again or contact us.\"),this.type=\"stripev3_error\",this.subtype=e}}var ne=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};const re=[X.Alipay,X.IDEAL];class oe{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){return ne(this,void 0,void 0,function*(){const{stripev3:t,methodId:i,gatewayId:n}=e;if(!n)throw new I('Unable to initialize payment because \"gatewayId\" argument is not provided.');this.initializeOptions=t,this.isDeinitialize=!1;const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i),{initializationData:{stripePublishableKey:o,stripeConnectedAccount:s,useIndividualCardFields:a,allowRedisplayForStoredInstruments:d}}=r;this._allowRedisplayForStoredInstruments=d;const l=this.getInitializeOptions().form;this.useIndividualCardFields=a,this.stripeV3Client=yield this.loadStripeJs(o,s),this.isCreditCard(i)&&this.shouldShowTSVHostedForm(i,n)&&l?this.hostedForm=yield this.mountCardVerificationFields(l):this.stripeElement=yield this.mountCardFields(i)})}execute(e,i){var n,r;return ne(this,void 0,void 0,function*(){const{payment:o}=e,s=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);let a,d;if(!o||!o.paymentData)throw new Y([\"payment.paymentData\"]);const{paymentData:l,gatewayId:c,methodId:u}=o,{shouldSaveInstrument:h,shouldSetAsDefaultInstrument:p}=$(l)?l:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},m=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(re,u),{isStoreCreditApplied:y}=this.paymentIntegrationService.getState().getCheckoutOrThrow();y&&(yield this.paymentIntegrationService.applyStoreCredit(y));try{m&&(yield this.paymentIntegrationService.submitOrder(s,i)),c&&(yield this.paymentIntegrationService.loadPaymentMethod(c,{params:{method:u}}));const e=this.paymentIntegrationService.getState();if(J(l)){yield this.paymentIntegrationService.submitOrder(s,i);const{instrumentId:t}=l,n=e.getPaymentMethodOrThrow(o.methodId).clientToken;if(!n)throw new P(f.MissingPaymentMethod);return yield this.executeWithVaulted(o,t,p,n)}const t=e.getPaymentMethodOrThrow(u),y=yield this.confirmStripePayment(t),{clientToken:g,method:v}=t,{id:S}=null!==(r=null!==(n=y.paymentIntent)&&void 0!==n?n:y.paymentMethod)&&void 0!==r?r:{id:\"\"};d=y.error,a={credit_card_token:{token:S},vault_payment_instrument:h,confirm:!1,set_as_default_stored_instrument:p},v===X.CreditCard&&(a.client_token=g),m||(yield this.paymentIntegrationService.submitOrder(s,i));const _=this.buildPaymentPayload(u,a,p);yield this.paymentIntegrationService.submitPayment(_)}catch(e){yield this.processAdditionalAction(this.handleEmptyPaymentIntentError(e,d),u,h,p)}})}finalize(){return Promise.reject(new K)}deinitialize(){return this.hostedForm&&this.hostedForm.detach(),this.isDeinitialize=!0,this.unmountElement(),Promise.resolve()}buildPaymentPayload(e,t,i){return{methodId:e,paymentData:i?{formattedPayload:Object.assign(Object.assign({},t),{set_as_default_stored_instrument:i})}:{formattedPayload:t}}}isCancellationError(e){var t,i;return e&&-1!==(null===(i=null===(t=e.payment_intent.last_payment_error)||void 0===t?void 0:t.message)||void 0===i?void 0:i.indexOf(\"canceled\"))}isAuthError(e){return\"payment_intent_authentication_failure\"===(null==e?void 0:e.code)}isCreditCard(e){return e===ee.CreditCard}isHostedFieldAvailable(){var e;const t=this.getInitializeOptions(),r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(null===(e=t.form)||void 0===e?void 0:e.fields,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty);return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(r)}isHostedPaymentFormEnabled(e,t){const{getPaymentMethodOrThrow:i}=this.paymentIntegrationService.getState(),n=i(e,t);return Boolean(n.config.isHostedFormEnabled)}confirmStripePayment(e){return ne(this,void 0,void 0,function*(){const{clientToken:t,method:i,returnUrl:n}=e;if(!t)throw new P(f.MissingPaymentMethod);switch(i){case X.Alipay:return this.getStripeJs().confirmAlipayPayment(t,{return_url:n},{handleActions:!1});case X.IDEAL:{const e=this.mapStripePaymentData(ee.IDEAL,n);return this.getStripeJs().confirmIdealPayment(t,e,{handleActions:!1})}case X.Sepa:{const e=this.mapStripePaymentData(ee.Sepa);return this.getStripeJs().confirmSepaDebitPayment(t,e)}default:{const e=this.useIndividualCardFields?this.getStripeCardElements()[0]:this.getStripeElement(),t=this.mapStripeBillingDetails(this.paymentIntegrationService.getState().getBillingAddress(),this.paymentIntegrationService.getState().getCustomer()),i=this._allowRedisplayForStoredInstruments;return this.getStripeJs().createPaymentMethod(Object.assign({type:ee.CreditCard,card:e,billing_details:t},i?{allow_redisplay:\"always\"}:{}))}}})}executeWithVaulted(e,t,i,n){var r;return ne(this,void 0,void 0,function*(){const o={bigpay_token:{token:t},confirm:!0,client_token:n,set_as_default_stored_instrument:i};if(this.isHostedPaymentFormEnabled(e.methodId,e.gatewayId)&&this.hostedForm){const t=this.hostedForm;return e.paymentData&&J(e.paymentData)&&(e.paymentData=Object.assign(Object.assign({},e.paymentData),{instrumentId:JSON.stringify({token:(null===(r=e.paymentData)||void 0===r?void 0:r.instrumentId)||\"\",client_token:n})})),yield t.validate(),yield t.submit(e),this.paymentIntegrationService.loadCurrentOrder()}const s=this.buildPaymentPayload(e.methodId,o,i);return this.paymentIntegrationService.submitPayment(s)})}getInitializeOptions(){if(!this.initializeOptions)throw new D(R.PaymentNotInitialized);return this.initializeOptions}getStripeCardElements(){if(!this.stripeCardElements)throw new D(R.PaymentNotInitialized);return this.stripeCardElements}getStripeElement(){if(!this.stripeElement)throw new D(R.PaymentNotInitialized);return this.stripeElement}getStripeJs(){if(!this.stripeV3Client)throw new D(R.PaymentNotInitialized);return this.stripeV3Client}handleEmptyPaymentIntentError(e,t){return B(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"required_field\"})&&t?new Error(t.message):e}loadStripeJs(e,t){return ne(this,void 0,void 0,function*(){return this.stripeV3Client?Promise.resolve(this.stripeV3Client):this.scriptLoader.load(e,t,this.paymentIntegrationService.getState().getLocale())})}mapStripeAddress(e){if(e){const{city:t,countryCode:i,address1:n,address2:r,postalCode:o,stateOrProvinceCode:s}=e;return{city:t,country:i,line1:n,line2:r,postal_code:o,state:s}}return{line1:\"\"}}mapStripeBillingDetails(e,t){const{firstName:i,lastName:n}=e||t||{firstName:\"Guest\",lastName:\"\"},r=`${i} ${n}`.trim(),{options:o}=this.getInitializeOptions();if(this.useIndividualCardFields&&Z(o)){const{zipCodeElementOptions:t}=o;if(t){const i=document.getElementById(t.containerId)?document.getElementById(t.containerId).value:\"\";i&&e&&(e=Object.assign(Object.assign({},e),{postalCode:i}))}}const s={address:this.mapStripeAddress(e)};if(t&&t.addresses[0]&&function(e){return\"object\"==typeof e&&null!==e&&\"id\"in e&&void 0!==e.id}(t.addresses[0])){const e=t.addresses[0],{email:i}=t,{phone:n}=e;return n?Object.assign(Object.assign({},s),{email:i,name:r,phone:n}):Object.assign(Object.assign({},s),{email:i,name:r})}if(e){const{email:t,phone:i}=e;return i?Object.assign(Object.assign({},s),{email:t,name:r,phone:i}):Object.assign(Object.assign({},s),{email:t,name:r})}return Object.assign(Object.assign({},s),{name:r})}mapStripePaymentData(e,t){const i=this.paymentIntegrationService.getState().getCustomer(),n=this.paymentIntegrationService.getState().getBillingAddress(),r={payment_method:{[e]:this.getStripeElement(),billing_details:this.mapStripeBillingDetails(n,i)}};return e===ee.IDEAL?Object.assign(Object.assign({},r),{return_url:t}):r}mountCardFields(e){const{options:t,containerId:i}=this.getInitializeOptions();let n;return new Promise((r,o)=>{switch(this.stripeElements||(this.stripeElements=this.getStripeJs().elements()),e){case X.CreditCard:if(this.useIndividualCardFields&&Z(t)){const{cardNumberElementOptions:e,cardExpiryElementOptions:i,cardCvcElementOptions:r}=t,s=this.stripeElements.getElement(X.CardNumber)||this.stripeElements.create(X.CardNumber,e),a=this.stripeElements.getElement(X.CardExpiry)||this.stripeElements.create(X.CardExpiry,i),d=this.stripeElements.getElement(X.CardCvc)||this.stripeElements.create(X.CardCvc,r);this.stripeCardElements=[s,a,d],n=this.stripeCardElements[0];try{s.mount(`#${e.containerId}`),a.mount(`#${i.containerId}`),d.mount(`#${r.containerId}`)}catch(e){this.isDeinitialize||o(new I(\"Unable to mount Stripe component without valid container ID.\"))}}else{n=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{n.mount(`#${i}`)}catch(e){this.isDeinitialize||o(new I(\"Unable to mount Stripe component without valid container ID.\"))}}break;case X.IDEAL:case X.Sepa:n=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{n.mount(`#${i}`)}catch(e){this.isDeinitialize||o(new I(\"Unable to mount Stripe component without valid container ID.\"))}case X.Alipay:}r(n)})}mountCardVerificationFields(e){return ne(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getStoreConfig();if(!t)throw new P(f.MissingCheckoutConfig);const i=t.paymentSettings.bigpayBaseUrl,n=this.paymentIntegrationService.createHostedForm(i,e);return yield n.attach(),n})}processAdditionalAction(e,t,i=!1,n=!1){return ne(this,void 0,void 0,function*(){if(!B(e))throw e;const r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}),s=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"});if(r){const t=e.body.additional_action_required;if(t&&\"redirect_to_url\"===t.type)return new Promise(()=>{t.data.redirect_url&&window.location.replace(t.data.redirect_url)})}if(s){const r=e.body.three_ds_result.token,o=!1;let s,a=!1;try{s=yield this.getStripeJs().confirmCardPayment(r)}catch(e){a=!0}if(null==s?void 0:s.error){if(this.isCancellationError(s.error))throw new T;if(this.isAuthError(s.error))throw new ie(te.AuthFailure);throw new Error(s.error.message)}const d={credit_card_token:{token:this.getPaymentToken(null==s?void 0:s.paymentIntent,r,a)},vault_payment_instrument:i,confirm:o},l=this.buildPaymentPayload(t,d,n);try{return yield this.paymentIntegrationService.submitPayment(l)}catch(e){throw this.handleEmptyPaymentIntentError(e,null==s?void 0:s.error)}}throw e})}getPaymentToken(e,t,i){return!e||i?t:e.id}shouldShowTSVHostedForm(e,t){return this.isHostedFieldAvailable()&&this.isHostedPaymentFormEnabled(e,t)}unmountElement(){this.stripeElement&&(this.stripeElement.unmount(),this.stripeElement=void 0)}}class se{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}load(e,t,i){return this.scriptLoader.loadScript(\"https://js.stripe.com/v3/\").then(()=>{if(!this.stripeWindow.Stripe)throw new _;return this.stripeWindow.Stripe(e,{stripeAccount:t,locale:i,betas:[\"payment_intent_beta_3\",\"alipay_pm_beta_1\"],apiVersion:\"2020-03-02;alipay_beta=v1\"})})}}const ae=v(t=>new oe(t,new se((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{gateway:\"stripev3\"}]),de={body:{},headers:{},status:0};class le extends S{constructor(e,{message:t,errors:i}={}){const{body:n,headers:r,status:o}=e||de;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=r,this.status=o,this.errors=i||[]}}const ce={ar:[\"ar\"],bg:[\"bg\"],cs:[\"cs\"],da:[\"da\"],de:[\"de\"],el:[\"el\"],en:[\"en\",\"en-GB\"],es:[\"es\",\"es-419\"],et:[\"et\"],fi:[\"fi\"],fil:[\"fil\"],fr:[\"fr\",\"fr-CA\"],he:[\"he\"],hr:[\"hr\"],hu:[\"hu\"],id:[\"id\"],it:[\"it\"],ja:[\"ja\"],ko:[\"ko\"],lt:[\"lt\"],lv:[\"lv\"],ms:[\"ms\"],mt:[\"mt\"],nb:[\"nb\"],nl:[\"nl\"],pl:[\"pl\"],pt:[\"pt\",\"pt-BR\"],ro:[\"ro\"],ru:[\"ru\"],sk:[\"sk\"],sl:[\"sl\"],sv:[\"sv\"],th:[\"th\"],tr:[\"tr\"],vi:[\"vi\"],zh:[\"zh\",\"zh-HK\",\"zh-TW\"]};function ue(e){const[t,i]=e.replace(/_/g,\"-\").toLowerCase().split(\"-\"),n=ce[t];if(!n)return\"auto\";const r=i?`${t}-${i.toUpperCase()}`:t;return n.indexOf(r)>-1?r:n[0]}var he=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class pe{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){return he(this,void 0,void 0,function*(){const{stripeupe:t,methodId:i,gatewayId:n}=e;if(!(null==t?void 0:t.containerId))throw new D(R.PaymentNotInitialized);if(!n)throw new I('Unable to initialize payment because \"gatewayId\" argument is not provided.');return this._loadStripeElement(t,n,i).catch(e=>{var i;return null===(i=t.onError)||void 0===i?void 0:i.call(t,e)}),this.stripeIntegrationService.initCheckoutEventsSubscription(n,i,t,this._stripeElements),Promise.resolve()})}execute(e,t){return he(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!i||!i.paymentData)throw new Y([\"payment.paymentData\"]);if(!this._stripeUPEClient)throw new D(R.PaymentNotInitialized);const{paymentData:r,methodId:o,gatewayId:s}=i,{shouldSaveInstrument:a=!1,shouldSetAsDefaultInstrument:d=!1}=$(r)?r:{},l=this.paymentIntegrationService.getState(),{isStoreCreditApplied:c}=l.getCheckoutOrThrow(),u=l.getPaymentProviderCustomerOrThrow(),h=(O(u)?u:{}).stripeLinkAuthenticationState;if(c&&(yield this.paymentIntegrationService.applyStoreCredit(c)),s){yield this.stripeIntegrationService.updateStripePaymentIntent(s,o);const{email:e}=l.getCustomerOrThrow();if(void 0!==h&&!e){const e=l.getBillingAddressOrThrow();yield this.paymentIntegrationService.updateBillingAddress(e)}}if(yield this.paymentIntegrationService.submitOrder(n,t),J(r)){const{instrumentId:e}=r;return void(yield this._executeWithVaulted(i.methodId,e,d))}yield this._executeWithStripeConfirmation(i.methodId,!h&&a,d)})}finalize(){return Promise.reject(new K)}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(h.PAYMENT))||void 0===t||t.unmount(),this.stripeIntegrationService.deinitialize(),this._stripeElements=void 0,this._stripeUPEClient=void 0,Promise.resolve()}_executeWithStripeConfirmation(e,t,i){return he(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),{clientToken:r}=n.getPaymentMethodOrThrow(e),o=this._getPaymentPayload(e,r||\"\",t,i);try{yield this.paymentIntegrationService.submitPayment(o)}catch(n){yield this._processAdditionalActionWithStripeConfirmation(n,e,t,i)}})}_executeWithVaulted(e,t,i){var n;return he(this,void 0,void 0,function*(){const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(e),s=null===(n=r.getCart())||void 0===n?void 0:n.id;try{const n={methodId:e,paymentData:{formattedPayload:{cart_id:s,bigpay_token:{token:t},confirm:!1,client_token:o.clientToken,set_as_default_stored_instrument:i}}};return yield this.paymentIntegrationService.submitPayment(n)}catch(t){return this._processVaultedAdditionalAction(t,e,i)}})}_loadStripeElement(e,t,i){return he(this,void 0,void 0,function*(){const{containerId:n,style:r,render:o,initStripeElementUpdateTrigger:s}=e,a=yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}}),d=a.getPaymentMethodOrThrow(i);if(!b(d))throw new P(f.MissingPaymentMethod);const{clientToken:l,initializationData:u}=d,{shopperLanguage:p,allowRedisplayForStoredInstruments:y=!1,enableLink:g}=u;if(this._allowRedisplayForStoredInstruments=y,!l)throw new P(f.MissingPaymentMethod);let v;if(this._stripeUPEClient=yield this._loadStripeJs(u),this._isStripeElementUpdateEnabled=\"function\"==typeof s,r){const e=r;v={variables:this.stripeIntegrationService.mapAppearanceVariables(r),rules:{\".Input\":this.stripeIntegrationService.mapInputAppearanceRules(e)}}}this._stripeElements=yield this.scriptLoader.getElements(this._stripeUPEClient,{clientSecret:l,locale:ue(p),appearance:v});const{getBillingAddress:S,getShippingAddress:_}=a,{postalCode:C}=_()||S()||{},E=this._stripeElements.getElement(h.PAYMENT)||this._stripeElements.create(h.PAYMENT,Object.assign({fields:{billingDetails:{email:c.NEVER,address:{country:c.NEVER,city:c.NEVER,postalCode:C?c.NEVER:c.AUTO}}},wallets:{applePay:c.NEVER,googlePay:c.NEVER,link:g?c.AUTO:c.NEVER}},this._getStripeElementTerms()));this.stripeIntegrationService.mountElement(E,n),E.on(m.READY,()=>{o()}),E.on(m.CHANGE,e=>{(null==e?void 0:e.value)&&\"type\"in e.value&&this._updateStripeLinkStateByElementType(e.value.type)}),this._isStripeElementUpdateEnabled&&(null==s||s(this._updateStripeElement.bind(this)))})}_processAdditionalActionWithStripeConfirmation(e,t,i=!1,n=!1){return he(this,void 0,void 0,function*(){if(!B(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new D(R.PaymentNotInitialized);const{data:r}=e.body.additional_action_required,{token:o}=r,{paymentIntent:s}=yield this._confirmStripePaymentOrThrow(t,r),a=this._getPaymentPayload(t,(null==s?void 0:s.id)||o,i,n);try{yield this.paymentIntegrationService.submitPayment(a)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var i,n;return he(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,s=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,o,!!this._allowRedisplayForStoredInstruments);let a;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this._stripeUPEClient))?yield null===(n=this._stripeUPEClient)||void 0===n?void 0:n.retrievePaymentIntent(r||\"\"):yield null===(i=this._stripeUPEClient)||void 0===i?void 0:i.confirmPayment(s);if(a=null==t?void 0:t.error,a||!(null==t?void 0:t.paymentIntent))throw new N;return t}catch(e){this.stripeIntegrationService.throwStripeError(a)}})}_processVaultedAdditionalAction(e,t,i=!1){var n;return he(this,void 0,void 0,function*(){if(!t||!B(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new D(R.PaymentNotInitialized);const r=e.body.three_ds_result.token;let s,a=!1;try{s=yield this._stripeUPEClient.confirmCardPayment(r)}catch(e){try{s=yield this._stripeUPEClient.retrievePaymentIntent(r)}catch(e){a=!0}}if((null==s?void 0:s.error)&&this.stripeIntegrationService.throwStripeError(s.error),!(null==s?void 0:s.paymentIntent)&&!a)throw new le;const d=this._getPaymentPayload(t,a?r:null===(n=null==s?void 0:s.paymentIntent)||void 0===n?void 0:n.id,!1,i);return this.paymentIntegrationService.submitPayment(d)})}_loadStripeJs(e){return he(this,void 0,void 0,function*(){if(this._stripeUPEClient)return this._stripeUPEClient;const t=this.paymentIntegrationService.getState();return this.scriptLoader.getStripeClient(e,t.getCartLocale(),u.V3,w,A)})}_getPaymentPayload(e,t,i=!1,n=!1){var r;return{methodId:e,paymentData:{formattedPayload:{cart_id:(null===(r=this.paymentIntegrationService.getState().getCart())||void 0===r?void 0:r.id)||\"\",credit_card_token:{token:t},confirm:!1,vault_payment_instrument:i,set_as_default_stored_instrument:n}}}}_updateStripeElement({shouldShowTerms:e}){var t;const i=null===(t=this._stripeElements)||void 0===t?void 0:t.getElement(h.PAYMENT);null==i||i.update(Object.assign({},this._getStripeElementTerms(e)))}_getStripeElementTerms(e){let t=c.AUTO;return this._isStripeElementUpdateEnabled&&(t=e?c.AUTO:c.NEVER),{terms:{card:t}}}_updateStripeLinkStateByElementType(e){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow(),i=e===l.Link;!O(t)&&i&&this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:i})}}const me=v(t=>{const i=new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new pe(t,i,new L(t,i))},[{gateway:\"stripeupe\"},{gateway:\"stripeupe\",id:\"klarna\"}]),ye=e=>\"object\"==typeof e&&null!==e&&\"value\"in e&&\"collapsed\"in e;var ge=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class ve{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){var t;return ge(this,void 0,void 0,function*(){const{stripeocs:i,methodId:n,gatewayId:r}=e;if(!(null==i?void 0:i.containerId))throw new D(R.PaymentNotInitialized);if(!r)throw new I('Unable to initialize payment because \"gatewayId\" argument is not provided.');try{yield this._initializeStripeElement(i,r,n)}catch(e){e instanceof Error&&(null===(t=i.onError)||void 0===t||t.call(i,e))}this.stripeIntegrationService.initCheckoutEventsSubscription(r,n,i,this.stripeElements)})}execute(e,t){return ge(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]),{methodId:r,gatewayId:o}=i||{};if(!this.stripeClient)throw new D(R.PaymentNotInitialized);if(!o||!r)throw new I('Unable to initialize payment because \"gatewayId\" or \"methodId\" argument is not provided.');const{isStoreCreditApplied:s}=this.paymentIntegrationService.getState().getCheckoutOrThrow();s&&(yield this.paymentIntegrationService.applyStoreCredit(s)),yield this.stripeIntegrationService.updateStripePaymentIntent(o,r),yield this.paymentIntegrationService.submitOrder(n,t);const{clientToken:a}=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(r,o),d=this._getPaymentPayload(r,a||\"\");try{yield this.paymentIntegrationService.submitPayment(d)}catch(e){yield this._processAdditionalAction(e,r)}})}finalize(){return Promise.reject(new K)}deinitialize(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(h.PAYMENT);return null==t||t.unmount(),null==t||t.destroy(),this.stripeIntegrationService.deinitialize(),this.stripeElements=void 0,this.stripeClient=void 0,Promise.resolve()}_initializeStripeElement(e,t,i){return ge(this,void 0,void 0,function*(){let n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t);if((null==n?void 0:n.clientToken)||(n=(yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}})).getPaymentMethodOrThrow(i,t)),!b(n))throw new P(f.MissingPaymentMethod);const{clientToken:r,initializationData:o}=n,{shopperLanguage:s,customerSessionToken:a,enableLink:d}=o;if(!r)throw new P(f.MissingPaymentMethod);this.stripeClient=yield this._loadStripeJs(o);const{appearance:l,containerId:u,fonts:p,layout:y,render:g,paymentMethodSelect:v,handleClosePaymentMethod:S,togglePreloader:_}=e;this.stripeElements=yield this.scriptLoader.getElements(this.stripeClient,{clientSecret:r,customerSessionClientSecret:a,locale:ue(s),appearance:l,fonts:p});const{getBillingAddress:C,getShippingAddress:E}=this.paymentIntegrationService.getState(),I=C(),{postalCode:w}=E()||I||{},A=this.stripeElements.getElement(h.PAYMENT)||this.stripeElements.create(h.PAYMENT,{fields:{billingDetails:{email:c.NEVER,address:{country:c.NEVER,city:c.NEVER,postalCode:w?c.NEVER:c.AUTO}}},wallets:{applePay:c.NEVER,googlePay:c.NEVER,link:d?c.AUTO:c.NEVER},layout:y,savePaymentMethod:{maxVisiblePaymentMethods:20},defaultValues:{billingDetails:{email:(null==I?void 0:I.email)||\"\"}}});this.stripeIntegrationService.mountElement(A,u),A.on(m.LOADER_START,()=>{null==_||_(!1)}),A.on(m.READY,()=>{g()}),A.on(m.CHANGE,e=>{this._onStripeElementChange(e,t,i,v)}),null==S||S(this._collapseStripeElement.bind(this))})}_loadStripeJs(e){return ge(this,void 0,void 0,function*(){if(this.stripeClient)return this.stripeClient;const t=this.paymentIntegrationService.getState(),i=this.stripeIntegrationService.getStripeJsVersion(e);return this.scriptLoader.getStripeClient(e,t.getCartLocale(),i)})}_collapseStripeElement(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(h.PAYMENT);null==t||t.collapse()}_getPaymentPayload(e,t,i){var n;const r=(null===(n=this.paymentIntegrationService.getState().getCart())||void 0===n?void 0:n.id)||\"\",{card:o,us_bank_account:s}=i||{},a=this._shouldSaveInstrument(o)||this._shouldSaveInstrument(s),d=this._getTokenizedOptions(t,i);return{methodId:e,paymentData:{formattedPayload:Object.assign({cart_id:r,confirm:!1,method:this.selectedMethodId,vault_payment_instrument:a},d)}}}_processAdditionalAction(e,t){return ge(this,void 0,void 0,function*(){if(!B(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this.stripeClient||!this.stripeElements)throw new D(R.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(t,i),{client_secret:o,payment_method_options:s}=r||{},a=this._getPaymentPayload(t,o||n,s);try{return yield this.paymentIntegrationService.submitPayment(a)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var i,n;return ge(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,s=this.stripeIntegrationService.mapStripePaymentData(this.stripeElements,o);let a;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this.stripeClient))?yield null===(n=this.stripeClient)||void 0===n?void 0:n.retrievePaymentIntent(r||\"\"):yield null===(i=this.stripeClient)||void 0===i?void 0:i.confirmPayment(s);if(a=null==t?void 0:t.error,a||!(null==t?void 0:t.paymentIntent))throw new N;return t}catch(e){return this.stripeIntegrationService.throwStripeError(a)}})}_onStripeElementChange(e,t,i,n){ye(e)&&!e.collapsed&&(this.selectedMethodId=e.value.type,null==n||n(`${t}-${i}`))}_shouldSaveInstrument(e){const t=null==e?void 0:e.setup_future_usage;return t===y.ON_SESSION||t===y.OFF_SESSION}_getTokenizedOptions(e,t){return this._shouldSaveInstrument(null==t?void 0:t.us_bank_account)?{tokenized_ach:{token:e}}:{credit_card_token:{token:e}}}}const Se=v(t=>{const i=new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new ve(t,i,new L(t,i))},[{gateway:\"stripeocs\",id:\"optimized_checkout\"}]);var _e=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){var t;return _e(this,void 0,void 0,function*(){const{stripeocs:i,methodId:n,gatewayId:r}=e;if(!(null==i?void 0:i.containerId)||!r)throw new D(R.PaymentNotInitialized);try{yield this._initializeStripeElement(i,r,n)}catch(e){e instanceof Error&&(null===(t=i.onError)||void 0===t||t.call(i,e))}})}execute(){return _e(this,void 0,void 0,function*(){return Promise.resolve()})}finalize(){return Promise.reject(new K)}deinitialize(){var e;const t=null===(e=this.stripeCheckoutSession)||void 0===e?void 0:e.getPaymentElement();return null==t||t.unmount(),null==t||t.destroy(),this.stripeIntegrationService.deinitialize(),this.stripeCheckoutSession=void 0,this.stripeClient=void 0,Promise.resolve()}_initializeStripeElement(e,t,i){return _e(this,void 0,void 0,function*(){let n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t);if((null==n?void 0:n.clientToken)||(n=(yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}})).getPaymentMethodOrThrow(i,t)),!b(n))throw new P(f.MissingPaymentMethod);const{clientToken:r,initializationData:o}=n;if(!r)throw new P(f.MissingPaymentMethod);this.stripeClient=yield this._loadStripeJs(o);const{enableLink:s}=o,{appearance:a,containerId:d,fonts:l,layout:u,render:h,paymentMethodSelect:p,handleClosePaymentMethod:y,togglePreloader:g}=e,{getBillingAddress:v,getShippingAddress:S}=this.paymentIntegrationService.getState(),_=v(),{postalCode:C}=S()||_||{};this.stripeCheckoutSession=yield this.scriptLoader.getCheckoutSession(this.stripeClient,{clientSecret:r,elementsOptions:{appearance:a,fonts:l},adaptivePricing:{allowed:!1},defaultValues:{email:(null==_?void 0:_.email)||\"\"}});const E=this._createStripeElement({fields:{billingDetails:{email:c.NEVER,address:{country:c.NEVER,city:c.NEVER,postalCode:C?c.NEVER:c.AUTO}}},wallets:{applePay:c.NEVER,googlePay:c.NEVER,link:s?c.AUTO:c.NEVER},layout:u});if(!E)throw new D(R.PaymentNotInitialized);this.stripeIntegrationService.mountElement(E,d),E.on(m.LOADER_START,()=>{null==g||g(!1)}),E.on(m.READY,()=>{h()}),E.on(m.CHANGE,e=>{this._onStripeElementChange(e,t,i,p)}),null==y||y(this._collapseStripeElement.bind(this))})}_loadStripeJs(e){return _e(this,void 0,void 0,function*(){if(this.stripeClient)return this.stripeClient;const t=this.paymentIntegrationService.getState();return this.scriptLoader.getStripeClient(e,t.getCartLocale(),u.CLOVER)})}_createStripeElement(e){var t,i;return(null===(t=this.stripeCheckoutSession)||void 0===t?void 0:t.getPaymentElement())||(null===(i=this.stripeCheckoutSession)||void 0===i?void 0:i.createPaymentElement(e))}_onStripeElementChange(e,t,i,n){ye(e)&&!e.collapsed&&(null==n||n(`${t}-${i}`))}_collapseStripeElement(){var e;const t=null===(e=this.stripeCheckoutSession)||void 0===e?void 0:e.getPaymentElement();null==t||t.collapse()}}const Ce=v(t=>{const i=new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new fe(t,i,new L(t,i))},[{gateway:\"stripeocs\",id:\"checkout_session\"}]);var Ee=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class Ie{constructor(e,t,i,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i,this.loadingIndicator=n}initialize(e){return Ee(this,void 0,void 0,function*(){const{stripeocs:t,containerId:i}=e||{};if(!t||!i)throw new D(R.PaymentNotInitialized);const{methodId:n,gatewayId:r}=t;if(!n||!r)throw new P(f.MissingPaymentMethod);const o=yield this.paymentIntegrationService.loadPaymentMethod(r,{params:{method:n}}),s=o.getPaymentMethodOrThrow(n,r),{loadingContainerId:a,buttonHeight:d,onComplete:l}=t;if(this._loadingIndicatorContainer=a,this._onComplete=l,!b(s))throw new P(f.MissingPaymentMethod);const{initializationData:c}=s,{captureMethod:u}=c,h=this.stripeIntegrationService.getStripeJsVersion(c);this._captureMethod=u,this._stripeClient=yield this.scriptLoader.getStripeClient(c,o.getCartLocale(),h),yield this.paymentIntegrationService.loadDefaultCheckout(),yield this._mountExpressCheckoutElement(i,this._stripeClient,d),this._initializeEvents(n)})}signIn(){return Promise.resolve()}signOut(){return Promise.resolve()}executePaymentMethodCheckout(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_mountExpressCheckoutElement(e,t,i=40){return Ee(this,void 0,void 0,function*(){const n=this._shouldRequireShippingAddress(),r=Object.assign(Object.assign(Object.assign({shippingAddressRequired:n},n?{allowedShippingCountries:yield this._getAvailableCountries()}:{}),n?{shippingRates:[{id:\"_\",amount:0,displayName:\"Pending rates\"}]}:{}),{billingAddressRequired:!0,emailRequired:!0,phoneNumberRequired:!0,paymentMethods:{link:c.AUTO,applePay:c.NEVER,googlePay:c.NEVER,amazonPay:c.NEVER,paypal:c.NEVER,klarna:c.NEVER},buttonHeight:i}),{cartAmount:o=1}=this.paymentIntegrationService.getState().getCart()||{},s=Object.assign({mode:\"payment\",amount:this._toCents(o),currency:this._getCurrency()},this._captureMethod?{captureMethod:this._captureMethod}:{});this._stripeElements=t.elements(s),this._linkV2Element=this._stripeElements.create(h.EXPRESS_CHECKOUT,r),this._linkV2Element.mount(`#${e}`)})}_initializeEvents(e){this._linkV2Element&&(this._shouldRequireShippingAddress()&&(this._linkV2Element.on(m.SHIPPING_ADDRESS_CHANGE,e=>Ee(this,void 0,void 0,function*(){return this._onShippingAddressChange(e)})),this._linkV2Element.on(m.SHIPPING_RATE_CHANGE,e=>Ee(this,void 0,void 0,function*(){return this._onShippingRateChange(e)}))),this._linkV2Element.on(m.CONFIRM,t=>Ee(this,void 0,void 0,function*(){return this._onConfirm(t,e)})),this._linkV2Element.on(m.CANCEL,this._onCancel))}_onShippingAddressChange(e){return Ee(this,void 0,void 0,function*(){if(!(\"address\"in e))return;const t=e.address,i={firstName:\"\",lastName:\"\",phone:\"\",company:\"\",address1:\"\",address2:\"\",city:(null==t?void 0:t.city)||\"\",countryCode:(null==t?void 0:t.country)||\"\",postalCode:(null==t?void 0:t.postal_code)||\"\",stateOrProvince:(null==t?void 0:t.state)||\"\",stateOrProvinceCode:(null==t?void 0:t.state)||\"\",customFields:[]};yield this.paymentIntegrationService.updateShippingAddress(i);const n=yield this._getAvailableShippingOptions();yield this._updateDisplayedPrice(),(null==n?void 0:n.length)?e.resolve({shippingRates:n}):e.reject()})}_onCancel(){throw new T}_onShippingRateChange(e){return Ee(this,void 0,void 0,function*(){if(\"shippingRate\"in e){const{shippingRate:t}=e;yield this._handleShippingOptionChange(null==t?void 0:t.id),yield this._updateDisplayedPrice(),e.resolve({})}})}_onConfirm(e,t){return Ee(this,void 0,void 0,function*(){if(\"billingDetails\"in e&&\"shippingAddress\"in e&&this._stripeClient&&this._stripeElements){yield this._updateShippingAndBillingAddress(e),yield this.paymentIntegrationService.submitOrder();const i=this._getPaymentPayload(t);try{yield this.paymentIntegrationService.submitPayment(i)}catch(e){yield this._processAdditionalAction(e,t)}}return Promise.resolve()})}_updateShippingAndBillingAddress(e){var t,i,n,r,o,s,a,d;return Ee(this,void 0,void 0,function*(){const l=this._shouldRequireShippingAddress(),c=(null===(i=null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||void 0===i?void 0:i.split(\" \")[0])||(null===(r=null===(n=e.billingDetails)||void 0===n?void 0:n.name)||void 0===r?void 0:r.split(\" \")[0])||\"\",u=(null===(s=null===(o=e.shippingAddress)||void 0===o?void 0:o.name)||void 0===s?void 0:s.split(\" \")[1])||(null===(d=null===(a=e.billingDetails)||void 0===a?void 0:a.name)||void 0===d?void 0:d.split(\" \")[1])||\"\";if(l){const t=this._mapShippingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateShippingAddress(t)}const h=this._mapBillingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateBillingAddress(h)})}_mapShippingAddress(e,t,i,n){var r,o,s,a,d,l,c;return{firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.line1)||\"\",address2:(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.line2)||\"\",city:(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.city)||\"\",countryCode:(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.country)||\"\",postalCode:(null===(d=null==e?void 0:e.address)||void 0===d?void 0:d.postal_code)||\"\",stateOrProvince:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",stateOrProvinceCode:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",customFields:[]}}_mapBillingAddress(e,t,i,n){var r,o,s,a,d,l;return{email:(null==t?void 0:t.email)||\"\",firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==t?void 0:t.address)||void 0===r?void 0:r.line1)||\"\",address2:\"\",city:(null===(o=null==t?void 0:t.address)||void 0===o?void 0:o.city)||\"\",countryCode:(null===(s=null==t?void 0:t.address)||void 0===s?void 0:s.country)||\"\",postalCode:(null===(a=null==t?void 0:t.address)||void 0===a?void 0:a.postal_code)||\"\",stateOrProvince:(null===(d=null==t?void 0:t.address)||void 0===d?void 0:d.state)||\"\",stateOrProvinceCode:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",customFields:[]}}_processAdditionalAction(e,t){return Ee(this,void 0,void 0,function*(){if(!B(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeClient||!this._stripeElements)throw new D(R.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(i,t),o=this._getPaymentPayload(t,(null==r?void 0:r.id)||n);try{this._toggleLoadingIndicator(!0),yield this.paymentIntegrationService.submitPayment(o),yield this._completeCheckoutFlow()}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}finally{this._toggleLoadingIndicator(!1)}})}_confirmStripePaymentOrThrow(e,t){var i,n,r;return Ee(this,void 0,void 0,function*(){const{token:o,redirect_url:s}=e,a=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,s);let d;try{const e=(yield this.stripeIntegrationService.isPaymentCompleted(t,this._stripeClient))?yield null===(r=this._stripeClient)||void 0===r?void 0:r.retrievePaymentIntent(o||\"\"):yield null===(i=this._stripeClient)||void 0===i?void 0:i.confirmPayment({elements:a.elements,clientSecret:o,redirect:c.IF_REQUIRED,confirmParams:{return_url:null===(n=a.confirmParams)||void 0===n?void 0:n.return_url}});if(d=null==e?void 0:e.error,d||!(null==e?void 0:e.paymentIntent))throw new N;return e}catch(e){return this.stripeIntegrationService.throwStripeError(d)}})}_completeCheckoutFlow(){return Ee(this,void 0,void 0,function*(){return\"function\"==typeof this._onComplete?this._onComplete():(window.location.replace(\"/checkout/order-confirmation\"),Promise.resolve())})}_getPaymentPayload(e,t){var i;const n=(null===(i=this.paymentIntegrationService.getState().getCart())||void 0===i?void 0:i.id)||\"\";return{methodId:e,paymentData:{formattedPayload:Object.assign(Object.assign({cart_id:n},t?{credit_card_token:{token:t}}:{}),{confirm:!1,method:l.Link})}}}_shouldRequireShippingAddress(){const{getCart:e}=this.paymentIntegrationService.getState(),{lineItems:t}=e()||{};return!!(null==t?void 0:t.physicalItems.length)}_updateDisplayedPrice(){return Ee(this,void 0,void 0,function*(){this._stripeElements&&this._stripeElements.update({currency:this._getCurrency(),mode:\"payment\",amount:yield this._getTotalPrice()})})}_getCurrency(){var e;if(!this._currencyCode){const t=null===(e=this.paymentIntegrationService.getState().getCart())||void 0===e?void 0:e.currency;t&&(this._currencyCode=t.code.toLowerCase())}return this._currencyCode}_getTotalPrice(){var e;return Ee(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:t,getCart:i}=this.paymentIntegrationService.getState(),{decimalPlaces:n}=(null===(e=i())||void 0===e?void 0:e.currency)||{},o=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.round)(t().outstandingBalance,n).toFixed(n);return this._toCents(+o)})}_getAvailableCountries(){var e;return Ee(this,void 0,void 0,function*(){const t=yield this.paymentIntegrationService.loadShippingCountries();return((null===(e=t.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code))||[]).filter(e=>G.includes(e))})}_getAvailableShippingOptions(){var e,t,i;return Ee(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getConsignments();if(!(null==n?void 0:n[0]))return;const r=n[0],o=(r.availableShippingOptions||[]).map(this._getStripeShippingOption.bind(this)),s=null===(e=r.availableShippingOptions)||void 0===e?void 0:e.find(e=>e.isRecommended),a=null===(t=r.selectedShippingOption)||void 0===t?void 0:t.id,d=null==s?void 0:s.id;return a?o.sort(e=>e.id===a?-1:0):d?(o.sort(e=>e.id===d?-1:0),yield this._handleShippingOptionChange(d)):yield this._handleShippingOptionChange(null===(i=o[0])||void 0===i?void 0:i.id),o})}_getStripeShippingOption({id:e,cost:t,description:i}){return{id:e,displayName:i,amount:this._toCents(t)}}_handleShippingOptionChange(e){return Ee(this,void 0,void 0,function*(){if(e&&\"shipping_option_unselected\"!==e)return this.paymentIntegrationService.selectShippingOption(e)})}_getAmountTransformer(){if(this._amountTransformer)return this._amountTransformer;const{getCart:e}=this.paymentIntegrationService.getState(),{currency:t}=e()||{};return t?new F(t.decimalPlaces):void 0}_toCents(e){const t=Math.round(100*e),i=this._getAmountTransformer();return i?i.toInteger(e):t}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this.loadingIndicator.show(this._loadingIndicatorContainer):this.loadingIndicator.hide()}}const Pe=v(t=>{const i=new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),n=new j({containerStyles:V});return new Ie(t,i,new L(t,i),n)},[{id:\"stripeocs\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9zdHJpcGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNBLElDa2FZQSxFQUtBQyxFQWlEQUMsRUE0SkFDLEVBY0FDLEVBUUFDLEVBT0FDLEVBT0FDLEVBMkNBQyxFQW9CQUMsRUR2dEJSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBRUEsT0FBT0MsT0FBT0MsT0FBT0gsRUFBUSxDQUFFQyxjQUNuQyxDQ05BSCxFQUFvQk0sRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTm9aSixTQUFZbkMsR0FDUixzQkFDQSxtQkFDSCxDQUhELENBQVlBLElBQUFBLEVBQWMsS0FLMUIsU0FB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QSxHQUF5QiwrQkFBYkEsRUFJakIsT0FBTzNaLEtBQUtpRSwwQkFBMEIyVixxQkFBcUJELEVBQy9ELEUsQ0FFUSxxQkFBQUUsR0FDSixHQUFJN1osS0FBSzhaLG1CQUNMLE9BQU85WixLQUFLOFosbUJBR2hCLE1BQU0sUUFBRXpDLEdBQVlyWCxLQUFLaUUsMEJBQTBCaUIsWUFDN0MsU0FBRW1QLEdBQWFnRCxLQUFhLENBQUMsRUFFbkMsT0FBSWhELEVBQzBCLElBQUk5QyxFQUFrQjhDLEVBQVMrRCxvQkFEN0QsQ0FLSixDQUVRLFFBQUFoRSxDQUFTMUMsR0FDYixNQUFNcUksRUFBZ0JwSSxLQUFLQyxNQUFlLElBQVRGLEdBQzNCc0ksRUFBb0JoYSxLQUFLNlosd0JBRS9CLE9BQUlHLEVBQ09BLEVBQWtCdkksVUFBVUMsR0FHaENxSSxDQUNYLENBRVEsdUJBQUFsRCxDQUF3Qm5TLEdBQ3hCQSxHQUFhMUUsS0FBS3FTLDJCQUNsQnJTLEtBQUtnUyxpQkFBaUI1QyxLQUFLcFAsS0FBS3FTLDRCQUVoQ3JTLEtBQUtnUyxpQkFBaUJ0QyxNQUU5QixFQzNqQkosTUFnQkEsR0FBZXBSLEVBZlgyRixJQUVBLE1BQU1nVyxFQUFxQixJQUFJM1osRUFBbUIwSSwyRUFBQUEsSUFDNUNnSixFQUFtQixJQUFJbkQsRUFBaUIsQ0FDMUNDLGdCQUFpQkosSUFHckIsT0FBTyxJQUFJMlosR0FDUHBrQixFQUNBZ1csRUFDQSxJQUFJeFEsRUFBeUJ4RixFQUEyQmdXLEdBQ3hEakksSUFJc0QsQ0FBQyxDQUFFNUssR0FBSSxlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL2Jvb3RzdHJhcD9mZmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS50cz80MDkxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycz85OTRjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZD85ZWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS1zY3JpcHQtbG9hZGVyLnRzP2MxMjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL2lzLXN0cmlwZS1wYXltZW50LW1ldGhvZC1saWtlLnRzPzIwMTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvc3RyaXBlLXVwZS9zdHJpcGUtdXBlLWNvbnN0YW50cy50cz9iOTQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS11cGUvaXMtc3RyaXBlLWFjY2VsZXJhdGVkLWNoZWNrb3V0LWN1c3RvbWVyLnRzP2NlNjciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLXVwZS9zdHJpcGUtdXBlLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2NjNzQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLXVwZS9jcmVhdGUtc3RyaXBlLXVwZS1jdXN0b21lci1zdHJhdGVneS50cz84NjAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNhbmNlbGxlZC1lcnJvci50cz8wODkwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzcxNTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvaXMtc3RyaXBlLWVycm9yLnRzPzVlM2EiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3VpL3NyYy9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci50cz9iMDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi91dGlsaXR5L2Ftb3VudC10cmFuc2Zvcm1lci50cz8xZDc4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1vY3MvY29uc3RhbnRzLnRzP2VhNzIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLW9jcy9zdHJpcGUtbGluay12Mi1jdXN0b21lci1zdHJhdGVneS50cz81ODlkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1vY3MvY3JlYXRlLXN0cmlwZS1saW5rLXYyLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2Q1M2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBldjMvaXMtaW5kaXZpZHVhbC1jYXJkLWVsZW1lbnQtb3B0aW9ucy50cz8yNjE1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZXYzL3N0cmlwZXYzLnRzPzBhYjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBldjMvc3RyaXBldjMtZXJyb3IudHM/MWQ1OSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGV2My9zdHJpcGV2My1wYXltZW50LXN0cmF0ZWd5LnRzP2FhMDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9iaWxsaW5nL2lzLWJpbGxpbmctYWRkcmVzcy1saWtlLnRzPzg1MzAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBldjMvc3RyaXBldjMtc2NyaXB0LWxvYWRlci50cz9jODFlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZXYzL2NyZWF0ZS1zdHJpcGV2My1wYXltZW50LXN0cmF0ZWd5LnRzPzZhYjkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS1zdXBwb3J0ZWQtbG9jYWxlcy50cz9hM2MxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL2Zvcm1hdC1sb2NhbGUudHM/ZGI4NSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtdXBlL3N0cmlwZS11cGUtcGF5bWVudC1zdHJhdGVneS50cz85NjBkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS11cGUvY3JlYXRlLXN0cmlwZS11cGUtcGF5bWVudC1zdHJhdGVneS50cz85NTA5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL2lzLXN0cmlwZS1wYXltZW50LWV2ZW50LnRzP2U0YWUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLW9jcy9zdHJpcGUtb2NzLXBheW1lbnQtc3RyYXRlZ3kudHM/ZGE0NCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtb2NzL2NyZWF0ZS1zdHJpcGUtb2NzLXBheW1lbnQtc3RyYXRlZ3kudHM/MmE0NCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtY3Mvc3RyaXBlLWNzLXBheW1lbnQtc3RyYXRlZ3kudHM/OTI3ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtY3MvY3JlYXRlLXN0cmlwZS1jcy1wYXltZW50LXN0cmF0ZWd5LnRzPzM3OGEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLW9jcy9zdHJpcGUtbGluay12Mi1idXR0b24tc3RyYXRlZ3kudHM/MjJlOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtb2NzL2NyZWF0ZS1zdHJpcGUtbGluay12Mi1idXR0b24tc3RyYXRlZ3kudHM/OTNlYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IHsgUGF5bWVudE1ldGhvZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vKipcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlndXJhdGlvbk9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEZvciB1c2FnZSB3aXRoIFtDb25uZWN0XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9jb25uZWN0KSBvbmx5LlxuICAgICAqIFNwZWNpZnlpbmcgYSBjb25uZWN0ZWQgYWNjb3VudCBJRCAoZS5nLiwgYWNjdF8yNEJGTXBKMXN2UjVBODlrKSBhbGxvd3MgeW91IHRvIHBlcmZvcm0gYWN0aW9ucyBvbiBiZWhhbGYgb2YgdGhhdCBhY2NvdW50LlxuICAgICAqL1xuICAgIHN0cmlwZUFjY291bnQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB5b3VyIGFjY291bnQncyBbQVBJIHZlcnNpb25dKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS92ZXJzaW9uaW5nKVxuICAgICAqL1xuICAgIGFwaVZlcnNpb24/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIGxvY2FsZSB1c2VkIHRvIGdsb2JhbGx5IGNvbmZpZ3VyZSBsb2NhbGl6YXRpb24gaW4gU3RyaXBlLiBTZXR0aW5nIHRoZSBsb2NhbGUgaGVyZSB3aWxsIGxvY2FsaXplIGVycm9yIHN0cmluZ3MgZm9yIGFsbCBTdHJpcGUuanMgbWV0aG9kcy4gSXQgd2lsbCBhbHNvIGNvbmZpZ3VyZSB0aGUgbG9jYWxlIGZvciBFbGVtZW50cyBhbmQgQ2hlY2tvdXQuIERlZmF1bHQgaXMgYXV0byAoU3RyaXBlIGRldGVjdHMgdGhlIGxvY2FsZSBvZiB0aGUgYnJvd3NlcikuXG4gICAgICogTm90ZSB0aGF0IENoZWNrb3V0IHN1cHBvcnRzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHNldCBvZiBsb2NhbGVzIHRoYW4gU3RyaXBlLmpzLlxuICAgICAqL1xuICAgIGxvY2FsZT86IHN0cmluZztcblxuICAgIGJldGFzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbkRhdGEge1xuICAgIHJlZGlyZWN0X3VybD86IHN0cmluZztcbiAgICBpbnRlbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGRhdGE6IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25EYXRhO1xufVxuXG4vKipcbiAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW50ZW50IHtcbiAgICAvKipcbiAgICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBpZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNsaWVudCBzZWNyZXQgb2YgdGhlIFBheW1lbnRJbnRlbnQuIFVzZWQgZm9yIGNsaWVudC1zaWRlIHJldHJpZXZhbCB1c2luZyBhIHB1Ymxpc2hhYmxlIGtleS5cbiAgICAgKi9cbiAgICBjbGllbnRfc2VjcmV0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU3RhdHVzIG9mIHRoaXMgUGF5bWVudEludGVudC4gUmVhZCBtb3JlIGFib3V0IGVhY2ggUGF5bWVudEludGVudCBbc3RhdHVzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9pbnRlbnRzI2ludGVudC1zdGF0dXNlcykuXG4gICAgICovXG4gICAgc3RhdHVzOiAnc3VjY2VlZGVkJyB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXltZW50IGVycm9yIGVuY291bnRlcmVkIGluIHRoZSBwcmV2aW91cyBQYXltZW50SW50ZW50IGNvbmZpcm1hdGlvbi4gSXQgd2lsbCBiZSBjbGVhcmVkIGlmIHRoZSBQYXltZW50SW50ZW50IGlzIGxhdGVyIHVwZGF0ZWQgZm9yIGFueSByZWFzb24uXG4gICAgICovXG4gICAgbGFzdF9wYXltZW50X2Vycm9yOiBMYXN0UGF5bWVudEVycm9yIHwgbnVsbDtcblxuICAgIHBheW1lbnRfbWV0aG9kX29wdGlvbnM/OiBTdHJpcGVQSVBheW1lbnRNZXRob2RPcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVBJUGF5bWVudE1ldGhvZFNhdmluZ09wdGlvbnMge1xuICAgIHNldHVwX2Z1dHVyZV91c2FnZT86IFN0cmlwZUluc3RydW1lbnRTZXR1cEZ1dHVyZVVzYWdlO1xuICAgIHZlcmlmaWNhdGlvbl9tZXRob2Q/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlUElQYXltZW50TWV0aG9kT3B0aW9ucyB7XG4gICAgY2FyZD86IFN0cmlwZVBJUGF5bWVudE1ldGhvZFNhdmluZ09wdGlvbnM7XG4gICAgdXNfYmFua19hY2NvdW50PzogU3RyaXBlUElQYXltZW50TWV0aG9kU2F2aW5nT3B0aW9ucztcbn1cblxuLyoqXG4gKiBUaGUgcGF5bWVudCBlcnJvciBlbmNvdW50ZXJlZCBpbiB0aGUgcHJldmlvdXMgUGF5bWVudEludGVudCBjb25maXJtYXRpb24uIEl0IHdpbGwgYmUgY2xlYXJlZCBpZiB0aGUgUGF5bWVudEludGVudCBpcyBsYXRlciB1cGRhdGVkIGZvciBhbnkgcmVhc29uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExhc3RQYXltZW50RXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgbWVzc2FnZSBwcm92aWRpbmcgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBlcnJvci4gRm9yIGNhcmQgZXJyb3JzLCB0aGVzZSBtZXNzYWdlcyBjYW4gYmUgc2hvd24gdG8geW91ciB1c2Vycy5cbiAgICAgKi9cbiAgICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gcGFzcyBjdXN0b20gZm9udHMgd2hlbiBjcmVhdGluZyBhbiBbRWxlbWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGUpIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDc3NGb250U291cmNlIHtcbiAgICAvKipcbiAgICAgKiBBIHJlbGF0aXZlIG9yIGFic29sdXRlIFVSTCBwb2ludGluZyB0byBhIENTUyBmaWxlIHdpdGggW0Bmb250LWZhY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlKSBkZWZpbml0aW9ucywgZm9yIGV4YW1wbGU6XG4gICAgICogYGh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1PcGVuK1NhbnNgXG4gICAgICogTm90ZSB0aGF0IGlmIHlvdSBhcmUgdXNpbmcgYSBbY29udGVudCBzZWN1cml0eSBwb2xpY3ldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9Db250ZW50LVNlY3VyaXR5LVBvbGljeSkgKENTUCksXG4gICAgICogW2FkZGl0aW9uYWwgZGlyZWN0aXZlc10oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3Mvc2VjdXJpdHkjY29udGVudC1zZWN1cml0eS1wb2xpY3kpIG1heSBiZSBuZWNlc3NhcnkuXG4gICAgICovXG4gICAgY3NzU3JjOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVGhpcyBvYmplY3QgaXMgdXNlZCB0byBwYXNzIGN1c3RvbSBmb250cyB3aGVuIGNyZWF0aW5nIGFuIFtFbGVtZW50c10oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2NyZWF0ZSkgb2JqZWN0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUZvbnRTb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIHRvIGdpdmUgdGhlIGZvbnQuXG4gICAgICovXG4gICAgZmFtaWx5OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIHZhbGlkIFtzcmNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlL3NyYykgdmFsdWUgcG9pbnRpbmcgdG8geW91clxuICAgICAqIGN1c3RvbSBmb250IGZpbGUuIFRoaXMgaXMgdXN1YWxseSAodGhvdWdoIG5vdCBhbHdheXMpIGEgbGluayB0byBhIGZpbGUgd2l0aCBhIC53b2ZmICwgLm90Ziwgb3IgLnN2ZyBzdWZmaXguXG4gICAgICovXG4gICAgc3JjOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIHZhbGlkIFtmb250LWRpc3BsYXldKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlL2ZvbnQtZGlzcGxheSkgdmFsdWUuXG4gICAgICovXG4gICAgZGlzcGxheT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE9uZSBvZiBub3JtYWwsIGl0YWxpYywgb2JsaXF1ZS4gRGVmYXVsdHMgdG8gbm9ybWFsLlxuICAgICAqL1xuICAgIHN0eWxlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbdW5pY29kZS1yYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL0Bmb250LWZhY2UvdW5pY29kZS1yYW5nZSkgdmFsdWUuXG4gICAgICovXG4gICAgdW5pY29kZVJhbmdlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbZm9udC13ZWlnaHRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9mb250LXdlaWdodCkuIE5vdGUgdGhhdCB0aGlzIGlzIGEgc3RyaW5nLCBub3QgYSBudW1iZXIuXG4gICAgICovXG4gICAgd2VpZ2h0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBTdHJpcGVDdXN0b21Gb250ID0gQ3NzRm9udFNvdXJjZSB8IEN1c3RvbUZvbnRTb3VyY2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIHR5cGUgb2YgZXJyb3IuIFdoZW4gdGhlIGVycm9yIHR5cGUgaXMgY2FyZF9lcnJvciBvciB2YWxpZGF0aW9uX2Vycm9yLCB5b3UgY2FuIGRpc3BsYXkgdGhlIGVycm9yIG1lc3NhZ2UgaW4gZXJyb3IubWVzc2FnZSBkaXJlY3RseSB0byB5b3VyIHVzZXIuXG4gICAgICovXG4gICAgdHlwZTogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgbWVzc2FnZSBwcm92aWRpbmcgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBlcnJvci4gRm9yIGNhcmQgZXJyb3JzLCB0aGVzZSBtZXNzYWdlcyBjYW4gYmUgc2hvd24gdG8geW91ciB1c2Vycy5cbiAgICAgKi9cbiAgICBtZXNzYWdlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFBheW1lbnRJbnRlbnQgb2JqZWN0LlxuICAgICAqL1xuICAgIHBheW1lbnRfaW50ZW50OiBQYXltZW50SW50ZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVsZW1lbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSBgZWxlbWVudC5tb3VudGAgbWV0aG9kIGF0dGFjaGVzIHlvdXIgZWxlbWVudCB0byB0aGUgRE9NLlxuICAgICAqL1xuICAgIG1vdW50KGRvbUVsZW1lbnQ6IHN0cmluZyB8IEhUTUxFbGVtZW50KTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NIGFuZCBkZXN0cm95cyBpdC5cbiAgICAgKiBBIGRlc3Ryb3llZCBlbGVtZW50IGNhbiBub3QgYmUgcmUtYWN0aXZhdGVkIG9yIHJlLW1vdW50ZWQgdG8gdGhlIERPTS5cbiAgICAgKi9cbiAgICBkZXN0cm95KCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyB0aGUgZWxlbWVudCBmcm9tIHRoZSBET00uXG4gICAgICogQ2FsbCBgZWxlbWVudC5tb3VudGAgdG8gcmUtYXR0YWNoIGl0IHRvIHRoZSBET00uXG4gICAgICovXG4gICAgdW5tb3VudCgpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNoYW5nZSBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgRWxlbWVudCdzIHZhbHVlIGNoYW5nZXMuIFRoZSBldmVudCBwYXlsb2FkIGFsd2F5cyBjb250YWlucyBjZXJ0YWluIGtleXMsXG4gICAgICogaW4gYWRkaXRpb24gdG8gc29tZSBFbGVtZW50LXNwZWNpZmljIGtleXMuXG4gICAgICogaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudC9ldmVudHMvb25fY2hhbmdlP3R5cGU9cGF5bWVudEVsZW1lbnRcbiAgICAgKi9cbiAgICBvbihldmVudDogU3RyaXBlRWxlbWVudEV2ZW50LCBoYW5kbGVyOiAoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSkgPT4gdm9pZCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBvcHRpb25zIHRoZSBQYXltZW50IEVsZW1lbnQgd2FzIGluaXRpYWxpemVkIHdpdGguIFVwZGF0ZXMgYXJlIG1lcmdlZCBpbnRvIHRoZSBleGlzdGluZyBjb25maWd1cmF0aW9uLlxuICAgICAqIGh0dHBzOi8vZG9jcy5zdHJpcGUuY29tL2pzL2VsZW1lbnRzX29iamVjdC91cGRhdGVfcGF5bWVudF9lbGVtZW50XG4gICAgICovXG4gICAgdXBkYXRlKG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgY29sbGFwc2VzIHRoZSBQYXltZW50IEVsZW1lbnQgaW50byBhIHJvdyBvZiBwYXltZW50IG1ldGhvZCB0YWJzLlxuICAgICAqIGh0dHBzOi8vZG9jcy5zdHJpcGUuY29tL2pzL2VsZW1lbnRzX29iamVjdC9jb2xsYXBzZV9wYXltZW50X2VsZW1lbnRcbiAgICAgKi9cbiAgICBjb2xsYXBzZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUV2ZW50IHtcbiAgICBjb21wbGV0ZTogYm9vbGVhbjtcbiAgICBlbGVtZW50VHlwZTogc3RyaW5nO1xuICAgIGVtcHR5OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUN1c3RvbWVyRXZlbnQgZXh0ZW5kcyBTdHJpcGVFdmVudCB7XG4gICAgY29sbGFwc2VkPzogYm9vbGVhbjtcbiAgICBhdXRoZW50aWNhdGVkOiBib29sZWFuO1xuICAgIHZhbHVlOiB7XG4gICAgICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVTaGlwcGluZ0V2ZW50IGV4dGVuZHMgU3RyaXBlRXZlbnQge1xuICAgIG1vZGU/OiBzdHJpbmc7XG4gICAgaXNOZXdBZGRyZXNzPzogYm9vbGVhbjtcbiAgICBwaG9uZUZpZWxkUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgdmFsdWU6IHtcbiAgICAgICAgYWRkcmVzczogQWRkcmVzcztcbiAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgICAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICAgICAgcGhvbmU/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIHBob25lOiBzdHJpbmc7XG4gICAgfTtcbiAgICBkaXNwbGF5Pzoge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVQYXltZW50RXZlbnQgZXh0ZW5kcyBTdHJpcGVFdmVudCB7XG4gICAgdmFsdWU6IHtcbiAgICAgICAgdHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGU7XG4gICAgfTtcbiAgICBjb2xsYXBzZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5OiBzdHJpbmc7XG4gICAgbGluZTE6IHN0cmluZztcbiAgICBsaW5lMj86IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFN0cmlwZUV2ZW50VHlwZSA9XG4gICAgfCBTdHJpcGVTaGlwcGluZ0V2ZW50XG4gICAgfCBTdHJpcGVDdXN0b21lckV2ZW50XG4gICAgfCBTdHJpcGVQYXltZW50RXZlbnRcbiAgICB8IFN0cmlwZUxpbmtWMkV2ZW50O1xuXG4vKipcbiAqIE9iamVjdCBkZWZpbml0aW9uIGZvciBwYXJ0IG9mIHRoZSBkYXRhIHNlbnQgdG8gY29uZmlybSB0aGUgUGF5bWVudEludGVudC5cbiAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSNjb25maXJtX3BheW1lbnRfaW50ZW50LXNoaXBwaW5nXG4gKi9cbmV4cG9ydCB0eXBlIEFkZHJlc3NPcHRpb25zID0gUGFydGlhbDxBZGRyZXNzPjtcblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVBZGRyZXNzVmFsdWVzIHtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGFkZHJlc3M/OiBBZGRyZXNzT3B0aW9ucyAmIHsgY291bnRyeTogc3RyaW5nIH07XG59XG5cbi8qKlxuICogT2JqZWN0IGRlZmluaXRpb24gZm9yIHBhcnQgb2YgdGhlIGRhdGEgc2VudCB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICogaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2NyZWF0ZV9wYXltZW50X2VsZW1lbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzUHJvcGVydGllcyB7XG4gICAgY2l0eT86IEF1dG9Pck5ldmVyO1xuICAgIGNvdW50cnk/OiBBdXRvT3JOZXZlcjtcbiAgICBzdGF0ZT86IEF1dG9Pck5ldmVyO1xuICAgIHBvc3RhbENvZGU/OiBBdXRvT3JOZXZlcjtcbiAgICBsaW5lMT86IEF1dG9Pck5ldmVyO1xuICAgIGxpbmUyPzogQXV0b09yTmV2ZXI7XG59XG5cbi8qKlxuICogT2JqZWN0IGRlZmluaXRpb24gZm9yIHBhcnQgb2YgdGhlIGRhdGEgc2VudCB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpbGxpbmdEZXRhaWxzT3B0aW9ucyB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBlbWFpbD86IHN0cmluZztcbiAgICBhZGRyZXNzPzogQWRkcmVzc09wdGlvbnM7XG4gICAgcGhvbmU/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogT2JqZWN0IGRlZmluaXRpb24gZm9yIHBhcnQgb2YgdGhlIGRhdGEgc2VudCB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpbGxpbmdEZXRhaWxzUHJvcGVydGllcyB7XG4gICAgbmFtZT86IEF1dG9Pck5ldmVyO1xuICAgIGVtYWlsPzogQXV0b09yTmV2ZXI7XG4gICAgYWRkcmVzcz86IEF1dG9Pck5ldmVyIHwgQWRkcmVzc1Byb3BlcnRpZXM7XG4gICAgcGhvbmU/OiBBdXRvT3JOZXZlcjtcbn1cblxuLyoqXG4gKiBPYmplY3QgZGVmaW5pdGlvbiBmb3IgcGFydCBvZiB0aGUgZGF0YSBzZW50IHRvIGNvbmZpcm0gdGhlIFBheW1lbnRJbnRlbnQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZERhdGFPcHRpb25zIHtcbiAgICBiaWxsaW5nX2RldGFpbHM6IEJpbGxpbmdEZXRhaWxzT3B0aW9ucztcbiAgICBhbGxvd19yZWRpc3BsYXk/OiAnYWx3YXlzJyB8ICdsaW1pdGVkJyB8ICd1bnNwZWNpZmllZCc7XG59XG5cbi8qKlxuICogUGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBTdHJpcGUgQVBJIHRvIGNvbmZpcm0gdGhlIFBheW1lbnRJbnRlbnQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlybVBhcmFtcyB7XG4gICAgLypcbiAgICAgKiBJZiB5b3UgYXJlIFtoYW5kbGluZyBuZXh0IGFjdGlvbnMgeW91cnNlbGZdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3BheW1lbnQtaW50ZW50cy92ZXJpZnlpbmctc3RhdHVzI25leHQtYWN0aW9ucyksIHBhc3MgaW4gYSByZXR1cm5fdXJsLiBJZiB0aGUgc3Vic2VxdWVudCBhY3Rpb25cbiAgICAgKiBpcyByZWRpcmVjdF90b191cmwsIHRoaXMgVVJMIHdpbGwgYmUgdXNlZCBvbiB0aGUgcmV0dXJuIHBhdGggZm9yIHRoZSByZWRpcmVjdC5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHJldHVybl91cmw/OiBzdHJpbmc7XG4gICAgcGF5bWVudF9tZXRob2RfZGF0YT86IFBheW1lbnRNZXRob2REYXRhT3B0aW9ucztcbn1cblxuLyoqXG4gKiBEYXRhIHRvIGJlIHNlbnQgd2l0aCBhIGBzdHJpcGUuY29uZmlybVBheW1lbnRgIHJlcXVlc3QuXG4gKiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL3BheW1lbnRfaW50ZW50cy9jb25maXJtX3BheW1lbnQpIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSB7XG4gICAgLyoqXG4gICAgICogVGhlIEVsZW1lbnRzIGluc3RhbmNlIHRoYXQgd2FzIHVzZWQgdG8gY3JlYXRlIHRoZSBQYXltZW50IEVsZW1lbnQuXG4gICAgICovXG4gICAgZWxlbWVudHM6IFN0cmlwZUVsZW1lbnRzO1xuXG4gICAgLyoqXG4gICAgICogUGFyYW1ldGVycyB0aGF0IHdpbGwgYmUgcGFzc2VkIG9uIHRvIHRoZSBTdHJpcGUgQVBJIHRvIGNvbmZpcm0gdGhlIFBheW1lbnRJbnRlbnQuXG4gICAgICovXG4gICAgY29uZmlybVBhcmFtcz86IFN0cmlwZUNvbmZpcm1QYXJhbXM7XG5cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0LCBjb25maXJtUGF5bWVudCB3aWxsIGFsd2F5cyByZWRpcmVjdCB0byB5b3VyIHJldHVybl91cmwgYWZ0ZXIgYSBzdWNjZXNzZnVsIGNvbmZpcm1hdGlvbi5cbiAgICAgKiBJZiB5b3Ugc2V0IHJlZGlyZWN0OiBcImlmX3JlcXVpcmVkXCIsIHRoZW4gY29uZmlybVBheW1lbnQgd2lsbCBvbmx5IHJlZGlyZWN0IGlmIHlvdXIgdXNlciBjaG9vc2VzIGEgcmVkaXJlY3QtYmFzZWQgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgcmVkaXJlY3Q/OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQUxXQVlTIHwgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLklGX1JFUVVJUkVEO1xuXG4gICAgY2xpZW50U2VjcmV0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkc09wdGlvbnMge1xuICAgIGJpbGxpbmdEZXRhaWxzPzogQXV0b09yTmV2ZXIgfCBCaWxsaW5nRGV0YWlsc1Byb3BlcnRpZXM7XG4gICAgcGhvbmU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2FsbGV0T3B0aW9ucyB7XG4gICAgYXBwbGVQYXk/OiBBdXRvT3JOZXZlcjtcbiAgICBnb29nbGVQYXk/OiBBdXRvT3JOZXZlcjtcbiAgICBsaW5rPzogQXV0b09yTmV2ZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVybU9wdGlvbnMge1xuICAgIGNhcmQ/OiBBdXRvT3JOZXZlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVMYXlvdXRPcHRpb25zIHtcbiAgICB0eXBlPzogJ2FjY29yZGlvbicgfCAndGFicyc7XG4gICAgbGlua0luQWNjb3JkaW9uPzogYm9vbGVhbjtcbiAgICBkZWZhdWx0Q29sbGFwc2VkPzogYm9vbGVhbjtcbiAgICByYWRpb3M/OiBib29sZWFuO1xuICAgIHNwYWNlZEFjY29yZGlvbkl0ZW1zPzogYm9vbGVhbjtcbiAgICB2aXNpYmxlQWNjb3JkaW9uSXRlbXNDb3VudD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBbGwgYXZhaWxhYmxlIG9wdGlvbnMgYXJlIGhlcmUgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2NyZWF0ZV9wYXltZW50X2VsZW1lbnRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMge1xuICAgIG1vZGU/OiBzdHJpbmc7XG4gICAgZmllbGRzPzogRmllbGRzT3B0aW9ucztcbiAgICB3YWxsZXRzPzogV2FsbGV0T3B0aW9ucztcbiAgICBhbGxvd2VkQ291bnRyaWVzPzogc3RyaW5nW107XG4gICAgZGVmYXVsdFZhbHVlcz86IFNoaXBwaW5nRGVmYXVsdFZhbHVlcyB8IEN1c3RvbWVyRGVmYXVsdFZhbHVlcyB8IFBheW1lbnREZWZhdWx0VmFsdWVzO1xuICAgIHZhbGlkYXRpb24/OiB2YWxpZGF0aW9uRWxlbWVudDtcbiAgICBkaXNwbGF5PzogeyBuYW1lOiBTdHJpcGVEaXNwbGF5TmFtZSB9O1xuICAgIHRlcm1zPzogVGVybU9wdGlvbnM7XG4gICAgbGF5b3V0PzogU3RyaXBlTGF5b3V0T3B0aW9ucztcbiAgICBwYXltZW50TWV0aG9kT3JkZXI/OiBzdHJpbmdbXTtcbiAgICAvLyAgTGluayB2MiBvcHRpb25zXG4gICAgbGluZUl0ZW1zPzogTGluZUl0ZW1bXTtcbiAgICBhbGxvd2VkU2hpcHBpbmdDb3VudHJpZXM/OiBzdHJpbmdbXTtcbiAgICBzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZD86IGJvb2xlYW47XG4gICAgc2hpcHBpbmdSYXRlcz86IFN0cmlwZUxpbmtWMlNoaXBwaW5nUmF0ZVtdO1xuICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIGVtYWlsUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHBob25lTnVtYmVyUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHBheW1lbnRNZXRob2RzPzoge1xuICAgICAgICBsaW5rOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTztcbiAgICAgICAgYXBwbGVQYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUjtcbiAgICAgICAgZ29vZ2xlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVI7XG4gICAgICAgIGFtYXpvblBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSO1xuICAgICAgICBwYXlwYWw6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUjtcbiAgICAgICAga2xhcm5hOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVI7XG4gICAgfTtcbiAgICBidXR0b25IZWlnaHQ/OiBudW1iZXI7XG4gICAgc2F2ZVBheW1lbnRNZXRob2Q/OiBTdHJpcGVTYXZlUGF5bWVudE1ldGhvZDtcbn1cblxuaW50ZXJmYWNlIHZhbGlkYXRpb25FbGVtZW50IHtcbiAgICBwaG9uZT86IHZhbGlkYXRpb25SZXF1aXJlZEVsZW1lbnQ7XG59XG5cbmludGVyZmFjZSB2YWxpZGF0aW9uUmVxdWlyZWRFbGVtZW50IHtcbiAgICByZXF1aXJlZD86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFBheW1lbnREZWZhdWx0VmFsdWVzIHtcbiAgICBzYXZlUGF5bWVudE1ldGhvZD86IGJvb2xlYW47XG4gICAgYmlsbGluZ0RldGFpbHM/OiBCaWxsaW5nRGV0YWlsc09wdGlvbnM7XG59XG5cbmludGVyZmFjZSBTaGlwcGluZ0RlZmF1bHRWYWx1ZXMge1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xuICAgIHBob25lOiBzdHJpbmc7XG4gICAgYWRkcmVzczogQWRkcmVzcztcbn1cblxuLypcbkRlY2lkZSB3aGljaCBtb2RlIHlvdSBhcmUgZ29pbmcgdG8gdXNlIHRoZSBBZGRyZXNzIEVsZW1lbnRcblNoaXBwaW5nOiBpcyB1c2VkIHdpdGggdGhlIFBheW1lbnQgRWxlbWVudCBhbmQgTGluayBBdXRoZW50aWNhdGlvbiBFbGVtZW50LCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgcGFzcyBzaGlwcGluZ1xuaW5mb3JtYXRpb24gd2hlbiBjb25maXJtaW5nIFBheW1lbnQgSW50ZW50IG9yIFNldHVwIEludGVudC5cbkJpbGxpbmc6IGlzIHVzZWQgd2l0aCB0aGUgUGF5bWVudCBFbGVtZW50LCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgcGFzcyB0aGUgYmlsbGluZyBpbmZvcm1hdGlvbiB3aGVuIGNvbmZpcm1pbmdcblBheW1lbnQgSW50ZW50IG9yIFNldHVwIEludGVudC5cbiAqL1xuZXhwb3J0IGVudW0gU3RyaXBlRm9ybU1vZGUge1xuICAgIFNISVBQSU5HID0gJ3NoaXBwaW5nJyxcbiAgICBCSUxMSU5HID0gJ2JpbGxpbmcnLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVEaXNwbGF5TmFtZSB7XG4gICAgU1BMSVQgPSAnc3BsaXQnLFxuICAgIEZVTEwgPSAnZnVsbCcsXG4gICAgT1JHQU5JWkFUSU9OID0gJ29yZ2FuaXphdGlvbicsXG59XG5cbmludGVyZmFjZSBDdXN0b21lckRlZmF1bHRWYWx1ZXMge1xuICAgIG1vZGU6IFN0cmlwZUZvcm1Nb2RlO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgYWxsb3dlZENvdW50cmllcz86IHN0cmluZ1tdO1xuICAgIGRpc3BsYXk/OiB7XG4gICAgICAgIG5hbWU6IFN0cmlwZURpc3BsYXlOYW1lO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudHMge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gRWxlbWVudHMgaW5zdGFuY2UsIHdoaWNoIG1hbmFnZXMgYSBncm91cCBvZiBlbGVtZW50cy5cbiAgICAgKiBodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvY3JlYXRlXG4gICAgICovXG4gICAgY3JlYXRlKGVsZW1lbnRUeXBlOiBTdHJpcGVFbGVtZW50VHlwZSwgb3B0aW9ucz86IFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyk6IFN0cmlwZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIHByZXZpb3VzbHkgY3JlYXRlZCBlbGVtZW50LlxuICAgICAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9nZXRfcGF5bWVudF9lbGVtZW50IG9yXG4gICAgICogaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2dldF9saW5rX2F1dGhlbnRpY2F0aW9uX2VsZW1lbnRcbiAgICAgKi9cbiAgICBnZXRFbGVtZW50KGVsZW1lbnRUeXBlOiBTdHJpcGVFbGVtZW50VHlwZSk6IFN0cmlwZUVsZW1lbnQgfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvcHRpb25zIG9uIGFuIGV4aXN0aW5nIGluc3RhbmNlIG9mIEVsZW1lbnRzLlxuICAgICAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC91cGRhdGVcbiAgICAgKi9cbiAgICB1cGRhdGUob3B0aW9ucz86IFN0cmlwZVVwZGF0ZUVsZW1lbnRzT3B0aW9ucyk6IFN0cmlwZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaGVzIHVwZGF0ZXMgZnJvbSB0aGUgYXNzb2NpYXRlZCBQYXltZW50SW50ZW50IG9yIFNldHVwSW50ZW50IG9uIGFuIGV4aXN0aW5nIGluc3RhbmNlIG9mIEVsZW1lbnRzLFxuICAgICAqIGFuZCByZWZsZWN0cyB0aGVzZSB1cGRhdGVzIGluIHRoZSBQYXltZW50IEVsZW1lbnQuXG4gICAgICogaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2ZldGNoX3VwZGF0ZXNcbiAgICAgKi9cbiAgICBmZXRjaFVwZGF0ZXMoKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDaGVja291dFNlc3Npb24ge1xuICAgIGxvYWRBY3Rpb25zKCk6IFByb21pc2U8U3RyaXBlTG9hZEFjdGlvbnNSZXN1bHQ+O1xuICAgIGNyZWF0ZVBheW1lbnRFbGVtZW50KG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMpOiBTdHJpcGVFbGVtZW50O1xuICAgIGdldFBheW1lbnRFbGVtZW50KCk6IFN0cmlwZUVsZW1lbnQgfCBudWxsO1xufVxuXG5leHBvcnQgZW51bSBTdHJpcGVMb2FkQWN0aW9uc1Jlc3VsdFR5cGUge1xuICAgIFNVQ0NFU1MgPSAnc3VjY2VzcycsXG4gICAgRVJST1IgPSAnZXJyb3InLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUxvYWRBY3Rpb25zUmVzdWx0IHtcbiAgICB0eXBlOiBTdHJpcGVMb2FkQWN0aW9uc1Jlc3VsdFR5cGU7XG4gICAgZXJyb3I/OiB7IG1lc3NhZ2U6IHN0cmluZyB9O1xuICAgIGFjdGlvbnM/OiBTdHJpcGVDaGVja291dFNlc3Npb25BY3Rpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNoZWNrb3V0U2Vzc2lvbkFjdGlvbnMge1xuICAgIHVwZGF0ZUVtYWlsKGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vKipcbiAqIEFsbCBhdmFpbGFibGUgb3B0aW9ucyBhcmUgaGVyZSBodHRwczovL3N0cmlwZS5jb20vZG9jcy9zdHJpcGUtanMvYXBwZWFyYW5jZS1hcGkjc3VwcG9ydGVkLWNzcy1wcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQXBwZWFyYW5jZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIFN0cmlwZUFwcGVhcmFuY2VWYWx1ZXM+O1xuXG4gICAgcnVsZXM/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCBTdHJpcGVBcHBlYXJhbmNlVmFsdWVzPj47XG59XG5cbmV4cG9ydCB0eXBlIFN0cmlwZUFwcGVhcmFuY2VWYWx1ZXMgPSBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bWJlciB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50c09wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IG9mIGN1c3RvbSBmb250cywgd2hpY2ggZWxlbWVudHMgY3JlYXRlZCBmcm9tIHRoZSBFbGVtZW50cyBvYmplY3QgY2FuIHVzZS5cbiAgICAgKiBGb250cyBjYW4gYmUgc3BlY2lmaWVkIGFzIFtDc3NGb250U291cmNlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9hcHBlbmRpeC9jc3NfZm9udF9zb3VyY2Vfb2JqZWN0KVxuICAgICAqIG9yIFtDdXN0b21Gb250U291cmNlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9hcHBlbmRpeC9jdXN0b21fZm9udF9zb3VyY2Vfb2JqZWN0KSBvYmplY3RzLlxuICAgICAqL1xuICAgIGZvbnRzPzogU3RyaXBlQ3VzdG9tRm9udFtdO1xuXG4gICAgLyoqXG4gICAgICogQSBbbG9jYWxlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9hcHBlbmRpeC9zdXBwb3J0ZWRfbG9jYWxlcykgdG8gZGlzcGxheSBwbGFjZWhvbGRlcnMgYW5kXG4gICAgICogZXJyb3Igc3RyaW5ncyBpbi4gRGVmYXVsdCBpcyBhdXRvIChTdHJpcGUgZGV0ZWN0cyB0aGUgbG9jYWxlIG9mIHRoZSBicm93c2VyKS5cbiAgICAgKiBTZXR0aW5nIHRoZSBsb2NhbGUgZG9lcyBub3QgYWZmZWN0IHRoZSBiZWhhdmlvciBvZiBwb3N0YWwgY29kZSB2YWxpZGF0aW9u4oCUYSB2YWxpZCBwb3N0YWwgY29kZVxuICAgICAqIGZvciB0aGUgYmlsbGluZyBjb3VudHJ5IG9mIHRoZSBjYXJkIGlzIHN0aWxsIHJlcXVpcmVkLlxuICAgICAqL1xuICAgIGxvY2FsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGllbnQgc2VjcmV0IG9mIHRoaXMgUGF5bWVudEludGVudC4gVXNlZCBmb3IgY2xpZW50LXNpZGUgcmV0cmlldmFsIHVzaW5nIGEgcHVibGlzaGFibGUga2V5LlxuICAgICAqIFRoZSBjbGllbnQgc2VjcmV0IGNhbiBiZSB1c2VkIHRvIGNvbXBsZXRlIGEgcGF5bWVudCBmcm9tIHlvdXIgZnJvbnRlbmQuXG4gICAgICogSXQgc2hvdWxkIG5vdCBiZSBzdG9yZWQsIGxvZ2dlZCwgZW1iZWRkZWQgaW4gVVJMcywgb3IgZXhwb3NlZCB0byBhbnlvbmUgb3RoZXIgdGhhbiB0aGUgY3VzdG9tZXIuXG4gICAgICogTWFrZSBzdXJlIHRoYXQgeW91IGhhdmUgVExTIGVuYWJsZWQgb24gYW55IHBhZ2UgdGhhdCBpbmNsdWRlcyB0aGUgY2xpZW50IHNlY3JldC5cbiAgICAgKiBSZWZlciB0byBvdXIgZG9jcyB0byBhY2NlcHQgYSBwYXltZW50IGFuZCBsZWFybiBhYm91dCBob3cgY2xpZW50X3NlY3JldCBzaG91bGQgYmUgaGFuZGxlZC5cbiAgICAgKi9cbiAgICBjbGllbnRTZWNyZXQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIHRva2VuIHRoYXQgcmVwcmVzZW50cyB0aGUgU3RyaXBlIGN1c3RvbWVyIHNlc3Npb24uXG4gICAgICogU3RyaXBlIGRvY3VtZW50YXRpb246IGh0dHBzOi8vZG9jcy5zdHJpcGUuY29tL2FwaS9jaGVja291dC9zZXNzaW9uc1xuICAgICAqL1xuICAgIGN1c3RvbWVyU2Vzc2lvbkNsaWVudFNlY3JldD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1hdGNoIHRoZSBkZXNpZ24gb2YgeW91ciBzaXRlIHdpdGggdGhlIGFwcGVhcmFuY2Ugb3B0aW9uLlxuICAgICAqIFRoZSBsYXlvdXQgb2YgZWFjaCBFbGVtZW50IHN0YXlzIGNvbnNpc3RlbnQsIGJ1dCB5b3UgY2FuIG1vZGlmeSBjb2xvcnMsIGZvbnRzLCBib3JkZXJzLCBwYWRkaW5nLCBhbmQgbW9yZS5cbiAgICAgKi9cbiAgICBhcHBlYXJhbmNlPzogU3RyaXBlQXBwZWFyYW5jZU9wdGlvbnM7XG5cbiAgICBtb2RlPzogc3RyaW5nO1xuICAgIGFtb3VudD86IG51bWJlcjtcbiAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICBwYXltZW50TWV0aG9kVHlwZXM/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVJbml0Q2hlY2tvdXRPcHRpb25zIHtcbiAgICBjbGllbnRTZWNyZXQ6IHN0cmluZztcbiAgICBlbGVtZW50c09wdGlvbnM/OiBTdHJpcGVDaGVja291dFNlc3Npb25FbGVtZW50T3B0aW9ucztcbiAgICBhZGFwdGl2ZVByaWNpbmc/OiB7XG4gICAgICAgIGFsbG93ZWQ6IGJvb2xlYW47XG4gICAgfTtcbiAgICBkZWZhdWx0VmFsdWVzPzogU3RyaXBlQ2hlY2tvdXRTZXNzaW9uRGVmYXVsdFZhbHVlcztcbiAgICB3YWxsZXRzPzogYW55O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNoZWNrb3V0U2Vzc2lvbkVsZW1lbnRPcHRpb25zIHtcbiAgICBhcHBlYXJhbmNlPzogU3RyaXBlQXBwZWFyYW5jZU9wdGlvbnM7XG4gICAgbG9hZGVyPzogU3RyaXBlU3RyaW5nQ29uc3RhbnRzO1xuICAgIGZvbnRzPzogU3RyaXBlQ3VzdG9tRm9udFtdO1xuICAgIHNhdmVkUGF5bWVudE1ldGhvZD86IHtcbiAgICAgICAgZW5hYmxlUmVkaXNwbGF5PzogU3RyaXBlU3RyaW5nQ29uc3RhbnRzO1xuICAgICAgICBlbmFibGVTYXZlPzogU3RyaXBlU3RyaW5nQ29uc3RhbnRzO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ2hlY2tvdXRTZXNzaW9uRGVmYXVsdFZhbHVlcyB7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBTdHJpcGVBZGRyZXNzVmFsdWVzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IFN0cmlwZUFkZHJlc3NWYWx1ZXM7XG4gICAgZW1haWw/OiBzdHJpbmc7XG4gICAgcGhvbmVOdW1iZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlVXBkYXRlRWxlbWVudHNPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBBIFtsb2NhbGVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L3N1cHBvcnRlZF9sb2NhbGVzKSB0byBkaXNwbGF5IHBsYWNlaG9sZGVycyBhbmRcbiAgICAgKiBlcnJvciBzdHJpbmdzIGluLiBEZWZhdWx0IGlzIGF1dG8gKFN0cmlwZSBkZXRlY3RzIHRoZSBsb2NhbGUgb2YgdGhlIGJyb3dzZXIpLlxuICAgICAqIFNldHRpbmcgdGhlIGxvY2FsZSBkb2VzIG5vdCBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHBvc3RhbCBjb2RlIHZhbGlkYXRpb27igJRhIHZhbGlkIHBvc3RhbCBjb2RlXG4gICAgICogZm9yIHRoZSBiaWxsaW5nIGNvdW50cnkgb2YgdGhlIGNhcmQgaXMgc3RpbGwgcmVxdWlyZWQuXG4gICAgICovXG4gICAgbG9jYWxlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogTWF0Y2ggdGhlIGRlc2lnbiBvZiB5b3VyIHNpdGUgd2l0aCB0aGUgYXBwZWFyYW5jZSBvcHRpb24uXG4gICAgICogVGhlIGxheW91dCBvZiBlYWNoIEVsZW1lbnQgc3RheXMgY29uc2lzdGVudCwgYnV0IHlvdSBjYW4gbW9kaWZ5IGNvbG9ycywgZm9udHMsIGJvcmRlcnMsIHBhZGRpbmcsIGFuZCBtb3JlLlxuICAgICAqL1xuICAgIGFwcGVhcmFuY2U/OiBTdHJpcGVBcHBlYXJhbmNlT3B0aW9ucztcbiAgICBtb2RlPzogc3RyaW5nO1xuICAgIGFtb3VudD86IG51bWJlcjtcbiAgICBjdXJyZW5jeT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDbGllbnQge1xuICAgIC8qKlxuICAgICAqIFVzZSBjb25maXJtUGF5bWVudCB0byBjb25maXJtIGEgUGF5bWVudEludGVudCB1c2luZyBkYXRhIGNvbGxlY3RlZCBieSB0aGUgUGF5bWVudCBFbGVtZW50LlxuICAgICAqIFdoZW4gY2FsbGVkLCBjb25maXJtUGF5bWVudCB3aWxsIGF0dGVtcHQgdG8gY29tcGxldGUgYW55IHJlcXVpcmVkIGFjdGlvbnMsXG4gICAgICogc3VjaCBhcyBhdXRoZW50aWNhdGluZyB5b3VyIHVzZXIgYnkgZGlzcGxheWluZyBhIDNEUyBkaWFsb2cgb3IgcmVkaXJlY3RpbmcgdGhlbSB0byBhIGJhbmsgYXV0aG9yaXphdGlvbiBwYWdlLlxuICAgICAqL1xuICAgIGNvbmZpcm1QYXltZW50KG9wdGlvbnM6IFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSk6IFByb21pc2U8U3RyaXBlUmVzdWx0PjtcblxuICAgIC8qKlxuICAgICAqIFdoZW4gY2FsbGVkLCBpdCB3aWxsIGNvbmZpcm0gdGhlIFBheW1lbnRJbnRlbnQgd2l0aCBkYXRhIHlvdSBwcm92aWRlIGFuZCBjYXJyeSBvdXQgM0RTIG9yIG90aGVyIG5leHQgYWN0aW9ucyBpZiB0aGV5IGFyZSByZXF1aXJlZC5cbiAgICAgKi9cbiAgICBjb25maXJtQ2FyZFBheW1lbnQoY2xpZW50U2VjcmV0OiBzdHJpbmcpOiBQcm9taXNlPFN0cmlwZVJlc3VsdD47XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIFBheW1lbnRJbnRlbnQgdXNpbmcgaXRzIGNsaWVudCBzZWNyZXQuXG4gICAgICovXG4gICAgcmV0cmlldmVQYXltZW50SW50ZW50KGNsaWVudFNlY3JldDogc3RyaW5nKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQ+O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGBFbGVtZW50c2AgaW5zdGFuY2UsIHdoaWNoIG1hbmFnZXMgYSBncm91cCBvZiBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBlbGVtZW50cyhvcHRpb25zOiBTdHJpcGVFbGVtZW50c09wdGlvbnMpOiBTdHJpcGVFbGVtZW50cztcblxuICAgIGluaXRDaGVja291dChvcHRpb25zOiBTdHJpcGVJbml0Q2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTxTdHJpcGVDaGVja291dFNlc3Npb24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVJlc3VsdCB7XG4gICAgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7XG4gICAgZXJyb3I/OiBTdHJpcGVFcnJvcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBiY1N0cmlwZUNsaWVudD86IFN0cmlwZUNsaWVudDtcbiAgICBiY1N0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgYmNTdHJpcGVDaGVja291dFNlc3Npb24/OiBTdHJpcGVDaGVja291dFNlc3Npb247XG4gICAgU3RyaXBlPzxUID0gU3RyaXBlQ2xpZW50PihcbiAgICAgICAgc3RyaXBlUHVibGlzaGFibGVLZXk6IHN0cmluZyxcbiAgICAgICAgb3B0aW9ucz86IFN0cmlwZUNvbmZpZ3VyYXRpb25PcHRpb25zLFxuICAgICk6IFQ7XG59XG5cbmV4cG9ydCBlbnVtIFN0cmlwZVBheW1lbnRNZXRob2RUeXBlIHtcbiAgICBDcmVkaXRDYXJkID0gJ2NhcmQnLFxuICAgIExpbmsgPSAnbGluaycsXG4gICAgRVBTID0gJ2VwcycsXG4gICAgR1JBQlBBWSA9ICdncmFicGF5JyxcbiAgICBCQU5DT05UQUNUID0gJ2JhbmNvbnRhY3QnLFxuICAgIElERUFMID0gJ2lkZWFsJyxcbiAgICBBTElQQVkgPSAnYWxpcGF5JyxcbiAgICBLTEFSTkEgPSAna2xhcm5hJyxcbiAgICBPQ1MgPSAnb3B0aW1pemVkX2NoZWNrb3V0Jyxcbn1cblxudHlwZSBBdXRvT3JOZXZlciA9IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPIHwgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSO1xuXG5leHBvcnQgZW51bSBTdHJpcGVTdHJpbmdDb25zdGFudHMge1xuICAgIE5FVkVSID0gJ25ldmVyJyxcbiAgICBBVVRPID0gJ2F1dG8nLFxuICAgIEFMV0FZUyA9ICdhbHdheXMnLFxuICAgIFBBWU1FTlQgPSAncGF5bWVudCcsXG4gICAgSUZfUkVRVUlSRUQgPSAnaWZfcmVxdWlyZWQnLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVKc1ZlcnNpb24ge1xuICAgIFYzID0gJ3YzJyxcbiAgICBBQ0FDSUEgPSAnYWNhY2lhJyxcbiAgICBCQVNJTCA9ICdiYXNpbCcsXG4gICAgQ0xPVkVSID0gJ2Nsb3ZlcicsXG59XG5cbmV4cG9ydCBlbnVtIFN0cmlwZUVsZW1lbnRUeXBlIHtcbiAgICBQQVlNRU5UID0gJ3BheW1lbnQnLFxuICAgIEFVVEhFTlRJQ0FUSU9OID0gJ2xpbmtBdXRoZW50aWNhdGlvbicsXG4gICAgU0hJUFBJTkcgPSAnYWRkcmVzcycsXG4gICAgRVhQUkVTU19DSEVDS09VVCA9ICdleHByZXNzQ2hlY2tvdXQnLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVQYXltZW50SW50ZW50U3RhdHVzIHtcbiAgICBSRVFVSVJFU19QQVlNRU5UX01FVEhPRCA9ICdyZXF1aXJlc19wYXltZW50X21ldGhvZCcsXG4gICAgUkVRVUlSRVNfQ09ORklSTUFUSU9OID0gJ3JlcXVpcmVzX2NvbmZpcm1hdGlvbicsXG4gICAgUkVRVUlSRVNfQUNUSU9OID0gJ3JlcXVpcmVzX2FjdGlvbicsXG4gICAgUFJPQ0VTU0lORyA9ICdwcm9jZXNzaW5nJyxcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlUGF5bWVudE1ldGhvZCBleHRlbmRzIFBheW1lbnRNZXRob2Qge1xuICAgIGluaXRpYWxpemF0aW9uRGF0YTogU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgc3RyaXBlUHVibGlzaGFibGVLZXk6IHN0cmluZztcbiAgICBzdHJpcGVDb25uZWN0ZWRBY2NvdW50OiBzdHJpbmc7XG4gICAgc2hvcHBlckxhbmd1YWdlOiBzdHJpbmc7XG4gICAgY3VzdG9tZXJTZXNzaW9uVG9rZW4/OiBzdHJpbmc7XG4gICAgZW5hYmxlTGluaz86IGJvb2xlYW47XG4gICAgYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cz86IGJvb2xlYW47XG4gICAgY2FwdHVyZU1ldGhvZD86ICdhdXRvbWF0aWMnIHwgJ21hbnVhbCc7XG4gICAgdXNlTmV3U3RyaXBlSnNWZXJzaW9uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50VXBkYXRlT3B0aW9ucyB7XG4gICAgc2hvdWxkU2hvd1Rlcm1zPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkYXRhOiB7XG4gICAgICAgIHRva2VuPzogc3RyaW5nO1xuICAgICAgICByZWRpcmVjdF91cmw/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVzcG9uc2VCb2R5IHtcbiAgICBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkO1xuICAgIHRocmVlX2RzX3Jlc3VsdDoge1xuICAgICAgICB0b2tlbj86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZW51bSBTdHJpcGVFbGVtZW50RXZlbnQge1xuICAgIENMSUNLID0gJ2NsaWNrJyxcbiAgICBDSEFOR0UgPSAnY2hhbmdlJyxcbiAgICBSRUFEWSA9ICdyZWFkeScsXG4gICAgU0hJUFBJTkdfQUREUkVTU19DSEFOR0UgPSAnc2hpcHBpbmdhZGRyZXNzY2hhbmdlJyxcbiAgICBTSElQUElOR19SQVRFX0NIQU5HRSA9ICdzaGlwcGluZ3JhdGVjaGFuZ2UnLFxuICAgIENPTkZJUk0gPSAnY29uZmlybScsXG4gICAgQ0FOQ0VMID0gJ2NhbmNlbCcsXG4gICAgTE9BREVSX1NUQVJUID0gJ2xvYWRlcnN0YXJ0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMaW5lSXRlbSB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGFtb3VudDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVNhdmVQYXltZW50TWV0aG9kIHtcbiAgICBtYXhWaXNpYmxlUGF5bWVudE1ldGhvZHM/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBlbnVtIFN0cmlwZUluc3RydW1lbnRTZXR1cEZ1dHVyZVVzYWdlIHtcbiAgICBPTl9TRVNTSU9OID0gJ29uX3Nlc3Npb24nLFxuICAgIE9GRl9TRVNTSU9OID0gJ29mZl9zZXNzaW9uJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVMaW5rVjJFdmVudCB7XG4gICAgdmFsdWU/OiBudWxsO1xuICAgIGJpbGxpbmdEZXRhaWxzPzoge1xuICAgICAgICBuYW1lPzogc3RyaW5nO1xuICAgICAgICBlbWFpbD86IHN0cmluZztcbiAgICAgICAgcGhvbmU/OiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M/OiB7XG4gICAgICAgICAgICBsaW5lMT86IHN0cmluZztcbiAgICAgICAgICAgIGNpdHk/OiBzdHJpbmc7XG4gICAgICAgICAgICBjb3VudHJ5Pzogc3RyaW5nO1xuICAgICAgICAgICAgcG9zdGFsX2NvZGU/OiBzdHJpbmc7XG4gICAgICAgICAgICBzdGF0ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IHtcbiAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgICAgYWRkcmVzcz86IHtcbiAgICAgICAgICAgIGxpbmUxPzogc3RyaW5nO1xuICAgICAgICAgICAgbGluZTI/OiBzdHJpbmc7XG4gICAgICAgICAgICBjaXR5Pzogc3RyaW5nO1xuICAgICAgICAgICAgY291bnRyeT86IHN0cmluZztcbiAgICAgICAgICAgIHBvc3RhbF9jb2RlPzogc3RyaW5nO1xuICAgICAgICAgICAgc3RhdGU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBhZGRyZXNzPzoge1xuICAgICAgICBsaW5lMT86IHN0cmluZztcbiAgICAgICAgY2l0eT86IHN0cmluZztcbiAgICAgICAgY291bnRyeT86IHN0cmluZztcbiAgICAgICAgcG9zdGFsX2NvZGU/OiBzdHJpbmc7XG4gICAgICAgIHN0YXRlPzogc3RyaW5nO1xuICAgIH07XG4gICAgc2hpcHBpbmdSYXRlPzogU3RyaXBlTGlua1YyU2hpcHBpbmdSYXRlO1xuICAgIGVsZW1lbnRUeXBlOiBzdHJpbmc7XG4gICAgZXhwcmVzc1BheW1lbnRUeXBlOiBzdHJpbmc7XG4gICAgcmVzb2x2ZShkYXRhOiBTdHJpcGVMaW5rVjJFdmVudFJlc29sdmVEYXRhKTogdm9pZDtcbiAgICByZWplY3QoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVMaW5rVjJFdmVudFJlc29sdmVEYXRhIHtcbiAgICBsaW5lSXRlbXM/OiBMaW5lSXRlbVtdO1xuICAgIGFsbG93ZWRTaGlwcGluZ0NvdW50cmllcz86IHN0cmluZ1tdO1xuICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBzaGlwcGluZ1JhdGVzPzogU3RyaXBlTGlua1YyU2hpcHBpbmdSYXRlW107XG4gICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZD86IGJvb2xlYW47XG4gICAgZW1haWxSZXF1aXJlZD86IGJvb2xlYW47XG4gICAgcGhvbmVOdW1iZXJSZXF1aXJlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlTGlua1YyU2hpcHBpbmdSYXRlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlTGlua1YyT3B0aW9ucyB7XG4gICAgY2xpZW50U2VjcmV0Pzogc3RyaW5nO1xuICAgIG1vZGU/OiBzdHJpbmc7XG4gICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgY2FwdHVyZU1ldGhvZD86ICdhdXRvbWF0aWMnIHwgJ21hbnVhbCc7XG4gICAgYW1vdW50PzogbnVtYmVyO1xufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBTdHJpcGVDaGVja291dFNlc3Npb24sXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRzT3B0aW9ucyxcbiAgICBTdHJpcGVIb3N0V2luZG93LFxuICAgIFN0cmlwZUluaXRDaGVja291dE9wdGlvbnMsXG4gICAgU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFN0cmlwZUpzVmVyc2lvbixcbn0gZnJvbSAnLi9zdHJpcGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZVdpbmRvdzogU3RyaXBlSG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBnZXRTdHJpcGVDbGllbnQoXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICBsb2NhbGU/OiBzdHJpbmcsXG4gICAgICAgIHN0cmlwZUpzVmVyc2lvbj86IHN0cmluZyxcbiAgICAgICAgYmV0YXM/OiBzdHJpbmdbXSxcbiAgICAgICAgYXBpVmVyc2lvbj86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFN0cmlwZUNsaWVudD4ge1xuICAgICAgICBpZiAodGhpcy5zdHJpcGVXaW5kb3cuYmNTdHJpcGVDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZVdpbmRvdy5iY1N0cmlwZUNsaWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0cmlwZSA9IGF3YWl0IHRoaXMubG9hZChzdHJpcGVKc1ZlcnNpb24pO1xuICAgICAgICBjb25zdCB7IHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCBzdHJpcGVDb25uZWN0ZWRBY2NvdW50IH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi4oc3RyaXBlQ29ubmVjdGVkQWNjb3VudCA/IHsgc3RyaXBlQWNjb3VudDogc3RyaXBlQ29ubmVjdGVkQWNjb3VudCB9IDoge30pLFxuICAgICAgICAgICAgLi4uKGxvY2FsZSA/IHsgbG9jYWxlIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oYmV0YXMgPyB7IGJldGFzIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oYXBpVmVyc2lvbiA/IHsgYXBpVmVyc2lvbiB9IDoge30pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN0cmlwZUNsaWVudCA9IHN0cmlwZTxTdHJpcGVDbGllbnQ+KHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCBvcHRpb25zKTtcblxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RyaXBlV2luZG93LCB7IGJjU3RyaXBlQ2xpZW50OiBzdHJpcGVDbGllbnQgfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUNsaWVudDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFbGVtZW50cyhcbiAgICAgICAgc3RyaXBlQ2xpZW50OiBTdHJpcGVDbGllbnQsXG4gICAgICAgIG9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFN0cmlwZUVsZW1lbnRzPiB7XG4gICAgICAgIGxldCBzdHJpcGVFbGVtZW50cyA9IHRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgc3RyaXBlRWxlbWVudHMgPSBzdHJpcGVDbGllbnQuZWxlbWVudHMob3B0aW9ucyk7XG5cbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5zdHJpcGVXaW5kb3csIHsgYmNTdHJpcGVFbGVtZW50czogc3RyaXBlRWxlbWVudHMgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVN0cmlwZUVsZW1lbnRzKG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUVsZW1lbnRzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVN0cmlwZUVsZW1lbnRzKG9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzT3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50cyA9IHRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudHMudXBkYXRlKG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCBzdHJpcGVFbGVtZW50cy5mZXRjaFVwZGF0ZXMoKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDaGVja291dFNlc3Npb24oXG4gICAgICAgIHN0cmlwZUNsaWVudDogU3RyaXBlQ2xpZW50LFxuICAgICAgICBvcHRpb25zOiBTdHJpcGVJbml0Q2hlY2tvdXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8U3RyaXBlQ2hlY2tvdXRTZXNzaW9uPiB7XG4gICAgICAgIGxldCBzdHJpcGVDaGVja291dFNlc3Npb24gPSB0aGlzLnN0cmlwZVdpbmRvdy5iY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbjtcblxuICAgICAgICBpZiAoIXN0cmlwZUNoZWNrb3V0U2Vzc2lvbikge1xuICAgICAgICAgICAgc3RyaXBlQ2hlY2tvdXRTZXNzaW9uID0gYXdhaXQgc3RyaXBlQ2xpZW50LmluaXRDaGVja291dChvcHRpb25zKTtcblxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnN0cmlwZVdpbmRvdywgeyBiY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbjogc3RyaXBlQ2hlY2tvdXRTZXNzaW9uIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUNoZWNrb3V0U2Vzc2lvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWQoc3RyaXBlSnNWZXJzaW9uPzogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHRoaXMuZ2V0U2NyaXB0VXJsKHN0cmlwZUpzVmVyc2lvbikpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlV2luZG93LlN0cmlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlV2luZG93LlN0cmlwZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNjcmlwdFVybChzdHJpcGVKc1ZlcnNpb24/OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFzdHJpcGVKc1ZlcnNpb24gfHwgc3RyaXBlSnNWZXJzaW9uID09PSBTdHJpcGVKc1ZlcnNpb24uVjMpIHtcbiAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9qcy5zdHJpcGUuY29tL3YzLyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYGh0dHBzOi8vanMuc3RyaXBlLmNvbS8ke3N0cmlwZUpzVmVyc2lvbn0vc3RyaXBlLmpzYDtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFBheW1lbnRNZXRob2QgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgU3RyaXBlUGF5bWVudE1ldGhvZCB9IGZyb20gJy4vc3RyaXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UoXG4gICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCxcbik6IHBheW1lbnRNZXRob2QgaXMgU3RyaXBlUGF5bWVudE1ldGhvZCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIHBheW1lbnRNZXRob2QgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHBheW1lbnRNZXRob2QgIT09IG51bGwgJiZcbiAgICAgICAgJ2luaXRpYWxpemF0aW9uRGF0YScgaW4gcGF5bWVudE1ldGhvZCAmJlxuICAgICAgICAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIChwYXltZW50TWV0aG9kIGFzIFN0cmlwZVBheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ3N0cmlwZVB1Ymxpc2hhYmxlS2V5JyBpbiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgJiZcbiAgICAgICAgJ3N0cmlwZUNvbm5lY3RlZEFjY291bnQnIGluIChwYXltZW50TWV0aG9kIGFzIFN0cmlwZVBheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YSAmJlxuICAgICAgICAnc2hvcHBlckxhbmd1YWdlJyBpbiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgJiZcbiAgICAgICAgdHlwZW9mIChwYXltZW50TWV0aG9kIGFzIFN0cmlwZVBheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YS5zdHJpcGVQdWJsaXNoYWJsZUtleSAhPT1cbiAgICAgICAgICAgICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEuc3RyaXBlQ29ubmVjdGVkQWNjb3VudCAhPT1cbiAgICAgICAgICAgICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEuc2hvcHBlckxhbmd1YWdlICE9PVxuICAgICAgICAgICAgJ3VuZGVmaW5lZCdcbiAgICApO1xufVxuIiwiZXhwb3J0IGNvbnN0IFNUUklQRV9VUEVfQ0xJRU5UX0JFVEFTID0gW1xuICAgICdwYXltZW50X2VsZW1lbnRfYmV0YV8yJyxcbiAgICAnYWxpcGF5X3BtX2JldGFfMScsXG4gICAgJ2xpbmtfZGVmYXVsdF9pbnRlZ3JhdGlvbl9iZXRhXzEnLFxuICAgICdzaGlwcGluZ19hZGRyZXNzX2VsZW1lbnRfYmV0YV8xJyxcbiAgICAnYWRkcmVzc19lbGVtZW50X2JldGFfMScsXG5dO1xuXG5leHBvcnQgY29uc3QgU1RSSVBFX1VQRV9DTElFTlRfQVBJX1ZFUlNJT04gPSAnMjAyMC0wMy0wMjthbGlwYXlfYmV0YT12MTtsaW5rX2JldGE9djEnO1xuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1N0cmlwZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcjogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIge1xuICAgIHJldHVybiAnc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGUnIGluIGN1c3RvbWVyO1xufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFNUUklQRV9VUEVfQ0xJRU5UX0FQSV9WRVJTSU9OLFxuICAgIFNUUklQRV9VUEVfQ0xJRU5UX0JFVEFTLFxuICAgIFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zLFxuICAgIFN0cmlwZUNsaWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudFR5cGUsXG4gICAgU3RyaXBlRXZlbnRUeXBlLFxuICAgIFN0cmlwZUZvcm1Nb2RlLFxuICAgIFN0cmlwZUpzVmVyc2lvbixcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcblxuaW1wb3J0IGlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyIGZyb20gJy4vaXMtc3RyaXBlLWFjY2VsZXJhdGVkLWNoZWNrb3V0LWN1c3RvbWVyJztcbmltcG9ydCB7IFdpdGhTdHJpcGVVUEVDdXN0b21lckluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGV1cGUtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlVVBFQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX3N0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoU3RyaXBlVVBFQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgbGV0IHN0cmlwZVVQRUNsaWVudDogU3RyaXBlQ2xpZW50O1xuXG4gICAgICAgIGlmICghb3B0aW9ucy5zdHJpcGV1cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgZ2F0ZXdheUlkLCBtZXRob2RJZCwgb25FbWFpbENoYW5nZSwgZ2V0U3R5bGVzLCBpc0xvYWRpbmcgfSA9XG4gICAgICAgICAgICBvcHRpb25zLnN0cmlwZXVwZTtcblxuICAgICAgICBPYmplY3QuZW50cmllcyhvcHRpb25zLnN0cmlwZXVwZSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIiR7a2V5fVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgIHBhcmFtczogeyBtZXRob2Q6IG1ldGhvZElkIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkgfHwgIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZW1haWwgfSA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50UHJvdmlkZXJDdXN0b21lciA9IGlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyKFxuICAgICAgICAgICAgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgIDoge307XG4gICAgICAgIGNvbnN0IHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlID1cbiAgICAgICAgICAgIHN0cmlwZVBheW1lbnRQcm92aWRlckN1c3RvbWVyLnN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlO1xuXG4gICAgICAgIGlmICghZW1haWwpIHtcbiAgICAgICAgICAgIGxldCBhcHBlYXJhbmNlOiBTdHJpcGVBcHBlYXJhbmNlT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IHR5cGVvZiBnZXRTdHlsZXMgPT09ICdmdW5jdGlvbicgJiYgZ2V0U3R5bGVzKCk7XG5cbiAgICAgICAgICAgIGlmIChzdHlsZXMpIHtcbiAgICAgICAgICAgICAgICBhcHBlYXJhbmNlID0ge1xuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUHJpbWFyeTogc3R5bGVzLmZpZWxkSW5uZXJTaGFkb3csXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckJhY2tncm91bmQ6IHN0eWxlcy5maWVsZEJhY2tncm91bmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclRleHQ6IHN0eWxlcy5sYWJlbFRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckRhbmdlcjogc3R5bGVzLmZpZWxkRXJyb3JUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JUZXh0U2Vjb25kYXJ5OiBzdHlsZXMubGFiZWxUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI6IHN0eWxlcy5maWVsZFBsYWNlaG9sZGVyVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICcuSW5wdXQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IHN0eWxlcy5maWVsZEJvcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogc3R5bGVzLmZpZWxkVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6IHN0eWxlcy5maWVsZElubmVyU2hhZG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHBlYXJhbmNlID0ge307XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0cmlwZVVQRUNsaWVudCA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0TG9jYWxlKCksXG4gICAgICAgICAgICAgICAgU3RyaXBlSnNWZXJzaW9uLlYzLFxuICAgICAgICAgICAgICAgIFNUUklQRV9VUEVfQ0xJRU5UX0JFVEFTLFxuICAgICAgICAgICAgICAgIFNUUklQRV9VUEVfQ0xJRU5UX0FQSV9WRVJTSU9OLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMgPSBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5nZXRFbGVtZW50cyhzdHJpcGVVUEVDbGllbnQsIHtcbiAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2UsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgeyBnZXRCaWxsaW5nQWRkcmVzcywgZ2V0Q29uc2lnbm1lbnRzIH0gPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gZ2V0Q29uc2lnbm1lbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IGNvbnNpZ25tZW50cz8uWzBdPy5pZDtcbiAgICAgICAgICAgIGNvbnN0IHsgZW1haWw6IGJpbGxpbmdFbWFpbCB9ID0gZ2V0QmlsbGluZ0FkZHJlc3MoKSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBiaWxsaW5nRW1haWxcbiAgICAgICAgICAgICAgICA/IHsgZGVmYXVsdFZhbHVlczogeyBtb2RlOiBTdHJpcGVGb3JtTW9kZS5TSElQUElORywgZW1haWw6IGJpbGxpbmdFbWFpbCB9IH1cbiAgICAgICAgICAgICAgICA6IHt9O1xuICAgICAgICAgICAgY29uc3QgbGlua0F1dGhlbnRpY2F0aW9uRWxlbWVudCA9XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5BVVRIRU5USUNBVElPTikgfHxcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3RyaXBlRWxlbWVudFR5cGUuQVVUSEVOVElDQVRJT04sIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBsaW5rQXV0aGVudGljYXRpb25FbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5DSEFOR0UsIChldmVudDogU3RyaXBlRXZlbnRUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJ2F1dGhlbnRpY2F0ZWQnIGluIGV2ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICAgICAgICAgIHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlOiBldmVudC5hdXRoZW50aWNhdGVkLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRW1haWxDaGFuZ2UoZXZlbnQuYXV0aGVudGljYXRlZCwgZXZlbnQudmFsdWUuZW1haWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRW1haWxDaGFuZ2UoZmFsc2UsICcnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlID09PSB1bmRlZmluZWQgJiYgZXZlbnQuYXV0aGVudGljYXRlZCAmJiBpZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZGVsZXRlQ29uc2lnbm1lbnQoaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGlua0F1dGhlbnRpY2F0aW9uRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cz8uZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5BVVRIRU5USUNBVElPTik/LnVubW91bnQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgU3RyaXBlU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlVVBFQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL3N0cmlwZS11cGUtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZVVQRUN1c3RvbWVyU3RyYXRlZ3ksIFt7IGlkOiAnc3RyaXBldXBlJyB9XSk7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgcGF5bWVudCBmbG93IGlzIGNhbmNlbGxlZC4gSXQgY291bGQgYmVcbiAqIGR1ZSB0byBhIGRlbGliZXJhdGUgdXNlciBpbnRlcmFjdGlvbiwgaS5lLjogdGhlIHVzZXIgY2xpY2tzIG9uIGEgY2FuY2VsXG4gKiBidXR0b24gd2hpY2ggZGlzbWlzc2VzIHRoZSBwYXltZW50IG1vZGFsLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1BheW1lbnQgcHJvY2VzcyB3YXMgY2FuY2VsbGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9jYW5jZWxsZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgcGF5bWVudCBtZXRob2QgZXhwZXJpZW5jZXMgc29tZSBraW5kIG9mXG4gKiBmYWlsdXJlIChpLmUuOiBpdHMgY2xpZW50IGxpYnJhcnkgcmV0dXJucyBhIHJlamVjdGVkIHByb21pc2UpLiBBbmQgdGhlcmUgaXNcbiAqIG5vIG90aGVyIGVycm9yIHR5cGUgdGhhdCBpcyBtb3JlIHNwZWNpZmljIHRoYW4gdGhpcyBvbmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaGFzIHRocm93biBhbiB1bmV4cGVjdGVkIGVycm9yLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RGYWlsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGluY2x1ZGVzLCBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBpc1N0cmlwZUVycm9yIH0gZnJvbSAnLi9pcy1zdHJpcGUtZXJyb3InO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzT3B0aW9ucyxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQsXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSxcbiAgICBTdHJpcGVFbGVtZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTdHJpcGVKc1ZlcnNpb24sXG4gICAgU3RyaXBlUGF5bWVudEludGVudFN0YXR1cyxcbiAgICBTdHJpcGVTdHJpbmdDb25zdGFudHMsXG59IGZyb20gJy4vc3RyaXBlJztcbmltcG9ydCBTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgZnJvbSAnLi9zdHJpcGUtaW5pdGlhbGl6ZS1vcHRpb25zJztcbmltcG9ydCBTdHJpcGVTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGUtc2NyaXB0LWxvYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUludGVncmF0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIGNoZWNrb3V0RXZlbnRzVW5zdWJzY3JpYmU/OiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBkZWluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZT8uKCk7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc3RyaXBlSW5pdGlhbGl6YXRpb25PcHRpb25zOiBTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudEVsZW1lbnQgPSBzdHJpcGVFbGVtZW50cz8uZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5UKTtcblxuICAgICAgICAgICAgICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQsIG1ldGhvZElkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRFbGVtZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlSW5pdGlhbGl6YXRpb25PcHRpb25zLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdHJpcGVFbGVtZW50cz8uZmV0Y2hVcGRhdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRFbGVtZW50KHBheW1lbnRFbGVtZW50LCBzdHJpcGVJbml0aWFsaXphdGlvbk9wdGlvbnMuY29udGFpbmVySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoc3RhdGUpID0+IHN0YXRlLmdldENoZWNrb3V0KCk/Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIChzdGF0ZSkgPT4gc3RhdGUuZ2V0Q2hlY2tvdXQoKT8uY291cG9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBtb3VudEVsZW1lbnQoc3RyaXBlRWxlbWVudDogU3RyaXBlRWxlbWVudCwgY29udGFpbmVySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXBBcHBlYXJhbmNlVmFyaWFibGVzKHN0eWxlczogTm9uTnVsbGFibGU8U3RyaXBlUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdHlsZSddPikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29sb3JQcmltYXJ5OiBzdHlsZXMuZmllbGRJbm5lclNoYWRvdyxcbiAgICAgICAgICAgIGNvbG9yQmFja2dyb3VuZDogc3R5bGVzLmZpZWxkQmFja2dyb3VuZCxcbiAgICAgICAgICAgIGNvbG9yVGV4dDogc3R5bGVzLmxhYmVsVGV4dCxcbiAgICAgICAgICAgIGNvbG9yRGFuZ2VyOiBzdHlsZXMuZmllbGRFcnJvclRleHQsXG4gICAgICAgICAgICBjb2xvclRleHRTZWNvbmRhcnk6IHN0eWxlcy5sYWJlbFRleHQsXG4gICAgICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcjogc3R5bGVzLmZpZWxkUGxhY2Vob2xkZXJUZXh0LFxuICAgICAgICAgICAgY29sb3JJY29uOiBzdHlsZXMuZmllbGRQbGFjZWhvbGRlclRleHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwSW5wdXRBcHBlYXJhbmNlUnVsZXMoc3R5bGVzOiBOb25OdWxsYWJsZTxTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N0eWxlJ10+KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib3JkZXJDb2xvcjogc3R5bGVzLmZpZWxkQm9yZGVyLFxuICAgICAgICAgICAgY29sb3I6IHN0eWxlcy5maWVsZFRleHQsXG4gICAgICAgICAgICBib3hTaGFkb3c6IHN0eWxlcy5maWVsZElubmVyU2hhZG93LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHRocm93U3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3I/OiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoaXNTdHJpcGVFcnJvcihzdHJpcGVFcnJvcikpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxsYXRpb25FcnJvcihzdHJpcGVFcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgfVxuXG4gICAgdGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpbmNsdWRlcyhbJ2NhcmRfZXJyb3InLCAnaW52YWxpZF9yZXF1ZXN0X2Vycm9yJywgJ3ZhbGlkYXRpb25fZXJyb3InXSwgc3RyaXBlRXJyb3IudHlwZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RyaXBlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0NhbmNlbGxhdGlvbkVycm9yKHN0cmlwZUVycm9yPzogU3RyaXBlRXJyb3IpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gc3RyaXBlRXJyb3I/LnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcj8ubWVzc2FnZTtcblxuICAgICAgICByZXR1cm4gISFlcnJvck1lc3NhZ2UgJiYgZXJyb3JNZXNzYWdlLmluZGV4T2YoJ2NhbmNlbGVkJykgIT09IC0xO1xuICAgIH1cblxuICAgIHRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCkge1xuICAgICAgICAvLyBJTkZPOiBmb3IgY2FzZSBpZiBwYXltZW50IHdhcyBzdWNjZXNzZnVsbHkgY29uZmlybWVkIG9uIFN0cmlwZSBzaWRlIGJ1dCBvbiBCQyBzaWRlIHNvbWV0aGluZyBnbyB3cm9uZywgcmVxdWVzdCBmYWlsZWQgYW5kIG9yZGVyIHN0YXR1cyBoYXNuJ3QgY2hhbmdlZCB5ZXRcbiAgICAgICAgLy8gRm9yIHNob3BwZXIgd2UgbmVlZCB0byBzaG93IGFkZGl0aW9uYWwgbWVzc2FnZSB0aGF0IEJDIGlzIHdhaXRpbmcgZm9yIHN0cmlwZSBjb25maXJtYXRpb24sIHRvIHByZXZlbnQgYWRkaXRpb25hbCBwYXltZW50IGNyZWF0aW9uXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICBcIldlJ3ZlIHJlY2VpdmVkIHlvdXIgb3JkZXIgYW5kIGFyZSBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudC4gT25jZSB0aGUgcGF5bWVudCBpcyB2ZXJpZmllZCwgeW91ciBvcmRlciB3aWxsIGJlIGNvbXBsZXRlZC4gV2Ugd2lsbCBzZW5kIHlvdSBhbiBlbWFpbCB3aGVuIGl0J3MgY29tcGxldGVkLiBQbGVhc2Ugbm90ZSwgdGhpcyBwcm9jZXNzIG1heSB0YWtlIGEgZmV3IG1pbnV0ZXMgZGVwZW5kaW5nIG9uIHRoZSBwcm9jZXNzaW5nIHRpbWVzIG9mIHlvdXIgY2hvc2VuIG1ldGhvZC5cIixcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBpc1BheW1lbnRDb21wbGV0ZWQobWV0aG9kSWQ6IHN0cmluZywgc3RyaXBlVVBFQ2xpZW50PzogU3RyaXBlQ2xpZW50KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgZmVhdHVyZXMgfSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4gfHxcbiAgICAgICAgICAgICFzdHJpcGVVUEVDbGllbnQgfHxcbiAgICAgICAgICAgICFmZWF0dXJlc1snUEktNjI2LkJsb2NrX3VubmVjZXNzYXJ5X3BheW1lbnRfY29uZmlybWF0aW9uX2Zvcl9TdHJpcGVVUEUnXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgc3RyaXBlVVBFQ2xpZW50LnJldHJpZXZlUGF5bWVudEludGVudChcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRJbnRlbnQ/LnN0YXR1cyA9PT0gU3RyaXBlUGF5bWVudEludGVudFN0YXR1cy5TVUNDRUVERUQ7XG4gICAgfVxuXG4gICAgbWFwU3RyaXBlUGF5bWVudERhdGEoXG4gICAgICAgIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHMsXG4gICAgICAgIHJldHVyblVybD86IHN0cmluZyxcbiAgICAgICAgc2hvdWxkQWxsb3dSZWRpc3BsYXkgPSBmYWxzZSxcbiAgICApOiBTdHJpcGVDb25maXJtUGF5bWVudERhdGEge1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lID0gJycsIGxhc3ROYW1lID0gJycsIGVtYWlsID0gJycgfSA9IGJpbGxpbmdBZGRyZXNzIHx8IHt9O1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5fbWFwU3RyaXBlQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZW1haWwgfHwgIWFkZHJlc3MgfHwgIWFkZHJlc3MuY2l0eSB8fCAhYWRkcmVzcy5jb3VudHJ5IHx8ICFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRzOiBzdHJpcGVFbGVtZW50cyxcbiAgICAgICAgICAgIHJlZGlyZWN0OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuSUZfUkVRVUlSRUQsXG4gICAgICAgICAgICBjb25maXJtUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2RfZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi4oc2hvdWxkQWxsb3dSZWRpc3BsYXkgPyB7IGFsbG93X3JlZGlzcGxheTogJ2Fsd2F5cycgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLihyZXR1cm5VcmwgJiYgeyByZXR1cm5fdXJsOiByZXR1cm5VcmwgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlzQWRkaXRpb25hbEFjdGlvbkVycm9yKGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmcgfT4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZXJyb3JzLCB7IGNvZGU6ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgaXNSZWRpcmVjdEFjdGlvbihhZGRpdGlvbmFsQWN0aW9uOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHsgcmVkaXJlY3RfdXJsIH0sXG4gICAgICAgIH0gPSBhZGRpdGlvbmFsQWN0aW9uO1xuXG4gICAgICAgIHJldHVybiB0eXBlID09PSAncmVkaXJlY3RfdG9fdXJsJyAmJiAhIXJlZGlyZWN0X3VybDtcbiAgICB9XG5cbiAgICBpc09uUGFnZUFkZGl0aW9uYWxBY3Rpb24oYWRkaXRpb25hbEFjdGlvbjogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7IHRva2VuIH0sXG4gICAgICAgIH0gPSBhZGRpdGlvbmFsQWN0aW9uO1xuXG4gICAgICAgIHJldHVybiB0eXBlID09PSAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZXNfcGF5bWVudF9tZXRob2QnICYmICEhdG9rZW47XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQ6IHN0cmluZywgbWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBJTkZPOiB0byB0cmlnZ2VyIHBheW1lbnQgaW50ZW50IHVwZGF0ZSBvbiB0aGUgQkUgc2lkZSB3ZSBuZWVkIHRvIG1ha2Ugc3RyaXBlIGNvbmZpZyByZXF1ZXN0XG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4gfSA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAvLyBJTkZPOiBubyBuZWVkIHRvIHVwZGF0ZSBTdHJpcGUgRWxlbWVudCBpZiBjbGllbnQgdG9rZW4gaXMgbm90IHByZXNlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NyaXB0TG9hZGVyLnVwZGF0ZVN0cmlwZUVsZW1lbnRzKHsgY2xpZW50U2VjcmV0OiBjbGllbnRUb2tlbiB9KTtcbiAgICB9XG5cbiAgICBnZXRTdHJpcGVKc1ZlcnNpb24oaW5pdGlhbGl6YXRpb25EYXRhOiBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEpOiBTdHJpcGVKc1ZlcnNpb24ge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25EYXRhLnVzZU5ld1N0cmlwZUpzVmVyc2lvblxuICAgICAgICAgICAgPyBTdHJpcGVKc1ZlcnNpb24uQ0xPVkVSXG4gICAgICAgICAgICA6IFN0cmlwZUpzVmVyc2lvbi5WMztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBTdHJpcGVBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogQWRkcmVzc09wdGlvbnMge1xuICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICAgICAgYWRkcmVzczEsXG4gICAgICAgICAgICAgICAgYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlLFxuICAgICAgICAgICAgfSA9IGFkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5LFxuICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGxpbmUxOiBhZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBsaW5lMjogYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgLi4uKHN0YXRlT3JQcm92aW5jZUNvZGUgPyB7IHN0YXRlOiBzdGF0ZU9yUHJvdmluY2VDb2RlIH0gOiB7fSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdHJpcGVFcnJvciB9IGZyb20gJy4vc3RyaXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaXBlRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBTdHJpcGVFcnJvciB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ3R5cGUnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHtcbiAgICBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzLFxuICAgIExvYWRpbmdJbmRpY2F0b3JTdHlsZXMsXG59IGZyb20gJy4vbG9hZGluZy1pbmRpY2F0b3Itc3R5bGVzJztcblxuY29uc3QgREVGQVVMVF9TVFlMRVM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXMgPSB7XG4gICAgc2l6ZTogNzAsXG4gICAgY29sb3I6ICcjZDlkOWQ5JyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMgPSB7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG5cbmNvbnN0IFJPVEFUSU9OX0FOSU1BVElPTiA9ICdlbWJlZGRlZC1jaGVja291dC1sb2FkaW5nLWluZGljYXRvci1yb3RhdGlvbic7XG5cbmludGVyZmFjZSBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucyB7XG4gICAgc3R5bGVzPzogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBjb250YWluZXJTdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nSW5kaWNhdG9yIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIHByaXZhdGUgY29udGFpbmVyU3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExvYWRpbmdJbmRpY2F0b3JPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3R5bGVzID0geyAuLi5ERUZBVUxUX1NUWUxFUywgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHlsZXMpIH07XG4gICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGVzID0geyAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLmNvbnRhaW5lclN0eWxlcykgfTtcblxuICAgICAgICB0aGlzLmRlZmluZUFuaW1hdGlvbigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5idWlsZENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmluZGljYXRvciA9IHRoaXMuYnVpbGRJbmRpY2F0b3IoKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmluZGljYXRvcik7XG4gICAgfVxuXG4gICAgc2hvdyhwYXJlbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocGFyZW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gYXR0YWNoIHRoZSBsb2FkaW5nIGluZGljYXRvciBiZWNhdXNlIHRoZSBwYXJlbnQgSUQgaXMgbm90IHZhbGlkLicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDI1MG1zIGVhc2Utb3V0JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZShjb250YWluZXIsIHRoaXMuY29udGFpbmVyU3R5bGVzKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbmRpY2F0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyQ29sb3IgPSBgJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfWA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9IGAke1JPVEFUSU9OX0FOSU1BVElPTn0gNTAwbXMgaW5maW5pdGUgY3ViaWMtYmV6aWVyKDAuNjksIDAuMzEsIDAuNTYsIDAuODMpYDtcblxuICAgICAgICByZXR1cm4gaW5kaWNhdG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KTogdm9pZCB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIGF0dHJzW2tdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWZpbmVBbmltYXRpb24oKTogdm9pZCB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGRlZmluZSBDU1MgYW5pbWF0aW9uLCB3ZSBuZWVkIHRvIGluc2VydCBhIHN0eWxlc2hlZXQgaW50byB0aGUgaG9zdCBmcmFtZS5cbiAgICAgICAgLy8gV2Ugb25seSBoYXZlIHRvIGRvIGl0IG9uY2UuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChST1RBVElPTl9BTklNQVRJT04pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgc3R5bGUuaWQgPSBST1RBVElPTl9BTklNQVRJT047XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgZG9jdW1lbnQuaGVhZD8uYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgIGlmIChzdHlsZS5zaGVldCBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgMm5kIHBhcmFtZXRlciBmb3IgSUUxMSwgZXZlbiB0aG91Z2ggaXQgaXNcbiAgICAgICAgICAgIC8vIDAgYnkgZGVmYXVsdCBmb3IgYWxsIG90aGVyIGJyb3dzZXJzLlxuICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyAke1JPVEFUSU9OX0FOSU1BVElPTn0ge1xuICAgICAgICAgICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1vdW50VHJhbnNmb3JtZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2RlY2ltYWxQbGFjZXM6IG51bWJlcikge31cblxuICAgIHRvSW50ZWdlcihhbW91bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGFtb3VudCAqIDEwICoqIHRoaXMuX2RlY2ltYWxQbGFjZXMpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBleHByZXNzQ2hlY2tvdXRBbGxvd2VkQ291bnRyeUNvZGVzID0gW1xuICAgICdBQycsXG4gICAgJ0FEJyxcbiAgICAnQUUnLFxuICAgICdBRicsXG4gICAgJ0FHJyxcbiAgICAnQUknLFxuICAgICdBTCcsXG4gICAgJ0FNJyxcbiAgICAnQU8nLFxuICAgICdBUScsXG4gICAgJ0FSJyxcbiAgICAnQVQnLFxuICAgICdBVScsXG4gICAgJ0FXJyxcbiAgICAnQVgnLFxuICAgICdBWicsXG4gICAgJ0JBJyxcbiAgICAnQkInLFxuICAgICdCRCcsXG4gICAgJ0JFJyxcbiAgICAnQkYnLFxuICAgICdCRycsXG4gICAgJ0JIJyxcbiAgICAnQkknLFxuICAgICdCSicsXG4gICAgJ0JMJyxcbiAgICAnQk0nLFxuICAgICdCTicsXG4gICAgJ0JPJyxcbiAgICAnQlEnLFxuICAgICdCUicsXG4gICAgJ0JTJyxcbiAgICAnQlQnLFxuICAgICdCVicsXG4gICAgJ0JXJyxcbiAgICAnQlknLFxuICAgICdCWicsXG4gICAgJ0NBJyxcbiAgICAnQ0QnLFxuICAgICdDRicsXG4gICAgJ0NHJyxcbiAgICAnQ0gnLFxuICAgICdDSScsXG4gICAgJ0NLJyxcbiAgICAnQ0wnLFxuICAgICdDTScsXG4gICAgJ0NOJyxcbiAgICAnQ08nLFxuICAgICdDUicsXG4gICAgJ0NWJyxcbiAgICAnQ1cnLFxuICAgICdDWScsXG4gICAgJ0NaJyxcbiAgICAnREUnLFxuICAgICdESicsXG4gICAgJ0RLJyxcbiAgICAnRE0nLFxuICAgICdETycsXG4gICAgJ0RaJyxcbiAgICAnRUMnLFxuICAgICdFRScsXG4gICAgJ0VHJyxcbiAgICAnRUgnLFxuICAgICdFUicsXG4gICAgJ0VTJyxcbiAgICAnRVQnLFxuICAgICdGSScsXG4gICAgJ0ZKJyxcbiAgICAnRksnLFxuICAgICdGTycsXG4gICAgJ0ZSJyxcbiAgICAnR0EnLFxuICAgICdHQicsXG4gICAgJ0dEJyxcbiAgICAnR0UnLFxuICAgICdHRicsXG4gICAgJ0dHJyxcbiAgICAnR0gnLFxuICAgICdHSScsXG4gICAgJ0dMJyxcbiAgICAnR00nLFxuICAgICdHTicsXG4gICAgJ0dQJyxcbiAgICAnR1EnLFxuICAgICdHUicsXG4gICAgJ0dTJyxcbiAgICAnR1QnLFxuICAgICdHVScsXG4gICAgJ0dXJyxcbiAgICAnR1knLFxuICAgICdISycsXG4gICAgJ0hOJyxcbiAgICAnSFInLFxuICAgICdIVCcsXG4gICAgJ0hVJyxcbiAgICAnSUQnLFxuICAgICdJRScsXG4gICAgJ0lMJyxcbiAgICAnSU0nLFxuICAgICdJTicsXG4gICAgJ0lPJyxcbiAgICAnSVEnLFxuICAgICdJUycsXG4gICAgJ0lUJyxcbiAgICAnSkUnLFxuICAgICdKTScsXG4gICAgJ0pPJyxcbiAgICAnSlAnLFxuICAgICdLRScsXG4gICAgJ0tHJyxcbiAgICAnS0gnLFxuICAgICdLSScsXG4gICAgJ0tNJyxcbiAgICAnS04nLFxuICAgICdLUicsXG4gICAgJ0tXJyxcbiAgICAnS1knLFxuICAgICdLWicsXG4gICAgJ0xBJyxcbiAgICAnTEInLFxuICAgICdMQycsXG4gICAgJ0xJJyxcbiAgICAnTEsnLFxuICAgICdMUicsXG4gICAgJ0xTJyxcbiAgICAnTFQnLFxuICAgICdMVScsXG4gICAgJ0xWJyxcbiAgICAnTFknLFxuICAgICdNQScsXG4gICAgJ01DJyxcbiAgICAnTUQnLFxuICAgICdNRScsXG4gICAgJ01GJyxcbiAgICAnTUcnLFxuICAgICdNSycsXG4gICAgJ01MJyxcbiAgICAnTU0nLFxuICAgICdNTicsXG4gICAgJ01PJyxcbiAgICAnTVEnLFxuICAgICdNUicsXG4gICAgJ01TJyxcbiAgICAnTVQnLFxuICAgICdNVScsXG4gICAgJ01WJyxcbiAgICAnTVcnLFxuICAgICdNWCcsXG4gICAgJ01ZJyxcbiAgICAnTVonLFxuICAgICdOQScsXG4gICAgJ05DJyxcbiAgICAnTkUnLFxuICAgICdORycsXG4gICAgJ05JJyxcbiAgICAnTkwnLFxuICAgICdOTycsXG4gICAgJ05QJyxcbiAgICAnTlInLFxuICAgICdOVScsXG4gICAgJ05aJyxcbiAgICAnT00nLFxuICAgICdQQScsXG4gICAgJ1BFJyxcbiAgICAnUEYnLFxuICAgICdQRycsXG4gICAgJ1BIJyxcbiAgICAnUEsnLFxuICAgICdQTCcsXG4gICAgJ1BNJyxcbiAgICAnUE4nLFxuICAgICdQUicsXG4gICAgJ1BTJyxcbiAgICAnUFQnLFxuICAgICdQWScsXG4gICAgJ1FBJyxcbiAgICAnUkUnLFxuICAgICdSTycsXG4gICAgJ1JTJyxcbiAgICAnUlUnLFxuICAgICdSVycsXG4gICAgJ1NBJyxcbiAgICAnU0InLFxuICAgICdTQycsXG4gICAgJ1NEJyxcbiAgICAnU0UnLFxuICAgICdTRycsXG4gICAgJ1NIJyxcbiAgICAnU0knLFxuICAgICdTSicsXG4gICAgJ1NLJyxcbiAgICAnU0wnLFxuICAgICdTTScsXG4gICAgJ1NOJyxcbiAgICAnU08nLFxuICAgICdTUicsXG4gICAgJ1NTJyxcbiAgICAnU1QnLFxuICAgICdTVicsXG4gICAgJ1NYJyxcbiAgICAnU1onLFxuICAgICdUQScsXG4gICAgJ1RDJyxcbiAgICAnVEQnLFxuICAgICdURicsXG4gICAgJ1RHJyxcbiAgICAnVEgnLFxuICAgICdUSicsXG4gICAgJ1RLJyxcbiAgICAnVEwnLFxuICAgICdUTScsXG4gICAgJ1ROJyxcbiAgICAnVE8nLFxuICAgICdUUicsXG4gICAgJ1RUJyxcbiAgICAnVFYnLFxuICAgICdUVycsXG4gICAgJ1RaJyxcbiAgICAnVUEnLFxuICAgICdVRycsXG4gICAgJ1VTJyxcbiAgICAnVVknLFxuICAgICdVWicsXG4gICAgJ1ZBJyxcbiAgICAnVkMnLFxuICAgICdWRScsXG4gICAgJ1ZHJyxcbiAgICAnVk4nLFxuICAgICdWVScsXG4gICAgJ1dGJyxcbiAgICAnV1MnLFxuICAgICdYSycsXG4gICAgJ1lFJyxcbiAgICAnWVQnLFxuICAgICdaQScsXG4gICAgJ1pNJyxcbiAgICAnWlcnLFxuICAgICdaWicsXG5dO1xuIiwiaW1wb3J0IHsgcm91bmQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFtb3VudFRyYW5zZm9ybWVyLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgU2hpcHBpbmdPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCxcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlTGlua1YyRXZlbnQsXG4gICAgU3RyaXBlTGlua1YyT3B0aW9ucyxcbiAgICBTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGUsXG4gICAgU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgU3RyaXBlUmVzdWx0LFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICBTdHJpcGVTdHJpbmdDb25zdGFudHMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgZXhwcmVzc0NoZWNrb3V0QWxsb3dlZENvdW50cnlDb2RlcyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFdpdGhTdHJpcGVPQ1NDdXN0b21lckluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGUtb2NzLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIF9zdHJpcGVDbGllbnQ/OiBTdHJpcGVDbGllbnQ7XG4gICAgcHJpdmF0ZSBfc3RyaXBlRWxlbWVudHM/OiBTdHJpcGVFbGVtZW50cztcbiAgICBwcml2YXRlIF9saW5rVjJFbGVtZW50PzogU3RyaXBlRWxlbWVudDtcbiAgICBwcml2YXRlIF9hbW91bnRUcmFuc2Zvcm1lcj86IEFtb3VudFRyYW5zZm9ybWVyO1xuICAgIHByaXZhdGUgX29uQ29tcGxldGU/OiAob3JkZXJJZD86IG51bWJlcikgPT4gUHJvbWlzZTxuZXZlcj47XG4gICAgcHJpdmF0ZSBfbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIF9jYXB0dXJlTWV0aG9kPzogJ2F1dG9tYXRpYycgfCAnbWFudWFsJztcbiAgICBwcml2YXRlIF9jdXJyZW5jeUNvZGU/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZUludGVncmF0aW9uU2VydmljZTogU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhTdHJpcGVPQ1NDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHN0cmlwZW9jcyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIXN0cmlwZW9jcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9uc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGdhdGV3YXlJZCwgY29udGFpbmVyIH0gPSBzdHJpcGVvY3M7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIgfHwgIW1ldGhvZElkIHx8ICFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgIHBhcmFtczogeyBtZXRob2Q6IG1ldGhvZElkIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIGNvbnN0IHsgbG9hZGluZ0NvbnRhaW5lcklkLCBidXR0b25IZWlnaHQsIG9uQ29tcGxldGUgfSA9IHN0cmlwZW9jcztcblxuICAgICAgICB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gbG9hZGluZ0NvbnRhaW5lcklkO1xuXG4gICAgICAgIHRoaXMuX29uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuXG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZShwYXltZW50TWV0aG9kKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG4gICAgICAgIGNvbnN0IHsgY2FwdHVyZU1ldGhvZCB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVKc1ZlcnNpb24gPVxuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RyaXBlSnNWZXJzaW9uKGluaXRpYWxpemF0aW9uRGF0YSk7XG5cbiAgICAgICAgdGhpcy5fY2FwdHVyZU1ldGhvZCA9IGNhcHR1cmVNZXRob2Q7XG4gICAgICAgIHRoaXMuX3N0cmlwZUNsaWVudCA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRMb2NhbGUoKSxcbiAgICAgICAgICAgIHN0cmlwZUpzVmVyc2lvbixcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoY29udGFpbmVyLCB0aGlzLl9zdHJpcGVDbGllbnQsIGJ1dHRvbkhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZCk7XG4gICAgfVxuXG4gICAgc2lnbkluKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc2lnbk91dCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoXG4gICAgICAgIGNvbnRhaW5lcjogc3RyaW5nLFxuICAgICAgICBzdHJpcGVFeHByZXNzQ2hlY2tvdXRDbGllbnQ6IFN0cmlwZUNsaWVudCxcbiAgICAgICAgYnV0dG9uSGVpZ2h0ID0gNDAsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MgPSB0aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGV4cHJlc3NDaGVja291dE9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOiBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgLi4uKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA/IHsgYWxsb3dlZFNoaXBwaW5nQ291bnRyaWVzOiBhd2FpdCB0aGlzLl9nZXRBdmFpbGFibGVDb3VudHJpZXMoKSB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAuLi4oc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgID8geyBzaGlwcGluZ1JhdGVzOiBbeyBpZDogJ18nLCBhbW91bnQ6IDAsIGRpc3BsYXlOYW1lOiAnUGVuZGluZyByYXRlcycgfV0gfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlclJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZHM6IHtcbiAgICAgICAgICAgICAgICBsaW5rOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICBhcHBsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGFtYXpvblBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIHBheXBhbDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGtsYXJuYTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIE1pbmltYWwgYnV0dG9uSGVpZ2h0IHZhbHVlIGlzIDQwXG4gICAgICAgICAgICBidXR0b25IZWlnaHQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgeyBjYXJ0QW1vdW50IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzT3B0aW9uczogU3RyaXBlTGlua1YyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1vZGU6ICdwYXltZW50JyxcbiAgICAgICAgICAgIGFtb3VudDogdGhpcy5fdG9DZW50cyhjYXJ0QW1vdW50KSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLl9nZXRDdXJyZW5jeSgpLFxuICAgICAgICAgICAgLi4uKHRoaXMuX2NhcHR1cmVNZXRob2QgPyB7IGNhcHR1cmVNZXRob2Q6IHRoaXMuX2NhcHR1cmVNZXRob2QgfSA6IHt9KSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IHN0cmlwZUV4cHJlc3NDaGVja291dENsaWVudC5lbGVtZW50cyhlbGVtZW50c09wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuX2xpbmtWMkVsZW1lbnQgPSB0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoXG4gICAgICAgICAgICBTdHJpcGVFbGVtZW50VHlwZS5FWFBSRVNTX0NIRUNLT1VULFxuICAgICAgICAgICAgZXhwcmVzc0NoZWNrb3V0T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVyfWApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9saW5rVjJFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKiBFdmVudHMgKiAqL1xuXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fbGlua1YyRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBpZiAoc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfQUREUkVTU19DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfUkFURV9DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ09ORklSTSwgYXN5bmMgKGV2ZW50KSA9PlxuICAgICAgICAgICAgdGhpcy5fb25Db25maXJtKGV2ZW50LCBtZXRob2RJZCksXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ0FOQ0VMLCB0aGlzLl9vbkNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoISgnYWRkcmVzcycgaW4gZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBldmVudC5hZGRyZXNzO1xuICAgICAgICAvLyBEZXBlbmRpbmcgb24gdGhlIGNvdW50cnksIHNvbWUgZmllbGRzIGNhbiBiZSBtaXNzaW5nIG9yIHBhcnRpYWxseSByZWRhY3RlZC5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBzaGlwcGluZyBhZGRyZXNzIGluIHRoZSBVUyBjYW4gb25seSBjb250YWluIGEgY2l0eSwgc3RhdGUsIGFuZCBaSVAgY29kZS5cbiAgICAgICAgLy8gVGhlIGZ1bGwgc2hpcHBpbmcgYWRkcmVzcyBhcHBlYXJzIGluIHRoZSBjb25maXJtIGV2ZW50IG9iamVjdCBhZnRlciB0aGUgcHVyY2hhc2UgaXMgY29uZmlybWVkIGluIHRoZSBicm93c2Vy4oCZcyBwYXltZW50IGludGVyZmFjZS5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHJlc3VsdCk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdSYXRlcyA9IGF3YWl0IHRoaXMuX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZURpc3BsYXllZFByaWNlKCk7XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ1JhdGVzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGV2ZW50LnJlamVjdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgc2hpcHBpbmdSYXRlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25DYW5jZWwoKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudDogU3RyaXBlRXZlbnRUeXBlKSB7XG4gICAgICAgIGlmICgnc2hpcHBpbmdSYXRlJyBpbiBldmVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBzaGlwcGluZ1JhdGUgfSA9IGV2ZW50O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShzaGlwcGluZ1JhdGU/LmlkKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlRGlzcGxheWVkUHJpY2UoKTtcblxuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7fSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29uZmlybSBtZXRob2RzICogKi9cbiAgICBwcml2YXRlIGFzeW5jIF9vbkNvbmZpcm0oZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSwgbWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAnYmlsbGluZ0RldGFpbHMnIGluIGV2ZW50ICYmXG4gICAgICAgICAgICAnc2hpcHBpbmdBZGRyZXNzJyBpbiBldmVudCAmJlxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlQ2xpZW50ICYmXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50c1xuICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3MoZXZlbnQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZXJyb3IsIG1ldGhvZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF91cGRhdGVTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzKGV2ZW50OiBTdHJpcGVMaW5rVjJFdmVudCkge1xuICAgICAgICBjb25zdCBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9XG4gICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3M/Lm5hbWU/LnNwbGl0KCcgJylbMF0gfHxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzPy5uYW1lPy5zcGxpdCgnICcpWzBdIHx8XG4gICAgICAgICAgICAnJztcbiAgICAgICAgY29uc3QgbGFzdE5hbWUgPVxuICAgICAgICAgICAgZXZlbnQuc2hpcHBpbmdBZGRyZXNzPy5uYW1lPy5zcGxpdCgnICcpWzFdIHx8XG4gICAgICAgICAgICBldmVudC5iaWxsaW5nRGV0YWlscz8ubmFtZT8uc3BsaXQoJyAnKVsxXSB8fFxuICAgICAgICAgICAgJyc7XG5cbiAgICAgICAgaWYgKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX21hcFNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgZXZlbnQuYmlsbGluZ0RldGFpbHMsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgICAgIGV2ZW50LnNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczogU3RyaXBlTGlua1YyRXZlbnRbJ3NoaXBwaW5nQWRkcmVzcyddLFxuICAgICAgICBiaWxsaW5nRGV0YWlsczogU3RyaXBlTGlua1YyRXZlbnRbJ2JpbGxpbmdEZXRhaWxzJ10sXG4gICAgICAgIGZpcnN0TmFtZTogc3RyaW5nLFxuICAgICAgICBsYXN0TmFtZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5saW5lMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LmxpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBTdHJpcGVMaW5rVjJFdmVudFsnc2hpcHBpbmdBZGRyZXNzJ10sXG4gICAgICAgIGJpbGxpbmdEZXRhaWxzOiBTdHJpcGVMaW5rVjJFdmVudFsnYmlsbGluZ0RldGFpbHMnXSxcbiAgICAgICAgZmlyc3ROYW1lOiBzdHJpbmcsXG4gICAgICAgIGxhc3ROYW1lOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbWFpbDogYmlsbGluZ0RldGFpbHM/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmxpbmUxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNvdW50cnkgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGJpbGxpbmdEZXRhaWxzPy5hZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yOiB1bmtub3duLCBtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICF0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlcnJvci5ib2R5LmVycm9ycylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fc3RyaXBlQ2xpZW50IHx8ICF0aGlzLl9zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWRkaXRpb25hbEFjdGlvbkRhdGEgfSA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkRhdGEsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBwYXltZW50SW50ZW50Py5pZCB8fCB0b2tlbik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jb21wbGV0ZUNoZWNrb3V0RmxvdygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dQYXltZW50Q29uZmlybWF0aW9uUHJvY2VlZE1lc3NhZ2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YTogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkWydkYXRhJ10sXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQgfCBuZXZlcj4ge1xuICAgICAgICBjb25zdCB7IHRva2VuLCByZWRpcmVjdF91cmwgfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50RGF0YSA9IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMsXG4gICAgICAgICAgICByZWRpcmVjdF91cmwsXG4gICAgICAgICk7XG4gICAgICAgIGxldCBzdHJpcGVFcnJvcjogU3RyaXBlRXJyb3IgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlzUGF5bWVudENvbXBsZXRlZCA9IGF3YWl0IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzUGF5bWVudENvbXBsZXRlZChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJpcGVDbGllbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSAhaXNQYXltZW50Q29tcGxldGVkXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLl9zdHJpcGVDbGllbnQ/LmNvbmZpcm1QYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogc3RyaXBlUGF5bWVudERhdGEuZWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLklGX1JFUVVJUkVELFxuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1QYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX3VybDogc3RyaXBlUGF5bWVudERhdGEuY29uZmlybVBhcmFtcz8ucmV0dXJuX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IHRoaXMuX3N0cmlwZUNsaWVudD8ucmV0cmlldmVQYXltZW50SW50ZW50KHRva2VuIHx8ICcnKTtcblxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgPSBjb25maXJtYXRpb25SZXN1bHQ/LmVycm9yO1xuXG4gICAgICAgICAgICBpZiAoc3RyaXBlRXJyb3IgfHwgIWNvbmZpcm1hdGlvblJlc3VsdD8ucGF5bWVudEludGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvblJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2NvbXBsZXRlQ2hlY2tvdXRGbG93KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX29uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL29yZGVyLWNvbmZpcm1hdGlvbicpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50UGF5bG9hZChtZXRob2RJZDogc3RyaW5nLCB0b2tlbj86IHN0cmluZyk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmlkIHx8ICcnO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgY2FydF9pZDogY2FydElkLFxuICAgICAgICAgICAgLi4uKHRva2VuID8geyBjcmVkaXRfY2FyZF90b2tlbjogeyB0b2tlbiB9IH0gOiB7fSksXG4gICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGhvZDogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuTGluayxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKiBVdGlscyAqICovXG5cbiAgICBwcml2YXRlIF9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCkge1xuICAgICAgICBjb25zdCB7IGdldENhcnRPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBsaW5lSXRlbXMgfSA9IGdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuICEhbGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3VwZGF0ZURpc3BsYXllZFByaWNlKCkge1xuICAgICAgICBpZiAodGhpcy5fc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IHRoaXMuX2dldEN1cnJlbmN5KCksXG4gICAgICAgICAgICAgICAgbW9kZTogJ3BheW1lbnQnLFxuICAgICAgICAgICAgICAgIGFtb3VudDogYXdhaXQgdGhpcy5fZ2V0VG90YWxQcmljZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRDdXJyZW5jeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29kZTogY3VycmVuY3lDb2RlIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgIC5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5O1xuXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW5jeUNvZGUgPSBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW5jeUNvZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0VG90YWxQcmljZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRDaGVja291dE9yVGhyb3csIGdldENhcnRPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBkZWNpbWFsUGxhY2VzIH0gPSBnZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5O1xuICAgICAgICBjb25zdCB0b3RhbFByaWNlID0gcm91bmQoZ2V0Q2hlY2tvdXRPclRocm93KCkub3V0c3RhbmRpbmdCYWxhbmNlLCBkZWNpbWFsUGxhY2VzKS50b0ZpeGVkKFxuICAgICAgICAgICAgZGVjaW1hbFBsYWNlcyxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdG9DZW50cygrdG90YWxQcmljZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0QXZhaWxhYmxlQ291bnRyaWVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgY291bnRyaWVzID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRTaGlwcGluZ0NvdW50cmllcygpO1xuICAgICAgICBjb25zdCBkZWxpdmVyYWJsZUNvdW50cmllcyA9XG4gICAgICAgICAgICBjb3VudHJpZXMuZ2V0U2hpcHBpbmdDb3VudHJpZXMoKT8ubWFwKChjb3VudHJ5KSA9PiBjb3VudHJ5LmNvZGUpIHx8IFtdO1xuXG4gICAgICAgIHJldHVybiBkZWxpdmVyYWJsZUNvdW50cmllcy5maWx0ZXIoKGNvZGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBleHByZXNzQ2hlY2tvdXRBbGxvd2VkQ291bnRyeUNvZGVzLmluY2x1ZGVzKGNvZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9nZXRBdmFpbGFibGVTaGlwcGluZ09wdGlvbnMoKTogUHJvbWlzZTxTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGVbXSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudHMgPSBzdGF0ZS5nZXRDb25zaWdubWVudHMoKTtcblxuICAgICAgICBpZiAoIWNvbnNpZ25tZW50cz8uWzBdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IGNvbnNpZ25tZW50c1swXTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IChjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW10pLm1hcChcbiAgICAgICAgICAgIHRoaXMuX2dldFN0cmlwZVNoaXBwaW5nT3B0aW9uLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnM/LmZpbmQoXG4gICAgICAgICAgICAoc2hpcHBpbmdPcHRpb24pID0+IHNoaXBwaW5nT3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSWQgPSBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uPy5pZDtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRJZCA9IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24/LmlkO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZElkKSB7XG4gICAgICAgICAgICAvLyBTZXQgc2VsZWN0ZWQgc2hpcHBpbmcgb3B0aW9uIGZpcnN0IGluIHRoZSBhcnJheSwgYXMgaXQgd2lsbCBiZSBzZWxlY3RlZCBieSBkZWZhdWx0XG4gICAgICAgICAgICBvcHRpb25zLnNvcnQoKG9wdGlvbikgPT4gKG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRJZCA/IC0xIDogMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY29tbWVuZGVkSWQpIHtcbiAgICAgICAgICAgIC8vIFNldCByZWNvbW1lbmRlZCBzaGlwcGluZyBvcHRpb24gZmlyc3QgaW4gdGhlIGFycmF5LCBhcyBpdCB3aWxsIGJlIHNlbGVjdGVkIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIG9wdGlvbnMuc29ydCgob3B0aW9uKSA9PiAob3B0aW9uLmlkID09PSByZWNvbW1lbmRlZElkID8gLTEgOiAwKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShyZWNvbW1lbmRlZElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKG9wdGlvbnNbMF0/LmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFN0cmlwZVNoaXBwaW5nT3B0aW9uKHsgaWQsIGNvc3QsIGRlc2NyaXB0aW9uIH06IFNoaXBwaW5nT3B0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGFtb3VudDogdGhpcy5fdG9DZW50cyhjb3N0KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShvcHRpb25JZD86IHN0cmluZykge1xuICAgICAgICBpZiAoIW9wdGlvbklkIHx8IG9wdGlvbklkID09PSAnc2hpcHBpbmdfb3B0aW9uX3Vuc2VsZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKG9wdGlvbklkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRBbW91bnRUcmFuc2Zvcm1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Ftb3VudFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYW1vdW50VHJhbnNmb3JtZXI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGdldENhcnQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5IH0gPSBnZXRDYXJ0KCkgfHwge307XG5cbiAgICAgICAgaWYgKGN1cnJlbmN5KSB7XG4gICAgICAgICAgICBjb25zdCBhbW91bnRUcmFuc2Zvcm1lciA9IG5ldyBBbW91bnRUcmFuc2Zvcm1lcihjdXJyZW5jeS5kZWNpbWFsUGxhY2VzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFtb3VudFRyYW5zZm9ybWVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdG9DZW50cyhhbW91bnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBmYWxsYmFja1ZhbHVlID0gTWF0aC5yb3VuZChhbW91bnQgKiAxMDApO1xuICAgICAgICBjb25zdCBhbW91bnRUcmFuc2Zvcm1lciA9IHRoaXMuX2dldEFtb3VudFRyYW5zZm9ybWVyKCk7XG5cbiAgICAgICAgaWYgKGFtb3VudFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gYW1vdW50VHJhbnNmb3JtZXIudG9JbnRlZ2VyKGFtb3VudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsbGJhY2tWYWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF90b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMsIExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9zdHJpcGUtbGluay12Mi1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcbiAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICBjb250YWluZXJTdHlsZXM6IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyxcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlTGlua1YyQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgc3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBuZXcgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsIHN0cmlwZVNjcmlwdExvYWRlciksXG4gICAgICAgIGxvYWRpbmdJbmRpY2F0b3IsXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVTdHJpcGVMaW5rVjJDdXN0b21lclN0cmF0ZWd5LCBbeyBpZDogJ3N0cmlwZW9jcycgfV0pO1xuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICBpbnN0cnVtZW50OiB1bmtub3duLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgaW5zdHJ1bWVudCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5zdHJ1bWVudCAhPT0gbnVsbCAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGV2Myc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyhcbiAgICBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zOiBhbnksXG4pOiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIGlzIEluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMge1xuICAgIHJldHVybiAoXG4gICAgICAgIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgPT09ICdvYmplY3QnICYmXG4gICAgICAgICdjYXJkTnVtYmVyRWxlbWVudE9wdGlvbnMnIGluIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgJiZcbiAgICAgICAgJ2NhcmRDdmNFbGVtZW50T3B0aW9ucycgaW4gaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyAmJlxuICAgICAgICAnY2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zJyBpbiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zICYmXG4gICAgICAgIHR5cGVvZiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zLmNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMuY2FyZEN2Y0VsZW1lbnRPcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucy5jYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnMgIT09ICd1bmRlZmluZWQnXG4gICAgKTtcbn1cbiIsImludGVyZmFjZSBCYXNlRWxlbWVudE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEN1c3RvbWl6ZSB0aGUgYXBwZWFyYW5jZSBvZiBhbiBlbGVtZW50IHVzaW5nIENTUyBwcm9wZXJ0aWVzIHBhc3NlZCBpbiBhIFtTdHlsZV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvYXBwZW5kaXgvc3R5bGUpIG9iamVjdCxcbiAgICAgKiB3aGljaCBjb25zaXN0cyBvZiBDU1MgcHJvcGVydGllcyBuZXN0ZWQgdW5kZXIgb2JqZWN0cyBmb3IgZWFjaCB2YXJpYW50LlxuICAgICAqL1xuICAgIHN0eWxlPzogU3RyaXBlRWxlbWVudFN0eWxlO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGN1c3RvbSBjbGFzcyBuYW1lcyBvbiB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHdoZW4gdGhlIFN0cmlwZSBlbGVtZW50IGlzIGluIGEgcGFydGljdWxhciBzdGF0ZS5cbiAgICAgKi9cbiAgICBjbGFzc2VzPzogU3RyaXBlRWxlbWVudENsYXNzZXM7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgZGlzYWJsZWQgc3RhdGUgdG8gdGhlIEVsZW1lbnQgc3VjaCB0aGF0IHVzZXIgaW5wdXQgaXMgbm90IGFjY2VwdGVkLiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqL1xuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVQYXltZW50TWV0aG9kQ2FyZERhdGEgZXh0ZW5kcyBQYXltZW50TWV0aG9kQ3JlYXRlUGFyYW1zIHtcbiAgICBjYXJkPzogU3RyaXBlRWxlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVQYXltZW50TWV0aG9kSWRlYWxEYXRhIGV4dGVuZHMgUGF5bWVudE1ldGhvZENyZWF0ZVBhcmFtcyB7XG4gICAgaWRlYWw/OiBTdHJpcGVFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVBheW1lbnRNZXRob2RTZXBhRGF0YSBleHRlbmRzIFBheW1lbnRNZXRob2RDcmVhdGVQYXJhbXMge1xuICAgIHNlcGFfZGViaXQ/OiBTdHJpcGVFbGVtZW50O1xufVxuXG4vKipcbiAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW50ZW50IHtcbiAgICAvKipcbiAgICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBpZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU3RhdHVzIG9mIHRoaXMgUGF5bWVudEludGVudC4gUmVhZCBtb3JlIGFib3V0IGVhY2ggUGF5bWVudEludGVudCBbc3RhdHVzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9pbnRlbnRzI2ludGVudC1zdGF0dXNlcykuXG4gICAgICovXG4gICAgc3RhdHVzOiAnc3VjY2VlZGVkJyB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXltZW50IGVycm9yIGVuY291bnRlcmVkIGluIHRoZSBwcmV2aW91cyBQYXltZW50SW50ZW50IGNvbmZpcm1hdGlvbi4gSXQgd2lsbCBiZSBjbGVhcmVkIGlmIHRoZSBQYXltZW50SW50ZW50IGlzIGxhdGVyIHVwZGF0ZWQgZm9yIGFueSByZWFzb24uXG4gICAgICovXG4gICAgbGFzdF9wYXltZW50X2Vycm9yOiBMYXN0UGF5bWVudEVycm9yIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGUgcGF5bWVudCBlcnJvciBlbmNvdW50ZXJlZCBpbiB0aGUgcHJldmlvdXMgUGF5bWVudEludGVudCBjb25maXJtYXRpb24uIEl0IHdpbGwgYmUgY2xlYXJlZCBpZiB0aGUgUGF5bWVudEludGVudCBpcyBsYXRlciB1cGRhdGVkIGZvciBhbnkgcmVhc29uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExhc3RQYXltZW50RXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgbWVzc2FnZSBwcm92aWRpbmcgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBlcnJvci4gRm9yIGNhcmQgZXJyb3JzLCB0aGVzZSBtZXNzYWdlcyBjYW4gYmUgc2hvd24gdG8geW91ciB1c2Vycy5cbiAgICAgKi9cbiAgICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBQYXltZW50TWV0aG9kIG9iamVjdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2Qge1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGlkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgUGF5bWVudE1ldGhvZC4gQW4gYWRkaXRpb25hbCBoYXNoIGlzIGluY2x1ZGVkIG9uIHRoZSBQYXltZW50TWV0aG9kIHdpdGggYSBuYW1lIG1hdGNoaW5nIHRoaXMgdmFsdWUuXG4gICAgICogSXQgY29udGFpbnMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBzcGVjaWZpYyB0byB0aGUgUGF5bWVudE1ldGhvZCB0eXBlLlxuICAgICAqL1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50TWV0aG9kQ3JlYXRlUGFyYW1zIHtcbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIGluZm9ybWF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgUGF5bWVudE1ldGhvZCB0aGF0IG1heSBiZSB1c2VkIG9yIHJlcXVpcmVkIGJ5IHBhcnRpY3VsYXIgdHlwZXMgb2YgcGF5bWVudCBtZXRob2RzLlxuICAgICAqL1xuICAgIGJpbGxpbmdfZGV0YWlscz86IFN0cmlwZUJpbGxpbmdEZXRhaWxzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVycm9yIHtcbiAgICAvKipcbiAgICAgKiBBIGh1bWFuLXJlYWRhYmxlIG1lc3NhZ2UgcHJvdmlkaW5nIG1vcmUgZGV0YWlscyBhYm91dCB0aGUgZXJyb3IuIEZvciBjYXJkIGVycm9ycywgdGhlc2UgbWVzc2FnZXMgY2FuIGJlIHNob3duIHRvIHlvdXIgdXNlcnMuXG4gICAgICovXG4gICAgbWVzc2FnZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAgICAgKi9cbiAgICBwYXltZW50X2ludGVudDogUGF5bWVudEludGVudDtcblxuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgY29kZSBmb3IgdGhlIGVycm9yIG9idGFpbmVkXG4gICAgICovXG4gICAgY29kZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDU1MgcHJvcGVydGllcyBzdXBwb3J0ZWQgYnkgU3RyaXBlLmpzLlxuICovXG5pbnRlcmZhY2UgU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBbYmFja2dyb3VuZC1jb2xvcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2JhY2tncm91bmQtY29sb3IpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcGVydHkgd29ya3MgYmVzdCB3aXRoIHRoZSBgOjpzZWxlY3Rpb25gIHBzZXVkby1jbGFzcy5cbiAgICAgKiBJbiBvdGhlciBjYXNlcywgY29uc2lkZXIgc2V0dGluZyB0aGUgYmFja2dyb3VuZCBjb2xvciBvbiB0aGUgZWxlbWVudCdzIGNvbnRhaW5lciBpbnN0YWVkLlxuICAgICAqL1xuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbY29sb3JdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9jb2xvcikgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGNvbG9yPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtmb250LWZhbWlseV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2ZvbnQtZmFtaWx5KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udEZhbWlseT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbZm9udC1zaXplXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zaXplKSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2ZvbnQtc21vb3RoaW5nXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zbW9vdGhpbmcpIENTUyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBmb250U21vb3RoaW5nPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtmb250LXN0eWxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zdHlsZSkgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGZvbnRTdHlsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbZm9udC12YXJpYW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC12YXJpYW50KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udFZhcmlhbnQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2ZvbnQtd2VpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQpIENTUyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBmb250V2VpZ2h0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gcHJvcGVydHksIHVzZWQgdG8gc2V0IHRoZSBjb2xvciBvZiB0aGUgaWNvbnMgdGhhdCBhcmUgcmVuZGVyZWQgaW4gYW4gZWxlbWVudC5cbiAgICAgKi9cbiAgICBpY29uQ29sb3I/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2xpbmUtaGVpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvbGluZS1oZWlnaHQpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRvIGF2b2lkIGN1cnNvcnMgYmVpbmcgcmVuZGVyZWQgaW5jb25zaXN0ZW50bHkgYWNyb3NzIGJyb3dzZXJzLCBjb25zaWRlciB1c2luZyBhIHBhZGRpbmcgb24gdGhlIGVsZW1lbnQncyBjb250YWluZXIgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBsaW5lSGVpZ2h0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtsZXR0ZXItc3BhY2luZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2xldHRlci1zcGFjaW5nKSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgbGV0dGVyU3BhY2luZz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbdGV4dC1hbGlnbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtYWxpZ24pIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEF2YWlsYWJsZSBmb3IgdGhlIGBjYXJkTnVtYmVyYCwgYGNhcmRFeHBpcnlgLCBhbmQgYGNhcmRDdmNgIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIHRleHRBbGlnbj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbcGFkZGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEF2YWlsYWJsZSBmb3IgdGhlIGBpZGVhbEJhbmtgIGVsZW1lbnQuXG4gICAgICogQWNjZXB0cyBpbnRlZ2VyIGBweGAgdmFsdWVzLlxuICAgICAqL1xuICAgIHBhZGRpbmc/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW3RleHQtZGVjb3JhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtZGVjb3JhdGlvbikgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHRleHREZWNvcmF0aW9uPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFt0ZXh0LXNoYWRvd10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtc2hhZG93KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgdGV4dFNoYWRvdz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbdGV4dC10cmFuc2Zvcm1dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy90ZXh0LXRyYW5zZm9ybSkgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHRleHRUcmFuc2Zvcm0/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdHJpcGVFbGVtZW50U3R5bGVWYXJpYW50IGV4dGVuZHMgU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMge1xuICAgICc6aG92ZXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOmZvY3VzJz86IFN0cmlwZUVsZW1lbnRDU1NQcm9wZXJ0aWVzO1xuXG4gICAgJzo6cGxhY2Vob2xkZXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOjpzZWxlY3Rpb24nPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOi13ZWJraXQtYXV0b2ZpbGwnPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBBdmFpbGFibGUgZm9yIGFsbCBlbGVtZW50cyBleGNlcHQgdGhlIGBwYXltZW50UmVxdWVzdEJ1dHRvbmAgZWxlbWVudFxuICAgICAqL1xuICAgICc6ZGlzYWJsZWQnPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBBdmFpbGFibGUgZm9yIHRoZSBgY2FyZE51bWJlcmAsIGBjYXJkRXhwaXJ5YCwgYW5kIGBjYXJkQ3ZjYCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICAnOjotbXMtY2xlYXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMgJiB7IGRpc3BsYXk6IHN0cmluZyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VFbGVtZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQSBwcmUtZmlsbGVkIHNldCBvZiB2YWx1ZXMgdG8gaW5jbHVkZSBpbiB0aGUgaW5wdXQgKGUuZy4sIHtwb3N0YWxDb2RlOiAnOTQxMTAnfSkuXG4gICAgICogTm90ZSB0aGF0IHNlbnNpdGl2ZSBjYXJkIGluZm9ybWF0aW9uIChjYXJkIG51bWJlciwgQ1ZDLCBhbmQgZXhwaXJhdGlvbiBkYXRlKVxuICAgICAqIGNhbm5vdCBiZSBwcmUtZmlsbGVkXG4gICAgICovXG4gICAgdmFsdWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBwb3N0YWwgY29kZSBmaWVsZC4gRGVmYXVsdCBpcyBmYWxzZS4gSWYgeW91IGFyZSBhbHJlYWR5IGNvbGxlY3RpbmcgYVxuICAgICAqIGZ1bGwgYmlsbGluZyBhZGRyZXNzIG9yIHBvc3RhbCBjb2RlIGVsc2V3aGVyZSwgc2V0IHRoaXMgdG8gdHJ1ZS5cbiAgICAgKi9cbiAgICBoaWRlUG9zdGFsQ29kZT86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LlxuICAgICAqL1xuICAgIGljb25TdHlsZT86IEljb25TdHlsZTtcblxuICAgIC8qXG4gICAgICogSGlkZXMgdGhlIGljb24gaW4gdGhlIEVsZW1lbnQsIERlZmF1bHQgaXMgZmFsc2VcbiAgICAgKi9cbiAgICBoaWRlSWNvbj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBCYXNlSW5kaXZpZHVhbEVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUVsZW1lbnRPcHRpb25zIHtcbiAgICBjb250YWluZXJJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmROdW1iZXJFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VJbmRpdmlkdWFsRWxlbWVudE9wdGlvbnMge1xuICAgIC8qXG4gICAgICogUGxhY2Vob2xkZXJcbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcblxuICAgIHNob3dJY29uPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LiBFaXRoZXIgYHNvbGlkYCBvciBgZGVmYXVsdGBcbiAgICAgKi9cbiAgICBpY29uU3R5bGU/OiBJY29uU3R5bGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUluZGl2aWR1YWxFbGVtZW50T3B0aW9ucyB7XG4gICAgLypcbiAgICAgKiBQbGFjZWhvbGRlclxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRDdmNFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VJbmRpdmlkdWFsRWxlbWVudE9wdGlvbnMge1xuICAgIC8qXG4gICAgICogUGxhY2Vob2xkZXJcbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJYmFuRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBCYXNlRWxlbWVudE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIGxpc3Qgb2YgY291bnRyaWVzIG9yIGNvdW50cnktZ3JvdXBzIHdob3NlIElCQU5zIHlvdSB3YW50IHRvIGFsbG93LlxuICAgICAqIE11c3QgYmUgWydTRVBBJ10uXG4gICAgICovXG4gICAgc3VwcG9ydGVkQ291bnRyaWVzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b21pemUgdGhlIGNvdW50cnkgYW5kIGZvcm1hdCBvZiB0aGUgcGxhY2Vob2xkZXIgSUJBTi4gRGVmYXVsdCBpcyBERS5cbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlckNvdW50cnk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LlxuICAgICAqL1xuICAgIGljb25TdHlsZT86IEljb25TdHlsZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJZGVhbEVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUVsZW1lbnRPcHRpb25zIHtcbiAgICB2YWx1ZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEhpZGVzIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqL1xuICAgIGhpZGVJY29uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBaaXBDb2RlRWxlbWVudE9wdGlvbnMge1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIEljb25TdHlsZSB7XG4gICAgU29saWQgPSAnc29saWQnLFxuICAgIERlZmF1bHQgPSAnZGVmYXVsdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudFN0eWxlIHtcbiAgICAvKipcbiAgICAgKiBCYXNlIHZhcmlhbnTigJRhbGwgb3RoZXIgdmFyaWFudHMgaW5oZXJpdCBmcm9tIHRoZXNlIHN0eWxlcy5cbiAgICAgKi9cbiAgICBiYXNlPzogU3RyaXBlRWxlbWVudFN0eWxlVmFyaWFudDtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgdmFsaWQgaW5wdXQuXG4gICAgICovXG4gICAgY29tcGxldGU/OiBTdHJpcGVFbGVtZW50U3R5bGVWYXJpYW50O1xuXG4gICAgLyoqXG4gICAgICogQXBwbGllZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBubyBjdXN0b21lciBpbnB1dC5cbiAgICAgKi9cbiAgICBlbXB0eT86IFN0cmlwZUVsZW1lbnRTdHlsZVZhcmlhbnQ7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGludmFsaWQgaW5wdXQuXG4gICAgICovXG4gICAgaW52YWxpZD86IFN0cmlwZUVsZW1lbnRTdHlsZVZhcmlhbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudENsYXNzZXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGNsYXNzIGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lci4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC5cbiAgICAgKi9cbiAgICBiYXNlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNsYXNzIG5hbWUgdG8gYXBwbHkgd2hlbiB0aGUgRWxlbWVudCBpcyBjb21wbGV0ZS4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC0tY29tcGxldGUuXG4gICAgICovXG4gICAgY29tcGxldGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xhc3MgbmFtZSB0byBhcHBseSB3aGVuIHRoZSBFbGVtZW50IGlzIGVtcHR5LiBEZWZhdWx0cyB0byBTdHJpcGVFbGVtZW50LS1lbXB0eS5cbiAgICAgKi9cbiAgICBlbXB0eT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzcyBuYW1lIHRvIGFwcGx5IHdoZW4gdGhlIEVsZW1lbnQgaXMgZm9jdXNlZC4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC0tZm9jdXMuXG4gICAgICovXG4gICAgZm9jdXM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xhc3MgbmFtZSB0byBhcHBseSB3aGVuIHRoZSBFbGVtZW50IGlzIGludmFsaWQuIERlZmF1bHRzIHRvIFN0cmlwZUVsZW1lbnQtLWludmFsaWQuXG4gICAgICovXG4gICAgaW52YWxpZD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzcyBuYW1lIHRvIGFwcGx5IHdoZW4gdGhlIEVsZW1lbnQgaGFzIGl0cyB2YWx1ZSBhdXRvZmlsbGVkIGJ5IHRoZSBicm93c2VyXG4gICAgICogKG9ubHkgb24gQ2hyb21lIGFuZCBTYWZhcmkpLiBEZWZhdWx0cyB0byBTdHJpcGVFbGVtZW50LS13ZWJraXQtYXV0b2ZpbGwuXG4gICAgICovXG4gICAgd2Via2l0QXV0b0ZpbGw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkcmVzcyB7XG4gICAgLyoqXG4gICAgICogQ2l0eSwgZGlzdHJpY3QsIHN1YnVyYiwgdG93biwgb3IgdmlsbGFnZS5cbiAgICAgKi9cbiAgICBjaXR5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHdvLWxldHRlciBjb3VudHJ5IGNvZGUgKFtJU08gMzE2Ni0xIGFscGhhLTJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT18zMTY2LTFfYWxwaGEtMikpLlxuICAgICAqL1xuICAgIGNvdW50cnk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBZGRyZXNzIGxpbmUgMSAoZS5nLiwgc3RyZWV0LCBQTyBCb3gsIG9yIGNvbXBhbnkgbmFtZSkuXG4gICAgICovXG4gICAgbGluZTE6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEFkZHJlc3MgbGluZSAyIChlLmcuLCBhcGFydG1lbnQsIHN1aXRlLCB1bml0LCBvciBidWlsZGluZykuXG4gICAgICovXG4gICAgbGluZTI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBaSVAgb3IgcG9zdGFsIGNvZGUuXG4gICAgICovXG4gICAgcG9zdGFsX2NvZGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTdGF0ZSwgY291bnR5LCBwcm92aW5jZSwgb3IgcmVnaW9uLlxuICAgICAqL1xuICAgIHN0YXRlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUJpbGxpbmdEZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIGFkZHJlc3MuXG4gICAgICovXG4gICAgYWRkcmVzcz86IFN0cmlwZUFkZHJlc3M7XG5cbiAgICAvKipcbiAgICAgKiBFbWFpbCBhZGRyZXNzLlxuICAgICAqL1xuICAgIGVtYWlsPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRnVsbCBuYW1lLlxuICAgICAqL1xuICAgIG5hbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIHBob25lIG51bWJlciAoaW5jbHVkaW5nIGV4dGVuc2lvbikuXG4gICAgICovXG4gICAgcGhvbmU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlU2hpcHBpbmdBZGRyZXNzIHtcbiAgICAvKipcbiAgICAgKiBTaGlwcGluZyBBZGRyZXNzXG4gICAgICovXG4gICAgYWRkcmVzczogU3RyaXBlQWRkcmVzcztcblxuICAgIC8qKlxuICAgICAqIFJlY2lwaWVudCBuYW1lXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRlbGl2ZXJ5IHNlcnZpY2UgdGhhdCBzaGlwcGVkIGEgcGh5c2ljYWwgcHJvZHVjdCwgc3VjaCBhcyBGZWRleCwgVVBTLCBVU1BTLCBldGMuXG4gICAgICovXG4gICAgY2Fycmllcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFJlY2lwaWVudCBwaG9uZSAoaW5jbHVkaW5nIGV4dGVuc2lvbikuXG4gICAgICovXG4gICAgcGhvbmU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhY2tpbmcgbnVtYmVyIGZvciBhIHBoeXNpY2FsIHByb2R1Y3QsIG9idGFpbmVkIGZyb20gdGhlIGRlbGl2ZXJ5IHNlcnZpY2UuXG4gICAgICogSWYgbXVsdGlwbGUgdHJhY2tpbmcgbnVtYmVycyB3ZXJlIGdlbmVyYXRlZCBmb3IgdGhpcyBwdXJjaGFzZSwgcGxlYXNlIHNlcGFyYXRlIHRoZW0gd2l0aCBjb21tYXMuXG4gICAgICovXG4gICAgdHJhY2tpbmdfbnVtYmVyPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIERhdGEgdG8gYmUgc2VudCB3aXRoIGEgYHN0cmlwZS5jb25maXJtQWxpcGF5UGF5bWVudGAgcmVxdWVzdC5cbiAqIFJlZmVyIHRvIHRoZSBbUGF5bWVudCBJbnRlbnRzIEFQSV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cy9jb25maXJtKSBmb3IgYSBmdWxsIGxpc3Qgb2YgcGFyYW1ldGVycy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDb25maXJtQWxpcGF5UGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogSWYgeW91IGFyZSBbaGFuZGxpbmcgbmV4dCBhY3Rpb25zIHlvdXJzZWxmXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9wYXltZW50LWludGVudHMvdmVyaWZ5aW5nLXN0YXR1cyNuZXh0LWFjdGlvbnMpLCBwYXNzIGluIGEgcmV0dXJuX3VybC4gSWYgdGhlIHN1YnNlcXVlbnQgYWN0aW9uXG4gICAgICogaXMgcmVkaXJlY3RfdG9fdXJsLCB0aGlzIFVSTCB3aWxsIGJlIHVzZWQgb24gdGhlIHJldHVybiBwYXRoIGZvciB0aGUgcmVkaXJlY3QuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICByZXR1cm5fdXJsPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIERhdGEgdG8gYmUgc2VudCB3aXRoIGEgYHN0cmlwZS5jb25maXJtQ2FyZFBheW1lbnRgIHJlcXVlc3QuXG4gKiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlybUNhcmRQYXltZW50RGF0YSB7XG4gICAgLypcbiAgICAgKiBFaXRoZXIgdGhlIGlkIG9mIGFuIGV4aXN0aW5nIFtQYXltZW50TWV0aG9kXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9tZXRob2RzKSwgb3IgYW4gb2JqZWN0IGNvbnRhaW5pbmcgZGF0YSB0byBjcmVhdGUgYVxuICAgICAqIFBheW1lbnRNZXRob2Qgd2l0aC4gU2VlIHRoZSB1c2UgY2FzZSBzZWN0aW9ucyBiZWxvdyBmb3IgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHBheW1lbnRfbWV0aG9kPzogQ3JlYXRlUGF5bWVudE1ldGhvZENhcmREYXRhO1xuXG4gICAgLypcbiAgICAgKiBUaGUgW3NoaXBwaW5nIGRldGFpbHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSNjb25maXJtX3BheW1lbnRfaW50ZW50LXNoaXBwaW5nKSBmb3IgdGhlIHBheW1lbnQsIGlmIGNvbGxlY3RlZC5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHNoaXBwaW5nPzogU3RyaXBlU2hpcHBpbmdBZGRyZXNzO1xuXG4gICAgLypcbiAgICAgKiBJZiB5b3UgYXJlIFtoYW5kbGluZyBuZXh0IGFjdGlvbnMgeW91cnNlbGZdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3BheW1lbnQtaW50ZW50cy92ZXJpZnlpbmctc3RhdHVzI25leHQtYWN0aW9ucyksIHBhc3MgaW4gYSByZXR1cm5fdXJsLiBJZiB0aGUgc3Vic2VxdWVudCBhY3Rpb25cbiAgICAgKiBpcyByZWRpcmVjdF90b191cmwsIHRoaXMgVVJMIHdpbGwgYmUgdXNlZCBvbiB0aGUgcmV0dXJuIHBhdGggZm9yIHRoZSByZWRpcmVjdC5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHJldHVybl91cmw/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB5b3UgaW50ZW5kIHRvIG1ha2UgZnV0dXJlIHBheW1lbnRzIHdpdGggdGhpcyBQYXltZW50SW50ZW50J3MgcGF5bWVudCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBJZiBwcmVzZW50LCB0aGUgcGF5bWVudCBtZXRob2QgdXNlZCB3aXRoIHRoaXMgUGF5bWVudEludGVudCBjYW4gYmUgW2F0dGFjaGVkXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9tZXRob2RzL2F0dGFjaCkgdG8gYSBDdXN0b21lciwgZXZlbiBhZnRlciB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVzLlxuICAgICAqXG4gICAgICogVXNlIGBvbl9zZXNzaW9uYCBpZiB5b3UgaW50ZW5kIHRvIG9ubHkgcmV1c2UgdGhlIHBheW1lbnQgbWV0aG9kIHdoZW4geW91ciBjdXN0b21lciBpcyBwcmVzZW50IGluIHlvdXIgY2hlY2tvdXQgZmxvdy4gVXNlIGBvZmZfc2Vzc2lvbmAgaWYgeW91ciBjdXN0b21lciBtYXkgb3IgbWF5IG5vdCBiZSBpbiB5b3VyIGNoZWNrb3V0IGZsb3cuXG4gICAgICovXG4gICAgc2V0dXBfZnV0dXJlX3VzYWdlPzogJ29mZl9zZXNzaW9uJyB8ICdvbl9zZXNzaW9uJyB8IG51bGw7XG59XG5cbi8qKlxuICogRGF0YSB0byBiZSBzZW50IHdpdGggYSBgc3RyaXBlLmNvbmZpcm1JZGVhbFBheW1lbnRgIHJlcXVlc3QuXG4gKiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogRWl0aGVyIHRoZSBpZCBvZiBhbiBleGlzdGluZyBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcyksIG9yIGFuIG9iamVjdCBjb250YWluaW5nIGRhdGEgdG8gY3JlYXRlIGFcbiAgICAgKiBQYXltZW50TWV0aG9kIHdpdGguIFNlZSB0aGUgdXNlIGNhc2Ugc2VjdGlvbnMgYmVsb3cgZm9yIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICBwYXltZW50X21ldGhvZD86IENyZWF0ZVBheW1lbnRNZXRob2RJZGVhbERhdGE7XG5cbiAgICAvKlxuICAgICAqIElmIHlvdSBhcmUgW2hhbmRsaW5nIG5leHQgYWN0aW9ucyB5b3Vyc2VsZl0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvcGF5bWVudC1pbnRlbnRzL3ZlcmlmeWluZy1zdGF0dXMjbmV4dC1hY3Rpb25zKSwgcGFzcyBpbiBhIHJldHVybl91cmwuIElmIHRoZSBzdWJzZXF1ZW50IGFjdGlvblxuICAgICAqIGlzIHJlZGlyZWN0X3RvX3VybCwgdGhpcyBVUkwgd2lsbCBiZSB1c2VkIG9uIHRoZSByZXR1cm4gcGF0aCBmb3IgdGhlIHJlZGlyZWN0LlxuICAgICAqXG4gICAgICogQHJlY29tbWVuZGVkXG4gICAgICovXG4gICAgcmV0dXJuX3VybD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBEYXRhIHRvIGJlIHNlbnQgd2l0aCBhIGBzdHJpcGUuY29uZmlybVNFUEFQYXltZW50YCByZXF1ZXN0LlxuICogUmVmZXIgdG8gdGhlIFtQYXltZW50IEludGVudHMgQVBJXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm0pIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1TZXBhUGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogRWl0aGVyIHRoZSBpZCBvZiBhbiBleGlzdGluZyBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcyksIG9yIGFuIG9iamVjdCBjb250YWluaW5nIGRhdGEgdG8gY3JlYXRlIGFcbiAgICAgKiBQYXltZW50TWV0aG9kIHdpdGguIFNlZSB0aGUgdXNlIGNhc2Ugc2VjdGlvbnMgYmVsb3cgZm9yIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICBwYXltZW50X21ldGhvZD86IENyZWF0ZVBheW1lbnRNZXRob2RTZXBhRGF0YTtcbn1cblxuZXhwb3J0IHR5cGUgU3RyaXBlQ29uZmlybVBheW1lbnREYXRhID1cbiAgICB8IFN0cmlwZUNvbmZpcm1BbGlwYXlQYXltZW50RGF0YVxuICAgIHwgU3RyaXBlQ29uZmlybUNhcmRQYXltZW50RGF0YVxuICAgIHwgU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGFcbiAgICB8IFN0cmlwZUNvbmZpcm1TZXBhUGF5bWVudERhdGFcbiAgICB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgU3RyaXBlRWxlbWVudE9wdGlvbnMgPVxuICAgIHwgQ2FyZEVsZW1lbnRPcHRpb25zXG4gICAgfCBDYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnNcbiAgICB8IENhcmROdW1iZXJFbGVtZW50T3B0aW9uc1xuICAgIHwgQ2FyZEN2Y0VsZW1lbnRPcHRpb25zXG4gICAgfCBJZGVhbEVsZW1lbnRPcHRpb25zXG4gICAgfCBJYmFuRWxlbWVudE9wdGlvbnNcbiAgICB8IFppcENvZGVFbGVtZW50T3B0aW9ucztcblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgYGVsZW1lbnQubW91bnRgIG1ldGhvZCBhdHRhY2hlcyB5b3VyIGVsZW1lbnQgdG8gdGhlIERPTS5cbiAgICAgKi9cbiAgICBtb3VudChkb21FbGVtZW50OiBzdHJpbmcgfCBIVE1MRWxlbWVudCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgZGVzdHJveXMgaXQuXG4gICAgICogQSBkZXN0cm95ZWQgZWxlbWVudCBjYW4gbm90IGJlIHJlLWFjdGl2YXRlZCBvciByZS1tb3VudGVkIHRvIHRoZSBET00uXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqIENhbGwgYGVsZW1lbnQubW91bnRgIHRvIHJlLWF0dGFjaCBpdCB0byB0aGUgRE9NLlxuICAgICAqL1xuICAgIHVubW91bnQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50cyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBBbGlwYXlFbGVtZW50YCB8IGBDYXJkRWxlbWVudGAgfCBgQ2FyZEN2Y0VsZW1lbnRgIHxgQ2FyZEV4cGlyeUVsZW1lbnRgIHwgYENhcmRFeHBpcnlFbGVtZW50YCB8IGBDYXJkTnVtYmVyRWxlbWVudGAgfCBgSWRlYWxCYW5rRWxlbWVudGAgfCBgSWJhbkVsZW1lbnRgLlxuICAgICAqL1xuICAgIGNyZWF0ZShlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUsIG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50T3B0aW9ucyk6IFN0cmlwZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIHByZXZpb3VzbHkgY3JlYXRlZCBgRWxlbWVudGAgYnkgaXRzIHR5cGUuXG4gICAgICovXG4gICAgZ2V0RWxlbWVudChlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUpOiBTdHJpcGVFbGVtZW50IHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIHBhc3MgY3VzdG9tIGZvbnRzIHdoZW4gY3JlYXRpbmcgYW4gW0VsZW1lbnRzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvY3JlYXRlKSBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3NzRm9udFNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgcG9pbnRpbmcgdG8gYSBDU1MgZmlsZSB3aXRoIFtAZm9udC1mYWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZSkgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgICAqIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zYFxuICAgICAqIE5vdGUgdGhhdCBpZiB5b3UgYXJlIHVzaW5nIGEgW2NvbnRlbnQgc2VjdXJpdHkgcG9saWN5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvQ29udGVudC1TZWN1cml0eS1Qb2xpY3kpIChDU1ApLFxuICAgICAqIFthZGRpdGlvbmFsIGRpcmVjdGl2ZXNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3NlY3VyaXR5I2NvbnRlbnQtc2VjdXJpdHktcG9saWN5KSBtYXkgYmUgbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIGNzc1NyYzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gcGFzcyBjdXN0b20gZm9udHMgd2hlbiBjcmVhdGluZyBhbiBbRWxlbWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGUpIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21Gb250U291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSB0byBnaXZlIHRoZSBmb250LlxuICAgICAqL1xuICAgIGZhbWlseTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbc3JjXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9zcmMpIHZhbHVlIHBvaW50aW5nIHRvIHlvdXJcbiAgICAgKiBjdXN0b20gZm9udCBmaWxlLiBUaGlzIGlzIHVzdWFsbHkgKHRob3VnaCBub3QgYWx3YXlzKSBhIGxpbmsgdG8gYSBmaWxlIHdpdGggYSAud29mZiAsIC5vdGYsIG9yIC5zdmcgc3VmZml4LlxuICAgICAqL1xuICAgIHNyYzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbZm9udC1kaXNwbGF5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9mb250LWRpc3BsYXkpIHZhbHVlLlxuICAgICAqL1xuICAgIGRpc3BsYXk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPbmUgb2Ygbm9ybWFsLCBpdGFsaWMsIG9ibGlxdWUuIERlZmF1bHRzIHRvIG5vcm1hbC5cbiAgICAgKi9cbiAgICBzdHlsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW3VuaWNvZGUtcmFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlL3VuaWNvZGUtcmFuZ2UpIHZhbHVlLlxuICAgICAqL1xuICAgIHVuaWNvZGVSYW5nZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW2ZvbnQtd2VpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQpLiBOb3RlIHRoYXQgdGhpcyBpcyBhIHN0cmluZywgbm90IGEgbnVtYmVyLlxuICAgICAqL1xuICAgIHdlaWdodD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgQ3VzdG9tRm9udCA9IENzc0ZvbnRTb3VyY2UgfCBDdXN0b21Gb250U291cmNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVsZW1lbnRzT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQW4gYXJyYXkgb2YgY3VzdG9tIGZvbnRzLCB3aGljaCBlbGVtZW50cyBjcmVhdGVkIGZyb20gdGhlIEVsZW1lbnRzIG9iamVjdCBjYW4gdXNlLlxuICAgICAqIEZvbnRzIGNhbiBiZSBzcGVjaWZpZWQgYXMgW0Nzc0ZvbnRTb3VyY2VdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L2Nzc19mb250X3NvdXJjZV9vYmplY3QpXG4gICAgICogb3IgW0N1c3RvbUZvbnRTb3VyY2VdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L2N1c3RvbV9mb250X3NvdXJjZV9vYmplY3QpIG9iamVjdHMuXG4gICAgICovXG4gICAgZm9udHM/OiBDdXN0b21Gb250W107XG5cbiAgICAvKipcbiAgICAgKiBBIFtsb2NhbGVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L3N1cHBvcnRlZF9sb2NhbGVzKSB0byBkaXNwbGF5IHBsYWNlaG9sZGVycyBhbmRcbiAgICAgKiBlcnJvciBzdHJpbmdzIGluLiBEZWZhdWx0IGlzIGF1dG8gKFN0cmlwZSBkZXRlY3RzIHRoZSBsb2NhbGUgb2YgdGhlIGJyb3dzZXIpLlxuICAgICAqIFNldHRpbmcgdGhlIGxvY2FsZSBkb2VzIG5vdCBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHBvc3RhbCBjb2RlIHZhbGlkYXRpb27igJRhIHZhbGlkIHBvc3RhbCBjb2RlXG4gICAgICogZm9yIHRoZSBiaWxsaW5nIGNvdW50cnkgb2YgdGhlIGNhcmQgaXMgc3RpbGwgcmVxdWlyZWQuXG4gICAgICovXG4gICAgbG9jYWxlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogU2V0IHRoaXMgdG8gZmFsc2UgaWYgeW91IHdhbnQgdG8gW21hbnVhbGx5IGhhbmRsZSB0aGUgYXV0aG9yaXphdGlvbiByZWRpcmVjdF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvaWRlYWwjaGFuZGxlLXJlZGlyZWN0KS4gRGVmYXVsdCBpcyB0cnVlLlxuICAgICAqL1xuICAgIGhhbmRsZUFjdGlvbnM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVYzQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYEVsZW1lbnRzYCBpbnN0YW5jZSwgd2hpY2ggbWFuYWdlcyBhIGdyb3VwIG9mIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGVsZW1lbnRzKG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c09wdGlvbnMpOiBTdHJpcGVFbGVtZW50cztcblxuICAgIC8qXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm1fYWxpcGF5X3BheW1lbnRcbiAgICAgKlxuICAgICAqIFVzZSBgc3RyaXBlLmNvbmZpcm1BbGlwYXlQYXltZW50YCBpbiB0aGUgQWxpcGF5IHBheW1lbnQgbWV0aG9kIGNyZWF0aW9uIGZsb3cgd2hlbiB0aGUgY3VzdG9tZXIgc3VibWl0cyB5b3VyIHBheW1lbnQgZm9ybS5cbiAgICAgKiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjb25maXJtIHRoZSBbUGF5bWVudEludGVudF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cykgd2l0aCBkYXRhIHlvdSBwcm92aWRlLCBhbmQgaXQgd2lsbCBhdXRvbWF0aWNhbGx5XG4gICAgICogcmVkaXJlY3QgdGhlIGN1c3RvbWVyIHRvIHRoZSBhdXRob3JpemUgdGhlIHRyYW5zYWN0aW9uLiBPbmNlIGF1dGhvcml6YXRpb24gaXMgY29tcGxldGUsIHRoZSBjdXN0b21lciB3aWxsIGJlIHJlZGlyZWN0ZWRcbiAgICAgKiBiYWNrIHRvIHlvdXIgc3BlY2lmaWVkIGByZXR1cm5fdXJsYC4gV2hlbiB5b3UgY29uZmlybSBhIGBQYXltZW50SW50ZW50YCwgaXQgbmVlZHMgdG8gaGF2ZSBhbiBhdHRhY2hlZCBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykuXG4gICAgICogSW4gYWRkaXRpb24gdG8gY29uZmlybWluZyB0aGUgYFBheW1lbnRJbnRlbnRgLCB0aGlzIG1ldGhvZCBjYW4gYXV0b21hdGljYWxseSBjcmVhdGUgYW5kIGF0dGFjaCBhIG5ldyBgUGF5bWVudE1ldGhvZGAgZm9yIHlvdS5cbiAgICAgKiBJZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGEgYFBheW1lbnRNZXRob2RgIHlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZCB3aXRob3V0IG5lZWRpbmcgdG8gcHJvdmlkZSBhbnkgYWRkaXRpb25hbCBkYXRhLlxuICAgICAqIFRoZXNlIHVzZSBjYXNlcyBhcmUgZGV0YWlsZWQgaW4gdGhlIHNlY3Rpb25zIHRoYXQgZm9sbG93LlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKiBgc3RyaXBlLmNvbmZpcm1BbGlwYXlQYXltZW50YCBieSBkZWZhdWx0LCB3aWxsIHRyaWdnZXIgYSByZWRpcmVjdCB3aGVuIHN1Y2Nlc3NmdWwuIElmIHRoZXJlIGlzIGFuIGVycm9yLCBvciB3aGVuIGhhbmRsaW5nXG4gICAgICogYG5leHRfYWN0aW9uc2AgbWFudWFsbHkgYnkgdXNpbmcgdGhlIGBoYW5kbGVBY3Rpb25zOiBmYWxzZWAgb3B0aW9uLCBpdCB3aWxsIHJldHVybiBhIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aXRoIGEgYHJlc3VsdGAgb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGhhcyBlaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIHJlc3VsdC5wYXltZW50SW50ZW50OiB0aGUgc3VjY2Vzc2Z1bCBQYXltZW50SW50ZW50LlxuICAgICAqIC0gcmVzdWx0LmVycm9yOiBhbiBlcnJvci4gUmVmZXIgdG8gdGhlIEFQSSByZWZlcmVuY2UgZm9yIGFsbCBwb3NzaWJsZSBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHN0cmlwZS5jb25maXJtQWxpcGF5UGF5bWVudGAgbWF5IHRha2Ugc2V2ZXJhbCBzZWNvbmRzIHRvIGNvbXBsZXRlLiBEdXJpbmcgdGhhdCB0aW1lLCB5b3Ugc2hvdWxkIGRpc2FibGUgeW91clxuICAgICAqIGZvcm0gZnJvbSBiZWluZyByZXN1Ym1pdHRlZCBhbmQgc2hvdyBhIHdhaXRpbmcgaW5kaWNhdG9yIGxpa2UgYSBzcGlubmVyLiBJZiB5b3UgcmVjZWl2ZSBhbiBlcnJvciByZXN1bHQsIHlvdSBzaG91bGRcbiAgICAgKiBiZSBzdXJlIHRvIHNob3cgdGhhdCBlcnJvciB0byB0aGUgY3VzdG9tZXIsIHJlLWVuYWJsZSB0aGUgZm9ybSwgYW5kIGhpZGUgdGhlIHdhaXRpbmcgaW5kaWNhdG9yLlxuICAgICAqL1xuICAgIGNvbmZpcm1BbGlwYXlQYXltZW50KFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFtjbGllbnQgc2VjcmV0XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL29iamVjdCNwYXltZW50X2ludGVudF9vYmplY3QtY2xpZW50X3NlY3JldCkgb2YgdGhlIFBheW1lbnRJbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjbGllbnRTZWNyZXQ6IHN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGF0YSB0byBiZSBzZW50IHdpdGggdGhlIHJlcXVlc3QuIFJlZmVyIHRvIHRoZSBQYXltZW50IEludGVudHMgQVBJIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgZGF0YT86IFN0cmlwZUNvbmZpcm1BbGlwYXlQYXltZW50RGF0YSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb3B0aW9ucyBvYmplY3QgdG8gY29udHJvbCB0aGUgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QuXG4gICAgICAgICAqL1xuICAgICAgICBvcHRpb25zPzogU3RyaXBlQ29uZmlybVBheW1lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8eyBwYXltZW50SW50ZW50PzogUGF5bWVudEludGVudDsgZXJyb3I/OiBTdHJpcGVFcnJvciB9PjtcblxuICAgIC8qXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm1fY2FyZF9wYXltZW50XG4gICAgICpcbiAgICAgKiBVc2UgYHN0cmlwZS5jb25maXJtQ2FyZFBheW1lbnRgIHdoZW4gdGhlIGN1c3RvbWVyIHN1Ym1pdHMgeW91ciBwYXltZW50IGZvcm0uXG4gICAgICogV2hlbiBjYWxsZWQsIGl0IHdpbGwgY29uZmlybSB0aGUgW1BheW1lbnRJbnRlbnRdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMpXG4gICAgICogd2l0aCBgZGF0YWAgeW91IHByb3ZpZGUgYW5kIGNhcnJ5IG91dCAzRFMgb3Igb3RoZXIgbmV4dCBhY3Rpb25zIGlmIHRoZXkgYXJlIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBbRHluYW1pYyAzRCBTZWN1cmVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzLzNkLXNlY3VyZSN0aHJlZS1kcy1yYWRhciksIGBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50YCB3aWxsXG4gICAgICogdHJpZ2dlciB5b3VyIFJhZGFyIHJ1bGVzIHRvIGV4ZWN1dGUgYW5kIG1heSBvcGVuIGEgZGlhbG9nIGZvciB5b3VyIGN1c3RvbWVyIHRvIGF1dGhlbnRpY2F0ZSB0aGVpciBwYXltZW50LlxuICAgICAqXG4gICAgICogV2hlbiB5b3UgY29uZmlybSBhIGBQYXltZW50SW50ZW50YCwgaXQgbmVlZHMgdG8gaGF2ZSBhbiBhdHRhY2hlZCBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykuXG4gICAgICogSW4gYWRkaXRpb24gdG8gY29uZmlybWluZyB0aGUgYFBheW1lbnRJbnRlbnRgLCB0aGlzIG1ldGhvZCBjYW4gYXV0b21hdGljYWxseSBjcmVhdGUgYW5kIGF0dGFjaCBhIG5ldyBgUGF5bWVudE1ldGhvZGAgZm9yIHlvdS5cbiAgICAgKiBJdCBjYW4gYWxzbyBiZSBjYWxsZWQgd2l0aCBhbiBleGlzdGluZyBgUGF5bWVudE1ldGhvZGAsIG9yIGlmIHlvdSBoYXZlIGFscmVhZHkgYXR0YWNoZWQgYSBQYXltZW50TWV0aG9kIHlvdSBjYW4gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kIHdpdGhvdXQgbmVlZGluZyB0byBwcm92aWRlIGFueSBhZGRpdGlvbmFsIGRhdGEuIFRoZXNlIHVzZSBjYXNlcyBhcmUgZGV0YWlsZWQgaW4gdGhlIHNlY3Rpb25zIHRoYXQgZm9sbG93LlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKiBgc3RyaXBlLmNvbmZpcm1DYXJkUGF5bWVudGAgd2lsbCByZXR1cm4gYSBQcm9taXNlIHdoaWNoIHJlc29sdmVzIHdpdGggYSByZXN1bHQgb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGhhcyBlaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIHJlc3VsdC5wYXltZW50SW50ZW50OiB0aGUgc3VjY2Vzc2Z1bCBQYXltZW50SW50ZW50LlxuICAgICAqIC0gcmVzdWx0LmVycm9yOiBhbiBlcnJvci4gUmVmZXIgdG8gdGhlIEFQSSByZWZlcmVuY2UgZm9yIGFsbCBwb3NzaWJsZSBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgc3RyaXBlLmNvbmZpcm1DYXJkUGF5bWVudCBtYXkgdGFrZSBzZXZlcmFsIHNlY29uZHMgdG8gY29tcGxldGUuIER1cmluZyB0aGF0IHRpbWUsIHlvdSBzaG91bGQgZGlzYWJsZVxuICAgICAqIHlvdXIgZm9ybSBmcm9tIGJlaW5nIHJlc3VibWl0dGVkIGFuZCBzaG93IGEgd2FpdGluZyBpbmRpY2F0b3IgbGlrZSBhIHNwaW5uZXIuIElmIHlvdSByZWNlaXZlIGFuIGVycm9yIHJlc3VsdCxcbiAgICAgKiB5b3Ugc2hvdWxkIGJlIHN1cmUgdG8gc2hvdyB0aGF0IGVycm9yIHRvIHRoZSBjdXN0b21lciwgcmUtZW5hYmxlIHRoZSBmb3JtLCBhbmQgaGlkZSB0aGUgd2FpdGluZyBpbmRpY2F0b3IuXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsbHksIGBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50IG1heSB0cmlnZ2VyYCBhIFszRCBTZWN1cmVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzLzNkLXNlY3VyZSkgYXV0aGVudGljYXRpb25cbiAgICAgKiBjaGFsbGVuZ2UuIFRoaXMgd2lsbCBiZSBzaG93biBpbiBhIG1vZGFsIGRpYWxvZyBhbmQgbWF5IGJlIGNvbmZ1c2luZyBmb3IgY3VzdG9tZXJzIHVzaW5nIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMgbGlrZVxuICAgICAqIHNjcmVlbiByZWFkZXJzLiBZb3Ugc2hvdWxkIG1ha2UgeW91ciBmb3JtIGFjY2Vzc2libGUgYnkgZW5zdXJpbmcgdGhhdCBzdWNjZXNzIG9yIGVycm9yIG1lc3NhZ2VzIGFyZSBjbGVhcmx5IHJlYWQgb3V0XG4gICAgICogYWZ0ZXIgdGhpcyBtZXRob2QgY29tcGxldGVzLlxuICAgICAqXG4gICAgICovXG4gICAgY29uZmlybUNhcmRQYXltZW50KFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFtjbGllbnQgc2VjcmV0XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL29iamVjdCNwYXltZW50X2ludGVudF9vYmplY3QtY2xpZW50X3NlY3JldCkgb2YgdGhlIFBheW1lbnRJbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjbGllbnRTZWNyZXQ6IHN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGF0YSB0byBiZSBzZW50IHdpdGggdGhlIHJlcXVlc3QuIFJlZmVyIHRvIHRoZSBQYXltZW50IEludGVudHMgQVBJIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgZGF0YT86IFN0cmlwZUNvbmZpcm1DYXJkUGF5bWVudERhdGEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kLlxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9ucz86IFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqIEBkb2NzIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL3BheW1lbnRfaW50ZW50cy9jb25maXJtX2lkZWFsX3BheW1lbnRcbiAgICAgKlxuICAgICAqIFVzZSBgc3RyaXBlLmNvbmZpcm1JZGVhbFBheW1lbnRgIGluIHRoZSBbaURFQUwgUGF5bWVudHMgd2l0aCBQYXltZW50IE1ldGhvZHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL2lkZWFsKVxuICAgICAqIGZsb3cgd2hlbiB0aGUgY3VzdG9tZXIgc3VibWl0cyB5b3VyIHBheW1lbnQgZm9ybS4gV2hlbiBjYWxsZWQsIGl0IHdpbGwgY29uZmlybSB0aGUgYFBheW1lbnRJbnRlbnRgIHdpdGggYGRhdGFgIHlvdVxuICAgICAqIHByb3ZpZGUsIGFuZCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgcmVkaXJlY3QgdGhlIGN1c3RvbWVyIHRvIHRoZSBhdXRob3JpemUgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAqIE9uY2UgYXV0aG9yaXphdGlvbiBpcyBjb21wbGV0ZSwgdGhlIGN1c3RvbWVyIHdpbGwgYmUgcmVkaXJlY3RlZCBiYWNrIHRvIHlvdXIgc3BlY2lmaWVkIGByZXR1cm5fdXJsYC5cbiAgICAgKlxuICAgICAqIFdoZW4geW91IGNvbmZpcm0gYSBgUGF5bWVudEludGVudGAsIGl0IG5lZWRzIHRvIGhhdmUgYW4gYXR0YWNoZWQgW1BheW1lbnRNZXRob2RdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X21ldGhvZHMpLlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGNvbmZpcm1pbmcgdGhlIGBQYXltZW50SW50ZW50YCwgdGhpcyBtZXRob2QgY2FuIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFuZCBhdHRhY2ggYSBuZXcgYFBheW1lbnRNZXRob2RgIGZvciB5b3UuXG4gICAgICogSXQgY2FuIGFsc28gYmUgY2FsbGVkIHdpdGggYW4gZXhpc3RpbmcgYFBheW1lbnRNZXRob2RgLCBvciBpZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGEgUGF5bWVudE1ldGhvZCB5b3UgY2FuIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZCB3aXRob3V0IG5lZWRpbmcgdG8gcHJvdmlkZSBhbnkgYWRkaXRpb25hbCBkYXRhLiBUaGVzZSB1c2UgY2FzZXMgYXJlIGRldGFpbGVkIGluIHRoZSBzZWN0aW9ucyB0aGF0IGZvbGxvdy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zXG4gICAgICogQnkgZGVmYXVsdCwgYHN0cmlwZS5jb25maXJtSWRlYWxQYXltZW50YCB3aWxsIHRyaWdnZXIgYSByZWRpcmVjdCB3aGVuIHN1Y2Nlc3NmdWwuIElmIHRoZXJlIGlzIGFuIGVycm9yLCBvciB3aGVuIGhhbmRsaW5nXG4gICAgICogbmV4dCBhY3Rpb25zIG1hbnVhbGx5IGJ5IHVzaW5nIHRoZSBgaGFuZGxlQWN0aW9uczogZmFsc2VgIG9wdGlvbiwgaXQgd2lsbCByZXR1cm4gYSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2l0aCBhIGByZXN1bHRgXG4gICAgICogb2JqZWN0LiBUaGlzIG9iamVjdCBoYXMgZWl0aGVyOlxuICAgICAqXG4gICAgICogLSByZXN1bHQucGF5bWVudEludGVudDogdGhlIHN1Y2Nlc3NmdWwgUGF5bWVudEludGVudC5cbiAgICAgKiAtIHJlc3VsdC5lcnJvcjogYW4gZXJyb3IuIFJlZmVyIHRvIHRoZSBBUEkgcmVmZXJlbmNlIGZvciBhbGwgcG9zc2libGUgZXJyb3JzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGBzdHJpcGUuY29uZmlybUlkZWFsUGF5bWVudGAgbWF5IHRha2Ugc2V2ZXJhbCBzZWNvbmRzIHRvIGNvbXBsZXRlLiBEdXJpbmcgdGhhdCB0aW1lLCB5b3Ugc2hvdWxkIGRpc2FibGVcbiAgICAgKiB5b3VyIGZvcm0gZnJvbSBiZWluZyByZXN1Ym1pdHRlZCBhbmQgc2hvdyBhIHdhaXRpbmcgaW5kaWNhdG9yIGxpa2UgYSBzcGlubmVyLiBJZiB5b3UgcmVjZWl2ZSBhbiBlcnJvciByZXN1bHQsXG4gICAgICogeW91IHNob3VsZCBiZSBzdXJlIHRvIHNob3cgdGhhdCBlcnJvciB0byB0aGUgY3VzdG9tZXIsIHJlLWVuYWJsZSB0aGUgZm9ybSwgYW5kIGhpZGUgdGhlIHdhaXRpbmcgaW5kaWNhdG9yLlxuICAgICAqL1xuICAgIGNvbmZpcm1JZGVhbFBheW1lbnQoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgW2NsaWVudCBzZWNyZXRdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvb2JqZWN0I3BheW1lbnRfaW50ZW50X29iamVjdC1jbGllbnRfc2VjcmV0KSBvZiB0aGUgUGF5bWVudEludGVudC5cbiAgICAgICAgICovXG4gICAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRhIHRvIGJlIHNlbnQgd2l0aCB0aGUgcmVxdWVzdC4gUmVmZXIgdG8gdGhlIFBheW1lbnQgSW50ZW50cyBBUEkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gICAgICAgICAqL1xuICAgICAgICBkYXRhPzogU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kLlxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9ucz86IFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqXG4gICAgICogVXNlIGBzdHJpcGUuY29uZmlybVNlcGFEZWJpdFBheW1lbnRgIGluIHRoZSBbU0VQQSBEaXJlY3QgRGViaXQgUGF5bWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3NlcGEtZGViaXQpXG4gICAgICogd2l0aCBQYXltZW50IE1ldGhvZHMgZmxvdyB3aGVuIHRoZSBjdXN0b21lciBzdWJtaXRzIHlvdXIgcGF5bWVudCBmb3JtLiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjb25maXJtIHRoZVxuICAgICAqIFtQYXltZW50SW50ZW50XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzKSB3aXRoIGBkYXRhYCB5b3UgcHJvdmlkZS4gTm90ZSB0aGF0IHRoZXJlIGFyZSBzb21lIGFkZGl0aW9uYWxcbiAgICAgKiByZXF1aXJlbWVudHMgdG8gdGhpcyBmbG93IHRoYXQgYXJlIG5vdCBjb3ZlcmVkIGluIHRoaXMgcmVmZXJlbmNlLiBSZWZlciB0byBvdXIgW2ludGVncmF0aW9uIGd1aWRlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9zZXBhLWRlYml0XG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFdoZW4geW91IGNvbmZpcm0gYSBQYXltZW50SW50ZW50LCBpdCBuZWVkcyB0byBoYXZlIGFuIGF0dGFjaGVkIFBheW1lbnRNZXRob2QuIEluIGFkZGl0aW9uIHRvIGNvbmZpcm1pbmcgdGhlIFBheW1lbnRJbnRlbnQsXG4gICAgICogdGhpcyBtZXRob2QgY2FuIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFuZCBhdHRhY2ggYSBuZXcgUGF5bWVudE1ldGhvZCBmb3IgeW91LiBJZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGFcbiAgICAgKiBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykgeW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kIHdpdGhvdXQgbmVlZGluZyB0byBwcm92aWRlIGFueSBhZGRpdGlvbmFsIGRhdGEuXG4gICAgICogVGhlc2UgdXNlIGNhc2VzIGFyZSBkZXRhaWxlZCBpbiB0aGUgc2VjdGlvbnMgdGhhdCBmb2xsb3cuXG4gICAgICpcbiAgICAgKiBAZG9jcyBodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9wYXltZW50X2ludGVudHMvY29uZmlybV9zZXBhX2RlYml0X3BheW1lbnRcbiAgICAgKi9cbiAgICBjb25maXJtU2VwYURlYml0UGF5bWVudChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBbY2xpZW50IHNlY3JldF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cy9vYmplY3QjcGF5bWVudF9pbnRlbnRfb2JqZWN0LWNsaWVudF9zZWNyZXQpIG9mIHRoZSBQYXltZW50SW50ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgY2xpZW50U2VjcmV0OiBzdHJpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgdG8gYmUgc2VudCB3aXRoIHRoZSByZXF1ZXN0LiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gICAgICAgICAqL1xuICAgICAgICBkYXRhPzogU3RyaXBlQ29uZmlybVNlcGFQYXltZW50RGF0YSxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqIFVzZSBzdHJpcGUuY3JlYXRlUGF5bWVudE1ldGhvZCB0byBjb252ZXJ0IHBheW1lbnQgaW5mb3JtYXRpb24gY29sbGVjdGVkIGJ5IGVsZW1lbnRzIGludG8gYSBQYXltZW50TWV0aG9kXG4gICAgICogb2JqZWN0IHRoYXQgeW91IHNhZmVseSBwYXNzIHRvIHlvdXIgc2VydmVyIHRvIHVzZSBpbiBhbiBBUEkgY2FsbC5cbiAgICAgKlxuICAgICAqIEBkb2NzIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL3BheW1lbnRfbWV0aG9kcy9jcmVhdGVfcGF5bWVudF9tZXRob2RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlOiBTdHJpbmcsIFRoZSB0eXBlIG9mIHRoZSBQYXltZW50TWV0aG9kIHRvIGNyZWF0ZS4gUmVmZXIgdG8gdGhlIFBheW1lbnRNZXRob2QgQVBJIGZvciBhbGwgcG9zc2libGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBjYXJkOiBTdHJpcGVFbGVtZW50LCBBIGNhcmQgb3IgY2FyZE51bWJlciBFbGVtZW50LlxuICAgICAqIEBwYXJhbSBiaWxsaW5nX2RldGFpbHM6IFN0cmlwZUJpbGxpbmdEZXRhaWxzLCBCaWxsaW5nIGluZm9ybWF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgUGF5bWVudE1ldGhvZCB0aGF0XG4gICAgICogbWF5IGJlIHVzZWQgb3IgcmVxdWlyZWQgYnkgcGFydGljdWxhciB0eXBlcyBvZiBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgY3JlYXRlUGF5bWVudE1ldGhvZChcbiAgICAgICAgcGFyYW1zOiBDcmVhdGVQYXltZW50TWV0aG9kUGFyYW1zLFxuICAgICk6IFByb21pc2U8eyBwYXltZW50TWV0aG9kPzogUGF5bWVudE1ldGhvZDsgZXJyb3I/OiBTdHJpcGVFcnJvciB9PjtcblxuICAgIC8qXG4gICAgICogVXNlIHN0cmlwZS5oYW5kbGVDYXJkQWN0aW9uIGluIHRoZSBQYXltZW50IEludGVudHMgQVBJIG1hbnVhbCBjb25maXJtYXRpb24gZmxvdyB0byBoYW5kbGUgYSBQYXltZW50SW50ZW50XG4gICAgICogd2l0aCB0aGUgcmVxdWlyZXNfYWN0aW9uIHN0YXR1cy4gSXQgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgUGF5bWVudEludGVudCBoYXMgYSBkaWZmZXJlbnQgc3RhdHVzLlxuICAgICAqXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2hhbmRsZV9jYXJkX2FjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQ6IFN0cmluZywgVGhlIGNsaWVudCBzZWNyZXQgb2YgdGhlIFBheW1lbnRJbnRlbnQgdG8gaGFuZGxlLlxuICAgICAqL1xuICAgIGhhbmRsZUNhcmRBY3Rpb24oXG4gICAgICAgIHBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlUGF5bWVudE1ldGhvZFBhcmFtcyB7XG4gICAgdHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGU7XG4gICAgY2FyZDogU3RyaXBlRWxlbWVudDtcbiAgICBiaWxsaW5nX2RldGFpbHM/OiBTdHJpcGVCaWxsaW5nRGV0YWlscztcbiAgICBhbGxvd19yZWRpc3BsYXk/OiAnYWx3YXlzJyB8ICdsaW1pdGVkJyB8ICd1bnNwZWNpZmllZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgU3RyaXBlPyhzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nLCBvcHRpb25zPzogU3RyaXBlQ29uZmlndXJhdGlvbk9wdGlvbnMpOiBTdHJpcGVWM0NsaWVudDtcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlRWxlbWVudFR5cGUge1xuICAgIEFsaXBheSA9ICdhbGlwYXknLFxuICAgIENhcmRDdmMgPSAnY2FyZEN2YycsXG4gICAgQ2FyZEV4cGlyeSA9ICdjYXJkRXhwaXJ5JyxcbiAgICBDYXJkTnVtYmVyID0gJ2NhcmROdW1iZXInLFxuICAgIENyZWRpdENhcmQgPSAnY2FyZCcsXG4gICAgSURFQUwgPSAnaWRlYWxCYW5rJyxcbiAgICBTZXBhID0gJ2liYW4nLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgQWxpcGF5ID0gJ2FsaXBheScsXG4gICAgQ3JlZGl0Q2FyZCA9ICdjYXJkJyxcbiAgICBJREVBTCA9ICdpZGVhbCcsXG4gICAgU2VwYSA9ICdzZXBhX2RlYml0Jyxcbn1cblxuLyoqXG4gKiBJbml0aWFsaXphdGlvbiBvcHRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpZ3VyYXRpb25PcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBGb3IgdXNhZ2Ugd2l0aCBbQ29ubmVjdF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvY29ubmVjdCkgb25seS5cbiAgICAgKiBTcGVjaWZ5aW5nIGEgY29ubmVjdGVkIGFjY291bnQgSUQgKGUuZy4sIGFjY3RfMjRCRk1wSjFzdlI1QTg5aykgYWxsb3dzIHlvdSB0byBwZXJmb3JtIGFjdGlvbnMgb24gYmVoYWxmIG9mIHRoYXQgYWNjb3VudC5cbiAgICAgKi9cbiAgICBzdHJpcGVBY2NvdW50OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB5b3VyIGFjY291bnQncyBbQVBJIHZlcnNpb25dKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS92ZXJzaW9uaW5nKVxuICAgICAqL1xuICAgIGFwaVZlcnNpb24/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIGxvY2FsZSB1c2VkIHRvIGdsb2JhbGx5IGNvbmZpZ3VyZSBsb2NhbGl6YXRpb24gaW4gU3RyaXBlLiBTZXR0aW5nIHRoZSBsb2NhbGUgaGVyZSB3aWxsIGxvY2FsaXplIGVycm9yIHN0cmluZ3MgZm9yIGFsbCBTdHJpcGUuanMgbWV0aG9kcy4gSXQgd2lsbCBhbHNvIGNvbmZpZ3VyZSB0aGUgbG9jYWxlIGZvciBFbGVtZW50cyBhbmQgQ2hlY2tvdXQuIERlZmF1bHQgaXMgYXV0byAoU3RyaXBlIGRldGVjdHMgdGhlIGxvY2FsZSBvZiB0aGUgYnJvd3NlcikuXG4gICAgICogTm90ZSB0aGF0IENoZWNrb3V0IHN1cHBvcnRzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHNldCBvZiBsb2NhbGVzIHRoYW4gU3RyaXBlLmpzLlxuICAgICAqL1xuICAgIGxvY2FsZT86IHN0cmluZztcblxuICAgIGJldGFzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbkRhdGEge1xuICAgIHJlZGlyZWN0X3VybD86IHN0cmluZztcbiAgICBpbnRlbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGRhdGE6IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNhcmRFbGVtZW50cyB7XG4gICAgW2luZGV4OiBudW1iZXJdOiBTdHJpcGVFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMge1xuICAgIGNhcmRDdmNFbGVtZW50T3B0aW9uczogQ2FyZEN2Y0VsZW1lbnRPcHRpb25zO1xuICAgIGNhcmRFeHBpcnlFbGVtZW50T3B0aW9uczogQ2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zO1xuICAgIGNhcmROdW1iZXJFbGVtZW50T3B0aW9uczogQ2FyZE51bWJlckVsZW1lbnRPcHRpb25zO1xuICAgIHppcENvZGVFbGVtZW50T3B0aW9ucz86IFppcENvZGVFbGVtZW50T3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVWM1BheW1lbnRNZXRob2QgZXh0ZW5kcyBQYXltZW50TWV0aG9kIHtcbiAgICBpbml0aWFsaXphdGlvbkRhdGE6IFN0cmlwZVYzSW5pdGlhbGl6YXRpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVYzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nO1xuICAgIHN0cmlwZUNvbm5lY3RlZEFjY291bnQ6IHN0cmluZztcbiAgICB1c2VJbmRpdmlkdWFsQ2FyZEZpZWxkczogYm9vbGVhbjtcbiAgICBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzPzogYm9vbGVhbjtcbn1cbiIsImltcG9ydCB7IFN0YW5kYXJkRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGVudW0gU3RyaXBlVjNFcnJvclR5cGUge1xuICAgIEF1dGhGYWlsdXJlID0gJ2F1dGhfZmFpbHVyZScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZVYzRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBzdWJ0eXBlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihzdWJ0eXBlOiBTdHJpcGVWM0Vycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMudHlwZSA9ICdzdHJpcGV2M19lcnJvcic7XG4gICAgICAgIHRoaXMuc3VidHlwZSA9IHN1YnR5cGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogU3RyaXBlVjNFcnJvclR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBTdHJpcGVWM0Vycm9yVHlwZS5BdXRoRmFpbHVyZTpcbiAgICAgICAgICAgIHJldHVybiBgVXNlciBkaWQgbm90IGF1dGhlbnRpY2F0ZWA7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdXMuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpbmNsdWRlcywgaXNFbXB0eSwgb21pdEJ5LCBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIEN1c3RvbWVyLFxuICAgIEhvc3RlZEZvcm0sXG4gICAgSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNCaWxsaW5nQWRkcmVzc0xpa2UsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFN0cmlwZVYzRm9ybWF0dGVkUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBpc0luZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgZnJvbSAnLi9pcy1pbmRpdmlkdWFsLWNhcmQtZWxlbWVudC1vcHRpb25zJztcbmltcG9ydCB7XG4gICAgUGF5bWVudEludGVudCxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uLFxuICAgIFN0cmlwZUFkZHJlc3MsXG4gICAgU3RyaXBlQmlsbGluZ0RldGFpbHMsXG4gICAgU3RyaXBlQ2FyZEVsZW1lbnRzLFxuICAgIFN0cmlwZUNvbmZpcm1JZGVhbFBheW1lbnREYXRhLFxuICAgIFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSxcbiAgICBTdHJpcGVDb25maXJtU2VwYVBheW1lbnREYXRhLFxuICAgIFN0cmlwZUVsZW1lbnQsXG4gICAgU3RyaXBlRWxlbWVudE9wdGlvbnMsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudFR5cGUsXG4gICAgU3RyaXBlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kLFxuICAgIFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLFxuICAgIFN0cmlwZVYzQ2xpZW50LFxuICAgIFN0cmlwZVYzUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnLi9zdHJpcGV2Myc7XG5pbXBvcnQgU3RyaXBlVjNFcnJvciwgeyBTdHJpcGVWM0Vycm9yVHlwZSB9IGZyb20gJy4vc3RyaXBldjMtZXJyb3InO1xuaW1wb3J0IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3N0cmlwZXYzLWluaXRpYWxpemUtb3B0aW9ucyc7XG5pbXBvcnQgU3RyaXBlVjNTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGV2My1zY3JpcHQtbG9hZGVyJztcblxuY29uc3QgQVBNX1JFRElSRUNUID0gW1N0cmlwZUVsZW1lbnRUeXBlLkFsaXBheSwgU3RyaXBlRWxlbWVudFR5cGUuSURFQUxdO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVWM1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBpbml0aWFsaXplT3B0aW9ucz86IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgc3RyaXBlVjNDbGllbnQ/OiBTdHJpcGVWM0NsaWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgcHJpdmF0ZSBzdHJpcGVFbGVtZW50PzogU3RyaXBlRWxlbWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUNhcmRFbGVtZW50cz86IFN0cmlwZUNhcmRFbGVtZW50cztcbiAgICBwcml2YXRlIHVzZUluZGl2aWR1YWxDYXJkRmllbGRzPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByaXZhdGUgaXNEZWluaXRpYWxpemU/OiBib29sZWFuO1xuICAgIHByaXZhdGUgX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVYzU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgc3RyaXBldjMsIG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplT3B0aW9ucyA9IHN0cmlwZXYzO1xuICAgICAgICB0aGlzLmlzRGVpbml0aWFsaXplID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RyaXBlUHVibGlzaGFibGVLZXksXG4gICAgICAgICAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgICAgICAgICAgICB1c2VJbmRpdmlkdWFsQ2FyZEZpZWxkcyxcbiAgICAgICAgICAgICAgICBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSA9IHBheW1lbnRNZXRob2QgYXMgU3RyaXBlVjNQYXltZW50TWV0aG9kO1xuXG4gICAgICAgIHRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHMgPSBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCkuZm9ybTtcblxuICAgICAgICB0aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzID0gdXNlSW5kaXZpZHVhbENhcmRGaWVsZHM7XG4gICAgICAgIHRoaXMuc3RyaXBlVjNDbGllbnQgPSBhd2FpdCB0aGlzLmxvYWRTdHJpcGVKcyhzdHJpcGVQdWJsaXNoYWJsZUtleSwgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pc0NyZWRpdENhcmQobWV0aG9kSWQpICYmXG4gICAgICAgICAgICB0aGlzLnNob3VsZFNob3dUU1ZIb3N0ZWRGb3JtKG1ldGhvZElkLCBnYXRld2F5SWQpICYmXG4gICAgICAgICAgICBmb3JtXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5ob3N0ZWRGb3JtID0gYXdhaXQgdGhpcy5tb3VudENhcmRWZXJpZmljYXRpb25GaWVsZHMoZm9ybSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnQgPSBhd2FpdCB0aGlzLm1vdW50Q2FyZEZpZWxkcyhtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKG9yZGVyUmVxdWVzdDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBvcmRlclJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGZvcm1hdHRlZFBheWxvYWQ6IFN0cmlwZVYzRm9ybWF0dGVkUGF5bG9hZDtcbiAgICAgICAgbGV0IHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnQucGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSwgZ2F0ZXdheUlkLCBtZXRob2RJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50LCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudERhdGFcbiAgICAgICAgICAgIDogeyBzaG91bGRTYXZlSW5zdHJ1bWVudDogZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlIH07XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkU3VibWl0T3JkZXJCZWZvcmVMb2FkaW5nQVBNID0gaW5jbHVkZXMoQVBNX1JFRElSRUNULCBtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBpc1N0b3JlQ3JlZGl0QXBwbGllZDogdXNlU3RvcmVDcmVkaXQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBpZiAodXNlU3RvcmVDcmVkaXQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseVN0b3JlQ3JlZGl0KHVzZVN0b3JlQ3JlZGl0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU3VibWl0T3JkZXJCZWZvcmVMb2FkaW5nQVBNKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdhdGV3YXlJZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgaWYgKGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSBwYXltZW50RGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cocGF5bWVudC5tZXRob2RJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50VG9rZW4gPSBwYXltZW50TWV0aG9kLmNsaWVudFRva2VuO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50LFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbmZpcm1TdHJpcGVQYXltZW50KHBheW1lbnRNZXRob2QpO1xuICAgICAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgbWV0aG9kIH0gPSBwYXltZW50TWV0aG9kO1xuICAgICAgICAgICAgY29uc3QgeyBpZDogdG9rZW4gfSA9IHJlc3VsdC5wYXltZW50SW50ZW50ID8/IHJlc3VsdC5wYXltZW50TWV0aG9kID8/IHsgaWQ6ICcnIH07XG5cbiAgICAgICAgICAgIHN0cmlwZUVycm9yID0gcmVzdWx0LmVycm9yO1xuXG4gICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFN0cmlwZUVsZW1lbnRUeXBlLkNyZWRpdENhcmQpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLmNsaWVudF90b2tlbiA9IGNsaWVudFRva2VuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXNob3VsZFN1Ym1pdE9yZGVyQmVmb3JlTG9hZGluZ0FQTSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5idWlsZFBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFbXB0eVBheW1lbnRJbnRlbnRFcnJvcihlcnJvciwgc3RyaXBlRXJyb3IpLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0RlaW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgICAgIHRoaXMudW5tb3VudEVsZW1lbnQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiBTdHJpcGVWM0Zvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW4gfCB1bmRlZmluZWQsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogeyBmb3JtYXR0ZWRQYXlsb2FkIH07XG5cbiAgICAgICAgcmV0dXJuIHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NhbmNlbGxhdGlvbkVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgJiZcbiAgICAgICAgICAgIHN0cmlwZUVycm9yLnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcj8ubWVzc2FnZT8uaW5kZXhPZignY2FuY2VsZWQnKSAhPT0gLTFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQXV0aEVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gc3RyaXBlRXJyb3I/LmNvZGUgPT09ICdwYXltZW50X2ludGVudF9hdXRoZW50aWNhdGlvbl9mYWlsdXJlJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZCA9PT0gU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuQ3JlZGl0Q2FyZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSG9zdGVkRmllbGRBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGRlZmluZWRGaWVsZHMgPSBvbWl0Qnkob3B0aW9ucy5mb3JtPy5maWVsZHMsIGlzRW1wdHkpO1xuXG4gICAgICAgIHJldHVybiAhaXNFbXB0eShkZWZpbmVkRmllbGRzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRNZXRob2RPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHJldHVybiBCb29sZWFuKHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY29uZmlybVN0cmlwZVBheW1lbnQocGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8e1xuICAgICAgICBwYXltZW50SW50ZW50PzogUGF5bWVudEludGVudCB8IHVuZGVmaW5lZDtcbiAgICAgICAgcGF5bWVudE1ldGhvZD86IFN0cmlwZVBheW1lbnRNZXRob2QgfCB1bmRlZmluZWQ7XG4gICAgICAgIGVycm9yPzogU3RyaXBlRXJyb3IgfCB1bmRlZmluZWQ7XG4gICAgfT4ge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuOiBjbGllbnRTZWNyZXQsIG1ldGhvZCwgcmV0dXJuVXJsIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghY2xpZW50U2VjcmV0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5BbGlwYXk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtQWxpcGF5UGF5bWVudChcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICB7IHJldHVybl91cmw6IHJldHVyblVybCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGhhbmRsZUFjdGlvbnM6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5JREVBTDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1hcFN0cmlwZVBheW1lbnREYXRhKFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLklERUFMLCByZXR1cm5VcmwpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtSWRlYWxQYXltZW50KGNsaWVudFNlY3JldCwgZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVBY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5TZXBhOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMubWFwU3RyaXBlUGF5bWVudERhdGEoU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuU2VwYSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpcGVKcygpLmNvbmZpcm1TZXBhRGViaXRQYXltZW50KGNsaWVudFNlY3JldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gdGhpcy51c2VJbmRpdmlkdWFsQ2FyZEZpZWxkc1xuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0U3RyaXBlQ2FyZEVsZW1lbnRzKClbMF1cbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldFN0cmlwZUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiaWxsaW5nRGV0YWlscyA9IHRoaXMubWFwU3RyaXBlQmlsbGluZ0RldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEN1c3RvbWVyKCksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRBbGxvd1JlZGlzcGxheSA9IHRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpcGVKcygpLmNyZWF0ZVBheW1lbnRNZXRob2Qoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdHJpcGVQYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkLFxuICAgICAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nX2RldGFpbHM6IGJpbGxpbmdEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oc2hvdWxkQWxsb3dSZWRpc3BsYXkgPyB7IGFsbG93X3JlZGlzcGxheTogJ2Fsd2F5cycgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICBwYXltZW50OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbiB8IHVuZGVmaW5lZCxcbiAgICAgICAgY2xpZW50VG9rZW46IHN0cmluZyxcbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICBjb25maXJtOiB0cnVlLFxuICAgICAgICAgICAgY2xpZW50X3Rva2VuOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQocGF5bWVudC5tZXRob2RJZCwgcGF5bWVudC5nYXRld2F5SWQpICYmXG4gICAgICAgICAgICB0aGlzLmhvc3RlZEZvcm1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5ob3N0ZWRGb3JtO1xuXG4gICAgICAgICAgICBpZiAocGF5bWVudC5wYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnQucGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICAgICAgcGF5bWVudC5wYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudC5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcGF5bWVudC5wYXltZW50RGF0YT8uaW5zdHJ1bWVudElkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50X3Rva2VuOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgZm9ybS52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgYXdhaXQgZm9ybS5zdWJtaXQocGF5bWVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZEN1cnJlbnRPcmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLmJ1aWxkUGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEluaXRpYWxpemVPcHRpb25zKCk6IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zIHtcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTdHJpcGVDYXJkRWxlbWVudHMoKTogU3RyaXBlQ2FyZEVsZW1lbnRzIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZUNhcmRFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUNhcmRFbGVtZW50cztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN0cmlwZUVsZW1lbnQoKTogU3RyaXBlRWxlbWVudCB7XG4gICAgICAgIGlmICghdGhpcy5zdHJpcGVFbGVtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlRWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN0cmlwZUpzKCk6IFN0cmlwZVYzQ2xpZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZVYzQ2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlVjNDbGllbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFbXB0eVBheW1lbnRJbnRlbnRFcnJvcihlcnJvcjogdW5rbm93biwgc3RyaXBlRXJyb3I6IFN0cmlwZUVycm9yIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICghaXNSZXF1ZXN0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAncmVxdWlyZWRfZmllbGQnIH0pICYmIHN0cmlwZUVycm9yXG4gICAgICAgICAgICA/IG5ldyBFcnJvcihzdHJpcGVFcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgOiBlcnJvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTdHJpcGVKcyhcbiAgICAgICAgc3RyaXBlUHVibGlzaGFibGVLZXk6IHN0cmluZyxcbiAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8U3RyaXBlVjNDbGllbnQ+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyaXBlVjNDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5zdHJpcGVWM0NsaWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIubG9hZChcbiAgICAgICAgICAgIHN0cmlwZVB1Ymxpc2hhYmxlS2V5LFxuICAgICAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldExvY2FsZSgpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwU3RyaXBlQWRkcmVzcyhhZGRyZXNzPzogQWRkcmVzcyk6IFN0cmlwZUFkZHJlc3Mge1xuICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgICAgICAgICAgYWRkcmVzczE6IGxpbmUxLFxuICAgICAgICAgICAgICAgIGFkZHJlc3MyOiBsaW5lMixcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHN0YXRlLFxuICAgICAgICAgICAgfSA9IGFkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7IGNpdHksIGNvdW50cnksIGxpbmUxLCBsaW5lMiwgcG9zdGFsX2NvZGU6IHBvc3RhbENvZGUsIHN0YXRlIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBsaW5lMTogJycgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKFxuICAgICAgICBiaWxsaW5nQWRkcmVzcz86IEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICBjdXN0b21lcj86IEN1c3RvbWVyLFxuICAgICk6IFN0cmlwZUJpbGxpbmdEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lIH0gPSBiaWxsaW5nQWRkcmVzcyB8fFxuICAgICAgICAgICAgY3VzdG9tZXIgfHwgeyBmaXJzdE5hbWU6ICdHdWVzdCcsIGxhc3ROYW1lOiAnJyB9O1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAudHJpbSgpO1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgfSA9IHRoaXMuZ2V0SW5pdGlhbGl6ZU9wdGlvbnMoKTtcblxuICAgICAgICBpZiAodGhpcy51c2VJbmRpdmlkdWFsQ2FyZEZpZWxkcyAmJiBpc0luZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgemlwQ29kZUVsZW1lbnRPcHRpb25zIH0gPSBvcHRpb25zO1xuXG4gICAgICAgICAgICBpZiAoemlwQ29kZUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zdGFsQ29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHppcENvZGVFbGVtZW50T3B0aW9ucy5jb250YWluZXJJZClcbiAgICAgICAgICAgICAgICAgICAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwQ29kZUVsZW1lbnRPcHRpb25zLmNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICApLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9zdGFsQ29kZSAmJiBiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyA9IHsgLi4uYmlsbGluZ0FkZHJlc3MsIHBvc3RhbENvZGUgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhZGRyZXNzID0ge1xuICAgICAgICAgICAgYWRkcmVzczogdGhpcy5tYXBTdHJpcGVBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIgJiYgY3VzdG9tZXIuYWRkcmVzc2VzWzBdICYmIGlzQmlsbGluZ0FkZHJlc3NMaWtlKGN1c3RvbWVyLmFkZHJlc3Nlc1swXSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyQWRkcmVzcyA9IGN1c3RvbWVyLmFkZHJlc3Nlc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHsgZW1haWwgfSA9IGN1c3RvbWVyO1xuICAgICAgICAgICAgY29uc3QgeyBwaG9uZSB9ID0gY3VzdG9tZXJBZGRyZXNzO1xuXG4gICAgICAgICAgICByZXR1cm4gcGhvbmUgPyB7IC4uLmFkZHJlc3MsIGVtYWlsLCBuYW1lLCBwaG9uZSB9IDogeyAuLi5hZGRyZXNzLCBlbWFpbCwgbmFtZSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVtYWlsLCBwaG9uZSB9ID0gYmlsbGluZ0FkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiBwaG9uZSA/IHsgLi4uYWRkcmVzcywgZW1haWwsIG5hbWUsIHBob25lIH0gOiB7IC4uLmFkZHJlc3MsIGVtYWlsLCBuYW1lIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyAuLi5hZGRyZXNzLCBuYW1lIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBTdHJpcGVQYXltZW50RGF0YShcbiAgICAgICAgc3RyaXBlUGF5bWVudE1ldGhvZFR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLklERUFMLFxuICAgICAgICByZXR1cm5Vcmw/OiBzdHJpbmcsXG4gICAgKTogU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGE7XG4gICAgcHJpdmF0ZSBtYXBTdHJpcGVQYXltZW50RGF0YShcbiAgICAgICAgc3RyaXBlUGF5bWVudE1ldGhvZFR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLlNlcGEsXG4gICAgKTogU3RyaXBlQ29uZmlybVNlcGFQYXltZW50RGF0YTtcbiAgICBwcml2YXRlIG1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICBzdHJpcGVQYXltZW50TWV0aG9kVHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgICAgIHJldHVyblVybD86IHN0cmluZyxcbiAgICApOiBTdHJpcGVDb25maXJtUGF5bWVudERhdGEge1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQ6IFBhcnRpYWw8U3RyaXBlQ29uZmlybVBheW1lbnREYXRhPiA9IHtcbiAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgW3N0cmlwZVBheW1lbnRNZXRob2RUeXBlXTogdGhpcy5nZXRTdHJpcGVFbGVtZW50KCksXG4gICAgICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB0aGlzLm1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKGJpbGxpbmdBZGRyZXNzLCBjdXN0b21lciksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzdHJpcGVQYXltZW50TWV0aG9kVHlwZSA9PT0gU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuSURFQUwpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwgcmV0dXJuX3VybDogcmV0dXJuVXJsIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgbW91bnRDYXJkRmllbGRzKG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPFN0cmlwZUVsZW1lbnQ+IHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zLCBjb250YWluZXJJZCB9ID0gdGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpO1xuXG4gICAgICAgIGxldCBzdHJpcGVFbGVtZW50OiBTdHJpcGVFbGVtZW50O1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gdGhpcy5nZXRTdHJpcGVKcygpLmVsZW1lbnRzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAobWV0aG9kSWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN0cmlwZUVsZW1lbnRUeXBlLkNyZWRpdENhcmQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzICYmIGlzSW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyhvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEN2Y0VsZW1lbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmROdW1iZXJFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuQ2FyZE51bWJlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaXBlRWxlbWVudFR5cGUuQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlckVsZW1lbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkRXhwaXJ5RWxlbWVudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLkNhcmRFeHBpcnkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmlwZUVsZW1lbnRUeXBlLkNhcmRFeHBpcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcnlFbGVtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEN2Y0VsZW1lbnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5DYXJkQ3ZjKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpcGVFbGVtZW50VHlwZS5DYXJkQ3ZjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ3ZjRWxlbWVudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVDYXJkRWxlbWVudHMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlckVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEN2Y0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlRWxlbWVudCA9IHRoaXMuc3RyaXBlQ2FyZEVsZW1lbnRzWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJFbGVtZW50Lm1vdW50KGAjJHtjYXJkTnVtYmVyRWxlbWVudE9wdGlvbnMuY29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeUVsZW1lbnQubW91bnQoYCMke2NhcmRFeHBpcnlFbGVtZW50T3B0aW9ucy5jb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ3ZjRWxlbWVudC5tb3VudChgIyR7Y2FyZEN2Y0VsZW1lbnRPcHRpb25zLmNvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQobWV0aG9kSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUobWV0aG9kSWQsIG9wdGlvbnMgYXMgU3RyaXBlRWxlbWVudE9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwZUVsZW1lbnQubW91bnQoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RyaXBlRWxlbWVudFR5cGUuSURFQUw6XG4gICAgICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5TZXBhOlxuICAgICAgICAgICAgICAgICAgICBzdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChtZXRob2RJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuY3JlYXRlKG1ldGhvZElkLCBvcHRpb25zIGFzIFN0cmlwZUVsZW1lbnRPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RyaXBlRWxlbWVudFR5cGUuQWxpcGF5OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShzdHJpcGVFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBtb3VudENhcmRWZXJpZmljYXRpb25GaWVsZHMoZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zKTogUHJvbWlzZTxIb3N0ZWRGb3JtPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHN0b3JlQ29uZmlnID0gc3RhdGUuZ2V0U3RvcmVDb25maWcoKTtcblxuICAgICAgICBpZiAoIXN0b3JlQ29uZmlnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlncGF5QmFzZVVybCA9IHN0b3JlQ29uZmlnLnBheW1lbnRTZXR0aW5ncy5iaWdwYXlCYXNlVXJsO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlSG9zdGVkRm9ybShiaWdwYXlCYXNlVXJsLCBmb3JtT3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgZm9ybS5hdHRhY2goKTtcblxuICAgICAgICByZXR1cm4gZm9ybTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICk6IFByb21pc2U8YW55IHwgbmV2ZXI+IHtcbiAgICAgICAgaWYgKCFpc1JlcXVlc3RFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IgPSBzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7XG4gICAgICAgICAgICBjb2RlOiAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNUaHJlZURTZWN1cmVSZXF1aXJlZEVycm9yID0gc29tZShlcnJvci5ib2R5LmVycm9ycywge1xuICAgICAgICAgICAgY29kZTogJ3RocmVlX2Rfc2VjdXJlX3JlcXVpcmVkJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGlzQWRkaXRpb25hbEFjdGlvbkVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb246IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb24gPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkO1xuXG4gICAgICAgICAgICBpZiAoYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSAncmVkaXJlY3RfdG9fdXJsJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uZGF0YS5yZWRpcmVjdF91cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGFjdGlvbi5kYXRhLnJlZGlyZWN0X3VybCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1RocmVlRFNlY3VyZVJlcXVpcmVkRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0LnRva2VuO1xuICAgICAgICAgICAgY29uc3QgbmVlZHNDb25maXJtID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgY2F0Y2hlZENvbmZpcm1FcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHJlc3VsdDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmdldFN0cmlwZUpzKCkuY29uZmlybUNhcmRQYXltZW50KGNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNhdGNoZWRDb25maXJtRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzdWx0Py5lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGF0aW9uRXJyb3IocmVzdWx0LmVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBdXRoRXJyb3IocmVzdWx0LmVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RyaXBlVjNFcnJvcihTdHJpcGVWM0Vycm9yVHlwZS5BdXRoRmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLmdldFBheW1lbnRUb2tlbihcbiAgICAgICAgICAgICAgICByZXN1bHQ/LnBheW1lbnRJbnRlbnQsXG4gICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgICAgIGNhdGNoZWRDb25maXJtRXJyb3IsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBjb25maXJtOiBuZWVkc0NvbmZpcm0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuYnVpbGRQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRW1wdHlQYXltZW50SW50ZW50RXJyb3IoZXJyb3IsIHJlc3VsdD8uZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIHBheW1lbnRJbnRlbnQ6IFBheW1lbnRJbnRlbnQgfCB1bmRlZmluZWQsXG4gICAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nLFxuICAgICAgICBjYXRjaGVkQ29uZmlybUVycm9yOiBib29sZWFuLFxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGlmICghcGF5bWVudEludGVudCB8fCBjYXRjaGVkQ29uZmlybUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50U2VjcmV0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRJbnRlbnQuaWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG91bGRTaG93VFNWSG9zdGVkRm9ybShtZXRob2RJZDogc3RyaW5nLCBnYXRld2F5SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKCkgJiYgdGhpcy5pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZCwgZ2F0ZXdheUlkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdW5tb3VudEVsZW1lbnQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnN0cmlwZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudC51bm1vdW50KCk7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgQmlsbGluZ0FkZHJlc3MgZnJvbSAnLi9iaWxsaW5nLWFkZHJlc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpbGxpbmdBZGRyZXNzTGlrZShhZGRyZXNzOiBhbnkpOiBhZGRyZXNzIGlzIEJpbGxpbmdBZGRyZXNzIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgYWRkcmVzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgYWRkcmVzcyAhPT0gbnVsbCAmJlxuICAgICAgICAnaWQnIGluIGFkZHJlc3MgJiZcbiAgICAgICAgdHlwZW9mIGFkZHJlc3MuaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgU3RyaXBlSG9zdFdpbmRvdywgU3RyaXBlVjNDbGllbnQgfSBmcm9tICcuL3N0cmlwZXYzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlVjNTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZVdpbmRvdzogU3RyaXBlSG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBsb2FkKFxuICAgICAgICBzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nLFxuICAgICAgICBzdHJpcGVBY2NvdW50OiBzdHJpbmcsXG4gICAgICAgIGxvY2FsZT86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFN0cmlwZVYzQ2xpZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KCdodHRwczovL2pzLnN0cmlwZS5jb20vdjMvJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlV2luZG93LlN0cmlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlKHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCB7XG4gICAgICAgICAgICAgICAgc3RyaXBlQWNjb3VudCxcbiAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgYmV0YXM6IFsncGF5bWVudF9pbnRlbnRfYmV0YV8zJywgJ2FsaXBheV9wbV9iZXRhXzEnXSxcbiAgICAgICAgICAgICAgICBhcGlWZXJzaW9uOiAnMjAyMC0wMy0wMjthbGlwYXlfYmV0YT12MScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFN0cmlwZVYzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vc3RyaXBldjMtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgU3RyaXBlVjNTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGV2My1zY3JpcHQtbG9hZGVyJztcblxuY29uc3QgY3JlYXRlU3RyaXBlVjNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8YW55PiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTdHJpcGVWM1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFN0cmlwZVYzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZVYzUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAnc3RyaXBldjMnIH1dKTtcbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IHN1cHBvcnRlZExvY2FsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiA9IHtcbiAgICBhcjogWydhciddLFxuICAgIGJnOiBbJ2JnJ10sXG4gICAgY3M6IFsnY3MnXSxcbiAgICBkYTogWydkYSddLFxuICAgIGRlOiBbJ2RlJ10sXG4gICAgZWw6IFsnZWwnXSxcbiAgICBlbjogWydlbicsICdlbi1HQiddLFxuICAgIGVzOiBbJ2VzJywgJ2VzLTQxOSddLFxuICAgIGV0OiBbJ2V0J10sXG4gICAgZmk6IFsnZmknXSxcbiAgICBmaWw6IFsnZmlsJ10sXG4gICAgZnI6IFsnZnInLCAnZnItQ0EnXSxcbiAgICBoZTogWydoZSddLFxuICAgIGhyOiBbJ2hyJ10sXG4gICAgaHU6IFsnaHUnXSxcbiAgICBpZDogWydpZCddLFxuICAgIGl0OiBbJ2l0J10sXG4gICAgamE6IFsnamEnXSxcbiAgICBrbzogWydrbyddLFxuICAgIGx0OiBbJ2x0J10sXG4gICAgbHY6IFsnbHYnXSxcbiAgICBtczogWydtcyddLFxuICAgIG10OiBbJ210J10sXG4gICAgbmI6IFsnbmInXSxcbiAgICBubDogWydubCddLFxuICAgIHBsOiBbJ3BsJ10sXG4gICAgcHQ6IFsncHQnLCAncHQtQlInXSxcbiAgICBybzogWydybyddLFxuICAgIHJ1OiBbJ3J1J10sXG4gICAgc2s6IFsnc2snXSxcbiAgICBzbDogWydzbCddLFxuICAgIHN2OiBbJ3N2J10sXG4gICAgdGg6IFsndGgnXSxcbiAgICB0cjogWyd0ciddLFxuICAgIHZpOiBbJ3ZpJ10sXG4gICAgemg6IFsnemgnLCAnemgtSEsnLCAnemgtVFcnXSxcbn07XG4iLCJpbXBvcnQgeyBzdXBwb3J0ZWRMb2NhbGVzIH0gZnJvbSAnLi9zdHJpcGUtc3VwcG9ydGVkLWxvY2FsZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBmb3JtYXRMb2NhbGUobG9jYWxlTGFuZ3VhZ2U6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgW2xhbmd1YWdlLCBjb3VudHJ5XSA9IGxvY2FsZUxhbmd1YWdlLnJlcGxhY2UoL18vZywgJy0nKS50b0xvd2VyQ2FzZSgpLnNwbGl0KCctJyk7XG4gICAgY29uc3QgY291bnRyeUxvY2FsZXMgPSBzdXBwb3J0ZWRMb2NhbGVzW2xhbmd1YWdlXTtcblxuICAgIGlmICghY291bnRyeUxvY2FsZXMpIHtcbiAgICAgICAgcmV0dXJuICdhdXRvJztcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWRMb2NhbGUgPSBjb3VudHJ5ID8gYCR7bGFuZ3VhZ2V9LSR7Y291bnRyeS50b1VwcGVyQ2FzZSgpfWAgOiBsYW5ndWFnZTtcblxuICAgIHJldHVybiBjb3VudHJ5TG9jYWxlcy5pbmRleE9mKGZvcm1hdHRlZExvY2FsZSkgPiAtMSA/IGZvcm1hdHRlZExvY2FsZSA6IGNvdW50cnlMb2NhbGVzWzBdO1xufVxuIiwiaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgRm9ybWF0dGVkSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBSZXF1ZXN0RXJyb3IsXG4gICAgU3RyaXBlVVBFSW50ZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZm9ybWF0U3RyaXBlTG9jYWxlLFxuICAgIGlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UsXG4gICAgU1RSSVBFX1VQRV9DTElFTlRfQVBJX1ZFUlNJT04sXG4gICAgU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMsXG4gICAgU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkLFxuICAgIFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zLFxuICAgIFN0cmlwZUNsaWVudCxcbiAgICBTdHJpcGVFbGVtZW50LFxuICAgIFN0cmlwZUVsZW1lbnRFdmVudCxcbiAgICBTdHJpcGVFbGVtZW50cyxcbiAgICBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMsXG4gICAgU3RyaXBlRWxlbWVudFR5cGUsXG4gICAgU3RyaXBlRWxlbWVudFVwZGF0ZU9wdGlvbnMsXG4gICAgU3RyaXBlRXJyb3IsXG4gICAgU3RyaXBlRXZlbnRUeXBlLFxuICAgIFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlSnNWZXJzaW9uLFxuICAgIFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLFxuICAgIFN0cmlwZVJlc3VsdCxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5cbmltcG9ydCBpc1N0cmlwZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lciBmcm9tICcuL2lzLXN0cmlwZS1hY2NlbGVyYXRlZC1jaGVja291dC1jdXN0b21lcic7XG5pbXBvcnQgU3RyaXBlVVBFUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFN0cmlwZVVQRVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9zdHJpcGUtdXBlLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZVVQRVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfc3RyaXBlVVBFQ2xpZW50PzogU3RyaXBlQ2xpZW50O1xuICAgIHByaXZhdGUgX3N0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgcHJpdmF0ZSBfaXNTdHJpcGVFbGVtZW50VXBkYXRlRW5hYmxlZD86IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBfYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cz86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZUludGVncmF0aW9uU2VydmljZTogU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhTdHJpcGVVUEVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgc3RyaXBldXBlLCBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghc3RyaXBldXBlPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2xvYWRTdHJpcGVFbGVtZW50KHN0cmlwZXVwZSwgZ2F0ZXdheUlkLCBtZXRob2RJZCkuY2F0Y2goKGVycm9yKSA9PlxuICAgICAgICAgICAgc3RyaXBldXBlLm9uRXJyb3I/LihlcnJvciksXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBzdHJpcGV1cGUsXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5wYXltZW50RGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuX3N0cmlwZVVQRUNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudERhdGEsIG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGlzU3RvcmVDcmVkaXRBcHBsaWVkOiB1c2VTdG9yZUNyZWRpdCB9ID0gc3RhdGUuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0cmlwZVBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY29uc3Qgc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGUgPVxuICAgICAgICAgICAgc3RyaXBlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIuc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGU7XG5cbiAgICAgICAgaWYgKHVzZVN0b3JlQ3JlZGl0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuYXBwbHlTdG9yZUNyZWRpdCh1c2VTdG9yZUNyZWRpdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS51cGRhdGVTdHJpcGVQYXltZW50SW50ZW50KGdhdGV3YXlJZCwgbWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCB7IGVtYWlsIH0gPSBzdGF0ZS5nZXRDdXN0b21lck9yVGhyb3coKTtcblxuICAgICAgICAgICAgaWYgKHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlICE9PSB1bmRlZmluZWQgJiYgIWVtYWlsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9leGVjdXRlV2l0aFZhdWx0ZWQoXG4gICAgICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX2V4ZWN1dGVXaXRoU3RyaXBlQ29uZmlybWF0aW9uKFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgIHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlID8gZmFsc2UgOiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHM/LmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCk/LnVubW91bnQoKTtcbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9zdHJpcGVVUEVDbGllbnQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2V4ZWN1dGVXaXRoU3RyaXBlQ29uZmlybWF0aW9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuIH0gPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGNsaWVudFRva2VuIHx8ICcnLFxuICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbldpdGhTdHJpcGVDb25maXJtYXRpb24oXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9leGVjdXRlV2l0aFZhdWx0ZWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHRva2VuOiBzdHJpbmcsXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMgfCB2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHN0YXRlLmdldENhcnQoKT8uaWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnRfaWQ6IGNhcnRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpZ3BheV90b2tlbjogeyB0b2tlbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRfdG9rZW46IHBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzVmF1bHRlZEFkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9sb2FkU3RyaXBlRWxlbWVudChcbiAgICAgICAgc3RyaXBldXBlOiBTdHJpcGVVUEVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lcklkLCBzdHlsZSwgcmVuZGVyLCBpbml0U3RyaXBlRWxlbWVudFVwZGF0ZVRyaWdnZXIgfSA9IHN0cmlwZXVwZTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZ2F0ZXdheUlkLCB7XG4gICAgICAgICAgICBwYXJhbXM6IHsgbWV0aG9kOiBtZXRob2RJZCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIWlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgc2hvcHBlckxhbmd1YWdlLFxuICAgICAgICAgICAgYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cyA9IGZhbHNlLFxuICAgICAgICAgICAgZW5hYmxlTGluayxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICB0aGlzLl9hbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzID0gYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cztcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdHJpcGVVUEVDbGllbnQgPSBhd2FpdCB0aGlzLl9sb2FkU3RyaXBlSnMoaW5pdGlhbGl6YXRpb25EYXRhKTtcbiAgICAgICAgdGhpcy5faXNTdHJpcGVFbGVtZW50VXBkYXRlRW5hYmxlZCA9IHR5cGVvZiBpbml0U3RyaXBlRWxlbWVudFVwZGF0ZVRyaWdnZXIgPT09ICdmdW5jdGlvbic7XG5cbiAgICAgICAgbGV0IGFwcGVhcmFuY2U6IFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmIChzdHlsZSkge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gc3R5bGU7XG5cbiAgICAgICAgICAgIGFwcGVhcmFuY2UgPSB7XG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5tYXBBcHBlYXJhbmNlVmFyaWFibGVzKHN0eWxlKSxcbiAgICAgICAgICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgICAgICAgICAnLklucHV0JzogdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwSW5wdXRBcHBlYXJhbmNlUnVsZXMoc3R5bGVzKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzID0gYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0RWxlbWVudHModGhpcy5fc3RyaXBlVVBFQ2xpZW50LCB7XG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgbG9jYWxlOiBmb3JtYXRTdHJpcGVMb2NhbGUoc2hvcHBlckxhbmd1YWdlKSxcbiAgICAgICAgICAgIGFwcGVhcmFuY2UsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0QmlsbGluZ0FkZHJlc3MsIGdldFNoaXBwaW5nQWRkcmVzcyB9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IHsgcG9zdGFsQ29kZSB9ID0gZ2V0U2hpcHBpbmdBZGRyZXNzKCkgfHwgZ2V0QmlsbGluZ0FkZHJlc3MoKSB8fCB7fTtcblxuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50OiBTdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCkgfHxcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLmNyZWF0ZShTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5ULCB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGJpbGxpbmdEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdhbGxldHM6IHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGVQYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGVuYWJsZUxpbmsgPyBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyA6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2dldFN0cmlwZUVsZW1lbnRUZXJtcygpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubW91bnRFbGVtZW50KHN0cmlwZUVsZW1lbnQsIGNvbnRhaW5lcklkKTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5SRUFEWSwgKCkgPT4ge1xuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LkNIQU5HRSwgKGV2ZW50OiBTdHJpcGVFdmVudFR5cGUpID0+IHtcbiAgICAgICAgICAgIGlmICghZXZlbnQ/LnZhbHVlIHx8ICEoJ3R5cGUnIGluIGV2ZW50LnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU3RyaXBlTGlua1N0YXRlQnlFbGVtZW50VHlwZShldmVudC52YWx1ZS50eXBlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzU3RyaXBlRWxlbWVudFVwZGF0ZUVuYWJsZWQpIHtcbiAgICAgICAgICAgIGluaXRTdHJpcGVFbGVtZW50VXBkYXRlVHJpZ2dlcj8uKHRoaXMuX3VwZGF0ZVN0cmlwZUVsZW1lbnQuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbldpdGhTdHJpcGVDb25maXJtYXRpb24oXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICF0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlcnJvci5ib2R5LmVycm9ycylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fc3RyaXBlVVBFQ2xpZW50IHx8ICF0aGlzLl9zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWRkaXRpb25hbEFjdGlvbkRhdGEgfSA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YSxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50SW50ZW50Py5pZCB8fCB0b2tlbixcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dQYXltZW50Q29uZmlybWF0aW9uUHJvY2VlZE1lc3NhZ2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2NvbmZpcm1TdHJpcGVQYXltZW50T3JUaHJvdyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYWRkaXRpb25hbEFjdGlvbkRhdGE6IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZFsnZGF0YSddLFxuICAgICk6IFByb21pc2U8U3RyaXBlUmVzdWx0IHwgbmV2ZXI+IHtcbiAgICAgICAgY29uc3QgeyB0b2tlbiwgcmVkaXJlY3RfdXJsIH0gPSBhZGRpdGlvbmFsQWN0aW9uRGF0YTtcbiAgICAgICAgY29uc3Qgc3RyaXBlUGF5bWVudERhdGEgPSB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5tYXBTdHJpcGVQYXltZW50RGF0YShcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLFxuICAgICAgICAgICAgcmVkaXJlY3RfdXJsLFxuICAgICAgICAgICAgISF0aGlzLl9hbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzLFxuICAgICAgICApO1xuICAgICAgICBsZXQgc3RyaXBlRXJyb3I6IFN0cmlwZUVycm9yIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpc1BheW1lbnRDb21wbGV0ZWQgPSBhd2FpdCB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc1BheW1lbnRDb21wbGV0ZWQoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RyaXBlVVBFQ2xpZW50LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gIWlzUGF5bWVudENvbXBsZXRlZFxuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5fc3RyaXBlVVBFQ2xpZW50Py5jb25maXJtUGF5bWVudChzdHJpcGVQYXltZW50RGF0YSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IHRoaXMuX3N0cmlwZVVQRUNsaWVudD8ucmV0cmlldmVQYXltZW50SW50ZW50KHRva2VuIHx8ICcnKTtcblxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgPSBjb25maXJtYXRpb25SZXN1bHQ/LmVycm9yO1xuXG4gICAgICAgICAgICBpZiAoc3RyaXBlRXJyb3IgfHwgIWNvbmZpcm1hdGlvblJlc3VsdD8ucGF5bWVudEludGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvblJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93U3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc1ZhdWx0ZWRBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgbWV0aG9kSWQ/OiBzdHJpbmcsXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSxcbiAgICApOiBQcm9taXNlPFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyB8IG5ldmVyPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFtZXRob2RJZCB8fFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXNvbWUoZXJyb3IuYm9keS5lcnJvcnMsIHsgY29kZTogJ3RocmVlX2Rfc2VjdXJlX3JlcXVpcmVkJyB9KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9zdHJpcGVVUEVDbGllbnQgfHwgIXRoaXMuX3N0cmlwZUVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2xpZW50U2VjcmV0ID0gZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQudG9rZW47XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGxldCBjYXRjaGVkQ29uZmlybUVycm9yID0gZmFsc2U7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3N0cmlwZVVQRUNsaWVudC5jb25maXJtQ2FyZFBheW1lbnQoY2xpZW50U2VjcmV0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fc3RyaXBlVVBFQ2xpZW50LnJldHJpZXZlUGF5bWVudEludGVudChjbGllbnRTZWNyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjYXRjaGVkQ29uZmlybUVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHQ/LmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3VsdD8ucGF5bWVudEludGVudCAmJiAhY2F0Y2hlZENvbmZpcm1FcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLl9nZXRQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY2F0Y2hlZENvbmZpcm1FcnJvciA/IGNsaWVudFNlY3JldCA6IHJlc3VsdD8ucGF5bWVudEludGVudD8uaWQsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9sb2FkU3RyaXBlSnMoXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICk6IFByb21pc2U8U3RyaXBlQ2xpZW50PiB7XG4gICAgICAgIGlmICh0aGlzLl9zdHJpcGVVUEVDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdHJpcGVVUEVDbGllbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdExvYWRlci5nZXRTdHJpcGVDbGllbnQoXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGEsXG4gICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0TG9jYWxlKCksXG4gICAgICAgICAgICBTdHJpcGVKc1ZlcnNpb24uVjMsXG4gICAgICAgICAgICBTVFJJUEVfVVBFX0NMSUVOVF9CRVRBUyxcbiAgICAgICAgICAgIFNUUklQRV9VUEVfQ0xJRU5UX0FQSV9WRVJTSU9OLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICB0b2tlbjogc3RyaW5nLFxuICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnQoKT8uaWQgfHwgJyc7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBheWxvYWQ6IFN0cmlwZVVQRUludGVudCAmIEZvcm1hdHRlZEhvc3RlZEluc3RydW1lbnQgPSB7XG4gICAgICAgICAgICBjYXJ0X2lkOiBjYXJ0SWQsXG4gICAgICAgICAgICBjcmVkaXRfY2FyZF90b2tlbjogeyB0b2tlbiB9LFxuICAgICAgICAgICAgY29uZmlybTogZmFsc2UsXG4gICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVTdHJpcGVFbGVtZW50KHsgc2hvdWxkU2hvd1Rlcm1zIH06IFN0cmlwZUVsZW1lbnRVcGRhdGVPcHRpb25zKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHN0cmlwZUVsZW1lbnQgPSB0aGlzLl9zdHJpcGVFbGVtZW50cz8uZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5UKTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Py51cGRhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZ2V0U3RyaXBlRWxlbWVudFRlcm1zKHNob3VsZFNob3dUZXJtcyksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFN0cmlwZUVsZW1lbnRUZXJtcyhcbiAgICAgICAgc2hvdWxkU2hvd1Rlcm1zPzogYm9vbGVhbixcbiAgICApOiBQaWNrPFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucywgJ3Rlcm1zJz4ge1xuICAgICAgICBsZXQgY2FyZCA9IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkKSB7XG4gICAgICAgICAgICBjYXJkID0gc2hvdWxkU2hvd1Rlcm1zID8gU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE8gOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGVybXM6IHtcbiAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF91cGRhdGVTdHJpcGVMaW5rU3RhdGVCeUVsZW1lbnRUeXBlKHBheW1lbnRFbGVtZW50VHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgaXNTdHJpcGVMaW5rRWxlbWVudFR5cGUgPSBwYXltZW50RWxlbWVudFR5cGUgPT09IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLkxpbms7XG5cbiAgICAgICAgLy8gSU5GTzogVHJpZ2dlciBhZGRpdGlvbmFsIHVwZGF0ZSBvbmx5IGlmIFN0cmlwZSBMaW5rIEF1dGhlbnRpY2F0aW9uIHdhcyBza2lwcGVkIG9uIHRoZSBjdXN0b21lciBzdGVwLCBidXQgdGhlIExpbmsgcGF5bWVudCBlbGVtZW50IHdhcyByZW5kZXJlZC5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyKHBheW1lbnRQcm92aWRlckN1c3RvbWVyKSAmJlxuICAgICAgICAgICAgaXNTdHJpcGVMaW5rRWxlbWVudFR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlOiBpc1N0cmlwZUxpbmtFbGVtZW50VHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vc3RyaXBlLXVwZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFN0cmlwZVVQRVBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIGNvbnN0IHN0cmlwZVNjcmlwdExvYWRlciA9IG5ldyBTdHJpcGVTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpO1xuXG4gICAgcmV0dXJuIG5ldyBTdHJpcGVVUEVQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgbmV3IFN0cmlwZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLCBzdHJpcGVTY3JpcHRMb2FkZXIpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAnc3RyaXBldXBlJyB9LFxuICAgIHsgZ2F0ZXdheTogJ3N0cmlwZXVwZScsIGlkOiAna2xhcm5hJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBTdHJpcGVQYXltZW50RXZlbnQgfSBmcm9tICcuL3N0cmlwZSc7XG5cbmV4cG9ydCBjb25zdCBpc1N0cmlwZVBheW1lbnRFdmVudCA9IChldmVudDogdW5rbm93bik6IGV2ZW50IGlzIFN0cmlwZVBheW1lbnRFdmVudCA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBldmVudCA9PT0gJ29iamVjdCcgJiYgZXZlbnQgIT09IG51bGwgJiYgJ3ZhbHVlJyBpbiBldmVudCAmJiAnY29sbGFwc2VkJyBpbiBldmVudDtcbn07XG4iLCJpbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGZvcm1hdFN0cmlwZUxvY2FsZSxcbiAgICBpc1N0cmlwZVBheW1lbnRFdmVudCxcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCxcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudFR5cGUsXG4gICAgU3RyaXBlRXJyb3IsXG4gICAgU3RyaXBlRXZlbnRUeXBlLFxuICAgIFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTdHJpcGVJbnN0cnVtZW50U2V0dXBGdXR1cmVVc2FnZSxcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlUElQYXltZW50TWV0aG9kT3B0aW9ucyxcbiAgICBTdHJpcGVQSVBheW1lbnRNZXRob2RTYXZpbmdPcHRpb25zLFxuICAgIFN0cmlwZVJlc3VsdCxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5cbmltcG9ydCBTdHJpcGVPQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoU3RyaXBlT0NTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3N0cmlwZS1vY3MtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlT0NTUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHN0cmlwZUNsaWVudD86IFN0cmlwZUNsaWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZE1ldGhvZElkPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBzdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2U6IFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoU3RyaXBlT0NTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHN0cmlwZW9jcywgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIXN0cmlwZW9jcz8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJnYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5faW5pdGlhbGl6ZVN0cmlwZUVsZW1lbnQoc3RyaXBlb2NzLCBnYXRld2F5SWQsIG1ldGhvZElkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3RyaXBlb2NzLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pbml0Q2hlY2tvdXRFdmVudHNTdWJzY3JpcHRpb24oXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHN0cmlwZW9jcyxcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQgfHwge307XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZUNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkIHx8ICFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJnYXRld2F5SWRcIiBvciBcIm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpc1N0b3JlQ3JlZGl0QXBwbGllZCB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChpc1N0b3JlQ3JlZGl0QXBwbGllZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQoaXNTdG9yZUNyZWRpdEFwcGxpZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQsIG1ldGhvZElkKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4gfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBjbGllbnRUb2tlbiB8fCAnJyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yLCBtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IHRoaXMuc3RyaXBlRWxlbWVudHM/LmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCk7XG5cbiAgICAgICAgcGF5bWVudEVsZW1lbnQ/LnVubW91bnQoKTtcbiAgICAgICAgcGF5bWVudEVsZW1lbnQ/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc3RyaXBlQ2xpZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9pbml0aWFsaXplU3RyaXBlRWxlbWVudChcbiAgICAgICAgc3RyaXBlOiBTdHJpcGVPQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBsZXQgcGF5bWVudE1ldGhvZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2Q/LmNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgbWV0aG9kOiBtZXRob2RJZCB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZShwYXltZW50TWV0aG9kKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuICAgICAgICBjb25zdCB7IHNob3BwZXJMYW5ndWFnZSwgY3VzdG9tZXJTZXNzaW9uVG9rZW4sIGVuYWJsZUxpbmsgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0cmlwZUNsaWVudCA9IGF3YWl0IHRoaXMuX2xvYWRTdHJpcGVKcyhpbml0aWFsaXphdGlvbkRhdGEpO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFwcGVhcmFuY2UsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGZvbnRzLFxuICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgICAgcmVuZGVyLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZFNlbGVjdCxcbiAgICAgICAgICAgIGhhbmRsZUNsb3NlUGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIHRvZ2dsZVByZWxvYWRlcixcbiAgICAgICAgfSA9IHN0cmlwZTtcblxuICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0RWxlbWVudHModGhpcy5zdHJpcGVDbGllbnQsIHtcbiAgICAgICAgICAgIGNsaWVudFNlY3JldDogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICBjdXN0b21lclNlc3Npb25DbGllbnRTZWNyZXQ6IGN1c3RvbWVyU2Vzc2lvblRva2VuLFxuICAgICAgICAgICAgbG9jYWxlOiBmb3JtYXRTdHJpcGVMb2NhbGUoc2hvcHBlckxhbmd1YWdlKSxcbiAgICAgICAgICAgIGFwcGVhcmFuY2UsXG4gICAgICAgICAgICBmb250cyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRCaWxsaW5nQWRkcmVzcywgZ2V0U2hpcHBpbmdBZGRyZXNzIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBnZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICBjb25zdCB7IHBvc3RhbENvZGUgfSA9IGdldFNoaXBwaW5nQWRkcmVzcygpIHx8IGJpbGxpbmdBZGRyZXNzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHN0cmlwZUVsZW1lbnQ6IFN0cmlwZUVsZW1lbnQgPVxuICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLlBBWU1FTlQpIHx8XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmNyZWF0ZShTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5ULCB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGJpbGxpbmdEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdhbGxldHM6IHtcbiAgICAgICAgICAgICAgICAgICAgYXBwbGVQYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGVuYWJsZUxpbmsgPyBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyA6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgICAgICBzYXZlUGF5bWVudE1ldGhvZDoge1xuICAgICAgICAgICAgICAgICAgICBtYXhWaXNpYmxlUGF5bWVudE1ldGhvZHM6IDIwLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlczoge1xuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubW91bnRFbGVtZW50KHN0cmlwZUVsZW1lbnQsIGNvbnRhaW5lcklkKTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5MT0FERVJfU1RBUlQsICgpID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZVByZWxvYWRlcj8uKGZhbHNlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuUkVBRFksICgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5DSEFOR0UsIChldmVudDogU3RyaXBlRXZlbnRUeXBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9vblN0cmlwZUVsZW1lbnRDaGFuZ2UoZXZlbnQsIGdhdGV3YXlJZCwgbWV0aG9kSWQsIHBheW1lbnRNZXRob2RTZWxlY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICBoYW5kbGVDbG9zZVBheW1lbnRNZXRob2Q/Lih0aGlzLl9jb2xsYXBzZVN0cmlwZUVsZW1lbnQuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfbG9hZFN0cmlwZUpzKFxuICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE6IFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICApOiBQcm9taXNlPFN0cmlwZUNsaWVudD4ge1xuICAgICAgICBpZiAodGhpcy5zdHJpcGVDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUNsaWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHN0cmlwZUpzVmVyc2lvbiA9XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5nZXRTdHJpcGVKc1ZlcnNpb24oaW5pdGlhbGl6YXRpb25EYXRhKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydExvY2FsZSgpLFxuICAgICAgICAgICAgc3RyaXBlSnNWZXJzaW9uLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxhcHNlU3RyaXBlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3Qgc3RyaXBlRWxlbWVudCA9IHRoaXMuc3RyaXBlRWxlbWVudHM/LmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudD8uY29sbGFwc2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgcGF5bWVudE1ldGhvZE9wdGlvbnM/OiBTdHJpcGVQSVBheW1lbnRNZXRob2RPcHRpb25zLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmlkIHx8ICcnO1xuICAgICAgICBjb25zdCB7IGNhcmQsIHVzX2JhbmtfYWNjb3VudCB9ID0gcGF5bWVudE1ldGhvZE9wdGlvbnMgfHwge307XG4gICAgICAgIGNvbnN0IHNob3VsZFNhdmVJbnN0cnVtZW50ID1cbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFNhdmVJbnN0cnVtZW50KGNhcmQpIHx8IHRoaXMuX3Nob3VsZFNhdmVJbnN0cnVtZW50KHVzX2JhbmtfYWNjb3VudCk7XG4gICAgICAgIGNvbnN0IHRva2VuaXplZE9wdGlvbnMgPSB0aGlzLl9nZXRUb2tlbml6ZWRPcHRpb25zKHRva2VuLCBwYXltZW50TWV0aG9kT3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgZm9ybWF0dGVkUGF5bG9hZCA9IHtcbiAgICAgICAgICAgIGNhcnRfaWQ6IGNhcnRJZCxcbiAgICAgICAgICAgIGNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgbWV0aG9kOiB0aGlzLnNlbGVjdGVkTWV0aG9kSWQsXG4gICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgLi4udG9rZW5pemVkT3B0aW9ucyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAhdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IoZXJyb3IuYm9keS5lcnJvcnMpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc3RyaXBlQ2xpZW50IHx8ICF0aGlzLnN0cmlwZUVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBkYXRhOiBhZGRpdGlvbmFsQWN0aW9uRGF0YSB9ID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDtcbiAgICAgICAgY29uc3QgeyB0b2tlbiB9ID0gYWRkaXRpb25hbEFjdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50SW50ZW50IH0gPSBhd2FpdCB0aGlzLl9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25EYXRhLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjbGllbnRfc2VjcmV0OiBwYXltZW50SW50ZW50Q2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgcGF5bWVudF9tZXRob2Rfb3B0aW9uczogcGF5bWVudE1ldGhvZE9wdGlvbnMsXG4gICAgICAgIH0gPSBwYXltZW50SW50ZW50IHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQgfHwgdG9rZW4sXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kT3B0aW9ucyxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGFkZGl0aW9uYWxBY3Rpb25EYXRhOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWRbJ2RhdGEnXSxcbiAgICApOiBQcm9taXNlPFN0cmlwZVJlc3VsdCB8IG5ldmVyPiB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4sIHJlZGlyZWN0X3VybCB9ID0gYWRkaXRpb25hbEFjdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHN0cmlwZVBheW1lbnREYXRhID0gdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEoXG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLFxuICAgICAgICAgICAgcmVkaXJlY3RfdXJsLFxuICAgICAgICApO1xuICAgICAgICBsZXQgc3RyaXBlRXJyb3I6IFN0cmlwZUVycm9yIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpc1BheW1lbnRDb21wbGV0ZWQgPSBhd2FpdCB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc1BheW1lbnRDb21wbGV0ZWQoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVDbGllbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSAhaXNQYXltZW50Q29tcGxldGVkXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLnN0cmlwZUNsaWVudD8uY29uZmlybVBheW1lbnQoc3RyaXBlUGF5bWVudERhdGEpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnN0cmlwZUNsaWVudD8ucmV0cmlldmVQYXltZW50SW50ZW50KHRva2VuIHx8ICcnKTtcblxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgPSBjb25maXJtYXRpb25SZXN1bHQ/LmVycm9yO1xuXG4gICAgICAgICAgICBpZiAoc3RyaXBlRXJyb3IgfHwgIWNvbmZpcm1hdGlvblJlc3VsdD8ucGF5bWVudEludGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvblJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX29uU3RyaXBlRWxlbWVudENoYW5nZShcbiAgICAgICAgZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnRNZXRob2RTZWxlY3Q/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCxcbiAgICApIHtcbiAgICAgICAgaWYgKCFpc1N0cmlwZVBheW1lbnRFdmVudChldmVudCkgfHwgZXZlbnQuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlbGVjdGVkTWV0aG9kSWQgPSBldmVudC52YWx1ZS50eXBlO1xuICAgICAgICBwYXltZW50TWV0aG9kU2VsZWN0Py4oYCR7Z2F0ZXdheUlkfS0ke21ldGhvZElkfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3Nob3VsZFNhdmVJbnN0cnVtZW50KHBheW1lbnRNZXRob2RPcHRpb25zPzogU3RyaXBlUElQYXltZW50TWV0aG9kU2F2aW5nT3B0aW9ucykge1xuICAgICAgICBjb25zdCBzZXR1cEZ1dHVyZVVzYWdlID0gcGF5bWVudE1ldGhvZE9wdGlvbnM/LnNldHVwX2Z1dHVyZV91c2FnZTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc2V0dXBGdXR1cmVVc2FnZSA9PT0gU3RyaXBlSW5zdHJ1bWVudFNldHVwRnV0dXJlVXNhZ2UuT05fU0VTU0lPTiB8fFxuICAgICAgICAgICAgc2V0dXBGdXR1cmVVc2FnZSA9PT0gU3RyaXBlSW5zdHJ1bWVudFNldHVwRnV0dXJlVXNhZ2UuT0ZGX1NFU1NJT05cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRUb2tlbml6ZWRPcHRpb25zKFxuICAgICAgICB0b2tlbjogc3RyaW5nLFxuICAgICAgICBwYXltZW50TWV0aG9kT3B0aW9ucz86IFN0cmlwZVBJUGF5bWVudE1ldGhvZE9wdGlvbnMsXG4gICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9zaG91bGRTYXZlSW5zdHJ1bWVudChwYXltZW50TWV0aG9kT3B0aW9ucz8udXNfYmFua19hY2NvdW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdG9rZW5pemVkX2FjaDogeyB0b2tlbiB9IH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBjcmVkaXRfY2FyZF90b2tlbjogeyB0b2tlbiB9IH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlT0NTUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vc3RyaXBlLW9jcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlU3RyaXBlT0NTUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFN0cmlwZU9DU1BheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIGNvbnN0IHN0cmlwZVNjcmlwdExvYWRlciA9IG5ldyBTdHJpcGVTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpO1xuXG4gICAgcmV0dXJuIG5ldyBTdHJpcGVPQ1NQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgbmV3IFN0cmlwZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLCBzdHJpcGVTY3JpcHRMb2FkZXIpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlU3RyaXBlT0NTUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAnc3RyaXBlb2NzJywgaWQ6ICdvcHRpbWl6ZWRfY2hlY2tvdXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBpc1N0cmlwZVBheW1lbnRFdmVudCxcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFN0cmlwZUNoZWNrb3V0U2Vzc2lvbixcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZUpzVmVyc2lvbixcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5cbmltcG9ydCBTdHJpcGVDU1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhTdHJpcGVDU1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9zdHJpcGUtY3MtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlQ1NQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgc3RyaXBlQ2xpZW50PzogU3RyaXBlQ2xpZW50O1xuICAgIHByaXZhdGUgc3RyaXBlQ2hlY2tvdXRTZXNzaW9uPzogU3RyaXBlQ2hlY2tvdXRTZXNzaW9uO1xuICAgIC8vIHByaXZhdGUgc2VsZWN0ZWRNZXRob2RJZD86IHN0cmluZzsgLy8gVE9ETzogdGVtcG9yYXJ5IGNvbW1lbnRlZCwgd2lsbCBiZSB1c2VkIGluIHRoZSBzdHJhdGVneSBleGVjdXRlIG1ldGhvZFxuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2U6IFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoU3RyaXBlQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgc3RyaXBlb2NzLCBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghc3RyaXBlb2NzPy5jb250YWluZXJJZCB8fCAhZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luaXRpYWxpemVTdHJpcGVFbGVtZW50KHN0cmlwZW9jcywgZ2F0ZXdheUlkLCBtZXRob2RJZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHN0cmlwZW9jcy5vbkVycm9yPy4oZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHBheW1lbnRFbGVtZW50ID0gdGhpcy5zdHJpcGVDaGVja291dFNlc3Npb24/LmdldFBheW1lbnRFbGVtZW50KCk7XG5cbiAgICAgICAgcGF5bWVudEVsZW1lbnQ/LnVubW91bnQoKTtcbiAgICAgICAgcGF5bWVudEVsZW1lbnQ/LmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0cmlwZUNsaWVudCA9IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfaW5pdGlhbGl6ZVN0cmlwZUVsZW1lbnQoXG4gICAgICAgIHN0cmlwZTogU3RyaXBlQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBsZXQgcGF5bWVudE1ldGhvZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxTdHJpcGVJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZD8uY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgICAgIHBhcmFtczogeyBtZXRob2Q6IG1ldGhvZElkIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZShwYXltZW50TWV0aG9kKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RyaXBlQ2xpZW50ID0gYXdhaXQgdGhpcy5fbG9hZFN0cmlwZUpzKGluaXRpYWxpemF0aW9uRGF0YSk7XG5cbiAgICAgICAgY29uc3QgeyBlbmFibGVMaW5rIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFwcGVhcmFuY2UsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGZvbnRzLFxuICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICAgICAgcmVuZGVyLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZFNlbGVjdCxcbiAgICAgICAgICAgIGhhbmRsZUNsb3NlUGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIHRvZ2dsZVByZWxvYWRlcixcbiAgICAgICAgfSA9IHN0cmlwZTtcblxuICAgICAgICBjb25zdCB7IGdldEJpbGxpbmdBZGRyZXNzLCBnZXRTaGlwcGluZ0FkZHJlc3MgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IGdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IHsgcG9zdGFsQ29kZSB9ID0gZ2V0U2hpcHBpbmdBZGRyZXNzKCkgfHwgYmlsbGluZ0FkZHJlc3MgfHwge307XG5cbiAgICAgICAgdGhpcy5zdHJpcGVDaGVja291dFNlc3Npb24gPSBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5nZXRDaGVja291dFNlc3Npb24odGhpcy5zdHJpcGVDbGllbnQsIHtcbiAgICAgICAgICAgIGNsaWVudFNlY3JldDogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICBlbGVtZW50c09wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgICAgIGZvbnRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkYXB0aXZlUHJpY2luZzoge1xuICAgICAgICAgICAgICAgIGFsbG93ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgICAgICAgICAgICBlbWFpbDogYmlsbGluZ0FkZHJlc3M/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3RyaXBlRWxlbWVudCA9IHRoaXMuX2NyZWF0ZVN0cmlwZUVsZW1lbnQoe1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgYmlsbGluZ0RldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGFsQ29kZTogcG9zdGFsQ29kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdhbGxldHM6IHtcbiAgICAgICAgICAgICAgICBhcHBsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGxpbms6IGVuYWJsZUxpbmsgPyBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyA6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXlvdXQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghc3RyaXBlRWxlbWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1vdW50RWxlbWVudChzdHJpcGVFbGVtZW50LCBjb250YWluZXJJZCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuTE9BREVSX1NUQVJULCAoKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGVQcmVsb2FkZXI/LihmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LlJFQURZLCAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ0hBTkdFLCAoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25TdHJpcGVFbGVtZW50Q2hhbmdlKGV2ZW50LCBnYXRld2F5SWQsIG1ldGhvZElkLCBwYXltZW50TWV0aG9kU2VsZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaGFuZGxlQ2xvc2VQYXltZW50TWV0aG9kPy4odGhpcy5fY29sbGFwc2VTdHJpcGVFbGVtZW50LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2xvYWRTdHJpcGVKcyhcbiAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgKTogUHJvbWlzZTxTdHJpcGVDbGllbnQ+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyaXBlQ2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpcGVDbGllbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdExvYWRlci5nZXRTdHJpcGVDbGllbnQoXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGEsXG4gICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0TG9jYWxlKCksXG4gICAgICAgICAgICBTdHJpcGVKc1ZlcnNpb24uQ0xPVkVSLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZVN0cmlwZUVsZW1lbnQob3B0aW9ucz86IFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyk6IFN0cmlwZUVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5zdHJpcGVDaGVja291dFNlc3Npb24/LmdldFBheW1lbnRFbGVtZW50KCkgfHxcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uPy5jcmVhdGVQYXltZW50RWxlbWVudChvcHRpb25zKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX29uU3RyaXBlRWxlbWVudENoYW5nZShcbiAgICAgICAgZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnRNZXRob2RTZWxlY3Q/OiAoaWQ6IHN0cmluZykgPT4gdm9pZCxcbiAgICApIHtcbiAgICAgICAgaWYgKCFpc1N0cmlwZVBheW1lbnRFdmVudChldmVudCkgfHwgZXZlbnQuY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPOiB0ZW1wb3JhcnkgY29tbWVudGVkLCB3aWxsIGJlIHVzZWQgaW4gdGhlIHN0cmF0ZWd5IGV4ZWN1dGUgbWV0aG9kXG4gICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRNZXRob2RJZCA9IGV2ZW50LnZhbHVlLnR5cGU7XG4gICAgICAgIHBheW1lbnRNZXRob2RTZWxlY3Q/LihgJHtnYXRld2F5SWR9LSR7bWV0aG9kSWR9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29sbGFwc2VTdHJpcGVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50ID0gdGhpcy5zdHJpcGVDaGVja291dFNlc3Npb24/LmdldFBheW1lbnRFbGVtZW50KCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudD8uY29sbGFwc2UoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5cbmltcG9ydCBTdHJpcGVDU1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3N0cmlwZS1jcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlU3RyaXBlQ1NQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8U3RyaXBlQ1NQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlQ1NQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgbmV3IFN0cmlwZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLCBzdHJpcGVTY3JpcHRMb2FkZXIpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlU3RyaXBlQ1NQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGdhdGV3YXk6ICdzdHJpcGVvY3MnLCBpZDogJ2NoZWNrb3V0X3Nlc3Npb24nIH0sXG5dKTtcbiIsImltcG9ydCB7IHJvdW5kIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBbW91bnRUcmFuc2Zvcm1lcixcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFNoaXBwaW5nT3B0aW9uLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZSxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQsXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnQsXG4gICAgU3RyaXBlRWxlbWVudEV2ZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyxcbiAgICBTdHJpcGVFbGVtZW50VHlwZSxcbiAgICBTdHJpcGVFcnJvcixcbiAgICBTdHJpcGVFdmVudFR5cGUsXG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZUxpbmtWMkV2ZW50LFxuICAgIFN0cmlwZUxpbmtWMk9wdGlvbnMsXG4gICAgU3RyaXBlTGlua1YyU2hpcHBpbmdSYXRlLFxuICAgIFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLFxuICAgIFN0cmlwZVJlc3VsdCxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgU3RyaXBlU3RyaW5nQ29uc3RhbnRzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IGV4cHJlc3NDaGVja291dEFsbG93ZWRDb3VudHJ5Q29kZXMgfSBmcm9tICcuL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBXaXRoU3RyaXBlT0NTQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vc3RyaXBlLW9jcy1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVMaW5rVjJCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX3N0cmlwZUNsaWVudD86IFN0cmlwZUNsaWVudDtcbiAgICBwcml2YXRlIF9zdHJpcGVFbGVtZW50cz86IFN0cmlwZUVsZW1lbnRzO1xuICAgIHByaXZhdGUgX2xpbmtWMkVsZW1lbnQ/OiBTdHJpcGVFbGVtZW50O1xuICAgIHByaXZhdGUgX2Ftb3VudFRyYW5zZm9ybWVyPzogQW1vdW50VHJhbnNmb3JtZXI7XG4gICAgcHJpdmF0ZSBfb25Db21wbGV0ZT86IChvcmRlcklkPzogbnVtYmVyKSA9PiBQcm9taXNlPG5ldmVyPjtcbiAgICBwcml2YXRlIF9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX2N1cnJlbmN5Q29kZT86IHN0cmluZztcbiAgICBwcml2YXRlIF9jYXB0dXJlTWV0aG9kPzogJ2F1dG9tYXRpYycgfCAnbWFudWFsJztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlOiBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aFN0cmlwZU9DU0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgc3RyaXBlb2NzLCBjb250YWluZXJJZCB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIXN0cmlwZW9jcyB8fCAhY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHN0cmlwZW9jcztcblxuICAgICAgICBpZiAoIW1ldGhvZElkIHx8ICFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgY29uc3QgeyBsb2FkaW5nQ29udGFpbmVySWQsIGJ1dHRvbkhlaWdodCwgb25Db21wbGV0ZSB9ID0gc3RyaXBlb2NzO1xuXG4gICAgICAgIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBsb2FkaW5nQ29udGFpbmVySWQ7XG5cbiAgICAgICAgdGhpcy5fb25Db21wbGV0ZSA9IG9uQ29tcGxldGU7XG5cbiAgICAgICAgaWYgKCFpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlKHBheW1lbnRNZXRob2QpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcbiAgICAgICAgY29uc3QgeyBjYXB0dXJlTWV0aG9kIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHN0cmlwZUpzVmVyc2lvbiA9XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5nZXRTdHJpcGVKc1ZlcnNpb24oaW5pdGlhbGl6YXRpb25EYXRhKTtcblxuICAgICAgICB0aGlzLl9jYXB0dXJlTWV0aG9kID0gY2FwdHVyZU1ldGhvZDtcbiAgICAgICAgdGhpcy5fc3RyaXBlQ2xpZW50ID0gYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydExvY2FsZSgpLFxuICAgICAgICAgICAgc3RyaXBlSnNWZXJzaW9uLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fbW91bnRFeHByZXNzQ2hlY2tvdXRFbGVtZW50KGNvbnRhaW5lcklkLCB0aGlzLl9zdHJpcGVDbGllbnQsIGJ1dHRvbkhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZCk7XG4gICAgfVxuXG4gICAgc2lnbkluKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc2lnbk91dCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoXG4gICAgICAgIGNvbnRhaW5lcjogc3RyaW5nLFxuICAgICAgICBzdHJpcGVFeHByZXNzQ2hlY2tvdXRDbGllbnQ6IFN0cmlwZUNsaWVudCxcbiAgICAgICAgYnV0dG9uSGVpZ2h0ID0gNDAsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MgPSB0aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGV4cHJlc3NDaGVja291dE9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOiBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgLi4uKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA/IHsgYWxsb3dlZFNoaXBwaW5nQ291bnRyaWVzOiBhd2FpdCB0aGlzLl9nZXRBdmFpbGFibGVDb3VudHJpZXMoKSB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAuLi4oc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgID8geyBzaGlwcGluZ1JhdGVzOiBbeyBpZDogJ18nLCBhbW91bnQ6IDAsIGRpc3BsYXlOYW1lOiAnUGVuZGluZyByYXRlcycgfV0gfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlclJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZHM6IHtcbiAgICAgICAgICAgICAgICBsaW5rOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICBhcHBsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGFtYXpvblBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIHBheXBhbDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGtsYXJuYTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIE1pbmltYWwgYnV0dG9uSGVpZ2h0IHZhbHVlIGlzIDQwXG4gICAgICAgICAgICBidXR0b25IZWlnaHQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgeyBjYXJ0QW1vdW50ID0gMSB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydCgpIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzT3B0aW9uczogU3RyaXBlTGlua1YyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1vZGU6ICdwYXltZW50JyxcbiAgICAgICAgICAgIGFtb3VudDogdGhpcy5fdG9DZW50cyhjYXJ0QW1vdW50KSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLl9nZXRDdXJyZW5jeSgpLFxuICAgICAgICAgICAgLi4uKHRoaXMuX2NhcHR1cmVNZXRob2QgPyB7IGNhcHR1cmVNZXRob2Q6IHRoaXMuX2NhcHR1cmVNZXRob2QgfSA6IHt9KSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IHN0cmlwZUV4cHJlc3NDaGVja291dENsaWVudC5lbGVtZW50cyhlbGVtZW50c09wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuX2xpbmtWMkVsZW1lbnQgPSB0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoXG4gICAgICAgICAgICBTdHJpcGVFbGVtZW50VHlwZS5FWFBSRVNTX0NIRUNLT1VULFxuICAgICAgICAgICAgZXhwcmVzc0NoZWNrb3V0T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVyfWApO1xuICAgIH1cblxuICAgIC8qKiBFdmVudHMgKiAqL1xuXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fbGlua1YyRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBpZiAoc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfQUREUkVTU19DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfUkFURV9DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ09ORklSTSwgYXN5bmMgKGV2ZW50KSA9PlxuICAgICAgICAgICAgdGhpcy5fb25Db25maXJtKGV2ZW50LCBtZXRob2RJZCksXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ0FOQ0VMLCB0aGlzLl9vbkNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSkge1xuICAgICAgICBpZiAoISgnYWRkcmVzcycgaW4gZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBldmVudC5hZGRyZXNzO1xuICAgICAgICAvLyBEZXBlbmRpbmcgb24gdGhlIGNvdW50cnksIHNvbWUgZmllbGRzIGNhbiBiZSBtaXNzaW5nIG9yIHBhcnRpYWxseSByZWRhY3RlZC5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBzaGlwcGluZyBhZGRyZXNzIGluIHRoZSBVUyBjYW4gb25seSBjb250YWluIGEgY2l0eSwgc3RhdGUsIGFuZCBaSVAgY29kZS5cbiAgICAgICAgLy8gVGhlIGZ1bGwgc2hpcHBpbmcgYWRkcmVzcyBhcHBlYXJzIGluIHRoZSBjb25maXJtIGV2ZW50IG9iamVjdCBhZnRlciB0aGUgcHVyY2hhc2UgaXMgY29uZmlybWVkIGluIHRoZSBicm93c2Vy4oCZcyBwYXltZW50IGludGVyZmFjZS5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHJlc3VsdCk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdSYXRlcyA9IGF3YWl0IHRoaXMuX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZURpc3BsYXllZFByaWNlKCk7XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ1JhdGVzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGV2ZW50LnJlamVjdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgc2hpcHBpbmdSYXRlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25DYW5jZWwoKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudDogU3RyaXBlRXZlbnRUeXBlKSB7XG4gICAgICAgIGlmICgnc2hpcHBpbmdSYXRlJyBpbiBldmVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBzaGlwcGluZ1JhdGUgfSA9IGV2ZW50O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShzaGlwcGluZ1JhdGU/LmlkKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlRGlzcGxheWVkUHJpY2UoKTtcblxuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7fSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29uZmlybSBtZXRob2RzICogKi9cbiAgICBwcml2YXRlIGFzeW5jIF9vbkNvbmZpcm0oZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSwgbWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAnYmlsbGluZ0RldGFpbHMnIGluIGV2ZW50ICYmXG4gICAgICAgICAgICAnc2hpcHBpbmdBZGRyZXNzJyBpbiBldmVudCAmJlxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlQ2xpZW50ICYmXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50c1xuICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3MoZXZlbnQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZXJyb3IsIG1ldGhvZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF91cGRhdGVTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzKGV2ZW50OiBTdHJpcGVMaW5rVjJFdmVudCkge1xuICAgICAgICBjb25zdCBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9XG4gICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3M/Lm5hbWU/LnNwbGl0KCcgJylbMF0gfHxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzPy5uYW1lPy5zcGxpdCgnICcpWzBdIHx8XG4gICAgICAgICAgICAnJztcbiAgICAgICAgY29uc3QgbGFzdE5hbWUgPVxuICAgICAgICAgICAgZXZlbnQuc2hpcHBpbmdBZGRyZXNzPy5uYW1lPy5zcGxpdCgnICcpWzFdIHx8XG4gICAgICAgICAgICBldmVudC5iaWxsaW5nRGV0YWlscz8ubmFtZT8uc3BsaXQoJyAnKVsxXSB8fFxuICAgICAgICAgICAgJyc7XG5cbiAgICAgICAgaWYgKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX21hcFNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgZXZlbnQuYmlsbGluZ0RldGFpbHMsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgICAgIGV2ZW50LnNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczogU3RyaXBlTGlua1YyRXZlbnRbJ3NoaXBwaW5nQWRkcmVzcyddLFxuICAgICAgICBiaWxsaW5nRGV0YWlsczogU3RyaXBlTGlua1YyRXZlbnRbJ2JpbGxpbmdEZXRhaWxzJ10sXG4gICAgICAgIGZpcnN0TmFtZTogc3RyaW5nLFxuICAgICAgICBsYXN0TmFtZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5saW5lMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LmxpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBTdHJpcGVMaW5rVjJFdmVudFsnc2hpcHBpbmdBZGRyZXNzJ10sXG4gICAgICAgIGJpbGxpbmdEZXRhaWxzOiBTdHJpcGVMaW5rVjJFdmVudFsnYmlsbGluZ0RldGFpbHMnXSxcbiAgICAgICAgZmlyc3ROYW1lOiBzdHJpbmcsXG4gICAgICAgIGxhc3ROYW1lOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbWFpbDogYmlsbGluZ0RldGFpbHM/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmxpbmUxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNvdW50cnkgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGJpbGxpbmdEZXRhaWxzPy5hZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yOiB1bmtub3duLCBtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICF0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlcnJvci5ib2R5LmVycm9ycylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fc3RyaXBlQ2xpZW50IHx8ICF0aGlzLl9zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWRkaXRpb25hbEFjdGlvbkRhdGEgfSA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkRhdGEsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBwYXltZW50SW50ZW50Py5pZCB8fCB0b2tlbik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jb21wbGV0ZUNoZWNrb3V0RmxvdygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dQYXltZW50Q29uZmlybWF0aW9uUHJvY2VlZE1lc3NhZ2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YTogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkWydkYXRhJ10sXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQgfCBuZXZlcj4ge1xuICAgICAgICBjb25zdCB7IHRva2VuLCByZWRpcmVjdF91cmwgfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50RGF0YSA9IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMsXG4gICAgICAgICAgICByZWRpcmVjdF91cmwsXG4gICAgICAgICk7XG4gICAgICAgIGxldCBzdHJpcGVFcnJvcjogU3RyaXBlRXJyb3IgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlzUGF5bWVudENvbXBsZXRlZCA9IGF3YWl0IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzUGF5bWVudENvbXBsZXRlZChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJpcGVDbGllbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSAhaXNQYXltZW50Q29tcGxldGVkXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLl9zdHJpcGVDbGllbnQ/LmNvbmZpcm1QYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogc3RyaXBlUGF5bWVudERhdGEuZWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLklGX1JFUVVJUkVELFxuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1QYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX3VybDogc3RyaXBlUGF5bWVudERhdGEuY29uZmlybVBhcmFtcz8ucmV0dXJuX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IHRoaXMuX3N0cmlwZUNsaWVudD8ucmV0cmlldmVQYXltZW50SW50ZW50KHRva2VuIHx8ICcnKTtcblxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgPSBjb25maXJtYXRpb25SZXN1bHQ/LmVycm9yO1xuXG4gICAgICAgICAgICBpZiAoc3RyaXBlRXJyb3IgfHwgIWNvbmZpcm1hdGlvblJlc3VsdD8ucGF5bWVudEludGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvblJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2NvbXBsZXRlQ2hlY2tvdXRGbG93KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX29uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL2NoZWNrb3V0L29yZGVyLWNvbmZpcm1hdGlvbicpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50UGF5bG9hZChtZXRob2RJZDogc3RyaW5nLCB0b2tlbj86IHN0cmluZyk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmlkIHx8ICcnO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgY2FydF9pZDogY2FydElkLFxuICAgICAgICAgICAgLi4uKHRva2VuID8geyBjcmVkaXRfY2FyZF90b2tlbjogeyB0b2tlbiB9IH0gOiB7fSksXG4gICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGhvZDogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuTGluayxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKiBVdGlscyAqICovXG5cbiAgICBwcml2YXRlIF9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCkge1xuICAgICAgICBjb25zdCB7IGdldENhcnQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIGNvbnN0IHsgbGluZUl0ZW1zIH0gPSBnZXRDYXJ0KCkgfHwge307XG5cbiAgICAgICAgcmV0dXJuICEhbGluZUl0ZW1zPy5waHlzaWNhbEl0ZW1zLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF91cGRhdGVEaXNwbGF5ZWRQcmljZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0cmlwZUVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cy51cGRhdGUoe1xuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLl9nZXRDdXJyZW5jeSgpLFxuICAgICAgICAgICAgICAgIG1vZGU6ICdwYXltZW50JyxcbiAgICAgICAgICAgICAgICBhbW91bnQ6IGF3YWl0IHRoaXMuX2dldFRvdGFsUHJpY2UoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0Q3VycmVuY3koKSB7XG4gICAgICAgIGlmICghdGhpcy5fY3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmN1cnJlbmN5O1xuXG4gICAgICAgICAgICBpZiAoY3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVuY3lDb2RlID0gY3VycmVuY3lDb2RlLmNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW5jeUNvZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0VG90YWxQcmljZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRDaGVja291dE9yVGhyb3csIGdldENhcnQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGRlY2ltYWxQbGFjZXMgfSA9IGdldENhcnQoKT8uY3VycmVuY3kgfHwge307XG4gICAgICAgIGNvbnN0IHRvdGFsUHJpY2UgPSByb3VuZChnZXRDaGVja291dE9yVGhyb3coKS5vdXRzdGFuZGluZ0JhbGFuY2UsIGRlY2ltYWxQbGFjZXMpLnRvRml4ZWQoXG4gICAgICAgICAgICBkZWNpbWFsUGxhY2VzLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl90b0NlbnRzKCt0b3RhbFByaWNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9nZXRBdmFpbGFibGVDb3VudHJpZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBjb3VudHJpZXMgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFNoaXBwaW5nQ291bnRyaWVzKCk7XG4gICAgICAgIGNvbnN0IGRlbGl2ZXJhYmxlQ291bnRyaWVzID1cbiAgICAgICAgICAgIGNvdW50cmllcy5nZXRTaGlwcGluZ0NvdW50cmllcygpPy5tYXAoKGNvdW50cnkpID0+IGNvdW50cnkuY29kZSkgfHwgW107XG5cbiAgICAgICAgcmV0dXJuIGRlbGl2ZXJhYmxlQ291bnRyaWVzLmZpbHRlcigoY29kZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGV4cHJlc3NDaGVja291dEFsbG93ZWRDb3VudHJ5Q29kZXMuaW5jbHVkZXMoY29kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucygpOiBQcm9taXNlPFN0cmlwZUxpbmtWMlNoaXBwaW5nUmF0ZVtdIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50cyA9IHN0YXRlLmdldENvbnNpZ25tZW50cygpO1xuXG4gICAgICAgIGlmICghY29uc2lnbm1lbnRzPy5bMF0pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gY29uc2lnbm1lbnRzWzBdO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gKGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXSkubWFwKFxuICAgICAgICAgICAgdGhpcy5fZ2V0U3RyaXBlU2hpcHBpbmdPcHRpb24uYmluZCh0aGlzKSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz8uZmluZChcbiAgICAgICAgICAgIChzaGlwcGluZ09wdGlvbikgPT4gc2hpcHBpbmdPcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRJZCA9IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24/LmlkO1xuICAgICAgICBjb25zdCByZWNvbW1lbmRlZElkID0gcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbj8uaWQ7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSWQpIHtcbiAgICAgICAgICAgIC8vIFNldCBzZWxlY3RlZCBzaGlwcGluZyBvcHRpb24gZmlyc3QgaW4gdGhlIGFycmF5LCBhcyBpdCB3aWxsIGJlIHNlbGVjdGVkIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIG9wdGlvbnMuc29ydCgob3B0aW9uKSA9PiAob3B0aW9uLmlkID09PSBzZWxlY3RlZElkID8gLTEgOiAwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVjb21tZW5kZWRJZCkge1xuICAgICAgICAgICAgLy8gU2V0IHJlY29tbWVuZGVkIHNoaXBwaW5nIG9wdGlvbiBmaXJzdCBpbiB0aGUgYXJyYXksIGFzIGl0IHdpbGwgYmUgc2VsZWN0ZWQgYnkgZGVmYXVsdFxuICAgICAgICAgICAgb3B0aW9ucy5zb3J0KChvcHRpb24pID0+IChvcHRpb24uaWQgPT09IHJlY29tbWVuZGVkSWQgPyAtMSA6IDApKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKHJlY29tbWVuZGVkSWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2Uob3B0aW9uc1swXT8uaWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0U3RyaXBlU2hpcHBpbmdPcHRpb24oeyBpZCwgY29zdCwgZGVzY3JpcHRpb24gfTogU2hpcHBpbmdPcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYW1vdW50OiB0aGlzLl90b0NlbnRzKGNvc3QpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKG9wdGlvbklkPzogc3RyaW5nKSB7XG4gICAgICAgIGlmICghb3B0aW9uSWQgfHwgb3B0aW9uSWQgPT09ICdzaGlwcGluZ19vcHRpb25fdW5zZWxlY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24ob3B0aW9uSWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEFtb3VudFRyYW5zZm9ybWVyKCkge1xuICAgICAgICBpZiAodGhpcy5fYW1vdW50VHJhbnNmb3JtZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbW91bnRUcmFuc2Zvcm1lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZ2V0Q2FydCB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgY3VycmVuY3kgfSA9IGdldENhcnQoKSB8fCB7fTtcblxuICAgICAgICBpZiAoY3VycmVuY3kpIHtcbiAgICAgICAgICAgIGNvbnN0IGFtb3VudFRyYW5zZm9ybWVyID0gbmV3IEFtb3VudFRyYW5zZm9ybWVyKGN1cnJlbmN5LmRlY2ltYWxQbGFjZXMpO1xuXG4gICAgICAgICAgICByZXR1cm4gYW1vdW50VHJhbnNmb3JtZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF90b0NlbnRzKGFtb3VudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVmFsdWUgPSBNYXRoLnJvdW5kKGFtb3VudCAqIDEwMCk7XG4gICAgICAgIGNvbnN0IGFtb3VudFRyYW5zZm9ybWVyID0gdGhpcy5fZ2V0QW1vdW50VHJhbnNmb3JtZXIoKTtcblxuICAgICAgICBpZiAoYW1vdW50VHJhbnNmb3JtZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBhbW91bnRUcmFuc2Zvcm1lci50b0ludGVnZXIoYW1vdW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxsYmFja1ZhbHVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5fbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5fbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcbmltcG9ydCB7IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUywgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgU3RyaXBlTGlua1YyQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9zdHJpcGUtbGluay12Mi1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVMaW5rVjJCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8U3RyaXBlTGlua1YyQnV0dG9uU3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcbiAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICBjb250YWluZXJTdHlsZXM6IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyxcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlTGlua1YyQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgbmV3IFN0cmlwZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLCBzdHJpcGVTY3JpcHRMb2FkZXIpLFxuICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlTGlua1YyQnV0dG9uU3RyYXRlZ3ksIFt7IGlkOiAnc3RyaXBlb2NzJyB9XSk7XG4iXSwibmFtZXMiOlsiU3RyaXBlRm9ybU1vZGUiLCJTdHJpcGVEaXNwbGF5TmFtZSIsIlN0cmlwZUxvYWRBY3Rpb25zUmVzdWx0VHlwZSIsIlN0cmlwZVBheW1lbnRNZXRob2RUeXBlIiwiU3RyaXBlU3RyaW5nQ29uc3RhbnRzIiwiU3RyaXBlSnNWZXJzaW9uIiwiU3RyaXBlRWxlbWVudFR5cGUiLCJTdHJpcGVQYXltZW50SW50ZW50U3RhdHVzIiwiU3RyaXBlRWxlbWVudEV2ZW50IiwiU3RyaXBlSW5zdHJ1bWVudFNldHVwRnV0dXJlVXNhZ2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsIk9iamVjdCIsImFzc2lnbiIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiU3RyaXBlU2NyaXB0TG9hZGVyIiwic2NyaXB0TG9hZGVyIiwic3RyaXBlV2luZG93Iiwid2luZG93IiwiZ2V0U3RyaXBlQ2xpZW50IiwiaW5pdGlhbGl6YXRpb25EYXRhIiwibG9jYWxlIiwic3RyaXBlSnNWZXJzaW9uIiwiYmV0YXMiLCJhcGlWZXJzaW9uIiwiYmNTdHJpcGVDbGllbnQiLCJzdHJpcGUiLCJsb2FkIiwic3RyaXBlUHVibGlzaGFibGVLZXkiLCJzdHJpcGVDb25uZWN0ZWRBY2NvdW50Iiwic3RyaXBlQ2xpZW50Iiwic3RyaXBlQWNjb3VudCIsImdldEVsZW1lbnRzIiwib3B0aW9ucyIsInN0cmlwZUVsZW1lbnRzIiwiYmNTdHJpcGVFbGVtZW50cyIsInVwZGF0ZVN0cmlwZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJ1cGRhdGUiLCJmZXRjaFVwZGF0ZXMiLCJnZXRDaGVja291dFNlc3Npb24iLCJzdHJpcGVDaGVja291dFNlc3Npb24iLCJiY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbiIsImluaXRDaGVja291dCIsIlN0cmlwZSIsImxvYWRTY3JpcHQiLCJnZXRTY3JpcHRVcmwiLCJWMyIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiTWlzc2luZ0RhdGFFcnJvciIsInN1YnR5cGUiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEVycm9yTWVzc2FnZSIsImlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UiLCJwYXltZW50TWV0aG9kIiwidW5kZWZpbmVkIiwic2hvcHBlckxhbmd1YWdlIiwiU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMiLCJTVFJJUEVfVVBFX0NMSUVOVF9BUElfVkVSU0lPTiIsImlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyIiwiY3VzdG9tZXIiLCJTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5IiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImluaXRpYWxpemUiLCJzdHJpcGVVUEVDbGllbnQiLCJzdHJpcGV1cGUiLCJjb250YWluZXIiLCJnYXRld2F5SWQiLCJtZXRob2RJZCIsIm9uRW1haWxDaGFuZ2UiLCJnZXRTdHlsZXMiLCJpc0xvYWRpbmciLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbHVlIiwibG9hZFBheW1lbnRNZXRob2QiLCJwYXJhbXMiLCJtZXRob2QiLCJzdGF0ZSIsImdldFN0YXRlIiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJjbGllbnRUb2tlbiIsImVtYWlsIiwiZ2V0Q3VzdG9tZXJPclRocm93IiwicGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3ciLCJzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZSIsImFwcGVhcmFuY2UiLCJzdHlsZXMiLCJ2YXJpYWJsZXMiLCJjb2xvclByaW1hcnkiLCJmaWVsZElubmVyU2hhZG93IiwiY29sb3JCYWNrZ3JvdW5kIiwiZmllbGRCYWNrZ3JvdW5kIiwiY29sb3JUZXh0IiwibGFiZWxUZXh0IiwiY29sb3JEYW5nZXIiLCJmaWVsZEVycm9yVGV4dCIsImNvbG9yVGV4dFNlY29uZGFyeSIsImNvbG9yVGV4dFBsYWNlaG9sZGVyIiwiZmllbGRQbGFjZWhvbGRlclRleHQiLCJydWxlcyIsImJvcmRlckNvbG9yIiwiZmllbGRCb3JkZXIiLCJjb2xvciIsImZpZWxkVGV4dCIsImJveFNoYWRvdyIsImdldENhcnRMb2NhbGUiLCJfc3RyaXBlRWxlbWVudHMiLCJjbGllbnRTZWNyZXQiLCJnZXRCaWxsaW5nQWRkcmVzcyIsImdldENvbnNpZ25tZW50cyIsImNvbnNpZ25tZW50cyIsImlkIiwiYmlsbGluZ0VtYWlsIiwiZGVmYXVsdFZhbHVlcyIsIm1vZGUiLCJTSElQUElORyIsImxpbmtBdXRoZW50aWNhdGlvbkVsZW1lbnQiLCJnZXRFbGVtZW50IiwiQVVUSEVOVElDQVRJT04iLCJjcmVhdGUiLCJvbiIsIkNIQU5HRSIsImV2ZW50IiwidXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJhdXRoZW50aWNhdGVkIiwiY29tcGxldGUiLCJkZWxldGVDb25zaWdubWVudCIsIm1vdW50IiwiZGVpbml0aWFsaXplIiwidW5tb3VudCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2lnbkluIiwiY3JlZGVudGlhbHMiLCJzaWduSW5DdXN0b21lciIsInNpZ25PdXQiLCJzaWduT3V0Q3VzdG9tZXIiLCJleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0IiwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayIsImdldFNjcmlwdExvYWRlciIsIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIlN0cmlwZUludGVncmF0aW9uU2VydmljZSIsImlzTW91bnRlZCIsImNoZWNrb3V0RXZlbnRzVW5zdWJzY3JpYmUiLCJpbml0Q2hlY2tvdXRFdmVudHNTdWJzY3JpcHRpb24iLCJzdHJpcGVJbml0aWFsaXphdGlvbk9wdGlvbnMiLCJzdWJzY3JpYmUiLCJwYXltZW50RWxlbWVudCIsIlBBWU1FTlQiLCJ1cGRhdGVTdHJpcGVQYXltZW50SW50ZW50IiwiZXJyb3IiLCJvbkVycm9yIiwibW91bnRFbGVtZW50IiwiY29udGFpbmVySWQiLCJnZXRDaGVja291dCIsIm91dHN0YW5kaW5nQmFsYW5jZSIsImNvdXBvbnMiLCJzdHJpcGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm1hcEFwcGVhcmFuY2VWYXJpYWJsZXMiLCJjb2xvckljb24iLCJtYXBJbnB1dEFwcGVhcmFuY2VSdWxlcyIsInRocm93U3RyaXBlRXJyb3IiLCJzdHJpcGVFcnJvciIsInRocm93RGlzcGxheWFibGVTdHJpcGVFcnJvciIsImlzQ2FuY2VsbGF0aW9uRXJyb3IiLCJpbmNsdWRlcyIsImVycm9yTWVzc2FnZSIsInBheW1lbnRfaW50ZW50IiwibGFzdF9wYXltZW50X2Vycm9yIiwiaW5kZXhPZiIsInRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlIiwiaXNQYXltZW50Q29tcGxldGVkIiwiZmVhdHVyZXMiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjaGVja291dFNldHRpbmdzIiwicGF5bWVudEludGVudCIsInJldHJpZXZlUGF5bWVudEludGVudCIsInN0YXR1cyIsIlNVQ0NFRURFRCIsIm1hcFN0cmlwZVBheW1lbnREYXRhIiwicmV0dXJuVXJsIiwic2hvdWxkQWxsb3dSZWRpc3BsYXkiLCJiaWxsaW5nQWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYWRkcmVzcyIsIl9tYXBTdHJpcGVBZGRyZXNzIiwiY2l0eSIsImNvdW50cnkiLCJyZWRpcmVjdCIsIklGX1JFUVVJUkVEIiwiY29uZmlybVBhcmFtcyIsInBheW1lbnRfbWV0aG9kX2RhdGEiLCJhbGxvd19yZWRpc3BsYXkiLCJiaWxsaW5nX2RldGFpbHMiLCJyZXR1cm5fdXJsIiwiaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IiLCJlcnJvcnMiLCJzb21lIiwiY29kZSIsImlzUmVkaXJlY3RBY3Rpb24iLCJhZGRpdGlvbmFsQWN0aW9uIiwiZGF0YSIsInJlZGlyZWN0X3VybCIsImlzT25QYWdlQWRkaXRpb25hbEFjdGlvbiIsInRva2VuIiwiZ2V0U3RyaXBlSnNWZXJzaW9uIiwidXNlTmV3U3RyaXBlSnNWZXJzaW9uIiwiQ0xPVkVSIiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImNvdW50cnlDb2RlIiwicG9zdGFsQ29kZSIsInN0YXRlT3JQcm92aW5jZUNvZGUiLCJwb3N0YWxfY29kZSIsImxpbmUxIiwibGluZTIiLCJERUZBVUxUX1NUWUxFUyIsInNpemUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMiLCJwb3NpdGlvbiIsIlJPVEFUSU9OX0FOSU1BVElPTiIsIkxvYWRpbmdJbmRpY2F0b3IiLCJjb250YWluZXJTdHlsZXMiLCJkZWZpbmVBbmltYXRpb24iLCJidWlsZENvbnRhaW5lciIsImluZGljYXRvciIsImJ1aWxkSW5kaWNhdG9yIiwiYXBwZW5kQ2hpbGQiLCJzaG93IiwicGFyZW50SWQiLCJwYXJlbnQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJvcGFjaXR5IiwiaGlkZSIsImhhbmRsZVRyYW5zaXRpb25FbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUVsZW1lbnQiLCJkaXNwbGF5IiwiYm90dG9tIiwibGVmdCIsImhlaWdodCIsIndpZHRoIiwicmlnaHQiLCJ0b3AiLCJ0cmFuc2l0aW9uIiwic2V0U3R5bGVBdHRyaWJ1dGUiLCJib3JkZXJSYWRpdXMiLCJib3JkZXIiLCJtYXJnaW4iLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1TdHlsZSIsImFuaW1hdGlvbiIsImVsZW1lbnQiLCJhdHRycyIsImtleXMiLCJrIiwic2V0UHJvcGVydHkiLCJoZWFkIiwic2hlZXQiLCJDU1NTdHlsZVNoZWV0IiwiaW5zZXJ0UnVsZSIsIkFtb3VudFRyYW5zZm9ybWVyIiwiX2RlY2ltYWxQbGFjZXMiLCJ0b0ludGVnZXIiLCJhbW91bnQiLCJNYXRoIiwicm91bmQiLCJleHByZXNzQ2hlY2tvdXRBbGxvd2VkQ291bnRyeUNvZGVzIiwiU3RyaXBlTGlua1YyQ3VzdG9tZXJTdHJhdGVneSIsInN0cmlwZUludGVncmF0aW9uU2VydmljZSIsImxvYWRpbmdJbmRpY2F0b3IiLCJzdHJpcGVvY3MiLCJsb2FkaW5nQ29udGFpbmVySWQiLCJidXR0b25IZWlnaHQiLCJvbkNvbXBsZXRlIiwiX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIiLCJfb25Db21wbGV0ZSIsImNhcHR1cmVNZXRob2QiLCJfY2FwdHVyZU1ldGhvZCIsIl9zdHJpcGVDbGllbnQiLCJfbW91bnRFeHByZXNzQ2hlY2tvdXRFbGVtZW50IiwiX2luaXRpYWxpemVFdmVudHMiLCJzdHJpcGVFeHByZXNzQ2hlY2tvdXRDbGllbnQiLCJzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzIiwiX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MiLCJleHByZXNzQ2hlY2tvdXRPcHRpb25zIiwic2hpcHBpbmdBZGRyZXNzUmVxdWlyZWQiLCJhbGxvd2VkU2hpcHBpbmdDb3VudHJpZXMiLCJfZ2V0QXZhaWxhYmxlQ291bnRyaWVzIiwic2hpcHBpbmdSYXRlcyIsImRpc3BsYXlOYW1lIiwiYmlsbGluZ0FkZHJlc3NSZXF1aXJlZCIsImVtYWlsUmVxdWlyZWQiLCJwaG9uZU51bWJlclJlcXVpcmVkIiwicGF5bWVudE1ldGhvZHMiLCJsaW5rIiwiQVVUTyIsImFwcGxlUGF5IiwiTkVWRVIiLCJnb29nbGVQYXkiLCJhbWF6b25QYXkiLCJwYXlwYWwiLCJrbGFybmEiLCJjYXJ0QW1vdW50IiwiZ2V0Q2FydE9yVGhyb3ciLCJlbGVtZW50c09wdGlvbnMiLCJfdG9DZW50cyIsImN1cnJlbmN5IiwiX2dldEN1cnJlbmN5IiwiX2xpbmtWMkVsZW1lbnQiLCJFWFBSRVNTX0NIRUNLT1VUIiwiU0hJUFBJTkdfQUREUkVTU19DSEFOR0UiLCJfb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UiLCJTSElQUElOR19SQVRFX0NIQU5HRSIsIl9vblNoaXBwaW5nUmF0ZUNoYW5nZSIsIkNPTkZJUk0iLCJfb25Db25maXJtIiwiQ0FOQ0VMIiwiX29uQ2FuY2VsIiwic2hpcHBpbmdBZGRyZXNzIiwicmVzdWx0IiwicGhvbmUiLCJjb21wYW55Iiwic3RhdGVPclByb3ZpbmNlIiwiY3VzdG9tRmllbGRzIiwidXBkYXRlU2hpcHBpbmdBZGRyZXNzIiwiX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyIsIl91cGRhdGVEaXNwbGF5ZWRQcmljZSIsImxlbmd0aCIsInJlamVjdCIsInNoaXBwaW5nUmF0ZSIsIl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZSIsIl91cGRhdGVTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzIiwic3VibWl0T3JkZXIiLCJwYXltZW50UGF5bG9hZCIsIl9nZXRQYXltZW50UGF5bG9hZCIsInN1Ym1pdFBheW1lbnQiLCJfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24iLCJzcGxpdCIsImJpbGxpbmdEZXRhaWxzIiwiX21hcFNoaXBwaW5nQWRkcmVzcyIsIl9tYXBCaWxsaW5nQWRkcmVzcyIsInVwZGF0ZUJpbGxpbmdBZGRyZXNzIiwiYm9keSIsImFkZGl0aW9uYWxBY3Rpb25EYXRhIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93IiwiX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IiLCJfY29tcGxldGVDaGVja291dEZsb3ciLCJzdHJpcGVQYXltZW50RGF0YSIsImNvbmZpcm1hdGlvblJlc3VsdCIsImNvbmZpcm1QYXltZW50IiwibG9jYXRpb24iLCJyZXBsYWNlIiwiY2FydElkIiwiZ2V0Q2FydCIsInBheW1lbnREYXRhIiwiZm9ybWF0dGVkUGF5bG9hZCIsImNhcnRfaWQiLCJjcmVkaXRfY2FyZF90b2tlbiIsImNvbmZpcm0iLCJMaW5rIiwibGluZUl0ZW1zIiwicGh5c2ljYWxJdGVtcyIsIl9nZXRUb3RhbFByaWNlIiwiX2N1cnJlbmN5Q29kZSIsImN1cnJlbmN5Q29kZSIsInRvTG93ZXJDYXNlIiwibG9hZENoZWNrb3V0IiwiZ2V0Q2hlY2tvdXRPclRocm93IiwiZGVjaW1hbFBsYWNlcyIsInRvdGFsUHJpY2UiLCJ0b0ZpeGVkIiwiY291bnRyaWVzIiwibG9hZFNoaXBwaW5nQ291bnRyaWVzIiwiZ2V0U2hpcHBpbmdDb3VudHJpZXMiLCJtYXAiLCJmaWx0ZXIiLCJjb25zaWdubWVudCIsImF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyIsIl9nZXRTdHJpcGVTaGlwcGluZ09wdGlvbiIsImJpbmQiLCJyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIiwiZmluZCIsInNoaXBwaW5nT3B0aW9uIiwiaXNSZWNvbW1lbmRlZCIsInNlbGVjdGVkSWQiLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIiwicmVjb21tZW5kZWRJZCIsInNvcnQiLCJvcHRpb24iLCJjb3N0IiwiZGVzY3JpcHRpb24iLCJvcHRpb25JZCIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiX2dldEFtb3VudFRyYW5zZm9ybWVyIiwiX2Ftb3VudFRyYW5zZm9ybWVyIiwiZmFsbGJhY2tWYWx1ZSIsImFtb3VudFRyYW5zZm9ybWVyIiwic3RyaXBlU2NyaXB0TG9hZGVyIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJpc0hvc3RlZEluc3RydW1lbnRMaWtlIiwiaW5zdHJ1bWVudCIsInNob3VsZFNhdmVJbnN0cnVtZW50Iiwic2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNJbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIiwiaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyIsImNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyIsImNhcmRDdmNFbGVtZW50T3B0aW9ucyIsImNhcmRFeHBpcnlFbGVtZW50T3B0aW9ucyIsIkljb25TdHlsZSIsIlN0cmlwZVYzRXJyb3JUeXBlIiwiU3RyaXBlVjNFcnJvciIsIkF1dGhGYWlsdXJlIiwiQVBNX1JFRElSRUNUIiwiQWxpcGF5IiwiSURFQUwiLCJTdHJpcGVWM1BheW1lbnRTdHJhdGVneSIsInN0cmlwZXYzIiwiaW5pdGlhbGl6ZU9wdGlvbnMiLCJpc0RlaW5pdGlhbGl6ZSIsInVzZUluZGl2aWR1YWxDYXJkRmllbGRzIiwiYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cyIsIl9hbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzIiwiZm9ybSIsImdldEluaXRpYWxpemVPcHRpb25zIiwic3RyaXBlVjNDbGllbnQiLCJsb2FkU3RyaXBlSnMiLCJpc0NyZWRpdENhcmQiLCJzaG91bGRTaG93VFNWSG9zdGVkRm9ybSIsImhvc3RlZEZvcm0iLCJtb3VudENhcmRWZXJpZmljYXRpb25GaWVsZHMiLCJtb3VudENhcmRGaWVsZHMiLCJleGVjdXRlIiwib3JkZXJSZXF1ZXN0IiwicGF5bWVudCIsIm9yZGVyIiwic2hvdWxkU3VibWl0T3JkZXJCZWZvcmVMb2FkaW5nQVBNIiwiaXNTdG9yZUNyZWRpdEFwcGxpZWQiLCJ1c2VTdG9yZUNyZWRpdCIsImFwcGx5U3RvcmVDcmVkaXQiLCJleGVjdXRlV2l0aFZhdWx0ZWQiLCJjb25maXJtU3RyaXBlUGF5bWVudCIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsInNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50IiwiQ3JlZGl0Q2FyZCIsImNsaWVudF90b2tlbiIsImJ1aWxkUGF5bWVudFBheWxvYWQiLCJwcm9jZXNzQWRkaXRpb25hbEFjdGlvbiIsImhhbmRsZUVtcHR5UGF5bWVudEludGVudEVycm9yIiwiZmluYWxpemUiLCJkZXRhY2giLCJ1bm1vdW50RWxlbWVudCIsImlzQXV0aEVycm9yIiwiaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSIsImRlZmluZWRGaWVsZHMiLCJvbWl0QnkiLCJmaWVsZHMiLCJpc0VtcHR5IiwiaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJjb25maWciLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwiZ2V0U3RyaXBlSnMiLCJjb25maXJtQWxpcGF5UGF5bWVudCIsImhhbmRsZUFjdGlvbnMiLCJjb25maXJtSWRlYWxQYXltZW50IiwiU2VwYSIsImNvbmZpcm1TZXBhRGViaXRQYXltZW50IiwiY2FyZCIsImdldFN0cmlwZUNhcmRFbGVtZW50cyIsImdldFN0cmlwZUVsZW1lbnQiLCJtYXBTdHJpcGVCaWxsaW5nRGV0YWlscyIsImdldEN1c3RvbWVyIiwiY3JlYXRlUGF5bWVudE1ldGhvZCIsImJpZ3BheV90b2tlbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0ZSIsInN1Ym1pdCIsImxvYWRDdXJyZW50T3JkZXIiLCJzdHJpcGVDYXJkRWxlbWVudHMiLCJnZXRMb2NhbGUiLCJtYXBTdHJpcGVBZGRyZXNzIiwidHJpbSIsInppcENvZGVFbGVtZW50T3B0aW9ucyIsImFkZHJlc3NlcyIsImlzQmlsbGluZ0FkZHJlc3NMaWtlIiwiY3VzdG9tZXJBZGRyZXNzIiwic3RyaXBlUGF5bWVudE1ldGhvZFR5cGUiLCJwYXltZW50X21ldGhvZCIsImNhcmROdW1iZXJFbGVtZW50IiwiQ2FyZE51bWJlciIsImNhcmRFeHBpcnlFbGVtZW50IiwiQ2FyZEV4cGlyeSIsImNhcmRDdmNFbGVtZW50IiwiQ2FyZEN2YyIsImZvcm1PcHRpb25zIiwic3RvcmVDb25maWciLCJnZXRTdG9yZUNvbmZpZyIsImJpZ3BheUJhc2VVcmwiLCJwYXltZW50U2V0dGluZ3MiLCJjcmVhdGVIb3N0ZWRGb3JtIiwiYXR0YWNoIiwiaXNUaHJlZURTZWN1cmVSZXF1aXJlZEVycm9yIiwiYWN0aW9uIiwidGhyZWVfZHNfcmVzdWx0IiwibmVlZHNDb25maXJtIiwiY2F0Y2hlZENvbmZpcm1FcnJvciIsImNvbmZpcm1DYXJkUGF5bWVudCIsImdldFBheW1lbnRUb2tlbiIsIlN0cmlwZVYzU2NyaXB0TG9hZGVyIiwidGhlbiIsImdhdGV3YXkiLCJERUZBVUxUX1JFU1BPTlNFIiwiaGVhZGVycyIsIlJlcXVlc3RFcnJvciIsInJlc3BvbnNlIiwic3VwcG9ydGVkTG9jYWxlcyIsImFyIiwiYmciLCJjcyIsImRhIiwiZGUiLCJlbCIsImVuIiwiZXMiLCJldCIsImZpIiwiZmlsIiwiZnIiLCJoZSIsImhyIiwiaHUiLCJpdCIsImphIiwia28iLCJsdCIsImx2IiwibXMiLCJtdCIsIm5iIiwibmwiLCJwbCIsInB0Iiwicm8iLCJydSIsInNrIiwic2wiLCJzdiIsInRoIiwidHIiLCJ2aSIsInpoIiwiZm9ybWF0TG9jYWxlIiwibG9jYWxlTGFuZ3VhZ2UiLCJsYW5ndWFnZSIsImNvdW50cnlMb2NhbGVzIiwiZm9ybWF0dGVkTG9jYWxlIiwidG9VcHBlckNhc2UiLCJTdHJpcGVVUEVQYXltZW50U3RyYXRlZ3kiLCJfbG9hZFN0cmlwZUVsZW1lbnQiLCJjYXRjaCIsIl9zdHJpcGVVUEVDbGllbnQiLCJnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3ciLCJfZXhlY3V0ZVdpdGhWYXVsdGVkIiwiX2V4ZWN1dGVXaXRoU3RyaXBlQ29uZmlybWF0aW9uIiwiX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uV2l0aFN0cmlwZUNvbmZpcm1hdGlvbiIsIl9wcm9jZXNzVmF1bHRlZEFkZGl0aW9uYWxBY3Rpb24iLCJyZW5kZXIiLCJpbml0U3RyaXBlRWxlbWVudFVwZGF0ZVRyaWdnZXIiLCJlbmFibGVMaW5rIiwiX2xvYWRTdHJpcGVKcyIsIl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkIiwiZ2V0U2hpcHBpbmdBZGRyZXNzIiwid2FsbGV0cyIsIl9nZXRTdHJpcGVFbGVtZW50VGVybXMiLCJSRUFEWSIsIl91cGRhdGVTdHJpcGVMaW5rU3RhdGVCeUVsZW1lbnRUeXBlIiwiX3VwZGF0ZVN0cmlwZUVsZW1lbnQiLCJzaG91bGRTaG93VGVybXMiLCJ0ZXJtcyIsInBheW1lbnRFbGVtZW50VHlwZSIsImlzU3RyaXBlTGlua0VsZW1lbnRUeXBlIiwiaXNTdHJpcGVQYXltZW50RXZlbnQiLCJTdHJpcGVPQ1NQYXltZW50U3RyYXRlZ3kiLCJfaW5pdGlhbGl6ZVN0cmlwZUVsZW1lbnQiLCJkZXN0cm95IiwiY3VzdG9tZXJTZXNzaW9uVG9rZW4iLCJmb250cyIsImxheW91dCIsInBheW1lbnRNZXRob2RTZWxlY3QiLCJoYW5kbGVDbG9zZVBheW1lbnRNZXRob2QiLCJ0b2dnbGVQcmVsb2FkZXIiLCJjdXN0b21lclNlc3Npb25DbGllbnRTZWNyZXQiLCJzYXZlUGF5bWVudE1ldGhvZCIsIm1heFZpc2libGVQYXltZW50TWV0aG9kcyIsIkxPQURFUl9TVEFSVCIsIl9vblN0cmlwZUVsZW1lbnRDaGFuZ2UiLCJfY29sbGFwc2VTdHJpcGVFbGVtZW50IiwiY29sbGFwc2UiLCJwYXltZW50TWV0aG9kT3B0aW9ucyIsInVzX2JhbmtfYWNjb3VudCIsIl9zaG91bGRTYXZlSW5zdHJ1bWVudCIsInRva2VuaXplZE9wdGlvbnMiLCJfZ2V0VG9rZW5pemVkT3B0aW9ucyIsInNlbGVjdGVkTWV0aG9kSWQiLCJjbGllbnRfc2VjcmV0IiwicGF5bWVudEludGVudENsaWVudFNlY3JldCIsInBheW1lbnRfbWV0aG9kX29wdGlvbnMiLCJjb2xsYXBzZWQiLCJzZXR1cEZ1dHVyZVVzYWdlIiwic2V0dXBfZnV0dXJlX3VzYWdlIiwiT05fU0VTU0lPTiIsIk9GRl9TRVNTSU9OIiwidG9rZW5pemVkX2FjaCIsIlN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5IiwiZ2V0UGF5bWVudEVsZW1lbnQiLCJhZGFwdGl2ZVByaWNpbmciLCJhbGxvd2VkIiwiX2NyZWF0ZVN0cmlwZUVsZW1lbnQiLCJjcmVhdGVQYXltZW50RWxlbWVudCIsIlN0cmlwZUxpbmtWMkJ1dHRvblN0cmF0ZWd5IiwibG9hZERlZmF1bHRDaGVja291dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/stripe.js\n\n}");

/***/ })

}]);