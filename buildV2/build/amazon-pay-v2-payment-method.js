"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["amazon-pay-v2-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/amazon-pay.js":
/*!**************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/amazon-pay.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAmazonPayV2ButtonStrategy: () => (/* binding */ F),\n/* harmony export */   createAmazonPayV2CustomerStrategy: () => (/* binding */ k),\n/* harmony export */   createAmazonPayV2PaymentStrategy: () => (/* binding */ N)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar o,a;class r extends Error{constructor(t){var e;super(t||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",e=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(t){t[t.MissingBillingAddress=0]=\"MissingBillingAddress\",t[t.MissingCart=1]=\"MissingCart\",t[t.MissingCheckout=2]=\"MissingCheckout\",t[t.MissingConsignments=3]=\"MissingConsignments\",t[t.MissingCustomer=4]=\"MissingCustomer\",t[t.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",t[t.MissingOrder=6]=\"MissingOrder\",t[t.MissingOrderConfig=7]=\"MissingOrderConfig\",t[t.MissingOrderId=8]=\"MissingOrderId\",t[t.MissingPayment=9]=\"MissingPayment\",t[t.MissingPaymentId=10]=\"MissingPaymentId\",t[t.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",t[t.MissingPaymentMethod=12]=\"MissingPaymentMethod\",t[t.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",t[t.MissingPaymentStatus=14]=\"MissingPaymentStatus\",t[t.MissingPaymentToken=15]=\"MissingPaymentToken\",t[t.MissingShippingAddress=16]=\"MissingShippingAddress\"}(o||(o={}));class s extends r{constructor(t){super(function(t){switch(t){case o.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case o.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case o.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case o.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case o.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case o.MissingCheckoutConfig:case o.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case o.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case o.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case o.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case o.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case o.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case o.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(t)),this.subtype=t,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function c(t){return e=t.lineItems.physicalItems.filter(t=>!t.addedByPromotion),(0,lodash__WEBPACK_IMPORTED_MODULE_1__.reduce)(e,(t,e)=>t+e.quantity,0);// removed by dead control flow\n var e; }function u(t,e){if(null==t)throw e?e():new Error(\"An unexpected error has occurred.\");return t}!function(t){t[t.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",t[t.CustomerNotInitialized=1]=\"CustomerNotInitialized\",t[t.PaymentNotInitialized=2]=\"PaymentNotInitialized\",t[t.ShippingNotInitialized=3]=\"ShippingNotInitialized\",t[t.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class d extends r{constructor(t){super(function(t){switch(t){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(t)),this.subtype=t,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const h={de:\"eu\",jp:\"fe\",uk:\"eu\",us:\"na\"};var l,y,m,p,g,P;!function(t){t.en_US=\"en_US\",t.en_GB=\"en_GB\",t.de_DE=\"de_DE\",t.fr_FR=\"fr_FR\",t.it_IT=\"it_IT\",t.es_ES=\"es_ES\",t.ja_JP=\"ja_JP\"}(l||(l={})),function(t){t.Home=\"Home\",t.Product=\"Product\",t.Cart=\"Cart\",t.Checkout=\"Checkout\",t.Other=\"Other\"}(y||(y={})),function(t){t.USD=\"USD\",t.EUR=\"EUR\",t.GBP=\"GBP\",t.JPY=\"JPY\"}(m||(m={})),function(t){t.PayAndShip=\"PayAndShip\",t.PayOnly=\"PayOnly\"}(p||(p={})),function(t){t.Gold=\"Gold\",t.LightGray=\"LightGray\",t.DarkGray=\"DarkGray\"}(g||(g={})),function(t){t.C0001=\"C0001\"}(P||(P={}));var f=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class b{constructor(t){this.amazonPayV2ScriptLoader=t}initialize(t){return f(this,void 0,void 0,function*(){this.amazonPayV2SDK=yield this.amazonPayV2ScriptLoader.load(t),this.buttonParentContainer=this.buttonParentContainer||this.createAmazonPayButtonParentContainer()})}deinitialize(){var t;return this.amazonPayV2Button=void 0,null===(t=this.buttonParentContainer)||void 0===t||t.remove(),this.buttonParentContainer=void 0,this.amazonPayV2SDK=void 0,Promise.resolve()}bindButton(t,e,n){this.getAmazonPayV2SDK().Pay.bindChangeAction(`#${t}`,{amazonCheckoutSessionId:e,changeAction:n})}createButton(t,e){this.amazonPayV2Button=this.getAmazonPayV2SDK().Pay.renderButton(`#${t}`,e)}prepareCheckout(t){const e=this.prepareRequestConfig(t);this.getAmazonPayV2Button().onClick(()=>{this.getAmazonPayV2Button().initCheckout(e)})}prepareCheckoutWithCreationRequestConfig(t){this.getAmazonPayV2Button().onClick(()=>f(this,void 0,void 0,function*(){const e=yield t();if(e){const t=this.prepareRequestConfig(e.createCheckoutSessionConfig,e.estimatedOrderAmount,e.productType);this.getAmazonPayV2Button().initCheckout(t)}}))}signout(){return f(this,void 0,void 0,function*(){return this.amazonPayV2SDK&&this.amazonPayV2SDK.Pay.signout(),Promise.resolve()})}renderAmazonPayButton({buttonColor:t,checkoutState:e,containerId:n,decoupleCheckoutInitiation:i=!1,methodId:o,options:a,placement:r,isButtonMicroTextDisabled:s=!1}){const c=document.querySelector(`#${n}`);if(!c)return;const{id:u}=c.appendChild(this.getButtonParentContainer());a&&s&&(a.design=P.C0001);const d=null!=a?a:this.getAmazonPayV2ButtonOptions(e,o,r,i,t);return this.createButton(u,d),this.getButtonParentContainer()}updateBuyNowFlowFlag(t){this.isBuyNowFlow=Boolean(t)}isPh4Enabled(t,e){const n=!!t[\"PROJECT-3483.amazon_pay_ph4\"],i=!!t[\"INT-6885.amazon_pay_ph4_us_only\"];return n&&i?\"US\"===e:n}prepareRequestConfig(t,e,n){const{publicKeyId:i}=t,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(t,[\"publicKeyId\"]);return Object.assign(Object.assign({createCheckoutSessionConfig:this.isEnvironmentSpecific(i)?o:t},e&&{estimatedOrderAmount:e}),n&&{productType:n})}createAmazonPayButtonParentContainer(){const t=Math.random().toString(16).substr(-4),e=document.createElement(\"div\");return e.id=`amazonpay_button_parent_container_${t}`,e}getAmazonPayV2ButtonOptions(t,e,n,i=!1,a=g.Gold){var r;const{getCart:u,getCheckout:d,getStoreConfigOrThrow:h,getPaymentMethodOrThrow:l}=this.getCheckoutState(t),{config:{merchantId:y,testMode:m},initializationData:f}=l(e);if(!f)throw new s(o.MissingPaymentMethod);const{checkoutLanguage:b,checkoutSessionMethod:v,createCheckoutSessionConfig:C,extractAmazonCheckoutSessionId:z,ledgerCurrency:w,publicKeyId:S=\"\",isButtonMicroTextDisabled:I}=f;if(!y||!w)throw new s(o.MissingPaymentMethod);const _=Object.assign({merchantId:y,ledgerCurrency:w,checkoutLanguage:b,placement:n,buttonColor:a},I?{design:P.C0001}:{});if(this.isBuyNowFlow)return Object.assign(Object.assign({},_),{sandbox:!!m});const O=u();_.productType=O&&0===c(O)?p.PayOnly:p.PayAndShip;const{checkoutSettings:{features:k},storeProfile:{shopPath:M,storeCountryCode:B}}=h();if(this.isPh4Enabled(k,B)){if(!C)throw new s(o.MissingPaymentMethod);const t=null===(r=d())||void 0===r?void 0:r.outstandingBalance.toString(),e=null==O?void 0:O.currency.code,n=Object.assign({},_);let a;return this.isEnvironmentSpecific(S)?(n.publicKeyId=S,a=C):(n.sandbox=!!m,a=Object.assign(Object.assign({},C),{publicKeyId:S})),i||(n.createCheckoutSessionConfig=a),t&&e&&(n.estimatedOrderAmount={amount:t,currencyCode:e}),n}const A={method:v,url:`${M}/remote-checkout/${e}/payment-session`,extractAmazonCheckoutSessionId:z};return Object.assign(Object.assign({},_),{createCheckoutSession:A,sandbox:!!m})}isEnvironmentSpecific(t){return/^(SANDBOX|LIVE)/.test(t)}getAmazonPayV2SDK(){return this.getOrThrow(this.amazonPayV2SDK)}getButtonParentContainer(){return this.getOrThrow(this.buttonParentContainer)}getAmazonPayV2Button(){return this.getOrThrow(this.amazonPayV2Button)}getOrThrow(t){return u(t,()=>new d(a.PaymentNotInitialized))}getCheckoutState(t){return\"object\"==typeof(e=t)&&null!==e&&\"cart\"in e&&\"checkout\"in e&&\"config\"in e&&\"paymentMethods\"in e?{getCart:t.cart.getCart,getCheckout:t.checkout.getCheckout,getStoreConfigOrThrow:t.config.getStoreConfigOrThrow,getPaymentMethodOrThrow:e=>t.paymentMethods.getPaymentMethodOrThrow(e)}:t;// removed by dead control flow\n var e; }}class v extends r{constructor(t){super(t||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class C{constructor(t,e=window){this.scriptLoader=t,this.windowWithAmazonPay=e}load(t){return e=this,n=void 0,o=function*(){const{initializationData:e}=t,n=(null==e?void 0:e.region)||\"us\",i=h[n];if(yield this.scriptLoader.loadScript(`https://static-${i}.payments-amazon.com/checkout.js`),!this.windowWithAmazonPay.amazon)throw new v;return this.windowWithAmazonPay.amazon},new((i=void 0)||(i=Promise))(function(t,a){function r(t){try{c(o.next(t))}catch(t){a(t)}}function s(t){try{c(o.throw(t))}catch(t){a(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i(function(t){t(n)})).then(r,s)}c((o=o.apply(e,n||[])).next())});// removed by dead control flow\n var e, n, i, o; }}function z(){return new b(new C((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()))}function w(t,e){return Object.assign(t,{resolveIds:e})}class S extends r{constructor(t){super(t||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class I extends r{constructor(t){super(t||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var _=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class O{constructor(t,e){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e}initialize(t){return _(this,void 0,void 0,function*(){const{methodId:e,amazonpay:n}=t;if(!e||!(null==n?void 0:n.container))throw new S('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');let i;try{i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e)}catch(t){yield this.paymentIntegrationService.loadPaymentMethod(e),i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e)}yield this.amazonPayV2PaymentProcessor.initialize(i),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:n.container,methodId:e,placement:y.Checkout})})}deinitialize(){return _(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize()})}signIn(){throw new I('In order to sign in via Amazon, the shopper must click on \"Amazon Pay\" button.')}signOut(t){return _(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getPaymentId();e&&(yield this.amazonPayV2PaymentProcessor.signout(),yield this.paymentIntegrationService.remoteCheckoutSignOut(e.providerId,t))})}executePaymentMethodCheckout(t){var e;return null===(e=null==t?void 0:t.continueWithCheckoutCallback)||void 0===e||e.call(t),Promise.resolve()}}const k=w(t=>new O(t,z()),[{id:\"amazonpay\"}]);class M extends S{constructor(t){let e=\"Unable to submit payment for the order because the payload is invalid.\";t&&(e=`${e} Make sure the following fields are provided correctly: ${t.join(\", \")}.`),super(e),this.name=\"PaymentArgumentInvalidError\"}}class B extends r{constructor(t){super(t||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}class A extends r{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}var T=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class V{constructor(t,e){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e}initialize(t){return T(this,void 0,void 0,function*(){const{methodId:e,amazonpay:n}=t;if(!e)throw new S('Unable to proceed because \"methodId\" argument is not provided.');const i=this.paymentIntegrationService.getState(),{features:o}=i.getStoreConfigOrThrow().checkoutSettings,a=i.getPaymentMethodOrThrow(e),r=a.initializationData||{},{paymentToken:s=\"\",region:c=\"\",isButtonMicroTextDisabled:u}=r;if(yield this.amazonPayV2PaymentProcessor.initialize(a),this._isReadyToPay(s))(null==n?void 0:n.editButtonId)&&this._bindEditButton(n.editButtonId,s,\"changePayment\",this._isModalFlow(c));else{const{id:t}=this._createContainer();if(this._amazonPayButton=this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:i,containerId:t,decoupleCheckoutInitiation:this._isOneTimeTransaction(o,c.toUpperCase()),methodId:e,placement:y.Checkout,isButtonMicroTextDisabled:u}),!this._amazonPayButton)throw new S(\"Unable to render the Amazon Pay button to an invalid HTML container element.\")}})}execute(t,n){return T(this,void 0,void 0,function*(){const{payment:i}=t;if(!i)throw new M([\"payment\"]);const{methodId:o}=i,a=this.paymentIntegrationService.getState(),{features:r}=a.getStoreConfigOrThrow().checkoutSettings,s=a.getPaymentMethodOrThrow(o).initializationData||{},{paymentToken:c=\"\",region:u=\"\"}=s;if(this._isReadyToPay(c)||this._isOneTimeTransaction(r,u.toUpperCase())){const e={methodId:o,paymentData:{nonce:c||\"apb\"}};yield this.paymentIntegrationService.submitOrder(t,n);try{return void(yield this.paymentIntegrationService.submitPayment(e))}catch(t){if(!((t=>\"object\"==typeof t&&null!==t&&\"body\"in t)(t)&&(d=t.body,\"object\"==typeof d&&null!==d&&\"status\"in d&&\"additional_action_required\"in d&&\"additional_action_required\"===d.status&&\"data\"in d.additional_action_required&&\"redirect_url\"in d.additional_action_required.data&&\"string\"==typeof d.additional_action_required.data.redirect_url)))throw t;const{additional_action_required:e}=t.body,{redirect_url:n}=e.data;if(c)return new Promise(()=>window.location.assign(n));this.amazonPayV2PaymentProcessor.prepareCheckout(JSON.parse(n))}}var d;return this._getAmazonPayButton().click(),this._isModalFlow(u)?new Promise((t,e)=>{const n=()=>{window.removeEventListener(\"focus\",n),e(new B(\"Shopper needs to login to Amazonpay to continue\"))};window.addEventListener(\"focus\",n)}):new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)})}finalize(){return Promise.reject(new A)}deinitialize(){return T(this,void 0,void 0,function*(){yield this.amazonPayV2PaymentProcessor.deinitialize(),this._amazonPayButton=void 0})}_bindEditButton(t,e,n,i){const o=document.getElementById(t);if(o&&o.parentNode){if(!i){const t=o.cloneNode(!0);o.parentNode.replaceChild(t,o),t.addEventListener(\"click\",()=>{this._showLoadingSpinner()})}this.amazonPayV2PaymentProcessor.bindButton(t,e,n)}}_isModalFlow(t){return\"us\"===t}_showLoadingSpinner(){return T(this,void 0,void 0,function*(){yield this.paymentIntegrationService.widgetInteraction(()=>new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop))})}_createContainer(){let t=document.getElementById(\"AmazonPayButton\");return t||(t=document.createElement(\"div\"),t.id=\"AmazonPayButton\",t.style.display=\"none\",document.body.appendChild(t))}_getAmazonPayButton(){return u(this._amazonPayButton,()=>new d(a.PaymentNotInitialized))}_isOneTimeTransaction(t,e){return this.amazonPayV2PaymentProcessor.isPh4Enabled(t,e)&&t[\"INT-6399.amazon_pay_apb\"]}_isReadyToPay(t){return!!t}}const N=w(t=>new V(t,z()),[{id:\"amazonpay\"}]);class x extends r{constructor(t){super(t||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}class E extends r{constructor(t){super(t||\"An unexpected error has occurred during config creation process. Please try again later.\"),this.name=\"AmazonPayV2ConfigCreationError\",this.type=\"amazon_pay_v2_config_creation_error\"}}function U(t){return t instanceof Object&&\"buyNowInitializeOptions\"in t}var j,D=function(t,e,n,i){return new(n||(n=Promise))(function(o,a){function r(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((i=i.apply(t,e||[])).next())})};class q{constructor(t,e,n){this.paymentIntegrationService=t,this.amazonPayV2PaymentProcessor=e,this.amazonPayV2ConfigRequestSender=n}initialize(t){var e;return D(this,void 0,void 0,function*(){const{methodId:n,containerId:i,amazonpay:o}=t,{buttonColor:a}=o||{};if(!n||!i)throw new S('Unable to proceed because \"methodId\" or \"containerId\" argument is not provided.');const{getPaymentMethodOrThrow:r}=this.paymentIntegrationService.getState(),s=r(n),{initializationData:c}=s;yield this.amazonPayV2PaymentProcessor.initialize(s),o||(yield this.paymentIntegrationService.loadDefaultCheckout());const u=U(o)?void 0:o;U(o)&&\"function\"==typeof(null===(e=o.buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)&&(this._buyNowInitializeOptions=o.buyNowInitializeOptions,this.amazonPayV2PaymentProcessor.updateBuyNowFlowFlag(!0)),this.amazonPayV2PaymentProcessor.renderAmazonPayButton({checkoutState:this.paymentIntegrationService.getState(),containerId:i,methodId:n,options:u,placement:y.Cart,buttonColor:a,isButtonMicroTextDisabled:null==c?void 0:c.isButtonMicroTextDisabled}),this._buyNowInitializeOptions&&this.amazonPayV2PaymentProcessor.prepareCheckoutWithCreationRequestConfig(this._getCheckoutCreationRequestConfig.bind(this))})}deinitialize(){return this.amazonPayV2PaymentProcessor.deinitialize()}_createBuyNowCartOrThrow(){var t,e;return D(this,void 0,void 0,function*(){const n=null===(e=null===(t=this._buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody)||void 0===e?void 0:e.call(t);if(!n)throw new s(o.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(n)}catch(t){throw new x}})}_createCheckoutConfig(t){return D(this,void 0,void 0,function*(){try{const e=(yield this.amazonPayV2ConfigRequestSender.createCheckoutConfig(t)).body,{payload:n,public_key:i}=e,o=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(e,[\"payload\",\"public_key\"]);return Object.assign({payloadJSON:n,publicKeyId:i},o)}catch(t){throw new E}})}_getCheckoutCreationRequestConfig(){return D(this,void 0,void 0,function*(){const t=yield this._createBuyNowCartOrThrow(),e={amount:String(t.baseAmount),currencyCode:t.currency.code};return{createCheckoutSessionConfig:yield this._createCheckoutConfig(t.id),estimatedOrderAmount:e,productType:0===c(t)?p.PayOnly:p.PayAndShip}})}}!function(t){t.Json=\"application/json\",t.JsonV1=\"application/vnd.bc.v1+json\"}(j||(j={}));const R=j,L={\"X-Checkout-SDK-Version\":\"1.867.0\"};class K{constructor(t){this._requestSender=t}createCheckoutConfig(t){const e={cartId:t},n=Object.assign({\"X-API-INTERNAL\":\"This API endpoint is for internal use only and may change in the future\",\"Content-Type\":R.Json},L);return this._requestSender.post(\"/api/storefront/payment/amazonpay\",{headers:n,body:e})}}const F=w(t=>{const e=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)(),n=new K(e),o=z();return new q(t,o,n)},[{id:\"amazonpay\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hbWF6b24tcGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFQ0FBQyxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsR0ZuQkosU0FBWWYsR0FDUixxREFDQSxpQ0FDQSx5Q0FDQSxpREFDQSx5Q0FDQSxxREFDQSxtQ0FDQSwrQ0FDQSx1Q0FDQSx1Q0FDQSw0Q0FDQSw0REFDQSxvREFDQSw4REFDQSxvREFDQSxrREFDQSx1REFDSCxDQWxCRCxDQUFZQSxJQUFBQSxFQUFvQixLQXlCakIsTUFBTWdCLFVBQXlCZCxFQUMxQyxXQUFBRSxDQUFtQmEsR0FDZlYsTUFPUixTQUF5QkUsR0FDckIsT0FBUUEsR0FDSixLQUFLVCxFQUFxQmtCLHNCQUN0QixNQUFPLGlFQUVYLEtBQUtsQixFQUFxQm1CLFlBQ3RCLE1BQU8sc0RBRVgsS0FBS25CLEVBQXFCb0Isb0JBQ3RCLE1BQU8sOERBRVgsS0FBS3BCLEVBQXFCcUIsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3JCLEVBQXFCc0IsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3RCLEVBQXFCdUIsc0JBQzFCLEtBQUt2QixFQUFxQndCLG1CQUN0QixNQUFPLCtEQUVYLEtBQUt4QixFQUFxQnlCLGFBQ3RCLE1BQU8sdURBRVgsS0FBS3pCLEVBQXFCMEIsZUFDdEIsTUFBTywwRUFFWCxLQUFLMUIsRUFBcUIyQixlQUN0QixNQUFP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T0FBTzdRLEtBQUsrUSxlQUFlSSxLQUFLLG9DQUFxQyxDQUFFRixVQUFTekQsUUFDcEYsRUVmSixNQWNBLEVBQWUvQyxFQWJYTyxJQUVBLE1BQU1vRyxFQUFnQkMsZ0ZBQUFBLEdBQ2hCQyxFQUEyQixJQUFJUixFQUF5Qk0sR0FDeERuRyxFQUE4QlYsSUFFcEMsT0FBTyxJQUFJa0YsRUFDUHpFLEVBQ0FDLEVBQ0FxRyxJQUkyRCxDQUFDLENBQUVwTCxHQUFJLGUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9zaGlwcGluZy9nZXRTaGlwcGFibGVJdGVtc0NvdW50LnRzPzI0ODUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9zaGlwcGluZy9nZXRMaW5lSXRlbXNDb3VudC50cz8zMDcwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdXRpbC10eXBlcy9ndWFyZC50cz82ZTY5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LXV0aWxzL3NyYy9hbWF6b24tcGF5LXYyLnRzPzgyM2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdXRpbHMvc3JjL2FtYXpvbi1wYXktdjItcGF5bWVudC1wcm9jZXNzb3IudHM/NTExMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS11dGlscy9zcmMvaXNJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzLnRzP2IzMjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdXRpbHMvc3JjL2FtYXpvbi1wYXktdjItc2NyaXB0LWxvYWRlci50cz8wYmNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LXV0aWxzL3NyYy9jcmVhdGUtYW1hem9uLXBheS12Mi1wYXltZW50LXByb2Nlc3Nvci50cz9jYjJjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWltcGxlbWVudGVkLWVycm9yLnRzPzNhMzUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2FtYXpvbi1wYXktdjItY3VzdG9tZXItc3RyYXRlZ3kudHM/OTA2ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWFtYXpvbi1wYXktdjItY3VzdG9tZXItc3RyYXRlZ3kudHM/NDFiZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jYW5jZWxsZWQtZXJyb3IudHM/MDg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2FtYXpvbi1wYXktdjItcGF5bWVudC1zdHJhdGVneS50cz8zNmJlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS11dGlscy9zcmMvaXNBbWF6b25QYXlBZGRpdGlvbmFsQWN0aW9uRXJyb3IudHM/MzkyYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWFtYXpvbi1wYXktdjItcGF5bWVudC1zdHJhdGVneS50cz82NWRhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2J1eS1ub3ctY2FydC1jcmVhdGlvbi1lcnJvci50cz9kNjA0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LWludGVncmF0aW9uL3NyYy9lcnJvcnMvYW1hem9uLXBheS12Mi1jb25maWctY3JlYXRpb24tZXJyb3IudHM/Y2NlNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvaXNXaXRoQnV5Tm93RmVhdHVyZXMudHM/ZmNiMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvY29udGVudC10eXBlLnRzPzUwNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FtYXpvbi1wYXktaW50ZWdyYXRpb24vc3JjL2FtYXpvbi1wYXktdjItYnV0dG9uLXN0cmF0ZWd5LnRzPzZlMzMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYW1hem9uLXBheS1pbnRlZ3JhdGlvbi9zcmMvYW1hem9uLXBheS12Mi1yZXF1ZXN0LXNlbmRlci50cz81MTdiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9pbnRlcm5hbC1hcGktaGVhZGVycy50cz80MTExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hbWF6b24tcGF5LWludGVncmF0aW9uL3NyYy9jcmVhdGUtYW1hem9uLXBheS12Mi1idXR0b24tc3RyYXRlZ3kudHM/NmQ4YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgeyBDYXJ0IH0gZnJvbSAnLi4vY2FydCc7XG5cbmltcG9ydCBnZXRMaW5lSXRlbXNDb3VudCBmcm9tICcuL2dldExpbmVJdGVtc0NvdW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0U2hpcHBhYmxlSXRlbXNDb3VudChjYXJ0OiBDYXJ0KTogbnVtYmVyIHtcbiAgICByZXR1cm4gZ2V0TGluZUl0ZW1zQ291bnQoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmFkZGVkQnlQcm9tb3Rpb24pKTtcbn1cbiIsImltcG9ydCB7IHJlZHVjZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IExpbmVJdGVtIH0gZnJvbSAnLi4vY2FydCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldExpbmVJdGVtc0NvdW50KGxpbmVJdGVtczogTGluZUl0ZW1bXSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHJlZHVjZShsaW5lSXRlbXMsICh0b3RhbCwgaXRlbTogTGluZUl0ZW0pID0+IHRvdGFsICsgaXRlbS5xdWFudGl0eSwgMCk7XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBndWFyZDxUPih2YWx1ZTogVCwgZXJyb3JGYWN0b3J5PzogKCkgPT4gRXJyb3IpOiBOb25OdWxsYWJsZTxUPiB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JGYWN0b3J5ID8gZXJyb3JGYWN0b3J5KCkgOiBuZXcgRXJyb3IoJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZSBhcyBOb25OdWxsYWJsZTxUPjtcbn1cbiIsImltcG9ydCB7XG4gICAgQ2FydCxcbiAgICBDaGVja291dCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBTdG9yZUNvbmZpZyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCB0eXBlIEVudmlyb25tZW50VHlwZSA9ICdQUk9EVUNUSU9OJyB8ICdURVNUJztcblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMk9wdGlvbnMge1xuICAgIGVudmlyb25tZW50OiBFbnZpcm9ubWVudFR5cGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJTREsge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBQYXk6IEFtYXpvblBheVYyQ2xpZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVlc3RDb25maWcge1xuICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZzogQW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc7XG4gICAgZXN0aW1hdGVkT3JkZXJBbW91bnQ/OiBBbWF6b25QYXlWMlByaWNlO1xuICAgIHByb2R1Y3RUeXBlPzogQW1hem9uUGF5VjJQYXlPcHRpb25zO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyQnV0dG9uIHtcbiAgICAvKipcbiAgICAgKiBBbGxvd3MgeW91IHRvIGRlZmluZSBjdXN0b20gYWN0aW9ucy5cbiAgICAgKi9cbiAgICBvbkNsaWNrOiAoY2FsbGJhY2s6ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+KSA9PiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhdGVzIHRoZSBBbWF6b24gUGF5IGNoZWNrb3V0LlxuICAgICAqL1xuICAgIGluaXRDaGVja291dChyZXF1ZXN0Q29uZmlnOiBSZXF1ZXN0Q29uZmlnKTogdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgQW1hem9uUGF5VjJCdXR0b25QYXJhbWV0ZXJzID0gQW1hem9uUGF5VjJCdXR0b25QYXJhbXMgfCBBbWF6b25QYXlWMk5ld0J1dHRvblBhcmFtcztcblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkNsaWVudCB7XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBBbWF6b24gUGF5IGJ1dHRvbiB0byBhIEhUTUwgY29udGFpbmVyIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29udGFpbmVySWQgLSBIVE1MIGVsZW1lbnQgaWQuXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEJ1dHRvbiByZW5kZXJpbmcgcGFyYW1zLlxuICAgICAqL1xuICAgIHJlbmRlckJ1dHRvbihjb250YWluZXJJZDogc3RyaW5nLCBwYXJhbXM6IEFtYXpvblBheVYyQnV0dG9uUGFyYW1ldGVycyk6IEFtYXpvblBheVYyQnV0dG9uO1xuXG4gICAgLyoqXG4gICAgICogQmluZCBjbGljayBldmVudHMgdG8gSFRNTCBlbGVtZW50cywgc28gdGhhdCB3aGVuIHRoZSBlbGVtZW50IGlzIGNsaWNrZWQsIHRoZSBidXllciBjYW4gc2VsZWN0IGEgZGlmZmVyZW50IHNoaXBwaW5nIGFkZHJlc3Mgb3IgcGF5bWVudCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYnV0dG9uSWQgLSBIVE1MIGVsZW1lbnQgaWQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBFbGVtZW50IGJpbmRpbmcgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBiaW5kQ2hhbmdlQWN0aW9uKGJ1dHRvbklkOiBzdHJpbmcsIG9wdGlvbnM6IEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uT3B0aW9ucyk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBbGxvdyBidXllcnMgdG8gc2lnbiBvdXQgZnJvbSB0aGVpciBBbWF6b24gYWNjb3VudC5cbiAgICAgKi9cbiAgICBzaWdub3V0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBhbWF6b24/OiBBbWF6b25QYXlWMlNESztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkJ1dHRvbkNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQW1hem9uIFBheSBtZXJjaGFudCBhY2NvdW50IGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogUGxhY2VtZW50IG9mIHRoZSBBbWF6b24gUGF5IGJ1dHRvbiBvbiB5b3VyIHdlYnNpdGUuXG4gICAgICovXG4gICAgcGxhY2VtZW50OiBBbWF6b25QYXlWMlBsYWNlbWVudDtcblxuICAgIC8qKlxuICAgICAqIExlZGdlciBjdXJyZW5jeSBwcm92aWRlZCBkdXJpbmcgcmVnaXN0cmF0aW9uIGZvciB0aGUgZ2l2ZW4gbWVyY2hhbnQgaWRlbnRpZmllci5cbiAgICAgKi9cbiAgICBsZWRnZXJDdXJyZW5jeTogQW1hem9uUGF5VjJMZWRnZXJDdXJyZW5jeTtcblxuICAgIC8qKlxuICAgICAqIFByb2R1Y3QgdHlwZSBzZWxlY3RlZCBmb3IgY2hlY2tvdXQuIERlZmF1bHQgaXMgJ1BheUFuZFNoaXAnLlxuICAgICAqL1xuICAgIHByb2R1Y3RUeXBlPzogQW1hem9uUGF5VjJQYXlPcHRpb25zO1xuXG4gICAgLyoqXG4gICAgICogQ29sb3Igb2YgdGhlIEFtYXpvbiBQYXkgYnV0dG9uLlxuICAgICAqL1xuICAgIGJ1dHRvbkNvbG9yPzogQW1hem9uUGF5VjJCdXR0b25Db2xvcjtcblxuICAgIC8qKlxuICAgICAqIExhbmd1YWdlIHVzZWQgdG8gcmVuZGVyIHRoZSBidXR0b24gYW5kIHRleHQgb24gQW1hem9uIFBheSBob3N0ZWQgcGFnZXMuXG4gICAgICovXG4gICAgY2hlY2tvdXRMYW5ndWFnZT86IEFtYXpvblBheVYyQ2hlY2tvdXRMYW5ndWFnZTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgYnV0dG9uIHRvIFNhbmRib3ggZW52aXJvbm1lbnQuIFlvdSBkbyBub3QgaGF2ZSB0byBzZXQgdGhpcyBwYXJhbWV0ZXJcbiAgICAgKiBpZiB5b3VyIGBwdWJsaWNLZXlJZGAgaGFzIGFuIGVudmlyb25tZW50IHByZWZpeC4gRGVmYXVsdCBpcyBmYWxzZS5cbiAgICAgKi9cbiAgICBzYW5kYm94PzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFNldHMgQW1hem9uIFBheSBidXR0b24gZGVzaWduLlxuICAgICAqL1xuICAgIGRlc2lnbj86IEFtYXpvblBheVYyQnV0dG9uRGVzaWduO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyQnV0dG9uUGFyYW1zIGV4dGVuZHMgQW1hem9uUGF5VjJCdXR0b25Db25maWcge1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gZm9yIGNhbGxpbmcgdGhlIGVuZHBvaW50IHRvIENyZWF0ZSBDaGVja291dCBTZXNzaW9uLlxuICAgICAqL1xuICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbjogQW1hem9uUGF5VjJDaGVja291dFNlc3Npb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJOZXdCdXR0b25QYXJhbXMgZXh0ZW5kcyBBbWF6b25QYXlWMkJ1dHRvbkNvbmZpZyB7XG4gICAgLyoqXG4gICAgICogQ3JlZGVudGlhbCBwcm92aWRlZCBieSBBbWF6b24gUGF5LiBZb3UgbXVzdCBhbHNvIHNldCB0aGUgYHNhbmRib3hgXG4gICAgICogcGFyYW1ldGVyIGlmIHlvdXIgYHB1YmxpY0tleUlkYCBkb2VzIG5vdCBoYXZlIGFuIGVudmlyb25tZW50IHByZWZpeC5cbiAgICAgKi9cbiAgICBwdWJsaWNLZXlJZD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEl0IGRvZXMgbm90IGhhdmUgdG8gbWF0Y2ggdGhlIGZpbmFsIG9yZGVyIGFtb3VudCBpZiB0aGUgYnV5ZXIgdXBkYXRlc1xuICAgICAqIHRoZWlyIG9yZGVyIGFmdGVyIHN0YXJ0aW5nIGNoZWNrb3V0LiBBbWF6b24gUGF5IHdpbGwgdXNlIHRoaXMgdmFsdWUgdG9cbiAgICAgKiBhc3Nlc3MgdHJhbnNhY3Rpb24gcmlzayBhbmQgcHJldmVudCBidXllcnMgZnJvbSBzZWxlY3RpbmcgcGF5bWVudCBtZXRob2RzXG4gICAgICogdGhhdCBjYW4ndCBiZSB1c2VkIHRvIHByb2Nlc3MgdGhlIG9yZGVyLlxuICAgICAqL1xuICAgIGVzdGltYXRlZE9yZGVyQW1vdW50PzogQW1hem9uUGF5VjJQcmljZTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBDaGVja291dCBTZXNzaW9uIGNvbmZpZ3VyYXRpb24uXG4gICAgICovXG4gICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnPzogQW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJDaGVja291dFNlc3Npb24ge1xuICAgIC8qKlxuICAgICAqIEVuZHBvaW50IFVSTCB0byBDcmVhdGUgQ2hlY2tvdXQgU2Vzc2lvbi5cbiAgICAgKi9cbiAgICB1cmw6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEhUVFAgcmVxdWVzdCBtZXRob2QuIERlZmF1bHQgaXMgJ1BPU1QnLlxuICAgICAqL1xuICAgIG1ldGhvZD86ICdHRVQnIHwgJ1BPU1QnO1xuXG4gICAgLyoqXG4gICAgICogQ2hlY2tvdXQgU2Vzc2lvbiBJRCBwYXJhbWV0ZXIgaW4gdGhlIHJlc3BvbnNlLiBEZWZhdWx0IGlzICdjaGVja291dFNlc3Npb25JZCcuXG4gICAgICovXG4gICAgZXh0cmFjdEFtYXpvbkNoZWNrb3V0U2Vzc2lvbklkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnIHtcbiAgICAvKipcbiAgICAgKiBBIHBheWxvYWQgdGhhdCBBbWF6b24gUGF5IHdpbGwgdXNlIHRvIGNyZWF0ZSBhIENoZWNrb3V0IFNlc3Npb24gb2JqZWN0LlxuICAgICAqL1xuICAgIHBheWxvYWRKU09OOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBQYXlsb2FkJ3Mgc2lnbmF0dXJlLlxuICAgICAqL1xuICAgIHNpZ25hdHVyZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ3JlZGVudGlhbCBwcm92aWRlZCBieSBBbWF6b24gUGF5LiBZb3UgZG8gbm90IGhhdmUgdG8gc2V0IHRoaXMgcGFyYW1ldGVyXG4gICAgICogaWYgeW91ciBgcHVibGljS2V5SWRgIGhhcyBhbiBlbnZpcm9ubWVudCBwcmVmaXguXG4gICAgICovXG4gICAgcHVibGljS2V5SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5VjJQcmljZSB7XG4gICAgLyoqXG4gICAgICogVHJhbnNhY3Rpb24gYW1vdW50LlxuICAgICAqL1xuICAgIGFtb3VudDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNhY3Rpb24gY3VycmVuY3kgY29kZSBpbiBJU08gNDIxNyBmb3JtYXQuIEV4YW1wbGU6IFVTRC5cbiAgICAgKi9cbiAgICBjdXJyZW5jeUNvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgQW1hem9uUGF5VjJDaGFuZ2VBY3Rpb25UeXBlID0gJ2NoYW5nZUFkZHJlc3MnIHwgJ2NoYW5nZVBheW1lbnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQW1hem9uIFBheSBDaGVja291dCBTZXNzaW9uIGlkZW50aWZpZXIuXG4gICAgICovXG4gICAgYW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSByZXF1ZXN0ZWQgYnkgdGhlIGJ1eWVyLlxuICAgICAqL1xuICAgIGNoYW5nZUFjdGlvbjogQW1hem9uUGF5VjJDaGFuZ2VBY3Rpb25UeXBlO1xufVxuXG5leHBvcnQgY29uc3QgYW1hem9uUGF5VjJSZWdpb25zOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIGRlOiAnZXUnLFxuICAgIGpwOiAnZmUnLFxuICAgIHVrOiAnZXUnLFxuICAgIHVzOiAnbmEnLFxufTtcblxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5leHBvcnQgZW51bSBBbWF6b25QYXlWMkNoZWNrb3V0TGFuZ3VhZ2Uge1xuICAgIGVuX1VTID0gJ2VuX1VTJyxcbiAgICBlbl9HQiA9ICdlbl9HQicsXG4gICAgZGVfREUgPSAnZGVfREUnLFxuICAgIGZyX0ZSID0gJ2ZyX0ZSJyxcbiAgICBpdF9JVCA9ICdpdF9JVCcsXG4gICAgZXNfRVMgPSAnZXNfRVMnLFxuICAgIGphX0pQID0gJ2phX0pQJyxcbn1cbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1zaGFkb3cgKi9cbmV4cG9ydCBlbnVtIEFtYXpvblBheVYyUGxhY2VtZW50IHtcbiAgICAvKiogSW5pdGlhbCBvciBtYWluIHBhZ2UuICovXG4gICAgSG9tZSA9ICdIb21lJyxcblxuICAgIC8qKiBQcm9kdWN0IGRldGFpbHMgcGFnZS4gKi9cbiAgICBQcm9kdWN0ID0gJ1Byb2R1Y3QnLFxuXG4gICAgLyoqIENhcnQgcmV2aWV3IHBhZ2UgYmVmb3JlIGJ1eWVyIHN0YXJ0cyBjaGVja291dC4gKi9cbiAgICBDYXJ0ID0gJ0NhcnQnLFxuXG4gICAgLyoqIEFueSBwYWdlIGFmdGVyIGJ1eWVyIHN0YXJ0cyBjaGVja291dC4gKi9cbiAgICBDaGVja291dCA9ICdDaGVja291dCcsXG5cbiAgICAvKiogQW55IHBhZ2UgdGhhdCBkb2Vzbid0IGZpdCB0aGUgcHJldmlvdXMgZGVzY3JpcHRpb25zLiAqL1xuICAgIE90aGVyID0gJ090aGVyJyxcbn1cbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXNoYWRvdyAqL1xuXG5leHBvcnQgZW51bSBBbWF6b25QYXlWMkxlZGdlckN1cnJlbmN5IHtcbiAgICBVU0QgPSAnVVNEJyxcbiAgICBFVVIgPSAnRVVSJyxcbiAgICBHQlAgPSAnR0JQJyxcbiAgICBKUFkgPSAnSlBZJyxcbn1cblxuZXhwb3J0IGVudW0gQW1hem9uUGF5VjJQYXlPcHRpb25zIHtcbiAgICAvKiogU2VsZWN0IHRoaXMgcHJvZHVjdCB0eXBlIGlmIHlvdSBuZWVkIHRoZSBidXllcidzIHNoaXBwaW5nIGRldGFpbHMuICovXG4gICAgUGF5QW5kU2hpcCA9ICdQYXlBbmRTaGlwJyxcblxuICAgIC8qKiBTZWxlY3QgdGhpcyBwcm9kdWN0IHR5cGUgaWYgeW91IGRvIG5vdCBuZWVkIHRoZSBidXllcidzIHNoaXBwaW5nIGRldGFpbHMuICovXG4gICAgUGF5T25seSA9ICdQYXlPbmx5Jyxcbn1cblxuZXhwb3J0IGVudW0gQW1hem9uUGF5VjJCdXR0b25Db2xvciB7XG4gICAgR29sZCA9ICdHb2xkJyxcbiAgICBMaWdodEdyYXkgPSAnTGlnaHRHcmF5JyxcbiAgICBEYXJrR3JheSA9ICdEYXJrR3JheScsXG59XG5cbmV4cG9ydCBlbnVtIEFtYXpvblBheVYyQnV0dG9uRGVzaWduIHtcbiAgICBDMDAwMSA9ICdDMDAwMScsXG59XG5cbi8vIFRPRE86IGFmdGVyIG1pZ3JhdGlvbiBBbWF6b25QYXkgc3RyYXRlZ2llcyB0byBpbnRlZ3JhdGlvbiBwYWNrYWdlXG4vLyA8SW50ZXJuYWxDaGVja291dFNlbGVjdG9ycz4gc2hvdWxkIGJlIHJlbW92ZWRcbi8vIGFuZCByZXBsYWNlZCB1c2FnZSB3aXRoIDxQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPlxuZXhwb3J0IGludGVyZmFjZSBJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzIHtcbiAgICBjYXJ0OiB7XG4gICAgICAgIGdldENhcnQ6ICgpID0+IENhcnQgfCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBjaGVja291dDoge1xuICAgICAgICBnZXRDaGVja291dDogKCkgPT4gQ2hlY2tvdXQgfCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBjb25maWc6IHtcbiAgICAgICAgZ2V0U3RvcmVDb25maWdPclRocm93OiAoKSA9PiBTdG9yZUNvbmZpZztcbiAgICB9O1xuICAgIHBheW1lbnRNZXRob2RzOiB7XG4gICAgICAgIGdldFBheW1lbnRNZXRob2RPclRocm93OiA8VD4obWV0aG9kSWQ6IHN0cmluZykgPT4gUGF5bWVudE1ldGhvZDxUPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnMge1xuICAgIGJ1dHRvbkNvbG9yPzogQW1hem9uUGF5VjJCdXR0b25Db2xvcjtcbiAgICBjaGVja291dExhbmd1YWdlPzogQW1hem9uUGF5VjJDaGVja291dExhbmd1YWdlO1xuICAgIGNoZWNrb3V0U2Vzc2lvbk1ldGhvZD86ICdHRVQnIHwgJ1BPU1QnO1xuICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZz86IEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnO1xuICAgIGV4dHJhY3RBbWF6b25DaGVja291dFNlc3Npb25JZD86IHN0cmluZztcbiAgICBsZWRnZXJDdXJyZW5jeT86IEFtYXpvblBheVYyTGVkZ2VyQ3VycmVuY3k7XG4gICAgcHVibGljS2V5SWQ/OiBzdHJpbmc7XG4gICAgcmVnaW9uPzogc3RyaW5nO1xuICAgIGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIHBheW1lbnRUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbWF6b25QYXlWMkJ1dHRvblJlbmRlcmluZ09wdGlvbnMge1xuICAgIGNoZWNrb3V0U3RhdGU6IEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMgfCBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnM7XG4gICAgY29udGFpbmVySWQ6IHN0cmluZztcbiAgICBkZWNvdXBsZUNoZWNrb3V0SW5pdGlhdGlvbj86IGJvb2xlYW47XG4gICAgbWV0aG9kSWQ6IHN0cmluZztcbiAgICBidXR0b25Db2xvcj86IEFtYXpvblBheVYyQnV0dG9uQ29sb3I7XG4gICAgb3B0aW9ucz86IEFtYXpvblBheVYyQnV0dG9uUGFyYW1ldGVycztcbiAgICBwbGFjZW1lbnQ6IEFtYXpvblBheVYyUGxhY2VtZW50O1xuICAgIGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQ/OiBib29sZWFuO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSB7XG4gICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgcmVkaXJlY3RfdXJsOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cbi8qIGVzbGludC1lbmFibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0U2V0dGluZ3MsXG4gICAgZ2V0U2hpcHBhYmxlSXRlbXNDb3VudCxcbiAgICBndWFyZCxcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgU3RvcmVQcm9maWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBBbWF6b25QYXlWMkJ1dHRvbixcbiAgICBBbWF6b25QYXlWMkJ1dHRvbkNvbG9yLFxuICAgIEFtYXpvblBheVYyQnV0dG9uQ29uZmlnLFxuICAgIEFtYXpvblBheVYyQnV0dG9uRGVzaWduLFxuICAgIEFtYXpvblBheVYyQnV0dG9uUGFyYW1ldGVycyxcbiAgICBBbWF6b25QYXlWMkJ1dHRvblJlbmRlcmluZ09wdGlvbnMsXG4gICAgQW1hem9uUGF5VjJDaGFuZ2VBY3Rpb25UeXBlLFxuICAgIEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLFxuICAgIEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQW1hem9uUGF5VjJOZXdCdXR0b25QYXJhbXMsXG4gICAgQW1hem9uUGF5VjJQYXlPcHRpb25zLFxuICAgIEFtYXpvblBheVYyUGxhY2VtZW50LFxuICAgIEFtYXpvblBheVYyUHJpY2UsXG4gICAgQW1hem9uUGF5VjJTREssXG4gICAgSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyxcbiAgICBSZXF1ZXN0Q29uZmlnLFxufSBmcm9tICcuL2FtYXpvbi1wYXktdjInO1xuaW1wb3J0IEFtYXpvblBheVYyU2NyaXB0TG9hZGVyIGZyb20gJy4vYW1hem9uLXBheS12Mi1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7IGlzSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyB9IGZyb20gJy4vaXNJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIHtcbiAgICBwcml2YXRlIGFtYXpvblBheVYyU0RLPzogQW1hem9uUGF5VjJTREs7XG4gICAgcHJpdmF0ZSBidXR0b25QYXJlbnRDb250YWluZXI/OiBIVE1MRGl2RWxlbWVudDtcbiAgICBwcml2YXRlIGFtYXpvblBheVYyQnV0dG9uPzogQW1hem9uUGF5VjJCdXR0b247XG4gICAgcHJpdmF0ZSBpc0J1eU5vd0Zsb3c/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhbWF6b25QYXlWMlNjcmlwdExvYWRlcjogQW1hem9uUGF5VjJTY3JpcHRMb2FkZXIpIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QW1hem9uUGF5VjJJbml0aWFsaXplT3B0aW9ucz4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5hbWF6b25QYXlWMlNESyA9IGF3YWl0IHRoaXMuYW1hem9uUGF5VjJTY3JpcHRMb2FkZXIubG9hZChwYXltZW50TWV0aG9kKTtcbiAgICAgICAgdGhpcy5idXR0b25QYXJlbnRDb250YWluZXIgPVxuICAgICAgICAgICAgdGhpcy5idXR0b25QYXJlbnRDb250YWluZXIgfHwgdGhpcy5jcmVhdGVBbWF6b25QYXlCdXR0b25QYXJlbnRDb250YWluZXIoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJCdXR0b24gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYnV0dG9uUGFyZW50Q29udGFpbmVyPy5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5idXR0b25QYXJlbnRDb250YWluZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJTREsgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGJpbmRCdXR0b24oXG4gICAgICAgIGJ1dHRvbklkOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICAgICBjaGFuZ2VBY3Rpb246IEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nZXRBbWF6b25QYXlWMlNESygpLlBheS5iaW5kQ2hhbmdlQWN0aW9uKGAjJHtidXR0b25JZH1gLCB7XG4gICAgICAgICAgICBhbWF6b25DaGVja291dFNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICAgICAgY2hhbmdlQWN0aW9uLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b24oY29udGFpbmVySWQ6IHN0cmluZywgb3B0aW9uczogQW1hem9uUGF5VjJCdXR0b25QYXJhbWV0ZXJzKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJCdXR0b24gPSB0aGlzLmdldEFtYXpvblBheVYyU0RLKCkuUGF5LnJlbmRlckJ1dHRvbihcbiAgICAgICAgICAgIGAjJHtjb250YWluZXJJZH1gLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcmVwYXJlQ2hlY2tvdXQoY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOiBSZXF1aXJlZDxBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZz4pIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdENvbmZpZyA9IHRoaXMucHJlcGFyZVJlcXVlc3RDb25maWcoY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnKTtcblxuICAgICAgICB0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uKCkub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uKCkuaW5pdENoZWNrb3V0KHJlcXVlc3RDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcmVwYXJlQ2hlY2tvdXRXaXRoQ3JlYXRpb25SZXF1ZXN0Q29uZmlnKFxuICAgICAgICBjcmVhdGVDaGVja291dENvbmZpZzogKCkgPT4gUHJvbWlzZTxcbiAgICAgICAgICAgIHwge1xuICAgICAgICAgICAgICAgICAgY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnOiBSZXF1aXJlZDxBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZz47XG4gICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRPcmRlckFtb3VudDogQW1hem9uUGF5VjJQcmljZTtcbiAgICAgICAgICAgICAgICAgIHByb2R1Y3RUeXBlOiBBbWF6b25QYXlWMlBheU9wdGlvbnM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHwgdW5kZWZpbmVkXG4gICAgICAgID4sXG4gICAgKSB7XG4gICAgICAgIHRoaXMuZ2V0QW1hem9uUGF5VjJCdXR0b24oKS5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGNyZWF0ZUNoZWNrb3V0Q29uZmlnKCk7XG5cbiAgICAgICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0Q29uZmlnID0gdGhpcy5wcmVwYXJlUmVxdWVzdENvbmZpZyhcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmVzdGltYXRlZE9yZGVyQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBjb25maWcucHJvZHVjdFR5cGUsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0QW1hem9uUGF5VjJCdXR0b24oKS5pbml0Q2hlY2tvdXQocmVxdWVzdENvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25vdXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmFtYXpvblBheVYyU0RLKSB7XG4gICAgICAgICAgICB0aGlzLmFtYXpvblBheVYyU0RLLlBheS5zaWdub3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcmVuZGVyQW1hem9uUGF5QnV0dG9uKHtcbiAgICAgICAgYnV0dG9uQ29sb3IsXG4gICAgICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgICAgIGNvbnRhaW5lcklkLFxuICAgICAgICBkZWNvdXBsZUNoZWNrb3V0SW5pdGlhdGlvbiA9IGZhbHNlLFxuICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgcGxhY2VtZW50LFxuICAgICAgICBpc0J1dHRvbk1pY3JvVGV4dERpc2FibGVkID0gZmFsc2UsXG4gICAgfTogQW1hem9uUGF5VjJCdXR0b25SZW5kZXJpbmdPcHRpb25zKTogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihgIyR7Y29udGFpbmVySWR9YCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaWQ6IHBhcmVudENvbnRhaW5lcklkIH0gPSBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5nZXRCdXR0b25QYXJlbnRDb250YWluZXIoKSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCkge1xuICAgICAgICAgICAgb3B0aW9ucy5kZXNpZ24gPSBBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbi5DMDAwMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyA9XG4gICAgICAgICAgICBvcHRpb25zID8/XG4gICAgICAgICAgICB0aGlzLmdldEFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyhcbiAgICAgICAgICAgICAgICBjaGVja291dFN0YXRlLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBsYWNlbWVudCxcbiAgICAgICAgICAgICAgICBkZWNvdXBsZUNoZWNrb3V0SW5pdGlhdGlvbixcbiAgICAgICAgICAgICAgICBidXR0b25Db2xvcixcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVCdXR0b24ocGFyZW50Q29udGFpbmVySWQsIGFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnV0dG9uUGFyZW50Q29udGFpbmVyKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlQnV5Tm93Rmxvd0ZsYWcoaXNCdXlOb3dGbG93PzogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmlzQnV5Tm93RmxvdyA9IEJvb2xlYW4oaXNCdXlOb3dGbG93KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBpc1BoNEVuYWJsZWQoXG4gICAgICAgIGZlYXR1cmVzOiBDaGVja291dFNldHRpbmdzWydmZWF0dXJlcyddLFxuICAgICAgICBzdG9yZUNvdW50cnlDb2RlOiBTdG9yZVByb2ZpbGVbJ3N0b3JlQ291bnRyeUNvZGUnXSxcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaXNQaDRFbmFibGVkID0gISFmZWF0dXJlc1snUFJPSkVDVC0zNDgzLmFtYXpvbl9wYXlfcGg0J107XG4gICAgICAgIGNvbnN0IGlzUGg0VXNPbmx5ID0gISFmZWF0dXJlc1snSU5ULTY4ODUuYW1hem9uX3BheV9waDRfdXNfb25seSddO1xuXG4gICAgICAgIGlmIChpc1BoNEVuYWJsZWQgJiYgaXNQaDRVc09ubHkpIHtcbiAgICAgICAgICAgIHJldHVybiBzdG9yZUNvdW50cnlDb2RlID09PSAnVVMnO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGlzUGg0RW5hYmxlZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVSZXF1ZXN0Q29uZmlnKFxuICAgICAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc6IFJlcXVpcmVkPEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnPixcbiAgICAgICAgZXN0aW1hdGVkT3JkZXJBbW91bnQ/OiBBbWF6b25QYXlWMlByaWNlLFxuICAgICAgICBwcm9kdWN0VHlwZT86IEFtYXpvblBheVYyUGF5T3B0aW9ucyxcbiAgICApOiBSZXF1ZXN0Q29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBwdWJsaWNLZXlJZCwgLi4uc2lnbmVkUGF5bG9hZCB9ID0gY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc6IHRoaXMuaXNFbnZpcm9ubWVudFNwZWNpZmljKHB1YmxpY0tleUlkKVxuICAgICAgICAgICAgICAgID8gc2lnbmVkUGF5bG9hZFxuICAgICAgICAgICAgICAgIDogY3JlYXRlQ2hlY2tvdXRTZXNzaW9uQ29uZmlnLFxuICAgICAgICAgICAgLi4uKGVzdGltYXRlZE9yZGVyQW1vdW50ICYmIHsgZXN0aW1hdGVkT3JkZXJBbW91bnQgfSksXG4gICAgICAgICAgICAuLi4ocHJvZHVjdFR5cGUgJiYgeyBwcm9kdWN0VHlwZSB9KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUFtYXpvblBheUJ1dHRvblBhcmVudENvbnRhaW5lcigpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgICAgIGNvbnN0IHVpZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cigtNCk7XG4gICAgICAgIGNvbnN0IHBhcmVudENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIHBhcmVudENvbnRhaW5lci5pZCA9IGBhbWF6b25wYXlfYnV0dG9uX3BhcmVudF9jb250YWluZXJfJHt1aWR9YDtcblxuICAgICAgICByZXR1cm4gcGFyZW50Q29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QW1hem9uUGF5VjJCdXR0b25PcHRpb25zKFxuICAgICAgICBjaGVja291dFN0YXRlOiBJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzIHwgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwbGFjZW1lbnQ6IEFtYXpvblBheVYyUGxhY2VtZW50LFxuICAgICAgICBkZWNvdXBsZUNoZWNrb3V0SW5pdGlhdGlvbiA9IGZhbHNlLFxuICAgICAgICBidXR0b25Db2xvciA9IEFtYXpvblBheVYyQnV0dG9uQ29sb3IuR29sZCxcbiAgICApOiBBbWF6b25QYXlWMkJ1dHRvblBhcmFtZXRlcnMge1xuICAgICAgICBjb25zdCB7IGdldENhcnQsIGdldENoZWNrb3V0LCBnZXRTdG9yZUNvbmZpZ09yVGhyb3csIGdldFBheW1lbnRNZXRob2RPclRocm93IH0gPVxuICAgICAgICAgICAgdGhpcy5nZXRDaGVja291dFN0YXRlKGNoZWNrb3V0U3RhdGUpO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjb25maWc6IHsgbWVyY2hhbnRJZCwgdGVzdE1vZGUgfSxcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgfSA9IGdldFBheW1lbnRNZXRob2RPclRocm93PEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+KG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2hlY2tvdXRMYW5ndWFnZSxcbiAgICAgICAgICAgIGNoZWNrb3V0U2Vzc2lvbk1ldGhvZCxcbiAgICAgICAgICAgIGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyxcbiAgICAgICAgICAgIGV4dHJhY3RBbWF6b25DaGVja291dFNlc3Npb25JZCxcbiAgICAgICAgICAgIGxlZGdlckN1cnJlbmN5LFxuICAgICAgICAgICAgcHVibGljS2V5SWQgPSAnJyxcbiAgICAgICAgICAgIGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgaWYgKCFtZXJjaGFudElkIHx8ICFsZWRnZXJDdXJyZW5jeSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uQmFzZUNvbmZpZzogQW1hem9uUGF5VjJCdXR0b25Db25maWcgPSB7XG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgbGVkZ2VyQ3VycmVuY3ksXG4gICAgICAgICAgICBjaGVja291dExhbmd1YWdlLFxuICAgICAgICAgICAgcGxhY2VtZW50LFxuICAgICAgICAgICAgYnV0dG9uQ29sb3IsXG4gICAgICAgICAgICAuLi4oaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCA/IHsgZGVzaWduOiBBbWF6b25QYXlWMkJ1dHRvbkRlc2lnbi5DMDAwMSB9IDoge30pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5idXR0b25CYXNlQ29uZmlnLFxuICAgICAgICAgICAgICAgIHNhbmRib3g6ICEhdGVzdE1vZGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IGdldENhcnQoKTtcblxuICAgICAgICBidXR0b25CYXNlQ29uZmlnLnByb2R1Y3RUeXBlID1cbiAgICAgICAgICAgIGNhcnQgJiYgZ2V0U2hpcHBhYmxlSXRlbXNDb3VudChjYXJ0KSA9PT0gMFxuICAgICAgICAgICAgICAgID8gQW1hem9uUGF5VjJQYXlPcHRpb25zLlBheU9ubHlcbiAgICAgICAgICAgICAgICA6IEFtYXpvblBheVYyUGF5T3B0aW9ucy5QYXlBbmRTaGlwO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNoZWNrb3V0U2V0dGluZ3M6IHsgZmVhdHVyZXMgfSxcbiAgICAgICAgICAgIHN0b3JlUHJvZmlsZTogeyBzaG9wUGF0aCwgc3RvcmVDb3VudHJ5Q29kZSB9LFxuICAgICAgICB9ID0gZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQaDRFbmFibGVkKGZlYXR1cmVzLCBzdG9yZUNvdW50cnlDb2RlKSkge1xuICAgICAgICAgICAgaWYgKCFjcmVhdGVDaGVja291dFNlc3Npb25Db25maWcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGFtb3VudCA9IGdldENoZWNrb3V0KCk/Lm91dHN0YW5kaW5nQmFsYW5jZS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gY2FydD8uY3VycmVuY3kuY29kZTtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IEFtYXpvblBheVYyTmV3QnV0dG9uUGFyYW1zID0geyAuLi5idXR0b25CYXNlQ29uZmlnIH07XG4gICAgICAgICAgICBsZXQgdG1wQ29uZmlnOiBBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZztcblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbnZpcm9ubWVudFNwZWNpZmljKHB1YmxpY0tleUlkKSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvbk9wdGlvbnMucHVibGljS2V5SWQgPSBwdWJsaWNLZXlJZDtcbiAgICAgICAgICAgICAgICB0bXBDb25maWcgPSBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1dHRvbk9wdGlvbnMuc2FuZGJveCA9ICEhdGVzdE1vZGU7XG4gICAgICAgICAgICAgICAgdG1wQ29uZmlnID0geyAuLi5jcmVhdGVDaGVja291dFNlc3Npb25Db25maWcsIHB1YmxpY0tleUlkIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24pIHtcbiAgICAgICAgICAgICAgICBidXR0b25PcHRpb25zLmNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyA9IHRtcENvbmZpZztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGFtb3VudCAmJiBjdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgICAgICBidXR0b25PcHRpb25zLmVzdGltYXRlZE9yZGVyQW1vdW50ID0geyBhbW91bnQsIGN1cnJlbmN5Q29kZSB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYnV0dG9uT3B0aW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIG1ldGhvZDogY2hlY2tvdXRTZXNzaW9uTWV0aG9kLFxuICAgICAgICAgICAgdXJsOiBgJHtzaG9wUGF0aH0vcmVtb3RlLWNoZWNrb3V0LyR7bWV0aG9kSWR9L3BheW1lbnQtc2Vzc2lvbmAsXG4gICAgICAgICAgICBleHRyYWN0QW1hem9uQ2hlY2tvdXRTZXNzaW9uSWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmJ1dHRvbkJhc2VDb25maWcsXG4gICAgICAgICAgICBjcmVhdGVDaGVja291dFNlc3Npb24sXG4gICAgICAgICAgICBzYW5kYm94OiAhIXRlc3RNb2RlLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNFbnZpcm9ubWVudFNwZWNpZmljKHB1YmxpY0tleUlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIC9eKFNBTkRCT1h8TElWRSkvLnRlc3QocHVibGljS2V5SWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QW1hem9uUGF5VjJTREsoKTogQW1hem9uUGF5VjJTREsge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPclRocm93KHRoaXMuYW1hem9uUGF5VjJTREspO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QnV0dG9uUGFyZW50Q29udGFpbmVyKCk6IEhUTUxEaXZFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JUaHJvdyh0aGlzLmJ1dHRvblBhcmVudENvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRBbWF6b25QYXlWMkJ1dHRvbigpOiBBbWF6b25QYXlWMkJ1dHRvbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9yVGhyb3codGhpcy5hbWF6b25QYXlWMkJ1dHRvbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRPclRocm93PFQ+KHZhbHVlPzogVCk6IFQge1xuICAgICAgICByZXR1cm4gZ3VhcmQoXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICgpID0+IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gSU5GTzogbmVlZCB0aGlzIG1hcHBpbmcgd2hpbGUgd2UgaGF2ZSBzdHJhdGVnaWVzIGluIGNvcmUgYW5kIGluIGludGVncmF0aW9uIHBhY2thZ2UgYXQgdGhlIHNhbWUgdGltZVxuICAgIHByaXZhdGUgZ2V0Q2hlY2tvdXRTdGF0ZShcbiAgICAgICAgY2hlY2tvdXRTdGF0ZTogSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyB8IFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyxcbiAgICApOiBQaWNrPFxuICAgICAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgICAgICdnZXRDYXJ0JyB8ICdnZXRDaGVja291dCcgfCAnZ2V0U3RvcmVDb25maWdPclRocm93JyB8ICdnZXRQYXltZW50TWV0aG9kT3JUaHJvdydcbiAgICA+IHtcbiAgICAgICAgaWYgKGlzSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyhjaGVja291dFN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBnZXRDYXJ0OiBjaGVja291dFN0YXRlLmNhcnQuZ2V0Q2FydCxcbiAgICAgICAgICAgICAgICBnZXRDaGVja291dDogY2hlY2tvdXRTdGF0ZS5jaGVja291dC5nZXRDaGVja291dCxcbiAgICAgICAgICAgICAgICBnZXRTdG9yZUNvbmZpZ09yVGhyb3c6IGNoZWNrb3V0U3RhdGUuY29uZmlnLmdldFN0b3JlQ29uZmlnT3JUaHJvdyxcbiAgICAgICAgICAgICAgICBnZXRQYXltZW50TWV0aG9kT3JUaHJvdzogPFQ+KG1ldGhvZElkOiBzdHJpbmcpID0+XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0U3RhdGUucGF5bWVudE1ldGhvZHMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8VD4obWV0aG9kSWQpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjaGVja291dFN0YXRlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEludGVybmFsQ2hlY2tvdXRTZWxlY3RvcnMgfSBmcm9tICcuL2FtYXpvbi1wYXktdjInO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlcm5hbENoZWNrb3V0U2VsZWN0b3JzKFxuICAgIGNoZWNrb3V0U2VsZWN0b3JzOiB1bmtub3duLFxuKTogY2hlY2tvdXRTZWxlY3RvcnMgaXMgSW50ZXJuYWxDaGVja291dFNlbGVjdG9ycyB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGNoZWNrb3V0U2VsZWN0b3JzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBjaGVja291dFNlbGVjdG9ycyAhPT0gbnVsbCAmJlxuICAgICAgICAnY2FydCcgaW4gY2hlY2tvdXRTZWxlY3RvcnMgJiZcbiAgICAgICAgJ2NoZWNrb3V0JyBpbiBjaGVja291dFNlbGVjdG9ycyAmJlxuICAgICAgICAnY29uZmlnJyBpbiBjaGVja291dFNlbGVjdG9ycyAmJlxuICAgICAgICAncGF5bWVudE1ldGhvZHMnIGluIGNoZWNrb3V0U2VsZWN0b3JzXG4gICAgKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBBbWF6b25QYXlWMkhvc3RXaW5kb3csXG4gICAgQW1hem9uUGF5VjJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBhbWF6b25QYXlWMlJlZ2lvbnMsXG4gICAgQW1hem9uUGF5VjJTREssXG59IGZyb20gJy4vYW1hem9uLXBheS12Mic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFtYXpvblBheVYyU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSB3aW5kb3dXaXRoQW1hem9uUGF5OiBBbWF6b25QYXlWMkhvc3RXaW5kb3cgPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZChtZXRob2Q6IFBheW1lbnRNZXRob2Q8QW1hem9uUGF5VjJJbml0aWFsaXplT3B0aW9ucz4pOiBQcm9taXNlPEFtYXpvblBheVYyU0RLPiB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBtZXRob2Q7XG4gICAgICAgIGNvbnN0IHJlZ2lvbiA9IGluaXRpYWxpemF0aW9uRGF0YT8ucmVnaW9uIHx8ICd1cyc7XG5cbiAgICAgICAgY29uc3QgYW1hem9uUGF5VjJSZWdpb24gPSBhbWF6b25QYXlWMlJlZ2lvbnNbcmVnaW9uXTtcblxuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KFxuICAgICAgICAgICAgYGh0dHBzOi8vc3RhdGljLSR7YW1hem9uUGF5VjJSZWdpb259LnBheW1lbnRzLWFtYXpvbi5jb20vY2hlY2tvdXQuanNgLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3dXaXRoQW1hem9uUGF5LmFtYXpvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3dXaXRoQW1hem9uUGF5LmFtYXpvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCBBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgZnJvbSAnLi9hbWF6b24tcGF5LXYyLXBheW1lbnQtcHJvY2Vzc29yJztcbmltcG9ydCBBbWF6b25QYXlWMlNjcmlwdExvYWRlciBmcm9tICcuL2FtYXpvbi1wYXktdjItc2NyaXB0LWxvYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcigpOiBBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3Ige1xuICAgIHJldHVybiBuZXcgQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yKG5ldyBBbWF6b25QYXlWMlNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSkpO1xufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgdHJ5IHRvIGNhbGwgYSBtZXRob2QgdGhhdCBpcyBvbmx5IGEgc3R1YiBhbmQgaGFzIG5vdFxuICogYmVlbiBmdWxseSBpbXBsZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnTm90IGltcGxlbWVudGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbXBsZW1lbnRlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zLFxuICAgIEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICBBbWF6b25QYXlWMlBsYWNlbWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aEFtYXpvblBheVYyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vYW1hem9uLXBheS12Mi1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMkN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcjogQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQW1hem9uUGF5VjJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBhbWF6b25wYXkgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCB8fCAhYW1hem9ucGF5Py5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm1ldGhvZElkXCIgb3IgXCJjb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9IGNhdGNoIChfZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5pbml0aWFsaXplKHBheW1lbnRNZXRob2QpO1xuXG4gICAgICAgIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnJlbmRlckFtYXpvblBheUJ1dHRvbih7XG4gICAgICAgICAgICBjaGVja291dFN0YXRlOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxcbiAgICAgICAgICAgIGNvbnRhaW5lcklkOiBhbWF6b25wYXkuY29udGFpbmVyLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IEFtYXpvblBheVYyUGxhY2VtZW50LkNoZWNrb3V0LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmRlaW5pdGlhbGl6ZSgpO1xuICAgIH1cblxuICAgIHNpZ25JbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAnSW4gb3JkZXIgdG8gc2lnbiBpbiB2aWEgQW1hem9uLCB0aGUgc2hvcHBlciBtdXN0IGNsaWNrIG9uIFwiQW1hem9uIFBheVwiIGJ1dHRvbi4nLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnQgPSBzdGF0ZS5nZXRQYXltZW50SWQoKTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLnNpZ25vdXQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnJlbW90ZUNoZWNrb3V0U2lnbk91dChwYXltZW50LnByb3ZpZGVySWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FtYXpvbi1wYXktdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYW1hem9uLXBheS12Mi1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8QW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBbWF6b25QYXlWMkN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcigpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5LCBbeyBpZDogJ2FtYXpvbnBheScgfV0pO1xuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgcGF5bWVudCBmbG93IGlzIGNhbmNlbGxlZC4gSXQgY291bGQgYmVcbiAqIGR1ZSB0byBhIGRlbGliZXJhdGUgdXNlciBpbnRlcmFjdGlvbiwgaS5lLjogdGhlIHVzZXIgY2xpY2tzIG9uIGEgY2FuY2VsXG4gKiBidXR0b24gd2hpY2ggZGlzbWlzc2VzIHRoZSBwYXltZW50IG1vZGFsLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1BheW1lbnQgcHJvY2VzcyB3YXMgY2FuY2VsbGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9jYW5jZWxsZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFtYXpvblBheVYyQ2hhbmdlQWN0aW9uVHlwZSxcbiAgICBBbWF6b25QYXlWMkNoZWNrb3V0U2Vzc2lvbkNvbmZpZyxcbiAgICBBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zLFxuICAgIEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICBBbWF6b25QYXlWMlBsYWNlbWVudCxcbiAgICBpc0FtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYW1hem9uLXBheS11dGlscyc7XG5pbXBvcnQge1xuICAgIENoZWNrb3V0U2V0dGluZ3MsXG4gICAgZ3VhcmQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgU3RvcmVQcm9maWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aEFtYXpvblBheVYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9hbWF6b24tcGF5LXYyLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2FtYXpvblBheUJ1dHRvbj86IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBhbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3I6IEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQW1hem9uUGF5VjJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGFtYXpvbnBheSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmVhdHVyZXMgfSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3M7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBbWF6b25QYXlWMkluaXRpYWxpemVPcHRpb25zPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxpemF0aW9uRGF0YSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IHBheW1lbnRUb2tlbiA9ICcnLCByZWdpb24gPSAnJywgaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmluaXRpYWxpemUocGF5bWVudE1ldGhvZCk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2lzUmVhZHlUb1BheShwYXltZW50VG9rZW4pKSB7XG4gICAgICAgICAgICBpZiAoYW1hem9ucGF5Py5lZGl0QnV0dG9uSWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9iaW5kRWRpdEJ1dHRvbihcbiAgICAgICAgICAgICAgICAgICAgYW1hem9ucGF5LmVkaXRCdXR0b25JZCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudFRva2VuLFxuICAgICAgICAgICAgICAgICAgICAnY2hhbmdlUGF5bWVudCcsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzTW9kYWxGbG93KHJlZ2lvbiksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaWQ6IGNvbnRhaW5lcklkIH0gPSB0aGlzLl9jcmVhdGVDb250YWluZXIoKTtcblxuICAgICAgICAgICAgdGhpcy5fYW1hem9uUGF5QnV0dG9uID0gdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IucmVuZGVyQW1hem9uUGF5QnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjaGVja291dFN0YXRlOiBzdGF0ZSxcbiAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICBkZWNvdXBsZUNoZWNrb3V0SW5pdGlhdGlvbjogdGhpcy5faXNPbmVUaW1lVHJhbnNhY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLFxuICAgICAgICAgICAgICAgICAgICByZWdpb24udG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogQW1hem9uUGF5VjJQbGFjZW1lbnQuQ2hlY2tvdXQsXG4gICAgICAgICAgICAgICAgaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2FtYXpvblBheUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1VuYWJsZSB0byByZW5kZXIgdGhlIEFtYXpvbiBQYXkgYnV0dG9uIHRvIGFuIGludmFsaWQgSFRNTCBjb250YWluZXIgZWxlbWVudC4nLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50IH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkIH0gPSBwYXltZW50O1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGZlYXR1cmVzIH0gPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QW1hem9uUGF5VjJJbml0aWFsaXplT3B0aW9ucz4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCBpbml0aWFsaXphdGlvbkRhdGEgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50VG9rZW4gPSAnJywgcmVnaW9uID0gJycgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLl9pc1JlYWR5VG9QYXkocGF5bWVudFRva2VuKSB8fFxuICAgICAgICAgICAgdGhpcy5faXNPbmVUaW1lVHJhbnNhY3Rpb24oZmVhdHVyZXMsIHJlZ2lvbi50b1VwcGVyQ2FzZSgpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IG5vbmNlOiBwYXltZW50VG9rZW4gfHwgJ2FwYicgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihwYXlsb2FkLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8ICFpc0FtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkoZXJyb3IuYm9keSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDogYWRkaXRpb25hbEFjdGlvbiB9ID0gZXJyb3IuYm9keTtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHJlZGlyZWN0X3VybCB9ID0gYWRkaXRpb25hbEFjdGlvbi5kYXRhO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBheW1lbnRUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4gd2luZG93LmxvY2F0aW9uLmFzc2lnbihyZWRpcmVjdF91cmwpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5wcmVwYXJlQ2hlY2tvdXQoXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgICAgICAgICAgICAgSlNPTi5wYXJzZShyZWRpcmVjdF91cmwpIGFzIFJlcXVpcmVkPEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnPixcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZ2V0QW1hem9uUGF5QnV0dG9uKCkuY2xpY2soKTtcblxuICAgICAgICAvLyBGb2N1cyBvZiBwYXJlbnQgd2luZG93IHVzZWQgdG8gdHJ5IGFuZCBkZXRlY3QgdGhlIHVzZXIgY2FuY2VsbGluZyB0aGUgQW1hem9uIGxvZyBpbiBtb2RhbFxuICAgICAgICAvLyBTaG91bGQgYmUgcmVmYWN0b3JlZCBpZi93aGVuIEFtYXpvbiBhZGQgYSBtb2RhbCBjbG9zZSBob29rIHRvIHRoZWlyIFNES1xuICAgICAgICBpZiAodGhpcy5faXNNb2RhbEZsb3cocmVnaW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbkZvY3VzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBvbkZvY3VzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU2hvcHBlciBuZWVkcyB0byBsb2dpbiB0byBBbWF6b25wYXkgdG8gY29udGludWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgb25Gb2N1cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxuZXZlcj4obm9vcCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuZGVpbml0aWFsaXplKCk7XG5cbiAgICAgICAgdGhpcy5fYW1hem9uUGF5QnV0dG9uID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2JpbmRFZGl0QnV0dG9uKFxuICAgICAgICBidXR0b25JZDogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICAgICAgY2hhbmdlQWN0aW9uOiBBbWF6b25QYXlWMkNoYW5nZUFjdGlvblR5cGUsXG4gICAgICAgIGlzTW9kYWxGbG93OiBib29sZWFuLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25JZCk7XG5cbiAgICAgICAgaWYgKCFidXR0b24gfHwgIWJ1dHRvbi5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzTW9kYWxGbG93KSB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZSA9IGJ1dHRvbi5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZSwgYnV0dG9uKTtcblxuICAgICAgICAgICAgY2xvbmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLl9zaG93TG9hZGluZ1NwaW5uZXIoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuYmluZEJ1dHRvbihidXR0b25JZCwgc2Vzc2lvbklkLCBjaGFuZ2VBY3Rpb24pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2lzTW9kYWxGbG93KHJlZ2lvbjogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiByZWdpb24gPT09ICd1cyc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfc2hvd0xvYWRpbmdTcGlubmVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uud2lkZ2V0SW50ZXJhY3Rpb24oKCkgPT4gbmV3IFByb21pc2Uobm9vcCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NyZWF0ZUNvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQW1hem9uUGF5QnV0dG9uJyk7XG5cbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaWQgPSAnQW1hem9uUGF5QnV0dG9uJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRBbWF6b25QYXlCdXR0b24oKSB7XG4gICAgICAgIHJldHVybiBndWFyZChcbiAgICAgICAgICAgIHRoaXMuX2FtYXpvblBheUJ1dHRvbixcbiAgICAgICAgICAgICgpID0+IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNPbmVUaW1lVHJhbnNhY3Rpb24oXG4gICAgICAgIGZlYXR1cmVzOiBDaGVja291dFNldHRpbmdzWydmZWF0dXJlcyddLFxuICAgICAgICBzdG9yZUNvdW50cnlDb2RlOiBTdG9yZVByb2ZpbGVbJ3N0b3JlQ291bnRyeUNvZGUnXSxcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLmlzUGg0RW5hYmxlZChmZWF0dXJlcywgc3RvcmVDb3VudHJ5Q29kZSkgJiZcbiAgICAgICAgICAgIGZlYXR1cmVzWydJTlQtNjM5OS5hbWF6b25fcGF5X2FwYiddXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNSZWFkeVRvUGF5KHBheW1lbnRUb2tlbj86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFwYXltZW50VG9rZW47XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCB7IEFtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkgfSBmcm9tICcuL2FtYXpvbi1wYXktdjInO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnMgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkoXG4gICAgZXJyb3JCb2R5OiB1bmtub3duLFxuKTogZXJyb3JCb2R5IGlzIEFtYXpvblBheUFkZGl0aW9uYWxBY3Rpb25FcnJvckJvZHkge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBlcnJvckJvZHkgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yQm9keSAhPT0gbnVsbCAmJlxuICAgICAgICAnc3RhdHVzJyBpbiBlcnJvckJvZHkgJiZcbiAgICAgICAgJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyBpbiBlcnJvckJvZHkgJiZcbiAgICAgICAgKGVycm9yQm9keSBhcyBBbWF6b25QYXlBZGRpdGlvbmFsQWN0aW9uRXJyb3JCb2R5KS5zdGF0dXMgPT09ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgJiZcbiAgICAgICAgJ2RhdGEnIGluIChlcnJvckJvZHkgYXMgQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQgJiZcbiAgICAgICAgJ3JlZGlyZWN0X3VybCcgaW5cbiAgICAgICAgICAgIChlcnJvckJvZHkgYXMgQW1hem9uUGF5QWRkaXRpb25hbEFjdGlvbkVycm9yQm9keSkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YSAmJlxuICAgICAgICB0eXBlb2YgKGVycm9yQm9keSBhcyBBbWF6b25QYXlBZGRpdGlvbmFsQWN0aW9uRXJyb3JCb2R5KS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhXG4gICAgICAgICAgICAucmVkaXJlY3RfdXJsID09PSAnc3RyaW5nJ1xuICAgICk7XG59XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9ucyAqL1xuIiwiaW1wb3J0IHsgY3JlYXRlQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hbWF6b24tcGF5LXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9hbWF6b24tcGF5LXYyLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcigpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAnYW1hem9ucGF5JyB9XSk7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFN0YW5kYXJkRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1hem9uUGF5VjJDb25maWdDcmVhdGlvbkVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGNvbmZpZyBjcmVhdGlvbiBwcm9jZXNzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0FtYXpvblBheVYyQ29uZmlnQ3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdhbWF6b25fcGF5X3YyX2NvbmZpZ19jcmVhdGlvbl9lcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgV2l0aEJ1eU5vd0ZlYXR1cmUgfSBmcm9tICcuL2FtYXpvbi1wYXktdjItYnV0dG9uLW9wdGlvbnMnO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNXaXRoQnV5Tm93RmVhdHVyZXMob3B0aW9uczogdW5rbm93bik6IG9wdGlvbnMgaXMgV2l0aEJ1eU5vd0ZlYXR1cmUge1xuICAgIGlmICghKG9wdGlvbnMgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gJ2J1eU5vd0luaXRpYWxpemVPcHRpb25zJyBpbiBvcHRpb25zO1xufVxuIiwiZW51bSBDb250ZW50VHlwZSB7XG4gICAgSnNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBKc29uVjEgPSAnYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50VHlwZTtcbiIsImltcG9ydCB7XG4gICAgQW1hem9uUGF5VjJDaGVja291dFNlc3Npb25Db25maWcsXG4gICAgQW1hem9uUGF5VjJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IsXG4gICAgQW1hem9uUGF5VjJQYXlPcHRpb25zLFxuICAgIEFtYXpvblBheVYyUGxhY2VtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FtYXpvbi1wYXktdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgZ2V0U2hpcHBhYmxlSXRlbXNDb3VudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFdpdGhBbWF6b25QYXlWMkJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIFdpdGhCdXlOb3dGZWF0dXJlLFxufSBmcm9tICcuL2FtYXpvbi1wYXktdjItYnV0dG9uLW9wdGlvbnMnO1xuaW1wb3J0IEFtYXpvblBheVYyUmVxdWVzdFNlbmRlciBmcm9tICcuL2FtYXpvbi1wYXktdjItcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IEFtYXpvblBheVYyQ29uZmlnQ3JlYXRpb25FcnJvciBmcm9tICcuL2Vycm9ycy9hbWF6b24tcGF5LXYyLWNvbmZpZy1jcmVhdGlvbi1lcnJvcic7XG5pbXBvcnQgeyBpc1dpdGhCdXlOb3dGZWF0dXJlcyB9IGZyb20gJy4vaXNXaXRoQnV5Tm93RmVhdHVyZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMkJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6IFdpdGhCdXlOb3dGZWF0dXJlWydidXlOb3dJbml0aWFsaXplT3B0aW9ucyddO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBhbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3I6IEFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvcixcbiAgICAgICAgcHJpdmF0ZSBhbWF6b25QYXlWMkNvbmZpZ1JlcXVlc3RTZW5kZXI6IEFtYXpvblBheVYyUmVxdWVzdFNlbmRlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aEFtYXpvblBheVYyQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGNvbnRhaW5lcklkLCBhbWF6b25wYXkgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYnV0dG9uQ29sb3IgfSA9IGFtYXpvbnBheSB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkIHx8ICFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBvciBcImNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGdldFBheW1lbnRNZXRob2RPclRocm93PEFtYXpvblBheVYySW5pdGlhbGl6ZU9wdGlvbnM+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuaW5pdGlhbGl6ZShwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAoIWFtYXpvbnBheSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGluaXRpYWxpemVBbWF6b25CdXR0b25PcHRpb25zID0gaXNXaXRoQnV5Tm93RmVhdHVyZXMoYW1hem9ucGF5KVxuICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgIDogYW1hem9ucGF5O1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzV2l0aEJ1eU5vd0ZlYXR1cmVzKGFtYXpvbnBheSkgJiZcbiAgICAgICAgICAgIHR5cGVvZiBhbWF6b25wYXkuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zID0gYW1hem9ucGF5LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IudXBkYXRlQnV5Tm93Rmxvd0ZsYWcodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5yZW5kZXJBbWF6b25QYXlCdXR0b24oe1xuICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZTogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgb3B0aW9uczogaW5pdGlhbGl6ZUFtYXpvbkJ1dHRvbk9wdGlvbnMsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IEFtYXpvblBheVYyUGxhY2VtZW50LkNhcnQsXG4gICAgICAgICAgICBidXR0b25Db2xvcixcbiAgICAgICAgICAgIGlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQ6IGluaXRpYWxpemF0aW9uRGF0YT8uaXNCdXR0b25NaWNyb1RleHREaXNhYmxlZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLmFtYXpvblBheVYyUGF5bWVudFByb2Nlc3Nvci5wcmVwYXJlQ2hlY2tvdXRXaXRoQ3JlYXRpb25SZXF1ZXN0Q29uZmlnKFxuICAgICAgICAgICAgICAgIHRoaXMuX2dldENoZWNrb3V0Q3JlYXRpb25SZXF1ZXN0Q29uZmlnLmJpbmQodGhpcyksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IuZGVpbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coKSB7XG4gICAgICAgIGNvbnN0IGJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSA9IHRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHk/LigpO1xuXG4gICAgICAgIGlmICghYnV5Tm93Q2FydFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBidXlOb3dDYXJ0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9jcmVhdGVDaGVja291dENvbmZpZyhcbiAgICAgICAgaWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFJlcXVpcmVkPEFtYXpvblBheVYyQ2hlY2tvdXRTZXNzaW9uQ29uZmlnPj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGJvZHk6IHsgcGF5bG9hZCwgcHVibGljX2tleSwgLi4ucmVzdCB9LFxuICAgICAgICAgICAgfSA9IGF3YWl0IHRoaXMuYW1hem9uUGF5VjJDb25maWdSZXF1ZXN0U2VuZGVyLmNyZWF0ZUNoZWNrb3V0Q29uZmlnKGlkKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkSlNPTjogcGF5bG9hZCxcbiAgICAgICAgICAgICAgICBwdWJsaWNLZXlJZDogcHVibGljX2tleSxcbiAgICAgICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBbWF6b25QYXlWMkNvbmZpZ0NyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2dldENoZWNrb3V0Q3JlYXRpb25SZXF1ZXN0Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID0gYXdhaXQgdGhpcy5fY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgZXN0aW1hdGVkT3JkZXJBbW91bnQgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IFN0cmluZyhidXlOb3dDYXJ0LmJhc2VBbW91bnQpLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBidXlOb3dDYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyA9IGF3YWl0IHRoaXMuX2NyZWF0ZUNoZWNrb3V0Q29uZmlnKGJ1eU5vd0NhcnQuaWQpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGVDaGVja291dFNlc3Npb25Db25maWcsXG4gICAgICAgICAgICBlc3RpbWF0ZWRPcmRlckFtb3VudCxcbiAgICAgICAgICAgIHByb2R1Y3RUeXBlOlxuICAgICAgICAgICAgICAgIGdldFNoaXBwYWJsZUl0ZW1zQ291bnQoYnV5Tm93Q2FydCkgPT09IDBcbiAgICAgICAgICAgICAgICAgICAgPyBBbWF6b25QYXlWMlBheU9wdGlvbnMuUGF5T25seVxuICAgICAgICAgICAgICAgICAgICA6IEFtYXpvblBheVYyUGF5T3B0aW9ucy5QYXlBbmRTaGlwLFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBTREtfVkVSU0lPTl9IRUFERVJTID0geyAnWC1DaGVja291dC1TREstVmVyc2lvbic6IExJQlJBUllfVkVSU0lPTiB9O1xuIiwiaW1wb3J0IHsgUmVxdWVzdFNlbmRlciwgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoZWNrb3V0Q29uZmlnIHtcbiAgICBwYXlsb2FkOiBzdHJpbmc7XG4gICAgc2lnbmF0dXJlOiBzdHJpbmc7XG4gICAgcHVibGljX2tleTogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX3JlcXVlc3RTZW5kZXI6IFJlcXVlc3RTZW5kZXIpIHt9XG5cbiAgICBjcmVhdGVDaGVja291dENvbmZpZyhjYXJ0SWQ6IHN0cmluZyk6IFByb21pc2U8UmVzcG9uc2U8Q2hlY2tvdXRDb25maWc+PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7IGNhcnRJZCB9O1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdCgnL2FwaS9zdG9yZWZyb250L3BheW1lbnQvYW1hem9ucGF5JywgeyBoZWFkZXJzLCBib2R5IH0pO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBJTlRFUk5BTF9VU0VfT05MWSA9XG4gICAgJ1RoaXMgQVBJIGVuZHBvaW50IGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlJztcbiIsImltcG9ydCB7IGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FtYXpvbi1wYXktdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneSBmcm9tICcuL2FtYXpvbi1wYXktdjItYnV0dG9uLXN0cmF0ZWd5JztcbmltcG9ydCBBbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIgZnJvbSAnLi9hbWF6b24tcGF5LXYyLXJlcXVlc3Qtc2VuZGVyJztcblxuY29uc3QgY3JlYXRlQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8QW1hem9uUGF5VjJCdXR0b25TdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIGNvbnN0IHJlcXVlc3RTZW5kZXIgPSBjcmVhdGVSZXF1ZXN0U2VuZGVyKCk7XG4gICAgY29uc3QgYW1hem9uUGF5VjJSZXF1ZXN0U2VuZGVyID0gbmV3IEFtYXpvblBheVYyUmVxdWVzdFNlbmRlcihyZXF1ZXN0U2VuZGVyKTtcbiAgICBjb25zdCBhbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IgPSBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IoKTtcblxuICAgIHJldHVybiBuZXcgQW1hem9uUGF5VjJCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgYW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yLFxuICAgICAgICBhbWF6b25QYXlWMlJlcXVlc3RTZW5kZXIsXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBbWF6b25QYXlWMkJ1dHRvblN0cmF0ZWd5LCBbeyBpZDogJ2FtYXpvbnBheScgfV0pO1xuIl0sIm5hbWVzIjpbIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJnZXRTaGlwcGFibGVJdGVtc0NvdW50IiwiY2FydCIsImxpbmVJdGVtcyIsInBoeXNpY2FsSXRlbXMiLCJmaWx0ZXIiLCJpdGVtIiwiYWRkZWRCeVByb21vdGlvbiIsInJlZHVjZSIsInRvdGFsIiwicXVhbnRpdHkiLCJndWFyZCIsInZhbHVlIiwiZXJyb3JGYWN0b3J5IiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsImFtYXpvblBheVYyUmVnaW9ucyIsImRlIiwianAiLCJ1ayIsInVzIiwiQW1hem9uUGF5VjJDaGVja291dExhbmd1YWdlIiwiQW1hem9uUGF5VjJQbGFjZW1lbnQiLCJBbWF6b25QYXlWMkxlZGdlckN1cnJlbmN5IiwiQW1hem9uUGF5VjJQYXlPcHRpb25zIiwiQW1hem9uUGF5VjJCdXR0b25Db2xvciIsIkFtYXpvblBheVYyQnV0dG9uRGVzaWduIiwiQW1hem9uUGF5VjJQYXltZW50UHJvY2Vzc29yIiwiYW1hem9uUGF5VjJTY3JpcHRMb2FkZXIiLCJpbml0aWFsaXplIiwicGF5bWVudE1ldGhvZCIsImFtYXpvblBheVYyU0RLIiwibG9hZCIsImJ1dHRvblBhcmVudENvbnRhaW5lciIsImNyZWF0ZUFtYXpvblBheUJ1dHRvblBhcmVudENvbnRhaW5lciIsImRlaW5pdGlhbGl6ZSIsImFtYXpvblBheVYyQnV0dG9uIiwidW5kZWZpbmVkIiwicmVtb3ZlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJiaW5kQnV0dG9uIiwiYnV0dG9uSWQiLCJzZXNzaW9uSWQiLCJjaGFuZ2VBY3Rpb24iLCJnZXRBbWF6b25QYXlWMlNESyIsIlBheSIsImJpbmRDaGFuZ2VBY3Rpb24iLCJhbWF6b25DaGVja291dFNlc3Npb25JZCIsImNyZWF0ZUJ1dHRvbiIsImNvbnRhaW5lcklkIiwib3B0aW9ucyIsInJlbmRlckJ1dHRvbiIsInByZXBhcmVDaGVja291dCIsImNyZWF0ZUNoZWNrb3V0U2Vzc2lvbkNvbmZpZyIsInJlcXVlc3RDb25maWciLCJwcmVwYXJlUmVxdWVzdENvbmZpZyIsImdldEFtYXpvblBheVYyQnV0dG9uIiwib25DbGljayIsImluaXRDaGVja291dCIsInByZXBhcmVDaGVja291dFdpdGhDcmVhdGlvblJlcXVlc3RDb25maWciLCJjcmVhdGVDaGVja291dENvbmZpZyIsImNvbmZpZyIsImVzdGltYXRlZE9yZGVyQW1vdW50IiwicHJvZHVjdFR5cGUiLCJzaWdub3V0IiwicmVuZGVyQW1hem9uUGF5QnV0dG9uIiwiYnV0dG9uQ29sb3IiLCJjaGVja291dFN0YXRlIiwiZGVjb3VwbGVDaGVja291dEluaXRpYXRpb24iLCJtZXRob2RJZCIsInBsYWNlbWVudCIsImlzQnV0dG9uTWljcm9UZXh0RGlzYWJsZWQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInBhcmVudENvbnRhaW5lcklkIiwiYXBwZW5kQ2hpbGQiLCJnZXRCdXR0b25QYXJlbnRDb250YWluZXIiLCJkZXNpZ24iLCJDMDAwMSIsImFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyIsImdldEFtYXpvblBheVYyQnV0dG9uT3B0aW9ucyIsInVwZGF0ZUJ1eU5vd0Zsb3dGbGFnIiwiaXNCdXlOb3dGbG93IiwiQm9vbGVhbiIsImlzUGg0RW5hYmxlZCIsImZlYXR1cmVzIiwic3RvcmVDb3VudHJ5Q29kZSIsImlzUGg0VXNPbmx5IiwicHVibGljS2V5SWQiLCJzaWduZWRQYXlsb2FkIiwiaXNFbnZpcm9ubWVudFNwZWNpZmljIiwidWlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwicGFyZW50Q29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsIkdvbGQiLCJnZXRDYXJ0IiwiZ2V0Q2hlY2tvdXQiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsImdldENoZWNrb3V0U3RhdGUiLCJtZXJjaGFudElkIiwidGVzdE1vZGUiLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjaGVja291dExhbmd1YWdlIiwiY2hlY2tvdXRTZXNzaW9uTWV0aG9kIiwiZXh0cmFjdEFtYXpvbkNoZWNrb3V0U2Vzc2lvbklkIiwibGVkZ2VyQ3VycmVuY3kiLCJidXR0b25CYXNlQ29uZmlnIiwic2FuZGJveCIsIlBheU9ubHkiLCJQYXlBbmRTaGlwIiwiY2hlY2tvdXRTZXR0aW5ncyIsInN0b3JlUHJvZmlsZSIsInNob3BQYXRoIiwiYW1vdW50Iiwib3V0c3RhbmRpbmdCYWxhbmNlIiwiY3VycmVuY3lDb2RlIiwiY3VycmVuY3kiLCJjb2RlIiwiYnV0dG9uT3B0aW9ucyIsInRtcENvbmZpZyIsImNyZWF0ZUNoZWNrb3V0U2Vzc2lvbiIsIm1ldGhvZCIsInVybCIsInRlc3QiLCJnZXRPclRocm93IiwiY2hlY2tvdXRTZWxlY3RvcnMiLCJjaGVja291dCIsInBheW1lbnRNZXRob2RzIiwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IiLCJBbWF6b25QYXlWMlNjcmlwdExvYWRlciIsInNjcmlwdExvYWRlciIsIndpbmRvd1dpdGhBbWF6b25QYXkiLCJ3aW5kb3ciLCJyZWdpb24iLCJhbWF6b25QYXlWMlJlZ2lvbiIsImxvYWRTY3JpcHQiLCJhbWF6b24iLCJjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRQcm9jZXNzb3IiLCJnZXRTY3JpcHRMb2FkZXIiLCJ0b1Jlc29sdmFibGVNb2R1bGUiLCJtb2R1bGUiLCJyZXNvbHZlSWRzIiwiYXNzaWduIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwiQW1hem9uUGF5VjJDdXN0b21lclN0cmF0ZWd5IiwicGF5bWVudEludGVncmF0aW9uU2VydmljZSIsImFtYXpvblBheVYyUGF5bWVudFByb2Nlc3NvciIsImFtYXpvbnBheSIsImdldFN0YXRlIiwiX2UiLCJsb2FkUGF5bWVudE1ldGhvZCIsIkNoZWNrb3V0Iiwic2lnbkluIiwic2lnbk91dCIsInBheW1lbnQiLCJnZXRQYXltZW50SWQiLCJyZW1vdGVDaGVja291dFNpZ25PdXQiLCJwcm92aWRlcklkIiwiZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dCIsImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2siLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsIkFtYXpvblBheVYyUGF5bWVudFN0cmF0ZWd5Iiwic3RhdGUiLCJwYXltZW50VG9rZW4iLCJfaXNSZWFkeVRvUGF5IiwiZWRpdEJ1dHRvbklkIiwiX2JpbmRFZGl0QnV0dG9uIiwiX2lzTW9kYWxGbG93IiwiX2NyZWF0ZUNvbnRhaW5lciIsIl9hbWF6b25QYXlCdXR0b24iLCJfaXNPbmVUaW1lVHJhbnNhY3Rpb24iLCJ0b1VwcGVyQ2FzZSIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudFBheWxvYWQiLCJwYXltZW50RGF0YSIsIm5vbmNlIiwic3VibWl0T3JkZXIiLCJzdWJtaXRQYXltZW50IiwiZXJyb3IiLCJlcnJvckJvZHkiLCJib2R5Iiwic3RhdHVzIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJkYXRhIiwicmVkaXJlY3RfdXJsIiwiYWRkaXRpb25hbEFjdGlvbiIsImxvY2F0aW9uIiwiSlNPTiIsInBhcnNlIiwiX2dldEFtYXpvblBheUJ1dHRvbiIsImNsaWNrIiwiXyIsInJlamVjdCIsIm9uRm9jdXMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5vb3AiLCJmaW5hbGl6ZSIsImlzTW9kYWxGbG93IiwiYnV0dG9uIiwiZ2V0RWxlbWVudEJ5SWQiLCJwYXJlbnROb2RlIiwiY2xvbmUiLCJjbG9uZU5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJfc2hvd0xvYWRpbmdTcGlubmVyIiwid2lkZ2V0SW50ZXJhY3Rpb24iLCJzdHlsZSIsImRpc3BsYXkiLCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciIsIkFtYXpvblBheVYyQ29uZmlnQ3JlYXRpb25FcnJvciIsImlzV2l0aEJ1eU5vd0ZlYXR1cmVzIiwiQ29udGVudFR5cGUiLCJBbWF6b25QYXlWMkJ1dHRvblN0cmF0ZWd5IiwiYW1hem9uUGF5VjJDb25maWdSZXF1ZXN0U2VuZGVyIiwibG9hZERlZmF1bHRDaGVja291dCIsImluaXRpYWxpemVBbWF6b25CdXR0b25PcHRpb25zIiwiYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMiLCJnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkiLCJfYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMiLCJDYXJ0IiwiX2dldENoZWNrb3V0Q3JlYXRpb25SZXF1ZXN0Q29uZmlnIiwiYmluZCIsIl9jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyIsImJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSIsImNyZWF0ZUJ1eU5vd0NhcnQiLCJfY3JlYXRlQ2hlY2tvdXRDb25maWciLCJwdWJsaWNfa2V5IiwicmVzdCIsInBheWxvYWRKU09OIiwiYnV5Tm93Q2FydCIsIlN0cmluZyIsImJhc2VBbW91bnQiLCJTREtfVkVSU0lPTl9IRUFERVJTIiwiQW1hem9uUGF5VjJSZXF1ZXN0U2VuZGVyIiwiX3JlcXVlc3RTZW5kZXIiLCJjYXJ0SWQiLCJoZWFkZXJzIiwiSnNvbiIsInBvc3QiLCJyZXF1ZXN0U2VuZGVyIiwiY3JlYXRlUmVxdWVzdFNlbmRlciIsImFtYXpvblBheVYyUmVxdWVzdFNlbmRlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx":
/*!**********************************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/amazon-pay */ \"../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/checkout-button-integration */ \"./packages/checkout-button-integration/src/CheckoutButton.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\nconst beautifyAmazonButton = () => {\n    var _a;\n    if (!document.querySelector('.checkout-button-container')) {\n        return;\n    }\n    const container = document.querySelector('#amazonpayCheckoutButton > div');\n    if (container) {\n        const amazonButton = (_a = container.shadowRoot) === null || _a === void 0 ? void 0 : _a.querySelector('.amazonpay-button-view1');\n        if ((0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(amazonButton)) {\n            amazonButton.style.height = '36px';\n            return;\n        }\n    }\n    setTimeout(beautifyAmazonButton, 10);\n};\nconst AmazonPayV2Button = (props) => {\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        beautifyAmazonButton();\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"AmazonPayContainer\" },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_checkout_button_integration__WEBPACK_IMPORTED_MODULE_2__[\"default\"], Object.assign({ integrations: [_bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_0__.createAmazonPayV2CustomerStrategy] }, props))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(AmazonPayV2Button, [{ id: 'amazonpay' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9BbWF6b25QYXlWMkJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzRztBQUNyQztBQUVrQjtBQUNaO0FBS2hCO0FBRXZELE1BQU0sb0JBQW9CLEdBQUcsR0FBUyxFQUFFOztJQUNwQyxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQyxFQUFFLENBQUM7UUFDeEQsT0FBTztJQUNYLENBQUM7SUFFRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGdDQUFnQyxDQUFDLENBQUM7SUFFM0UsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUNaLE1BQU0sWUFBWSxHQUFHLGVBQVMsQ0FBQyxVQUFVLDBDQUFFLGFBQWEsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1FBRXBGLElBQUksa0ZBQWEsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO1lBQzlCLFlBQVksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUVuQyxPQUFPO1FBQ1gsQ0FBQztJQUNMLENBQUM7SUFFRCxVQUFVLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxpQkFBaUIsR0FBMkMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtJQUN4RSxnREFBUyxDQUFDLEdBQUcsRUFBRTtRQUNYLG9CQUFvQixFQUFFLENBQUM7SUFDM0IsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVAsT0FBTyxDQUNILG9FQUFLLFNBQVMsRUFBQyxvQkFBb0I7UUFDL0IsMkRBQUMseUZBQWMsa0JBQUMsWUFBWSxFQUFFLENBQUMsZ0hBQWlDLENBQUMsSUFBTSxLQUFLLEVBQUksQ0FDOUUsQ0FDVCxDQUFDO0FBQ04sQ0FBQyxDQUFDO0FBRUYsaUVBQWUseUZBQXFCLENBQ2hDLGlCQUFpQixFQUNqQixDQUFDLEVBQUUsRUFBRSxFQUFFLFdBQVcsRUFBRSxDQUFDLENBQ3hCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdjItaW50ZWdyYXRpb24vc3JjL0FtYXpvblBheVYyQnV0dG9uLnRzeD81N2JlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2FtYXpvbi1wYXknO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgQ2hlY2tvdXRCdXR0b24gfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvY2hlY2tvdXQtYnV0dG9uLWludGVncmF0aW9uJztcbmltcG9ydCB7IGlzSFRNTEVsZW1lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaW5zdHJ1bWVudC11dGlscyc7XG5pbXBvcnQge1xuICAgIHR5cGUgQ2hlY2tvdXRCdXR0b25Qcm9wcyxcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUmVzb2x2ZUlkLFxuICAgIHRvUmVzb2x2YWJsZUNvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuY29uc3QgYmVhdXRpZnlBbWF6b25CdXR0b24gPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hlY2tvdXQtYnV0dG9uLWNvbnRhaW5lcicpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYW1hem9ucGF5Q2hlY2tvdXRCdXR0b24gPiBkaXYnKTtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgYW1hem9uQnV0dG9uID0gY29udGFpbmVyLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3IoJy5hbWF6b25wYXktYnV0dG9uLXZpZXcxJyk7XG5cbiAgICAgICAgaWYgKGlzSFRNTEVsZW1lbnQoYW1hem9uQnV0dG9uKSkge1xuICAgICAgICAgICAgYW1hem9uQnV0dG9uLnN0eWxlLmhlaWdodCA9ICczNnB4JztcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VGltZW91dChiZWF1dGlmeUFtYXpvbkJ1dHRvbiwgMTApO1xufTtcblxuY29uc3QgQW1hem9uUGF5VjJCdXR0b246IEZ1bmN0aW9uQ29tcG9uZW50PENoZWNrb3V0QnV0dG9uUHJvcHM+ID0gKHByb3BzKSA9PiB7XG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgYmVhdXRpZnlBbWF6b25CdXR0b24oKTtcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIkFtYXpvblBheUNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPENoZWNrb3V0QnV0dG9uIGludGVncmF0aW9ucz17W2NyZWF0ZUFtYXpvblBheVYyQ3VzdG9tZXJTdHJhdGVneV19IHsuLi5wcm9wc30gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZUNvbXBvbmVudDxDaGVja291dEJ1dHRvblByb3BzLCBDaGVja291dEJ1dHRvblJlc29sdmVJZD4oXG4gICAgQW1hem9uUGF5VjJCdXR0b24sXG4gICAgW3sgaWQ6ICdhbWF6b25wYXknIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx":
/*!*****************************************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/amazon-pay */ \"../checkout-sdk-js/dist/esm/integrations/amazon-pay.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\n\n\n\n\nconst AmazonPayV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, method: { initializationData: { paymentDescriptor, paymentToken }, } } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"method\"]);\n    const initializeAmazonPayV2Payment = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((options) => checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_amazon_pay__WEBPACK_IMPORTED_MODULE_1__.createAmazonPayV2PaymentStrategy], amazonpay: {\n            editButtonId: 'editButtonId',\n        } })), [checkoutService]);\n    const reload = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => window.location.reload(), []);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const { data: { getCheckout, isPaymentDataRequired }, statuses: { isLoadingInstruments }, } = checkoutState;\n    const checkout = getCheckout();\n    const customer = checkoutState.data.getCustomer();\n    const isGuestCustomer = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isGuestCustomer && Boolean(method.config.isVaultingEnabled);\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    return (react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_4__[\"default\"], Object.assign({}, rest, { buttonId: \"editButtonId\", containerId: \"paymentWidget\", deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hidePaymentSubmitButton: hidePaymentSubmitButton, hideWidget: true, initializePayment: initializeAmazonPayV2Payment, instruments: instruments, isInstrumentCardCodeRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState), isInstrumentCardNumberRequired: (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(checkoutState), isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignInRequired: false, isSignedIn: (0,lodash__WEBPACK_IMPORTED_MODULE_2__.some)(checkout === null || checkout === void 0 ? void 0 : checkout.payments, { providerId: method.id }), loadInstruments: checkoutService.loadInstruments, method: method, onSignOut: reload, paymentDescriptor: paymentDescriptor, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldShow: !!paymentToken, shouldShowDescriptor: !!paymentToken, shouldShowEditButton: !!paymentToken, signOut: checkoutService.signOutCustomer })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(AmazonPayV2PaymentMethod, [{ id: 'amazonpay' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9BbWF6b25QYXlWMlBheW1lbnRNZXRob2QudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNxRztBQUN2RTtBQUNxQztBQUU0QjtBQUkvQztBQUtPO0FBRXZELE1BQU0sd0JBQXdCLEdBQTBDLENBQUMsRUFTeEUsRUFBRSxFQUFFO1FBVG9FLEVBQ3JFLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxFQUNYLE1BQU0sRUFDTixNQUFNLEVBQUUsRUFDSixrQkFBa0IsRUFBRSxFQUFFLGlCQUFpQixFQUFFLFlBQVksRUFBRSxHQUMxRCxPQUVKLEVBRE0sSUFBSSxxREFSOEQsdUVBU3hFLENBRFU7SUFFUCxNQUFNLDRCQUE0QixHQUFHLGtEQUFXLENBQzVDLENBQUMsT0FBaUMsRUFBRSxFQUFFLENBQ2xDLGVBQWUsQ0FBQyxpQkFBaUIsaUNBQzFCLE9BQU8sS0FDVixZQUFZLEVBQUUsQ0FBQywrR0FBZ0MsQ0FBQyxFQUNoRCxTQUFTLEVBQUU7WUFDUCxZQUFZLEVBQUUsY0FBYztTQUMvQixJQUNILEVBQ04sQ0FBQyxlQUFlLENBQUMsQ0FDcEIsQ0FBQztJQUVGLE1BQU0sTUFBTSxHQUFHLGtEQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUUvRCxNQUFNLEVBQ0YsdUJBQXVCLEVBQ3ZCLGFBQWEsRUFDYixhQUFhLEVBQ2IsU0FBUyxFQUNULG1CQUFtQixHQUN0QixHQUFHLFdBQVcsQ0FBQztJQUVoQixNQUFNLEVBQ0YsSUFBSSxFQUFFLEVBQUUsV0FBVyxFQUFFLHFCQUFxQixFQUFFLEVBQzVDLFFBQVEsRUFBRSxFQUFFLG9CQUFvQixFQUFFLEdBQ3JDLEdBQUcsYUFBYSxDQUFDO0lBRWxCLE1BQU0sUUFBUSxHQUFHLFdBQVcsRUFBRSxDQUFDO0lBQy9CLE1BQU0sUUFBUSxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEQsTUFBTSxlQUFlLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUMxQyxNQUFNLDRCQUE0QixHQUM5QixDQUFDLGVBQWUsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBRWpFLE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxPQUFPLENBQ0gsMkRBQUMsdUZBQTRCLG9CQUNyQixJQUFJLElBQ1IsUUFBUSxFQUFDLGNBQWMsRUFDdkIsV0FBVyxFQUFDLGVBQWUsRUFDM0IsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix1QkFBdUIsRUFBRSx1QkFBdUIsRUFDaEQsVUFBVSxRQUNWLGlCQUFpQixFQUFFLDRCQUE0QixFQUMvQyxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw0QkFBNEIsRUFBRSxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsRUFDakYsOEJBQThCLEVBQUUsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLEVBQ3JGLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCxvQkFBb0IsRUFBRSxvQkFBb0IsRUFBRSxFQUM1QyxxQkFBcUIsRUFBRSxxQkFBcUIsRUFBRSxFQUM5QyxnQkFBZ0IsRUFBRSxLQUFLLEVBQ3ZCLFVBQVUsRUFBRSw0Q0FBSSxDQUFDLFFBQVEsYUFBUixRQUFRLHVCQUFSLFFBQVEsQ0FBRSxRQUFRLEVBQUUsRUFBRSxVQUFVLEVBQUUsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQy9ELGVBQWUsRUFBRSxlQUFlLENBQUMsZUFBZSxFQUNoRCxNQUFNLEVBQUUsTUFBTSxFQUNkLFNBQVMsRUFBRSxNQUFNLEVBQ2pCLGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxhQUFhLEVBQUUsYUFBYSxFQUM1QixTQUFTLEVBQUUsU0FBUyxFQUNwQixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsVUFBVSxFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQzFCLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQ3BDLG9CQUFvQixFQUFFLENBQUMsQ0FBQyxZQUFZLEVBQ3BDLE9BQU8sRUFBRSxlQUFlLENBQUMsZUFBZSxJQUMxQyxDQUNMLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsd0JBQXdCLEVBQ3hCLENBQUMsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLENBQUMsQ0FDeEIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYW1hem9uLXBheS12Mi1pbnRlZ3JhdGlvbi9zcmMvQW1hem9uUGF5VjJQYXltZW50TWV0aG9kLnRzeD9kY2M3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVBbWF6b25QYXlWMlBheW1lbnRTdHJhdGVneSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvaW50ZWdyYXRpb25zL2FtYXpvbi1wYXknO1xuaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcixcbiAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWRTZWxlY3Rvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2luc3RydW1lbnQtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5jb25zdCBBbWF6b25QYXlWMlBheW1lbnRNZXRob2Q6IEZ1bmN0aW9uQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcz4gPSAoe1xuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIHBheW1lbnRGb3JtLFxuICAgIG1ldGhvZCxcbiAgICBtZXRob2Q6IHtcbiAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiB7IHBheW1lbnREZXNjcmlwdG9yLCBwYXltZW50VG9rZW4gfSxcbiAgICB9LFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQW1hem9uUGF5VjJQYXltZW50ID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpID0+XG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UuaW5pdGlhbGl6ZVBheW1lbnQoe1xuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBbY3JlYXRlQW1hem9uUGF5VjJQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFtYXpvbnBheToge1xuICAgICAgICAgICAgICAgICAgICBlZGl0QnV0dG9uSWQ6ICdlZGl0QnV0dG9uSWQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgW2NoZWNrb3V0U2VydmljZV0sXG4gICAgKTtcblxuICAgIGNvbnN0IHJlbG9hZCA9IHVzZUNhbGxiYWNrKCgpID0+IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKSwgW10pO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbixcbiAgICAgICAgZGlzYWJsZVN1Ym1pdCxcbiAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgc2V0U3VibWl0LFxuICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIH0gPSBwYXltZW50Rm9ybTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZGF0YTogeyBnZXRDaGVja291dCwgaXNQYXltZW50RGF0YVJlcXVpcmVkIH0sXG4gICAgICAgIHN0YXR1c2VzOiB7IGlzTG9hZGluZ0luc3RydW1lbnRzIH0sXG4gICAgfSA9IGNoZWNrb3V0U3RhdGU7XG5cbiAgICBjb25zdCBjaGVja291dCA9IGdldENoZWNrb3V0KCk7XG4gICAgY29uc3QgY3VzdG9tZXIgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0Q3VzdG9tZXIoKTtcbiAgICBjb25zdCBpc0d1ZXN0Q3VzdG9tZXIgPSBjdXN0b21lcj8uaXNHdWVzdDtcbiAgICBjb25zdCBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlID1cbiAgICAgICAgIWlzR3Vlc3RDdXN0b21lciAmJiBCb29sZWFuKG1ldGhvZC5jb25maWcuaXNWYXVsdGluZ0VuYWJsZWQpO1xuXG4gICAgY29uc3QgaW5zdHJ1bWVudHMgPSBjaGVja291dFN0YXRlLmRhdGEuZ2V0SW5zdHJ1bWVudHMobWV0aG9kKSB8fCBbXTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxIb3N0ZWRXaWRnZXRQYXltZW50Q29tcG9uZW50XG4gICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgIGJ1dHRvbklkPVwiZWRpdEJ1dHRvbklkXCJcbiAgICAgICAgICAgIGNvbnRhaW5lcklkPVwicGF5bWVudFdpZGdldFwiXG4gICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgIGRpc2FibGVTdWJtaXQ9e2Rpc2FibGVTdWJtaXR9XG4gICAgICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbj17aGlkZVBheW1lbnRTdWJtaXRCdXR0b259XG4gICAgICAgICAgICBoaWRlV2lkZ2V0XG4gICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZUFtYXpvblBheVYyUGF5bWVudH1cbiAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWRTZWxlY3RvcihjaGVja291dFN0YXRlKX1cbiAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSl9XG4gICAgICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlPXtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlfVxuICAgICAgICAgICAgaXNMb2FkaW5nSW5zdHJ1bWVudHM9e2lzTG9hZGluZ0luc3RydW1lbnRzKCl9XG4gICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQ9e2lzUGF5bWVudERhdGFSZXF1aXJlZCgpfVxuICAgICAgICAgICAgaXNTaWduSW5SZXF1aXJlZD17ZmFsc2V9XG4gICAgICAgICAgICBpc1NpZ25lZEluPXtzb21lKGNoZWNrb3V0Py5wYXltZW50cywgeyBwcm92aWRlcklkOiBtZXRob2QuaWQgfSl9XG4gICAgICAgICAgICBsb2FkSW5zdHJ1bWVudHM9e2NoZWNrb3V0U2VydmljZS5sb2FkSW5zdHJ1bWVudHN9XG4gICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgIG9uU2lnbk91dD17cmVsb2FkfVxuICAgICAgICAgICAgcGF5bWVudERlc2NyaXB0b3I9e3BheW1lbnREZXNjcmlwdG9yfVxuICAgICAgICAgICAgc2V0RmllbGRWYWx1ZT17c2V0RmllbGRWYWx1ZX1cbiAgICAgICAgICAgIHNldFN1Ym1pdD17c2V0U3VibWl0fVxuICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgIHNob3VsZFNob3c9eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2hvdWxkU2hvd0Rlc2NyaXB0b3I9eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2hvdWxkU2hvd0VkaXRCdXR0b249eyEhcGF5bWVudFRva2VufVxuICAgICAgICAgICAgc2lnbk91dD17Y2hlY2tvdXRTZXJ2aWNlLnNpZ25PdXRDdXN0b21lcn1cbiAgICAgICAgLz5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgQW1hem9uUGF5VjJQYXltZW50TWV0aG9kLFxuICAgIFt7IGlkOiAnYW1hem9ucGF5JyB9XSxcbik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/amazon-pay-v2-integration/src/index.ts":
/*!*********************************************************!*\
  !*** ./packages/amazon-pay-v2-integration/src/index.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AmazonPayV2Button: () => (/* reexport safe */ _AmazonPayV2Button__WEBPACK_IMPORTED_MODULE_1__[\"default\"]),\n/* harmony export */   AmazonPayV2PaymentMethod: () => (/* reexport safe */ _AmazonPayV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _AmazonPayV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AmazonPayV2PaymentMethod */ \"./packages/amazon-pay-v2-integration/src/AmazonPayV2PaymentMethod.tsx\");\n/* harmony import */ var _AmazonPayV2Button__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AmazonPayV2Button */ \"./packages/amazon-pay-v2-integration/src/AmazonPayV2Button.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hbWF6b24tcGF5LXYyLWludGVncmF0aW9uL3NyYy9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlGO0FBQ2QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2FtYXpvbi1wYXktdjItaW50ZWdyYXRpb24vc3JjL2luZGV4LnRzP2FkZTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgZGVmYXVsdCBhcyBBbWF6b25QYXlWMlBheW1lbnRNZXRob2QgfSBmcm9tICcuL0FtYXpvblBheVYyUGF5bWVudE1ldGhvZCc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEFtYXpvblBheVYyQnV0dG9uIH0gZnJvbSAnLi9BbWF6b25QYXlWMkJ1dHRvbic7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/amazon-pay-v2-integration/src/index.ts\n\n}");

/***/ }),

/***/ "./packages/checkout-button-integration/src/CheckoutButton.tsx":
/*!*********************************************************************!*\
  !*** ./packages/checkout-button-integration/src/CheckoutButton.tsx ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n\n\n\nconst CheckoutButton = ({ checkoutService: { deinitializeCustomer, initializeCustomer }, checkoutButtonContainerClass, containerId, methodId, onUnhandledError, onWalletButtonClick, additionalInitializationOptions, integrations, }) => {\n    const initializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield initializeCustomer({\n                methodId,\n                integrations,\n                [methodId]: Object.assign({ container: containerId, onUnhandledError, onClick: () => onWalletButtonClick(methodId) }, additionalInitializationOptions),\n            });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    const deinitializeCustomerStrategyOrThrow = () => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        try {\n            yield deinitializeCustomer({ methodId });\n        }\n        catch (error) {\n            if (typeof onUnhandledError === 'function' && error instanceof Error) {\n                onUnhandledError(error);\n            }\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        void initializeCustomerStrategyOrThrow();\n        return () => {\n            void deinitializeCustomerStrategyOrThrow();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: checkoutButtonContainerClass, \"data-test\": containerId, id: containerId }));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(CheckoutButton, []));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9jaGVja291dC1idXR0b24taW50ZWdyYXRpb24vc3JjL0NoZWNrb3V0QnV0dG9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUU7QUFNVjtBQUV2RCxNQUFNLGNBQWMsR0FBMkMsQ0FBQyxFQUM1RCxlQUFlLEVBQUUsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxFQUM3RCw0QkFBNEIsRUFDNUIsV0FBVyxFQUNYLFFBQVEsRUFDUixnQkFBZ0IsRUFDaEIsbUJBQW1CLEVBQ25CLCtCQUErQixFQUMvQixZQUFZLEdBQ2YsRUFBRSxFQUFFO0lBQ0QsTUFBTSxpQ0FBaUMsR0FBRyxHQUFTLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUM7WUFDRCxNQUFNLGtCQUFrQixDQUFDO2dCQUNyQixRQUFRO2dCQUNSLFlBQVk7Z0JBQ1osQ0FBQyxRQUFRLENBQUMsa0JBQ04sU0FBUyxFQUFFLFdBQVcsRUFDdEIsZ0JBQWdCLEVBQ2hCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsSUFDekMsK0JBQStCLENBQ3JDO2FBQ0osQ0FBQyxDQUFDO1FBQ1AsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDYixJQUFJLE9BQU8sZ0JBQWdCLEtBQUssVUFBVSxJQUFJLEtBQUssWUFBWSxLQUFLLEVBQUUsQ0FBQztnQkFDbkUsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDNUIsQ0FBQztRQUNMLENBQUM7SUFDTCxDQUFDLEVBQUM7SUFFRixNQUFNLG1DQUFtQyxHQUFHLEdBQVMsRUFBRSxDQUFDO1FBQ3BELElBQUksQ0FBQztZQUNELE1BQU0sb0JBQW9CLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLENBQUM7UUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1lBQ2IsSUFBSSxPQUFPLGdCQUFnQixLQUFLLFVBQVUsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7Z0JBQ25FLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzVCLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQyxFQUFDO0lBRUYsZ0RBQVMsQ0FBQyxHQUFHLEVBQUU7UUFDWCxLQUFLLGlDQUFpQyxFQUFFLENBQUM7UUFFekMsT0FBTyxHQUFHLEVBQUU7WUFDUixLQUFLLG1DQUFtQyxFQUFFLENBQUM7UUFDL0MsQ0FBQyxDQUFDO1FBQ0YsdURBQXVEO0lBQzNELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE9BQU8sQ0FDSCxvRUFBSyxTQUFTLEVBQUUsNEJBQTRCLGVBQWEsV0FBVyxFQUFFLEVBQUUsRUFBRSxXQUFXLEdBQUksQ0FDNUYsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxjQUFjLEVBQ2QsRUFBRSxDQUNMLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL3BhY2thZ2VzL2NoZWNrb3V0LWJ1dHRvbi1pbnRlZ3JhdGlvbi9zcmMvQ2hlY2tvdXRCdXR0b24udHN4P2FjMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgICB0eXBlIENoZWNrb3V0QnV0dG9uUHJvcHMsXG4gICAgdHlwZSBDaGVja291dEJ1dHRvblJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmNvbnN0IENoZWNrb3V0QnV0dG9uOiBGdW5jdGlvbkNvbXBvbmVudDxDaGVja291dEJ1dHRvblByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlOiB7IGRlaW5pdGlhbGl6ZUN1c3RvbWVyLCBpbml0aWFsaXplQ3VzdG9tZXIgfSxcbiAgICBjaGVja291dEJ1dHRvbkNvbnRhaW5lckNsYXNzLFxuICAgIGNvbnRhaW5lcklkLFxuICAgIG1ldGhvZElkLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgb25XYWxsZXRCdXR0b25DbGljayxcbiAgICBhZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgIGludGVncmF0aW9ucyxcbn0pID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBpbml0aWFsaXplQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgICAgICBbbWV0aG9kSWRdOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IG9uV2FsbGV0QnV0dG9uQ2xpY2sobWV0aG9kSWQpLFxuICAgICAgICAgICAgICAgICAgICAuLi5hZGRpdGlvbmFsSW5pdGlhbGl6YXRpb25PcHRpb25zLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25VbmhhbmRsZWRFcnJvciA9PT0gJ2Z1bmN0aW9uJyAmJiBlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICAgICAgb25VbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgZGVpbml0aWFsaXplQ3VzdG9tZXJTdHJhdGVneU9yVGhyb3cgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWluaXRpYWxpemVDdXN0b21lcih7IG1ldGhvZElkIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvblVuaGFuZGxlZEVycm9yID09PSAnZnVuY3Rpb24nICYmIGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICB2b2lkIGluaXRpYWxpemVDdXN0b21lclN0cmF0ZWd5T3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB2b2lkIGRlaW5pdGlhbGl6ZUN1c3RvbWVyU3RyYXRlZ3lPclRocm93KCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgICB9LCBbXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2hlY2tvdXRCdXR0b25Db250YWluZXJDbGFzc30gZGF0YS10ZXN0PXtjb250YWluZXJJZH0gaWQ9e2NvbnRhaW5lcklkfSAvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8Q2hlY2tvdXRCdXR0b25Qcm9wcywgQ2hlY2tvdXRCdXR0b25SZXNvbHZlSWQ+KFxuICAgIENoZWNrb3V0QnV0dG9uLFxuICAgIFtdLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/checkout-button-integration/src/CheckoutButton.tsx\n\n}");

/***/ }),

/***/ "./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts":
/*!*****************************************************************************!*\
  !*** ./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ isHTMLElement)\n/* harmony export */ });\nfunction isHTMLElement(element) {\n    return element instanceof HTMLElement;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9pbnN0cnVtZW50LXV0aWxzL3NyYy9ndWFyZHMvaXNIVE1MRWxlbWVudC9pc0hUTUxFbGVtZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBZSxTQUFTLGFBQWEsQ0FBQyxPQUFnQjtJQUNsRCxPQUFPLE9BQU8sWUFBWSxXQUFXLENBQUM7QUFDMUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvaW5zdHJ1bWVudC11dGlscy9zcmMvZ3VhcmRzL2lzSFRNTEVsZW1lbnQvaXNIVE1MRWxlbWVudC50cz81ZWE3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoZWxlbWVudDogdW5rbm93bik6IGVsZW1lbnQgaXMgSFRNTEVsZW1lbnQge1xuICAgIHJldHVybiBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/instrument-utils/src/guards/isHTMLElement/isHTMLElement.ts\n\n}");

/***/ })

}]);