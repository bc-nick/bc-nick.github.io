"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_bigcommerce-payments_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js":
/*!************************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsButtonStrategy: () => (/* binding */ yt),\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsPaymentStrategy: () => (/* binding */ et),\n/* harmony export */   createBigCommercePaymentsButtonStrategy: () => (/* binding */ dt),\n/* harmony export */   createBigCommercePaymentsCreditCardsPaymentStrategy: () => (/* binding */ Xe),\n/* harmony export */   createBigCommercePaymentsCustomerStrategy: () => (/* binding */ V),\n/* harmony export */   createBigCommercePaymentsFastlaneCustomerStrategy: () => (/* binding */ se),\n/* harmony export */   createBigCommercePaymentsFastlanePaymentStrategy: () => (/* binding */ Fe),\n/* harmony export */   createBigCommercePaymentsPayLaterButtonStrategy: () => (/* binding */ mt),\n/* harmony export */   createBigCommercePaymentsPayLaterCustomerStrategy: () => (/* binding */ ce),\n/* harmony export */   createBigCommercePaymentsPayLaterPaymentStrategy: () => (/* binding */ De),\n/* harmony export */   createBigCommercePaymentsPaymentStrategy: () => (/* binding */ ke),\n/* harmony export */   createBigCommercePaymentsRatePayPayPaymentStrategy: () => (/* binding */ Ve),\n/* harmony export */   createBigCommercePaymentsRedirectAlternativeMethodsPaymentStrategy: () => (/* binding */ it),\n/* harmony export */   createBigCommercePaymentsVenmoButtonStrategy: () => (/* binding */ vt),\n/* harmony export */   createBigCommercePaymentsVenmoCustomerStrategy: () => (/* binding */ he),\n/* harmony export */   createBigCommercePaymentsVenmoPaymentStrategy: () => (/* binding */ rt)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function m(e,t){return Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class y extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class p extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const g={body:{},headers:{},status:0};class v extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:r}=e||g;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=r,this.errors=i||[]}}var f,b,P,S,I,C,w,O;!function(e){e.BuyNow=\"BUY_NOW\"}(f||(f={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(b||(b={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(P||(P={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(S||(S={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(I||(I={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(C||(C={})),function(e){e.OXXO=\"oxxo\"}(w||(w={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(O||(O={}));var _=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class k{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.bigCommercePaymentsRequestSender=i,this.bigCommercePaymentsScriptLoader=n}loadPayPalSdk(e,t,i,n){return _(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),r=t||o.getCartOrThrow().currency.code,a=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.bigCommercePaymentsScriptLoader.getPayPalSDK(a,r,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return _(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new p}})}createOrder(e,t){return _(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return _(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return _(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.bigCommercePaymentsRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new v}})}getOrderStatus(e,t){return _(this,void 0,void 0,function*(){try{const{status:i}=yield this.bigCommercePaymentsRequestSender.getOrderStatus(e,t);return i}catch(e){throw new v}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===f.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return _(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[r,...a]=o.split(\" \");return this.getAddress({firstName:r,lastName:a.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},a={color:t&&I[t]?t:void 0,height:this.getValidHeight(i),label:n&&S[n]?n:void 0,shape:o&&C[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(a,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const A=\"This API endpoint is for internal use only and may change in the future\";var E;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(E||(E={}));const T=E,z={\"X-Checkout-SDK-Version\":\"1.867.0\"};var F=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e){this.requestSender=e}createOrder(e,t){return F(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return F(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.put(\"/api/storefront/initialization/bigcommerce_payments\",{headers:i,body:t})).body})}getOrderStatus(e=\"bigcommerce_payments\",t){return F(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":A,\"Content-Type\":T.Json},z);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var M=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class x{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return M(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return M(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:r}=e;if(!(null==r?void 0:r.clientId))throw new y(l.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:m,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:p,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:b}=r,P=h||i,S=\"bigcommerce_payments_creditcards\"===n,I=S?[\"card\"]:[],C=S?[]:[\"card\"],w=p?[\"credit\",\"paylater\"]:[],O=p?[]:[\"credit\",\"paylater\"],_=u?[\"venmo\"]:[],k=u?[]:[\"venmo\"],A=v.filter(e=>!f.includes(e)),E=b?[\"googlepay\"]:[],T=i?[\"card-fields\"]:[],z=this.filterFundingOptions([...C,...O,...k,...A]),F=this.filterFundingOptions([...I,...w,..._,...f]);return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":F.length>0?F:void 0,\"disable-funding\":z.length>0?z:void 0,commit:P,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...E,...T],currency:t,intent:a},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":m,\"data-client-token\":o}}}filterFundingOptions(e){const t=[\"klarna\",\"afterpay\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const D=i=>{const{getHost:o}=i.getState();return new k((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)(),i,new B((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:o()})),new x((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.getScriptLoader)()))};class N extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}var U=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class j{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return U(this,void 0,void 0,function*(){const{bigcommerce_payments:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return U(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return U(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n,onComplete:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,o)},u=Object.assign(Object.assign({fundingSource:r.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:40}))},c),s&&m),h=r.Buttons(u);h.isEligible()?h.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return U(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return U(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return U(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const V=m(e=>new j(e,D(e)),[{id:\"bigcommerce_payments\"}]);var R,L,$,q,H,G,Y,W,K,J=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class X{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return J(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return J(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return J(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return J(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return J(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"three-domain-secure\"],currency:t,intent:r},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:m,isDeveloperModeApplicable:u}=o,h=m||i;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:r},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:r,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:m=[]}=i,u=this.filterFundingOptions(m),h=this.filterFundingOptions(c.filter(e=>!m.includes(e)));return{options:Object.assign({\"client-id\":o,\"merchant-id\":r,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:r,isDeveloperModeApplicable:a,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":r}}}filterFundingOptions(e){const t=[\"klarna\",\"afterpay\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function Z(){return new X((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_2__.createScriptLoader)())}!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(R||(R={}));class Q{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:r,domain:a,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}r&&(n+=`; path=${r}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){Q.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(L||(L={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}($||($={})),function(e){e.Always=\"SCA_ALWAYS\"}(q||(q={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(H||(H={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(G||(G={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(Y||(Y={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(W||(W={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(K||(K={}));var ee=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class te{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return ee(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return ee(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return ee(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};Q.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){Q.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return Q.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:r,profileData:a}=t,s=null===(o=null===(n=null===(i=null==a?void 0:a.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==a?void 0:a.shippingAddress,l=null==a?void 0:a.name,c=null==a?void 0:a.card,m=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],y=this.filterAddresses([m,u]);return{authenticationState:r||K.UNRECOGNIZED,addresses:y,billingAddress:u,shippingAddress:m,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:r,lastDigits:a}=n.card,[s,d]=r.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:R.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,r]=t.fullName.split(\" \"),a=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||r||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function ie(){return new te}function ne(e){return\"string\"!=typeof e}function oe(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,ne),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,ne),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,ne),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,ne),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,ne),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(r).length&&(n.input=r),Object.keys(a).length&&(n.toggle=a),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,r,a,s,d,l,c,m,u,h,y,p,g,v,f,b,P,S,I,C;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(m=null==t?void 0:t.input)||void 0===m?void 0:m.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(p=null==t?void 0:t.toggle)||void 0===p?void 0:p.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(b=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===b?void 0:b.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(S=null===(P=null==t?void 0:t.text)||void 0===P?void 0:P.caption)||void 0===S?void 0:S.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(C=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===C?void 0:C.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}var re=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ae{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsSdk=t,this.bigCommercePaymentsFastlaneUtils=i}initialize(e){var t;return re(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments_fastlane:n}=e;if(!i)throw new N('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),r=e.getPaymentMethodOrThrow(i),a=!!(null===(t=r.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(r,o.currency.code,o.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return re(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return re(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return re(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return re(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new N('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new N('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return re(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===K.CANCELED;yield this.updateCustomerDataState(e,s),d?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return re(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:r,billingAddress:a,shippingAddress:s,instruments:d}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:r,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},r=t.getConsignments()||[],a=(null===(i=r[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=a[0],l=a.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return oe(o?n:{},null==t?void 0:t.styles)}}const se=m(e=>new ae(e,Z(),ie()),[{id:\"bigcommerce_payments_fastlane\"},{id:\"bigcommerce_payments_creditcards\"}]);var de=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class le{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return de(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC BigCommercePayments PayLater]: button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return de(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return de(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)},u=[r.FUNDING.PAYLATER,r.FUNDING.CREDIT];let h=!1;u.forEach(e=>{if(!h){const t=Object.assign(Object.assign({fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:40}))},c),s&&m),n=r.Buttons(t);n.isEligible()&&(n.render(`#${i}`),h=!0)}}),h||this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return de(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return de(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return de(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const ce=m(e=>new le(e,D(e)),[{id:\"bigcommerce_payments_paylater\"}]);var me=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ue{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return me(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,methodId:i}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(!t.container)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC Payments Venmo]: Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return me(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return me(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=r.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:40})),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}}const he=m(e=>new ue(e,D(e)),[{id:\"bigcommerce_payments_venmo\"}]),ye={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},pe=\"embedded-checkout-loading-indicator-rotation\";class ge{constructor(e){this.styles=Object.assign(Object.assign({},ye),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${pe} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(pe))return;const t=document.createElement(\"style\");t.id=pe,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${pe} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const ve={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"},fe=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};class be extends N{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class Pe extends v{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Se extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Ie(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function Ce(e){return Boolean(e.instrumentId)}function we(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var Oe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class _e{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.paypalSdkHelper=i,this.loadingIndicator=n}initialize(e){return Oe(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments:i}=e||{};if(this.bigcommerce_payments=i,!t)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(t),{container:r,bannerContainerId:a}=i,{orderId:s,paypalBNPLConfiguration:d=[],isPayPalCreditAvailable:l}=o.initializationData||{};if(void 0!==a){if(!document.getElementById(a))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==d?void 0:d.find(({id:e})=>\"checkout\"===e);if(l||!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(o,n.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,a,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}s?this.orderId=s:(this.loadingIndicatorContainer=null==r?void 0:r.split(\"#\")[1],yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),i.onInit&&\"function\"==typeof i.onInit&&i.onInit(()=>this.renderButton(t,i)),(void 0===i.shouldRenderPayPalButtonOnInitialization||i.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(t,i))})}execute(e,t){return Oe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:o}=this.bigcommerce_payments||{};if(!i)throw new be([\"payment\"]);const{methodId:r,paymentData:a}=i;if(this.isPayPalVaultedInstrumentPaymentData(a)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new Pe;const s=this.isPayPalVaultedInstrumentPaymentData(a)?this.prepareVaultedInstrumentPaymentPayload(r,this.orderId,a):this.preparePaymentPayload(r,this.orderId,a);try{yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(s)}catch(e){return this.isProviderError(e)&&(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i.methodId),yield new Promise((e,t)=>{var n;this.bigcommerce_payments&&(null===(n=this.paypalButton)||void 0===n||n.close(),this.renderButton(i.methodId,this.bigcommerce_payments),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),o)),t()})),this.handleError(e,o),Promise.reject()}})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,r=!this.isTrustedVaultingFlow(i);return r?{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Ie(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t;if(!a)throw new N('Unable to initialize payment because \"container\" argument is not provided.');const m={fundingSource:i.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onError:e=>this.handleError(e,s),onCancel:()=>this.toggleLoadingIndicator(!1)};this.paypalButton=i.Buttons(m),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}handleClick(e,t){return Oe(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return Oe(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_paymentscheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.bigcommerce_payments||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&Ce(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>we(t)&&t.bigpayToken===e.instrumentId);return!(we(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&Ce(e)&&Ie(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:fe(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}}const ke=m(e=>new _e(e,D(e),Z(),new ge({containerStyles:ve})),[{id:\"bigcommerce_payments\"}]);function Ae(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}function Ee(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}var Te=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ze{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsRequestSender=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){var t,i;return Te(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_fastlane:o}=e;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(this.methodId=n,!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane\" argument is not provided.');if(this.bigcommerce_payments_fastlane=o,!o.onInit||\"function\"!=typeof o.onInit)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),a=r.getCartOrThrow(),s=r.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const c=oe(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return Te(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);const{paymentData:o,methodId:r}=i,a=o&&Ce(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(r,o):yield this.preparePaymentPayload(r,o);yield this.paymentIntegrationService.submitPayment(e),this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"name\"in e.response}(e)&&\"INVALID_REQUEST\"===e.response.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new Se)}deinitialize(){return Te(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=Ae(n)?n:{},r=this.bigCommercePaymentsFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===K.CANCELED||(null==o?void 0:o.authenticationState)||r!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return Te(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:l,instruments:c}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===K.CANCELED?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return Te(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new N('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return Te(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),o=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&n.config.is3dsEnabled?yield this.get3DSNonce(i):i;return yield this.createOrder(o),{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:o}}}}})}preparePaymentPayload(e,t){return Te(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),r=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:r},billingAddress:this.bigCommercePaymentsFastlaneUtils.mapBcToPayPalAddress(n)}),d=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&o.config.is3dsEnabled,{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:c=!1}=Ie(t)?t:{},m=d?yield this.get3DSNonce(s):s;return yield this.createOrder(m),{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:c,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:m}}})}})}createOrder(e){return Te(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.bigCommercePaymentsRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return Te(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),r=i.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:this.threeDSVerificationMethod===q.Always,transactionContext:{experience_context:{locale:\"en-US\",return_url:r,cancel_url:r}}},d=yield a.isEligible(s);if(this.threeDSVerificationMethod===q.Always&&!d)throw new Pe;if(d){const{liabilityShift:e,authenticationState:t,nonce:i}=yield a.show();if(e===b.No||e===b.Unknown||t===H.Errored||t===H.Cancelled)throw new Pe;if(t===H.Succeeded&&[b.Yes,b.Possible].includes(e))return i}return e})}handlePayPalStoredInstrumentChange(e){return Te(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=Ae(t)?t:{},o=this.bigCommercePaymentsFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}isBigcommercePaymentsFastlaneThreeDSAvailable(){return Ee(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.bcp_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.bigcommerce_payments_fastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.bigcommerce_payments_fastlane.onError&&this.bigcommerce_payments_fastlane.onError(e)}}const Fe=m(e=>{const{getHost:i}=e.getState();return new ze(e,new B((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_1__.createRequestSender)({host:i()})),Z(),ie())},[{id:\"bigcommerce_payments_fastlane\"}]);class Be extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var Me=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class xe{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.paypalSdkHelper=n}initialize(e){return Me(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_paylater:i}=e||{};if(!t)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:r=[],orderId:a}=o.initializationData||{},{bannerContainerId:s,container:d}=i;if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=r&&r.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(o,n.getCartOrThrow().currency.code);return this.renderMessages(t,s,e)}a?this.orderId=a:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==d?void 0:d.split(\"#\")[1],this.renderButton(t,i))})}execute(e,t){return Me(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);if(!this.orderId)throw new Pe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.bigCommercePaymentsButtons)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new N('Unable to initialize payment because \"container\" argument is not provided.');const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;m.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.bigCommercePaymentsButtons=i.Buttons(t),this.bigCommercePaymentsButtons.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.bigCommercePaymentsButtons.isEligible()&&e===i.FUNDING.CREDIT)throw new Be(`BigCommercePayments ${e} is not available for your region. Please use BigCommercePayments Checkout instead.`);d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButtons.render(a),u=!0}})}handleClick(e,t){return Me(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;t&&\"function\"==typeof t&&(yield t(()=>(this.toggleLoadingIndicator(!0),i()),n))})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:fe(i)};e.Messages(n).render(`#${t}`)}}const De=m(e=>new xe(e,D(e),new ge({containerStyles:ve}),Z()),[{id:\"bigcommerce_payments_paylater\"}]);class Ne extends v{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var Ue=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class je{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Ue(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_ratepay:n}=e;if(!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_ratepay\" argument is not provided.');const{legalTextContainer:o,container:r,loadingContainerId:a}=n;if(!r)throw new N('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new N('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new N(\"Unable to initialize payment because merchantId argument is not provided.\");this.bigcommerce_payments_ratepay=n,yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,r)})}execute(e,t){return Ue(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.bigcommerce_payments_ratepay||{};if(!i)throw new be([\"payment\"]);if(!o||\"function\"!=typeof o)throw new N('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apmscheckout\",{metadataId:this.guid}),{ratepayBirthDate:r,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(r),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new Se)}deinitialize(){const{legalTextContainer:e}=this.bigcommerce_payments_ratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),r=null==o?void 0:o.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",i),null==r||r.prepend(a);const s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new N('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.bigcommerce_payments_ratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,r=document.createElement(\"script\");r.setAttribute(\"type\",\"application/json\"),r.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),r.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:o};r.innerHTML=JSON.stringify(a),document.body.appendChild(r)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Ue(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Ue(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(\"bigcommerce_payments_apms\",{params:{useMetadata:!0}}),r=o===O.PollingStop,a=o===O.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigcommerce_payments_ratepay:this.bigcommerce_payments_ratepay}),this.handleError(new Ne)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ve=m(e=>new je(e,D(e),new ge({containerStyles:Object.assign(Object.assign({},ve),{position:\"fixed\"})})),[{gateway:\"bigcommerce_payments_apms\",id:\"ratepay\"}]);var Re;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(Re||(Re={}));const Le=Re;function $e(e){return Le.CardNumber in e&&Le.CardName in e&&Le.CardExpiry in e}function qe(e){return Le.CardNumberVerification in e&&Le.CardCodeVerification in e&&Le.CardExpiryVerification in e}class He extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var Ge;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(Ge||(Ge={}));class Ye extends u{constructor(e){super(function(e){switch(e){case Ge.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case Ge.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case Ge.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case Ge.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class We extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var Ke=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Je{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){return Ke(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_creditcards:i}=e,n=i,{form:o,onCreditCardFieldsRenderingError:r,onLoadComplete:a}=n||{};if(!t)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new N('Unable to proceed because \"options.bigcommerce_payments_creditcards.form\" argument is not provided.');this.hostedFormOptions=o,this.isCreditCardForm=$e(o.fields),this.isCreditCardVaultedForm=qe(o.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(o,r)),null==a||a(),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return Ke(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:r}=i||{};if(!i||!o)throw new be([\"payment\"]);if(this.executionPaymentData=r,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(o,r,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e,t,i,n;return Ke(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=Ie(t)?t:{},s=t&&Ce(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return Ke(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.getExecuteCallback(i),a=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===b.No||i===b.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new He},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},r);if(this.cardFields=yield o.CardFields(a),!this.cardFields.isEligible())throw new Ye(Ge.PaymentNotInitialized);try{this.stylizeInputContainers(i),$e(i)&&(yield this.renderFields(i)),qe(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return qe(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>Ke(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>Ke(this,void 0,void 0,function*(){const{orderId:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return Ke(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=r.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return Ke(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Ie(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(Ce(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return Ke(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new He(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return Ke(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new We(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case Le.CardCode:case Le.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case Le.CardNumber:case Le.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case Le.CardExpiry:case Le.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return Le.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?Le.CardNumber:Le.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?Le.CardExpiry:Le.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?Le.CardCode:Le.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Ye(Ge.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},r=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:r,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":r,\":focus\":r}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),r=n.getPaymentProviderCustomer(),a=(s=r)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?r:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isBigCommercePaymentsAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return Ke(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const r=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(r,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const Xe=m(e=>new Je(e,D(e),Z(),ie()),[{id:\"bigcommerce_payments_creditcards\"}]);var Ze=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Qe{constructor(e,t,i,n,o=3e3,r=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdkHelper=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return Ze(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_apms:n}=e;if(this.bigCommercePaymentsAlternativeMethods=n,!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');const o=this.paymentIntegrationService.getState(),r=o.getPaymentMethodOrThrow(i,t),{orderId:a,shouldRenderFields:s}=r.initializationData||{},d=o.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=Ee(d,\"PAYPAL-5624.bcp_ideal_polling\"),a?this.orderId=a:(this.paypalApms=yield this.bigCommercePaymentsSdkHelper.getPayPalApmsSdk(r,o.getCartOrThrow().currency.code),this.loadingIndicatorContainer=n.container.split(\"#\")[1],this.renderButton(i,t,n),s&&this.renderFields(i,n))})}execute(e,t){return Ze(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);const{methodId:o,gatewayId:r}=i;if(!this.orderId)throw new Pe;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,r)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.bigCommercePaymentsIntegrationService.submitPayment(o,this.orderId,r)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.bigCommercePaymentsButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return Ze(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(n),r=o===O.Approved,a=o===O.PollingError;if(r)return this.deInitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigCommercePaymentsAlternativeMethods:this.bigCommercePaymentsAlternativeMethods}),this.handleError(new Ne)}catch(e){i()}})}deInitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deInitializePollingMechanism()}reinitializeStrategy(e){return Ze(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:r}=o.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deInitializePollingMechanism()},onError:e=>{this.deInitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>Ze(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.bigCommercePaymentsButton=n.Buttons(c),this.bigCommercePaymentsButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButton.render(a))}onCreateOrder(e,t,i){return Ze(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.bigCommercePaymentsIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:r,email:a}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${r}`},email:{value:a}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in w}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const et=m(e=>new Qe(e,D(e),Z(),new ge({containerStyles:ve})),[{gateway:\"bigcommerce_payments_apms\"}]);class tt{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){const{gatewayId:t,methodId:i,bigcommerce_payments_apms:n}=e;if(this.bigCommercePaymentsAlternativeMethods=n,!i)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');return Promise.resolve()}execute(e,t){return i=this,n=void 0,r=function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);const{methodId:o,gatewayId:r}=i;try{const e={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:o,paypal_account:{order_id:yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\",{gatewayId:\"bigcommerce_payments_apms\",methodId:o})}}};yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:o,gatewayId:r,paymentData:e})}catch(e){if(function(e){var t,i;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(null===(i=null===(t=e.body)||void 0===t?void 0:t.additional_action_required)||void 0===i?void 0:i.data.redirect_url)}(e)){const t=e.body.additional_action_required.data.redirect_url;return new Promise((e,i)=>{window.location.replace(t),i()})}return this.handleError(e),Promise.reject(e)}},new((o=void 0)||(o=Promise))(function(e,t){function a(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(a,s)}d((r=r.apply(i,n||[])).next())});// removed by dead control flow\n var i, n, o, r; }finalize(){return Promise.reject(new Se)}deinitialize(){return Promise.resolve()}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};t&&\"function\"==typeof t&&t(e)}}const it=m(e=>new tt(e,D(e)),[{gateway:\"bigcommerce_payments_apms\",id:\"klarna\"},{gateway:\"bigcommerce_payments_apms\",id:\"afterpay\"}]);var nt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ot{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return nt(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_venmo:o}=e||{};if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=r.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=r.initializationData)||void 0===i?void 0:i.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=o.container.split(\"#\")[1],this.renderButton(n,o))})}execute(e,t){return nt(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new be([\"payment\"]);if(!this.orderId)throw new Pe;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Se)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m={fundingSource:i.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(m),!this.paypalButton.isEligible())throw new Be(\"Venmo is not available for your region. Please another payment method instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return nt(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const rt=m(e=>new ot(e,D(e),new ge({styles:{backgroundColor:\"black\"}})),[{id:\"bigcommerce_payments_venmo\"}]);var at=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class st{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){var t;return at(this,void 0,void 0,function*(){const{bigcommerce_payments:i,containerId:n,methodId:o}=e,r=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(r&&!i.currencyCode)throw new N('Unable to initialize payment because \"options.bigcommerce_payments.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=r?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(o,a,!1),this.renderButton(n,o,i,r)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i,n){var o,r;const{buyNowInitializeOptions:a,style:s,onComplete:d,onEligibilityFailure:l}=i,c=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),m=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:u,isAppSwitchEnabled:h}=m.initializationData||{},y=Object.assign(Object.assign({},!n&&this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)}),p={onClick:()=>this.handleClick(a),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},g=Object.assign(Object.assign({},!h&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,d)}),v=Object.assign(Object.assign(Object.assign({fundingSource:c.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(s)},y),a&&p),u&&g),f=c.Buttons(v);f.isEligible()?(null===(o=f.hasReturned)||void 0===o?void 0:o.call(f))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(r=f.resume)||void 0===r||r.call(f):f.render(`#${e}`):l&&\"function\"==typeof l?l():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return at(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return at(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return at(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return at(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t,i;return null!==(i=null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)&&void 0!==i&&i}}const dt=m(e=>new st(e,D(e)),[{id:\"bigcommerce_payments\"}]);var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.payPalSdkHelper=i}initialize(e){return lt(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r,messagingContainerId:a}=t||{},s=!!o;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(s&&!r)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_paylater.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=this.paymentIntegrationService.getState(),l=s?r:d.getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,l,!1),this.renderButton(i,n,t);const c=a&&document.getElementById(a);if(l&&c){const e=d.getPaymentMethodOrThrow(n),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;c.removeAttribute(\"data-pp-style-logo-type\"),c.removeAttribute(\"data-pp-style-logo-position\"),c.removeAttribute(\"data-pp-style-text-color\"),c.removeAttribute(\"data-pp-style-text-size\");const o=yield this.payPalSdkHelper.getPayPalMessages(e,l);this.renderMessages(o,a,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l}=d.initializationData||{},c={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},m={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)},h=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;h.forEach(t=>{if(!y){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o)},c),n&&m),l&&u),r=s.Buttons(i);r.isEligible()?(r.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return lt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return lt(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return lt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return lt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:fe(i)};e.Messages(n).render(`#${t}`)}}const mt=m(e=>new ct(e,D(e),Z()),[{id:\"bigcommerce_payments_paylater\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return ut(this,void 0,void 0,function*(){const{bigcommerce_payments_apms:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:r,currencyCode:a}=t||{},s=!!r;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');if(!o)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.apm\" argument is not provided.');if(s&&!a)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_apms.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new N('Unable to initialize PayPal button because \"options.bigcommerce_payments_apms.apm\" argument is not valid funding source.');const d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r)},d),o&&l),m=s.Buttons(c);m.isEligible()?m.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return ut(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const yt=m(e=>new ht(e,D(e)),[{id:\"bigcommerce_payments_apms\"}]);var pt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class gt{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return pt(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r}=t||{},a=!!o;if(!n)throw new N('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new N('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(a&&!r)throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new N('Unable to initialize payment because \"options.bigcommerce_payments_venmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:r}=i,a=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),m=a.Buttons(c);m.isEligible()?m.render(`#${e}`):r&&\"function\"==typeof r?r():this.bigCommercePaymentsIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.bigCommercePaymentsIntegrationService.getValidButtonStyle(e);return t.color===I.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return pt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const vt=m(e=>new gt(e,D(e)),[{id:\"bigcommerce_payments_venmo\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9iaWdjb21tZXJjZS1wYXltZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFRERSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBRUEsT0FBT0MsT0FBT0MsT0FBT0gsRUFBUSxDQUFFQyxjQUNuQyxDQ05BSCxFQUFvQk0sRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTmJKLFNBQVkxQixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhE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dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2xpZW50LXVuYXZhaWxhYmxlLWVycm9yLnRzP2Y4ZWMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvYnV5LW5vdy1jYXJ0LWNyZWF0aW9uLWVycm9yLnRzP2Q2MDQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2FydC9jYXJ0LXNvdXJjZS50cz8zODhhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMudHM/OTBmMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UudHM/OTYzZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvaW50ZXJuYWwtYXBpLWhlYWRlcnMudHM/NDExMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3QvY29udGVudC10eXBlLnRzPzUwNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L3Nkay12ZXJzaW9uLWhlYWRlcnMudHM/N2JmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyLnRzP2EwNDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1zY3JpcHQtbG9hZGVyLnRzP2Y0NjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZS50cz83Yjc1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2JmYjciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jaGVja291dC1idXR0b25zL2RlZmF1bHQtY2hlY2tvdXQtYnV0dG9uLWhlaWdodC50cz9kNDI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2RiY2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2luc3RydW1lbnQudHM/ZjJiNiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzLnRzPzY0ZDUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy9wYXlwYWwtc2RrLWhlbHBlci50cz8wYzA1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXNkay50cz8xNTE3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdG9yYWdlL3NyYy9jb29raWUtc3RvcmFnZS50cz8xNTNjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtdXRpbHMudHM/ODNhOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS11dGlscy50cz80MGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvZ2V0LWZhc3RsYW5lLXN0eWxlcy50cz81ZTc0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/OGQ0NiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneS50cz8xOTgyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItY3VzdG9tZXItc3RyYXRlZ3kudHM/ZDY0MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1jdXN0b21lci1zdHJhdGVneS50cz8yYjljIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/YzAzMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1jdXN0b21lci1zdHJhdGVneS50cz9mZTcwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91aS9zcmMvbG9hZGluZy1pbmRpY2F0b3IvbG9hZGluZy1pbmRpY2F0b3IudHM/YjA4NyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cy50cz83NDMxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvZ2V0LXBheXBhbC1tZXNzYWdlcy1zdHlsZXMtZnJvbS1ibnBsLWNvbmZpZy50cz81ZTg1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWludmFsaWQtZXJyb3IudHM/M2FkZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLWhvc3RlZC1pbnRydW1lbnQtbGlrZS50cz84NzYzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy12YXVsdGVkLWluc3RydW1lbnQudHM/MTgwZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtYmFzZS1pbnN0cnVtZW50L2lzLWJhc2UtaW5zdHJ1bWVudC50cz9lOTJmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bWVudC1zdHJhdGVneS50cz83YzUzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvaXMtYmlnY29tbWVyY2UtcGF5bWVudHMtcHJvdmlkZXItZXJyb3IudHM/ZjA3ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1wYXltZW50LXN0cmF0ZWd5LnRzPzExY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9pcy1wYXlwYWwtZmFzdGxhbmUtY3VzdG9tZXIudHM/ZDk0MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtZXhwZXJpbWVudC1lbmFibGVkL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC50cz9jOWE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneS50cz9mMTkyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvaXMtYmlnY29tbWVyY2UtZmFzdGxhbmUtcmVxdWVzdC1lcnJvci50cz9jYjZmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLXBheW1lbnQtc3RyYXRlZ3kudHM/MTRmNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW1wbGVtZW50ZWQtZXJyb3IudHM/M2EzNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLXBheW1lbnQtc3RyYXRlZ3kudHM/MjRlMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1wYXltZW50LXN0cmF0ZWd5LnRzPzhkNTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvdGltZW91dC1lcnJvci50cz8wODBkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS9iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3kudHM/MDgxYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXkvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneS50cz9kOWNhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaG9zdGVkLWZpZWxkLXR5cGUudHM/NjVkOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2lzLWNyZWRpdC1jYXJkLWZvcm0tZmllbGRzLnRzPzBmYWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9pcy1jcmVkaXQtY2FyZC12YXVsdGVkLWZvcm0tZmllbGRzLnRzP2YzYjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtZmFpbGVkLWVycm9yLnRzPzA3ZGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1pbnZhbGlkLWZvcm0tZXJyb3IudHM/YzBmYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy9iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneS50cz9kZTBmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvdXRpbHMvaXMtYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXIudHM/YTVjZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzLXBheW1lbnQtc3RyYXRlZ3kudHM/ZGZlOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMvYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzPzNhM2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3kudHM/NGZiNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlZGlyZWN0LWFsdGVybmF0aXZlLW1ldGhvZHMvYmlnY29tZW1yY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzPzI5ZWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9pcy1yZWRpcmVjdC1lcnJvci50cz81ZjUwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlZGlyZWN0LWFsdGVybmF0aXZlLW1ldGhvZHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXJlZGlyZWN0LWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz84NDBiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz9kYjc2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3kudHM/NThmZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneS50cz8yMzU0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneS50cz80NGM3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLXN0cmF0ZWd5LnRzP2Y3MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLXN0cmF0ZWd5LnRzPzMyMTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5LnRzPzhiYmEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneS50cz80OTkyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLXN0cmF0ZWd5LnRzPzQwYjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLXN0cmF0ZWd5LnRzPzFlM2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXNvbHZhYmxlTW9kdWxlIGZyb20gJy4vcmVzb2x2YWJsZS1tb2R1bGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b1Jlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+KFxuICAgIG1vZHVsZTogVE1vZHVsZSxcbiAgICByZXNvbHZlSWRzOiBUSWRlbnRpZmllcltdLFxuKTogUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4ge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG1vZHVsZSwgeyByZXNvbHZlSWRzIH0pO1xufVxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gQ2FydFNvdXJjZSB7XG4gICAgQnV5Tm93ID0gJ0JVWV9OT1cnLFxufVxuIiwiaW1wb3J0IHsgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIFNoaXBwaW5nT3B0aW9uLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZztcbi8vIFRPRE86IHJlbmFtZSBCaWdDb21tZXJjZVBheW1lbnRzU0RLRnVuZGluZyB0byBQYXlQYWxTREtGdW5kaW5nXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNTREtGdW5kaW5nIHtcbiAgICBDQVJEOiBzdHJpbmc7XG4gICAgUEFZUEFMOiBzdHJpbmc7XG4gICAgQ1JFRElUOiBzdHJpbmc7XG4gICAgUEFZTEFURVI6IHN0cmluZztcbiAgICBPWFhPOiBzdHJpbmc7XG4gICAgU0VQQTogc3RyaW5nO1xuICAgIFZFTk1POiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEJpZ0NvbW1lcmNlIFBheW1lbnRzIFNES1xuICpcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25Gb2N1cyhkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25CbHVyKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICB9O1xuICAgIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbj86IChkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKSA9PiB2b2lkO1xuICAgIGNyZWF0ZU9yZGVyPzogKCkgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICAgIHN0eWxlOiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSk6IHZvaWQ7XG4gICAgb25FcnJvcigpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSB7XG4gICAgdmF1bHRTZXR1cFRva2VuPzogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbiAgICBsaWFiaWxpdHlTaGlmdD86IExpYWJpbGl0eVNoaWZ0RW51bTtcbn1cblxuZXhwb3J0IGVudW0gTGlhYmlsaXR5U2hpZnRFbnVtIHtcbiAgICBQb3NzaWJsZSA9ICdQT1NTSUJMRScsXG4gICAgTm8gPSAnTk8nLFxuICAgIFVua25vd24gPSAnVU5LTk9XTicsXG4gICAgWWVzID0gJ1lFUycsXG59XG5cbmludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDYXJkID0gQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGlzRm9ybVZhbGlkOiBib29sZWFuO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gICAgZmllbGRzOiB7XG4gICAgICAgIGNhcmRDdnZGaWVsZDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROdW1iZXJGaWVsZDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZEV4cGlyeUZpZWxkOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHMge1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICBDVlZGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBFeHBpcnlGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgTnVtYmVyRmllbGQoY29uZmlnPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgc3VibWl0KGNvbmZpZz86IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3VibWl0Q29uZmlnKTogUHJvbWlzZTx2b2lkPjtcbiAgICBnZXRTdGF0ZSgpOiBQcm9taXNlPEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3VibWl0Q29uZmlnIHtcbiAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICBjb21wYW55Pzogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzTGluZTE6IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgICAgICBhZG1pbkFyZWExOiBzdHJpbmc7IC8vIFN0YXRlXG4gICAgICAgIGFkbWluQXJlYTI6IHN0cmluZzsgLy8gQ2l0eVxuICAgICAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnlDb2RlPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU0RLIHtcbiAgICBDYXJkRmllbGRzOiAoXG4gICAgICAgIGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnLFxuICAgICkgPT4gUHJvbWlzZTxCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcz47XG4gICAgR29vZ2xlcGF5OiAoKSA9PiB7XG4gICAgICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgICAgICBjb25maXJtT3JkZXI6IChhcmcwOiB7XG4gICAgICAgICAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kRGF0YTogQ29uZmlybU9yZGVyRGF0YTtcbiAgICAgICAgfSkgPT4gUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nIH0+O1xuICAgICAgICBpbml0aWF0ZVBheWVyQWN0aW9uOiAoKSA9PiB2b2lkO1xuICAgIH07XG4gICAgRlVORElORzogQmlnQ29tbWVyY2VQYXltZW50c1NES0Z1bmRpbmc7XG4gICAgSG9zdGVkRmllbGRzOiB7XG4gICAgICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgZGF0YTogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMsXG4gICAgICAgICk6IFByb21pc2U8QmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMpOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucztcbiAgICBQYXltZW50RmllbGRzKFxuICAgICAgICBvcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkc09wdGlvbnMsXG4gICAgKTogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRGaWVsZHM7XG4gICAgTWVzc2FnZXMob3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNNZXNzYWdlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtT3JkZXJEYXRhIHtcbiAgICB0b2tlbml6YXRpb25EYXRhOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIGluZm86IHtcbiAgICAgICAgY2FyZE5ldHdvcms6IHN0cmluZztcbiAgICAgICAgY2FyZERldGFpbHM6IHN0cmluZztcbiAgICB9O1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgUGF5UGFsTGVnYWwgPSAocGFyYW1zOiB7IGZ1bmRpbmdTb3VyY2U6IHN0cmluZyB9KSA9PiB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWxGdW5kaW5nIHtcbiAgICBGVU5ESU5HOiB7XG4gICAgICAgIFBBWV9VUE9OX0lOVk9JQ0U6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpcnRoRGF0ZSB7XG4gICAgZ2V0RnVsbFllYXIoKTogbnVtYmVyO1xuICAgIGdldERhdGUoKTogbnVtYmVyO1xuICAgIGdldE1vbnRoKCk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zIHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgICdjbGllbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnbWVyY2hhbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnYnV5ZXItY291bnRyeSc/OiBzdHJpbmc7XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlW107XG4gICAgICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgICAgICBjb21taXQ/OiBib29sZWFuO1xuICAgICAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgICAgICBjb21wb25lbnRzPzogQ29tcG9uZW50c1NjcmlwdFR5cGU7XG4gICAgfTtcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS11c2VyLWlkLXRva2VuJz86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZW51bSBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBDb21wb25lbnRzU2NyaXB0VHlwZSA9IEFycmF5PFxuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgcGF5cGFsPzogUGF5UGFsU0RLO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBJbml0aWFsaXphdGlvbiBEYXRhXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBidXR0b25TdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBidXllckNvdW50cnk/OiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IHN0cmluZztcbiAgICBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47XG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgaXNBcHBTd2l0Y2hFbmFibGVkPzogYm9vbGVhbjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBCdXlOb3dcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMge1xuICAgIGdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpOiBCdXlOb3dDYXJ0UmVxdWVzdEJvZHk7XG59XG5cbi8qKlxuICpcbiAqIEJpZ0NvbW1lcmNlIFBheW1lbnRzIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMge1xuICAgIGZpZWxkcz86IHtcbiAgICAgICAgbnVtYmVyPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBjdnY/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uO1xuICAgIH07XG4gICAgcGF5bWVudHNTREs/OiBib29sZWFuO1xuICAgIHN0eWxlcz86IHtcbiAgICAgICAgaW5wdXQ/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnLmludmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy52YWxpZCc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnOmZvY3VzJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgfTtcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uIHtcbiAgICBzZWxlY3Rvcjogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHMge1xuICAgIHN1Ym1pdChcbiAgICAgICAgb3B0aW9ucz86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8QmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0FwcHJvdmU+O1xuICAgIGdldFN0YXRlKCk6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1N0YXRlKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyB7XG4gICAgY29udGluZ2VuY2llcz86IEFycmF5PCczRF9TRUNVUkUnPjtcbiAgICBjYXJkaG9sZGVyTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbnVtYmVyPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uTW9udGg/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uWWVhcj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIHBvc3RhbENvZGU/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhIHtcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgICBpc0VtcHR5OiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBCdXR0b25zXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgY2xvc2UoKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgaGFzUmV0dXJuZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVzdW1lPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgZXhwZXJpZW5jZT86IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhkYXRhOiBJbml0Q2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBJbml0Q2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNvbXBsZXRlPyhkYXRhOiBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KGRhdGE6IENsaWNrQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG4gICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3NDYWxsYmFja0RhdGEge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB7XG4gICAgYW1vdW50OiB7XG4gICAgICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgcGhvbmU/OiB7XG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRkcmVzc19saW5lXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQge1xuICAgIGludGVudDogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgUGF5bWVudCBmaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkc09wdGlvbnMge1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG5hbWU/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWw/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZVBheW1lbnRzIE1lc3NhZ2VzXG4gKi9cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuLy8gVE9ETzogVGhpcyBpbnRlcmZhY2UgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgUGF5UGF5U0RLIGludGVyZmFjZSBpcyByZW1vdmVkXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXNTdHlsZU9wdGlvbnMge1xuICAgIGxheW91dD86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogT3RoZXJcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIHtcbiAgICBPWFhPID0gJ294eG8nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGF0YSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgYXBwcm92ZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHkge1xuICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz86IFNoaXBwaW5nT3B0aW9uW107XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj86IFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2Uge1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5IGV4dGVuZHMgSG9zdGVkSW5zdHJ1bWVudCwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIG1ldGFkYXRhSWQ/OiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IGJvb2xlYW47XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbiAgICBtZXRob2RJZD86IHN0cmluZztcbiAgICBnYXRld2F5SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbE9yZGVyU3RhdHVzIHtcbiAgICBBcHByb3ZlZCA9ICdBUFBST1ZFRCcsXG4gICAgQ3JlYXRlZCA9ICdDUkVBVEVEJyxcbiAgICBQYXllckFjdGlvblJlcXVpcmVkID0gJ1BBWUVSX0FDVElPTl9SRVFVSVJFRCcsXG4gICAgUG9sbGluZ1N0b3AgPSAnUE9MTElOR19TVE9QJyxcbiAgICBQb2xsaW5nRXJyb3IgPSAnUE9MTElOR19FUlJPUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJTdGF0dXNEYXRhIHtcbiAgICBzdGF0dXM6IFBheVBhbE9yZGVyU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSxcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDYXJ0LFxuICAgIENhcnRTb3VyY2UsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTaGlwcGluZ09wdGlvbixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxuICAgIFBheVBhbFNESyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxuICAgIFN0eWxlQnV0dG9uTGFiZWwsXG4gICAgU3R5bGVCdXR0b25TaGFwZSxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgcGF5cGFsU2RrPzogUGF5UGFsU0RLO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyOiBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcixcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsU0RLIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRQYXlQYWxTZGsoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHByb3ZpZGVkQ3VycmVuY3lDb2RlPzogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBwcm92aWRlZEN1cnJlbmN5Q29kZSB8fCBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMucGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyLmdldFBheVBhbFNESyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgZm9yY2VMb2FkLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxTZGtPclRocm93KCk6IFBheVBhbFNESyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxTZGspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV5IE5vdyBjYXJ0IGNyZWF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9uczogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgICAgIGNvbnN0IGNhcnRSZXF1ZXN0Qm9keSA9IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO1xuXG4gICAgICAgIGlmICghY2FydFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KGNhcnRSZXF1ZXN0Qm9keSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT3JkZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHByb3ZpZGVySWQsIHtcbiAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8UGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNldHVwVG9rZW4gfSA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHsgb3JkZXJJZCwgLi4uKHNldHVwVG9rZW4gPyB7IHNldHVwVG9rZW4gfSA6IHt9KSB9O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIudXBkYXRlT3JkZXIoe1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uczogY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLFxuICAgICAgICAgICAgICAgIGNhcnRJZDogY2FydC5pZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMobWV0aG9kSWQ/OiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXM+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBzdWJtaXR0aW5nIGFuZCB0b2tlbml6aW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHRva2VuaXplUGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghb3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAuLi4oY2FydC5zb3VyY2UgPT09IENhcnRTb3VyY2UuQnV5Tm93ICYmIHsgY2FydF9pZDogY2FydC5pZCB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3VibWl0UGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgLi4uKGdhdGV3YXlJZCA/IHsgZ2F0ZXdheUlkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2hpcHBpbmcgb3B0aW9ucyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkPzogc3RyaW5nKTogU2hpcHBpbmdPcHRpb24ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICBjb25zdCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG5cbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZFxuICAgICAgICAgICAgPyBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZClcbiAgICAgICAgICAgIDogYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24/LmlkLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uVG9TZWxlY3QgPVxuICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB8fCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcblxuICAgICAgICBpZiAoIXNoaXBwaW5nT3B0aW9uVG9TZWxlY3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdXIgb3JkZXIgY2FuJ3QgYmUgc2hpcHBlZCB0byB0aGlzIGFkZHJlc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2hpcHBpbmdPcHRpb25Ub1NlbGVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEFkZHJlc3MgdHJhbnNmb3JtaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldEFkZHJlc3MoYWRkcmVzcz86IFBhcnRpYWw8QmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keT4pOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYWRkcmVzcz8uZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGFkZHJlc3M/Lmxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgZW1haWw6IGFkZHJlc3M/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgcGhvbmU6IGFkZHJlc3M/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcz8uYWRkcmVzczIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3M/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2VDb2RlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoeyBwYXllciB9OiBQYXlQYWxPcmRlckRldGFpbHMpOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBheWVyLm5hbWUuZ2l2ZW5fbmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwYXllci5uYW1lLnN1cm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogcGF5ZXIuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBwYXllci5hZGRyZXNzLmFkZHJlc3NfbGluZV8xLFxuICAgICAgICAgICAgYWRkcmVzczI6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzIsXG4gICAgICAgICAgICBjaXR5OiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMixcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBwYXllci5hZGRyZXNzLmNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHBheWVyLmFkZHJlc3MucG9zdGFsX2NvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMSxcbiAgICAgICAgICAgIHBob25lOiBwYXllci5waG9uZT8ucGhvbmVfbnVtYmVyPy5uYXRpb25hbF9udW1iZXIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgIG9yZGVyRGV0YWlsczogUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgICk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICBjb25zdCB7IHBheWVyLCBwdXJjaGFzZV91bml0cyB9ID0gb3JkZXJEZXRhaWxzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgbmFtZTogeyBmdWxsX25hbWUgfSxcbiAgICAgICAgfSA9IHB1cmNoYXNlX3VuaXRzWzBdLnNoaXBwaW5nO1xuXG4gICAgICAgIGNvbnN0IFtmaXJzdE5hbWUsIC4uLmxhc3ROYW1lXSA9IGZ1bGxfbmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lLmpvaW4oJyAnKSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbnMgc3R5bGUgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyk6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IHsgY29sb3IsIGhlaWdodCwgbGFiZWwsIHNoYXBlIH0gPSBzdHlsZSB8fCB7fTtcblxuICAgICAgICBjb25zdCB2YWxpZFN0eWxlcyA9IHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvciAmJiBTdHlsZUJ1dHRvbkNvbG9yW2NvbG9yXSA/IGNvbG9yIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmdldFZhbGlkSGVpZ2h0KGhlaWdodCksXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgJiYgU3R5bGVCdXR0b25MYWJlbFtsYWJlbF0gPyBsYWJlbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNoYXBlOiBzaGFwZSAmJiBTdHlsZUJ1dHRvblNoYXBlW3NoYXBlXSA/IHNoYXBlIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvbWl0QnkodmFsaWRTdHlsZXMsIGlzTmlsKTtcbiAgICB9XG5cbiAgICBnZXRWYWxpZEhlaWdodChoZWlnaHQ/OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gNDA7XG4gICAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDI1O1xuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSA1NTtcblxuICAgICAgICBpZiAoIWhlaWdodCB8fCB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA8IG1pbkhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlscyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudElkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEZvciBub3cgdGhpcyBpcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiwgZnVydGhlciByZW1vdmVFbGVtZW50IG1ldGhvZCB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBJTlRFUk5BTF9VU0VfT05MWSA9XG4gICAgJ1RoaXMgQVBJIGVuZHBvaW50IGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlJztcbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzRGF0YSxcbiAgICBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2UsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlckRhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9wYXltZW50LyR7cHJvdmlkZXJJZH1gO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucG9zdDxQYXlQYWxPcmRlckRhdGE+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcihcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vYmlnY29tbWVyY2VfcGF5bWVudHNgO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0PFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhcbiAgICAgICAgbWV0aG9kSWQgPSAnYmlnY29tbWVyY2VfcGF5bWVudHMnLFxuICAgICAgICBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1c0RhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke21ldGhvZElkfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0PFBheVBhbE9yZGVyU3RhdHVzRGF0YT4odXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0V2luZG93LFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1NjcmlwdFBhcmFtcyxcbiAgICBDb21wb25lbnRzU2NyaXB0VHlwZSxcbiAgICBGdW5kaW5nVHlwZSxcbiAgICBQYXlQYWxTREssXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbFNESyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRQYXlQYWxTREsocGF5cGFsU2RrU2NyaXB0Q29uZmlnLCBmb3JjZUxvYWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheVBhbFNESyhcbiAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zLFxuICAgICAgICBmb3JjZUxvYWQgPSBmYWxzZSxcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zWydvcHRpb25zJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5vcHRpb25zLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zWydhdHRyaWJ1dGVzJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrVXJsID0gJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzJztcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoc2NyaXB0U3JjLCB7IGFzeW5jOiB0cnVlLCBhdHRyaWJ1dGVzIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zIHtcbiAgICAgICAgY29uc3QgeyBpZCwgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc1Zlbm1vRW5hYmxlZCxcbiAgICAgICAgICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLFxuICAgICAgICAgICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGlzR29vZ2xlUGF5RW5hYmxlZCxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBjb21taXQgPSBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB8fCBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlO1xuXG4gICAgICAgIGNvbnN0IHNob3VsZEVuYWJsZUNhcmQgPSBpZCA9PT0gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzJztcbiAgICAgICAgY29uc3QgZW5hYmxlQ2FyZEZ1bmRpbmcgPSBzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNhcmRGdW5kaW5nID0gIXNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUNyZWRpdEZ1bmRpbmcgPSBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNyZWRpdEZ1bmRpbmcgPSAhaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlVmVubW9GdW5kaW5nID0gaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZVZlbm1vRnVuZGluZyA9ICFpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmZpbHRlcihcbiAgICAgICAgICAgIChhcG06IHN0cmluZykgPT4gIWVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmluY2x1ZGVzKGFwbSksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGdvb2dsZVBheUNvbXBvbmVudDogQ29tcG9uZW50c1NjcmlwdFR5cGUgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBlbmFibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnaG9zdGVkLWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdsZWdhbCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdvb2dsZVBheUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FyZEZpZWxkc0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbHRlckZ1bmRpbmdPcHRpb25zKGZ1bmRpbmdPcHRpb25zOiBGdW5kaW5nVHlwZVtdIHwgdW5kZWZpbmVkKTogRnVuZGluZ1R5cGVbXSB7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCA9IFsna2xhcm5hJywgJ2FmdGVycGF5J107XG5cbiAgICAgICAgaWYgKCFmdW5kaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmRpbmdPcHRpb25zLmZpbHRlcihcbiAgICAgICAgICAgIChmdW5kaW5nT3B0aW9uOiBGdW5kaW5nVHlwZSkgPT4gIWZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZC5pbmNsdWRlcyhmdW5kaW5nT3B0aW9uKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIsXG59IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgb25FcnJvciA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50cywgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50cy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmlnY29tbWVyY2VfcGF5bWVudHMub25DbGljayAmJiB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHMub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uRXJyb3IgfHwgbm9vcDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzOiBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2ssIG9uQ29tcGxldGUgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcignYmlnY29tbWVyY2VfcGF5bWVudHMnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBleGNlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImNvbnN0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCA9IDQwO1xuXG5leHBvcnQgZGVmYXVsdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQ7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImltcG9ydCB7IENhcmRJbnN0cnVtZW50LCBDdXN0b21lckFkZHJlc3MgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBhdHRyaWJ1dGlvbklkPzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlW107XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVTdHlsZXM/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzO1xuICAgIGNvbm5lY3RDbGllbnRUb2tlbj86IHN0cmluZzsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0JpZ0NvbW1lcmNlUGF5bWVudHNBbmFseXRpY3NWMkVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xuICAgIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbEhvc3RXaW5kb3cgY29udGFpbnMgZGlmZmVyZW50XG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlcyBmb3IgZGlmZmVyZW50IHB1cnBvc2VzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbEZhc3RsYW5lPzogUGF5UGFsRmFzdGxhbmU7XG4gICAgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwYXlwYWxNZXNzYWdlcz86IFBheVBhbE1lc3NhZ2VzU2RrO1xuICAgIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcGF5cGFsR29vZ2xlUGF5PzogUGF5UGFsR29vZ2xlUGF5U2RrO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgU0RLIGNvbmZpZ1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTZGtDb25maWcge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlW107XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBQYXlQYWxTZGtDb21wb25lbnRzO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtdXNlci1pZC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLW5hbWVzcGFjZSc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbFNka0NvbXBvbmVudHMgPSBBcnJheTxcbiAgICAnZmFzdGxhbmUnIHwgJ21lc3NhZ2VzJyB8ICdidXR0b25zJyB8ICdwYXltZW50LWZpZWxkcycgfCAnZ29vZ2xlcGF5JyB8ICd0aHJlZS1kb21haW4tc2VjdXJlJ1xuPjtcblxuLyoqXG4gKlxuICogUGF5UGFsIFNkayBpbnN0YW5jZXNcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHRocmVlRFNlY3VyZVBhcmFtZXRlcnMge1xuICAgIGFtb3VudDogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICB0aHJlZURTUmVxdWVzdGVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgIGJyYW5kX25hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICBsb2NhbGU6IHN0cmluZztcbiAgICAgICAgICAgIHJldHVybl91cmw6IHN0cmluZztcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lU2RrIHtcbiAgICBUaHJlZURvbWFpblNlY3VyZUNsaWVudDoge1xuICAgICAgICBpc0VsaWdpYmxlKHBhcmFtczogdGhyZWVEU2VjdXJlUGFyYW1ldGVycyk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgIHNob3coKTogUHJvbWlzZTxUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZT47XG4gICAgfTtcbiAgICBGYXN0bGFuZShvcHRpb25zPzogUGF5UGFsRmFzdGxhbmVPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT47XG59XG5cbmludGVyZmFjZSBUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZSB7XG4gICAgbGlhYmlsaXR5U2hpZnQ6IExpYWJpbGl0eVNoaWZ0RW51bTtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgbm9uY2U6IHN0cmluZzsgLy8gRW5yaWNoZWQgbm9uY2Ugb3IgdGhlIG9yaWdpbmFsIG5vbmNlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsTWVzc2FnZXNTZGsge1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMpOiBNZXNzYWdpbmdSZW5kZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQXBtU2RrIHtcbiAgICBCdXR0b25zKG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMoXG4gICAgICAgIG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxHb29nbGVQYXlTZGsge1xuICAgIEdvb2dsZXBheSgpOiBHb29nbGVQYXk7XG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kIHtcbiAgICBBbHdheXMgPSAnU0NBX0FMV0FZUycsXG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU3VjY2VlZGVkID0gJ3N1Y2NlZWRlZCcsXG4gICAgQ2FuY2VsbGVkID0gJ2NhbmNlbGxlZCcsXG4gICAgRXJyb3JlZCA9ICdlcnJvcmVkJyxcbn1cblxuLyoqXG4gKlxuICogR29vZ2xlIFBheSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5cbmludGVyZmFjZSBHb29nbGVQYXkge1xuICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgIGNvbmZpcm1PcmRlcjogKGNvbmZpcm1PcmRlckNvbmZpZzogQ29uZmlybU9yZGVyQ29uZmlnKSA9PiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcgfT47XG4gICAgaW5pdGlhdGVQYXllckFjdGlvbjogKHBheWVyQWN0aW9uQ29uZmlnOiBQYXllckFjdGlvbkNvbmZpZykgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuaW50ZXJmYWNlIENvbmZpcm1PcmRlckNvbmZpZyB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHBheW1lbnRNZXRob2REYXRhOiBDb25maXJtT3JkZXJEYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpcm1PcmRlckRhdGEge1xuICAgIHRva2VuaXphdGlvbkRhdGE6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG4gICAgaW5mbzoge1xuICAgICAgICBjYXJkTmV0d29yazogc3RyaW5nO1xuICAgICAgICBjYXJkRGV0YWlsczogc3RyaW5nO1xuICAgIH07XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUGF5ZXJBY3Rpb25Db25maWcge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhcbiAgICAgICAgZGF0YTogUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQge1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrQWN0aW9ucyB7XG4gICAgcmVqZWN0KCk6IHZvaWQ7XG4gICAgcmVzb2x2ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQge1xuICAgIGNvcnJlbGF0aW9uSUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tBY3Rpb25zIHtcbiAgICBkaXNhYmxlKCk6IHZvaWQ7XG4gICAgZW5hYmxlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICB9O1xuICAgIHB1cmNoYXNlX3VuaXRzOiBBcnJheTx7XG4gICAgICAgIHNoaXBwaW5nOiB7XG4gICAgICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMjogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMT86IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkxhYmVsIHtcbiAgICBwYXlwYWwgPSAncGF5cGFsJyxcbiAgICBjaGVja291dCA9ICdjaGVja291dCcsXG4gICAgYnV5bm93ID0gJ2J1eW5vdycsXG4gICAgcGF5ID0gJ3BheScsXG4gICAgaW5zdGFsbG1lbnQgPSAnaW5zdGFsbG1lbnQnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkNvbG9yIHtcbiAgICBnb2xkID0gJ2dvbGQnLFxuICAgIGJsdWUgPSAnYmx1ZScsXG4gICAgc2lsdmVyID0gJ3NpbHZlcicsXG4gICAgYmxhY2sgPSAnYmxhY2snLFxuICAgIHdoaXRlID0gJ3doaXRlJyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25TaGFwZSB7XG4gICAgcGlsbCA9ICdwaWxsJyxcbiAgICByZWN0ID0gJ3JlY3QnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBTdHlsZUJ1dHRvbkNvbG9yO1xuICAgIHNoYXBlPzogU3R5bGVCdXR0b25TaGFwZTtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgbGFiZWw/OiBTdHlsZUJ1dHRvbkxhYmVsO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBQYXltZW50RmllbGRzIGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheUxhdGVyIE1lc3NhZ2VzIHJlbGF0ZWQgdHlwZXNcbiAqIGRvYzogaHR0cHM6Ly9kZXZlbG9wZXIucGF5cGFsLmNvbS9kb2NzL2NoZWNrb3V0L3BheS1sYXRlci91cy9pbnRlZ3JhdGUvcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsdWUnIHwgJ2JsYWNrJyB8ICd3aGl0ZScgfCAnd2hpdGUtbm8tYm9yZGVyJyB8ICdncmF5JyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgbGF5b3V0Pzogc3RyaW5nOyAvLyAndGV4dCcgfCAnZmxleCdcbiAgICBsb2dvPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nOyAvLyAncHJpbWFyeScgfCAnYWx0ZXJuYXRpdmUnIHwgJ2lubGluZScgfCAnbm9uZSdcbiAgICAgICAgcG9zaXRpb24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJ1xuICAgIH07XG4gICAgcmF0aW8/OiBzdHJpbmc7IC8vICcxeDEnIHwgJzF4NCcgfCAnOHgxJyB8ICcyMHgxJ1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGFsaWduPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICAgICAgY29sb3I/OiBzdHJpbmc7IC8vICdibGFjaycgfCAnd2hpdGUnIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICAgICAgc2l6ZT86IG51bWJlcjsgLy8gZnJvbSAxMCB0byAxNlxuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBNZXNzYWdlc1N0eWxlT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogYm9vbGVhbjtcbiAgICBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lIHtcbiAgICBpZGVudGl0eTogUGF5UGFsRmFzdGxhbmVJZGVudGl0eTtcbiAgICBldmVudHM6IFBheVBhbEZhc3RsYW5lRXZlbnRzO1xuICAgIHByb2ZpbGU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9wdGlvbnMge1xuICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lSWRlbnRpdHkge1xuICAgIGxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD47XG4gICAgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0IHtcbiAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlPzogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIHByb2ZpbGVEYXRhPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG4gICAgVU5SRUNPR05JWkVEID0gJ3VucmVjb2duaXplZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YSB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzO1xuICAgIGNhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSB7XG4gICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUge1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgbmF0aW9uYWxOdW1iZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcyB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBwaG9uZU51bWJlcjogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmU7XG4gICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQge1xuICAgIGlkOiBzdHJpbmc7IC8vIG5vbmNlIC8gdG9rZW5cbiAgICBwYXltZW50U291cmNlOiBQYXlQYWxGYXN0bGFuZVBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlIHtcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZUNhcmRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nOyAvLyBcIllZWVktTU1cIlxuICAgIGxhc3REaWdpdHM6IHN0cmluZzsgLy8gXCIxMTExXCJcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBhZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQ3VzdG9tZXJBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBpbnN0cnVtZW50czogQ2FyZEluc3RydW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlIHtcbiAgICBzaG93Q2FyZFNlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZT47XG4gICAgc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzc1NlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQ2FyZDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ+O1xuICAgIHJlbmRlcihlbGVtZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyB7XG4gICAgbmFtZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgZmllbGRzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudHMge1xuICAgIGFwbVNlbGVjdGVkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBlbWFpbFN1Ym1pdHRlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIG9yZGVyUGxhY2VkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgY29udGV4dF90eXBlOiAnY3NfaWQnO1xuICAgIGNvbnRleHRfaWQ6IHN0cmluZzsgLy8gY2hlY2tvdXQgc2Vzc2lvbiBpZFxuICAgIHBhZ2VfdHlwZTogJ2NoZWNrb3V0X3BhZ2UnO1xuICAgIHBhZ2VfbmFtZTogc3RyaW5nOyAvLyB0aXRsZSBvZiB0aGUgY2hlY2tvdXQgaW5pdGlhdGlvbiBwYWdlXG4gICAgcGFydG5lcl9uYW1lOiAnYmlnYyc7XG4gICAgdXNlcl90eXBlOiAnc3RvcmVfbWVtYmVyJyB8ICdzdG9yZV9ndWVzdCc7IC8vIHR5cGUgb2YgdGhlIHVzZXIgb24gdGhlIG1lcmNoYW50IHNpdGVcbiAgICBzdG9yZV9pZDogc3RyaW5nO1xuICAgIG1lcmNoYW50X25hbWU6IHN0cmluZztcbiAgICBleHBlcmltZW50OiBzdHJpbmc7IC8vIHN0cmluZ2lmeSBKU09OIG9iamVjdCBcIlt7IHRyZWF0bWVudF9ncm91cDogJ3Rlc3QnIHwgJ2NvbnRyb2wnIH1dXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9zZWxlY3RlZDogc3RyaW5nOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWQgLyBtZXRob2RJZFxuICAgIGFwbV9sb2NhdGlvbjogJ3ByZS1lbWFpbCBzZWN0aW9uJyB8ICdwYXltZW50IHNlY3Rpb24nOyAvLyBwbGFjZW1lbnQgb2YgQVBNLCB3aGV0aGVyIGl0IGJlIGFib3ZlIHRoZSBlbWFpbCBlbnRyeSBvciBpbiB0aGUgcmFkaW8gYnV0dG9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHNlbGVjdGVkX3BheW1lbnRfbWV0aG9kOiBzdHJpbmc7XG4gICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQge1xuICAgIHBheXBhbF9jb25uZWN0X3Rva2VuPzoge1xuICAgICAgICBvcmRlcl9pZD86IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXN0bGFuZVN0eWxlc1NldHRpbmdzIHtcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZz86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICBmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZGlyZWN0RXJyb3Ige1xuICAgIGJvZHk6IHtcbiAgICAgICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmw6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgRnVuZGluZ1R5cGUsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsR29vZ2xlUGF5U2RrLFxuICAgIFBheVBhbEhvc3RXaW5kb3csXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrQ29uZmlnLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsU2RrSGVscGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGs7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxHb29nbGVQYXlTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXkgfHwgZm9yY2VMb2FkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtTY3JpcHRDb25maWcgPSB0aGlzLmdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtTY3JpcHRDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEdvb2dsZVBheTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxBcG1zU2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24ocGF5bWVudE1ldGhvZCwgY3VycmVuY3lDb2RlKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEFwbXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsTWVzc2FnZXNTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTWVzc2FnZXNDb25maWcgPSB0aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBsb2FkUGF5UGFsU2RrIGlzIGEgcGF5cGFsIHNkayBzY3JpcHQgbG9hZGVyXG4gICAgICogIHdoaWNoIGxvYWRzIHBheXBhbCBzZGsgYmFzZWQgb24gcHJvdmlkZWQgY29uZmlndXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU2RrKHsgb3B0aW9ucywgYXR0cmlidXRlcyB9OiBQYXlQYWxTZGtDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0T3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snb3B0aW9ucyddPihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0QXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snYXR0cmlidXRlcyddPihhdHRyaWJ1dGVzKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2NyaXB0T3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogc2NyaXB0QXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25maWd1cmF0aW9ucyBzZWN0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGludGVudCwgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ2Zhc3RsYW5lJywgJ3RocmVlLWRvbWFpbi1zZWN1cmUnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJzogc2Vzc2lvbklkLnJlcGxhY2UoLy0vZywgJycpLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxGYXN0bGFuZVNkaycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtc2RrLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBjb21taXQgPSBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB8fCBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnZ29vZ2xlcGF5J10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgJ2RhdGEtbmFtZXNwYWNlJzogJ3BheXBhbEdvb2dsZVBheScsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyk7XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IHRoaXMuZmlsdGVyRnVuZGluZ09wdGlvbnMoXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJzogZGlzYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnYnV0dG9ucycsICdwYXltZW50LWZpZWxkcyddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxBcG1zJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQsIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsIGJ1eWVyQ291bnRyeSB9ID1cbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnbWVzc2FnZXMnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxNZXNzYWdlcycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaWx0ZXJGdW5kaW5nT3B0aW9ucyhmdW5kaW5nT3B0aW9uczogRnVuZGluZ1R5cGVbXSB8IHVuZGVmaW5lZCk6IEZ1bmRpbmdUeXBlW10ge1xuICAgICAgICBjb25zdCBmdW5kaW5nVHlwZXNUb0JlRmlsdGVyZWQgPSBbJ2tsYXJuYScsICdhZnRlcnBheSddO1xuXG4gICAgICAgIGlmICghZnVuZGluZ09wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5kaW5nT3B0aW9ucy5maWx0ZXIoXG4gICAgICAgICAgICAoZnVuZGluZ09wdGlvbjogRnVuZGluZ1R5cGUpID0+ICFmdW5kaW5nVHlwZXNUb0JlRmlsdGVyZWQuaW5jbHVkZXMoZnVuZGluZ09wdGlvbiksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Db25maWc8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihjb25maWc6IFQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgbGV0IHRyYW5zZm9ybWVkQ29uZmlnID0ge307XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZykgYXMgQXJyYXk8a2V5b2YgVD47XG5cbiAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gJycgfHxcbiAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAuLi50cmFuc2Zvcm1lZENvbmZpZyxcbiAgICAgICAgICAgICAgICBba2V5XTogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsJykgOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZENvbmZpZztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCBQYXlQYWxTZGtIZWxwZXIgZnJvbSAnLi9wYXlwYWwtc2RrLWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKTogUGF5UGFsU2RrSGVscGVyIHtcbiAgICByZXR1cm4gbmV3IFBheVBhbFNka0hlbHBlcihjcmVhdGVTY3JpcHRMb2FkZXIoKSk7XG59XG4iLCJpbnRlcmZhY2UgQ29va2llT3B0aW9ucyB7XG4gICAgZXhwaXJlcz86IERhdGU7XG4gICAgcGF0aD86IHN0cmluZztcbiAgICBkb21haW4/OiBzdHJpbmc7XG4gICAgc2VjdXJlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29va2llU3RvcmFnZSB7XG4gICAgc3RhdGljIGdldChuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgY29va2llS2V5ID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGAke25hbWV9YCl9PWA7XG4gICAgICAgIGNvbnN0IGNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZTtcblxuICAgICAgICBsZXQgdmFsdWUgPSBudWxsO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0SW5kZXggPSBjb29raWUuaW5kZXhPZihjb29raWVLZXkpO1xuXG4gICAgICAgIGlmIChmaXJzdEluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGxldCBsYXN0SW5kZXggPSBjb29raWUuaW5kZXhPZignOycsIGZpcnN0SW5kZXgpO1xuXG4gICAgICAgICAgICBpZiAobGFzdEluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGNvb2tpZS5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcoZmlyc3RJbmRleCArIGNvb2tpZUtleS5sZW5ndGgsIGxhc3RJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXQobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBDb29raWVPcHRpb25zID0geyBzZWN1cmU6IHRydWUgfSkge1xuICAgICAgICBsZXQgY29va2llVGV4dCA9IGAke2VuY29kZVVSSUNvbXBvbmVudChuYW1lKX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG5cbiAgICAgICAgY29uc3QgeyBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoZXhwaXJlcykge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBleHBpcmVzPSR7ZXhwaXJlcy50b1VUQ1N0cmluZygpfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgLy8gaW5mbzogZGVmYXVsdCBjb29raWUgZXhwaXJhdGlvbiB0aW1lIGFmdGVyIHNldHVwXG4gICAgICAgICAgICBjb25zdCBtaW51dGVzID0gNjA7XG5cbiAgICAgICAgICAgIG5vdy5zZXRUaW1lKG5vdy5nZXRUaW1lKCkgKyBtaW51dGVzICogNjAgKiAxMDAwKTtcblxuICAgICAgICAgICAgY29va2llVGV4dCArPSBgOyBleHBpcmVzPSR7bm93LnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IHBhdGg9JHtwYXRofWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGRvbWFpbj0ke2RvbWFpbn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlY3VyZSkge1xuICAgICAgICAgICAgY29va2llVGV4dCArPSAnOyBzZWN1cmUnO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llVGV4dDtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmVtb3ZlKG5hbWU6IHN0cmluZywgb3B0aW9ucz86IENvb2tpZU9wdGlvbnMpIHtcbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXQobmFtZSwgJycsIHsgZXhwaXJlczogbmV3IERhdGUoMCksIC4uLm9wdGlvbnMgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNFcXVhbCwgb21pdCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQWRkcmVzcyxcbiAgICBDYXJkSW5zdHJ1bWVudCxcbiAgICBDdXN0b21lckFkZHJlc3MsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBDb29raWVTdG9yYWdlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdG9yYWdlJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxGYXN0bGFuZSxcbiAgICBQYXlQYWxGYXN0bGFuZUFkZHJlc3MsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgIFBheVBhbEhvc3RXaW5kb3csXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyB7XG4gICAgcHJpdmF0ZSB3aW5kb3c6IFBheVBhbEhvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICBwYXlwYWxGYXN0bGFuZVNkazogUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgICAgIGlzVGVzdE1vZGVFbmFibGVkOiBib29sZWFuLFxuICAgICAgICBzdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lPiB7XG4gICAgICAgIGlmIChpc1Rlc3RNb2RlRW5hYmxlZCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYXN0bGFuZUVudicsICdzYW5kYm94Jyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F4b0VudicsICdzYW5kYm94Jyk7IC8vIFRPRE86IHJlbW92ZSBpZiB0aGlzIGtleSBkb2VzIG5vdCB1c2Ugb24gUGF5UGFsIHNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSB7XG4gICAgICAgICAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5OiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSA9IGF3YWl0IHBheXBhbEZhc3RsYW5lU2RrLkZhc3RsYW5lKHtcbiAgICAgICAgICAgICAgICBzdHlsZXM6IHN0eWxlcyB8fCBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU7XG4gICAgfVxuXG4gICAgZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk6IFBheVBhbEZhc3RsYW5lIHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZXRlY3RzIHRoZSBjdXN0b21lciB0byBQYXlQYWwgRmFzdGxhbmUgcmVsYXRpb24gYW5kXG4gICAgICogcmV0dXJucyBjdXN0b21lckNvbnRleHRJZCB0byB1c2UgaXQgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBsb29rdXBDdXN0b21lck9yVGhyb3coZW1haWw6IHN0cmluZyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBwYXlwYWxGYXN0bGFuZS5pZGVudGl0eS5sb29rdXBDdXN0b21lckJ5RW1haWwoZW1haWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVHJpZ2dlcnMgYXV0aGVudGljYXRpb24gZmxvdyAoc2hvd3MgT1RQIHBvcHVwKSBpZiB0aGUgY3VzdG9tZXIgcmVjb2duaXNlZCBhcyBQYXlQYWwgRmFzdGxhbmUgdXNlclxuICAgICAqIGFuZCByZXR1cm5zIFBheVBhbCBGYXN0bGFuZSBQcm9maWxlIGRhdGEgdG8gdXNlIGl0IGluIEJDIGNoZWNrb3V0XG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyB0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIGlmICghY3VzdG9tZXJDb250ZXh0SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4gcGF5cGFsRmFzdGxhbmUuaWRlbnRpdHkudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhjdXN0b21lckNvbnRleHRJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAndXBkYXRlU3RvcmFnZVNlc3Npb25JZCcgbWV0aG9kIGlzIHVzZWQgdG86XG4gICAgICogLSBzZXQgc2Vzc2lvbiBpZCBhZnRlciB1c2VyIHdhcyBhdXRoZW50aWNhdGVkIChvciB1bnJlY29nbmlzZWQpIHRvIHRyaWdnZXIgYXV0aGVudGljYXRpb24gYWZ0ZXIgcGFnZSByZWZyZXNoXG4gICAgICpcbiAgICAgKiBGbG93IGluZm86XG4gICAgICogSWYgdXNlciB1bnJlY29nbmlzZWQgdGhlbiB0aGUgbG9va3VwIG1ldGhvZCB3aWxsIGJlIHdvcmtpbmcgYnV0IHRoZSBPVFAgd2lsbCBub3QgYmUgc2hvd25cbiAgICAgKiBJZiB1c2VyIHJlY29nbmlzZWQgYW5kIG5vdCBjYW5jZWxlZCB0aGVuIHRoZSBsb29rdXAgbWV0aG9kIHdpbGwgYmUgd29ya2luZyBhbmQgdGhlIE9UUCB3aWxsIGJlIHNob3duIG9ubHkgaWYgbmVlZGVkXG4gICAgICogSWYgdXNlciBjYW5jZWxzIHRoZSBPUFQgdGhlbiBPVFAgd2lsbCBub3QgYmUgdHJpZ2dlcmVkIGFmdGVyIHBhZ2UgcmVmcmVzaFxuICAgICAqXG4gICAgICovXG4gICAgdXBkYXRlU3RvcmFnZVNlc3Npb25JZChzZXNzaW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoKTtcblxuICAgICAgICBleHBpcmVzLnNldERhdGUoZXhwaXJlcy5nZXREYXRlKCkgKyAxNCk7IC8vIDIgd2Vla3MgZXhwaXJ5XG5cbiAgICAgICAgY29uc3QgY29va2llc09wdGlvbiA9IHtcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcsIHNlc3Npb25JZCwgY29va2llc09wdGlvbik7XG4gICAgfVxuXG4gICAgcmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpOiB2b2lkIHtcbiAgICAgICAgQ29va2llU3RvcmFnZS5yZW1vdmUoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpO1xuICAgIH1cblxuICAgIGdldFN0b3JhZ2VTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIENvb2tpZVN0b3JhZ2UuZ2V0KCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnKSB8fCAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICdtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhJyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yOlxuICAgICAqIC0gbWFwcGluZyBQYXlQYWwgRmFzdGxhbmUgUHJvZmlsZSBkYXRhIHRvIEJDIGRhdGEgc2hhcGVcbiAgICAgKiAtIHJldHVybmluZyBtYXBwZWQgZGF0YSB0byB1c2UgZm9yIHVwZGF0aW5nIFBheW1lbnRQcm92aWRlckN1c3RvbWVyIHN0YXRlIGFuZFxuICAgICAqIHVwZGF0ZSBzaGlwcGluZyBhbmQgYmlsbGluZyBhZGRyZXNzZXNcbiAgICAgKlxuICAgICAqL1xuICAgIG1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0OiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICk6IFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0IHtcbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBwcm9maWxlRGF0YSB9ID0gYXV0aGVudGljYXRpb25SZXN1bHQ7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQmlsbGluZ0FkZHJlc3MgPSBwcm9maWxlRGF0YT8uY2FyZD8ucGF5bWVudFNvdXJjZT8uY2FyZD8uYmlsbGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFNoaXBwaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5zaGlwcGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFByb2ZpbGVOYW1lID0gcHJvZmlsZURhdGE/Lm5hbWU7XG4gICAgICAgIGNvbnN0IHBheXBhbEluc3RydW1lbnQgPSBwcm9maWxlRGF0YT8uY2FyZDtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBwYXlwYWxTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLm5hbWUsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyAmJiBwYXlwYWxQcm9maWxlTmFtZVxuICAgICAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxQcm9maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3M/LnBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHBheXBhbEluc3RydW1lbnRcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChtZXRob2RJZCwgcGF5cGFsSW5zdHJ1bWVudClcbiAgICAgICAgICAgIDogW107XG5cbiAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5maWx0ZXJBZGRyZXNzZXMoW3NoaXBwaW5nQWRkcmVzcywgYmlsbGluZ0FkZHJlc3NdKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZTpcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlIHx8IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5VTlJFQ09HTklaRUQsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBpbnN0cnVtZW50OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgICk6IENhcmRJbnN0cnVtZW50W10ge1xuICAgICAgICBjb25zdCB7IGlkLCBwYXltZW50U291cmNlIH0gPSBpbnN0cnVtZW50O1xuICAgICAgICBjb25zdCB7IGJyYW5kLCBleHBpcnksIGxhc3REaWdpdHMgfSA9IHBheW1lbnRTb3VyY2UuY2FyZDtcblxuICAgICAgICBjb25zdCBbZXhwaXJ5WWVhciwgZXhwaXJ5TW9udGhdID0gZXhwaXJ5LnNwbGl0KCctJyk7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbjogaWQsXG4gICAgICAgICAgICAgICAgYnJhbmQsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgaWluOiAnJyxcbiAgICAgICAgICAgICAgICBsYXN0NDogbGFzdERpZ2l0cyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlOiBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLlBBTixcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2FyZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIG1hcEJjVG9QYXlQYWxBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogUGF5UGFsRmFzdGxhbmVBZGRyZXNzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBhbnk6IGFkZHJlc3M/LmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTE6IGFkZHJlc3M/LmFkZHJlc3MxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGFkbWluQXJlYTE6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMjogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3M/LnBvc3RhbENvZGUgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0FkZHJlc3MoXG4gICAgICAgIGFkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICAgICAgcHJvZmlsZU5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgICAgIHBob25lPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgICAgIGN1c3RvbUZpZWxkcz86IEN1c3RvbWVyQWRkcmVzc1snY3VzdG9tRmllbGRzJ10sXG4gICAgKTogQ3VzdG9tZXJBZGRyZXNzIHtcbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgbGFzdE5hbWVdID0gcHJvZmlsZU5hbWUuZnVsbE5hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBjb25zdCBwaG9uZURhdGEgPSB7XG4gICAgICAgICAgICBuYXRpb25hbE51bWJlcjogcGhvbmU/Lm5hdGlvbmFsTnVtYmVyIHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBob25lPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICB0eXBlOiAncGF5cGFsLWFkZHJlc3MnLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwcm9maWxlTmFtZS5maXJzdE5hbWUgfHwgZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHByb2ZpbGVOYW1lLmxhc3ROYW1lIHx8IGxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcy5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc0xpbmUxLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3MuYWRkcmVzc0xpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbkFyZWEyLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBjb3VudHJ5OiBhZGRyZXNzLmNvdW50cnlDb2RlIHx8ICcnLCAvLyBUT0RPOiB1cGRhdGUgY291bnRyeSB3aXRoIHZhbGlkIG5hbWluZ1xuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBwaG9uZTogcGhvbmVEYXRhLmNvdW50cnlDb2RlICsgcGhvbmVEYXRhLm5hdGlvbmFsTnVtYmVyLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBjdXN0b21GaWVsZHMgfHwgW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3IgZmlsdGVyaW5nIFBheVBhbCBGYXN0bGFuZSBhZGRyZXNzZXMgaWYgdGhleSBhcmUgdGhlIHNhbWVcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBhZGRyZXNzZXMgdG8gdXNlIHRoZW0gZm9yIHNoaXBwaW5nIGFuZC9vciBiaWxsaW5nIGFkZHJlc3Mgc2VsZWN0aW9uc1xuICAgICAqIHNvIHRoZSBjdXN0b21lciB3aWxsIGJlIGFibGUgdG8gdXNlIGFkZHJlc3NlcyBmcm9tIFBheVBhbCBGYXN0bGFuZSBpbiBjaGVja291dCBmbG93XG4gICAgICpcbiAgICAgKi9cbiAgICBmaWx0ZXJBZGRyZXNzZXMoYWRkcmVzc2VzOiBBcnJheTxDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQ+KTogQ3VzdG9tZXJBZGRyZXNzW10ge1xuICAgICAgICByZXR1cm4gYWRkcmVzc2VzLnJlZHVjZShcbiAgICAgICAgICAgIChjdXN0b21lckFkZHJlc3NlczogQ3VzdG9tZXJBZGRyZXNzW10sIGN1cnJlbnRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRBZGRyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lckFkZHJlc3NlcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lQWRkcmVzc0luVGhlQXJyYXkgPSBjdXN0b21lckFkZHJlc3Nlcy5zb21lKChjdXN0b21lckFkZHJlc3MpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFcXVhbEFkZHJlc3NlcyhjdXN0b21lckFkZHJlc3MsIGN1cnJlbnRBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNhbWVBZGRyZXNzSW5UaGVBcnJheVxuICAgICAgICAgICAgICAgICAgICA/IGN1c3RvbWVyQWRkcmVzc2VzXG4gICAgICAgICAgICAgICAgICAgIDogWy4uLmN1c3RvbWVyQWRkcmVzc2VzLCBjdXJyZW50QWRkcmVzc107XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW10sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0VxdWFsQWRkcmVzc2VzKFxuICAgICAgICBmaXJzdEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyxcbiAgICAgICAgc2Vjb25kQWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNFcXVhbCh0aGlzLm5vcm1hbGl6ZUFkZHJlc3MoZmlyc3RBZGRyZXNzKSwgdGhpcy5ub3JtYWxpemVBZGRyZXNzKHNlY29uZEFkZHJlc3MpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZUFkZHJlc3MoYWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiBvbWl0KGFkZHJlc3MsIFsnaWQnLCAncGhvbmUnXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscygpOiBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyB7XG4gICAgcmV0dXJuIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscygpO1xufVxuIiwiaW1wb3J0IHsgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgRmFzdGxhbmVTdHlsZXNTZXR0aW5ncywgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24gfSBmcm9tICcuLi9pbmRleCc7XG5cbmZ1bmN0aW9uIGlzSW52YWxpZFN0eWxlT3B0aW9uKHN0eWxlT3B0aW9uOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzdHlsZU9wdGlvbiAhPT0gJ3N0cmluZyc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pIHtcbiAgICBpZiAoIXVpU3R5bGVzICYmICFzdHlsZVNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuVXBGYXN0bGFuZVN0eWxlcyhtZXJnZUZhc3RsYW5lU3R5bGVzKHN0eWxlU2V0dGluZ3MsIHVpU3R5bGVzKSk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlRmFzdGxhbmVTdHlsZXMoXG4gICAgc3R5bGVTZXR0aW5ncz86IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsXG4gICAgdWlTdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbik6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LnJvb3Q/LmJhY2tncm91bmRDb2xvclByaW1hcnksXG4gICAgICAgICAgICBlcnJvckNvbG9yOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3IgfHwgdWlTdHlsZXM/LnJvb3Q/LmVycm9yQ29sb3IsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRGYW1pbHksXG4gICAgICAgICAgICBmb250U2l6ZUJhc2U6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZSB8fCB1aVN0eWxlcz8ucm9vdD8uZm9udFNpemVCYXNlLFxuICAgICAgICAgICAgcGFkZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nIHx8IHVpU3R5bGVzPy5yb290Py5wYWRkaW5nLFxuICAgICAgICAgICAgcHJpbWFyeUNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUHJpbWFyeUNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5wcmltYXJ5Q29sb3IsXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3IgfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJDb2xvcixcbiAgICAgICAgICAgIGZvY3VzQm9yZGVyQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LmlucHV0Py5mb2N1c0JvcmRlckNvbG9yLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgYm9yZGVyV2lkdGg6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGggfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJXaWR0aCxcbiAgICAgICAgICAgIHRleHRDb2xvckJhc2U6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSB8fCB1aVN0eWxlcz8uaW5wdXQ/LnRleHRDb2xvckJhc2UsXG4gICAgICAgIH0sXG4gICAgICAgIHRvZ2dsZToge1xuICAgICAgICAgICAgY29sb3JQcmltYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkgfHwgdWlTdHlsZXM/LnRvZ2dsZT8uY29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgY29sb3JTZWNvbmRhcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5IHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRvZ2dsZT8uY29sb3JTZWNvbmRhcnksXG4gICAgICAgIH0sXG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3IgfHwgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uYm9keT8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FwdGlvbjoge1xuICAgICAgICAgICAgICAgIGNvbG9yOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uY29sb3IsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5jYXB0aW9uPy5mb250U2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGJyYW5kaW5nOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MgfHwgdWlTdHlsZXM/LmJyYW5kaW5nLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNsZWFuVXBGYXN0bGFuZVN0eWxlcyhzdHlsZXM6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uKSB7XG4gICAgY29uc3QgZmFzdGxhbmVTdHlsZXM6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uID0ge307XG5cbiAgICBjb25zdCByb290ID0gb21pdEJ5KHN0eWxlcy5yb290LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgaW5wdXQgPSBvbWl0Qnkoc3R5bGVzLmlucHV0LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdG9nZ2xlID0gb21pdEJ5KHN0eWxlcy50b2dnbGUsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Qm9keSA9IG9taXRCeShzdHlsZXMudGV4dD8uYm9keSwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRleHRDYXB0aW9uID0gb21pdEJ5KHN0eWxlcy50ZXh0Py5jYXB0aW9uLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgYnJhbmRpbmcgPSBzdHlsZXMuYnJhbmRpbmc7XG5cbiAgICBpZiAoT2JqZWN0LmtleXMocm9vdCkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnJvb3QgPSByb290O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dCkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmlucHV0ID0gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRvZ2dsZSkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dEJvZHkpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge307XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQuYm9keSA9IHRleHRCb2R5O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0ZXh0Q2FwdGlvbikubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQgPSB7XG4gICAgICAgICAgICAuLi5mYXN0bGFuZVN0eWxlcy50ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmNhcHRpb24gPSB0ZXh0Q2FwdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoYnJhbmRpbmcpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMuYnJhbmRpbmcgPSBicmFuZGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gZmFzdGxhbmVTdHlsZXM7XG59XG4iLCJpbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgZ2V0RmFzdGxhbmVTdHlsZXMsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgUGF5UGFsU2RrSGVscGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1NkazogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzOiBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzVGVzdE1vZGVFbmFibGVkID0gISFwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgICAgIHBheXBhbEZhc3RsYW5lU2RrLFxuICAgICAgICAgICAgICAgIGlzVGVzdE1vZGVFbmFibGVkLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RmFzdGxhbmVTdHlsZXMobWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KFxuICAgICAgICBvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQsIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2ssIG1ldGhvZElkIH0gPVxuICAgICAgICAgICAgb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFja1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBhbmQgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lck9yVGhyb3coKTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIuaXNHdWVzdCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYWRkIGxvZ2dlciB0byBiZSBhYmxlIHRvIGRlYnVnIGlzc3VlcyBpZiB0aGVyZSBhbnlcbiAgICAgICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXV0aGVudGljYXRpb24gZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubG9va3VwQ3VzdG9tZXJPclRocm93KGN1c3RvbWVyRW1haWwpO1xuXG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVzdWx0ID1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgICAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQuYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUobWV0aG9kSWQsIGF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcblxuICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoY2FydElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0OiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIGFkZHJlc3NlcywgYmlsbGluZ0FkZHJlc3MsIHNoaXBwaW5nQWRkcmVzcywgaW5zdHJ1bWVudHMgfSA9XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgaW5zdHJ1bWVudHMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaGlwcGluZ0FkZHJlc3MgJiYgY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkU3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKFxuICAgICAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHVwZGF0ZWRTdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IHsgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQgfSA9XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgICAgICBjb25zdCBjb25zaWdubWVudHMgPSB1cGRhdGVkU3RhdGUuZ2V0Q29uc2lnbm1lbnRzKCkgfHwgW107XG4gICAgICAgICAgICBjb25zdCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgPSBjb25zaWdubWVudHNbMF0/LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0U2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnNbMF07XG4gICAgICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gfHwgZmlyc3RTaGlwcGluZ09wdGlvbikgJiZcbiAgICAgICAgICAgICAgICBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb25JZCA9IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24/LmlkIHx8IGZpcnN0U2hpcHBpbmdPcHRpb24uaWQ7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZhc3RsYW5lIHN0eWxpbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmU6XG4gICAgICAgICAgICB8IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnNcbiAgICAgICAgICAgIHwgdW5kZWZpbmVkLFxuICAgICk6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBmYXN0bGFuZVN0eWxlcywgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICByZXR1cm4gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgICAgICBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgPyBmYXN0bGFuZVN0eWxlcyA6IHt9LFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUnIH0sIC8vIHRoaXMgbWV0aG9kIGlkIHdpbGwgYmUgcHJvdmlkZWQgZm9yIHVzZXJzIGZyb20gdGVzdCBncm91cFxuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcycgfSwgLy8gdGhpcyBtZXRob2QgaWQgd2lsbCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgZnJvbSBjb250cm9sIGdyb3VwXG5dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIG9uRXJyb3IgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIub25DbGljayAmJlxuICAgICAgICAgICAgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLm9uQ2xpY2sgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIub25DbGlja1wiIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vbkVycm9yID0gYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIub25FcnJvciB8fCBub29wO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBCaWdDb21tZXJjZVBheW1lbnRzIFBheUxhdGVyXTogYnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25JbihjcmVkZW50aWFsczogQ3VzdG9tZXJDcmVkZW50aWFscywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduSW5DdXN0b21lcihjcmVkZW50aWFscywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlcjogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ29tcGxldGUsIG9uQ2xpY2sgfSA9IGJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlcjtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICAgICAgLi4uKG9uQ2xpY2sgJiYgeyBvbkNsaWNrOiAoKSA9PiBvbkNsaWNrKCkgfSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUiwgcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXJ0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGV4Y2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLm9uQ2xpY2sgJiZcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5vbkNsaWNrICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXlwYWxTZGsgfHwgIXBheXBhbFNkay5CdXR0b25zIHx8IHR5cGVvZiBwYXlwYWxTZGsuQnV0dG9ucyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXltZW50cyBWZW5tb106IEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbzogQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uQ2xpY2sgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8nLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8nIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcyxcbiAgICBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzLFxufSBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yLXN0eWxlcyc7XG5cbmNvbnN0IERFRkFVTFRfU1RZTEVTOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzID0ge1xuICAgIHNpemU6IDcwLFxuICAgIGNvbG9yOiAnI2Q5ZDlkOScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG59O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05UQUlORVJfU1RZTEVTID0ge1xuICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuXG5jb25zdCBST1RBVElPTl9BTklNQVRJT04gPSAnZW1iZWRkZWQtY2hlY2tvdXQtbG9hZGluZy1pbmRpY2F0b3Itcm90YXRpb24nO1xuXG5pbnRlcmZhY2UgTG9hZGluZ0luZGljYXRvck9wdGlvbnMge1xuICAgIHN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgY29udGFpbmVyU3R5bGVzPzogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZ0luZGljYXRvciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaW5kaWNhdG9yOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHN0eWxlczogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBwcml2YXRlIGNvbnRhaW5lclN0eWxlczogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucykge1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHsgLi4uREVGQVVMVF9TVFlMRVMsIC4uLihvcHRpb25zICYmIG9wdGlvbnMuc3R5bGVzKSB9O1xuICAgICAgICB0aGlzLmNvbnRhaW5lclN0eWxlcyA9IHsgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5jb250YWluZXJTdHlsZXMpIH07XG5cbiAgICAgICAgdGhpcy5kZWZpbmVBbmltYXRpb24oKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuYnVpbGRDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3IgPSB0aGlzLmJ1aWxkSW5kaWNhdG9yKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbmRpY2F0b3IpO1xuICAgIH1cblxuICAgIHNob3cocGFyZW50SWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHBhcmVudElkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCk7XG5cbiAgICAgICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGF0dGFjaCB0aGUgbG9hZGluZyBpbmRpY2F0b3IgYmVjYXVzZSB0aGUgcGFyZW50IElEIGlzIG5vdCB2YWxpZC4nLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cblxuICAgIGhpZGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbmRsZVRyYW5zaXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm90dG9tID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAyNTBtcyBlYXNlLW91dCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgICAgIHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGUoY29udGFpbmVyLCB0aGlzLmNvbnRhaW5lclN0eWxlcyk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkSW5kaWNhdG9yKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyUmFkaXVzID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXIgPSAnc29saWQgMXB4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlckNvbG9yID0gYCR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn1gO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubWFyZ2luID0gJzAgYXV0byc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50b3AgPSAnNTAlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5hbmltYXRpb24gPSBgJHtST1RBVElPTl9BTklNQVRJT059IDUwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjY5LCAwLjMxLCAwLjU2LCAwLjgzKWA7XG5cbiAgICAgICAgcmV0dXJuIGluZGljYXRvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN0eWxlQXR0cmlidXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSk6IHZvaWQge1xuICAgICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShrLCBhdHRyc1trXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVmaW5lQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBkZWZpbmUgQ1NTIGFuaW1hdGlvbiwgd2UgbmVlZCB0byBpbnNlcnQgYSBzdHlsZXNoZWV0IGludG8gdGhlIGhvc3QgZnJhbWUuXG4gICAgICAgIC8vIFdlIG9ubHkgaGF2ZSB0byBkbyBpdCBvbmNlLlxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUk9UQVRJT05fQU5JTUFUSU9OKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgICAgIHN0eWxlLmlkID0gUk9UQVRJT05fQU5JTUFUSU9OO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIGRvY3VtZW50LmhlYWQ/LmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICBpZiAoc3R5bGUuc2hlZXQgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHByb3ZpZGUgdGhlIDJuZCBwYXJhbWV0ZXIgZm9yIElFMTEsIGV2ZW4gdGhvdWdoIGl0IGlzXG4gICAgICAgICAgICAvLyAwIGJ5IGRlZmF1bHQgZm9yIGFsbCBvdGhlciBicm93c2Vycy5cbiAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgJHtST1RBVElPTl9BTklNQVRJT059IHtcbiAgICAgICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyA9IHtcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsIDAsIDAsIDAuNCknLFxuICAgICd6LWluZGV4JzogJzEwMDAnLFxufTtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmZ1bmN0aW9uIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoe1xuICAgIHN0eWxlcyxcbn06IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSk6IE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb25zdCBtZXNzYWdlc1N0eWxlczogTWVzc2FnZXNTdHlsZU9wdGlvbnMgPSB7fTtcblxuICAgIGlmIChzdHlsZXMuY29sb3IpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMuY29sb3IgPSBzdHlsZXMuY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlcy5sYXlvdXQpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubGF5b3V0ID0gc3R5bGVzLmxheW91dDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzWydsb2dvLXR5cGUnXSB8fCBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXSkge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvID0ge307XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28udHlwZSA9IHN0eWxlc1snbG9nby10eXBlJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28ucG9zaXRpb24gPSBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdHlsZXMucmF0aW8pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMucmF0aW8gPSBzdHlsZXMucmF0aW87XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1sndGV4dC1jb2xvciddIHx8IHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dCA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dC5jb2xvciA9IHN0eWxlc1sndGV4dC1jb2xvciddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuc2l6ZSA9ICtzdHlsZXNbJ3RleHQtc2l6ZSddO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lc3NhZ2VzU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnO1xuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gc3VjY2Vzc2Z1bGx5IHN1Ym1pdCBhIHNlcnZlciByZXF1ZXN0XG4gKiB1c2luZyBhIHBheW1lbnQgbWV0aG9kIGJlY2F1c2UgdGhlIG1ldGhvZCBoYXMgaW52YWxpZCBjb25maWd1cmF0aW9uIG9yIGlzIGluXG4gKiBhbiBpbnZhbGlkIHN0YXRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yPFQgPSBhbnk+IGV4dGVuZHMgUmVxdWVzdEVycm9yPFQ+IHtcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZT86IFJlc3BvbnNlPFQ+KSB7XG4gICAgICAgIHN1cGVyKHJlc3BvbnNlLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlcmUgaXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kSW52YWxpZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEhvc3RlZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBpbnN0cnVtZW50ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnN0cnVtZW50ICE9PSBudWxsICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2F2ZUluc3RydW1lbnQgPT09ICdib29sZWFuJykgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICdib29sZWFuJylcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgQmFzZUluc3RydW1lbnQge1xuICAgIGJpZ3BheVRva2VuOiBzdHJpbmc7XG4gICAgZGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW47XG4gICAgcHJvdmlkZXI6IHN0cmluZztcbiAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudDogdW5rbm93bik6IGluc3RydW1lbnQgaXMgQmFzZUluc3RydW1lbnQge1xuICAgIGlmICh0eXBlb2YgaW5zdHJ1bWVudCAhPT0gJ29iamVjdCcgfHwgaW5zdHJ1bWVudCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ2JpZ3BheVRva2VuJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdkZWZhdWx0SW5zdHJ1bWVudCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAncHJvdmlkZXInIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3RydXN0ZWRTaGlwcGluZ0FkZHJlc3MnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ21ldGhvZCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHlwZScgaW4gaW5zdHJ1bWVudFxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcsXG4gICAgaXNCaWdDb21tZXJjZVBheW1lbnRzUHJvdmlkZXJFcnJvcixcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcbmltcG9ydCB7IGlzQmFzZUluc3RydW1lbnQgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3V0aWxpdHknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIHByaXZhdGUgYmlnY29tbWVyY2VfcGF5bWVudHM/OiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka0hlbHBlcjogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzID0gYmlnY29tbWVyY2VfcGF5bWVudHM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgYmFubmVyQ29udGFpbmVySWQgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG9yZGVySWQsXG4gICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdLFxuICAgICAgICAgICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUsXG4gICAgICAgIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBpZiAoYmFubmVyQ29udGFpbmVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiYW5uZXJDb250YWluZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9IHBheXBhbEJOUExDb25maWd1cmF0aW9uPy5maW5kKFxuICAgICAgICAgICAgICAgICh7IGlkIH0pID0+IGlkID09PSAnY2hlY2tvdXQnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIHx8ICFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wYXlwYWxTZGtIZWxwZXIuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIXBheXBhbE1lc3NhZ2VzIHx8IHR5cGVvZiBwYXlwYWxNZXNzYWdlcz8uTWVzc2FnZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnW0JDIFBheVBhbENvbW1lcmNlIFBheUxhdGVyXTogYmFubmVyIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBjb250YWluZXI/LnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChiaWdjb21tZXJjZV9wYXltZW50cy5vbkluaXQgJiYgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uSW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHMub25Jbml0KCgpID0+IHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHMuc2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50cy5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICh0aGlzLmlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShwYXltZW50RGF0YSkgJiYgIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gYXdhaXQgdGhpcy5jcmVhdGVPcmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKVxuICAgICAgICAgICAgPyB0aGlzLnByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgOiB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgdGhpcy5vcmRlcklkLCBwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsocGF5bWVudC5tZXRob2RJZCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5iaWdjb21tZXJjZV9wYXltZW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihwYXltZW50Lm1ldGhvZElkLCB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IEVycm9yKCdJTlNUUlVNRU5UX0RFQ0xJTkVEJyksIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3JkZXJJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50LFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkQ29uZmlybUluc3RydW1lbnQgPSAhdGhpcy5pc1RydXN0ZWRWYXVsdGluZ0Zsb3cocGF5bWVudERhdGEpO1xuXG4gICAgICAgIGlmIChzaG91bGRDb25maXJtSW5zdHJ1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudDogc2hvdWxkQ29uZmlybUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50czogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHM7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5jcmVhdGVPcmRlcigpLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCBvblZhbGlkYXRlPy4ob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtPy4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgb25FcnJvcjogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZmllbGRzVmFsdWVzID0gdGhpcy5nZXRGaWVsZHNWYWx1ZXMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzY2hlY2tvdXQnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50OiBmaWVsZHNWYWx1ZXM/LnNob3VsZFNhdmVJbnN0cnVtZW50IHx8IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFZhdWx0aW5nIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGdldEZpZWxkc1ZhbHVlcygpOiBIb3N0ZWRJbnN0cnVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgY29uc3QgeyBnZXRGaWVsZHNWYWx1ZXMgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMgfHwge307XG5cbiAgICAgICAgcmV0dXJuIHR5cGVvZiBnZXRGaWVsZHNWYWx1ZXMgPT09ICdmdW5jdGlvbicgPyBnZXRGaWVsZHNWYWx1ZXMoKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhwYXltZW50RGF0YT86IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gc3RhdGUuZ2V0SW5zdHJ1bWVudHMoKTtcblxuICAgICAgICAgICAgY29uc3QgZmluZEluc3RydW1lbnQgPSBpbnN0cnVtZW50cz8uZmluZChcbiAgICAgICAgICAgICAgICAoaW5zdHJ1bWVudCkgPT5cbiAgICAgICAgICAgICAgICAgICAgaXNCYXNlSW5zdHJ1bWVudChpbnN0cnVtZW50KSAmJlxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50LmJpZ3BheVRva2VuID09PSBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyA9IGlzQmFzZUluc3RydW1lbnQoZmluZEluc3RydW1lbnQpXG4gICAgICAgICAgICAgICAgPyBmaW5kSW5zdHJ1bWVudC50cnVzdGVkU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgcmV0dXJuICEhdHJ1c3RlZFNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEd1YXJkc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEoXG4gICAgICAgIHBheW1lbnREYXRhPzogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgICk6IHBheW1lbnREYXRhIGlzIFZhdWx0ZWRJbnN0cnVtZW50ICYgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhIXBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXIgUGF5IExhdGVyIE1lc3NhZ2VzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgYmFubmVyQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAncGF5bWVudCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpLnJlbmRlcihgIyR7YmFubmVyQ29udGFpbmVySWR9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1Byb3ZpZGVyRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcbiAgICAgICAgaWYgKGlzQmlnQ29tbWVyY2VQYXltZW50c1Byb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxQcm92aWRlckVycm9yID0gZXJyb3I/LmVycm9ycz8uZmlsdGVyKChlKSA9PiBlLnByb3ZpZGVyX2Vycm9yKSB8fCBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHBheXBhbFByb3ZpZGVyRXJyb3JbMF0/LnByb3ZpZGVyX2Vycm9yPy5jb2RlID09PSAnSU5TVFJVTUVOVF9ERUNMSU5FRCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGVycm9ycz86IEVycm9yRWxlbWVudFtdO1xuICAgIHN0YXR1cz86IHN0cmluZztcbiAgICB0aHJlZV9kc19yZXN1bHQ/OiB7XG4gICAgICAgIGFjc191cmw6IHVua25vd247XG4gICAgICAgIHBheWVyX2F1dGhfcmVxdWVzdDogdW5rbm93bjtcbiAgICAgICAgbWVyY2hhbnRfZGF0YTogdW5rbm93bjtcbiAgICAgICAgY2FsbGJhY2tfdXJsOiB1bmtub3duO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JFbGVtZW50IHtcbiAgICBjb2RlOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHByb3ZpZGVyX2Vycm9yPzoge1xuICAgICAgICBjb2RlOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNCaWdDb21tZXJjZVBheW1lbnRzUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFByb3ZpZGVyRXJyb3Ige1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdlcnJvcnMnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cyc7XG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50cycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vLyBUT0RPOiB1cGRhdGUgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHdpdGggUGF5UGFsRmFzdGxhbmVDdXN0b21lclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKFxuICAgIGN1c3RvbWVyPzogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBQYXlQYWxDb25uZWN0Q3VzdG9tZXIge1xuICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdhdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lciB8fCAnYWRkcmVzc2VzJyBpbiBjdXN0b21lciB8fCAnaW5zdHJ1bWVudHMnIGluIGN1c3RvbWVyXG4gICAgKTtcbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZXMge1xuICAgIFtmZWF0dXJlTmFtZTogc3RyaW5nXTogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNFeHBlcmltZW50RW5hYmxlZChcbiAgICBmZWF0dXJlczogRmVhdHVyZXMsXG4gICAgZXhwZXJpbWVudE5hbWU6IHN0cmluZyxcbiAgICBmYWxsYmFja1ZhbHVlID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmZWF0dXJlc1tleHBlcmltZW50TmFtZV0gPz8gZmFsbGJhY2tWYWx1ZTtcbn1cbiIsImltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBnZXRGYXN0bGFuZVN0eWxlcyxcbiAgICBpc0JpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IsXG4gICAgaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzLFxuICAgIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgUGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZCxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG4gICAgVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IExpYWJpbGl0eVNoaWZ0RW51bSB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgcGF5cGFsQ29tcG9uZW50TWV0aG9kcz86IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHM7XG4gICAgcHJpdmF0ZSB0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwcml2YXRlIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lPzogQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgbWV0aG9kSWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcjogQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1NkazogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzOiBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERlZmF1bHQgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1ldGhvZElkID0gbWV0aG9kSWQ7XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkluaXQgfHxcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkluaXQgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25Jbml0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uQ2hhbmdlIHx8XG4gICAgICAgICAgICB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2UgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2VcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LnRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1Nkay5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU3R5bGluZyA9IGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZFxuICAgICAgICAgICAgPyBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmZhc3RsYW5lU3R5bGVzXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IGZhc3RsYW5lU3R5bGVzID0gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVN0eWxpbmcsXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZT8uc3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICEhaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGZhc3RsYW5lU3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCgpO1xuXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uSW5pdCgoY29udGFpbmVyOiBzdHJpbmcpID0+XG4gICAgICAgICAgICB0aGlzLnJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyKSxcbiAgICAgICAgKTtcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25DaGFuZ2UoKCkgPT5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShtZXRob2RJZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhLCBtZXRob2RJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBjb25zdCBpc1ZhdWx0ZWRGbG93ID0gcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gaXNWYXVsdGVkRmxvd1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPihcbiAgICAgICAgICAgICAgICBwYXltZW50UGF5bG9hZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvcihlcnJvcikgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5yZXNwb25zZS5uYW1lID09PSAnSU5WQUxJRF9SRVFVRVNUJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZFJlcXVlc3RFcnJvciA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdwYXltZW50LmVycm9ycy5pbnZhbGlkX3JlcXVlc3RfZXJyb3InLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGludmFsaWRSZXF1ZXN0RXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgIT09ICdGYXN0bGFuZUVycm9yJykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5nZXRTdG9yYWdlU2Vzc2lvbklkKCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWN1c3RvbWVyLmlzR3Vlc3QgfHxcbiAgICAgICAgICAgIHBheXBhbEZhc3RsYW5lQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlICYmIHBheXBhbEZhc3RsYW5lU2Vzc2lvbklkID09PSBjYXJ0LmlkO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lciA9IHN0YXRlLmdldEN1c3RvbWVyKCk7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICBjb25zdCBjdXN0b21lckVtYWlsID0gY3VzdG9tZXI/LmVtYWlsIHx8IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJztcblxuICAgICAgICAgICAgY29uc3QgeyBjdXN0b21lckNvbnRleHRJZCB9ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhjdXN0b21lckVtYWlsKTtcblxuICAgICAgICAgICAgY29uc3QgYXV0aGVudGljYXRpb25SZXN1bHQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbWVyQ29udGV4dElkLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aGVudGljYXRpb25TdGF0ZSwgYWRkcmVzc2VzLCBpbnN0cnVtZW50cyB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoY2FydC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBEbyBub3QgdGhyb3cgYW55dGhpbmcgaGVyZSB0byBhdm9pZCBibG9ja2luZyBjdXN0b21lciBmcm9tIHBhc3NpbmcgY2hlY2tvdXQgZmxvd1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCaWdDb21tZXJjZVBheW1lbnRzIEZhc3RsYW5lIENhcmQgQ29tcG9uZW50IHJlbmRlcmluZyBtZXRob2RcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBob25lID0gYmlsbGluZ0FkZHJlc3MucGhvbmU7XG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBjYXJkQ29tcG9uZW50T3B0aW9uczogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGNhcmRob2xkZXJOYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IGZ1bGxOYW1lLFxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLi4uKHBob25lICYmIHtcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpbGw6IHBob25lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMgPSBhd2FpdCBwYXlwYWxGYXN0bGFuZS5GYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgICAgICBjYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQoY29udGFpbmVyPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbENvbXBvbmVudE1ldGhvZHMgPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHJlbmRlciBjYXJkIGNvbXBvbmVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF5cGFsQ29tcG9uZW50TWV0aG9kcy5yZW5kZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBQYXlsb2FkIHByZXBhcmF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHBheW1lbnREYXRhO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBpczNEU0VuYWJsZWQgPVxuICAgICAgICAgICAgdGhpcy5pc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKSAmJlxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGNvbnN0IG5vbmNlID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpbnN0cnVtZW50SWQpIDogaW5zdHJ1bWVudElkO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIobm9uY2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgZnVsbE5hbWUgPSBgJHtiaWxsaW5nQWRkcmVzcy5maXJzdE5hbWV9ICR7YmlsbGluZ0FkZHJlc3MubGFzdE5hbWV9YC50cmltKCk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50VG9rZW4gfSA9IHRoaXMuZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGlkIH0gPSBhd2FpdCBnZXRQYXltZW50VG9rZW4oe1xuICAgICAgICAgICAgbmFtZTogeyBmdWxsTmFtZSB9LFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5tYXBCY1RvUGF5UGFsQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGlzM0RTRW5hYmxlZCA9XG4gICAgICAgICAgICB0aGlzLmlzQmlnY29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSgpICYmXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQ7XG5cbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgY29uc3Qgbm9uY2UgPSBpczNEU0VuYWJsZWQgPyBhd2FpdCB0aGlzLmdldDNEU05vbmNlKGlkKSA6IGlkO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIobm9uY2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBub25jZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBpZiAodGhpcy5tZXRob2RJZCkge1xuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgIHRoaXMubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgICAgIGZhc3RsYW5lVG9rZW46IGlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAzRFNlY3VyZSBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0M0RTTm9uY2Uobm9uY2U6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlciA9IHN0YXRlLmdldE9yZGVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBjaGVja291dFVybCA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmxpbmtzLmNoZWNrb3V0TGluaztcblxuICAgICAgICBjb25zdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCA9IHRoaXMucGF5cGFsRmFzdGxhbmVTZGs/LlRocmVlRG9tYWluU2VjdXJlQ2xpZW50O1xuXG4gICAgICAgIGlmICghdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzID0ge1xuICAgICAgICAgICAgYW1vdW50OiBvcmRlci5vcmRlckFtb3VudC50b0ZpeGVkKDIpLFxuICAgICAgICAgICAgY3VycmVuY3k6IGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgdGhyZWVEU1JlcXVlc3RlZDogdGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kID09PSBURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZC5BbHdheXMsXG4gICAgICAgICAgICB0cmFuc2FjdGlvbkNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxlOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5fdXJsOiBjaGVja291dFVybCxcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsX3VybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlID0gYXdhaXQgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQuaXNFbGlnaWJsZShcbiAgICAgICAgICAgIHRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPT09IFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kLkFsd2F5cyAmJlxuICAgICAgICAgICAgIWlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlKSB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICBub25jZTogdGhyZWVEU05vbmNlLFxuICAgICAgICAgICAgfSA9IGF3YWl0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50LnNob3coKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uTm8gfHxcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLlVua25vd24gfHxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuRXJyb3JlZCB8fFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZS5DYW5jZWxsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuU3VjY2VlZGVkICYmXG4gICAgICAgICAgICAgICAgW0xpYWJpbGl0eVNoaWZ0RW51bS5ZZXMsIExpYWJpbGl0eVNoaWZ0RW51bS5Qb3NzaWJsZV0uaW5jbHVkZXMobGlhYmlsaXR5U2hpZnQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhyZWVEU05vbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5vbmNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQmlnQ29tbWVyY2VQYXltZW50cyBGYXN0bGFuZSBpbnN0cnVtZW50IGNoYW5nZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8Q2FyZEluc3RydW1lbnQgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsQXhvU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IHNlbGVjdGlvbkNoYW5nZWQsIHNlbGVjdGVkQ2FyZCB9ID0gYXdhaXQgcGF5cGFsQXhvU2RrLnByb2ZpbGUuc2hvd0NhcmRTZWxlY3RvcigpO1xuXG4gICAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVDdXN0b21lciA9IGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcilcbiAgICAgICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50ID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDYXJkLFxuICAgICAgICAgICAgICAgIClbMF07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICAgICAgLi4ucGF5cGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50czogW3NlbGVjdGVkSW5zdHJ1bWVudF0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSW5zdHJ1bWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCaWdjb21tZXJjZSBQYXltZW50cyBGYXN0bGFuZSBleHBlcmltZW50cyBoYW5kbGluZ1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcblxuICAgICAgICByZXR1cm4gaXNFeHBlcmltZW50RW5hYmxlZChmZWF0dXJlcywgJ1BST0pFQ1QtNzA4MC5iY3BfZmFzdGxhbmVfdGhyZWVfZHMnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKTogdm9pZCB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmU/Lm9uRXJyb3IgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uRXJyb3IgPT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgbWVzc2FnZTogc3RyaW5nO1xuICAgIHJlc3BvbnNlOiB7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IoXG4gICAgZXJyb3I6IHVua25vd24sXG4pOiBlcnJvciBpcyBCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgICdtZXNzYWdlJyBpbiBlcnJvciAmJlxuICAgICAgICAncmVzcG9uc2UnIGluIGVycm9yICYmXG4gICAgICAgICduYW1lJyBpbiAoZXJyb3IgYXMgQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvcikucmVzcG9uc2VcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZScgfSwgLy8gQmlnQ29tbWVyY2VQYXltZW50cyBGYXN0bGFuZSByZWxhdGVzIHRvICdiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZScgbWV0aG9kIGlkXG5dKTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgdHJ5IHRvIGNhbGwgYSBtZXRob2QgdGhhdCBpcyBvbmx5IGEgc3R1YiBhbmQgaGFzIG5vdFxuICogYmVlbiBmdWxseSBpbXBsZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnTm90IGltcGxlbWVudGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbXBsZW1lbnRlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcsXG4gICAgTWVzc2FnaW5nT3B0aW9ucyxcbiAgICBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrSGVscGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW1wbGVtZW50ZWRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM/OiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka0hlbHBlcjogUGF5UGFsU2RrSGVscGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdLCBvcmRlcklkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBiYW5uZXJDb250YWluZXJJZCwgY29udGFpbmVyIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjtcblxuICAgICAgICBpZiAoYmFubmVyQ29udGFpbmVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChiYW5uZXJDb250YWluZXJJZCkpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjcmVhdGUgYmFubmVyIHdpdGhvdXQgdmFsaWQgYmFubmVyIGNvbnRhaW5lciBJRC4nKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gJiZcbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbi5maW5kKCh7IGlkIH0pID0+IGlkID09PSAnY2hlY2tvdXQnKTtcblxuICAgICAgICAgICAgaWYgKCFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wYXlwYWxTZGtIZWxwZXIuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlwYWxNZXNzYWdlcywgYmFubmVyQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIEJpZ0NvbW1lcmNlUGF5bWVudHMgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIEJpZ0NvbW1lcmNlUGF5bWVudHMgYnV0dG9uLlxuICAgICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGNvbnRhaW5lcj8uc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucz8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI/LmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiaWdDb21tZXJjZVNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyO1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW2JpZ0NvbW1lcmNlU2RrLkZVTkRJTkcuUEFZTEFURVIsIGJpZ0NvbW1lcmNlU2RrLkZVTkRJTkcuQ1JFRElUXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMgPSBiaWdDb21tZXJjZVNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMuaXNFbGlnaWJsZSgpICYmXG4gICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSA9PT0gYmlnQ29tbWVyY2VTZGsuRlVORElORy5QQVlMQVRFUlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgIXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMuaXNFbGlnaWJsZSgpICYmXG4gICAgICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSA9PT0gYmlnQ29tbWVyY2VTZGsuRlVORElORy5DUkVESVRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgQmlnQ29tbWVyY2VQYXltZW50cyAke2Z1bmRpbmdTb3VyY2V9IGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgcmVnaW9uLiBQbGVhc2UgdXNlIEJpZ0NvbW1lcmNlUGF5bWVudHMgQ2hlY2tvdXQgaW5zdGVhZC5gLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLnJlbmRlcihjb250YWluZXIpO1xuICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvblZhbGlkYXRlICYmIHR5cGVvZiBvblZhbGlkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhd2FpdCBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIGlmIChzdWJtaXRGb3JtICYmIHR5cGVvZiBzdWJtaXRGb3JtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUmVuZGVyIFBheSBMYXRlciBNZXNzYWdlc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlczogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIGJhbm5lckNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ3BheW1lbnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgcGF5cGFsTWVzc2FnZXMuTWVzc2FnZXMocGF5cGFsTWVzc2FnZXNPcHRpb25zKS5yZW5kZXIoYCMke2Jhbm5lckNvbnRhaW5lcklkfWApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1jb25zdGFudHMnO1xuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgcmVxdWVzdCBmYWlscyB0byBjb21wbGV0ZSB3aXRoaW4gaXRzIHJlcXVpcmVkIHRpbWVmcmFtZVxuICogYmVjYXVzZSBvZiBhIG5ldHdvcmsgaXNzdWUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbWVvdXRFcnJvcjxUID0gYW55PiBleHRlbmRzIFJlcXVlc3RFcnJvcjxUPiB7XG4gICAgY29uc3RydWN0b3IocmVzcG9uc2U/OiBSZXNwb25zZTxUPikge1xuICAgICAgICBzdXBlcihyZXNwb25zZSwge1xuICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSByZXF1ZXN0IGhhcyB0aW1lZCBvdXQgb3IgYWJvcnRlZC4nLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3RpbWVvdXQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFRpbWVvdXRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEJpcnRoRGF0ZSxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAzMDAwO1xuY29uc3QgTUFYX1BPTExJTkdfVElNRSA9IDMwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgZ3VpZD86IHN0cmluZztcbiAgICBwcml2YXRlIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXk/OiBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5nYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIsIGNvbnRhaW5lciwgbG9hZGluZ0NvbnRhaW5lcklkIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5O1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sZWdhbFRleHRDb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxvYWRpbmdDb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxvYWRpbmdDb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGxvYWRpbmdDb250YWluZXJJZDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBtZXJjaGFudElkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBpZiAoIW1lcmNoYW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIG1lcmNoYW50SWQgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkLCBtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICB0aGlzLmxvYWRGcmF1ZG5ldENvbmZpZygpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lciwgY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5IHx8IHt9O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdldEZpZWxkc1ZhbHVlcyB8fCB0eXBlb2YgZ2V0RmllbGRzVmFsdWVzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2V0RmllbGRzVmFsdWVzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlcklkID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIHsgbWV0YWRhdGFJZDogdGhpcy5ndWlkIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB7IHJhdGVwYXlCaXJ0aERhdGUsIHJhdGVwYXlQaG9uZU51bWJlciwgcmF0ZXBheVBob25lQ291bnRyeUNvZGUgfSA9XG4gICAgICAgICAgICAgICAgZ2V0RmllbGRzVmFsdWVzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZF9pZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmF0ZV9wYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpcnRoX2RhdGU6IHRoaXMubm9ybWFsaXplRGF0ZShyYXRlcGF5QmlydGhEYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiByYXRlcGF5UGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeV9jb2RlOiByYXRlcGF5UGhvbmVDb3VudHJ5Q29kZS5zcGxpdCgnKycpWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50LmdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiByZWplY3QoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGxlZ2FsVGV4dENvbnRhaW5lciB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5IHx8IHt9O1xuICAgICAgICBjb25zdCBmcmF1ZE5ldFNjcmlwdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRTY3JpcHRcIl0nKVswXTtcbiAgICAgICAgY29uc3QgZnJhdWROZXRDb25maWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0Q29uZmlnXCJdJylbMF07XG5cbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgZnJhdWROZXRTY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgIGZyYXVkTmV0Q29uZmlnLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmIChsZWdhbFRleHRDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXIpO1xuXG4gICAgICAgICAgICBsZWdhbFRleHRDb250YWluZXJFbGVtZW50Py5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZURhdGUoZGF0ZTogQmlydGhEYXRlKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSB0aGlzLmZvcm1hdERhdGUoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNb250aCA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldE1vbnRoKCkgKyAxKTtcblxuICAgICAgICByZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0ke2Zvcm1hdHRlZE1vbnRofS0ke2Zvcm1hdHRlZERhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdERhdGUoZGF0ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGAke2RhdGUgPCAxMCA/IDAgOiAnJ30ke2RhdGV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckxlZ2FsVGV4dChsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ6IHN0cmluZywgY29udGFpbmVyOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVySWQgPSBsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQ7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lcklkID0gY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbkNvbnRhaW5lcklkKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyUGFyZW50ID0gYnV0dG9uQ29udGFpbmVyPy5wYXJlbnROb2RlO1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBsZWdhbFRleHRDb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsIGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyUGFyZW50Py5wcmVwZW5kKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgY29uc3QgYmlnQ29tbWVyY2VQYXltZW50c1NkayA9XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCByYXRlUGF5QnV0dG9uID0gYmlnQ29tbWVyY2VQYXltZW50c1Nkay5MZWdhbCh7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBiaWdDb21tZXJjZVBheW1lbnRzU2RrLkxlZ2FsLkZVTkRJTkcuUEFZX1VQT05fSU5WT0lDRSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsZWdhbFRleHRDb250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJhdGVQYXlCdXR0b24ucmVuZGVyKGAjJHtsZWdhbFRleHRDb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudFwiIGFyZ3VtZW50IGlzIG5vdCBmb3VuZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXkgfHwge307XG5cbiAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUZyYXVkTmV0U2NyaXB0KG1lcmNoYW50SWQ6IHN0cmluZywgbWV0aG9kSWQ6IHN0cmluZywgZ2F0ZXdheUlkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuICAgICAgICBjb25zdCB7IHRlc3RNb2RlIH0gPSBwYXltZW50TWV0aG9kLmNvbmZpZztcbiAgICAgICAgY29uc3Qgc2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZuY2xzJywgJ2ZucGFyYW1zLWRlZGU3Y2M1LTE1ZmQtNGM3NS1hOWY0LTM2YzQzMGVlM2E5OScpO1xuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsICdmcmF1ZG5ldFNjcmlwdCcpO1xuICAgICAgICB0aGlzLmd1aWQgPSB0aGlzLmdlbmVyYXRlR1VJRCgpO1xuXG4gICAgICAgIGNvbnN0IGZyYXVkTmV0Q29uZmlnID0ge1xuICAgICAgICAgICAgZjogdGhpcy5ndWlkLFxuICAgICAgICAgICAgczogYCR7bWVyY2hhbnRJZH1fY2hlY2tvdXQtcGFnZWAsXG4gICAgICAgICAgICBzYW5kYm94OiB0ZXN0TW9kZSxcbiAgICAgICAgfTtcblxuICAgICAgICBzY3JpcHRFbGVtZW50LmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KGZyYXVkTmV0Q29uZmlnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXRlR1VJRCgpIHtcbiAgICAgICAgbGV0IGd1aWQgPSAnJztcbiAgICAgICAgY29uc3QgY2hhcmFjdGVycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzMjsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnMubGVuZ3RoKTtcblxuICAgICAgICAgICAgZ3VpZCArPSBjaGFyYWN0ZXJzW3JhbmRvbUluZGV4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBndWlkO1xuICAgIH1cblxuICAgIHByaXZhdGUgbG9hZEZyYXVkbmV0Q29uZmlnKCkge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgJ2ZyYXVkbmV0Q29uZmlnJyk7XG4gICAgICAgIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9jLnBheXBhbC5jb20vZGEvci9mYi5qcyc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlaW5pdGlhbGl6ZVN0cmF0ZWd5KFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICgpID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZU1ldGFkYXRhOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBpc09yZGVyQXBwcm92ZWQgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ1N0b3A7XG4gICAgICAgICAgICBjb25zdCBpc1BvbGxpbmdFcnJvciA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nRXJyb3I7XG5cbiAgICAgICAgICAgIGlmIChpc09yZGVyQXBwcm92ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlUHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNQb2xsaW5nRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzT3JkZXJBcHByb3ZlZCAmJiB0aGlzLnBvbGxpbmdUaW1lciA8IHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlaW5pdGlhbGl6ZVN0cmF0ZWd5KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheTogdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XG4gICAgICAgIHRoaXMucG9sbGluZ1RpbWVyID0gMDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0UG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cyc7XG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IHsgLi4uTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLCBwb3NpdGlvbjogJ2ZpeGVkJyB9LFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGdhdGV3YXk6ICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJywgaWQ6ICdyYXRlcGF5JyB9LFxuXSk7XG4iLCIvLyBjb3BpZWQgZnJvbSBwYWNrYWdlcy9jb3JlL3NyYy9ob3N0ZWQtZm9ybS9ob3N0ZWQtZmllbGQtdHlwZS50c1xuXG5lbnVtIEhvc3RlZEZpZWxkVHlwZSB7XG4gICAgQ2FyZENvZGUgPSAnY2FyZENvZGUnLFxuICAgIENhcmRDb2RlVmVyaWZpY2F0aW9uID0gJ2NhcmRDb2RlVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5ID0gJ2NhcmRFeHBpcnknLFxuICAgIENhcmROYW1lID0gJ2NhcmROYW1lJyxcbiAgICBDYXJkTnVtYmVyID0gJ2NhcmROdW1iZXInLFxuICAgIENhcmROdW1iZXJWZXJpZmljYXRpb24gPSAnY2FyZE51bWJlclZlcmlmaWNhdGlvbicsXG4gICAgQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiA9ICdjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgSG9zdGVkRmllbGRUeXBlO1xuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRGb3JtRmllbGRzKFxuICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4pOiBmaWVsZHMgaXMgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXIgaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTmFtZSBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnkgaW4gZmllbGRzXG4gICAgKTtcbn1cbiIsImltcG9ydCBIb3N0ZWRGaWVsZFR5cGUgZnJvbSAnLi9ob3N0ZWQtZmllbGQtdHlwZSc7XG5pbXBvcnQgeyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIH0gZnJvbSAnLi9ob3N0ZWQtZm9ybS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbiBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50SW52YWxpZEZvcm1FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkZXRhaWxzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGNvbnRhaW5zIGludmFsaWQgZGF0YS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEludmFsaWRGb3JtRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9pbnZhbGlkX2Zvcm0nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgaXNCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lcixcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBIb3N0ZWRDYXJkRmllbGRPcHRpb25zLFxuICAgIEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgSG9zdGVkRmllbGRCbHVyRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkRW50ZXJFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRGb2N1c0V2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZFN0eWxlc01hcCxcbiAgICBIb3N0ZWRGaWVsZFR5cGUsXG4gICAgSG9zdGVkRmllbGRWYWxpZGF0ZUV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhLFxuICAgIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGFNYXAsXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMsXG4gICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3IsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMsXG4gICAgTGlhYmlsaXR5U2hpZnRFbnVtLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBleGVjdXRpb25QYXltZW50RGF0YT86IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddO1xuICAgIHByaXZhdGUgaXNDcmVkaXRDYXJkRm9ybT86IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBwcml2YXRlIGNhcmRGaWVsZHM/OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcztcbiAgICBwcml2YXRlIGN2dkZpZWxkPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBwcml2YXRlIGV4cGlyeUZpZWxkPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBwcml2YXRlIG51bWJlckZpZWxkPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBwcml2YXRlIG5hbWVGaWVsZD86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG5cbiAgICBwcml2YXRlIGhvc3RlZEZvcm1PcHRpb25zPzogSG9zdGVkRm9ybU9wdGlvbnM7XG4gICAgcHJpdmF0ZSByZXR1cm5lZE9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSByZXR1cm5lZFZhdWx0ZWRUb2tlbj86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzU2RrOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcyB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgYmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uT3B0aW9ucyA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzO1xuXG4gICAgICAgIGNvbnN0IHsgZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IsIG9uTG9hZENvbXBsZXRlIH0gPVxuICAgICAgICAgICAgYmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMuZm9ybVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaG9zdGVkRm9ybU9wdGlvbnMgPSBmb3JtO1xuXG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkRm9ybSA9IGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpO1xuICAgICAgICB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtID1cbiAgICAgICAgICAgIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZvcm0uZmllbGRzKSAmJiAhdGhpcy5oYXNVbmRlZmluZWRWYWx1ZXMoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25Mb2FkQ29tcGxldGU/LigpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VibWl0SG9zdGVkRm9ybSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhlIGNvbmRpdGlvbiBnZXRzIHRyaWdnZXJlZCB3aGVuIGN1c3RvbWVyIHBheXMgd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZFxuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQgPSBvcmRlcklkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3VibWl0UGF5bWVudFBheWxvYWQgPSB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoc3VibWl0UGF5bWVudFBheWxvYWQpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3Z2RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQ/LmNsb3NlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubmFtZUZpZWxkPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFN1Ym1pdCBQYXltZW50IFBheWxvYWQgcHJlcGFyaW5nIG1ldGhvZFxuICAgICAqXG4gICAgICogYHZhdWx0ZWRUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAod2l0aCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKiBgc2V0dXBUb2tlbmAgaXMgdXNlZCB3aGVuIHdlIHBheSB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCAodW50cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MpXG4gICAgICogYG9yZGVySWRgIGlzIHVzZWQgaW4gZXZlcnkgY2FzZSAoYmFzaWMgY2FyZCBwYXltZW50LCB0cnVzdGVkIHNoaXBwaW5nIGFkZHJlc3MgYW5kIHVudHJ1c3RlZClcbiAgICAgKi9cbiAgICBwcml2YXRlIHByZXBhcmVQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICAgICBvcmRlcklkPzogc3RyaW5nLFxuICAgICAgICBub25jZT86IHN0cmluZyxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCA9IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UgfSA9XG4gICAgICAgICAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlKHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhIDoge307XG5cbiAgICAgICAgY29uc3QgaW5zdHJ1bWVudElkID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEuaW5zdHJ1bWVudElkIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIGNvbnN0IGJpZ3BheV90b2tlbiA9IG9taXRCeShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25fbm9uY2U6IG5vbmNlLFxuICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihub25jZSB8fCBpbnN0cnVtZW50SWQgPyB7IGJpZ3BheV90b2tlbiB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAuLi4ob3JkZXJJZCA/IHsgY2FyZF93aXRoX29yZGVyOiB7IG9yZGVyX2lkOiBvcmRlcklkIH0gfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENhcmQgZmllbGRzIGluaXRpYWxpemVcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZUZpZWxkcyhcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvcj86IEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3InXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBmaWVsZHMsIHN0eWxlcyB9ID0gZm9ybU9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgZXhlY3V0ZUNhbGxiYWNrID0gdGhpcy5nZXRFeGVjdXRlQ2FsbGJhY2soZmllbGRzKTtcblxuICAgICAgICBjb25zdCBjYXJkRmllbGRzQ29uZmlnOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldElucHV0U3R5bGVzKHN0eWxlcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7XG4gICAgICAgICAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICB9OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uTm8gfHxcbiAgICAgICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5Vbmtub3duXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUFwcHJvdmUoeyBvcmRlcklELCB2YXVsdFNldHVwVG9rZW4gfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25FcnJvcjogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoZXZlbnQpID0+IHRoaXMub25DaGFuZ2VIYW5kbGVyKGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICAgICAgb25Gb2N1czogKGV2ZW50KSA9PiB0aGlzLm9uRm9jdXNIYW5kbGVyKGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICAgICAgb25CbHVyOiAoZXZlbnQpID0+IHRoaXMub25CbHVySGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uSW5wdXRTdWJtaXRSZXF1ZXN0OiAoZXZlbnQpID0+IHRoaXMub25JbnB1dFN1Ym1pdFJlcXVlc3QoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5leGVjdXRlQ2FsbGJhY2ssXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jYXJkRmllbGRzID0gYXdhaXQgcGF5cGFsU2RrLkNhcmRGaWVsZHMoY2FyZEZpZWxkc0NvbmZpZyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmNhcmRGaWVsZHMuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGl6ZUlucHV0Q29udGFpbmVycyhmaWVsZHMpO1xuXG4gICAgICAgICAgICBpZiAoaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJGaWVsZHMoZmllbGRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcykpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclZhdWx0ZWRGaWVsZHMoZmllbGRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEdldCBleGVjdXRlIGNhbGxiYWNrIG1ldGhvZFxuICAgICAqIERlcGVuZHMgb24gc2hpcHBpbmcgYWRkcmVzcyBpcyB0cnVzdGVkIG9yIG5vdCB3ZSBzaG91bGQgcGFzcyB0byBQUFxuICAgICAqIGBjcmVhdGVWYXVsdFNldHVwVG9rZW5gIGNhbGxiYWNrIGlmIGFkZHJlc3MgaXMgdW50cnVzdGVkIG9yXG4gICAgICogYGNyZWF0ZU9yZGVyYCBpZiBhZGRyZXNzIGlzIHRydXN0ZWRcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RXhlY3V0ZUNhbGxiYWNrKFxuICAgICAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgICkge1xuICAgICAgICBjb25zdCBpc1ZhdWx0ZWRGb3JtID0gaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZmllbGRzKTtcblxuICAgICAgICByZXR1cm4gaXNWYXVsdGVkRm9ybSA/IHRoaXMuY3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2soKSA6IHRoaXMuY3JlYXRlT3JkZXJDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGVWYXVsdFNldHVwVG9rZW46IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHNldHVwVG9rZW4gfSA9XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwVG9rZW46IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICApKSB8fCB7fTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFRva2VuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZU9yZGVyQ2FsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID1cbiAgICAgICAgICAgICAgICAgICAgKGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBvbkFwcHJvdmUgbWV0aG9kXG4gICAgICogV2hlbiBzdWJtaXR0aW5nIGEgZm9ybSB3aXRoIGEgYHN1Ym1pdEhvc3RlZEZvcm1gIG1ldGhvZCBpZiB0aGVyZSBpcyBubyBlcnJvclxuICAgICAqIHRoZW4gb25BcHByb3ZlIGNhbGxiYWNrIGlzIHRyaWdnZXJlZCBhbmQgZGVwZW5kcyBvbiB0aGUgZmxvd1xuICAgICAqIHdlIHdpbGwgcmVjZWl2ZSBhbiBgb3JkZXJJRGAgaWYgaXQncyBiYXNpYyBwYXlpbmcgYW5kIGB2YXVsdFNldHVwVG9rZW5gIGlmIHdlIGFyZSBwYXlpbmdcbiAgICAgKiB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCBhbmQgc2hpcHBpbmcgYWRkcmVzcyBpcyB1bnRydXN0ZWRcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZSh7XG4gICAgICAgIG9yZGVySUQsXG4gICAgICAgIHZhdWx0U2V0dXBUb2tlbixcbiAgICB9OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEpIHtcbiAgICAgICAgaWYgKG9yZGVySUQpIHtcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRPcmRlcklkID0gb3JkZXJJRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YXVsdFNldHVwVG9rZW4pIHtcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRWYXVsdGVkVG9rZW4gPSB2YXVsdFNldHVwVG9rZW47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlcmluZyBDYXJkIEZpZWxkcyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlckZpZWxkcyhmaWVsZHNPcHRpb25zOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZENvZGU/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLmN2dkZpZWxkID0gY2FyZEZpZWxkcy5DVlZGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN2dkZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkQ29kZS5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnk/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGlyeUZpZWxkID0gY2FyZEZpZWxkcy5FeHBpcnlGaWVsZCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5leHBpcnlGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeS5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmROYW1lPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5uYW1lRmllbGQgPSBjYXJkRmllbGRzLk5hbWVGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm5hbWVGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZE5hbWUuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5udW1iZXJGaWVsZCA9IGNhcmRGaWVsZHMuTnVtYmVyRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZE51bWJlci5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyVmF1bHRlZEZpZWxkcyhmaWVsZHNPcHRpb25zOiBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZENvZGVWZXJpZmljYXRpb24/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLmN2dkZpZWxkID0gY2FyZEZpZWxkcy5DVlZGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN2dkZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkQ29kZVZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnlWZXJpZmljYXRpb24/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGlyeUZpZWxkID0gY2FyZEZpZWxkcy5FeHBpcnlGaWVsZCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5leHBpcnlGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZEV4cGlyeVZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmROdW1iZXJWZXJpZmljYXRpb24/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aGlzLm51bWJlckZpZWxkID0gY2FyZEZpZWxkcy5OdW1iZXJGaWVsZCh7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm51bWJlckZpZWxkLnJlbmRlcihgIyR7ZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBJbnN0cnVtZW50IHBhcmFtcyBtZXRob2RcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0SW5zdHJ1bWVudFBhcmFtcygpOiBIb3N0ZWRJbnN0cnVtZW50IHwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgICAgICBpZiAoIXRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0hvc3RlZEluc3RydW1lbnRMaWtlKHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50LCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPVxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGE7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNWYXVsdGVkSW5zdHJ1bWVudCh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgeyBpbnN0cnVtZW50SWQgfSA9IHRoaXMuZXhlY3V0aW9uUGF5bWVudERhdGE7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7fTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKHtcbiAgICAgICAgZW1pdHRlZEJ5LFxuICAgIH06IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOlxuICAgICAgICB8IEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRW50ZXJFdmVudERhdGFcbiAgICAgICAgfCBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkVHlwZTogdGhpcy5tYXBGaWVsZFR5cGUoZW1pdHRlZEJ5KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZvcm0gc3VibWl0IG1ldGhvZFxuICAgICAqIFRyaWdnZXJzIGEgZm9ybSBzdWJtaXRcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXRIb3N0ZWRGb3JtKCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN1Ym1pdENvbmZpZyA9IHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgY29tcGFueTogYmlsbGluZ0FkZHJlc3MuY29tcGFueSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTE6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMjogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMTogYmlsbGluZ0FkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgICAgICBhZG1pbkFyZWEyOiBiaWxsaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGJpbGxpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGJpbGxpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdChzdWJtaXRDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICdGYWlsZWQgYXV0aGVudGljYXRpb24uIFBsZWFzZSB0cnkgdG8gYXV0aG9yaXplIGFnYWluLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBWYWxpZGF0aW9uIGFuZCBlcnJvcnNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkc1N0YXRlID0gYXdhaXQgY2FyZEZpZWxkcy5nZXRTdGF0ZSgpLnRoZW4oKGRhdGEpID0+IGRhdGEpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRGF0YSA9IHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGNhcmRGaWVsZHNTdGF0ZSk7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25EYXRhLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaG9zdGVkRm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih2YWxpZGF0aW9uRGF0YSk7XG5cbiAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKHRoaXMubWFwVmFsaWRhdGlvbkVycm9ycyh2YWxpZGF0aW9uRGF0YS5lcnJvcnMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbGlkaXR5RGF0YSh7XG4gICAgICAgIGZpZWxkcyxcbiAgICB9OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogSG9zdGVkRmllbGRWYWxpZGF0ZUV2ZW50RGF0YSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRGaWVsZHMgPSB7IC4uLmZpZWxkcyB9O1xuXG4gICAgICAgIGRlbGV0ZSB1cGRhdGVkRmllbGRzLmNhcmROYW1lRmllbGQ7XG5cbiAgICAgICAgY29uc3QgZmllbGRzS2V5cyA9IE9iamVjdC5rZXlzKHVwZGF0ZWRGaWVsZHMpIGFzIEFycmF5PFxuICAgICAgICAgICAga2V5b2YgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZVsnZmllbGRzJ11cbiAgICAgICAgPjtcblxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gZmllbGRzS2V5cy5ldmVyeSgoa2V5KSA9PiB1cGRhdGVkRmllbGRzW2tleV0/LmlzVmFsaWQpO1xuXG4gICAgICAgIGNvbnN0IGVycm9ycyA9IGZpZWxkc0tleXMucmVkdWNlKChmaWVsZHNFcnJvcnMsIGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmllbGRUeXBlID0gdGhpcy5tYXBGaWVsZFR5cGUoa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5maWVsZHNFcnJvcnMsXG4gICAgICAgICAgICAgICAgW2ZpZWxkVHlwZV06IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZFxuICAgICAgICAgICAgICAgICAgICA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICA6IFt0aGlzLmdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKGZpZWxkVHlwZSldLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwge30pO1xuXG4gICAgICAgIHJldHVybiB7IGlzVmFsaWQsIGVycm9ycyB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlOiBzdHJpbmcpOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhIHtcbiAgICAgICAgc3dpdGNoIChmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlOlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGNvZGUnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX2NvZGUnLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXI6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBudW1iZXInLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX251bWJlcicsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeTpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIGV4cGlyeScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZmllbGQnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgbWFwVmFsaWRhdGlvbkVycm9ycyhcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yczogSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCA9IHt9LFxuICAgICk6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgICAgIGNvbnN0IGVycm9yczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzID0ge307XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvcnNLZXlzID0gT2JqZWN0LmtleXModmFsaWRhdGlvbkVycm9ycykgYXMgQXJyYXk8XG4gICAgICAgICAgICBrZXlvZiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwXG4gICAgICAgID47XG5cbiAgICAgICAgdmFsaWRhdGlvbkVycm9yc0tleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHZhbGlkYXRpb25FcnJvcnNba2V5XT8uWzBdPy5tZXNzYWdlIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGaWVsZHMgbWFwcGVyc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBtYXBGaWVsZFR5cGUodHlwZTogc3RyaW5nKTogSG9zdGVkRmllbGRUeXBlIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICduYW1lJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gSG9zdGVkRmllbGRUeXBlLkNhcmROYW1lO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkTnVtYmVyRmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEV4cGlyeUZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2V4cGlyeSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5XG4gICAgICAgICAgICAgICAgICAgIDogSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmRDdnZGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdjdnYnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGVWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpZWxkIHR5cGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHMge1xuICAgICAgICBpZiAoIXRoaXMuY2FyZEZpZWxkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRGaWVsZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnB1dFN0eWxlcyhcbiAgICAgICAgc3R5bGVzPzogSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgKTogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnNbJ3N0eWxlcyddIHtcbiAgICAgICAgY29uc3QgY29tbW9uU3R5bGVzID0ge1xuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6IHN0eWxlcz8uZGVmYXVsdD8uZm9udFNpemUgfHwgJzFyZW0nLFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzpcbiAgICAgICAgICAgICAgICBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRGYW1pbHkgfHwgJ01vbnRzZXJyYXQsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgJ2ZvbnQtd2VpZ2h0Jzogc3R5bGVzPy5kZWZhdWx0Py5mb250V2VpZ2h0IHx8ICc0MDAnLFxuICAgICAgICAgICAgb3V0bGluZTogJ25vbmUnLFxuICAgICAgICAgICAgcGFkZGluZzogJzlweCAxM3B4JyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0U3R5bGVzID0geyAuLi5jb21tb25TdHlsZXMsIGNvbG9yOiAnIzMzMzMzMycgfTtcbiAgICAgICAgY29uc3QgZXJyb3JTdHlsZXMgPSB7IC4uLmNvbW1vblN0eWxlcywgY29sb3I6ICdyZWQnIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlucHV0OiBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgJy5pbnZhbGlkJzogZXJyb3JTdHlsZXMsXG4gICAgICAgICAgICAnLnZhbGlkJzogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgICc6Zm9jdXMnOiBkZWZhdWx0U3R5bGVzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgc3R5bGl6ZUlucHV0Q29udGFpbmVycyhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LnZhbHVlcyhmaWVsZHMgfHwge30pLmZvckVhY2goKGlkOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWQ/LmNvbnRhaW5lcklkIHx8ICcnfWApO1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwcHgnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm94U2hhZG93ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gJy01cHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhc1VuZGVmaW5lZFZhbHVlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdGVkRm9ybU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuaG9zdGVkRm9ybU9wdGlvbnMuZmllbGRzKS5zb21lKFxuICAgICAgICAgICAgICAgICh2YWx1ZSkgPT4gdmFsdWUgPT09IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIElucHV0IGV2ZW50cyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIG9uQ2hhbmdlSGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih0aGlzLmdldFZhbGlkaXR5RGF0YShldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Gb2N1c0hhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkZvY3VzPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25CbHVySGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uQmx1cj8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uSW5wdXRTdWJtaXRSZXF1ZXN0KFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25FbnRlcj8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJpZ0NvbW1lcmNlUGF5bWVudHMgQWNjZWxlcmF0ZWQgY2hlY2tvdXQgcmVsYXRlZCBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBwYXJ0IHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIHNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50UHJvdmlkZXJDdXN0b21lciA9IGlzQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkICYmXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzQmlnQ29tbWVyY2VQYXltZW50c0FuYWx5dGljc1YyRW5hYmxlZCAmJlxuICAgICAgICAgICAgIWJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50UHJvdmlkZXJDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHBhcnQgd2hlbiBCQ1AgRmFzdGxhbmUgQS9CIHRlc3Rpbmcgd2lsbCBiZSBmaW5pc2hlZFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGE/LmNvbm5lY3RDbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5UGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICAgICAgICAgIHBheVBhbEZhc3RsYW5lU2RrLFxuICAgICAgICAgICAgICAgICEhaW5pdGlhbGl6YXRpb25EYXRhPy5pc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoXzogdW5rbm93bikge1xuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIGF2b2lkIHRocm93aW5nIGFueSBlcnJvciBmcm9tIHRoaXMgZmxvdyB0byBkbyBubyBicmFrZSBkZWZhdWx0IGZsb3dcbiAgICAgICAgICAgIC8vIFRoaXMgZmxvdyBpcyBvcHRpb25hbFxuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICBQYXlQYWxDb25uZWN0Q3VzdG9tZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyKFxuICAgIGN1c3RvbWVyPzogUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4pOiBjdXN0b21lciBpcyBQYXlQYWxDb25uZWN0Q3VzdG9tZXIge1xuICAgIGlmICghY3VzdG9tZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgICdhdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lciB8fCAnYWRkcmVzc2VzJyBpbiBjdXN0b21lciB8fCAnaW5zdHJ1bWVudHMnIGluIGN1c3RvbWVyXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMnIH0sXG5dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbEFwbVNkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFRpbWVvdXRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5pbXBvcnQgeyBpc0V4cGVyaW1lbnRFbmFibGVkIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91dGlsaXR5JztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5XG4gICAgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3lcbntcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbj86IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIHByaXZhdGUgcGF5cGFsQXBtcz86IFBheVBhbEFwbVNkaztcbiAgICBwcml2YXRlIHBvbGxpbmdUaW1lciA9IDA7XG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZyA9IG5vb3A7XG4gICAgcHJpdmF0ZSBpc1BvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzPzogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzU2RrSGVscGVyOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZ2F0ZXdheUlkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyB9ID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMgPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNob3VsZFJlbmRlckZpZWxkcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5jaGVja291dFNldHRpbmdzLmZlYXR1cmVzO1xuXG4gICAgICAgIHRoaXMuaXNQb2xsaW5nRW5hYmxlZCA9IGlzRXhwZXJpbWVudEVuYWJsZWQoZmVhdHVyZXMsICdQQVlQQUwtNTYyNC5iY3BfaWRlYWxfcG9sbGluZycpO1xuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBBUE0gYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIHRoZSBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEFwbXMgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGtIZWxwZXIuZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5jb250YWluZXIuc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgZ2F0ZXdheUlkLCBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKTtcblxuICAgICAgICBpZiAoc2hvdWxkUmVuZGVyRmllbGRzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZpZWxkcyhtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBwYXltZW50O1xuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCAmJiBtZXRob2RJZCA9PT0gJ2lkZWFsJykge1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShtZXRob2RJZCwgcmVzb2x2ZSwgcmVqZWN0LCBnYXRld2F5SWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBvbGxpbmcgbWVjaGFuaXNtXG4gICAgICpcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcmVzb2x2ZVByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIHJlamVjdFByb21pc2U6ICh2YWx1ZT86IHVua25vd24pID0+IHZvaWQsXG4gICAgICAgIGdhdGV3YXlJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQocmVzb2x2ZSwgdGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucG9sbGluZ1RpbWVyICs9IHRoaXMucG9sbGluZ0ludGVydmFsO1xuXG4gICAgICAgICAgICBjb25zdCBvcmRlclN0YXR1cyA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBpc09yZGVyQXBwcm92ZWQgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuQXBwcm92ZWQ7XG4gICAgICAgICAgICBjb25zdCBpc1BvbGxpbmdFcnJvciA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5Qb2xsaW5nRXJyb3I7XG5cbiAgICAgICAgICAgIGlmIChpc09yZGVyQXBwcm92ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlUHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNQb2xsaW5nRXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0UHJvbWlzZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWlzT3JkZXJBcHByb3ZlZCAmJiB0aGlzLnBvbGxpbmdUaW1lciA8IHRoaXMubWF4UG9sbGluZ0ludGVydmFsVGltZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdFByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJlaW5pdGlhbGl6ZVN0cmF0ZWd5KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kczogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciA9IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldFBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcmVpbml0aWFsaXplU3RyYXRlZ3koXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWluaXRpYWxpemUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMgfHwge307XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxBbXBzU2RrID0gdGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IGJ1dHRvblN0eWxlIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIHN1Ym1pdEZvcm0gfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogbWV0aG9kSWQsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoYnV0dG9uU3R5bGUpLFxuICAgICAgICAgICAgb25Jbml0OiAoXywgYWN0aW9ucykgPT4gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5vbkluaXRCdXR0b24oYWN0aW9ucyksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5vbkNyZWF0ZU9yZGVyKG1ldGhvZElkLCBnYXRld2F5SWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmFpbHVyZShlcnJvciwgb25FcnJvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbGljazogYXN5bmMgKF8sIGFjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5vblZhbGlkYXRlKGFjdGlvbnMucmVzb2x2ZSwgYWN0aW9ucy5yZWplY3QpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbiA9IHBheXBhbEFtcHNTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uUmVuZGVyQnV0dG9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkNyZWF0ZU9yZGVyKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtczogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB7IG9uVmFsaWRhdGUgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIG5vb3ApO1xuXG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0geyB1c2VTdG9yZUNyZWRpdDogZmFsc2UgfTtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBvcmRlcklkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRmFpbHVyZShcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGaWVsZHMgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckZpZWxkcyhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtczogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsQW1wc1NkayA9IHRoaXMuZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCB9ID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBhcG1GaWVsZHNDb250YWluZXIsIGFwbUZpZWxkc1N0eWxlcyB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBpZiAoIWFwbUZpZWxkc0NvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNcIiBhcmd1bWVudCBzaG91bGQgY29udGFpbiBcImFwbUZpZWxkc0NvbnRhaW5lclwiLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGRDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhcG1GaWVsZHNDb250YWluZXIpO1xuXG4gICAgICAgIGlmIChmaWVsZENvbnRhaW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZpZWxkQ29udGFpbmVyRWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZWxkc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBtZXRob2RJZCxcbiAgICAgICAgICAgIHN0eWxlOiBhcG1GaWVsZHNTdHlsZXMgfHwge30sXG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVtYWlsOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbWFpbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxQYXltZW50RmllbGRzID0gcGF5cGFsQW1wc1Nkay5QYXltZW50RmllbGRzKGZpZWxkc09wdGlvbnMpO1xuXG4gICAgICAgIHBheXBhbFBheW1lbnRGaWVsZHMucmVuZGVyKGFwbUZpZWxkc0NvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlsc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gbWV0aG9kSWQudG9VcHBlckNhc2UoKSBpbiBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheXBhbEFtcHNTZGtPclRocm93KCkge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxBcG1zO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1jb25zdGFudHMnO1xuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnIH0sXG5dKTtcbiIsImltcG9ydCB7IGlzUmVkaXJlY3RFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21lbXJjZS1wYXltZW50cy1yZWRpcmVjdC1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5XG4gICAgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3lcbntcbiAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHM/OiBCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZ2F0ZXdheUlkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyB9ID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMgPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRldmljZV9pbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAoaXNSZWRpcmVjdEVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZC5kYXRhLnJlZGlyZWN0X3VybDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoXywgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJlZGlyZWN0VXJsKTtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcyB8fCB7fTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc1JlcXVlc3RFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBSZWRpcmVjdEVycm9yIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1JlZGlyZWN0RXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZWRpcmVjdEVycm9yIHtcbiAgICByZXR1cm4gaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHk/LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkPy5kYXRhLnJlZGlyZWN0X3VybDtcbn1cbiIsImltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLy8gSGF2ZSB0byB1c2UgYGFzYCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83Mzk4NzA0NC90eXBlZ3VhcmRpbmctYW4tdW5rbm93bi1uZXN0ZWQtb2JqZWN0IHNob3VsZCBiZSBmaXhlZCBpbiA0LjgrXG5jb25zdCBpc1JlcXVlc3RFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlcXVlc3RFcnJvciA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2JvZHknIGluIGVycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNSZXF1ZXN0RXJyb3I7XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYmlnY29tZW1yY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKFxuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSxcbiAgICBbXG4gICAgICAgIHsgZ2F0ZXdheTogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLCBpZDogJ2tsYXJuYScgfSxcbiAgICAgICAgeyBnYXRld2F5OiAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycsIGlkOiAnYWZ0ZXJwYXknIH0sXG4gICAgXSxcbik7XG4iLCJpbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8gfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgUGF5UGFsIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciBQYXlQYWwgYnV0dG9uLlxuICAgICAgICBpZiAocGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/Lm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW86IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW87XG5cbiAgICAgICAgY29uc3QgYnV0dG9uT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICAgICAgb25FcnJvcjogKGVycm9yKSA9PiB0aGlzLmhhbmRsZUVycm9yKGVycm9yLCBvbkVycm9yKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihcbiAgICAgICAgICAgICAgICBgVmVubW8gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSBhbm90aGVyIHBheW1lbnQgbWV0aG9kIGluc3RlYWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3IoeyBzdHlsZXM6IHsgYmFja2dyb3VuZENvbG9yOiAnYmxhY2snIH0gfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50cywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9IEJvb2xlYW4oYmlnY29tbWVyY2VfcGF5bWVudHM/LmJ1eU5vd0luaXRpYWxpemVPcHRpb25zKTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFiaWdjb21tZXJjZV9wYXltZW50cy5jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50cy5idXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHMuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gYmlnY29tbWVyY2VfcGF5bWVudHMuY3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cywgaXNCdXlOb3dGbG93KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgaXNCdXlOb3dGbG93PzogYm9vbGVhbixcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uQ29tcGxldGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIGlzQXBwU3dpdGNoRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgICAgIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICAgICAgYXBwU3dpdGNoV2hlbkF2YWlsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcignYmlnY29tbWVyY2VfcGF5bWVudHMnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0FwcFN3aXRjaEVuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBGSVhNRTogRG8gd2UgcmVhbGx5IG5lZWQgdG8gcmV0dXJuIHRydWUgaGVyZT9cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5pc0FwcFN3aXRjaEVuYWJsZWQgPz8gZmFsc2U7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50cycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcsXG4gICAgTWVzc2FnaW5nT3B0aW9ucyxcbiAgICBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrSGVscGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheVBhbFNka0hlbHBlcjogUGF5UGFsU2RrSGVscGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkLFxuICAgICAgICB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2luZ0NvbnRhaW5lciA9XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXJJZCAmJiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtZXNzYWdpbmdDb250YWluZXJJZCk7XG5cbiAgICAgICAgaWYgKGN1cnJlbmN5Q29kZSAmJiBtZXNzYWdpbmdDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPVxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uICYmIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09ICdjYXJ0Jyk7XG5cbiAgICAgICAgICAgIGlmICghYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyB3aGVuIGRhdGEgYXR0cmlidXRlcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSByZWxhdGVkIGNhcnQgYmFubmVyIGNvbnRhaW5lciBpbiBjb250ZW50IHNlcnZpY2VcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtbG9nby10eXBlJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb24nKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtdGV4dC1jb2xvcicpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS10ZXh0LXNpemUnKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5UGFsU2RrSGVscGVyID0gYXdhaXQgdGhpcy5wYXlQYWxTZGtIZWxwZXIuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKHBheVBhbFNka0hlbHBlciwgbWVzc2FnaW5nQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uQ29tcGxldGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI7XG5cbiAgICAgICAgY29uc3QgYmlnQ29tbWVyY2VQYXltZW50c1NkayA9XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtcbiAgICAgICAgICAgIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuRlVORElORy5QQVlMQVRFUixcbiAgICAgICAgICAgIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuRlVORElORy5DUkVESVQsXG4gICAgICAgIF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBGSVhNRTogRG8gd2UgcmVhbGx5IG5lZWQgdG8gcmV0dXJuIHRydWUgaGVyZT9cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXNTZGs6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBtZXNzYWdpbmdDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdjYXJ0JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzID0gcGF5cGFsTWVzc2FnZXNTZGsuTWVzc2FnZXMocGF5cGFsTWVzc2FnZXNPcHRpb25zKTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5yZW5kZXIoYCMke21lc3NhZ2luZ0NvbnRhaW5lcklkfWApO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5XG4gICAgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5XG57XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFwbSxcbiAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSxcbiAgICAgICAgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhcG0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcHJvdmlkZWRDdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zOiBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYXBtLCBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBpc0F2YWlsYWJsZUZ1bmRpbmdTb3VyY2UgPSBPYmplY3QudmFsdWVzKHBheXBhbFNkay5GVU5ESU5HKS5pbmNsdWRlcyhhcG0pO1xuXG4gICAgICAgIGlmICghaXNBdmFpbGFibGVGdW5kaW5nU291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIFBheVBhbCBidXR0b24gYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5hcG1cIiBhcmd1bWVudCBpcyBub3QgdmFsaWQgZnVuZGluZyBzb3VyY2UuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBhcG0sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgU3R5bGVCdXR0b25Db2xvcixcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIGN1cnJlbmN5Q29kZTogcHJvdmlkZWRDdXJyZW5jeUNvZGUgfSA9XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8uY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbzogQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW87XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZSA9IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PO1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbycsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5nZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uUmVuZGVyID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvblJlbmRlci5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvblJlbmRlci5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyhzdHlsZTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkQnV0dG9uU3R5bGUgPVxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgIGlmICh2YWxpZEJ1dHRvblN0eWxlLmNvbG9yID09PSBTdHlsZUJ1dHRvbkNvbG9yLmdvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udmFsaWRCdXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWxpZEJ1dHRvblN0eWxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8nIH0sXG5dKTtcbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIl9fd2VicGFja19yZXF1aXJlX18iLCJ0b1Jlc29sdmFibGVNb2R1bGUiLCJtb2R1bGUiLCJyZXNvbHZlSWRzIiwiT2JqZWN0IiwiYXNzaWduIiwiZCIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiTWlzc2luZ0RhdGFFcnJvciIsInN1YnR5cGUiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEVycm9yTWVzc2FnZSIsIkJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yIiwiREVGQVVMVF9SRVNQT05TRSIsImJvZHkiLCJoZWFkZXJzIiwic3RhdHVzIiwiUmVxdWVzdEVycm9yIiwicmVzcG9uc2UiLCJlcnJvcnMiLCJDYXJ0U291cmNlIiwiTGlhYmlsaXR5U2hpZnRFbnVtIiwiQmlnQ29tbWVyY2VQYXltZW50c0ludGVudCIsIlN0eWxlQnV0dG9uTGFiZWwiLCJTdHlsZUJ1dHRvbkNvbG9yIiwiU3R5bGVCdXR0b25TaGFwZSIsIk5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiUGF5UGFsT3JkZXJTdGF0dXMiLCJCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIiwiZm9ybVBvc3RlciIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJiaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciIsImJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIiLCJsb2FkUGF5UGFsU2RrIiwibWV0aG9kSWQiLCJwcm92aWRlZEN1cnJlbmN5Q29kZSIsImluaXRpYWxpemVzT25DaGVja291dFBhZ2UiLCJmb3JjZUxvYWQiLCJzdGF0ZSIsImdldFN0YXRlIiwiY3VycmVuY3lDb2RlIiwiZ2V0Q2FydE9yVGhyb3ciLCJjdXJyZW5jeSIsImNvZGUiLCJwYXltZW50TWV0aG9kIiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJwYXlwYWxTZGsiLCJnZXRQYXlQYWxTREsiLCJnZXRQYXlQYWxTZGtPclRocm93IiwiY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3ciLCJidXlOb3dJbml0aWFsaXplT3B0aW9ucyIsImNhcnRSZXF1ZXN0Qm9keSIsImdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSIsImNyZWF0ZUJ1eU5vd0NhcnQiLCJlcnJvciIsImNyZWF0ZU9yZGVyIiwicHJvdmlkZXJJZCIsInJlcXVlc3RCb2R5IiwiY2FydElkIiwiaWQiLCJvcmRlcklkIiwiY3JlYXRlT3JkZXJDYXJkRmllbGRzIiwic2V0dXBUb2tlbiIsInVwZGF0ZU9yZGVyIiwiY2FydCIsImNvbnNpZ25tZW50IiwiZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdyIsImF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyIsInNlbGVjdGVkU2hpcHBpbmdPcHRpb24iLCJfZXJyb3IiLCJnZXRPcmRlclN0YXR1cyIsIm9wdGlvbnMiLCJ0b2tlbml6ZVBheW1lbnQiLCJwb3N0Rm9ybSIsInBheW1lbnRfdHlwZSIsImFjdGlvbiIsInByb3ZpZGVyIiwib3JkZXJfaWQiLCJzb3VyY2UiLCJCdXlOb3ciLCJjYXJ0X2lkIiwic3VibWl0UGF5bWVudCIsImdhdGV3YXlJZCIsInBheW1lbnREYXRhIiwiZm9ybWF0dGVkUGF5bG9hZCIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsInNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50IiwiZGV2aWNlX2luZm8iLCJtZXRob2RfaWQiLCJwYXlwYWxfYWNjb3VudCIsImdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyIsInNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZCIsInJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24iLCJmaW5kIiwib3B0aW9uIiwiaXNSZWNvbW1lbmRlZCIsInNoaXBwaW5nT3B0aW9uVG9TZWxlY3QiLCJnZXRBZGRyZXNzIiwiYWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZSIsImNvbXBhbnkiLCJhZGRyZXNzMSIsImFkZHJlc3MyIiwiY2l0eSIsImNvdW50cnlDb2RlIiwicG9zdGFsQ29kZSIsInN0YXRlT3JQcm92aW5jZSIsInN0YXRlT3JQcm92aW5jZUNvZGUiLCJjdXN0b21GaWVsZHMiLCJnZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMiLCJwYXllciIsImdpdmVuX25hbWUiLCJzdXJuYW1lIiwiZW1haWxfYWRkcmVzcyIsImFkZHJlc3NfbGluZV8xIiwiYWRkcmVzc19saW5lXzIiLCJhZG1pbl9hcmVhXzIiLCJjb3VudHJ5X2NvZGUiLCJwb3N0YWxfY29kZSIsImFkbWluX2FyZWFfMSIsInBob25lX251bWJlciIsIm5hdGlvbmFsX251bWJlciIsImdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMiLCJvcmRlckRldGFpbHMiLCJwdXJjaGFzZV91bml0cyIsImZ1bGxfbmFtZSIsInNoaXBwaW5nIiwic3BsaXQiLCJqb2luIiwiZ2V0VmFsaWRCdXR0b25TdHlsZSIsInN0eWxlIiwiY29sb3IiLCJoZWlnaHQiLCJsYWJlbCIsInNoYXBlIiwidmFsaWRTdHlsZXMiLCJ1bmRlZmluZWQiLCJnZXRWYWxpZEhlaWdodCIsIm9taXRCeSIsImlzTmlsIiwicmVtb3ZlRWxlbWVudCIsImVsZW1lbnRJZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZGlzcGxheSIsIklOVEVSTkFMX1VTRV9PTkxZIiwiQ29udGVudFR5cGUiLCJTREtfVkVSU0lPTl9IRUFERVJTIiwiQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIiLCJyZXF1ZXN0U2VuZGVyIiwidXJsIiwiSnNvbiIsInBvc3QiLCJwdXQiLCJCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIiwic2NyaXB0TG9hZGVyIiwid2luZG93IiwicGF5cGFsU2RrU2NyaXB0Q29uZmlnIiwiZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyIsImxvYWRQYXlQYWxTREsiLCJwYXlwYWwiLCJ0cmFuc2Zvcm1Db25maWciLCJhdHRyaWJ1dGVzIiwic2NyaXB0U3JjIiwiVVJMU2VhcmNoUGFyYW1zIiwidG9TdHJpbmciLCJsb2FkU2NyaXB0IiwiYXN5bmMiLCJjbGllbnRUb2tlbiIsImluaXRpYWxpemF0aW9uRGF0YSIsImNsaWVudElkIiwiaW50ZW50IiwibWVyY2hhbnRJZCIsImJ1eWVyQ291bnRyeSIsImF0dHJpYnV0aW9uSWQiLCJpc1Zlbm1vRW5hYmxlZCIsImlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIiwiaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUiLCJpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlIiwiYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsImVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiaXNHb29nbGVQYXlFbmFibGVkIiwiY29tbWl0Iiwic2hvdWxkRW5hYmxlQ2FyZCIsImVuYWJsZUNhcmRGdW5kaW5nIiwiZGlzYWJsZUNhcmRGdW5kaW5nIiwiZW5hYmxlQ3JlZGl0RnVuZGluZyIsImRpc2FibGVDcmVkaXRGdW5kaW5nIiwiZW5hYmxlVmVubW9GdW5kaW5nIiwiZGlzYWJsZVZlbm1vRnVuZGluZyIsImRpc2FibGVBUE1zRnVuZGluZyIsImZpbHRlciIsImFwbSIsImluY2x1ZGVzIiwiZ29vZ2xlUGF5Q29tcG9uZW50IiwiY2FyZEZpZWxkc0NvbXBvbmVudCIsImRpc2FibGVGdW5kaW5nIiwiZmlsdGVyRnVuZGluZ09wdGlvbnMiLCJlbmFibGVGdW5kaW5nIiwibGVuZ3RoIiwiY29tcG9uZW50cyIsImZ1bmRpbmdPcHRpb25zIiwiZnVuZGluZ1R5cGVzVG9CZUZpbHRlcmVkIiwiZnVuZGluZ09wdGlvbiIsImNvbmZpZyIsInRyYW5zZm9ybWVkQ29uZmlnIiwia2V5cyIsImZvckVhY2giLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsImdldEhvc3QiLCJjcmVhdGVGb3JtUG9zdGVyIiwiY3JlYXRlUmVxdWVzdFNlbmRlciIsImhvc3QiLCJnZXRTY3JpcHRMb2FkZXIiLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIkJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5IiwiYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSIsIm9uRXJyb3IiLCJub29wIiwiaW5pdGlhbGl6ZSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzIiwiY29udGFpbmVyIiwib25DbGljayIsImdldFBheW1lbnRNZXRob2QiLCJsb2FkUGF5bWVudE1ldGhvZCIsIkJ1dHRvbnMiLCJyZW5kZXJCdXR0b24iLCJjb25zb2xlIiwiZGVpbml0aWFsaXplIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzaWduSW4iLCJjcmVkZW50aWFscyIsInNpZ25JbkN1c3RvbWVyIiwic2lnbk91dCIsInNpZ25PdXRDdXN0b21lciIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwib25Db21wbGV0ZSIsInBheW1lbnRCdXR0b25TdHlsZXMiLCJjaGVja291dFRvcEJ1dHRvblN0eWxlcyIsImRlZmF1bHRDYWxsYmFja3MiLCJvbkFwcHJvdmUiLCJvcmRlcklEIiwiaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MiLCJvblNoaXBwaW5nQWRkcmVzc0NoYW5nZSIsImRhdGEiLCJvblNoaXBwaW5nT3B0aW9uc0NoYW5nZSIsImFjdGlvbnMiLCJvbkhvc3RlZENoZWNrb3V0QXBwcm92ZSIsImJ1dHRvblJlbmRlck9wdGlvbnMiLCJmdW5kaW5nU291cmNlIiwiRlVORElORyIsIlBBWVBBTCIsInBheXBhbEJ1dHRvbiIsImlzRWxpZ2libGUiLCJyZW5kZXIiLCJvcmRlciIsImJpbGxpbmdBZGRyZXNzIiwidXBkYXRlQmlsbGluZ0FkZHJlc3MiLCJsaW5lSXRlbXMiLCJwaHlzaWNhbEl0ZW1zIiwic2hpcHBpbmdBZGRyZXNzIiwidXBkYXRlU2hpcHBpbmdBZGRyZXNzIiwic3VibWl0T3JkZXIiLCJwYXJhbXMiLCJoYW5kbGVFcnJvciIsInNoaXBwaW5nT3B0aW9uIiwic2VsZWN0U2hpcHBpbmdPcHRpb24iLCJVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlIiwiVERTZWN1cmVWZXJpZmljYXRpb25NZXRob2QiLCJURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJQYXlQYWxTZGtIZWxwZXIiLCJnZXRQYXlQYWxGYXN0bGFuZVNkayIsInNlc3Npb25JZCIsInBheXBhbEZhc3RsYW5lU2RrIiwiZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uIiwiZ2V0UGF5UGFsR29vZ2xlUGF5U2RrIiwicGF5cGFsR29vZ2xlUGF5IiwiZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyIsImdldFBheVBhbEFwbXNTZGsiLCJwYXlwYWxBcG1zIiwiZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbiIsImdldFBheVBhbE1lc3NhZ2VzIiwicGF5cGFsTWVzc2FnZXMiLCJwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyIsImdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbiIsInNjcmlwdE9wdGlvbnMiLCJzY3JpcHRBdHRyaWJ1dGVzIiwicmVwbGFjZSIsImVuYWJsZUFQTXNGdW5kaW5nIiwiY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayIsImNyZWF0ZVNjcmlwdExvYWRlciIsIkNvb2tpZVN0b3JhZ2UiLCJjb29raWVLZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJmaXJzdEluZGV4IiwiaW5kZXhPZiIsImxhc3RJbmRleCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0cmluZyIsInNldCIsInNlY3VyZSIsImNvb2tpZVRleHQiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInRvVVRDU3RyaW5nIiwibm93IiwiRGF0ZSIsIm1pbnV0ZXMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInJlbW92ZSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIiwiaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lIiwiaXNUZXN0TW9kZUVuYWJsZWQiLCJzdHlsZXMiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicGF5cGFsRmFzdGxhbmUiLCJkZWZhdWx0U3R5bGVzIiwicm9vdCIsImJhY2tncm91bmRDb2xvclByaW1hcnkiLCJGYXN0bGFuZSIsImdldFBheVBhbEZhc3RsYW5lT3JUaHJvdyIsImxvb2t1cEN1c3RvbWVyT3JUaHJvdyIsImlkZW50aXR5IiwibG9va3VwQ3VzdG9tZXJCeUVtYWlsIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3ciLCJjdXN0b21lckNvbnRleHRJZCIsInRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3ciLCJ1cGRhdGVTdG9yYWdlU2Vzc2lvbklkIiwic2V0RGF0ZSIsImdldERhdGUiLCJjb29raWVzT3B0aW9uIiwicmVtb3ZlU3RvcmFnZVNlc3Npb25JZCIsImdldFN0b3JhZ2VTZXNzaW9uSWQiLCJtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhIiwiYXV0aGVudGljYXRpb25SZXN1bHQiLCJhdXRoZW50aWNhdGlvblN0YXRlIiwicHJvZmlsZURhdGEiLCJwYXlwYWxCaWxsaW5nQWRkcmVzcyIsImNhcmQiLCJwYXltZW50U291cmNlIiwicGF5cGFsU2hpcHBpbmdBZGRyZXNzIiwicGF5cGFsUHJvZmlsZU5hbWUiLCJwYXlwYWxJbnN0cnVtZW50IiwibWFwUGF5UGFsVG9CY0FkZHJlc3MiLCJwaG9uZU51bWJlciIsImluc3RydW1lbnRzIiwibWFwUGF5UGFsVG9CY0luc3RydW1lbnQiLCJhZGRyZXNzZXMiLCJmaWx0ZXJBZGRyZXNzZXMiLCJVTlJFQ09HTklaRUQiLCJpbnN0cnVtZW50IiwiYnJhbmQiLCJleHBpcnkiLCJsYXN0RGlnaXRzIiwiZXhwaXJ5WWVhciIsImV4cGlyeU1vbnRoIiwiYmlncGF5VG9rZW4iLCJkZWZhdWx0SW5zdHJ1bWVudCIsImlpbiIsImxhc3Q0IiwibWV0aG9kIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsInVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGUiLCJQQU4iLCJtYXBCY1RvUGF5UGFsQWRkcmVzcyIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkbWluQXJlYTEiLCJhZG1pbkFyZWEyIiwicHJvZmlsZU5hbWUiLCJmdWxsTmFtZSIsInBob25lRGF0YSIsIm5hdGlvbmFsTnVtYmVyIiwiY291bnRyeSIsInJlZHVjZSIsImN1c3RvbWVyQWRkcmVzc2VzIiwiY3VycmVudEFkZHJlc3MiLCJzb21lIiwiY3VzdG9tZXJBZGRyZXNzIiwiaXNFcXVhbEFkZHJlc3NlcyIsImZpcnN0QWRkcmVzcyIsInNlY29uZEFkZHJlc3MiLCJpc0VxdWFsIiwibm9ybWFsaXplQWRkcmVzcyIsIm9taXQiLCJjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyIsImlzSW52YWxpZFN0eWxlT3B0aW9uIiwic3R5bGVPcHRpb24iLCJnZXRGYXN0bGFuZVN0eWxlcyIsInN0eWxlU2V0dGluZ3MiLCJ1aVN0eWxlcyIsImZhc3RsYW5lU3R5bGVzIiwiaW5wdXQiLCJ0b2dnbGUiLCJ0ZXh0Qm9keSIsInRleHQiLCJ0ZXh0Q2FwdGlvbiIsImNhcHRpb24iLCJicmFuZGluZyIsImNsZWFuVXBGYXN0bGFuZVN0eWxlcyIsImZhc3RsYW5lUm9vdFNldHRpbmdzQmFja2dyb3VuZENvbG9yIiwiZXJyb3JDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvciIsImZvbnRGYW1pbHkiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkiLCJmb250U2l6ZUJhc2UiLCJmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplIiwicGFkZGluZyIsImZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyIsInByaW1hcnlDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzUHJpbWFyeUNvbG9yIiwiYm9yZGVyUmFkaXVzIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzIiwiYm9yZGVyQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvciIsImZvY3VzQm9yZGVyQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2UiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJXaWR0aCIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIiwidGV4dENvbG9yQmFzZSIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UiLCJjb2xvclByaW1hcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IiwiY29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvciIsImZvbnRTaXplIiwiZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIiwiZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIiwibWVyZ2VGYXN0bGFuZVN0eWxlcyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kiLCJiaWdDb21tZXJjZVBheW1lbnRzU2RrIiwiYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMiLCJiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSIsIl8iLCJjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCIsImdldEN1c3RvbWVyT3JUaHJvdyIsImlzR3Vlc3QiLCJydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiY3VzdG9tZXIiLCJnZXRDdXN0b21lciIsImdldEJpbGxpbmdBZGRyZXNzIiwiY3VzdG9tZXJFbWFpbCIsImlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQiLCJDQU5DRUxFRCIsInVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlIiwidXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJ1cGRhdGVkU3RhdGUiLCJpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCIsImNvbnNpZ25tZW50cyIsImdldENvbnNpZ25tZW50cyIsImZpcnN0U2hpcHBpbmdPcHRpb24iLCJzaGlwcGluZ09wdGlvbklkIiwiaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIiwiQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyIiwiYmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyIiwiZnVuZGluZ1NvdXJjZXMiLCJQQVlMQVRFUiIsIkNSRURJVCIsImhhc1JlbmRlcmVkU21hcnRCdXR0b24iLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5IiwiYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8iLCJWRU5NTyIsInBheXBhbEJ1dHRvblJlbmRlciIsIkRFRkFVTFRfU1RZTEVTIiwic2l6ZSIsIlJPVEFUSU9OX0FOSU1BVElPTiIsIkxvYWRpbmdJbmRpY2F0b3IiLCJjb250YWluZXJTdHlsZXMiLCJkZWZpbmVBbmltYXRpb24iLCJidWlsZENvbnRhaW5lciIsImluZGljYXRvciIsImJ1aWxkSW5kaWNhdG9yIiwiYXBwZW5kQ2hpbGQiLCJzaG93IiwicGFyZW50SWQiLCJwYXJlbnQiLCJ2aXNpYmlsaXR5Iiwib3BhY2l0eSIsImhpZGUiLCJoYW5kbGVUcmFuc2l0aW9uRW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVFbGVtZW50IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwicG9zaXRpb24iLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlciIsIm1hcmdpbiIsInRyYW5zZm9ybSIsInRyYW5zZm9ybVN0eWxlIiwiYW5pbWF0aW9uIiwiYXR0cnMiLCJrIiwic2V0UHJvcGVydHkiLCJoZWFkIiwic2hlZXQiLCJDU1NTdHlsZVNoZWV0IiwiaW5zZXJ0UnVsZSIsIkxPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyIsIm1lc3NhZ2VzU3R5bGVzIiwibGF5b3V0IiwibG9nbyIsInJhdGlvIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsIlBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJpc0hvc3RlZEluc3RydW1lbnRMaWtlIiwic2hvdWxkU2F2ZUluc3RydW1lbnQiLCJzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsIkJvb2xlYW4iLCJpbnN0cnVtZW50SWQiLCJpc0Jhc2VJbnN0cnVtZW50IiwiQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneSIsInBheXBhbFNka0hlbHBlciIsImxvYWRpbmdJbmRpY2F0b3IiLCJiYW5uZXJDb250YWluZXJJZCIsInBheXBhbEJOUExDb25maWd1cmF0aW9uIiwiYmFubmVyQ29uZmlndXJhdGlvbiIsIk1lc3NhZ2VzIiwicmVuZGVyTWVzc2FnZXMiLCJsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyIiwib25Jbml0Iiwic2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsImlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YSIsInBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQiLCJwcmVwYXJlUGF5bWVudFBheWxvYWQiLCJpc1Byb3ZpZGVyRXJyb3IiLCJfcmVzb2x2ZSIsInJlamVjdCIsImNsb3NlIiwiZmluYWxpemUiLCJwYXlwYWxPcmRlcklkIiwic2hvdWxkQ29uZmlybUluc3RydW1lbnQiLCJpc1RydXN0ZWRWYXVsdGluZ0Zsb3ciLCJiaWdwYXlfdG9rZW4iLCJ0b2tlbiIsImNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyIsIm9uUmVuZGVyQnV0dG9uIiwib25WYWxpZGF0ZSIsInN1Ym1pdEZvcm0iLCJidXR0b25PcHRpb25zIiwiaGFuZGxlQ2xpY2siLCJoYW5kbGVBcHByb3ZlIiwib25DYW5jZWwiLCJ0b2dnbGVMb2FkaW5nSW5kaWNhdG9yIiwiZmllbGRzVmFsdWVzIiwiZ2V0RmllbGRzVmFsdWVzIiwiZ2V0SW5zdHJ1bWVudHMiLCJmaW5kSW5zdHJ1bWVudCIsImlzTG9hZGluZyIsInBheXBhbE1lc3NhZ2VzT3B0aW9ucyIsImFtb3VudCIsImdldENoZWNrb3V0T3JUaHJvdyIsIm91dHN0YW5kaW5nQmFsYW5jZSIsInBsYWNlbWVudCIsImlzQmlnQ29tbWVyY2VQYXltZW50c1Byb3ZpZGVyRXJyb3IiLCJlIiwicHJvdmlkZXJfZXJyb3IiLCJpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIiLCJpc0V4cGVyaW1lbnRFbmFibGVkIiwiZmVhdHVyZXMiLCJleHBlcmltZW50TmFtZSIsImZhbGxiYWNrVmFsdWUiLCJCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kiLCJvbkNoYW5nZSIsInRocmVlRFNWZXJpZmljYXRpb25NZXRob2QiLCJzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3ciLCJpbml0aWFsaXplUGF5UGFsUGF5bWVudENvbXBvbmVudCIsInJlbmRlclBheVBhbFBheW1lbnRDb21wb25lbnQiLCJoYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlIiwib3JkZXJSZXF1ZXN0IiwiaXNWYXVsdGVkRmxvdyIsImlzQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvciIsImludmFsaWRSZXF1ZXN0RXJyb3IiLCJ0cmFuc2xhdGlvbktleSIsInBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJwYXlwYWxGYXN0bGFuZUN1c3RvbWVyIiwicGF5cGFsRmFzdGxhbmVTZXNzaW9uSWQiLCJnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3ciLCJ0cmltIiwiY2FyZENvbXBvbmVudE9wdGlvbnMiLCJmaWVsZHMiLCJjYXJkaG9sZGVyTmFtZSIsInByZWZpbGwiLCJlbmFibGVkIiwicGF5cGFsQ29tcG9uZW50TWV0aG9kcyIsIkZhc3RsYW5lQ2FyZENvbXBvbmVudCIsImdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93Iiwibm9uY2UiLCJpc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUiLCJpczNkc0VuYWJsZWQiLCJnZXQzRFNOb25jZSIsInBheXBhbF9mYXN0bGFuZV90b2tlbiIsImdldFBheW1lbnRUb2tlbiIsImlzM0RTRW5hYmxlZCIsImZhc3RsYW5lVG9rZW4iLCJnZXRPcmRlck9yVGhyb3ciLCJjaGVja291dFVybCIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImxpbmtzIiwiY2hlY2tvdXRMaW5rIiwidGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQiLCJUaHJlZURvbWFpblNlY3VyZUNsaWVudCIsInRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyIsIm9yZGVyQW1vdW50IiwidG9GaXhlZCIsInRocmVlRFNSZXF1ZXN0ZWQiLCJBbHdheXMiLCJ0cmFuc2FjdGlvbkNvbnRleHQiLCJleHBlcmllbmNlX2NvbnRleHQiLCJsb2NhbGUiLCJyZXR1cm5fdXJsIiwiY2FuY2VsX3VybCIsImlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSIsImxpYWJpbGl0eVNoaWZ0IiwidGhyZWVEU05vbmNlIiwiTm8iLCJVbmtub3duIiwiRXJyb3JlZCIsIkNhbmNlbGxlZCIsIlN1Y2NlZWRlZCIsIlllcyIsIlBvc3NpYmxlIiwicGF5cGFsQXhvU2RrIiwic2VsZWN0aW9uQ2hhbmdlZCIsInNlbGVjdGVkQ2FyZCIsInByb2ZpbGUiLCJzaG93Q2FyZFNlbGVjdG9yIiwic2VsZWN0ZWRJbnN0cnVtZW50IiwiY2hlY2tvdXRTZXR0aW5ncyIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3kiLCJiaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyIsImJpZ0NvbW1lcmNlU2RrIiwiVGltZW91dEVycm9yIiwiQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3kiLCJwb2xsaW5nSW50ZXJ2YWwiLCJtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lIiwicG9sbGluZ1RpbWVyIiwic3RvcFBvbGxpbmciLCJiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5IiwibGVnYWxUZXh0Q29udGFpbmVyIiwibG9hZGluZ0NvbnRhaW5lcklkIiwiY3JlYXRlRnJhdWROZXRTY3JpcHQiLCJsb2FkRnJhdWRuZXRDb25maWciLCJyZW5kZXJMZWdhbFRleHQiLCJtZXRhZGF0YUlkIiwiZ3VpZCIsInJhdGVwYXlCaXJ0aERhdGUiLCJyYXRlcGF5UGhvbmVOdW1iZXIiLCJyYXRlcGF5UGhvbmVDb3VudHJ5Q29kZSIsInJhdGVfcGF5IiwiYmlydGhfZGF0ZSIsIm5vcm1hbGl6ZURhdGUiLCJpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsImZyYXVkTmV0U2NyaXB0IiwicXVlcnlTZWxlY3RvckFsbCIsImZyYXVkTmV0Q29uZmlnIiwiZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQiLCJkYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImZvcm1hdERhdGUiLCJmb3JtYXR0ZWRNb250aCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50SWQiLCJsZWdhbFRleHRDb250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lcklkIiwiYnV0dG9uQ29udGFpbmVyIiwiYnV0dG9uQ29udGFpbmVyUGFyZW50IiwicGFyZW50Tm9kZSIsIm1hcmdpbkJvdHRvbSIsInNldEF0dHJpYnV0ZSIsInByZXBlbmQiLCJyYXRlUGF5QnV0dG9uIiwiTGVnYWwiLCJQQVlfVVBPTl9JTlZPSUNFIiwicmVzZXRQb2xsaW5nTWVjaGFuaXNtIiwidGVzdE1vZGUiLCJzY3JpcHRFbGVtZW50IiwiZ2VuZXJhdGVHVUlEIiwiZiIsInMiLCJzYW5kYm94IiwiaW5uZXJIVE1MIiwiSlNPTiIsInN0cmluZ2lmeSIsImkiLCJNYXRoIiwiZmxvb3IiLCJjaGFyYWN0ZXJzIiwicmFuZG9tIiwic2NyaXB0Iiwic3JjIiwicmVpbml0aWFsaXplU3RyYXRlZ3kiLCJyZXNvbHZlUHJvbWlzZSIsInJlamVjdFByb21pc2UiLCJ0aW1lb3V0Iiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIm9yZGVyU3RhdHVzIiwidXNlTWV0YWRhdGEiLCJpc09yZGVyQXBwcm92ZWQiLCJQb2xsaW5nU3RvcCIsImlzUG9sbGluZ0Vycm9yIiwiUG9sbGluZ0Vycm9yIiwiZ2F0ZXdheSIsIkhvc3RlZEZpZWxkVHlwZSIsImlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMiLCJDYXJkTnVtYmVyIiwiQ2FyZE5hbWUiLCJDYXJkRXhwaXJ5IiwiaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMiLCJDYXJkTnVtYmVyVmVyaWZpY2F0aW9uIiwiQ2FyZENvZGVWZXJpZmljYXRpb24iLCJDYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIiwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJOb3RJbml0aWFsaXplZEVycm9yIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiUGF5bWVudEludmFsaWRGb3JtRXJyb3IiLCJkZXRhaWxzIiwiQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IiwiYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMiLCJiaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25PcHRpb25zIiwiZm9ybSIsIm9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yIiwib25Mb2FkQ29tcGxldGUiLCJob3N0ZWRGb3JtT3B0aW9ucyIsImlzQ3JlZGl0Q2FyZEZvcm0iLCJpc0NyZWRpdENhcmRWYXVsdGVkRm9ybSIsImhhc1VuZGVmaW5lZFZhbHVlcyIsImluaXRpYWxpemVGaWVsZHMiLCJzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUiLCJpbml0aWFsaXplUGF5UGFsRmFzdGxhbmVPclRocm93IiwiZXhlY3V0aW9uUGF5bWVudERhdGEiLCJ2YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93Iiwic3VibWl0SG9zdGVkRm9ybSIsImdldEluc3RydW1lbnRQYXJhbXMiLCJyZXR1cm5lZE9yZGVySWQiLCJzdWJtaXRQYXltZW50UGF5bG9hZCIsInJldHVybmVkVmF1bHRlZFRva2VuIiwiY3Z2RmllbGQiLCJleHBpcnlGaWVsZCIsIm51bWJlckZpZWxkIiwibmFtZUZpZWxkIiwidmVyaWZpY2F0aW9uX25vbmNlIiwiY2FyZF93aXRoX29yZGVyIiwiZm9ybU9wdGlvbnMiLCJleGVjdXRlQ2FsbGJhY2siLCJnZXRFeGVjdXRlQ2FsbGJhY2siLCJjYXJkRmllbGRzQ29uZmlnIiwiZ2V0SW5wdXRTdHlsZXMiLCJ2YXVsdFNldHVwVG9rZW4iLCJpbnB1dEV2ZW50cyIsImV2ZW50Iiwib25DaGFuZ2VIYW5kbGVyIiwib25Gb2N1cyIsIm9uRm9jdXNIYW5kbGVyIiwib25CbHVyIiwib25CbHVySGFuZGxlciIsIm9uSW5wdXRTdWJtaXRSZXF1ZXN0IiwiY2FyZEZpZWxkcyIsIkNhcmRGaWVsZHMiLCJzdHlsaXplSW5wdXRDb250YWluZXJzIiwicmVuZGVyRmllbGRzIiwicmVuZGVyVmF1bHRlZEZpZWxkcyIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrIiwiY3JlYXRlT3JkZXJDYWxsYmFjayIsImNyZWF0ZVZhdWx0U2V0dXBUb2tlbiIsImZpZWxkc09wdGlvbnMiLCJnZXRDYXJkRmllbGRzT3JUaHJvdyIsImNhcmRDb2RlIiwiY29udGFpbmVySWQiLCJDVlZGaWVsZCIsInBsYWNlaG9sZGVyIiwiY2FyZEV4cGlyeSIsIkV4cGlyeUZpZWxkIiwiY2FyZE5hbWUiLCJOYW1lRmllbGQiLCJjYXJkTnVtYmVyIiwiTnVtYmVyRmllbGQiLCJjYXJkQ29kZVZlcmlmaWNhdGlvbiIsImNhcmRFeHBpcnlWZXJpZmljYXRpb24iLCJjYXJkTnVtYmVyVmVyaWZpY2F0aW9uIiwiZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQiLCJlbWl0dGVkQnkiLCJmaWVsZFR5cGUiLCJtYXBGaWVsZFR5cGUiLCJzdWJtaXRDb25maWciLCJzdWJtaXQiLCJjYXJkRmllbGRzU3RhdGUiLCJ0aGVuIiwidmFsaWRhdGlvbkRhdGEiLCJnZXRWYWxpZGl0eURhdGEiLCJpc1ZhbGlkIiwibWFwVmFsaWRhdGlvbkVycm9ycyIsInVwZGF0ZWRGaWVsZHMiLCJjYXJkTmFtZUZpZWxkIiwiZmllbGRzS2V5cyIsImV2ZXJ5IiwiZmllbGRzRXJyb3JzIiwiZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUiLCJDYXJkQ29kZSIsInZhbGlkYXRpb25FcnJvcnMiLCJjb21tb25TdHlsZXMiLCJkZWZhdWx0IiwiZm9udFdlaWdodCIsIm91dGxpbmUiLCJ2YWx1ZXMiLCJib3hTaGFkb3ciLCJiYWNrZ3JvdW5kIiwibWFyZ2luTGVmdCIsIm9uRW50ZXIiLCJiaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJpc0FjY2VsZXJhdGVkQ2hlY2tvdXRFbmFibGVkIiwiaXNCaWdDb21tZXJjZVBheW1lbnRzQW5hbHl0aWNzVjJFbmFibGVkIiwiY29ubmVjdENsaWVudFRva2VuIiwicGF5UGFsRmFzdGxhbmVTZGsiLCJCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IiwiYmlnQ29tbWVyY2VQYXltZW50c1Nka0hlbHBlciIsImlzUG9sbGluZ0VuYWJsZWQiLCJiaWdjb21tZXJjZV9wYXltZW50c19hcG1zIiwiYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcyIsInNob3VsZFJlbmRlckZpZWxkcyIsImlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QiLCJiaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uIiwiQXBwcm92ZWQiLCJkZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtIiwicGF5cGFsQW1wc1NkayIsImdldFBheXBhbEFtcHNTZGtPclRocm93IiwiYnV0dG9uU3R5bGUiLCJvbkluaXRCdXR0b24iLCJvbkNyZWF0ZU9yZGVyIiwiaGFuZGxlRmFpbHVyZSIsInVzZVN0b3JlQ3JlZGl0IiwiYXBtRmllbGRzQ29udGFpbmVyIiwiYXBtRmllbGRzU3R5bGVzIiwiZmllbGRDb250YWluZXJFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIlBheW1lbnRGaWVsZHMiLCJ0b1VwcGVyQ2FzZSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSIsImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkIiwicmVkaXJlY3RfdXJsIiwiaXNSZWRpcmVjdEVycm9yIiwicmVkaXJlY3RVcmwiLCJsb2NhdGlvbiIsIkJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSIsImlzQnV5Tm93RmxvdyIsImxvYWREZWZhdWx0Q2hlY2tvdXQiLCJvbkVsaWdpYmlsaXR5RmFpbHVyZSIsImlzQXBwU3dpdGNoRW5hYmxlZCIsImlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkIiwiYXBwU3dpdGNoV2hlbkF2YWlsYWJsZSIsImJ1eU5vd0Zsb3dDYWxsYmFja3MiLCJoYXNSZXR1cm5lZCIsInJlc3VtZSIsImJ1eU5vd0NhcnQiLCJsb2FkQ2hlY2tvdXQiLCJCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneSIsInBheVBhbFNka0hlbHBlciIsIm1lc3NhZ2luZ0NvbnRhaW5lcklkIiwibWVzc2FnaW5nQ29udGFpbmVyIiwicmVtb3ZlQXR0cmlidXRlIiwicGF5cGFsTWVzc2FnZXNTZGsiLCJCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3kiLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneSIsImdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMiLCJ2YWxpZEJ1dHRvblN0eWxlIiwiZ29sZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js\n\n}");

/***/ })

}]);