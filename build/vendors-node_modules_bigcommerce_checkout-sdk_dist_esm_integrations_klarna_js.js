"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["vendors-node_modules_bigcommerce_checkout-sdk_dist_esm_integrations_klarna_js"],{

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/klarna.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/klarna.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKlarnaPaymentStrategy: () => (/* binding */ k),\n/* harmony export */   createKlarnaV2PaymentStrategy: () => (/* binding */ U)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/index.js\");\nvar i,a,r={};function o(e,t){return Object.assign(e,{resolveIds:t})}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class s extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class d extends s{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends s{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(i||(i={}));class l extends s{constructor(e){super(function(e){switch(e){case i.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case i.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case i.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case i.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case i.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case i.MissingCheckoutConfig:case i.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case i.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case i.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case i.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case i.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case i.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case i.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class u extends s{constructor(e){super(function(e){switch(e){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class h extends s{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const p={body:{},headers:{},status:0};class m extends s{constructor(e,{message:t,errors:n}={}){const{body:i,headers:a,status:r}=e||p;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=i,this.headers=a,this.status=r,this.errors=n||[]}}class y extends m{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}const g=[\"AT\",\"BE\",\"CA\",\"CH\",\"CZ\",\"DE\",\"DK\",\"ES\",\"FI\",\"FR\",\"GB\",\"GR\",\"IE\",\"IT\",\"NL\",\"NO\",\"NZ\",\"PL\",\"PT\",\"SE\"],b=[\"AU\"];var v=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}d((i=i.apply(e,t||[])).next())})};class f{constructor(e,t){this.paymentIntegrationService=e,this.klarnaScriptLoader=t}initialize(e){return v(this,void 0,void 0,function*(){this.klarnaCredit=yield this.klarnaScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return v(this,void 0,void 0,function*(){if(!e.payment)throw new d('Unable to proceed because \"payload.payment\" argument is not provided.');const n=e.payment,{paymentData:i}=n,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(n,[\"paymentData\"]),{authorization_token:r}=yield this.authorize();yield this.paymentIntegrationService.initializePayment(a.methodId,{authorizationToken:r}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:a,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new c)}loadWidget(e){return v(this,void 0,void 0,function*(){if(!e.klarna)throw new d('Unable to load widget because \"options.klarna\" argument is not provided.');const{methodId:t,klarna:{container:n,onLoad:r}}=e;return yield this.paymentIntegrationService.loadPaymentMethod(t),new Promise(e=>{const o=this.paymentIntegrationService.getState().getPaymentMethod(t);if(!o)throw new l(i.MissingPaymentMethod);if(!this.klarnaCredit||!o.clientToken)throw new u(a.PaymentNotInitialized);this.klarnaCredit.init({client_token:o.clientToken}),this.klarnaCredit.load({container:n},t=>{r&&r(t),e(t)})})})}getUpdateSessionData(e,n){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([...g,...b],e.countryCode))return{};const i={billing_address:this.mapToKlarnaAddress(e,e.email)};return n&&(i.shipping_address=this.mapToKlarnaAddress(n,e.email)),i}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(b,e)}mapToKlarnaAddress(e,t){const n={street_address:e.address1,city:e.city,country:e.countryCode,given_name:e.firstName,family_name:e.lastName,postal_code:e.postalCode,region:this.needsStateCode(e.countryCode)?e.stateOrProvinceCode:e.stateOrProvince,email:t};return e.address2&&(n.street_address2=e.address2),e.phone&&(n.phone=e.phone),n}authorize(){return new Promise((e,t)=>{const n=this.paymentIntegrationService.getState(),r=n.getBillingAddress(),o=n.getShippingAddress();if(!r)throw new l(i.MissingBillingAddress);if(!this.klarnaCredit)throw new u(a.PaymentNotInitialized);const s=this.getUpdateSessionData(r,o);this.klarnaCredit.authorize(s,n=>n.approved?e(n):n.show_form?t(new h):void t(new y))})}}class w extends s{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class P{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,a,r;return n=this,i=void 0,r=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Credit)||(yield this.scriptLoader.loadScript(\"//credit.klarnacdn.net/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Credit))throw new w;return this.klarnaWindow.Klarna.Credit},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())})}}const k=o(t=>new f(t,new P((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{id:\"klarna\"}]);var I=function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}d((i=i.apply(e,t||[])).next())})};class S{constructor(e,t,n){this.paymentIntegrationService=e,this.klarnav2ScriptLoader=t,this.klarnav2TokenUpdater=n}initialize(e){return I(this,void 0,void 0,function*(){this.klarnaPayments=yield this.klarnav2ScriptLoader.load(),this.unsubscribe=this.paymentIntegrationService.subscribe(t=>{t.isPaymentMethodInitialized({methodId:e.methodId,gatewayId:e.gatewayId})&&this.loadPaymentsWidget(e)},e=>{const t=e.getCheckout();return t&&t.outstandingBalance},e=>{const t=e.getCheckout();return t&&t.coupons}),yield this.loadPaymentsWidget(e)})}deinitialize(){return this.unsubscribe&&this.unsubscribe(),Promise.resolve()}execute(e,t){return I(this,void 0,void 0,function*(){if(!e.payment)throw new d('Unable to proceed because \"payload.payment\" argument is not provided.');const n=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e.payment,[]),{gatewayId:i,methodId:a}=n;if(!i)throw new d('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const r=this.paymentIntegrationService.getState(),{id:o}=r.getCartOrThrow(),{clientToken:s}=r.getPaymentMethodOrThrow(a);yield this.klarnav2TokenUpdater.klarnaOrderInitialization(o,s);const c=this.isKlarnaSingleRadioButtonEnabled()?i:a,{authorization_token:l}=yield this.authorizeOrThrow(c,a);yield this.paymentIntegrationService.initializePayment(i,{authorizationToken:l}),yield this.paymentIntegrationService.submitOrder(Object.assign(Object.assign({},e),{payment:n,useStoreCredit:e.useStoreCredit}),t)})}finalize(){return Promise.reject(new c)}loadPaymentsWidget(e){return I(this,void 0,void 0,function*(){if(!e.klarnav2)throw new d('Unable to load widget because \"options.klarnav2\" argument is not provided.');const{methodId:t,gatewayId:n,klarnav2:{container:r,onLoad:o}}=e;if(!n)throw new d('Unable to proceed because \"payload.payment.gatewayId\" argument is not provided.');const s=this.paymentIntegrationService.getState(),c={params:s.getCartOrThrow().id};return yield this.klarnav2TokenUpdater.updateClientToken(n,{params:c}).catch(()=>{throw new l(i.MissingPaymentMethod)}),new Promise(e=>{const n=s.getPaymentMethodOrThrow(t);if(!this.klarnaPayments||!n.clientToken)throw new u(a.PaymentNotInitialized);this.klarnaPayments.init({client_token:n.clientToken}),this.klarnaPayments.load({container:r,payment_method_category:this.isKlarnaSingleRadioButtonEnabled()?n.gateway:t},t=>{o&&o(t),e(t)})})})}getUpdateSessionData(e,n,i){if(!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([...g,...b],n.countryCode))return{};const a={billing_address:this.mapToKlarnaAddress(e,n,n.email)};return i&&(a.shipping_address=this.mapToKlarnaAddress(e,i,n.email)),a}needsStateCode(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(b,e)}mapToKlarnaAddress(e,t,n){const i=this.paymentIntegrationService.getState(),{checkoutSettings:a}=i.getStoreConfigOrThrow(),r=i.getPaymentMethodOrThrow(e),{enableBillie:o}=r.initializationData||{},s={street_address:t.address1,city:t.city,country:t.countryCode,given_name:t.firstName,family_name:t.lastName,postal_code:t.postalCode,region:this.needsStateCode(t.countryCode)?t.stateOrProvinceCode:t.stateOrProvince,email:n};return t.address2&&(s.street_address2=t.address2),t.phone&&(s.phone=t.phone),t.company&&o&&function(e,t,n=!0){var i;return null!==(i=e[\"PI-3915.b2b_payment_session_for_klarna\"])&&void 0!==i?i:n}(a.features)&&(s.organization_name=t.company),s}authorizeOrThrow(e,t){return I(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const n=this.paymentIntegrationService.getState(),i=n.getBillingAddressOrThrow(),r=n.getShippingAddress(),o=this.getUpdateSessionData(t,i,r);return new Promise((t,n)=>{if(!this.klarnaPayments)return n(new u(a.PaymentNotInitialized));this.klarnaPayments.authorize({payment_method_category:e},o,e=>e.approved?t(e):e.show_form?n(new h):void n(new y))})})}isKlarnaSingleRadioButtonEnabled(){const{features:e}=this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings;return e[\"PI-4025.klarna_single_radio_button\"]}}var C;class M{constructor(e,t=window){this.scriptLoader=e,this.klarnaWindow=t}load(){var e,t,n,i,a,r;return n=this,i=void 0,r=function*(){if((null===(e=this.klarnaWindow.Klarna)||void 0===e?void 0:e.Payments)||(yield this.scriptLoader.loadScript(\"https://x.klarnacdn.net/kp/lib/v1/api.js\")),!(null===(t=this.klarnaWindow.Klarna)||void 0===t?void 0:t.Payments))throw new w;return this.klarnaWindow.Klarna.Payments},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())})}}!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(C||(C={}));const O=C,z=\"This API endpoint is for internal use only and may change in the future\",_={\"X-Checkout-SDK-Version\":\"1.832.1\"};class T{constructor(e){this.requestSender=e}updateClientToken(e,{timeout:t,params:n}={}){const i=`/api/storefront/payments/${e}`;return this.requestSender.get(i,{timeout:t,headers:Object.assign({Accept:O.JsonV1,\"X-API-INTERNAL\":z},_),params:n})}klarnaOrderInitialization(e,t){return n=this,i=void 0,r=function*(){const n={headers:Object.assign({Accept:O.JsonV1,\"X-API-INTERNAL\":z},_),body:{cartId:e,clientToken:t}};yield this.requestSender.put(\"/api/storefront/initialization/klarna\",n)},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}d((r=r.apply(n,i||[])).next())});// removed by dead control flow\n var n, i, a, r; }}const U=o(t=>{const{getHost:i}=t.getState(),a=(0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:i()});return new S(t,new M((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),new T(a))},[{gateway:\"klarna\"}]);\n//# sourceMappingURL=klarna.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMva2xhcm5hLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpSyxhQUFhLGdCQUFnQix3QkFBd0IsYUFBYSxFQUFFLFlBQVksK0RBQStELHVCQUF1QixFQUFFLHNEQUFzRCxzQkFBc0IsZUFBZSxNQUFNLHVUQUF1VCxrQkFBa0IsZUFBZSxpSEFBaUgsa0JBQWtCLGNBQWMsbUtBQW1LLGFBQWEsc3lCQUFzeUIsU0FBUyxHQUFHLGtCQUFrQixlQUFlLGtCQUFrQixVQUFVLG9HQUFvRywrRUFBK0UsK0ZBQStGLHVGQUF1Rix1RkFBdUYsNEhBQTRILGlGQUFpRixzR0FBc0cscUZBQXFGLGdIQUFnSCw2SEFBNkgsc0dBQXNHLDZFQUE2RSwyRUFBMkUsYUFBYSx5U0FBeVMsU0FBUyxHQUFHLGtCQUFrQixlQUFlLGtCQUFrQixVQUFVLHdIQUF3SCxzSEFBc0gsd0hBQXdILDZIQUE2SCw0RkFBNEYsaUZBQWlGLGtCQUFrQixlQUFlLGtIQUFrSCxTQUFTLE9BQU8sV0FBVyxXQUFXLGtCQUFrQixlQUFlLG1CQUFtQixHQUFHLEVBQUUsTUFBTSwwQkFBMEIsTUFBTSx1SkFBdUosa0JBQWtCLGVBQWUsU0FBUyw4RUFBOEUsNEVBQTRFLHVIQUF1SCx3QkFBd0IseUNBQXlDLGNBQWMsSUFBSSxhQUFhLFNBQVMsTUFBTSxjQUFjLElBQUksY0FBYyxTQUFTLE1BQU0sY0FBYyxNQUFNLGdFQUFnRSxLQUFLLGFBQWEsK0JBQStCLEdBQUcsUUFBUSxpQkFBaUIsMkRBQTJELGNBQWMsd0NBQXdDLHFIQUFxSCw4QkFBOEIsMENBQTBDLHNCQUFzQixLQUFLLHdCQUF3QiwrQkFBK0IsS0FBSyx3QkFBd0Isb0JBQW9CLDJCQUEyQixFQUFFLGVBQWUsOERBQThELGFBQWEsd0NBQXdDLG1HQUFtRyxtQkFBbUIsY0FBYyxtQkFBbUIsU0FBUyxzRkFBc0YsNkRBQTZELFFBQVEsc0NBQXND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QUFNLGdFQUFnRSxLQUFLLGFBQWEsK0JBQStCLEVBQUU7QUFBQSxpQkFBVyxFQUFFLGNBQWMsTUFBTSxVQUFVLGdCQUFnQixnRkFBQyxFQUFFLFNBQVMsRUFBRSxxQkFBcUIsMkVBQUMsY0FBYyxHQUFHLGlCQUFpQixHQUErRTtBQUMvd2UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC8uL25vZGVfbW9kdWxlcy9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9rbGFybmEuanM/NjI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnR7Z2V0U2NyaXB0TG9hZGVyIGFzIGV9ZnJvbVwiQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXJcIjtpbXBvcnR7aW5jbHVkZXMgYXMgdH1mcm9tXCJsb2Rhc2hcIjtpbXBvcnR7Y3JlYXRlUmVxdWVzdFNlbmRlciBhcyBufWZyb21cIkBiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlclwiO3ZhciBpLGEscj17fTtmdW5jdGlvbiBvKGUsdCl7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7cmVzb2x2ZUlkczp0fSl9ci5kPShlLHQpPT57Zm9yKHZhciBuIGluIHQpci5vKHQsbikmJiFyLm8oZSxuKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMCxnZXQ6dFtuXX0pfSxyLm89KGUsdCk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpO2NsYXNzIHMgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlKXt2YXIgdDtzdXBlcihlfHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKSx0aGlzLm5hbWU9XCJTdGFuZGFyZEVycm9yXCIsdGhpcy50eXBlPVwic3RhbmRhcmRcIix0PW5ldy50YXJnZXQucHJvdG90eXBlLE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyx0KTp0aGlzLl9fcHJvdG9fXz10LFwiZnVuY3Rpb25cIj09dHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlP0Vycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsbmV3LnRhcmdldCk6dGhpcy5zdGFjaz1uZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFja319Y2xhc3MgZCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuXCIpLHRoaXMubmFtZT1cIkludmFsaWRBcmd1bWVudEVycm9yXCIsdGhpcy50eXBlPVwiaW52YWxpZF9hcmd1bWVudFwifX1jbGFzcyBjIGV4dGVuZHMgc3tjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS5cIiksdGhpcy5uYW1lPVwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yXCIsdGhpcy50eXBlPVwib3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZFwifX0hZnVuY3Rpb24oZSl7ZVtlLk1pc3NpbmdCaWxsaW5nQWRkcmVzcz0wXT1cIk1pc3NpbmdCaWxsaW5nQWRkcmVzc1wiLGVbZS5NaXNzaW5nQ2FydD0xXT1cIk1pc3NpbmdDYXJ0XCIsZVtlLk1pc3NpbmdDaGVja291dD0yXT1cIk1pc3NpbmdDaGVja291dFwiLGVbZS5NaXNzaW5nQ29uc2lnbm1lbnRzPTNdPVwiTWlzc2luZ0NvbnNpZ25tZW50c1wiLGVbZS5NaXNzaW5nQ3VzdG9tZXI9NF09XCJNaXNzaW5nQ3VzdG9tZXJcIixlW2UuTWlzc2luZ0NoZWNrb3V0Q29uZmlnPTVdPVwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnXCIsZVtlLk1pc3NpbmdPcmRlcj02XT1cIk1pc3NpbmdPcmRlclwiLGVbZS5NaXNzaW5nT3JkZXJDb25maWc9N109XCJNaXNzaW5nT3JkZXJDb25maWdcIixlW2UuTWlzc2luZ09yZGVySWQ9OF09XCJNaXNzaW5nT3JkZXJJZFwiLGVbZS5NaXNzaW5nUGF5bWVudD05XT1cIk1pc3NpbmdQYXltZW50XCIsZVtlLk1pc3NpbmdQYXltZW50SWQ9MTBdPVwiTWlzc2luZ1BheW1lbnRJZFwiLGVbZS5NaXNzaW5nUGF5bWVudEluc3RydW1lbnQ9MTFdPVwiTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50XCIsZVtlLk1pc3NpbmdQYXltZW50TWV0aG9kPTEyXT1cIk1pc3NpbmdQYXltZW50TWV0aG9kXCIsZVtlLk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmw9MTNdPVwiTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybFwiLGVbZS5NaXNzaW5nUGF5bWVudFN0YXR1cz0xNF09XCJNaXNzaW5nUGF5bWVudFN0YXR1c1wiLGVbZS5NaXNzaW5nUGF5bWVudFRva2VuPTE1XT1cIk1pc3NpbmdQYXltZW50VG9rZW5cIixlW2UuTWlzc2luZ1NoaXBwaW5nQWRkcmVzcz0xNl09XCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzXCJ9KGl8fChpPXt9KSk7Y2xhc3MgbCBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UgaS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgaS5NaXNzaW5nQ2FydDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgaS5NaXNzaW5nQ29uc2lnbm1lbnRzOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIGkuTWlzc2luZ0NoZWNrb3V0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgaS5NaXNzaW5nQ3VzdG9tZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBpLk1pc3NpbmdDaGVja291dENvbmZpZzpjYXNlIGkuTWlzc2luZ09yZGVyQ29uZmlnOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBpLk1pc3NpbmdPcmRlcjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIGkuTWlzc2luZ09yZGVySWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0LlwiO2Nhc2UgaS5NaXNzaW5nUGF5bWVudDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgaS5NaXNzaW5nUGF5bWVudFRva2VuOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLlwiO2Nhc2UgaS5NaXNzaW5nUGF5bWVudE1ldGhvZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC5cIjtjYXNlIGkuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2RlZmF1bHQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLlwifX0oZSkpLHRoaXMuc3VidHlwZT1lLHRoaXMubmFtZT1cIk1pc3NpbmdEYXRhRXJyb3JcIix0aGlzLnR5cGU9XCJtaXNzaW5nX2RhdGFcIn19IWZ1bmN0aW9uKGUpe2VbZS5DaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkPTBdPVwiQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZFwiLGVbZS5DdXN0b21lck5vdEluaXRpYWxpemVkPTFdPVwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZFwiLGVbZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ9Ml09XCJQYXltZW50Tm90SW5pdGlhbGl6ZWRcIixlW2UuU2hpcHBpbmdOb3RJbml0aWFsaXplZD0zXT1cIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWRcIixlW2UuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZD00XT1cIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWRcIn0oYXx8KGE9e30pKTtjbGFzcyB1IGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihmdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBhLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtjYXNlIGEuUGF5bWVudE5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtjYXNlIGEuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgYS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIjtkZWZhdWx0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC5cIn19KGUpKSx0aGlzLnN1YnR5cGU9ZSx0aGlzLm5hbWU9XCJOb3RJbml0aWFsaXplZEVycm9yXCIsdGhpcy50eXBlPVwibm90X2luaXRpYWxpemVkXCJ9fWNsYXNzIGggZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuXCIpLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvclwiLHRoaXMudHlwZT1cInBheW1lbnRfY2FuY2VsbGVkXCJ9fWNvbnN0IHA9e2JvZHk6e30saGVhZGVyczp7fSxzdGF0dXM6MH07Y2xhc3MgbSBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSx7bWVzc2FnZTp0LGVycm9yczpufT17fSl7Y29uc3R7Ym9keTppLGhlYWRlcnM6YSxzdGF0dXM6cn09ZXx8cDtzdXBlcih0fHxcIkFuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLlwiKSx0aGlzLm5hbWU9XCJSZXF1ZXN0RXJyb3JcIix0aGlzLnR5cGU9XCJyZXF1ZXN0XCIsdGhpcy5ib2R5PWksdGhpcy5oZWFkZXJzPWEsdGhpcy5zdGF0dXM9cix0aGlzLmVycm9ycz1ufHxbXX19Y2xhc3MgeSBleHRlbmRzIG17Y29uc3RydWN0b3IoZSl7c3VwZXIoZSx7bWVzc2FnZTpcIlRoZXJlIGlzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIn0pLHRoaXMubmFtZT1cIlBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X21ldGhvZF9pbnZhbGlkXCJ9fWNvbnN0IGc9W1wiQVRcIixcIkJFXCIsXCJDQVwiLFwiQ0hcIixcIkNaXCIsXCJERVwiLFwiREtcIixcIkVTXCIsXCJGSVwiLFwiRlJcIixcIkdCXCIsXCJHUlwiLFwiSUVcIixcIklUXCIsXCJOTFwiLFwiTk9cIixcIk5aXCIsXCJQTFwiLFwiUFRcIixcIlNFXCJdLGI9W1wiQVVcIl07dmFyIHY9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoZnVuY3Rpb24oYSxyKXtmdW5jdGlvbiBvKGUpe3RyeXtkKGkubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChpLnRocm93KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBkKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbihmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4obyxzKX1kKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgZntjb25zdHJ1Y3RvcihlLHQpe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMua2xhcm5hU2NyaXB0TG9hZGVyPXR9aW5pdGlhbGl6ZShlKXtyZXR1cm4gdih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5rbGFybmFDcmVkaXQ9eWllbGQgdGhpcy5rbGFybmFTY3JpcHRMb2FkZXIubG9hZCgpLHRoaXMudW5zdWJzY3JpYmU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1YnNjcmliZSh0PT57dC5pc1BheW1lbnRNZXRob2RJbml0aWFsaXplZCh7bWV0aG9kSWQ6ZS5tZXRob2RJZCxnYXRld2F5SWQ6ZS5nYXRld2F5SWR9KSYmdGhpcy5sb2FkV2lkZ2V0KGUpfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQub3V0c3RhbmRpbmdCYWxhbmNlfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQuY291cG9uc30pLHlpZWxkIHRoaXMubG9hZFdpZGdldChlKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiB0aGlzLnVuc3Vic2NyaWJlJiZ0aGlzLnVuc3Vic2NyaWJlKCksUHJvbWlzZS5yZXNvbHZlKCl9ZXhlY3V0ZShlLHQpe3JldHVybiB2KHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighZS5wYXltZW50KXRocm93IG5ldyBkKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwicGF5bG9hZC5wYXltZW50XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IG49ZS5wYXltZW50LHtwYXltZW50RGF0YTppfT1uLGE9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtmb3IodmFyIGkgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxpKSYmdC5pbmRleE9mKGkpPDAmJihuW2ldPWVbaV0pO2lmKG51bGwhPWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpe3ZhciBhPTA7Zm9yKGk9T2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTthPGkubGVuZ3RoO2ErKyl0LmluZGV4T2YoaVthXSk8MCYmT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsaVthXSkmJihuW2lbYV1dPWVbaVthXV0pfXJldHVybiBufShuLFtcInBheW1lbnREYXRhXCJdKSx7YXV0aG9yaXphdGlvbl90b2tlbjpyfT15aWVsZCB0aGlzLmF1dGhvcml6ZSgpO3lpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5pbml0aWFsaXplUGF5bWVudChhLm1ldGhvZElkLHthdXRob3JpemF0aW9uVG9rZW46cn0pLHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sZSkse3BheW1lbnQ6YSx1c2VTdG9yZUNyZWRpdDplLnVzZVN0b3JlQ3JlZGl0fSksdCl9KX1maW5hbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlamVjdChuZXcgYyl9bG9hZFdpZGdldChlKXtyZXR1cm4gdih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIWUua2xhcm5hKXRocm93IG5ldyBkKCdVbmFibGUgdG8gbG9hZCB3aWRnZXQgYmVjYXVzZSBcIm9wdGlvbnMua2xhcm5hXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0e21ldGhvZElkOnQsa2xhcm5hOntjb250YWluZXI6bixvbkxvYWQ6cn19PWU7cmV0dXJuIHlpZWxkIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZCh0KSxuZXcgUHJvbWlzZShlPT57Y29uc3Qgbz10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRQYXltZW50TWV0aG9kKHQpO2lmKCFvKXRocm93IG5ldyBsKGkuTWlzc2luZ1BheW1lbnRNZXRob2QpO2lmKCF0aGlzLmtsYXJuYUNyZWRpdHx8IW8uY2xpZW50VG9rZW4pdGhyb3cgbmV3IHUoYS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3RoaXMua2xhcm5hQ3JlZGl0LmluaXQoe2NsaWVudF90b2tlbjpvLmNsaWVudFRva2VufSksdGhpcy5rbGFybmFDcmVkaXQubG9hZCh7Y29udGFpbmVyOm59LHQ9PntyJiZyKHQpLGUodCl9KX0pfSl9Z2V0VXBkYXRlU2Vzc2lvbkRhdGEoZSxuKXtpZighdChbLi4uZywuLi5iXSxlLmNvdW50cnlDb2RlKSlyZXR1cm57fTtjb25zdCBpPXtiaWxsaW5nX2FkZHJlc3M6dGhpcy5tYXBUb0tsYXJuYUFkZHJlc3MoZSxlLmVtYWlsKX07cmV0dXJuIG4mJihpLnNoaXBwaW5nX2FkZHJlc3M9dGhpcy5tYXBUb0tsYXJuYUFkZHJlc3MobixlLmVtYWlsKSksaX1uZWVkc1N0YXRlQ29kZShlKXtyZXR1cm4gdChiLGUpfW1hcFRvS2xhcm5hQWRkcmVzcyhlLHQpe2NvbnN0IG49e3N0cmVldF9hZGRyZXNzOmUuYWRkcmVzczEsY2l0eTplLmNpdHksY291bnRyeTplLmNvdW50cnlDb2RlLGdpdmVuX25hbWU6ZS5maXJzdE5hbWUsZmFtaWx5X25hbWU6ZS5sYXN0TmFtZSxwb3N0YWxfY29kZTplLnBvc3RhbENvZGUscmVnaW9uOnRoaXMubmVlZHNTdGF0ZUNvZGUoZS5jb3VudHJ5Q29kZSk/ZS5zdGF0ZU9yUHJvdmluY2VDb2RlOmUuc3RhdGVPclByb3ZpbmNlLGVtYWlsOnR9O3JldHVybiBlLmFkZHJlc3MyJiYobi5zdHJlZXRfYWRkcmVzczI9ZS5hZGRyZXNzMiksZS5waG9uZSYmKG4ucGhvbmU9ZS5waG9uZSksbn1hdXRob3JpemUoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9Pntjb25zdCBuPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHI9bi5nZXRCaWxsaW5nQWRkcmVzcygpLG89bi5nZXRTaGlwcGluZ0FkZHJlc3MoKTtpZighcil0aHJvdyBuZXcgbChpLk1pc3NpbmdCaWxsaW5nQWRkcmVzcyk7aWYoIXRoaXMua2xhcm5hQ3JlZGl0KXRocm93IG5ldyB1KGEuUGF5bWVudE5vdEluaXRpYWxpemVkKTtjb25zdCBzPXRoaXMuZ2V0VXBkYXRlU2Vzc2lvbkRhdGEocixvKTt0aGlzLmtsYXJuYUNyZWRpdC5hdXRob3JpemUocyxuPT5uLmFwcHJvdmVkP2Uobik6bi5zaG93X2Zvcm0/dChuZXcgaCk6dm9pZCB0KG5ldyB5KSl9KX19Y2xhc3MgdyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGVcIn19Y2xhc3MgUHtjb25zdHJ1Y3RvcihlLHQ9d2luZG93KXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMua2xhcm5hV2luZG93PXR9bG9hZCgpe3ZhciBlLHQsbixpLGEscjtyZXR1cm4gbj10aGlzLGk9dm9pZCAwLHI9ZnVuY3Rpb24qKCl7aWYoKG51bGw9PT0oZT10aGlzLmtsYXJuYVdpbmRvdy5LbGFybmEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLkNyZWRpdCl8fCh5aWVsZCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KFwiLy9jcmVkaXQua2xhcm5hY2RuLm5ldC9saWIvdjEvYXBpLmpzXCIpKSwhKG51bGw9PT0odD10aGlzLmtsYXJuYVdpbmRvdy5LbGFybmEpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LkNyZWRpdCkpdGhyb3cgbmV3IHc7cmV0dXJuIHRoaXMua2xhcm5hV2luZG93LktsYXJuYS5DcmVkaXR9LG5ldygoYT12b2lkIDApfHwoYT1Qcm9taXNlKSkoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBvKGUpe3RyeXtkKHIubmV4dChlKSl9Y2F0Y2goZSl7dChlKX19ZnVuY3Rpb24gcyhlKXt0cnl7ZChyLnRocm93KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBkKHQpe3ZhciBuO3QuZG9uZT9lKHQudmFsdWUpOihuPXQudmFsdWUsbiBpbnN0YW5jZW9mIGE/bjpuZXcgYShmdW5jdGlvbihlKXtlKG4pfSkpLnRoZW4obyxzKX1kKChyPXIuYXBwbHkobixpfHxbXSkpLm5leHQoKSl9KX19Y29uc3Qgaz1vKHQ9Pm5ldyBmKHQsbmV3IFAoZSgpKSksW3tpZDpcImtsYXJuYVwifV0pO3ZhciBJPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKGEscil7ZnVuY3Rpb24gbyhlKXt0cnl7ZChpLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2QoaS50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gZChlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKG8scyl9ZCgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFN7Y29uc3RydWN0b3IoZSx0LG4pe3RoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZT1lLHRoaXMua2xhcm5hdjJTY3JpcHRMb2FkZXI9dCx0aGlzLmtsYXJuYXYyVG9rZW5VcGRhdGVyPW59aW5pdGlhbGl6ZShlKXtyZXR1cm4gSSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5rbGFybmFQYXltZW50cz15aWVsZCB0aGlzLmtsYXJuYXYyU2NyaXB0TG9hZGVyLmxvYWQoKSx0aGlzLnVuc3Vic2NyaWJlPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJzY3JpYmUodD0+e3QuaXNQYXltZW50TWV0aG9kSW5pdGlhbGl6ZWQoe21ldGhvZElkOmUubWV0aG9kSWQsZ2F0ZXdheUlkOmUuZ2F0ZXdheUlkfSkmJnRoaXMubG9hZFBheW1lbnRzV2lkZ2V0KGUpfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQub3V0c3RhbmRpbmdCYWxhbmNlfSxlPT57Y29uc3QgdD1lLmdldENoZWNrb3V0KCk7cmV0dXJuIHQmJnQuY291cG9uc30pLHlpZWxkIHRoaXMubG9hZFBheW1lbnRzV2lkZ2V0KGUpfSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIHRoaXMudW5zdWJzY3JpYmUmJnRoaXMudW5zdWJzY3JpYmUoKSxQcm9taXNlLnJlc29sdmUoKX1leGVjdXRlKGUsdCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLnBheW1lbnQpdGhyb3cgbmV3IGQoJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJwYXlsb2FkLnBheW1lbnRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3Qgbj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiBlKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLGkpJiZ0LmluZGV4T2YoaSk8MCYmKG5baV09ZVtpXSk7aWYobnVsbCE9ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyl7dmFyIGE9MDtmb3IoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpO2E8aS5sZW5ndGg7YSsrKXQuaW5kZXhPZihpW2FdKTwwJiZPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoZSxpW2FdKSYmKG5baVthXV09ZVtpW2FdXSl9cmV0dXJuIG59KGUucGF5bWVudCxbXSkse2dhdGV3YXlJZDppLG1ldGhvZElkOmF9PW47aWYoIWkpdGhyb3cgbmV3IGQoJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJwYXlsb2FkLnBheW1lbnQuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicpO2NvbnN0IHI9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2lkOm99PXIuZ2V0Q2FydE9yVGhyb3coKSx7Y2xpZW50VG9rZW46c309ci5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhhKTt5aWVsZCB0aGlzLmtsYXJuYXYyVG9rZW5VcGRhdGVyLmtsYXJuYU9yZGVySW5pdGlhbGl6YXRpb24obyxzKTtjb25zdCBjPXRoaXMuaXNLbGFybmFTaW5nbGVSYWRpb0J1dHRvbkVuYWJsZWQoKT9pOmEse2F1dGhvcml6YXRpb25fdG9rZW46bH09eWllbGQgdGhpcy5hdXRob3JpemVPclRocm93KGMsYSk7eWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KGkse2F1dGhvcml6YXRpb25Ub2tlbjpsfSkseWllbGQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxlKSx7cGF5bWVudDpuLHVzZVN0b3JlQ3JlZGl0OmUudXNlU3RvcmVDcmVkaXR9KSx0KX0pfWZpbmFsaXplKCl7cmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBjKX1sb2FkUGF5bWVudHNXaWRnZXQoZSl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCFlLmtsYXJuYXYyKXRocm93IG5ldyBkKCdVbmFibGUgdG8gbG9hZCB3aWRnZXQgYmVjYXVzZSBcIm9wdGlvbnMua2xhcm5hdjJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyk7Y29uc3R7bWV0aG9kSWQ6dCxnYXRld2F5SWQ6bixrbGFybmF2Mjp7Y29udGFpbmVyOnIsb25Mb2FkOm99fT1lO2lmKCFuKXRocm93IG5ldyBkKCdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwicGF5bG9hZC5wYXltZW50LmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdCBzPXRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGM9e3BhcmFtczpzLmdldENhcnRPclRocm93KCkuaWR9O3JldHVybiB5aWVsZCB0aGlzLmtsYXJuYXYyVG9rZW5VcGRhdGVyLnVwZGF0ZUNsaWVudFRva2VuKG4se3BhcmFtczpjfSkuY2F0Y2goKCk9Pnt0aHJvdyBuZXcgbChpLk1pc3NpbmdQYXltZW50TWV0aG9kKX0pLG5ldyBQcm9taXNlKGU9Pntjb25zdCBuPXMuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3codCk7aWYoIXRoaXMua2xhcm5hUGF5bWVudHN8fCFuLmNsaWVudFRva2VuKXRocm93IG5ldyB1KGEuUGF5bWVudE5vdEluaXRpYWxpemVkKTt0aGlzLmtsYXJuYVBheW1lbnRzLmluaXQoe2NsaWVudF90b2tlbjpuLmNsaWVudFRva2VufSksdGhpcy5rbGFybmFQYXltZW50cy5sb2FkKHtjb250YWluZXI6cixwYXltZW50X21ldGhvZF9jYXRlZ29yeTp0aGlzLmlzS2xhcm5hU2luZ2xlUmFkaW9CdXR0b25FbmFibGVkKCk/bi5nYXRld2F5OnR9LHQ9PntvJiZvKHQpLGUodCl9KX0pfSl9Z2V0VXBkYXRlU2Vzc2lvbkRhdGEoZSxuLGkpe2lmKCF0KFsuLi5nLC4uLmJdLG4uY291bnRyeUNvZGUpKXJldHVybnt9O2NvbnN0IGE9e2JpbGxpbmdfYWRkcmVzczp0aGlzLm1hcFRvS2xhcm5hQWRkcmVzcyhlLG4sbi5lbWFpbCl9O3JldHVybiBpJiYoYS5zaGlwcGluZ19hZGRyZXNzPXRoaXMubWFwVG9LbGFybmFBZGRyZXNzKGUsaSxuLmVtYWlsKSksYX1uZWVkc1N0YXRlQ29kZShlKXtyZXR1cm4gdChiLGUpfW1hcFRvS2xhcm5hQWRkcmVzcyhlLHQsbil7Y29uc3QgaT10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7Y2hlY2tvdXRTZXR0aW5nczphfT1pLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLHI9aS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhlKSx7ZW5hYmxlQmlsbGllOm99PXIuaW5pdGlhbGl6YXRpb25EYXRhfHx7fSxzPXtzdHJlZXRfYWRkcmVzczp0LmFkZHJlc3MxLGNpdHk6dC5jaXR5LGNvdW50cnk6dC5jb3VudHJ5Q29kZSxnaXZlbl9uYW1lOnQuZmlyc3ROYW1lLGZhbWlseV9uYW1lOnQubGFzdE5hbWUscG9zdGFsX2NvZGU6dC5wb3N0YWxDb2RlLHJlZ2lvbjp0aGlzLm5lZWRzU3RhdGVDb2RlKHQuY291bnRyeUNvZGUpP3Quc3RhdGVPclByb3ZpbmNlQ29kZTp0LnN0YXRlT3JQcm92aW5jZSxlbWFpbDpufTtyZXR1cm4gdC5hZGRyZXNzMiYmKHMuc3RyZWV0X2FkZHJlc3MyPXQuYWRkcmVzczIpLHQucGhvbmUmJihzLnBob25lPXQucGhvbmUpLHQuY29tcGFueSYmbyYmZnVuY3Rpb24oZSx0LG49ITApe3ZhciBpO3JldHVybiBudWxsIT09KGk9ZVtcIlBJLTM5MTUuYjJiX3BheW1lbnRfc2Vzc2lvbl9mb3Jfa2xhcm5hXCJdKSYmdm9pZCAwIT09aT9pOm59KGEuZmVhdHVyZXMpJiYocy5vcmdhbml6YXRpb25fbmFtZT10LmNvbXBhbnkpLHN9YXV0aG9yaXplT3JUaHJvdyhlLHQpe3JldHVybiBJKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7Y29uc3Qgbj10aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPW4uZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCkscj1uLmdldFNoaXBwaW5nQWRkcmVzcygpLG89dGhpcy5nZXRVcGRhdGVTZXNzaW9uRGF0YSh0LGkscik7cmV0dXJuIG5ldyBQcm9taXNlKCh0LG4pPT57aWYoIXRoaXMua2xhcm5hUGF5bWVudHMpcmV0dXJuIG4obmV3IHUoYS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpKTt0aGlzLmtsYXJuYVBheW1lbnRzLmF1dGhvcml6ZSh7cGF5bWVudF9tZXRob2RfY2F0ZWdvcnk6ZX0sbyxlPT5lLmFwcHJvdmVkP3QoZSk6ZS5zaG93X2Zvcm0/bihuZXcgaCk6dm9pZCBuKG5ldyB5KSl9KX0pfWlzS2xhcm5hU2luZ2xlUmFkaW9CdXR0b25FbmFibGVkKCl7Y29uc3R7ZmVhdHVyZXM6ZX09dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncztyZXR1cm4gZVtcIlBJLTQwMjUua2xhcm5hX3NpbmdsZV9yYWRpb19idXR0b25cIl19fXZhciBDO2NsYXNzIE17Y29uc3RydWN0b3IoZSx0PXdpbmRvdyl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLmtsYXJuYVdpbmRvdz10fWxvYWQoKXt2YXIgZSx0LG4saSxhLHI7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxyPWZ1bmN0aW9uKigpe2lmKChudWxsPT09KGU9dGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5QYXltZW50cyl8fCh5aWVsZCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KFwiaHR0cHM6Ly94LmtsYXJuYWNkbi5uZXQva3AvbGliL3YxL2FwaS5qc1wiKSksIShudWxsPT09KHQ9dGhpcy5rbGFybmFXaW5kb3cuS2xhcm5hKXx8dm9pZCAwPT09dD92b2lkIDA6dC5QYXltZW50cykpdGhyb3cgbmV3IHc7cmV0dXJuIHRoaXMua2xhcm5hV2luZG93LktsYXJuYS5QYXltZW50c30sbmV3KChhPXZvaWQgMCl8fChhPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG8oZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgYT9uOm5ldyBhKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihvLHMpfWQoKHI9ci5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pfX0hZnVuY3Rpb24oZSl7ZS5Kc29uPVwiYXBwbGljYXRpb24vanNvblwiLGUuSnNvblYxPVwiYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb25cIn0oQ3x8KEM9e30pKTtjb25zdCBPPUMsej1cIlRoaXMgQVBJIGVuZHBvaW50IGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlXCIsXz17XCJYLUNoZWNrb3V0LVNESy1WZXJzaW9uXCI6XCIxLjgzMi4xXCJ9O2NsYXNzIFR7Y29uc3RydWN0b3IoZSl7dGhpcy5yZXF1ZXN0U2VuZGVyPWV9dXBkYXRlQ2xpZW50VG9rZW4oZSx7dGltZW91dDp0LHBhcmFtczpufT17fSl7Y29uc3QgaT1gL2FwaS9zdG9yZWZyb250L3BheW1lbnRzLyR7ZX1gO3JldHVybiB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0KGkse3RpbWVvdXQ6dCxoZWFkZXJzOk9iamVjdC5hc3NpZ24oe0FjY2VwdDpPLkpzb25WMSxcIlgtQVBJLUlOVEVSTkFMXCI6en0sXykscGFyYW1zOm59KX1rbGFybmFPcmRlckluaXRpYWxpemF0aW9uKGUsdCl7cmV0dXJuIG49dGhpcyxpPXZvaWQgMCxyPWZ1bmN0aW9uKigpe2NvbnN0IG49e2hlYWRlcnM6T2JqZWN0LmFzc2lnbih7QWNjZXB0Ok8uSnNvblYxLFwiWC1BUEktSU5URVJOQUxcIjp6fSxfKSxib2R5OntjYXJ0SWQ6ZSxjbGllbnRUb2tlbjp0fX07eWllbGQgdGhpcy5yZXF1ZXN0U2VuZGVyLnB1dChcIi9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi9rbGFybmFcIixuKX0sbmV3KChhPXZvaWQgMCl8fChhPVByb21pc2UpKShmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG8oZSl7dHJ5e2Qoci5uZXh0KGUpKX1jYXRjaChlKXt0KGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtkKHIudGhyb3coZSkpfWNhdGNoKGUpe3QoZSl9fWZ1bmN0aW9uIGQodCl7dmFyIG47dC5kb25lP2UodC52YWx1ZSk6KG49dC52YWx1ZSxuIGluc3RhbmNlb2YgYT9uOm5ldyBhKGZ1bmN0aW9uKGUpe2Uobil9KSkudGhlbihvLHMpfWQoKHI9ci5hcHBseShuLGl8fFtdKSkubmV4dCgpKX0pO3ZhciBuLGksYSxyfX1jb25zdCBVPW8odD0+e2NvbnN0e2dldEhvc3Q6aX09dC5nZXRTdGF0ZSgpLGE9bih7aG9zdDppKCl9KTtyZXR1cm4gbmV3IFModCxuZXcgTShlKCkpLG5ldyBUKGEpKX0sW3tnYXRld2F5Olwia2xhcm5hXCJ9XSk7ZXhwb3J0e2sgYXMgY3JlYXRlS2xhcm5hUGF5bWVudFN0cmF0ZWd5LFUgYXMgY3JlYXRlS2xhcm5hVjJQYXltZW50U3RyYXRlZ3l9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2xhcm5hLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/klarna.js\n\n}");

/***/ })

}]);