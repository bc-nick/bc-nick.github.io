"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["vendors-node_modules_bigcommerce_checkout-sdk_dist_esm_integrations_cba-mpgs_js-node_modules_-265a41"],{

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cba-mpgs.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cba-mpgs.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCBAMPGSPaymentStrategy: () => (/* binding */ _)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar r;class a extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class o extends a{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class c extends a{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class d extends o{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(r||(r={}));class u extends a{constructor(e){super(function(e){switch(e){case r.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case r.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case r.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case r.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var l,h=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((n=n.apply(e,t||[])).next())})},m=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]])}return i};class p{constructor(e){this._paymentIntegrationService=e}execute(e,t){var i,n;return this._isHostedPaymentFormEnabled(null===(i=e.payment)||void 0===i?void 0:i.methodId,null===(n=e.payment)||void 0===n?void 0:n.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,i=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:n=\"\"}={}}=i.getStoreConfigOrThrow();if(!t)throw new o;const s=this._paymentIntegrationService.createHostedForm(n,t);return s.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=s,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new c)}_executeWithoutHostedForm(e,t){return h(this,void 0,void 0,function*(){const{payment:i}=e,n=m(e,[\"payment\"]),s=i&&i.paymentData;if(!i||!s)throw new d([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:s}))})}_executeWithHostedForm(e,t){return h(this,void 0,void 0,function*(){const{payment:i}=e,n=m(e,[\"payment\"]),s=this._hostedForm;if(!s)throw new u(r.PaymentNotInitialized);if(!i||!i.methodId)throw new d([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield s.validate().then(()=>s.submit(i))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class y extends a{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class g extends a{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}const b={body:{},headers:{},status:0};class f extends a{constructor(e,{message:t,errors:i}={}){const{body:n,headers:s,status:r}=e||b;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=s,this.status=r,this.errors=i||[]}}var v;!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(v||(v={}));const I=v;var w=function(e,t,i,n){return new(i||(i=Promise))(function(s,r){function a(e){try{c(n.next(e))}catch(e){r(e)}}function o(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,o)}c((n=n.apply(e,t||[])).next())})};class P extends p{constructor(e,t){super(e),this.paymentIntegrationService=e,this.cbaMGPSScriptLoader=t,this.sessionId=\"\"}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return w(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{methodId:i}=e;yield this.paymentIntegrationService.loadPaymentMethod(i);const n=this.paymentIntegrationService.getState(),s=n.getPaymentMethodOrThrow(i);if(!function(e){return\"object\"==typeof e&&null!==e&&\"initializationData\"in e&&\"object\"==typeof e.initializationData&&null!==e.initializationData&&\"merchantId\"in e.initializationData&&\"string\"==typeof e.initializationData.merchantId&&(\"boolean\"==typeof e.initializationData.isTestModeFlagEnabled||void 0===e.initializationData.isTestModeFlagEnabled)}(s))throw new y(l.MissingPaymentMethod);const{clientToken:a,initializationData:{isTestModeFlagEnabled:o=!1,merchantId:c},config:{is3dsEnabled:d}}=s;if(d){if(this.threeDSjs=yield this.cbaMGPSScriptLoader.load(o),!this.threeDSjs)throw new u(r.PaymentNotInitialized);if(!a||!c)throw new y(l.MissingPaymentMethod);if(this.sessionId=a,this.locale=n.getLocale(),!this.locale)throw new y(l.MissingCart);yield this.threeDSjs.configure({merchantId:c,sessionId:this.sessionId,callback:()=>{var e;if(null===(e=this.threeDSjs)||void 0===e?void 0:e.isConfigured())return this.paymentIntegrationService.getState();throw new g(\"Failed to configure 3DS API.\")},configuration:{userLanguage:this.locale,wsVersion:62}})}return Promise.resolve()})}execute(e,t){const i=Object.create(null,{execute:{get:()=>super.execute}});return w(this,void 0,void 0,function*(){const{payment:s}=e,r=s&&s.paymentData;if(!s||!r)throw new d([\"payment.paymentData\"]);const a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(s.methodId),{is3dsEnabled:o}=a.config;if(o){const t=Object.assign(Object.assign({},r),{threeDSecure:{token:this.sessionId}});e.payment&&(e.payment.paymentData=t)}return i.execute.call(this,e,t).catch(e=>{if(!o||!(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))return Promise.reject(e);const t=this.paymentIntegrationService.getState(),i=t.getOrder(),{storeProfile:{storeId:s}}=t.getStoreConfigOrThrow();if(!i||!this.sessionId)throw new y(l.MissingCheckout);const r=`${s}_${i.orderId}`;if(\"object\"!=typeof(a=e.body)||null===a||!(\"three_ds_result\"in a)||\"object\"!=typeof a.three_ds_result||null===a.three_ds_result||!(\"token\"in a.three_ds_result)||\"string\"!=typeof a.three_ds_result.token)throw new f;var a;const{three_ds_result:{token:c}}=e.body;return c?this.initiateAuthentication(r,c):Promise.reject(e)})})}finalize(e){return w(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===I.FINALIZE?(yield this.paymentIntegrationService.finalizeOrder(e),Promise.resolve()):Promise.reject(new c)})}deinitialize(){return this.threeDSjs=void 0,this.sessionId=\"\",super.deinitialize()}initiateAuthentication(e,t){return w(this,void 0,void 0,function*(){const i=yield new Promise((i,n)=>{if(!this.threeDSjs)throw new u(r.PaymentNotInitialized);this.threeDSjs.initiateAuthentication(e,t,e=>{const t=e.error;return t?n(new g(t.msg)):this.threeDSjs&&\"PROCEED\"===e.gatewayRecommendation?i(e.restApiResponse):n(new g)})});if(i.transaction&&\"AUTHENTICATION_AVAILABLE\"===i.transaction.authenticationStatus)return this.authenticatePayer(e,t);throw new g})}authenticatePayer(e,t,n=1){return w(this,void 0,void 0,function*(){return new Promise((s,a)=>{if(!this.threeDSjs)return a(new u(r.PaymentNotInitialized));this.threeDSjs.authenticatePayer(e,t,s=>w(this,void 0,void 0,function*(){const r=s.error;return r?r.cause&&\"SERVER_BUSY\"===r.cause&&n<5?(yield new Promise(e=>setTimeout(e,3e3)),this.authenticatePayer(e,t,++n)):a(new g):new Promise(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}),{fullScreenRedirect:!0})})})}}class M extends a{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class S{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e){return t=this,i=void 0,s=function*(){if(yield this._scriptLoader.loadScript(`//${e?\"test\":\"ap\"}-gateway.mastercard.com/static/threeDS/1.3.0/three-ds.min.js`),!this._window.ThreeDS)throw new M;return this._window.ThreeDS},new((n=void 0)||(n=Promise))(function(e,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n(function(e){e(i)})).then(a,o)}c((s=s.apply(t,i||[])).next())});// removed by dead control flow\n var t, i, n, s; }}const _=(z=t=>new P(t,new S((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),O=[{id:\"cba_mpgs\"}],Object.assign(z,{resolveIds:O}));var z,O;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMvY2JhLW1wZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElDQ1lBLEVDS0csTUFBZUMsVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNDLEVEWTVDQyxNQUFNRixHQUFXLHFDQUpyQixLQUFBRyxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNILGFEY1pBLFVDYmhDSSxPQUFPQyxlQUNQRCxPQUFPQyxlRFlRQyxLQ1plTixHRFlmTSxLQ1ZSQyxVQUFZUCxFRFlvQixtQkFBNUJILE1BQU1XLGtCQUNiWCxNQUFNVyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJWixNQUFNUyxLQUFLUCxTQUFTVSxLQUU3QyxFRWRXLE1BQU1DLFVBQTZCZCxFQUM5QyxXQUFBRSxDQUFZQyxHQUNSRSxNQUFNRixHQUFXLHlDQUVqQk8sS0FBS0osS0FBTyx1QkFDWkksS0FBS0gsS0FBTyxrQkFDaEIsRUNQVyxNQUFNUSxVQUEwQ2YsRUFDM0QsV0FBQUUsR0FDSUcsTUFBTSxrRUFFTkssS0FBS0osS0FBTyxvQ0FDWkksS0FBS0gsS0FBTyxpQ0FDaEIsRUNMVyxNQUFNUyxVQUFvQ0YsRUFDckQsV0FBQVosQ0FBWWUsR0FDUixJQUFJZCxFQUFVLHlFQUVWYyxJQUNBZCxFQUFVLEdBQUdBLDREQUFrRWMsRUFBY0MsS0FDekYsVUFJUmIsTUFBTUYsR0FFTk8sS0FBS0osS0FBTyw2QkFDaEIsR0xsQkosU0FBWVAsR0FDUixtRUFDQSx1REFDQSxxREFDQSx1REFDQSxrRUFDSCxDQU5ELENBQVlBLElBQUFBLEVBQXVCLEtBYXBCLE1BQU1vQixVQUE0Qm5CLEVBQzdDLFdBQUFFLENBQW1Ca0IsR0FDZmYsTUFPUixTQUF5QkUsR0FDckIsT0FBUUEsR0FDSixLQUFLUixFQUF3QnNCLHVCQUN6QixNQUFPLG9GQUVYLEtBQUt0QixFQUF3QnVCLHNCQUN6QixN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SSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRUNSVyxNQUFNZ0osRUFDakIsV0FBQXJKLENBQW9Cc0osRUFBcUNDLEVBQTZCQyxRQUFsRSxLQUFBRixjQUFBQSxFQUFxQyxLQUFBQyxRQUFBQSxDQUFzQyxDQUV6RixJQUFBNUMsQ0FBSzhDLEcscUNBT1AsU0FOTWpKLEtBQUs4SSxjQUFjSSxXQUNyQixLQUNJRCxFQUFXLE9BQVMscUVBSXZCakosS0FBSytJLFFBQVFJLFFBQ2QsTUFBTSxJQUFJUCxFQUdkLE9BQU81SSxLQUFLK0ksUUFBUUksT0FDeEIsRTttQkNaSixNQVNBLEdDaEJJQyxFRFFBN0QsR0FFTyxJQUFJRCxFQUNQQyxFQUNBLElBQUlzRCxFQUFvQlEsMkVBQUFBLEtDWDVCQyxFRGU0RCxDQUFDLENBQUVDLEdBQUksYUNiNUR6SixPQUFPMEosT0FBT0osRUFBUSxDQUFFRSxnQkFKcEIsSUFDWEYsRUFDQUUsRSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz8yODlmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9yZXF1ZXN0LWVycm9yLnRzP2M4NDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L3BheW1lbnQtc3RhdHVzLXR5cGVzLnRzPzBiODAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NiYS1tcGdzLWludGVncmF0aW9uL3NyYy9jYmEtbXBncy1wYXltZW50LXN0cmF0ZWd5LnRzPzVkNGEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NiYS1tcGdzLWludGVncmF0aW9uL3NyYy9pcy1jYmEtbXBncy1wYXltZW50LW1ldGhvZC1saWtlLnRzPzkxNGEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2NiYS1tcGdzLWludGVncmF0aW9uL3NyYy9jYmEtbXBncy50cz9lZTZkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYmEtbXBncy1pbnRlZ3JhdGlvbi9zcmMvY2JhLW1wZ3Mtc2NyaXB0LWxvYWRlci50cz85MGY3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYmEtbXBncy1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWNiYS1tcGdzLXBheW1lbnQtc3RyYXRlZ3kudHM/NjY3NyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgQ3VzdG9tRXJyb3IgZnJvbSAnLi9jdXN0b20tZXJyb3InO1xuaW1wb3J0IHNldFByb3RvdHlwZU9mIGZyb20gJy4vc2V0LXByb3RvdHlwZS1vZic7XG5cbi8qKlxuICogVGhpcyBlcnJvciB0eXBlIHNob3VsZCBub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuIEl0IGlzIGEgYmFzZSBjbGFzcyBmb3JcbiAqIGFsbCBjdXN0b20gZXJyb3JzIHRocm93biBpbiB0aGlzIGxpYnJhcnkuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIFN0YW5kYXJkRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEN1c3RvbUVycm9yIHtcbiAgICBuYW1lID0gJ1N0YW5kYXJkRXJyb3InO1xuICAgIHR5cGUgPSAnc3RhbmRhcmQnO1xuXG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICBzZXRQcm90b3R5cGVPZih0aGlzLCBuZXcudGFyZ2V0LnByb3RvdHlwZSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgbmV3LnRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2s7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXRQcm90b3R5cGVPZihvYmplY3Q6IGFueSwgcHJvdG90eXBlOiBvYmplY3QpIHtcbiAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihvYmplY3QsIHByb3RvdHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqZWN0O1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzTmlsLCB2YWx1ZXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9jcmVkaXQtY2FyZC1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByb3RlY3RlZCBfaG9zdGVkRm9ybT86IEhvc3RlZEZvcm07XG4gICAgcHJvdGVjdGVkIF9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSkge31cblxuICAgIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQoXG4gICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQ/Lm1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5nYXRld2F5SWQsXG4gICAgICAgICkgJiYgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybVxuICAgICAgICAgICAgPyB0aGlzLl9leGVjdXRlV2l0aEhvc3RlZEZvcm0ocGF5bG9hZCwgb3B0aW9ucylcbiAgICAgICAgICAgIDogdGhpcy5fZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG9wdGlvbnM/Lm1ldGhvZElkLCBvcHRpb25zPy5nYXRld2F5SWQpIHx8XG4gICAgICAgICAgICAhdGhpcy5faXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShvcHRpb25zKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSBmYWxzZTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybU9wdGlvbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudFNldHRpbmdzOiB7IGJpZ3BheUJhc2VVcmw6IGhvc3QgPSAnJyB9ID0ge30gfSA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUhvc3RlZEZvcm0oaG9zdCwgZm9ybU9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBmb3JtLmF0dGFjaCgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtID0gZm9ybTtcblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLl9ob3N0ZWRGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLl9ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSBwYXltZW50ICYmIHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50RGF0YSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQucGF5bWVudERhdGEnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoeyAuLi5wYXltZW50LCBwYXltZW50RGF0YSB9KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShcbiAgICAgICAgcGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgZm9ybSA9IHRoaXMuX2hvc3RlZEZvcm07XG5cbiAgICAgICAgaWYgKCFmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFwYXltZW50Lm1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5tZXRob2RJZCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGF3YWl0IGZvcm0udmFsaWRhdGUoKS50aGVuKCgpID0+IGZvcm0uc3VibWl0KHBheW1lbnQpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkPzogc3RyaW5nLCBnYXRld2F5SWQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jb25maWcuaXNIb3N0ZWRGb3JtRW5hYmxlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhdmFsdWVzKG9wdGlvbnMgJiYgb3B0aW9ucy5jcmVkaXRDYXJkICYmIG9wdGlvbnMuY3JlZGl0Q2FyZC5mb3JtLmZpZWxkcykuZXZlcnkoXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLy8gSGF2ZSB0byB1c2UgYGFzYCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83Mzk4NzA0NC90eXBlZ3VhcmRpbmctYW4tdW5rbm93bi1uZXN0ZWQtb2JqZWN0IHNob3VsZCBiZSBmaXhlZCBpbiA0LjgrXG5jb25zdCBpc1JlcXVlc3RFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlcXVlc3RFcnJvciA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2JvZHknIGluIGVycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNSZXF1ZXN0RXJyb3I7XG4iLCJpbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5jb25zdCBERUZBVUxUX1JFU1BPTlNFID0ge1xuICAgIGJvZHk6IHt9LFxuICAgIGhlYWRlcnM6IHt9LFxuICAgIHN0YXR1czogMCxcbn07XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdW5hYmxlIHRvIG1ha2UgYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIuIEl0IHdyYXBzXG4gKiBhbnkgc2VydmVyIHJlc3BvbnNlIGludG8gYSBKUyBlcnJvciBvYmplY3QuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlcXVlc3RFcnJvcjxUQm9keSA9IGFueT4gZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBib2R5OiBUQm9keSB8IHt9O1xuICAgIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gICAgZXJyb3JzOiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICBzdGF0dXM6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICByZXNwb25zZT86IFJlc3BvbnNlPFRCb2R5IHwge30+LFxuICAgICAgICB7XG4gICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgZXJyb3JzLFxuICAgICAgICB9OiB7XG4gICAgICAgICAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgICAgICAgICAgZXJyb3JzPzogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgICAgIH0gPSB7fSxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBib2R5LCBoZWFkZXJzLCBzdGF0dXMgfSA9IHJlc3BvbnNlIHx8IERFRkFVTFRfUkVTUE9OU0U7XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1JlcXVlc3RFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdyZXF1ZXN0JztcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgIH1cbn1cbiIsImVudW0gUGF5bWVudFN0YXR1c1R5cGVzIHtcbiAgICBBQ0tOT1dMRURHRSA9ICdBQ0tOT1dMRURHRScsXG4gICAgRklOQUxJWkUgPSAnRklOQUxJWkUnLFxuICAgIElOSVRJQUxJWkUgPSAnSU5JVElBTElaRScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRTdGF0dXNUeXBlcztcbiIsImltcG9ydCB7IG5vb3AsIHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RhdHVzVHlwZXMsXG4gICAgUmVxdWVzdEVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBSZXN0QXBpUmVzcG9uc2UsXG4gICAgVEhSRUVfRF9TRUNVUkVfQVZBSUxBQkxFLFxuICAgIFRIUkVFX0RfU0VDVVJFX0JVU1ksXG4gICAgVEhSRUVfRF9TRUNVUkVfUFJPQ0VFRCxcbiAgICBUaHJlZURTanMsXG59IGZyb20gJy4vY2JhLW1wZ3MnO1xuaW1wb3J0IENCQU1QR1NTY3JpcHRMb2FkZXIgZnJvbSAnLi9jYmEtbXBncy1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7IGlzQ0JBTVBHU1BheW1lbnRNZXRob2RMaWtlLCBpc1RocmVlRFNFcnJvckJvZHkgfSBmcm9tICcuL2lzLWNiYS1tcGdzLXBheW1lbnQtbWV0aG9kLWxpa2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDQkFNUEdTUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSB0aHJlZURTanM/OiBUaHJlZURTanM7XG5cbiAgICBwcml2YXRlIHNlc3Npb25JZCA9ICcnO1xuICAgIHByaXZhdGUgbG9jYWxlPzogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBjYmFNR1BTU2NyaXB0TG9hZGVyOiBDQkFNUEdTU2NyaXB0TG9hZGVyLFxuICAgICkge1xuICAgICAgICBzdXBlcihwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKG9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghaXNDQkFNUEdTUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNsaWVudFRva2VuLFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiB7IGlzVGVzdE1vZGVGbGFnRW5hYmxlZCA9IGZhbHNlLCBtZXJjaGFudElkIH0sXG4gICAgICAgICAgICBjb25maWc6IHsgaXMzZHNFbmFibGVkIH0sXG4gICAgICAgIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmIChpczNkc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGhyZWVEU2pzID0gYXdhaXQgdGhpcy5jYmFNR1BTU2NyaXB0TG9hZGVyLmxvYWQoaXNUZXN0TW9kZUZsYWdFbmFibGVkKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnRocmVlRFNqcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2xpZW50VG9rZW4gfHwgIW1lcmNoYW50SWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkID0gY2xpZW50VG9rZW47XG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IHN0YXRlLmdldExvY2FsZSgpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMubG9jYWxlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRocmVlRFNqcy5jb25maWd1cmUoe1xuICAgICAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50aHJlZURTanM/LmlzQ29uZmlndXJlZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCdGYWlsZWQgdG8gY29uZmlndXJlIDNEUyBBUEkuJyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJMYW5ndWFnZTogdGhpcy5sb2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIHdzVmVyc2lvbjogNjIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KHBheW1lbnQubWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgaXMzZHNFbmFibGVkIH0gPSBwYXltZW50TWV0aG9kLmNvbmZpZztcblxuICAgICAgICBpZiAoaXMzZHNFbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdQYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICB0aHJlZURTZWN1cmU6IHsgdG9rZW46IHRoaXMuc2Vzc2lvbklkIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5wYXltZW50KSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50LnBheW1lbnREYXRhID0gbmV3UGF5bWVudERhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhaXMzZHNFbmFibGVkIHx8XG4gICAgICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICd0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZCcgfSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJldHJ5U3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyID0gcmV0cnlTdGF0ZS5nZXRPcmRlcigpO1xuXG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgc3RvcmVQcm9maWxlOiB7IHN0b3JlSWQgfSxcbiAgICAgICAgICAgIH0gPSByZXRyeVN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBpZiAoIW9yZGVyIHx8ICF0aGlzLnNlc3Npb25JZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVySWQgPSBgJHtzdG9yZUlkfV8ke29yZGVyLm9yZGVySWR9YDtcblxuICAgICAgICAgICAgaWYgKCFpc1RocmVlRFNFcnJvckJvZHkoZXJyb3IuYm9keSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVxdWVzdEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICB0aHJlZV9kc19yZXN1bHQ6IHsgdG9rZW46IHRyYW5zYWN0aW9uSWQgfSxcbiAgICAgICAgICAgIH0gPSBlcnJvci5ib2R5O1xuXG4gICAgICAgICAgICBpZiAoIXRyYW5zYWN0aW9uSWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0aWF0ZUF1dGhlbnRpY2F0aW9uKG9yZGVySWQsIHRyYW5zYWN0aW9uSWQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBmaW5hbGl6ZShvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXIoKTtcblxuICAgICAgICBpZiAob3JkZXIgJiYgc3RhdGUuZ2V0UGF5bWVudFN0YXR1cygpID09PSBQYXltZW50U3RhdHVzVHlwZXMuRklOQUxJWkUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5maW5hbGl6ZU9yZGVyKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMudGhyZWVEU2pzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnNlc3Npb25JZCA9ICcnO1xuXG4gICAgICAgIHJldHVybiBzdXBlci5kZWluaXRpYWxpemUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYXRlQXV0aGVudGljYXRpb24ob3JkZXJJZDogc3RyaW5nLCB0cmFuc2FjdGlvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2U6IFJlc3RBcGlSZXNwb25zZSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy50aHJlZURTanMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRocmVlRFNqcy5pbml0aWF0ZUF1dGhlbnRpY2F0aW9uKG9yZGVySWQsIHRyYW5zYWN0aW9uSWQsIChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBkYXRhLmVycm9yO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihlcnJvci5tc2cpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aHJlZURTanMgJiYgZGF0YS5nYXRld2F5UmVjb21tZW5kYXRpb24gPT09IFRIUkVFX0RfU0VDVVJFX1BST0NFRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGF0YS5yZXN0QXBpUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcigpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZXNwb25zZS50cmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgcmVzcG9uc2UudHJhbnNhY3Rpb24uYXV0aGVudGljYXRpb25TdGF0dXMgPT09IFRIUkVFX0RfU0VDVVJFX0FWQUlMQUJMRVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhlbnRpY2F0ZVBheWVyKG9yZGVySWQsIHRyYW5zYWN0aW9uSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgYXV0aGVudGljYXRlUGF5ZXIoXG4gICAgICAgIG9yZGVySWQ6IHN0cmluZyxcbiAgICAgICAgdHJhbnNhY3Rpb25JZDogc3RyaW5nLFxuICAgICAgICBhdHRlbXB0ID0gMSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGhyZWVEU2pzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRocmVlRFNqcy5hdXRoZW50aWNhdGVQYXllcihcbiAgICAgICAgICAgICAgICBvcmRlcklkLFxuICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSWQsXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgICAgICAgICAgICAgYXN5bmMgKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBkYXRhLmVycm9yO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmNhdXNlICYmIGVycm9yLmNhdXNlID09PSBUSFJFRV9EX1NFQ1VSRV9CVVNZICYmIGF0dGVtcHQgPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2FpdCAzIHNlY29uZHMgZm9yIE1QR1Mgc2VydmVyIHRvIHByb2Nlc3MgdGhlIGBpbml0aWF0ZUF1dGhlbnRpY2F0aW9uYCBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VlOiBTdGVwIDE6IEluaXRpYXRlIEF1dGhlbnRpY2F0aW9uIC0+ICBJbml0aWF0ZSBBdXRoZW50aWNhdGlvbiBSZXF1ZXN0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vYXAtZ2F0ZXdheS5tYXN0ZXJjYXJkLmNvbS9hcGkvZG9jdW1lbnRhdGlvbi9pbnRlZ3JhdGlvbkd1aWRlbGluZXMvc3VwcG9ydGVkRmVhdHVyZXMvcGlja0FkZGl0aW9uYWxGdW5jdGlvbmFsaXR5L2F1dGhlbnRpY2F0aW9uLzNEUy9pbnRlZ3JhdGlvbk1vZGVsQVBJLmh0bWw/bG9jYWxlPWVuX1VTI3hfM0RTVGVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wbHVzcGx1cywgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRoZW50aWNhdGVQYXllcihvcmRlcklkLCB0cmFuc2FjdGlvbklkLCArK2F0dGVtcHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBUaHJlZURTanMgd2lsbCBoYW5kbGUgdGhlIHJlZGlyZWN0IHNvIHJldHVybiBhIHByb21pc2UgdGhhdCBkb2Vzbid0IHJlYWxseSByZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxuZXZlcj4obm9vcCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IGZ1bGxTY3JlZW5SZWRpcmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zICovXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IENCQU1QR1NQYXltZW50TWV0aG9kLCBUaHJlZURTRXJyb3JCb2R5IH0gZnJvbSAnLi9jYmEtbXBncyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NCQU1QR1NQYXltZW50TWV0aG9kTGlrZShcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kLFxuKTogcGF5bWVudE1ldGhvZCBpcyBDQkFNUEdTUGF5bWVudE1ldGhvZCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIHBheW1lbnRNZXRob2QgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHBheW1lbnRNZXRob2QgIT09IG51bGwgJiZcbiAgICAgICAgJ2luaXRpYWxpemF0aW9uRGF0YScgaW4gcGF5bWVudE1ldGhvZCAmJlxuICAgICAgICB0eXBlb2YgKHBheW1lbnRNZXRob2QgYXMgQ0JBTVBHU1BheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgKHBheW1lbnRNZXRob2QgYXMgQ0JBTVBHU1BheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YSAhPT0gbnVsbCAmJlxuICAgICAgICAnbWVyY2hhbnRJZCcgaW4gKHBheW1lbnRNZXRob2QgYXMgQ0JBTVBHU1BheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YSAmJlxuICAgICAgICB0eXBlb2YgKHBheW1lbnRNZXRob2QgYXMgQ0JBTVBHU1BheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YS5tZXJjaGFudElkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAodHlwZW9mIChwYXltZW50TWV0aG9kIGFzIENCQU1QR1NQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEuaXNUZXN0TW9kZUZsYWdFbmFibGVkID09PVxuICAgICAgICAgICAgJ2Jvb2xlYW4nIHx8XG4gICAgICAgICAgICB0eXBlb2YgKHBheW1lbnRNZXRob2QgYXMgQ0JBTVBHU1BheW1lbnRNZXRob2QpLmluaXRpYWxpemF0aW9uRGF0YVxuICAgICAgICAgICAgICAgIC5pc1Rlc3RNb2RlRmxhZ0VuYWJsZWQgPT09ICd1bmRlZmluZWQnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RocmVlRFNFcnJvckJvZHkoYm9keTogdW5rbm93bik6IGJvZHkgaXMgVGhyZWVEU0Vycm9yQm9keSB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGJvZHkgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGJvZHkgIT09IG51bGwgJiZcbiAgICAgICAgJ3RocmVlX2RzX3Jlc3VsdCcgaW4gYm9keSAmJlxuICAgICAgICB0eXBlb2YgKGJvZHkgYXMgVGhyZWVEU0Vycm9yQm9keSkudGhyZWVfZHNfcmVzdWx0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAoYm9keSBhcyBUaHJlZURTRXJyb3JCb2R5KS50aHJlZV9kc19yZXN1bHQgIT09IG51bGwgJiZcbiAgICAgICAgJ3Rva2VuJyBpbiAoYm9keSBhcyBUaHJlZURTRXJyb3JCb2R5KS50aHJlZV9kc19yZXN1bHQgJiZcbiAgICAgICAgdHlwZW9mIChib2R5IGFzIFRocmVlRFNFcnJvckJvZHkpLnRocmVlX2RzX3Jlc3VsdC50b2tlbiA9PT0gJ3N0cmluZydcbiAgICApO1xufVxuIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uICovXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBjb25zdCBUSFJFRV9EX1NFQ1VSRV9QUk9DRUVEID0gJ1BST0NFRUQnO1xuZXhwb3J0IGNvbnN0IFRIUkVFX0RfU0VDVVJFX0JVU1kgPSAnU0VSVkVSX0JVU1knO1xuZXhwb3J0IGNvbnN0IFRIUkVFX0RfU0VDVVJFX0FWQUlMQUJMRSA9ICdBVVRIRU5USUNBVElPTl9BVkFJTEFCTEUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENCQU1QR1NIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBUaHJlZURTPzogVGhyZWVEU2pzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRocmVlRFNqcyB7XG4gICAgLy8gQ29uZmlndXJhdGlvbiBtZXRob2QgZm9yIGluaXRpYWxpemluZyB0aGUgQVBJLlxuICAgIGNvbmZpZ3VyZShjb25maWc6IFRocmVlRFNDb25maWd1cmF0aW9uKTogUHJvbWlzZTx2b2lkPjtcbiAgICAvLyBDb252ZW5pZW5jZSBtZXRob2QgdG8gY2hlY2sgaWYgdGhlIEFQSSBoYXMgYmVlbiBjb25maWd1cmVkIHN1Y2Nlc3NmdWxseS5cbiAgICBpc0NvbmZpZ3VyZWQoKTogYm9vbGVhbjtcbiAgICAvLyBBdXRoZW50aWNhdGlvbiBmb3IgdGhlIGFyZ3VtZW50cyBwYXNzZWQuXG4gICAgaW5pdGlhdGVBdXRoZW50aWNhdGlvbihcbiAgICAgICAgb3JkZXJJZDogc3RyaW5nLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrOiAoZGF0YTogVGhyZWVEU0F1dGhlbnRpY2F0aW9uUmVzcG9uc2UpID0+IHZvaWQsXG4gICAgKTogdm9pZDtcbiAgICBhdXRoZW50aWNhdGVQYXllcihcbiAgICAgICAgb3JkZXJJZDogc3RyaW5nLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrOiAoZGF0YTogVGhyZWVEU0F1dGhlbnRpY2F0aW9uUmVzcG9uc2UpID0+IHZvaWQsXG4gICAgICAgIG9wdGlvbmFsUGFyYW1zPzogQXV0aGVudGljYXRlUGF5ZXJPcHRpb25hbFBhcmFtcyxcbiAgICApOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlc3RBcGlSZXNwb25zZSB7XG4gICAgdHJhbnNhY3Rpb246IHtcbiAgICAgICAgYXV0aGVudGljYXRpb25TdGF0dXM6IHN0cmluZztcbiAgICB9O1xufVxuXG4vLyBDb25maWd1cmF0aW9uIHJlcXVpcmVkIHRvIGNvbmZpZ3VyZSBUaHJlZURTXG5leHBvcnQgaW50ZXJmYWNlIFRocmVlRFNDb25maWd1cmF0aW9uIHtcbiAgICBtZXJjaGFudElkOiBzdHJpbmc7XG4gICAgc2Vzc2lvbklkOiBzdHJpbmc7XG4gICAgY29uZmlndXJhdGlvbjogVGhyZWVEU0FQSUNvbmZpZ3VyYXRpb247XG4gICAgY2FsbGJhY2soKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUaHJlZURTQXV0aGVudGljYXRpb25SZXNwb25zZSB7XG4gICAgZXJyb3I/OiBUaHJlZURTQXV0aGVudGljYXRpb25FcnJvcjtcbiAgICByZXN0QXBpUmVzcG9uc2U6IFJlc3RBcGlSZXNwb25zZTtcbiAgICBnYXRld2F5UmVjb21tZW5kYXRpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGVQYXllck9wdGlvbmFsUGFyYW1zIHtcbiAgICBmdWxsU2NyZWVuUmVkaXJlY3Q6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWVEU0F1dGhlbnRpY2F0aW9uRXJyb3Ige1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtc2c6IHN0cmluZztcbiAgICBjYXVzZT86IHN0cmluZztcbn1cblxuLy8gSlNPTiB2YWx1ZSBzdXBwb3J0aW5nIGRhdGEgZWxlbWVudHMgbGlrZSB1c2VyTGFuZ3VhZ2UsIFJFU1QgQVBJIHZlcnNpb24gKHdzVmVyc2lvbilcbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWVEU0FQSUNvbmZpZ3VyYXRpb24ge1xuICAgIC8vIEEgbGFuZ3VhZ2UgaWRlbnRpZmllciBvciBJRVRGIGxhbmd1YWdlIHRhZyB0byBjb250cm9sIHRoZSBsYW5ndWFnZSBvZiB0aGUgcGF5bWVudCBwYWdlIGRpc3BsYXllZCB0byB0aGUgcGF5ZXIuXG4gICAgLy8gIEZvciBleGFtcGxlLCBcImVuX1VTXCIsIGVzLCBcImZyLUNBXCIuIEJ5IGRlZmF1bHQsIHRoZSBsYW5ndWFnZSBpcyBcImVuX1VTXCIuXG4gICAgdXNlckxhbmd1YWdlOiBzdHJpbmc7XG4gICAgLy8gVGhlIFdlYiBTZXJ2aWNlcyBBUEkgdmVyc2lvbiB0aGF0IHlvdSBzdWJtaXR0ZWQgdGhlIHJlcXVlc3QgaW4uIElFOiA2MlxuICAgIHdzVmVyc2lvbjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENCQU1QR1NQYXltZW50TWV0aG9kIGV4dGVuZHMgUGF5bWVudE1ldGhvZCB7XG4gICAgaW5pdGlhbGl6YXRpb25EYXRhOiBDQkFNUEdTSW5pdGlhbGl6YXRpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENCQU1QR1NJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGlzVGVzdE1vZGVGbGFnRW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRocmVlRFNFcnJvckJvZHkge1xuICAgIHRocmVlX2RzX3Jlc3VsdDoge1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb24gKi9cbmltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgQ0JBTVBHU0hvc3RXaW5kb3csIFRocmVlRFNqcyB9IGZyb20gJy4vY2JhLW1wZ3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDQkFNUEdTU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlciwgcHJpdmF0ZSBfd2luZG93OiBDQkFNUEdTSG9zdFdpbmRvdyA9IHdpbmRvdykge31cblxuICAgIGFzeW5jIGxvYWQodGVzdE1vZGU/OiBib29sZWFuKTogUHJvbWlzZTxUaHJlZURTanM+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXG4gICAgICAgICAgICBgLy8ke1xuICAgICAgICAgICAgICAgIHRlc3RNb2RlID8gJ3Rlc3QnIDogJ2FwJ1xuICAgICAgICAgICAgfS1nYXRld2F5Lm1hc3RlcmNhcmQuY29tL3N0YXRpYy90aHJlZURTLzEuMy4wL3RocmVlLWRzLm1pbi5qc2AsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCF0aGlzLl93aW5kb3cuVGhyZWVEUykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fd2luZG93LlRocmVlRFM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IENCQU1QR1NQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9jYmEtbXBncy1wYXltZW50LXN0cmF0ZWd5JztcbmltcG9ydCBDQkFNUEdTU2NyaXB0TG9hZGVyIGZyb20gJy4vY2JhLW1wZ3Mtc2NyaXB0LWxvYWRlcic7XG5cbmNvbnN0IGNyZWF0ZUNCQU1QR1NQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8Q0JBTVBHU1BheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQ0JBTVBHU1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IENCQU1QR1NTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQ0JBTVBHU1BheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdjYmFfbXBncycgfV0pO1xuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iXSwibmFtZXMiOlsiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJTdGFuZGFyZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJwcm90b3R5cGUiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJ0aGlzIiwiX19wcm90b19fIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIiwiaW52YWxpZEZpZWxkcyIsImpvaW4iLCJOb3RJbml0aWFsaXplZEVycm9yIiwic3VidHlwZSIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsImdldEVycm9yTWVzc2FnZSIsIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSIsIl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJvcHRpb25zIiwiX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkIiwicGF5bWVudCIsIm1ldGhvZElkIiwiZ2F0ZXdheUlkIiwiX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtIiwiX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybSIsImluaXRpYWxpemUiLCJfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZm9ybU9wdGlvbnMiLCJjcmVkaXRDYXJkIiwiZm9ybSIsInN0YXRlIiwiZ2V0U3RhdGUiLCJwYXltZW50U2V0dGluZ3MiLCJiaWdwYXlCYXNlVXJsIiwiaG9zdCIsImdldFN0b3JlQ29uZmlnT3JUaHJvdyIsImNyZWF0ZUhvc3RlZEZvcm0iLCJhdHRhY2giLCJ0aGVuIiwiX2hvc3RlZEZvcm0iLCJkZWluaXRpYWxpemUiLCJkZXRhY2giLCJmaW5hbGl6ZSIsInJlamVjdCIsIm9yZGVyIiwicGF5bWVudERhdGEiLCJzdWJtaXRPcmRlciIsInN1Ym1pdFBheW1lbnQiLCJ2YWxpZGF0ZSIsInN1Ym1pdCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiY29uZmlnIiwiaXNIb3N0ZWRGb3JtRW5hYmxlZCIsInZhbHVlcyIsImZpZWxkcyIsImV2ZXJ5IiwiaXNOaWwiLCJNaXNzaW5nRGF0YUVycm9yIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IiLCJERUZBVUxUX1JFU1BPTlNFIiwiYm9keSIsImhlYWRlcnMiLCJzdGF0dXMiLCJSZXF1ZXN0RXJyb3IiLCJyZXNwb25zZSIsImVycm9ycyIsIlBheW1lbnRTdGF0dXNUeXBlcyIsIkNCQU1QR1NQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiY2JhTUdQU1NjcmlwdExvYWRlciIsInNlc3Npb25JZCIsImxvYWRQYXltZW50TWV0aG9kIiwicGF5bWVudE1ldGhvZCIsImluaXRpYWxpemF0aW9uRGF0YSIsIm1lcmNoYW50SWQiLCJpc1Rlc3RNb2RlRmxhZ0VuYWJsZWQiLCJpc0NCQU1QR1NQYXltZW50TWV0aG9kTGlrZSIsImNsaWVudFRva2VuIiwiaXMzZHNFbmFibGVkIiwidGhyZWVEU2pzIiwibG9hZCIsImxvY2FsZSIsImdldExvY2FsZSIsImNvbmZpZ3VyZSIsImNhbGxiYWNrIiwiaXNDb25maWd1cmVkIiwiY29uZmlndXJhdGlvbiIsInVzZXJMYW5ndWFnZSIsIndzVmVyc2lvbiIsIm5ld1BheW1lbnREYXRhIiwidGhyZWVEU2VjdXJlIiwidG9rZW4iLCJjYXRjaCIsImVycm9yIiwic29tZSIsImNvZGUiLCJyZXRyeVN0YXRlIiwiZ2V0T3JkZXIiLCJzdG9yZVByb2ZpbGUiLCJzdG9yZUlkIiwib3JkZXJJZCIsInRocmVlX2RzX3Jlc3VsdCIsInRyYW5zYWN0aW9uSWQiLCJpbml0aWF0ZUF1dGhlbnRpY2F0aW9uIiwiZ2V0UGF5bWVudFN0YXR1cyIsIkZJTkFMSVpFIiwiZmluYWxpemVPcmRlciIsInVuZGVmaW5lZCIsImRhdGEiLCJtc2ciLCJnYXRld2F5UmVjb21tZW5kYXRpb24iLCJyZXN0QXBpUmVzcG9uc2UiLCJ0cmFuc2FjdGlvbiIsImF1dGhlbnRpY2F0aW9uU3RhdHVzIiwiYXV0aGVudGljYXRlUGF5ZXIiLCJhdHRlbXB0IiwiX3Jlc29sdmUiLCJjYXVzZSIsInNldFRpbWVvdXQiLCJub29wIiwiZnVsbFNjcmVlblJlZGlyZWN0IiwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IiLCJDQkFNUEdTU2NyaXB0TG9hZGVyIiwiX3NjcmlwdExvYWRlciIsIl93aW5kb3ciLCJ3aW5kb3ciLCJ0ZXN0TW9kZSIsImxvYWRTY3JpcHQiLCJUaHJlZURTIiwibW9kdWxlIiwiZ2V0U2NyaXB0TG9hZGVyIiwicmVzb2x2ZUlkcyIsImlkIiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cba-mpgs.js\n\n}");

/***/ }),

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cybersource.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cybersource.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCyberSourcePaymentStrategy: () => (/* binding */ j),\n/* harmony export */   createCyberSourceV2PaymentStrategy: () => (/* binding */ V)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar s={};function c(e){return Boolean(e.instrumentId)}s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const d=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;var u,l,h=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class m{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return h(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode),yield this._cardinalClient.configure(yield this._getClientToken(e))})}start(e,t,n,r){return h(this,void 0,void 0,function*(){const{getCardInstrument:a,getPaymentMethodOrThrow:s}=this._paymentIntegrationService.getState(),{payment:{methodId:u=\"\",paymentData:l={}}={}}=t,h=c(l)&&a(l.instrumentId),m=h?h.iin:r&&r.getBin();m&&(yield this._cardinalClient.runBinProcess(m));try{return yield e((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t,{payment:{paymentData:{threeDSecure:{token:s(u).clientToken}}}}),n)}catch(e){if(!d(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;const n=yield this._cardinalClient.getThreeDSecureData(e.body.three_ds_result,this._getOrderData());if(!r)return void(yield this._paymentIntegrationService.submitPayment((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}})));yield r.submit((0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)(t.payment,{paymentData:{threeDSecure:n}}))}})}_getClientToken(e){return h(this,void 0,void 0,function*(){return e.clientToken?e.clientToken:(yield this._paymentIntegrationService.loadPaymentMethod(e.id),this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.id).clientToken||\"\")})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),i=e.getCheckoutOrThrow(),r=e.getOrderOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i.cart.currency.code,id:r.orderId.toString(),amount:i.cart.cartAmount}}}class p extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(u||(u={}));class y extends p{constructor(e){super(function(e){switch(e){case u.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case u.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case u.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case u.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case u.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case u.MissingCheckoutConfig:case u.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case u.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case u.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case u.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case u.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case u.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case u.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class g extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(l||(l={}));class b extends p{constructor(e){super(function(e){switch(e){case l.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case l.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case l.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case l.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const f=[100004,1010,1011,1020];var _,v,C,w,S,P,I;!function(e){e.SetupCompleted=\"payments.setupComplete\",e.Validated=\"payments.validated\"}(_||(_={})),function(e){e.Init=\"init\",e.Complete=\"complete\",e.Confirm=\"confirm\"}(v||(v={})),function(e){e.Success=\"SUCCESS\",e.NoAction=\"NOACTION\",e.Failure=\"FAILURE\",e.Error=\"ERROR\"}(C||(C={})),function(e){e.CCA=\"CCA\",e.Paypal=\"Paypal\",e.Wallet=\"Wallet\",e.VisaCheckout=\"VisaCheckout\",e.ApplePay=\"ApplePay\",e.DiscoverWallet=\"DiscoverWallet\"}(w||(w={})),function(e){e.BinProcess=\"bin.process\"}(S||(S={})),function(e){e.CCA=\"cca\"}(P||(P={})),function(e){e.Yes=\"Y\",e.No=\"N\"}(I||(I={}));class M{constructor(e){this._scriptLoader=e,this._provider=\"\",this._testMode=!1,this._configurationToken=\"\"}load(e,t=!1){return this._provider=e,this._testMode=t,this._sdk||(this._sdk=this._scriptLoader.load(e,t)),this._sdk.then(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)}configure(e){if(this._configurationToken){if(this._configurationToken===e)return Promise.resolve();this._sdk=this._scriptLoader.load(`${this._provider}.${Date.now()}`,this._testMode)}return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(_.SetupCompleted,()=>{n.off(_.SetupCompleted),n.off(_.Validated),this._configurationToken=e,i()}),n.on(_.Validated,e=>{n.off(_.SetupCompleted),n.off(_.Validated),e.ActionCode===C.Error&&((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(f,e.ErrorNumber)&&r(new y(u.MissingPaymentMethod)),r(new g(e.ErrorDescription)))}),n.setup(v.Init,{jwt:e})}))}runBinProcess(e){return this._getClientSDK().then(t=>t.trigger(S.BinProcess,e).catch(lodash__WEBPACK_IMPORTED_MODULE_1__.noop)).then(e=>{if(!e||!e.Status)throw new b(l.PaymentNotInitialized)})}getThreeDSecureData(e,t){return this._getClientSDK().then(n=>new Promise((i,r)=>{n.on(_.Validated,(e,t)=>{if(n.off(_.Validated),!t)return r(new g(e.ErrorDescription?e.ErrorDescription:\"An error was encountered while processing the transaction.\"));if(!e.ActionCode)return i({token:t});switch(e.ActionCode){case C.Success:return i({token:t});case C.NoAction:return e.ErrorNumber>0?r(new g(e.ErrorDescription)):e.Payment&&e.Payment.ExtendedData&&e.Payment.ExtendedData.SignatureVerification===I.Yes?i({token:t}):r(new g(\"Transaction signature could not be validated.\"));case C.Failure:return r(new g(\"User failed authentication or an error was encountered while processing the transaction.\"));case C.Error:return r(new g(e.ErrorDescription))}});const o={AcsUrl:e.acs_url,Payload:e.merchant_data},a=this._mapToPartialOrder(t,e.payer_auth_request);n.continue(P.CCA,o,a)}))}_mapToPartialOrder(e,t){const n={BillingAddress:this._mapToCardinalAddress(e.billingAddress)};return e.paymentData&&(n.Account=this._mapToCardinalAccount(e.paymentData)),e.billingAddress.email&&(n.Email1=e.billingAddress.email),e.shippingAddress&&(n.ShippingAddress=this._mapToCardinalAddress(e.shippingAddress)),{Consumer:n,OrderDetails:{OrderNumber:e.id,Amount:e.amount,CurrencyCode:e.currencyCode,OrderChannel:\"S\",TransactionId:t}}}_mapToCardinalAccount(e){return{AccountNumber:Number(e.ccNumber),ExpirationMonth:Number(e.ccExpiry.month),ExpirationYear:Number(e.ccExpiry.year),NameOnAccount:e.ccName,CardCode:Number(e.ccCvv)}}_mapToCardinalAddress(e){const t={FirstName:e.firstName,LastName:e.lastName,Address1:e.address1,City:e.city,State:e.stateOrProvince,PostalCode:e.postalCode,CountryCode:e.countryCode};return e.address2&&(t.Address2=e.address2),e.phone&&(t.Phone1=e.phone),t}_getClientSDK(){if(!this._sdk)throw new b(l.PaymentNotInitialized);return this._sdk}}class O extends p{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class A{constructor(e,t=window){this._scriptLoader=e,this._window=t}load(e,t){const n=t?\"https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js\":\"https://songbird.cardinalcommerce.com/edge/v1/songbird.js\";return this._scriptLoader.loadScript(`${n}?v=${e}`).then(()=>{if(!this._window.Cardinal)throw new O;return this._window.Cardinal})}}function x(e,t){return Object.assign(e,{resolveIds:t})}class k extends p{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class D extends p{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class E extends k{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}var N=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},T=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class z{constructor(e){this._paymentIntegrationService=e}execute(e,t){var n,i;return this._isHostedPaymentFormEnabled(null===(n=e.payment)||void 0===n?void 0:n.methodId,null===(i=e.payment)||void 0===i?void 0:i.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,n=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:i=\"\"}={}}=n.getStoreConfigOrThrow();if(!t)throw new k;const r=this._paymentIntegrationService.createHostedForm(i,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new D)}_executeWithoutHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=T(e,[\"payment\"]),r=n&&n.paymentData;if(!n||!r)throw new E([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:r}))})}_executeWithHostedForm(e,t){return N(this,void 0,void 0,function*(){const{payment:n}=e,i=T(e,[\"payment\"]),r=this._hostedForm;if(!r)throw new b(l.PaymentNotInitialized);if(!n||!n.methodId)throw new E([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(i,t),yield r.validate().then(()=>r.submit(n))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}var F=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class U extends z{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return F(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return F(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const j=x(t=>new U(t,new m(t,new M(new A((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),[{id:\"cybersource\"}]);var B=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class H{constructor(e,t){this._paymentIntegrationService=e,this._cardinalClient=t}prepare(e){return B(this,void 0,void 0,function*(){yield this._cardinalClient.load(e.id,e.config.testMode)})}start(e,t,n,i){var r,a,s,c;return B(this,void 0,void 0,function*(){const{getCardInstrument:u}=this._paymentIntegrationService.getState(),{payment:l={methodId:\"\"}}=t,{paymentData:h={}}=l;try{return yield e(t,n)}catch(e){if(d(e)&&\"additional_action_required\"===(null===(r=e.body)||void 0===r?void 0:r.status)){const t=null===(s=null===(a=e.body.additional_action_required)||void 0===a?void 0:a.data)||void 0===s?void 0:s.token,n=null===(c=e.body.three_ds_result)||void 0===c?void 0:c.payer_auth_request;yield this._cardinalClient.configure(t);const r=this._getBin(h,u,i);r&&(yield this._cardinalClient.runBinProcess(r));try{return yield this._submitPayment(l,{xid:n},i)}catch(e){if(d(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"})){const t=e.body.three_ds_result,n=null==t?void 0:t.payer_auth_request;return yield this._cardinalClient.getThreeDSecureData(t,this._getOrderData()),this._submitPayment(l,{token:n},i)}throw e}}throw e}})}_getOrderData(){const e=this._paymentIntegrationService.getState(),t=e.getBillingAddressOrThrow(),n=e.getShippingAddress(),{cart:{currency:{code:i},cartAmount:r}}=e.getCheckoutOrThrow();return{billingAddress:t,shippingAddress:n,currencyCode:i,id:e.getOrderOrThrow().orderId.toString(),amount:r}}_submitPayment(e,t,n){return B(this,void 0,void 0,function*(){const r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.merge)({},e,{paymentData:{threeDSecure:t}});n||(yield this._paymentIntegrationService.submitPayment(r)),yield null==n?void 0:n.submit(r)})}_getBin(e,t,n){const i=c(e)&&t(e.instrumentId),r=function(e){const t=e;return!c(t)&&\"string\"==typeof t.ccName&&\"string\"==typeof t.ccNumber&&\"object\"==typeof t.ccExpiry&&\"string\"==typeof t.ccExpiry.month&&\"string\"==typeof t.ccExpiry.year}(e)&&e.ccNumber,o=n?n.getBin():r;return(i?i.iin:o)||\"\"}}var q=function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};class R extends z{constructor(e,t){super(e),this._threeDSecureFlow=t}initialize(e){const t=Object.create(null,{initialize:{get:()=>super.initialize}});return q(this,void 0,void 0,function*(){yield t.initialize.call(this,e);const{getPaymentMethodOrThrow:n}=this._paymentIntegrationService.getState(),i=n(e.methodId);i.config.is3dsEnabled&&(yield this._threeDSecureFlow.prepare(i))})}execute(e,t){const n=Object.create(null,{execute:{get:()=>super.execute}});return q(this,void 0,void 0,function*(){const{payment:{methodId:i=\"\"}={}}=e,{getPaymentMethodOrThrow:r}=this._paymentIntegrationService.getState();return r(i).config.is3dsEnabled?this._threeDSecureFlow.start(n.execute.bind(this),e,t,this._hostedForm):n.execute.call(this,e,t)})}}const V=x(t=>new R(t,new H(t,new M(new A((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())))),[{id:\"cybersourcev2\"},{id:\"bnz\"},{id:\"barclays\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMvY3liZXJzb3VyY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDQSxJQUFJQSxFQUFzQixDQUFDLEVDT1osU0FBU0MsRUFDcEJDLEdBRUEsT0FBT0MsUUFBU0QsRUFBaUNFLGFBQ3JELENDWEFKLEVBQW9CSyxFQUFJLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFAsRUFBb0JTLEVBQUVGLEVBQVlDLEtBQVNSLEVBQW9CUyxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFUixFQUFvQlMsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0dsRixNQUlBLEVBSndCSSxHQUNJLGlCQUFWQSxHQUFnQyxPQUFWQSxHQUFrQixTQUFVQSxFLElDRnhEQyxFQ0FBQyxFLGtTQ2FHLE1BQU1DLEVBQ2pCLFdBQUFDLENBQ1lDLEVBQ0FDLEdBREEsS0FBQUQsMkJBQUFBLEVBQ0EsS0FBQUMsZ0JBQUFBLENBQ1QsQ0FFRyxPQUFBQyxDQUFRQyxHLDhDQUNKQyxLQUFLSCxnQkFBZ0JJLEtBQUtGLEVBQU9HLEdBQUlILEVBQU9JLE9BQU9DLGdCQUNuREosS0FBS0gsZ0JBQWdCUSxnQkFBZ0JMLEtBQUtNLGdCQUFnQlAsR0FDcEUsRSxDQUVNLEtBQUFRLENBQ0ZDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEcsd0NBRUEsTUFBTSxrQkFBRUMsRUFBaUIsd0JBQUVDLEdBQ3ZCYixLQUFLSiwyQkFBMkJrQixZQUU1QkMsU0FBUyxTQUFFQyxFQUFXLEdBQUUsWUFBRUMsRUFBYyxDQUFDLEdBQU0sQ0FBQyxHQUFNUixFQUN4RG5DLEVBQ0ZELEVBQW9CNEMsSUFBZ0JMLEVBQWtCSyxFQUFZekMsY0FDaEUwQyxFQUFNNUMsRUFB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LFNBQVMsU0FBRUMsRUFBVyxJQUFPLENBQUMsR0FBTVAsR0FDdEMsd0JBQUVJLEdBQTRCYixLQUFLSiwyQkFBMkJrQixXQUdwRSxPQUZzQkQsRUFBd0JHLEdBRTVCYixPQUFPNk8sYUFDZGhQLEtBQUs4TyxrQkFBa0J2TyxNQUMxQixFQUFNQyxRQUFReU8sS0FBS2pQLE1BQ25CUyxFQUNBQyxFQUNBVixLQUFLa08sYUFJTixFQUFNMU4sUUFBTyxVQUFDQyxFQUFTQyxFQUNsQyxFLEVDN0JKLE1BWUEsRUFBZThMLEVBWFgwQyxHQUVPLElBQUlnQixFQUNQaEIsRUFDQSxJQUFJRSxFQUNBRixFQUNBLElBQUl0SixFQUFlLElBQUlzRyxFQUFxQmlELDJFQUFBQSxPQUtjLENBQ2xFLENBQUVqUCxHQUFJLGlCQUNOLENBQUVBLEdBQUksT0FDTixDQUFFQSxHQUFJLGMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLXZhdWx0ZWQtaW5zdHJ1bWVudC50cz8xODBmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL21pc3NpbmctZGF0YS1lcnJvci50cz9iN2RjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbml0aWFsaXplZC1lcnJvci50cz84YjRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwtdGhyZWUtZC1zZWN1cmUtZmxvdy50cz9iYzM5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwudHM/NWJmYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLWNsaWVudC50cz8yMjE3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jYXJkaW5hbC1pbnRlZ3JhdGlvbi9zcmMvY2FyZGluYWwtc2NyaXB0LWxvYWRlci50cz8zYmIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbi9zcmMvY3JlZGl0LWNhcmQtcGF5bWVudC1zdHJhdGVneS50cz8yODlmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jeWJlcnNvdXJjZS1pbnRlZ3JhdGlvbi9zcmMvY3liZXJzb3VyY2UvY3liZXJzb3VyY2UtcGF5bWVudC1zdHJhdGVneS50cz8zZmIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jeWJlcnNvdXJjZS1pbnRlZ3JhdGlvbi9zcmMvY3liZXJzb3VyY2UvY3JlYXRlLWN5YmVyc291cmNlLXBheW1lbnQtc3RyYXRlZ3kudHM/ZjM0NiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY2FyZGluYWwtaW50ZWdyYXRpb24vc3JjL2NhcmRpbmFsLXRocmVlLWQtc2VjdXJlLWZsb3ctdjIudHM/OTNkMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtY3JlZGl0LWNhcmQtaW5zdHJ1bWVudC50cz80MDFkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9jeWJlcnNvdXJjZS1pbnRlZ3JhdGlvbi9zcmMvY3liZXJzb3VyY2V2Mi9jeWJlcnNvdXJjZXYyLXBheW1lbnQtc3RyYXRlZ3kudHM/MDgxMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY3liZXJzb3VyY2UtaW50ZWdyYXRpb24vc3JjL2N5YmVyc291cmNldjIvY3JlYXRlLWN5YmVyc291cmNldjItcGF5bWVudC1zdHJhdGVneS50cz9jNmU2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImltcG9ydCBSZXF1ZXN0RXJyb3IgZnJvbSAnLi9yZXF1ZXN0LWVycm9yJztcblxuLy8gSGF2ZSB0byB1c2UgYGFzYCBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83Mzk4NzA0NC90eXBlZ3VhcmRpbmctYW4tdW5rbm93bi1uZXN0ZWQtb2JqZWN0IHNob3VsZCBiZSBmaXhlZCBpbiA0LjgrXG5jb25zdCBpc1JlcXVlc3RFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFJlcXVlc3RFcnJvciA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2JvZHknIGluIGVycm9yO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaXNSZXF1ZXN0RXJyb3I7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgbWVyZ2UsIHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZEZvcm0sXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IENhcmRpbmFsQ2xpZW50LCB7IENhcmRpbmFsT3JkZXJEYXRhIH0gZnJvbSAnLi9jYXJkaW5hbC1jbGllbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3cge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF9jYXJkaW5hbENsaWVudDogQ2FyZGluYWxDbGllbnQsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgcHJlcGFyZShtZXRob2Q6IFBheW1lbnRNZXRob2QpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQubG9hZChtZXRob2QuaWQsIG1ldGhvZC5jb25maWcudGVzdE1vZGUpO1xuICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5jb25maWd1cmUoYXdhaXQgdGhpcy5fZ2V0Q2xpZW50VG9rZW4obWV0aG9kKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3RhcnQoXG4gICAgICAgIGV4ZWN1dGU6IFBheW1lbnRTdHJhdGVneVsnZXhlY3V0ZSddLFxuICAgICAgICBwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgICAgICBob3N0ZWRGb3JtPzogSG9zdGVkRm9ybSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnZXRDYXJkSW5zdHJ1bWVudCwgZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cgfSA9XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50OiB7IG1ldGhvZElkID0gJycsIHBheW1lbnREYXRhID0ge30gfSA9IHt9IH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50ID1cbiAgICAgICAgICAgIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGdldENhcmRJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCk7XG4gICAgICAgIGNvbnN0IGJpbiA9IGluc3RydW1lbnQgPyBpbnN0cnVtZW50LmlpbiA6IGhvc3RlZEZvcm0gJiYgaG9zdGVkRm9ybS5nZXRCaW4oKTtcblxuICAgICAgICBpZiAoYmluKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jYXJkaW5hbENsaWVudC5ydW5CaW5Qcm9jZXNzKGJpbik7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGUoXG4gICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZCwge1xuICAgICAgICAgICAgICAgICAgICBwYXltZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVlRFNlY3VyZTogeyB0b2tlbjogZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpLmNsaWVudFRva2VuIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGhyZWVEU2VjdXJlID0gYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgICAgICAgICBlcnJvci5ib2R5LnRocmVlX2RzX3Jlc3VsdCxcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRPcmRlckRhdGEoKSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZC5wYXltZW50LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YTogeyB0aHJlZURTZWN1cmUgfSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgaG9zdGVkRm9ybS5zdWJtaXQoXG4gICAgICAgICAgICAgICAgbWVyZ2UocGF5bG9hZC5wYXltZW50LCB7XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2dldENsaWVudFRva2VuKG1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGlmIChtZXRob2QuY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBtZXRob2QuY2xpZW50VG9rZW47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZC5pZCk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kLmlkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5jbGllbnRUb2tlbiB8fCAnJztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRPcmRlckRhdGEoKTogQ2FyZGluYWxPcmRlckRhdGEge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RhdGUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gc3RhdGUuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXJPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBjaGVja291dC5jYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBpZDogb3JkZXIub3JkZXJJZC50b1N0cmluZygpLFxuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5jYXJ0LmNhcnRBbW91bnQsXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgcGF5bWVudCBtZXRob2QgZXhwZXJpZW5jZXMgc29tZSBraW5kIG9mXG4gKiBmYWlsdXJlIChpLmUuOiBpdHMgY2xpZW50IGxpYnJhcnkgcmV0dXJucyBhIHJlamVjdGVkIHByb21pc2UpLiBBbmQgdGhlcmUgaXNcbiAqIG5vIG90aGVyIGVycm9yIHR5cGUgdGhhdCBpcyBtb3JlIHNwZWNpZmljIHRoYW4gdGhpcyBvbmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaGFzIHRocm93biBhbiB1bmV4cGVjdGVkIGVycm9yLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RGYWlsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVGhyZWVEU2VjdXJlLCBUaHJlZURTZWN1cmVUb2tlbiB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgY29uc3QgQ2FyZGluYWxTaWduYXR1cmVWYWxpZGF0aW9uRXJyb3JzID0gWzEwMDAwNCwgMTAxMCwgMTAxMSwgMTAyMF07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxTREsge1xuICAgIGNvbmZpZ3VyZShwYXJhbXM6IENhcmRpbmFsQ29uZmlndXJhdGlvbik6IHZvaWQ7XG4gICAgb24ocGFyYW1zOiBDYXJkaW5hbEV2ZW50VHlwZSwgY2FsbGJhY2s6IENhcmRpbmFsRXZlbnRNYXBbQ2FyZGluYWxFdmVudFR5cGVdKTogdm9pZDtcbiAgICBvZmYocGFyYW1zOiBDYXJkaW5hbEV2ZW50VHlwZSk6IHZvaWQ7XG4gICAgc2V0dXA8SyBleHRlbmRzIGtleW9mIENhcmRpbmFsSW5pdGlhbGl6YXRpb25EYXRhTWFwPihcbiAgICAgICAgaW5pdGlhbGl6YXRpb25UeXBlOiBLLFxuICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE6IENhcmRpbmFsSW5pdGlhbGl6YXRpb25EYXRhTWFwW0tdLFxuICAgICk6IHZvaWQ7XG4gICAgdHJpZ2dlcihcbiAgICAgICAgZXZlbnQ6IENhcmRpbmFsVHJpZ2dlckV2ZW50cyxcbiAgICAgICAgZGF0YT86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPENhcmRpbmFsQmluUHJvY2Vzc1Jlc3BvbnNlIHwgdm9pZD47XG4gICAgY29udGludWUoXG4gICAgICAgIHBheW1lbnRCcmFuZDogQ2FyZGluYWxQYXltZW50QnJhbmQsXG4gICAgICAgIGNvbnRpbnVlT2JqZWN0OiBDYXJkaW5hbENvbnRpbnVlLFxuICAgICAgICBvcmRlcjogQ2FyZGluYWxQYXJ0aWFsT3JkZXIsXG4gICAgKTogdm9pZDtcbiAgICBzdGFydChwYXltZW50QnJhbmQ6IENhcmRpbmFsUGF5bWVudEJyYW5kLCBvcmRlcjogQ2FyZGluYWxQYXJ0aWFsT3JkZXIsIGp3dD86IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIENhcmRpbmFsPzogQ2FyZGluYWxTREs7XG59XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsRXZlbnRUeXBlIHtcbiAgICBTZXR1cENvbXBsZXRlZCA9ICdwYXltZW50cy5zZXR1cENvbXBsZXRlJyxcbiAgICBWYWxpZGF0ZWQgPSAncGF5bWVudHMudmFsaWRhdGVkJyxcbn1cblxuZXhwb3J0IHR5cGUgc2V0dXBDb21wbGV0ZUZuID0gKHNldHVwQ29tcGxldGVEYXRhOiBDYXJkaW5hbFNldHVwQ29tcGxldGVkRGF0YSkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIHZhbGlkYXRlZEZuID0gKGRhdGE6IENhcmRpbmFsVmFsaWRhdGVkRGF0YSwgand0Pzogc3RyaW5nKSA9PiB2b2lkO1xuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsRXZlbnRNYXAge1xuICAgIFtDYXJkaW5hbEV2ZW50VHlwZS5TZXR1cENvbXBsZXRlZF06IHNldHVwQ29tcGxldGVGbjtcbiAgICBbQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkXTogdmFsaWRhdGVkRm47XG59XG5cbmV4cG9ydCB0eXBlIENhcmRpbmFsQ29uZmlndXJhdGlvbiA9IFBhcnRpYWw8e1xuICAgIGxvZ2dpbmc6IHtcbiAgICAgICAgbGV2ZWw6IHN0cmluZztcbiAgICB9O1xuICAgIHBheW1lbnQ6IHtcbiAgICAgICAgdmlldzogc3RyaW5nO1xuICAgICAgICBmcmFtZXdvcms6IHN0cmluZztcbiAgICAgICAgZGlzcGxheUxvYWRpbmc6IGJvb2xlYW47XG4gICAgfTtcbn0+O1xuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsU2V0dXBDb21wbGV0ZWREYXRhIHtcbiAgICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgICBtb2R1bGVzOiBDYXJkaW5hbE1vZHVsZVN0YXRlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxNb2R1bGVTdGF0ZSB7XG4gICAgbG9hZGVkOiBib29sZWFuO1xuICAgIG1vZHVsZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZSB7XG4gICAgSW5pdCA9ICdpbml0JyxcbiAgICBDb21wbGV0ZSA9ICdjb21wbGV0ZScsXG4gICAgQ29uZmlybSA9ICdjb25maXJtJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEluaXRpYWxpemF0aW9uRGF0YU1hcCB7XG4gICAgW0NhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLkluaXRdOiBDYXJkaW5hbEluaXRUeXBlRGF0YTtcbiAgICBbQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUuQ29tcGxldGVdOiBDYXJkaW5hbENvbXBsZXRlVHlwZURhdGE7XG4gICAgW0NhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlLkNvbmZpcm1dOiBDYXJkaW5hbENvbmZpcm1UeXBlRGF0YTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbEluaXRUeXBlRGF0YSB7XG4gICAgand0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxDb21wbGV0ZVR5cGVEYXRhIHtcbiAgICBTdGF0dXM6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbmZpcm1UeXBlRGF0YSB7XG4gICAgand0OiBzdHJpbmc7XG4gICAgY2FyZGluYWxSZXNwb25zZUp3dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsVmFsaWRhdGVkRGF0YSB7XG4gICAgQWN0aW9uQ29kZT86IENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uO1xuICAgIEVycm9yRGVzY3JpcHRpb246IHN0cmluZztcbiAgICBFcnJvck51bWJlcjogbnVtYmVyO1xuICAgIFZhbGlkYXRlZD86IGJvb2xlYW47XG4gICAgUGF5bWVudD86IENhcmRpbmFsUGF5bWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbFBheW1lbnQge1xuICAgIEV4dGVuZGVkRGF0YT86IENhcmRpbmFsQ0NBRXh0ZW5kZWREYXRhO1xuICAgIFByb2Nlc3NvclRyYW5zYWN0aW9uSWQ6IHN0cmluZztcbiAgICBUeXBlOiBDYXJkaW5hbFBheW1lbnRUeXBlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQmluUHJvY2Vzc1Jlc3BvbnNlIHtcbiAgICBTdGF0dXM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxDb250aW51ZSB7XG4gICAgQWNzVXJsOiBzdHJpbmc7XG4gICAgUGF5bG9hZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsUGFydGlhbE9yZGVyIHtcbiAgICBPcmRlckRldGFpbHM6IENhcmRpbmFsT3JkZXJEZXRhaWxzO1xuICAgIENvbnN1bWVyPzogQ2FyZGluYWxDb25zdW1lcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkaW5hbENvbnN1bWVyIHtcbiAgICBFbWFpbDE/OiBzdHJpbmc7XG4gICAgRW1haWwyPzogc3RyaW5nO1xuICAgIFNoaXBwaW5nQWRkcmVzcz86IENhcmRpbmFsQWRkcmVzcztcbiAgICBCaWxsaW5nQWRkcmVzcz86IENhcmRpbmFsQWRkcmVzcztcbiAgICBBY2NvdW50PzogQ2FyZGluYWxBY2NvdW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsQWNjb3VudCB7XG4gICAgQWNjb3VudE51bWJlcjogbnVtYmVyO1xuICAgIEV4cGlyYXRpb25Nb250aDogbnVtYmVyO1xuICAgIEV4cGlyYXRpb25ZZWFyOiBudW1iZXI7XG4gICAgTmFtZU9uQWNjb3VudDogc3RyaW5nO1xuICAgIENhcmRDb2RlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZGluYWxBZGRyZXNzIHtcbiAgICBGdWxsTmFtZT86IHN0cmluZztcbiAgICBGaXJzdE5hbWU6IHN0cmluZztcbiAgICBNaWRkbGVOYW1lPzogc3RyaW5nO1xuICAgIExhc3ROYW1lOiBzdHJpbmc7XG4gICAgQWRkcmVzczE6IHN0cmluZztcbiAgICBBZGRyZXNzMj86IHN0cmluZztcbiAgICBBZGRyZXNzMz86IHN0cmluZztcbiAgICBDaXR5OiBzdHJpbmc7XG4gICAgU3RhdGU6IHN0cmluZztcbiAgICBQb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgQ291bnRyeUNvZGU6IHN0cmluZztcbiAgICBQaG9uZTE/OiBzdHJpbmc7XG4gICAgUGhvbmUyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsT3JkZXJEZXRhaWxzIHtcbiAgICBPcmRlck51bWJlcjogc3RyaW5nO1xuICAgIEFtb3VudDogbnVtYmVyO1xuICAgIEN1cnJlbmN5Q29kZTogc3RyaW5nO1xuICAgIE9yZGVyRGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gICAgT3JkZXJDaGFubmVsOiBzdHJpbmc7XG4gICAgVHJhbnNhY3Rpb25JZD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgQ2FyZGluYWxDQ0FFeHRlbmRlZERhdGEgPSBQYXJ0aWFsPHtcbiAgICBDQVZWOiBzdHJpbmc7XG4gICAgRUNJRmxhZzogc3RyaW5nO1xuICAgIFBBUmVzU3RhdHVzOiBzdHJpbmc7XG4gICAgU2lnbmF0dXJlVmVyaWZpY2F0aW9uOiBzdHJpbmc7XG4gICAgWElEOiBzdHJpbmc7XG4gICAgVUNBRkluZGljYXRvcjogc3RyaW5nO1xuICAgIENoYWxsZW5nZUNhbmNlbDogc3RyaW5nO1xufT47XG5cbmV4cG9ydCBlbnVtIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uIHtcbiAgICBTdWNjZXNzID0gJ1NVQ0NFU1MnLFxuICAgIE5vQWN0aW9uID0gJ05PQUNUSU9OJyxcbiAgICBGYWlsdXJlID0gJ0ZBSUxVUkUnLFxuICAgIEVycm9yID0gJ0VSUk9SJyxcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxQYXltZW50VHlwZSB7XG4gICAgQ0NBID0gJ0NDQScsXG4gICAgUGF5cGFsID0gJ1BheXBhbCcsXG4gICAgV2FsbGV0ID0gJ1dhbGxldCcsXG4gICAgVmlzYUNoZWNrb3V0ID0gJ1Zpc2FDaGVja291dCcsXG4gICAgQXBwbGVQYXkgPSAnQXBwbGVQYXknLFxuICAgIERpc2NvdmVyV2FsbGV0ID0gJ0Rpc2NvdmVyV2FsbGV0Jyxcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxUcmlnZ2VyRXZlbnRzIHtcbiAgICBCaW5Qcm9jZXNzID0gJ2Jpbi5wcm9jZXNzJyxcbn1cblxuZXhwb3J0IGVudW0gQ2FyZGluYWxQYXltZW50QnJhbmQge1xuICAgIENDQSA9ICdjY2EnLFxufVxuXG5leHBvcnQgZW51bSBDYXJkaW5hbFNpZ25hdHVyZVZlcmlmaWNhdGlvbiB7XG4gICAgWWVzID0gJ1knLFxuICAgIE5vID0gJ04nLFxufVxuXG5leHBvcnQgdHlwZSBDYXJkaW5hbFRocmVlRFNlY3VyZVRva2VuID0gUGljazxUaHJlZURTZWN1cmUsICd4aWQnPiB8IFRocmVlRFNlY3VyZVRva2VuO1xuIiwiaW1wb3J0IHsgaW5jbHVkZXMsIG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkZHJlc3MsXG4gICAgQmlsbGluZ0FkZHJlc3MsXG4gICAgQ3JlZGl0Q2FyZEluc3RydW1lbnQsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcixcbiAgICBUaHJlZURTZWN1cmVUb2tlbixcbiAgICBUaHJlZURzUmVzdWx0LFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBDYXJkaW5hbEFjY291bnQsXG4gICAgQ2FyZGluYWxBZGRyZXNzLFxuICAgIENhcmRpbmFsQ29uc3VtZXIsXG4gICAgQ2FyZGluYWxFdmVudFR5cGUsXG4gICAgQ2FyZGluYWxJbml0aWFsaXphdGlvblR5cGUsXG4gICAgQ2FyZGluYWxQYXJ0aWFsT3JkZXIsXG4gICAgQ2FyZGluYWxQYXltZW50QnJhbmQsXG4gICAgQ2FyZGluYWxTREssXG4gICAgQ2FyZGluYWxTaWduYXR1cmVWYWxpZGF0aW9uRXJyb3JzLFxuICAgIENhcmRpbmFsU2lnbmF0dXJlVmVyaWZpY2F0aW9uLFxuICAgIENhcmRpbmFsVHJpZ2dlckV2ZW50cyxcbiAgICBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbixcbiAgICBDYXJkaW5hbFZhbGlkYXRlZERhdGEsXG59IGZyb20gJy4vY2FyZGluYWwnO1xuaW1wb3J0IENhcmRpbmFsU2NyaXB0TG9hZGVyIGZyb20gJy4vY2FyZGluYWwtc2NyaXB0LWxvYWRlcic7XG5cbmV4cG9ydCB0eXBlIENhcmRpbmFsU3VwcG9ydGVkUGF5bWVudEluc3RydW1lbnQgPSBDcmVkaXRDYXJkSW5zdHJ1bWVudCB8IFZhdWx0ZWRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRpbmFsT3JkZXJEYXRhIHtcbiAgICBiaWxsaW5nQWRkcmVzczogQmlsbGluZ0FkZHJlc3M7XG4gICAgc2hpcHBpbmdBZGRyZXNzPzogQWRkcmVzcztcbiAgICBjdXJyZW5jeUNvZGU6IHN0cmluZztcbiAgICBpZDogc3RyaW5nO1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBheW1lbnREYXRhPzogQ3JlZGl0Q2FyZEluc3RydW1lbnQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsQ2xpZW50IHtcbiAgICBwcml2YXRlIF9wcm92aWRlciA9ICcnO1xuICAgIHByaXZhdGUgX3Rlc3RNb2RlID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfc2RrPzogUHJvbWlzZTxDYXJkaW5hbFNESz47XG4gICAgcHJpdmF0ZSBfY29uZmlndXJhdGlvblRva2VuID0gJyc7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zY3JpcHRMb2FkZXI6IENhcmRpbmFsU2NyaXB0TG9hZGVyKSB7fVxuXG4gICAgbG9hZChwcm92aWRlcjogc3RyaW5nLCB0ZXN0TW9kZSA9IGZhbHNlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX3Byb3ZpZGVyID0gcHJvdmlkZXI7XG4gICAgICAgIHRoaXMuX3Rlc3RNb2RlID0gdGVzdE1vZGU7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9zZGspIHtcbiAgICAgICAgICAgIHRoaXMuX3NkayA9IHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHByb3ZpZGVyLCB0ZXN0TW9kZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fc2RrLnRoZW4obm9vcCk7XG4gICAgfVxuXG4gICAgY29uZmlndXJlKGNsaWVudFRva2VuOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbmZpZ3VyYXRpb25Ub2tlbiA9PT0gY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3NkayA9IHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKGAke3RoaXMuX3Byb3ZpZGVyfS4ke0RhdGUubm93KCl9YCwgdGhpcy5fdGVzdE1vZGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldENsaWVudFNESygpLnRoZW4oXG4gICAgICAgICAgICAoY2xpZW50KSA9PlxuICAgICAgICAgICAgICAgIG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9uKENhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlNldHVwQ29tcGxldGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWVudC5vZmYoQ2FyZGluYWxFdmVudFR5cGUuVmFsaWRhdGVkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlndXJhdGlvblRva2VuID0gY2xpZW50VG9rZW47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9uKENhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZCwgKGRhdGE6IENhcmRpbmFsVmFsaWRhdGVkRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50Lm9mZihDYXJkaW5hbEV2ZW50VHlwZS5TZXR1cENvbXBsZXRlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5BY3Rpb25Db2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbi5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVzKENhcmRpbmFsU2lnbmF0dXJlVmFsaWRhdGlvbkVycm9ycywgZGF0YS5FcnJvck51bWJlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTWlzc2luZ0RhdGFFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihkYXRhLkVycm9yRGVzY3JpcHRpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudC5zZXR1cChDYXJkaW5hbEluaXRpYWxpemF0aW9uVHlwZS5Jbml0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqd3Q6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBydW5CaW5Qcm9jZXNzKGJpbk51bWJlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDbGllbnRTREsoKVxuICAgICAgICAgICAgLnRoZW4oKGNsaWVudCkgPT5cbiAgICAgICAgICAgICAgICBjbGllbnQudHJpZ2dlcihDYXJkaW5hbFRyaWdnZXJFdmVudHMuQmluUHJvY2VzcywgYmluTnVtYmVyKS5jYXRjaChub29wKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LlN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFRocmVlRFNlY3VyZURhdGEoXG4gICAgICAgIHRocmVlRFNlY3VyZURhdGE6IFRocmVlRHNSZXN1bHQsXG4gICAgICAgIG9yZGVyRGF0YTogQ2FyZGluYWxPcmRlckRhdGEsXG4gICAgKTogUHJvbWlzZTxUaHJlZURTZWN1cmVUb2tlbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2xpZW50U0RLKCkudGhlbigoY2xpZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8VGhyZWVEU2VjdXJlVG9rZW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBjbGllbnQub24oXG4gICAgICAgICAgICAgICAgICAgIENhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgKGRhdGE6IENhcmRpbmFsVmFsaWRhdGVkRGF0YSwgand0Pzogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGllbnQub2ZmKENhcmRpbmFsRXZlbnRUeXBlLlZhbGlkYXRlZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghand0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuRXJyb3JEZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZGF0YS5FcnJvckRlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnQW4gZXJyb3Igd2FzIGVuY291bnRlcmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLkFjdGlvbkNvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRva2VuOiBqd3QgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5BY3Rpb25Db2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbi5TdWNjZXNzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh7IHRva2VuOiBqd3QgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENhcmRpbmFsVmFsaWRhdGVkQWN0aW9uLk5vQWN0aW9uOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5FcnJvck51bWJlciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihkYXRhLkVycm9yRGVzY3JpcHRpb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFkYXRhLlBheW1lbnQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFkYXRhLlBheW1lbnQuRXh0ZW5kZWREYXRhIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLlBheW1lbnQuRXh0ZW5kZWREYXRhLlNpZ25hdHVyZVZlcmlmaWNhdGlvbiAhPT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJkaW5hbFNpZ25hdHVyZVZlcmlmaWNhdGlvbi5ZZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdUcmFuc2FjdGlvbiBzaWduYXR1cmUgY291bGQgbm90IGJlIHZhbGlkYXRlZC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0b2tlbjogand0IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbi5GYWlsdXJlOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXNlciBmYWlsZWQgYXV0aGVudGljYXRpb24gb3IgYW4gZXJyb3Igd2FzIGVuY291bnRlcmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDYXJkaW5hbFZhbGlkYXRlZEFjdGlvbi5FcnJvcjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKGRhdGEuRXJyb3JEZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb250aW51ZU9iamVjdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgQWNzVXJsOiB0aHJlZURTZWN1cmVEYXRhLmFjc191cmwsXG4gICAgICAgICAgICAgICAgICAgIFBheWxvYWQ6IHRocmVlRFNlY3VyZURhdGEubWVyY2hhbnRfZGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGFydGlhbE9yZGVyID0gdGhpcy5fbWFwVG9QYXJ0aWFsT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVEU2VjdXJlRGF0YS5wYXllcl9hdXRoX3JlcXVlc3QsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGNsaWVudC5jb250aW51ZShDYXJkaW5hbFBheW1lbnRCcmFuZC5DQ0EsIGNvbnRpbnVlT2JqZWN0LCBwYXJ0aWFsT3JkZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFRvUGFydGlhbE9yZGVyKFxuICAgICAgICBvcmRlckRhdGE6IENhcmRpbmFsT3JkZXJEYXRhLFxuICAgICAgICB0cmFuc2FjdGlvbklkOiBzdHJpbmcsXG4gICAgKTogQ2FyZGluYWxQYXJ0aWFsT3JkZXIge1xuICAgICAgICBjb25zdCBjb25zdW1lcjogQ2FyZGluYWxDb25zdW1lciA9IHtcbiAgICAgICAgICAgIEJpbGxpbmdBZGRyZXNzOiB0aGlzLl9tYXBUb0NhcmRpbmFsQWRkcmVzcyhvcmRlckRhdGEuYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvcmRlckRhdGEucGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIGNvbnN1bWVyLkFjY291bnQgPSB0aGlzLl9tYXBUb0NhcmRpbmFsQWNjb3VudChvcmRlckRhdGEucGF5bWVudERhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yZGVyRGF0YS5iaWxsaW5nQWRkcmVzcy5lbWFpbCkge1xuICAgICAgICAgICAgY29uc3VtZXIuRW1haWwxID0gb3JkZXJEYXRhLmJpbGxpbmdBZGRyZXNzLmVtYWlsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9yZGVyRGF0YS5zaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN1bWVyLlNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX21hcFRvQ2FyZGluYWxBZGRyZXNzKG9yZGVyRGF0YS5zaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIENvbnN1bWVyOiBjb25zdW1lcixcbiAgICAgICAgICAgIE9yZGVyRGV0YWlsczoge1xuICAgICAgICAgICAgICAgIE9yZGVyTnVtYmVyOiBvcmRlckRhdGEuaWQsXG4gICAgICAgICAgICAgICAgQW1vdW50OiBvcmRlckRhdGEuYW1vdW50LFxuICAgICAgICAgICAgICAgIEN1cnJlbmN5Q29kZTogb3JkZXJEYXRhLmN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBPcmRlckNoYW5uZWw6ICdTJyxcbiAgICAgICAgICAgICAgICBUcmFuc2FjdGlvbklkOiB0cmFuc2FjdGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBUb0NhcmRpbmFsQWNjb3VudChwYXltZW50RGF0YTogQ3JlZGl0Q2FyZEluc3RydW1lbnQpOiBDYXJkaW5hbEFjY291bnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgQWNjb3VudE51bWJlcjogTnVtYmVyKHBheW1lbnREYXRhLmNjTnVtYmVyKSxcbiAgICAgICAgICAgIEV4cGlyYXRpb25Nb250aDogTnVtYmVyKHBheW1lbnREYXRhLmNjRXhwaXJ5Lm1vbnRoKSxcbiAgICAgICAgICAgIEV4cGlyYXRpb25ZZWFyOiBOdW1iZXIocGF5bWVudERhdGEuY2NFeHBpcnkueWVhciksXG4gICAgICAgICAgICBOYW1lT25BY2NvdW50OiBwYXltZW50RGF0YS5jY05hbWUsXG4gICAgICAgICAgICBDYXJkQ29kZTogTnVtYmVyKHBheW1lbnREYXRhLmNjQ3Z2KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBUb0NhcmRpbmFsQWRkcmVzcyhhZGRyZXNzOiBBZGRyZXNzKTogQ2FyZGluYWxBZGRyZXNzIHtcbiAgICAgICAgY29uc3QgY2FyZGluYWxBZGRyZXNzOiBDYXJkaW5hbEFkZHJlc3MgPSB7XG4gICAgICAgICAgICBGaXJzdE5hbWU6IGFkZHJlc3MuZmlyc3ROYW1lLFxuICAgICAgICAgICAgTGFzdE5hbWU6IGFkZHJlc3MubGFzdE5hbWUsXG4gICAgICAgICAgICBBZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgIENpdHk6IGFkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIFN0YXRlOiBhZGRyZXNzLnN0YXRlT3JQcm92aW5jZSxcbiAgICAgICAgICAgIFBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIENvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChhZGRyZXNzLmFkZHJlc3MyKSB7XG4gICAgICAgICAgICBjYXJkaW5hbEFkZHJlc3MuQWRkcmVzczIgPSBhZGRyZXNzLmFkZHJlc3MyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFkZHJlc3MucGhvbmUpIHtcbiAgICAgICAgICAgIGNhcmRpbmFsQWRkcmVzcy5QaG9uZTEgPSBhZGRyZXNzLnBob25lO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhcmRpbmFsQWRkcmVzcztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRDbGllbnRTREsoKTogUHJvbWlzZTxDYXJkaW5hbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMuX3Nkaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9zZGs7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgZmFpbHNcbiAqIHRvIGxvYWQsIG9yIGZvciBzb21lIHJlYXNvbiwgaXQgaXMgaW5hY2Nlc3NpYmxlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaXMgbm90IGxvYWRlZCBvciByZWFkeSB0byBiZSB1c2VkLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF91bmF2YWlsYWJsZSc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBDYXJkaW5hbFNESywgQ2FyZGluYWxXaW5kb3cgfSBmcm9tICcuL2NhcmRpbmFsJztcblxuY29uc3QgU0RLX1RFU1RfVVJMID0gJ2h0dHBzOi8vc29uZ2JpcmRzdGFnLmNhcmRpbmFsY29tbWVyY2UuY29tL2VkZ2UvdjEvc29uZ2JpcmQuanMnO1xuY29uc3QgU0RLX1BST0RfVVJMID0gJ2h0dHBzOi8vc29uZ2JpcmQuY2FyZGluYWxjb21tZXJjZS5jb20vZWRnZS92MS9zb25nYmlyZC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlciwgcHJpdmF0ZSBfd2luZG93OiBDYXJkaW5hbFdpbmRvdyA9IHdpbmRvdykge31cblxuICAgIGxvYWQocHJvdmlkZXI6IHN0cmluZywgdGVzdE1vZGU/OiBib29sZWFuKTogUHJvbWlzZTxDYXJkaW5hbFNESz4ge1xuICAgICAgICBjb25zdCB1cmwgPSB0ZXN0TW9kZSA/IFNES19URVNUX1VSTCA6IFNES19QUk9EX1VSTDtcblxuICAgICAgICByZXR1cm4gdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoYCR7dXJsfT92PSR7cHJvdmlkZXJ9YCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3dpbmRvdy5DYXJkaW5hbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2luZG93LkNhcmRpbmFsO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBIb3N0ZWRGb3JtLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB9IGZyb20gJy4vY3JlZGl0LWNhcmQtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcm90ZWN0ZWQgX2hvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByb3RlY3RlZCBfc2hvdWxkUmVuZGVySG9zdGVkRm9ybT86IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpIHt9XG5cbiAgICBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKFxuICAgICAgICAgICAgcGF5bG9hZC5wYXltZW50Py5tZXRob2RJZCxcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8uZ2F0ZXdheUlkLFxuICAgICAgICApICYmIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm1cbiAgICAgICAgICAgID8gdGhpcy5fZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKHBheWxvYWQsIG9wdGlvbnMpXG4gICAgICAgICAgICA6IHRoaXMuX2V4ZWN1dGVXaXRob3V0SG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChvcHRpb25zPy5tZXRob2RJZCwgb3B0aW9ucz8uZ2F0ZXdheUlkKSB8fFxuICAgICAgICAgICAgIXRoaXMuX2lzSG9zdGVkRmllbGRBdmFpbGFibGUob3B0aW9ucylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvcm1PcHRpb25zID0gb3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm07XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRTZXR0aW5nczogeyBiaWdwYXlCYXNlVXJsOiBob3N0ID0gJycgfSA9IHt9IH0gPVxuICAgICAgICAgICAgc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFmb3JtT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVIb3N0ZWRGb3JtKGhvc3QsIGZvcm1PcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZm9ybS5hdHRhY2goKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSA9IGZvcm07XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAodGhpcy5faG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybS5kZXRhY2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gcGF5bWVudCAmJiBwYXltZW50LnBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHsgLi4ucGF5bWVudCwgcGF5bWVudERhdGEgfSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFzeW5jIF9leGVjdXRlV2l0aEhvc3RlZEZvcm0oXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9ob3N0ZWRGb3JtO1xuXG4gICAgICAgIGlmICghZm9ybSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhcGF5bWVudC5tZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQubWV0aG9kSWQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBhd2FpdCBmb3JtLnZhbGlkYXRlKCkudGhlbigoKSA9PiBmb3JtLnN1Ym1pdChwYXltZW50KSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIF9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZD86IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQgPT09IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIXZhbHVlcyhvcHRpb25zICYmIG9wdGlvbnMuY3JlZGl0Q2FyZCAmJiBvcHRpb25zLmNyZWRpdENhcmQuZm9ybS5maWVsZHMpLmV2ZXJ5KFxuICAgICAgICAgICAgaXNOaWwsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jYXJkaW5hbC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQgeyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9jcmVkaXQtY2FyZC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3kgZXh0ZW5kcyBDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3RocmVlRFNlY3VyZUZsb3c6IENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvdyxcbiAgICApIHtcbiAgICAgICAgc3VwZXIoX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUob3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdGhyZWVEU2VjdXJlRmxvdy5wcmVwYXJlKHBheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudDogeyBtZXRob2RJZCA9ICcnIH0gPSB7fSB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9jeWJlcnNvdXJjZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQ3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8Q3liZXJTb3VyY2VQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IEN5YmVyU291cmNlUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93KFxuICAgICAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgICAgIG5ldyBDYXJkaW5hbENsaWVudChuZXcgQ2FyZGluYWxTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpKSxcbiAgICAgICAgKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUN5YmVyU291cmNlUGF5bWVudFN0cmF0ZWd5LCBbeyBpZDogJ2N5YmVyc291cmNlJyB9XSk7XG4iLCJpbXBvcnQgeyBtZXJnZSwgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkRm9ybSxcbiAgICBpc0NyZWRpdENhcmRJbnN0cnVtZW50LFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBDYXJkaW5hbFRocmVlRFNlY3VyZVRva2VuIH0gZnJvbSAnLi9jYXJkaW5hbCc7XG5pbXBvcnQgQ2FyZGluYWxDbGllbnQsIHsgQ2FyZGluYWxPcmRlckRhdGEgfSBmcm9tICcuL2NhcmRpbmFsLWNsaWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRpbmFsVGhyZWVEU2VjdXJlRmxvd1YyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBfY2FyZGluYWxDbGllbnQ6IENhcmRpbmFsQ2xpZW50LFxuICAgICkge31cblxuICAgIGFzeW5jIHByZXBhcmUobWV0aG9kOiBQYXltZW50TWV0aG9kKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmxvYWQobWV0aG9kLmlkLCBtZXRob2QuY29uZmlnLnRlc3RNb2RlKTtcbiAgICB9XG5cbiAgICBhc3luYyBzdGFydChcbiAgICAgICAgZXhlY3V0ZTogUGF5bWVudFN0cmF0ZWd5WydleGVjdXRlJ10sXG4gICAgICAgIHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdldENhcmRJbnN0cnVtZW50IH0gPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCA9IHsgbWV0aG9kSWQ6ICcnIH0gfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudERhdGEgPSB7fSB9ID0gcGF5bWVudDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGUocGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHk/LnN0YXR1cyA9PT0gJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZD8uZGF0YT8udG9rZW47XG4gICAgICAgICAgICAgICAgY29uc3QgeGlkID0gZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQ/LnBheWVyX2F1dGhfcmVxdWVzdDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NhcmRpbmFsQ2xpZW50LmNvbmZpZ3VyZSh0b2tlbik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiaW4gPSB0aGlzLl9nZXRCaW4ocGF5bWVudERhdGEsIGdldENhcmRJbnN0cnVtZW50LCBob3N0ZWRGb3JtKTtcblxuICAgICAgICAgICAgICAgIGlmIChiaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQucnVuQmluUHJvY2VzcyhiaW4pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9zdWJtaXRQYXltZW50KHBheW1lbnQsIHsgeGlkIH0sIGhvc3RlZEZvcm0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1JlcXVlc3RFcnJvcihlcnIpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzb21lKGVyci5ib2R5LmVycm9ycywgeyBjb2RlOiAndGhyZWVfZF9zZWN1cmVfcmVxdWlyZWQnIH0pXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhyZWVEc1Jlc3VsdCA9IGVyci5ib2R5LnRocmVlX2RzX3Jlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRocmVlRHNUb2tlbiA9IHRocmVlRHNSZXN1bHQ/LnBheWVyX2F1dGhfcmVxdWVzdDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fY2FyZGluYWxDbGllbnQuZ2V0VGhyZWVEU2VjdXJlRGF0YShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlZURzUmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldE9yZGVyRGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1Ym1pdFBheW1lbnQocGF5bWVudCwgeyB0b2tlbjogdGhyZWVEc1Rva2VuIH0sIGhvc3RlZEZvcm0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRPcmRlckRhdGEoKTogQ2FyZGluYWxPcmRlckRhdGEge1xuICAgICAgICBjb25zdCBzdG9yZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdG9yZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gc3RvcmUuZ2V0U2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNhcnQ6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogeyBjb2RlOiBjdXJyZW5jeUNvZGUgfSxcbiAgICAgICAgICAgICAgICBjYXJ0QW1vdW50OiBhbW91bnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9ID0gc3RvcmUuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGlkID0gc3RvcmUuZ2V0T3JkZXJPclRocm93KCkub3JkZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAgIHJldHVybiB7IGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MsIGN1cnJlbmN5Q29kZSwgaWQsIGFtb3VudCB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3N1Ym1pdFBheW1lbnQoXG4gICAgICAgIHBheW1lbnQ6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgICAgICB0aHJlZURTZWN1cmU6IENhcmRpbmFsVGhyZWVEU2VjdXJlVG9rZW4sXG4gICAgICAgIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IG1lcmdlKHt9LCBwYXltZW50LCB7IHBheW1lbnREYXRhOiB7IHRocmVlRFNlY3VyZSB9IH0pO1xuXG4gICAgICAgIGlmICghaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IGhvc3RlZEZvcm0/LnN1Ym1pdChwYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QmluKFxuICAgICAgICBwYXltZW50RGF0YTogTm9uTnVsbGFibGU8T3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10+LFxuICAgICAgICBnZXRDYXJkSW5zdHJ1bWVudDogUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzWydnZXRDYXJkSW5zdHJ1bWVudCddLFxuICAgICAgICBob3N0ZWRGb3JtPzogSG9zdGVkRm9ybSxcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50ID1cbiAgICAgICAgICAgIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpICYmIGdldENhcmRJbnN0cnVtZW50KHBheW1lbnREYXRhLmluc3RydW1lbnRJZCk7XG4gICAgICAgIGNvbnN0IGNjTnVtYmVyID0gaXNDcmVkaXRDYXJkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgcGF5bWVudERhdGEuY2NOdW1iZXI7XG4gICAgICAgIGNvbnN0IGhvc3RlZEZvcm1CaW4gPSBob3N0ZWRGb3JtID8gaG9zdGVkRm9ybS5nZXRCaW4oKSA6IGNjTnVtYmVyO1xuICAgICAgICBjb25zdCBiaW4gPSBpbnN0cnVtZW50ID8gaW5zdHJ1bWVudC5paW4gOiBob3N0ZWRGb3JtQmluO1xuXG4gICAgICAgIHJldHVybiBiaW4gfHwgJyc7XG4gICAgfVxufVxuIiwiaW1wb3J0IGlzVmF1bHRlZEluc3RydW1lbnQgZnJvbSAnLi9pcy12YXVsdGVkLWluc3RydW1lbnQnO1xuaW1wb3J0IHsgQ3JlZGl0Q2FyZEluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IHVua25vd24sXG4pOiBpbnN0cnVtZW50IGlzIENyZWRpdENhcmRJbnN0cnVtZW50IHtcbiAgICBjb25zdCBjYXJkID0gaW5zdHJ1bWVudCBhcyBDcmVkaXRDYXJkSW5zdHJ1bWVudDtcblxuICAgIHJldHVybiAoXG4gICAgICAgICFpc1ZhdWx0ZWRJbnN0cnVtZW50KGNhcmQpICYmXG4gICAgICAgIHR5cGVvZiBjYXJkLmNjTmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIGNhcmQuY2NOdW1iZXIgPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHR5cGVvZiBjYXJkLmNjRXhwaXJ5ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgY2FyZC5jY0V4cGlyeS5tb250aCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIGNhcmQuY2NFeHBpcnkueWVhciA9PT0gJ3N0cmluZydcbiAgICApO1xufVxuIiwiaW1wb3J0IHsgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NhcmRpbmFsLWludGVncmF0aW9uJztcbmltcG9ydCB7IENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NyZWRpdC1jYXJkLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5IGV4dGVuZHMgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF90aHJlZURTZWN1cmVGbG93OiBDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3dWMixcbiAgICApIHtcbiAgICAgICAgc3VwZXIoX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIH1cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUob3B0aW9ucyk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cob3B0aW9ucy5tZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdGhyZWVEU2VjdXJlRmxvdy5wcmVwYXJlKHBheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudDogeyBtZXRob2RJZCA9ICcnIH0gPSB7fSB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBnZXRQYXltZW50TWV0aG9kT3JUaHJvdyB9ID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmIChwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90aHJlZURTZWN1cmVGbG93LnN0YXJ0KFxuICAgICAgICAgICAgICAgIHN1cGVyLmV4ZWN1dGUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgdGhpcy5faG9zdGVkRm9ybSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VwZXIuZXhlY3V0ZShwYXlsb2FkLCBvcHRpb25zKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2FyZGluYWxDbGllbnQsXG4gICAgQ2FyZGluYWxTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvY2FyZGluYWwtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vY3liZXJzb3VyY2V2Mi1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93VjIoXG4gICAgICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICAgICAgbmV3IENhcmRpbmFsQ2xpZW50KG5ldyBDYXJkaW5hbFNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSkpLFxuICAgICAgICApLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQ3liZXJTb3VyY2VWMlBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdjeWJlcnNvdXJjZXYyJyB9LFxuICAgIHsgaWQ6ICdibnonIH0sXG4gICAgeyBpZDogJ2JhcmNsYXlzJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImlzVmF1bHRlZEluc3RydW1lbnQiLCJpbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZXJyb3IiLCJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiQ2FyZGluYWxUaHJlZURTZWN1cmVGbG93IiwiY29uc3RydWN0b3IiLCJfcGF5bWVudEludGVncmF0aW9uU2VydmljZSIsIl9jYXJkaW5hbENsaWVudCIsInByZXBhcmUiLCJtZXRob2QiLCJ0aGlzIiwibG9hZCIsImlkIiwiY29uZmlnIiwidGVzdE1vZGUiLCJjb25maWd1cmUiLCJfZ2V0Q2xpZW50VG9rZW4iLCJzdGFydCIsImV4ZWN1dGUiLCJwYXlsb2FkIiwib3B0aW9ucyIsImhvc3RlZEZvcm0iLCJnZXRDYXJkSW5zdHJ1bWVudCIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiZ2V0U3RhdGUiLCJwYXltZW50IiwibWV0aG9kSWQiLCJwYXltZW50RGF0YSIsImJpbiIsImlpbiIsImdldEJpbiIsInJ1bkJpblByb2Nlc3MiLCJtZXJnZSIsInRocmVlRFNlY3VyZSIsInRva2VuIiwiY2xpZW50VG9rZW4iLCJzb21lIiwiYm9keSIsImVycm9ycyIsImNvZGUiLCJnZXRUaHJlZURTZWN1cmVEYXRhIiwidGhyZWVfZHNfcmVzdWx0IiwiX2dldE9yZGVyRGF0YSIsInN1Ym1pdFBheW1lbnQiLCJzdWJtaXQiLCJsb2FkUGF5bWVudE1ldGhvZCIsInN0YXRlIiwiYmlsbGluZ0FkZHJlc3MiLCJnZXRCaWxsaW5nQWRkcmVzc09yVGhyb3ciLCJzaGlwcGluZ0FkZHJlc3MiLCJnZXRTaGlwcGluZ0FkZHJlc3MiLCJjaGVja291dCIsImdldENoZWNrb3V0T3JUaHJvdyIsIm9yZGVyIiwiZ2V0T3JkZXJPclRocm93IiwiY3VycmVuY3lDb2RlIiwiY2FydCIsImN1cnJlbmN5Iiwib3JkZXJJZCIsInRvU3RyaW5nIiwiYW1vdW50IiwiY2FydEFtb3VudCIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJzdXBlciIsIm5hbWUiLCJ0eXBlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiTWlzc2luZ0RhdGFFcnJvciIsInN1YnR5cGUiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEVycm9yTWVzc2FnZSIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJDdXN0b21lck5vdEluaXRpYWxpemVkIiwiUGF5bWVudE5vdEluaXRpYWxpemVkIiwiU2hpcHBpbmdOb3RJbml0aWFsaXplZCIsIlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQiLCJDYXJkaW5hbFNpZ25hdHVyZVZhbGlkYXRpb25FcnJvcnMiLCJDYXJkaW5hbEV2ZW50VHlwZSIsIkNhcmRpbmFsSW5pdGlhbGl6YXRpb25UeXBlIiwiQ2FyZGluYWxWYWxpZGF0ZWRBY3Rpb24iLCJDYXJkaW5hbFBheW1lbnRUeXBlIiwiQ2FyZGluYWxUcmlnZ2VyRXZlbnRzIiwiQ2FyZGluYWxQYXltZW50QnJhbmQiLCJDYXJkaW5hbFNpZ25hdHVyZVZlcmlmaWNhdGlvbiIsIkNhcmRpbmFsQ2xpZW50IiwiX3NjcmlwdExvYWRlciIsIl9wcm92aWRlciIsIl90ZXN0TW9kZSIsIl9jb25maWd1cmF0aW9uVG9rZW4iLCJwcm92aWRlciIsIl9zZGsiLCJ0aGVuIiwibm9vcCIsIlByb21pc2UiLCJyZXNvbHZlIiwiRGF0ZSIsIm5vdyIsIl9nZXRDbGllbnRTREsiLCJjbGllbnQiLCJyZWplY3QiLCJvbiIsIlNldHVwQ29tcGxldGVkIiwib2ZmIiwiVmFsaWRhdGVkIiwiZGF0YSIsIkFjdGlvbkNvZGUiLCJpbmNsdWRlcyIsIkVycm9yTnVtYmVyIiwiRXJyb3JEZXNjcmlwdGlvbiIsInNldHVwIiwiSW5pdCIsImp3dCIsImJpbk51bWJlciIsInRyaWdnZXIiLCJCaW5Qcm9jZXNzIiwiY2F0Y2giLCJyZXN1bHQiLCJTdGF0dXMiLCJ0aHJlZURTZWN1cmVEYXRhIiwib3JkZXJEYXRhIiwiU3VjY2VzcyIsIk5vQWN0aW9uIiwiUGF5bWVudCIsIkV4dGVuZGVkRGF0YSIsIlNpZ25hdHVyZVZlcmlmaWNhdGlvbiIsIlllcyIsIkZhaWx1cmUiLCJjb250aW51ZU9iamVjdCIsIkFjc1VybCIsImFjc191cmwiLCJQYXlsb2FkIiwibWVyY2hhbnRfZGF0YSIsInBhcnRpYWxPcmRlciIsIl9tYXBUb1BhcnRpYWxPcmRlciIsInBheWVyX2F1dGhfcmVxdWVzdCIsImNvbnRpbnVlIiwiQ0NBIiwidHJhbnNhY3Rpb25JZCIsImNvbnN1bWVyIiwiQmlsbGluZ0FkZHJlc3MiLCJfbWFwVG9DYXJkaW5hbEFkZHJlc3MiLCJBY2NvdW50IiwiX21hcFRvQ2FyZGluYWxBY2NvdW50IiwiZW1haWwiLCJFbWFpbDEiLCJTaGlwcGluZ0FkZHJlc3MiLCJDb25zdW1lciIsIk9yZGVyRGV0YWlscyIsIk9yZGVyTnVtYmVyIiwiQW1vdW50IiwiQ3VycmVuY3lDb2RlIiwiT3JkZXJDaGFubmVsIiwiVHJhbnNhY3Rpb25JZCIsIkFjY291bnROdW1iZXIiLCJOdW1iZXIiLCJjY051bWJlciIsIkV4cGlyYXRpb25Nb250aCIsImNjRXhwaXJ5IiwibW9udGgiLCJFeHBpcmF0aW9uWWVhciIsInllYXIiLCJOYW1lT25BY2NvdW50IiwiY2NOYW1lIiwiQ2FyZENvZGUiLCJjY0N2diIsImFkZHJlc3MiLCJjYXJkaW5hbEFkZHJlc3MiLCJGaXJzdE5hbWUiLCJmaXJzdE5hbWUiLCJMYXN0TmFtZSIsImxhc3ROYW1lIiwiQWRkcmVzczEiLCJhZGRyZXNzMSIsIkNpdHkiLCJjaXR5IiwiU3RhdGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJQb3N0YWxDb2RlIiwicG9zdGFsQ29kZSIsIkNvdW50cnlDb2RlIiwiY291bnRyeUNvZGUiLCJhZGRyZXNzMiIsIkFkZHJlc3MyIiwicGhvbmUiLCJQaG9uZTEiLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIkNhcmRpbmFsU2NyaXB0TG9hZGVyIiwiX3dpbmRvdyIsIndpbmRvdyIsInVybCIsImxvYWRTY3JpcHQiLCJDYXJkaW5hbCIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJhc3NpZ24iLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJqb2luIiwiQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSIsIl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZCIsImdhdGV3YXlJZCIsIl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtIiwiX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0iLCJpbml0aWFsaXplIiwiX2lzSG9zdGVkRmllbGRBdmFpbGFibGUiLCJmb3JtT3B0aW9ucyIsImNyZWRpdENhcmQiLCJmb3JtIiwicGF5bWVudFNldHRpbmdzIiwiYmlncGF5QmFzZVVybCIsImhvc3QiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjcmVhdGVIb3N0ZWRGb3JtIiwiYXR0YWNoIiwiX2hvc3RlZEZvcm0iLCJkZWluaXRpYWxpemUiLCJkZXRhY2giLCJmaW5hbGl6ZSIsInN1Ym1pdE9yZGVyIiwidmFsaWRhdGUiLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwidmFsdWVzIiwiZmllbGRzIiwiZXZlcnkiLCJpc05pbCIsIkN5YmVyU291cmNlUGF5bWVudFN0cmF0ZWd5IiwiX3RocmVlRFNlY3VyZUZsb3ciLCJwYXltZW50TWV0aG9kIiwiaXMzZHNFbmFibGVkIiwiYmluZCIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJnZXRTY3JpcHRMb2FkZXIiLCJDYXJkaW5hbFRocmVlRFNlY3VyZUZsb3dWMiIsInN0YXR1cyIsImFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkIiwieGlkIiwiX2dldEJpbiIsIl9zdWJtaXRQYXltZW50IiwiZXJyIiwidGhyZWVEc1Jlc3VsdCIsInRocmVlRHNUb2tlbiIsInN0b3JlIiwicGF5bWVudFBheWxvYWQiLCJjYXJkIiwiaXNDcmVkaXRDYXJkSW5zdHJ1bWVudCIsImhvc3RlZEZvcm1CaW4iLCJDeWJlclNvdXJjZVYyUGF5bWVudFN0cmF0ZWd5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/cybersource.js\n\n}");

/***/ }),

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/sagepay.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/sagepay.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSagePayPaymentStrategy: () => (/* binding */ _)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"./node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar r;class s extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends s{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class o extends s{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class d extends a{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(r||(r={}));class c extends s{constructor(e){super(function(e){switch(e){case r.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case r.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case r.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case r.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}var u,l=function(e,t,i,n){return new(i||(i=Promise))(function(r,s){function a(e){try{d(n.next(e))}catch(e){s(e)}}function o(e){try{d(n.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,o)}d((n=n.apply(e,t||[])).next())})},h=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};class m{constructor(e){this._paymentIntegrationService=e}execute(e,t){var i,n;return this._isHostedPaymentFormEnabled(null===(i=e.payment)||void 0===i?void 0:i.methodId,null===(n=e.payment)||void 0===n?void 0:n.gatewayId)&&this._shouldRenderHostedForm?this._executeWithHostedForm(e,t):this._executeWithoutHostedForm(e,t)}initialize(e){if(!this._isHostedPaymentFormEnabled(null==e?void 0:e.methodId,null==e?void 0:e.gatewayId)||!this._isHostedFieldAvailable(e))return this._shouldRenderHostedForm=!1,Promise.resolve();const t=e&&e.creditCard&&e.creditCard.form,i=this._paymentIntegrationService.getState(),{paymentSettings:{bigpayBaseUrl:n=\"\"}={}}=i.getStoreConfigOrThrow();if(!t)throw new a;const r=this._paymentIntegrationService.createHostedForm(n,t);return r.attach().then(()=>(this._shouldRenderHostedForm=!0,this._hostedForm=r,Promise.resolve()))}deinitialize(){return this._hostedForm&&this._hostedForm.detach(),Promise.resolve()}finalize(){return Promise.reject(new o)}_executeWithoutHostedForm(e,t){return l(this,void 0,void 0,function*(){const{payment:i}=e,n=h(e,[\"payment\"]),r=i&&i.paymentData;if(!i||!r)throw new d([\"payment.paymentData\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:r}))})}_executeWithHostedForm(e,t){return l(this,void 0,void 0,function*(){const{payment:i}=e,n=h(e,[\"payment\"]),s=this._hostedForm;if(!s)throw new c(r.PaymentNotInitialized);if(!i||!i.methodId)throw new d([\"payment.methodId\"]);yield this._paymentIntegrationService.submitOrder(n,t),yield s.validate().then(()=>s.submit(i))})}_isHostedPaymentFormEnabled(e,t){return!!e&&!0===this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t).config.isHostedFormEnabled}_isHostedFieldAvailable(e){return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.values)(e&&e.creditCard&&e.creditCard.form.fields).every(lodash__WEBPACK_IMPORTED_MODULE_1__.isNil)}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(u||(u={}));class g extends s{constructor(e){super(function(e){switch(e){case u.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case u.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case u.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case u.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case u.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case u.MissingCheckoutConfig:case u.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case u.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case u.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case u.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case u.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case u.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case u.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}function p(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}var y;!function(e){e.ACKNOWLEDGE=\"ACKNOWLEDGE\",e.FINALIZE=\"FINALIZE\",e.INITIALIZE=\"INITIALIZE\"}(y||(y={}));const b=y;class f extends m{constructor(e,t){super(e),this.paymentIntegrationService=e,this._formPoster=t}execute(e,t){const{payment:n}=e;if(!n)throw new c(r.PaymentNotInitialized);const{paymentData:s}=n;if(!s)throw new g(u.MissingPayment);if(this._isThreeDSTwoExperimentOn()){const t=Object.assign(Object.assign({},s),{browser_info:p()});e.payment&&(e.payment.paymentData=t)}return super.execute(e,t).catch(e=>(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"})?new Promise(()=>{let t;t=this._isThreeDSTwoExperimentOn()&&!e.body.three_ds_result.merchant_data?{creq:e.body.three_ds_result.payer_auth_request}:{PaReq:e.body.three_ds_result.payer_auth_request,TermUrl:e.body.three_ds_result.callback_url,MD:e.body.three_ds_result.merchant_data},this._formPoster.postForm(e.body.three_ds_result.acs_url,t,void 0,\"_top\")}):Promise.reject(e))}finalize(e){const t=this.paymentIntegrationService.getState();return t.getOrder()&&t.getPaymentStatus()===b.FINALIZE&&this.paymentIntegrationService.finalizeOrder(e),super.finalize()}_isThreeDSTwoExperimentOn(){return!0===this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features[\"INT-4994.Opayo_3DS2\"]}}const _=(v=t=>new f(t,(0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_0__.createFormPoster)()),I=[{id:\"sagepay\"}],Object.assign(v,{resolveIds:I}));var v,I;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMvc2FnZXBheS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0EsSUNDWUEsRUNLRyxNQUFlQyxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ0MsRURZNUNDLE1BQU1GLEdBQVcscUNBSnJCLEtBQUFHLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q0gsYURjWkEsVUNiaENJLE9BQU9DLGVBQ1BELE9BQU9DLGVEWVFDLEtDWmVOLEdEWWZNLEtDVlJDLFVBQVlQLEVEWW9CLG1CQUE1QkgsTUFBTVcsa0JBQ2JYLE1BQU1XLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlaLE1BQU1TLEtBQUtQLFNBQVNVLEtBRTdDLEVFZFcsTUFBTUMsVUFBNkJkLEVBQzlDLFdBQUFFLENBQVlDLEdBQ1JFLE1BQU1GLEdBQVcseUNBRWpCTyxLQUFLSixLQUFPLHVCQUNaSSxLQUFLSCxLQUFPLGtCQUNoQixFQ1BXLE1BQU1RLFVBQTBDZixFQUMzRCxXQUFBRSxHQUNJRyxNQUFNLGtFQUVOSyxLQUFLSixLQUFPLG9DQUNaSSxLQUFLSCxLQUFPLGlDQUNoQixFQ0xXLE1BQU1TLFVBQW9DRixFQUNyRCxXQUFBWixDQUFZZSxHQUNSLElBQUlkLEVBQVUseUVBRVZjLElBQ0FkLEVBQVUsR0FBR0EsNERBQWtFYyxFQUFjQyxLQUN6RixVQUlSYixNQUFNRixHQUVOTyxLQUFLSixLQUFPLDZCQUNoQixHTGxCSixTQUFZUCxHQUNSLG1FQUNBLHVEQUNBLHFEQUNBLHVEQUNBLGtFQUNILENBTkQsQ0FBWUEsSUFBQUEsRUFBdUIsS0FhcEIsTUFBTW9CLFVBQTRCbkIsRUFDN0MsV0FBQUUsQ0FBbUJrQixHQUNmZixNQU9SLFNBQXlCRSxHQUNyQixPQUFRQSxHQUNKLEtBQUtSLEVBQXdCc0IsdUJBQ3pCLE1BQU8sb0ZBRVgsS0FBS3RCLEVBQXdCdUIsc0JBQ3pCLE1B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QU1FLEtBQUtHLGdCQUFnQlMsUUFDM0JqRyxPQUNBa0csRUFDQSxVQXRCR3ZGLFFBQVFrQixPQUFPc0QsR0EwQmxDLENBRUEsUUFBQXZELENBQVMzQixHQUNMLE1BQU1lLEVBQVFwQyxLQUFLaUcsMEJBQTBCNUQsV0FPN0MsT0FOY0QsRUFBTW1GLFlBRVBuRixFQUFNb0YscUJBQXVCLEVBQW1CQyxVQUN6RHpILEtBQUtpRywwQkFBMEJ5QixjQUFjckcsR0FHMUMxQixNQUFNcUQsVUFDakIsQ0FFUSx5QkFBQW1ELEdBQ0osT0FFNkMsSUFEekNuRyxLQUFLaUcsMEJBQTBCNUQsV0FBV0ksd0JBQXdCa0YsaUJBQzdEQyxTQUFTLHNCQUV0QixFRXpGSixNQU1BLEdDWklDLEVET0E1QixHQUVPLElBQUlELEVBQXVCQyxFQUEyQjZCLDBFQUFBQSxJQ1I3REMsRURXNEQsQ0FBQyxDQUFFQyxHQUFJLFlDVDVEbEksT0FBT21JLE9BQU9KLEVBQVEsQ0FBRUUsZ0JBSnBCLElBQ1hGLEVBQ0FFLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvY3JlZGl0LWNhcmQtaW50ZWdyYXRpb24vc3JjL2NyZWRpdC1jYXJkLXBheW1lbnQtc3RyYXRlZ3kudHM/Mjg5ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9icm93c2VyLWluZm8vZ2V0LWJyb3dzZXItaW5mby50cz84YmE0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9wYXltZW50LXN0YXR1cy10eXBlcy50cz8wYjgwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zYWdlcGF5LWludGVncmF0aW9uL3NyYy9zYWdlLXBheS1wYXltZW50LXN0cmF0ZWd5LnRzP2E2NjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zYWdlcGF5LWludGVncmF0aW9uL3NyYy9jcmVhdGUtc2FnZS1wYXktcGF5bWVudC1zdHJhdGVneS50cz83ZDNlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvdG8tcmVzb2x2YWJsZS1tb2R1bGUudHM/ZDUyMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNOaWwsIHZhbHVlcyB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgSG9zdGVkRm9ybSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgV2l0aENyZWRpdENhcmRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL2NyZWRpdC1jYXJkLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3JlZGl0Q2FyZFBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJvdGVjdGVkIF9ob3N0ZWRGb3JtPzogSG9zdGVkRm9ybTtcbiAgICBwcm90ZWN0ZWQgX3Nob3VsZFJlbmRlckhvc3RlZEZvcm0/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSB7fVxuXG4gICAgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChcbiAgICAgICAgICAgIHBheWxvYWQucGF5bWVudD8ubWV0aG9kSWQsXG4gICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQ/LmdhdGV3YXlJZCxcbiAgICAgICAgKSAmJiB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtXG4gICAgICAgICAgICA/IHRoaXMuX2V4ZWN1dGVXaXRoSG9zdGVkRm9ybShwYXlsb2FkLCBvcHRpb25zKVxuICAgICAgICAgICAgOiB0aGlzLl9leGVjdXRlV2l0aG91dEhvc3RlZEZvcm0ocGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhDcmVkaXRDYXJkUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5faXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQob3B0aW9ucz8ubWV0aG9kSWQsIG9wdGlvbnM/LmdhdGV3YXlJZCkgfHxcbiAgICAgICAgICAgICF0aGlzLl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKG9wdGlvbnMpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fc2hvdWxkUmVuZGVySG9zdGVkRm9ybSA9IGZhbHNlO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmb3JtT3B0aW9ucyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jcmVkaXRDYXJkICYmIG9wdGlvbnMuY3JlZGl0Q2FyZC5mb3JtO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50U2V0dGluZ3M6IHsgYmlncGF5QmFzZVVybDogaG9zdCA9ICcnIH0gPSB7fSB9ID1cbiAgICAgICAgICAgIHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghZm9ybU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlSG9zdGVkRm9ybShob3N0LCBmb3JtT3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIGZvcm0uYXR0YWNoKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRSZW5kZXJIb3N0ZWRGb3JtID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2hvc3RlZEZvcm0gPSBmb3JtO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hvc3RlZEZvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuX2hvc3RlZEZvcm0uZGV0YWNoKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtKFxuICAgICAgICBwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQgJiYgcGF5bWVudC5wYXltZW50RGF0YTtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudC5wYXltZW50RGF0YSddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7IC4uLnBheW1lbnQsIHBheW1lbnREYXRhIH0pO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyBfZXhlY3V0ZVdpdGhIb3N0ZWRGb3JtKFxuICAgICAgICBwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5faG9zdGVkRm9ybTtcblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnQubWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50Lm1ldGhvZElkJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgZm9ybS52YWxpZGF0ZSgpLnRoZW4oKCkgPT4gZm9ybS5zdWJtaXQocGF5bWVudCkpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQobWV0aG9kSWQ/OiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmNvbmZpZy5pc0hvc3RlZEZvcm1FbmFibGVkID09PSB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2lzSG9zdGVkRmllbGRBdmFpbGFibGUoXG4gICAgICAgIG9wdGlvbnM/OiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQ3JlZGl0Q2FyZFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuICF2YWx1ZXMob3B0aW9ucyAmJiBvcHRpb25zLmNyZWRpdENhcmQgJiYgb3B0aW9ucy5jcmVkaXRDYXJkLmZvcm0uZmllbGRzKS5ldmVyeShcbiAgICAgICAgICAgIGlzTmlsLFxuICAgICAgICApO1xuICAgIH1cbn1cbiIsImltcG9ydCBCcm93c2VySW5mbyBmcm9tICcuL2Jyb3dzZXItaW5mbyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEJyb3dzZXJJbmZvKCk6IEJyb3dzZXJJbmZvIHtcbiAgICBjb25zdCB7IG5hdmlnYXRvciB9ID0gd2luZG93O1xuXG4gICAgbGV0IGxhbmd1YWdlOiBzdHJpbmc7XG5cbiAgICBpZiAobmF2aWdhdG9yLmxhbmd1YWdlKSB7XG4gICAgICAgIGxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxhbmd1YWdlID0gKG5hdmlnYXRvciBhcyBhbnkpLnVzZXJMYW5ndWFnZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xvcl9kZXB0aDogd2luZG93LnNjcmVlbi5jb2xvckRlcHRoIHx8IDI0LFxuICAgICAgICBqYXZhX2VuYWJsZWQ6IHR5cGVvZiBuYXZpZ2F0b3IuamF2YUVuYWJsZWQgPT09ICdmdW5jdGlvbicgPyBuYXZpZ2F0b3IuamF2YUVuYWJsZWQoKSA6IGZhbHNlLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgc2NyZWVuX2hlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgIHNjcmVlbl93aWR0aDogd2luZG93LnNjcmVlbi53aWR0aCxcbiAgICAgICAgdGltZV96b25lX29mZnNldDogbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLnRvU3RyaW5nKCksXG4gICAgfTtcbn1cbiIsImVudW0gUGF5bWVudFN0YXR1c1R5cGVzIHtcbiAgICBBQ0tOT1dMRURHRSA9ICdBQ0tOT1dMRURHRScsXG4gICAgRklOQUxJWkUgPSAnRklOQUxJWkUnLFxuICAgIElOSVRJQUxJWkUgPSAnSU5JVElBTElaRScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRTdGF0dXNUeXBlcztcbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7IENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2NyZWRpdC1jYXJkLWludGVncmF0aW9uJztcbmltcG9ydCB7XG4gICAgZ2V0QnJvd3NlckluZm8sXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0YXR1c1R5cGVzLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2FnZVBheVBheW1lbnRTdHJhdGVneSBleHRlbmRzIENyZWRpdENhcmRQYXltZW50U3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX2Zvcm1Qb3N0ZXI6IEZvcm1Qb3N0ZXIsXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpO1xuICAgIH1cblxuICAgIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSB9ID0gcGF5bWVudDtcblxuICAgICAgICBpZiAoIXBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5faXNUaHJlZURTVHdvRXhwZXJpbWVudE9uKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1BheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIGJyb3dzZXJfaW5mbzogZ2V0QnJvd3NlckluZm8oKSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChwYXlsb2FkLnBheW1lbnQpIHtcbiAgICAgICAgICAgICAgICBwYXlsb2FkLnBheW1lbnQucGF5bWVudERhdGEgPSBuZXdQYXltZW50RGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdXBlci5leGVjdXRlKHBheWxvYWQsIG9wdGlvbnMpLmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAgICAgIXNvbWUoZXJyb3IuYm9keS5lcnJvcnMsIHsgY29kZTogJ3RocmVlX2Rfc2VjdXJlX3JlcXVpcmVkJyB9KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcGF5bG9hZDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1RocmVlRFNUd29FeHBlcmltZW50T24oKSAmJiAhZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQubWVyY2hhbnRfZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlcTogZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQucGF5ZXJfYXV0aF9yZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBQYVJlcTogZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQucGF5ZXJfYXV0aF9yZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgVGVybVVybDogZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQuY2FsbGJhY2tfdXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgTUQ6IGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0Lm1lcmNoYW50X2RhdGEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fZm9ybVBvc3Rlci5wb3N0Rm9ybShcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuYm9keS50aHJlZV9kc19yZXN1bHQuYWNzX3VybCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAnX3RvcCcsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZShvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXIoKTtcblxuICAgICAgICBpZiAob3JkZXIgJiYgc3RhdGUuZ2V0UGF5bWVudFN0YXR1cygpID09PSBQYXltZW50U3RhdHVzVHlwZXMuRklOQUxJWkUpIHtcbiAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5maW5hbGl6ZU9yZGVyKG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmZpbmFsaXplKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaXNUaHJlZURTVHdvRXhwZXJpbWVudE9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5nc1xuICAgICAgICAgICAgICAgIC5mZWF0dXJlc1snSU5ULTQ5OTQuT3BheW9fM0RTMiddID09PSB0cnVlXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFNhZ2VQYXlQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9zYWdlLXBheS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlU2FnZVBheVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxTYWdlUGF5UGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTYWdlUGF5UGF5bWVudFN0cmF0ZWd5KHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsIGNyZWF0ZUZvcm1Qb3N0ZXIoKSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlU2FnZVBheVBheW1lbnRTdHJhdGVneSwgW3sgaWQ6ICdzYWdlcGF5JyB9XSk7XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInByb3RvdHlwZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJDcmVkaXRDYXJkUGF5bWVudFN0cmF0ZWd5IiwiX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJleGVjdXRlIiwicGF5bG9hZCIsIm9wdGlvbnMiLCJfaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJwYXltZW50IiwibWV0aG9kSWQiLCJnYXRld2F5SWQiLCJfc2hvdWxkUmVuZGVySG9zdGVkRm9ybSIsIl9leGVjdXRlV2l0aEhvc3RlZEZvcm0iLCJfZXhlY3V0ZVdpdGhvdXRIb3N0ZWRGb3JtIiwiaW5pdGlhbGl6ZSIsIl9pc0hvc3RlZEZpZWxkQXZhaWxhYmxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmb3JtT3B0aW9ucyIsImNyZWRpdENhcmQiLCJmb3JtIiwic3RhdGUiLCJnZXRTdGF0ZSIsInBheW1lbnRTZXR0aW5ncyIsImJpZ3BheUJhc2VVcmwiLCJob3N0IiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsInRoZW4iLCJfaG9zdGVkRm9ybSIsImRlaW5pdGlhbGl6ZSIsImRldGFjaCIsImZpbmFsaXplIiwicmVqZWN0Iiwib3JkZXIiLCJwYXltZW50RGF0YSIsInN1Ym1pdE9yZGVyIiwic3VibWl0UGF5bWVudCIsInZhbGlkYXRlIiwic3VibWl0IiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJjb25maWciLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwidmFsdWVzIiwiZmllbGRzIiwiZXZlcnkiLCJpc05pbCIsIk1pc3NpbmdEYXRhRXJyb3IiLCJNaXNzaW5nQmlsbGluZ0FkZHJlc3MiLCJNaXNzaW5nQ2FydCIsIk1pc3NpbmdDb25zaWdubWVudHMiLCJNaXNzaW5nQ2hlY2tvdXQiLCJNaXNzaW5nQ3VzdG9tZXIiLCJNaXNzaW5nQ2hlY2tvdXRDb25maWciLCJNaXNzaW5nT3JkZXJDb25maWciLCJNaXNzaW5nT3JkZXIiLCJNaXNzaW5nT3JkZXJJZCIsIk1pc3NpbmdQYXltZW50IiwiTWlzc2luZ1BheW1lbnRUb2tlbiIsIk1pc3NpbmdQYXltZW50TWV0aG9kIiwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyIsImdldEJyb3dzZXJJbmZvIiwibmF2aWdhdG9yIiwid2luZG93IiwibGFuZ3VhZ2UiLCJ1c2VyTGFuZ3VhZ2UiLCJjb2xvcl9kZXB0aCIsInNjcmVlbiIsImNvbG9yRGVwdGgiLCJqYXZhX2VuYWJsZWQiLCJqYXZhRW5hYmxlZCIsInNjcmVlbl9oZWlnaHQiLCJoZWlnaHQiLCJzY3JlZW5fd2lkdGgiLCJ3aWR0aCIsInRpbWVfem9uZV9vZmZzZXQiLCJEYXRlIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJ0b1N0cmluZyIsIlBheW1lbnRTdGF0dXNUeXBlcyIsIlNhZ2VQYXlQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiX2Zvcm1Qb3N0ZXIiLCJfaXNUaHJlZURTVHdvRXhwZXJpbWVudE9uIiwibmV3UGF5bWVudERhdGEiLCJicm93c2VyX2luZm8iLCJjYXRjaCIsImVycm9yIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJjb2RlIiwidGhyZWVfZHNfcmVzdWx0IiwibWVyY2hhbnRfZGF0YSIsImNyZXEiLCJwYXllcl9hdXRoX3JlcXVlc3QiLCJQYVJlcSIsIlRlcm1VcmwiLCJjYWxsYmFja191cmwiLCJNRCIsInBvc3RGb3JtIiwiYWNzX3VybCIsInVuZGVmaW5lZCIsImdldE9yZGVyIiwiZ2V0UGF5bWVudFN0YXR1cyIsIkZJTkFMSVpFIiwiZmluYWxpemVPcmRlciIsImNoZWNrb3V0U2V0dGluZ3MiLCJmZWF0dXJlcyIsIm1vZHVsZSIsImNyZWF0ZUZvcm1Qb3N0ZXIiLCJyZXNvbHZlSWRzIiwiaWQiLCJhc3NpZ24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/sagepay.js\n\n}");

/***/ })

}]);