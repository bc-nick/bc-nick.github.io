"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["adyen-v2-payment-method"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/adyen.js":
/*!*********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/adyen.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdyenV2PaymentStrategy: () => (/* binding */ j),\n/* harmony export */   createAdyenV3PaymentStrategy: () => (/* binding */ N)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nclass i extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class a extends i{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}var o,r,s,d,c,l,p,h;class u{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-8ofgICZZ/k5cC5N7xegqFZOA73H9RQ7H13439JfAZW8Gj3qjuKL2isaTD3GMIhDE\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/3.10.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-wG2z9zSQo61EIvyXmiFCo+zB3y0ZB4hsrXVcANmpP8HLthjoQJQPBh7tZKJSV8jA\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return new this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}function m(e,t){return Object.assign(e,{resolveIds:t})}function y(e){return\"object\"==typeof e&&\"string\"==typeof e.data.paymentMethod.encryptedSecurityCode||\"string\"==typeof e.data.paymentMethod.encryptedExpiryMonth}!function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2=\"threeDS2\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\",e.Sdk=\"sdk\"}(o||(o={})),function(e){e.ThreeDS2Fingerprint=\"threeDS2Fingerprint\",e.ThreeDS2Challenge=\"threeDS2Challenge\",e.Redirect=\"redirect\",e.QRCode=\"qrCode\",e.Voucher=\"voucher\"}(r||(r={})),function(e){e.SecuredFields=\"securedfields\"}(s||(s={})),function(e){e.ACH=\"ach\",e.AliPay=\"alipay\",e.Bancontact=\"bcmc\",e.CreditCard=\"scheme\",e.Klarna=\"klarna\",e.KlarnaPayNow=\"klarna_paynow\",e.KlarnaAccount=\"klarna_account\",e.IDEAL=\"ideal\",e.GiroPay=\"giropay\",e.GooglePay=\"paywithgoogle\",e.SEPA=\"sepadirectdebit\",e.Sofort=\"directEbanking\",e.Vipps=\"vipps\",e.WeChatPayQR=\"wechatpayQR\"}(d||(d={})),function(e){e.POST=\"POST\"}(c||(c={})),function(e){e.ChallengeShopper=\"ChallengeShopper\",e.Error=\"Error\",e.IdentifyShopper=\"IdentifyShopper\"}(l||(l={})),function(e){e.CardNumber=\"encryptedCardNumber\",e.SecurityCode=\"encryptedSecurityCode\",e.ExpiryDate=\"encryptedExpiryDate\"}(p||(p={}));class g extends i{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class _ extends g{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(h||(h={}));class f extends i{constructor(e){super(function(e){switch(e){case h.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case h.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case h.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case h.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}function v(e){return Boolean(e.instrumentId)}function b(){const{navigator:e}=window;let t;return t=e.language?e.language:e.userLanguage,{color_depth:window.screen.colorDepth||24,java_enabled:\"function\"==typeof e.javaEnabled&&e.javaEnabled(),language:t,screen_height:window.screen.height,screen_width:window.screen.width,time_zone_offset:(new Date).getTimezoneOffset().toString()}}class C extends i{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class w extends i{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}const S=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;class O extends i{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var I=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class P{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return I(this,void 0,void 0,function*(){const{adyenv2:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv2\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{originKey:i,clientKey:a,environment:o,paymentMethodsResponse:r}=n.initializationData||{},s={key:\"\",value:\"\"};return i?(s.key=\"originKey\",s.value=i):(s.key=\"clientKey\",s.value=a||\"\"),this._adyenClient=yield this._scriptLoader.load({environment:o,locale:this._paymentIntegrationService.getState().getLocale(),[s.key]:s.value,paymentMethodsResponse:r,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){return I(this,void 0,void 0,function*(){const{payment:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]),a=n&&n.paymentData,o=a&&a.shouldSaveInstrument,r=a&&a.shouldSetAsDefaultInstrument;if(!n)return Promise.reject(new _([\"payment\"]));this._validateCardData(),yield this._paymentIntegrationService.submitOrder(i,t);const s=this._componentState;if(!s)throw new f(h.PaymentNotInitialized);if(a&&v(a)){let e={};if(y(s)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=s.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}if(y(s)||-1!==[\"ideal\",\"sepadirectdebit\",\"directEbanking\",\"giropay\"].indexOf(s.data.paymentMethod.type))try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},n),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:a.instrumentId}),origin:window.location.origin,browser_info:b(),set_as_default_stored_instrument:r||null}}})))}catch(e){return void(yield this._processAdditionalAction(e,o,r))}}try{yield this._paymentIntegrationService.submitPayment({methodId:n.methodId,paymentData:{formattedPayload:{credit_card_token:{token:JSON.stringify(Object.assign(Object.assign({},s.data.paymentMethod),{origin:window.location.origin}))},browser_info:b(),vault_payment_instrument:o||null,set_as_default_stored_instrument:r||null}}})}catch(e){yield this._processAdditionalAction(e,o,r)}})}finalize(){return Promise.reject(new C)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv2\" argument was not provided during initialization.');return this._paymentInitializeOptions}_getThreeDS2ChallengeWidgetSize(){const{additionalActionOptions:e,threeDS2Options:t}=this._getPaymentInitializeOptions();return e.widgetSize||(null==t?void 0:t.widgetSize)||\"05\"}_handleAction(e){return new Promise((t,n)=>{const{threeDS2ContainerId:i,additionalActionOptions:a}=this._getPaymentInitializeOptions(),{onBeforeLoad:o,containerId:s,onLoad:d,onComplete:c}=a,l=JSON.parse(e.action),p=this._getAdyenClient().createFromAction(l,{onAdditionalDetails:e=>{const n={methodId:l.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};c&&c(),t(n)},size:this._getThreeDS2ChallengeWidgetSize(),onError:e=>n(e)});o&&o(l.type===r.ThreeDS2Challenge||l.type===r.QRCode),p.mount(`#${s||i}`),d&&d(()=>{n(new w),p.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{n.mount(`#${e.cardVerificationContainerId}`)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{switch(e.method){case d.CreditCard:case d.ACH:case d.Bancontact:{const a=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:r}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e),data:this._mapAdyenPlaceholderData(a,r)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}break}case d.IDEAL:case d.SEPA:if(n.hasVaultedInstruments)this._updateComponentState({data:{paymentMethod:{type:e.method}}});else{t=i.create(e.method,Object.assign(Object.assign({},n.options),{onChange:e=>this._updateComponentState(e)}));try{t.mount(`#${n.containerId}`)}catch(e){o(new f(h.PaymentNotInitialized))}}break;case d.AliPay:case d.GiroPay:case d.Sofort:case d.Klarna:case d.KlarnaPayNow:case d.KlarnaAccount:case d.Vipps:case d.WeChatPayQR:this._updateComponentState({data:{paymentMethod:{type:e.method}}})}a(t)})}_processAdditionalAction(e,t,i){return I(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const a=yield this._handleAction(e.body.provider_data);try{yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},a),{paymentData:Object.assign(Object.assign({},a.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i})}))}catch(e){return this._processAdditionalAction(e,t,i)}})}_updateComponentState(e){this._componentState=e}_validateCardData(){var e,t;const n=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==n?void 0:n.componentRef)||void 0===e?void 0:e.showValidation)&&n.state&&(n.componentRef.showValidation(),0===Object.keys(n.state).length||!n.state.isValid&&!n.state.issuer||\"sepadirectdebit\"===(null===(t=n.props)||void 0===t?void 0:t.type)&&n.state.data&&Object.values(n.state.data).some(e=>0===e.toString().trim().length)))throw new O(this._mapCardErrors(n.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}}const j=m(n=>new P(n,new u((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv2\"}]);class A{constructor(e,t,n=window){this._scriptLoader=e,this._stylesheetLoader=t,this._window=n}load(e){var t,n,i,o,r,s;return i=this,o=void 0,s=function*(){if(yield Promise.all([this._stylesheetLoader.loadStylesheet(`https://checkoutshopper-${null!==(t=e.environment)&&void 0!==t?t:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.css`,{prepend:!1,attributes:{integrity:\"sha384-5MvB4RnzvviA3VBT4KYABZ4HXNZG5LRqREEgd41xt/pf/QvKmsj2O9GuNuywRXx9\",crossorigin:\"anonymous\"}}),this._scriptLoader.loadScript(`https://checkoutshopper-${null!==(n=e.environment)&&void 0!==n?n:\"\"}.adyen.com/checkoutshopper/sdk/5.71.1/adyen.js`,{async:!0,attributes:{integrity:\"sha384-yvY2yFNR4WqIjPqP9MzjI+gJimmaJnAvj4rLHKvgJbgFD5fMuf8zIJrFJOW8Lhhf\",crossorigin:\"anonymous\"}})]),!this._window.AdyenCheckout)throw new a;return yield this._window.AdyenCheckout(e)},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{d(s.next(e))}catch(e){t(e)}}function a(e){try{d(s.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(n,a)}d((s=s.apply(i,o||[])).next())})}}var z=function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function r(e){try{d(i.next(e))}catch(e){o(e)}}function s(e){try{d(i.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((i=i.apply(e,t||[])).next())})};class D{constructor(e,t){this._paymentIntegrationService=e,this._scriptLoader=t}initialize(e){return z(this,void 0,void 0,function*(){const{adyenv3:t}=e;if(!t)throw new g('Unable to initialize payment because \"options.adyenv3\" argument is not provided.');this._paymentInitializeOptions=t;const n=this._paymentIntegrationService.getState().getPaymentMethodOrThrow(e.methodId),{environment:i,clientKey:a,paymentMethodsResponse:o,installmentOptions:r}=n.initializationData||{};return this._adyenClient=yield this._scriptLoader.load({paymentMethodsConfiguration:Object.assign({klarna:{useKlarnaWidget:!0},klarna_account:{useKlarnaWidget:!0},klarna_paynow:{useKlarnaWidget:!0}},r?{card:{installmentOptions:Object.assign({showInstallmentAmounts:!0},r)}}:{}),environment:i,locale:this._getLocale(),clientKey:a,paymentMethodsResponse:o,showPayButton:!1,translations:{es:{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-AR\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-ES\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-MX\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CL\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-CO\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"},\"es-PE\":{\"creditCard.expiryDateField.title\":\"Fecha de caducidad\"}}}),this._paymentComponent=yield this._mountPaymentComponent(n),n.method!==d.CreditCard&&n.method!==d.Bancontact||(this._cardVerificationComponent=yield this._mountCardVerificationComponent()),Promise.resolve()})}execute(e,t){var n;return z(this,void 0,void 0,function*(){const{payment:i}=e,a=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,[\"payment\"]);if(!i)throw new _([\"payment\"]);const o=i.paymentData,{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:s}=\"object\"!=typeof(d=o)||null===d||void 0!==d.shouldSaveInstrument&&\"boolean\"!=typeof d.shouldSaveInstrument||void 0!==d.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof d.shouldSetAsDefaultInstrument?{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1}:o;var d;this._validateCardData(),\"klarna\"!==i.methodId&&\"klarna_account\"!==i.methodId&&\"klarna_paynow\"!==i.methodId||null===(n=this._paymentComponent)||void 0===n||n.submit(),yield this._paymentIntegrationService.submitOrder(a,t);const c=this._componentState||{data:{paymentMethod:{type:i.methodId}}};if(o&&v(o)){let e={};if(y(c)){const{encryptedCardNumber:t,encryptedSecurityCode:n,encryptedExpiryMonth:i,encryptedExpiryYear:a}=c.data.paymentMethod;e={credit_card_number_confirmation:t,expiry_month:i,expiry_year:a,verification_value:n}}try{return void(yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},i),{paymentData:{formattedPayload:{bigpay_token:Object.assign(Object.assign({},e),{token:o.instrumentId}),origin:window.location.origin,browser_info:b(),set_as_default_stored_instrument:s||null}}})))}catch(t){return void(yield this._processAdditionalAction(t,r,s,o.instrumentId,e))}}let l=JSON.stringify(Object.assign(Object.assign({},c.data.paymentMethod),{type:i.methodId,origin:window.location.origin}));\"boletobancario\"===i.methodId&&function(e){var t,n;return\"string\"===(\"object\"==typeof e&&typeof e.data.socialSecurityNumber)&&\"string\"==typeof(null===(t=e.data.shopperName)||void 0===t?void 0:t.firstName)&&\"string\"==typeof(null===(n=e.data.shopperName)||void 0===n?void 0:n.lastName)}(c)&&(l=JSON.stringify(Object.assign(Object.assign({socialSecurityNumber:c.data.socialSecurityNumber},c.data.shopperName),{type:i.methodId,origin:window.location.origin})));try{yield this._paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:{formattedPayload:Object.assign(Object.assign({credit_card_token:{token:l}},y(c)&&c.data.installments?{installments:{value:c.data.installments.value,plan:c.data.installments.plan||\"regular\"}}:{}),{browser_info:b(),vault_payment_instrument:r||null,set_as_default_stored_instrument:s||null})}})}catch(e){yield this._processAdditionalAction(e,r,s)}})}finalize(){return Promise.reject(new C)}deinitialize(){return this._componentState=void 0,this._paymentComponent&&(this._paymentComponent.unmount(),this._paymentComponent=void 0),this._cardVerificationComponent&&(this._cardVerificationComponent.unmount(),this._cardVerificationComponent=void 0),Promise.resolve()}_updateComponentState(e){this._componentState=e}_getLocale(){const e=this._paymentIntegrationService.getState().getLocale();return e&&\"es\"===e.substring(0,2)?\"es\":e}_getAdyenClient(){if(!this._adyenClient)throw new f(h.PaymentNotInitialized);return this._adyenClient}_getPaymentInitializeOptions(){if(!this._paymentInitializeOptions)throw new g('\"options.adyenv3\" argument was not provided during initialization.');return this._paymentInitializeOptions}_handleAction(e){return new Promise((t,n)=>{const{additionalActionOptions:i}=this._getPaymentInitializeOptions(),{onBeforeLoad:a,containerId:r,onLoad:s,onComplete:d,widgetSize:c,onActionHandled:l}=i,p=JSON.parse(e.action),h=this._getAdyenClient().createFromAction(p,{onActionHandled:e=>{l&&\"function\"==typeof l&&\"3DS2Fingerprint\"!==e.componentType&&l()},onAdditionalDetails:e=>{const n={methodId:p.paymentMethodType,paymentData:{nonce:JSON.stringify(e.data)}};d&&\"function\"==typeof d&&d(),t(n)},challengeWindowSize:c||\"05\",onError:e=>n(e)});a&&\"function\"==typeof a&&a(p.type===o.ThreeDS2||p.type===o.QRCode||p.type===o.Sdk),this._mountElement(h,r),s&&\"function\"==typeof s&&s(()=>{n(new w),h.unmount()})})}_mapAdyenPlaceholderData(e,t){if(!e)return{};const{firstName:n,lastName:i,address1:a,address2:o,postalCode:r,city:s,stateOrProvinceCode:d,countryCode:c}=e;return{holderName:t?`${n} ${i}`:\"\",firstName:t?n:\"\",lastName:t?i:\"\",billingAddress:{street:a,houseNumberOrName:o,postalCode:r,city:s,stateOrProvince:d,country:c}}}_mountCardVerificationComponent(){const e=this._getPaymentInitializeOptions(),t=this._getAdyenClient();let n;return new Promise((i,a)=>{var o,r,d;if(e.cardVerificationContainerId){n=t.create(s.SecuredFields,Object.assign(Object.assign({},e.options),{styles:Object.assign(Object.assign({},null===(o=e.options)||void 0===o?void 0:o.styles),{placeholder:Object.assign({color:\"transparent\",caretColor:\"#000\"},null===(d=null===(r=e.options)||void 0===r?void 0:r.styles)||void 0===d?void 0:d.placeholder)}),onChange:e=>this._updateComponentState(e),onError:t=>e.validateCardFields(t),onFieldValid:t=>e.validateCardFields(t)}));try{this._mountElement(n,e.cardVerificationContainerId)}catch(e){a(new f(h.PaymentNotInitialized))}}i(n)})}_mountPaymentComponent(e){let t;const n=this._getPaymentInitializeOptions(),i=this._getAdyenClient();return new Promise((a,o)=>{const r=this._paymentIntegrationService.getState().getBillingAddress(),{prefillCardHolderName:s}=e.initializationData;t=i.create(e.method,Object.assign(Object.assign(Object.assign({},n.options),{showBrandsUnderCardNumber:!1,billingAddressRequired:!1,showEmailAddress:!1,onChange:e=>this._updateComponentState(e),onSubmit:e=>this._updateComponentState(e)}),r?{data:this._mapAdyenPlaceholderData(r,s)}:{}));try{this._mountElement(t,n.containerId)}catch(e){o(new f(h.PaymentNotInitialized))}a(t)})}_processAdditionalAction(e,t,i,a,o){return z(this,void 0,void 0,function*(){if(!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}))throw e;const r=yield this._handleAction(e.body.provider_data);try{const e=Object.assign(Object.assign({},r.paymentData),{shouldSaveInstrument:t,shouldSetAsDefaultInstrument:i}),n=i&&!t?{instrumentId:a,formattedPayload:{bigpay_token:Object.assign(Object.assign({},o),{token:a})}}:{};yield this._paymentIntegrationService.submitPayment(Object.assign(Object.assign({},r),{paymentData:Object.assign(Object.assign({},e),n)}))}catch(e){return this._processAdditionalAction(e,t,i,a,o)}})}_validateCardData(){var e;const t=this._getPaymentInitializeOptions().hasVaultedInstruments?this._cardVerificationComponent:this._paymentComponent;if((null===(e=null==t?void 0:t.componentRef)||void 0===e?void 0:e.showValidation)&&t.state&&(t.componentRef.showValidation(),0===Object.keys(t.state).length||!t.state.isValid))throw new O(this._mapCardErrors(t.state.errors))}_mapCardErrors(e={}){const t={};return Object.keys(e).forEach(n=>{t[n]=[{message:e[n],type:n}]}),t}_mountElement(e,t){document.getElementById(t)&&e.mount(`#${t}`)}}const N=m(n=>new D(n,new A((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)(),(0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getStylesheetLoader)())),[{gateway:\"adyenv3\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9hZHllbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQU9lLE1BQWVBLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVmVyxNQUFNQyxVQUE0Q2QsRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsRSxJQ2ZRUSxFQWlDQUMsRUE0QkFDLEVBSUFDLEVBaUJBQyxFQUlBQyxFQXM4QkFDLEVDMWhDQUMsRUNJRyxNQUFNQyxFQUNqQixXQUFBckIsQ0FDWXNCLEVBQ0FDLEVBQ0FDLEVBQTZCQyxRQUY3QixLQUFBSCxjQUFBQSxFQUNBLEtBQUFDLGtCQUFBQSxFQUNBLEtBQUFDLFFBQUFBLENBQ1QsQ0FFRyxJQUFBRSxDQUFLQyxHLHFEQThCUCxTQTdCTUMsUUFBUUMsSUFBSSxDQUNkckIsS0FBS2Usa0JBQWtCTyxlQUNuQiwyQkFDNkIsUUFBekIsRUFBQUgsRUFBY0ksbUJBQVcsUUFBSSxvREFFakMsQ0FDSUMsU0FBUyxFQUNUQyxXQUFZLENBQ1JDLFVBQ0ksMEVBQ0pDLFlBQWEsZUFJekIzQixLQUFLYyxjQUFjYyxXQUNmLDJCQUM2QixRQUF6QixFQUFBVCxFQUFjSSxtQkFBVyxRQUFJLG1EQUVqQyxDQUNJTSxPQUFPLEVBQ1BKLFdBQVksQ0FDUkMsVUFDSSwwRUFDSkMsWUFBYSxrQkFNeEIzQixLQUFLZ0Is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LEVBQWdDdkgsR0FDN0N3SCxTQUFTQyxlQUFlekgsSUFJN0J1SCxFQUFldEcsTUFBTSxJQUFJakIsSUFDN0IsRUcvaEJKLE1BU0EsRUFBZTNILEVBUlg2TSxHQUVPLElBQUksRUFDUEEsRUFDQSxJQUFJSSxFQUFvQkgsMkVBQUFBLEdBQW1CQywrRUFBQUEsS0FJYSxDQUFDLENBQUVDLFFBQVMsYSIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3N0YW5kYXJkLWVycm9yLnRzPzhhMDMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc2V0LXByb3RvdHlwZS1vZi50cz84NDVhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWNsaWVudC11bmF2YWlsYWJsZS1lcnJvci50cz9mOGVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi11dGlscy9zcmMvdHlwZXMudHM/Yzc1YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4tdXRpbHMvc3JjL2FkeWVudjIvYWR5ZW52Mi1zY3JpcHQtbG9hZGVyLnRzP2EzZDIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi11dGlscy9zcmMvdXRpbHMvaXMtY2FyZC1zdGF0ZS50cz80NGQ3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vYnJvd3Nlci1pbmZvL2dldC1icm93c2VyLWluZm8udHM/OGJhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9vcmRlci1maW5hbGl6YXRpb24tbm90LXJlcXVpcmVkLWVycm9yLnRzP2I1YTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtY2FuY2VsbGVkLWVycm9yLnRzPzA4OTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtaW52YWxpZC1mb3JtLWVycm9yLnRzP2MwZmIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLWludGVncmF0aW9uL3NyYy9hZHllbnYyL2FkeWVudjItcGF5bWVudC1zdHJhdGVneS50cz84ZTQ5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi11dGlscy9zcmMvdXRpbHMvaXMtYWNjb3VudC1zdGF0ZS50cz9lYjZmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9jcmVhdGUtYWR5ZW52Mi1wYXltZW50LXN0cmF0ZWd5LnRzPzQyMDAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy9hZHllbnYzL2FkeWVudjMtc2NyaXB0LWxvYWRlci50cz82MDJmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9hZHllbnYzLXBheW1lbnQtc3RyYXRlZ3kudHM/YzNiMiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtaG9zdGVkLWludHJ1bWVudC1saWtlLnRzPzg3NjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2FkeWVuLXV0aWxzL3NyYy91dGlscy9pcy1ib2xldG8tc3RhdGUudHM/NzI3ZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvY3JlYXRlLWFkeWVudjMtcGF5bWVudC1zdHJhdGVneS50cz81MWE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJleHBvcnQgZW51bSBBZHllblYzQWN0aW9uVHlwZSB7XG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgd2lsbCBnbyB0aHJvdWdoIGVpdGhlciB0aGUgZnJpY3Rpb25sZXNzXG4gICAgICogb3IgdGhlIGNoYWxsZW5nZSBmbG93LlxuICAgICAqICovXG4gICAgVGhyZWVEUzJGaW5nZXJwcmludCA9ICd0aHJlZURTMkZpbmdlcnByaW50JyxcblxuICAgIC8qXG4gICAgICogVGhlIHBheW1lbnQgcXVhbGlmaWVzIGZvciAzRCBTZWN1cmUgMiwgYW5kIHRoZSBpc3N1ZXIgaXMgaW5pdGlhdGluZyBhIGNoYWxsZW5nZSBmbG93LlxuICAgICAqICovXG4gICAgVGhyZWVEUzIgPSAndGhyZWVEUzInLFxuXG4gICAgLypcbiAgICAgKiBXZSB3aWxsIGluaXRpYXRlIGEgM0QgU2VjdXJlIDEgZmFsbGJhY2ssIGJlY2F1c2UgdGhlIGlzc3VlciBkb2VzIG5vdCBzdXBwb3J0IDNEIFNlY3VyZSAyLlxuICAgICAqICovXG4gICAgUmVkaXJlY3QgPSAncmVkaXJlY3QnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHByZXNlbnRzIHRoZSBRUiBjb2RlIGFuZCBjYWxscyB0aGUgb25BZGRpdGlvbmFsRGV0YWlscyBldmVudC5cbiAgICAgKiAqL1xuICAgIFFSQ29kZSA9ICdxckNvZGUnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IGRpc3BsYXlzIHRoZSB2b3VjaGVyIHdoaWNoIHRoZSBzaG9wcGVyIHVzZXMgdG8gY29tcGxldGUgdGhlIHBheW1lbnQuXG4gICAgICogKi9cbiAgICBWb3VjaGVyID0gJ3ZvdWNoZXInLFxuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IGRpc3BsYXlzIHRoZSB3aWRnZXQgd2hpY2ggdGhlIHNob3BwZXIgdXNlcyB0byBjb21wbGV0ZSB0aGUgcGF5bWVudC5cbiAgICAgKiAqL1xuICAgIFNkayA9ICdzZGsnLFxufVxuXG5leHBvcnQgZW51bSBBZHllblYyQWN0aW9uVHlwZSB7XG4gICAgLypcbiAgICAgKiBUaGUgcGF5bWVudCBxdWFsaWZpZXMgZm9yIDNEIFNlY3VyZSAyLCBhbmQgd2lsbCBnbyB0aHJvdWdoIGVpdGhlciB0aGUgZnJpY3Rpb25sZXNzXG4gICAgICogb3IgdGhlIGNoYWxsZW5nZSBmbG93LlxuICAgICAqICovXG4gICAgVGhyZWVEUzJGaW5nZXJwcmludCA9ICd0aHJlZURTMkZpbmdlcnByaW50JyxcblxuICAgIC8qXG4gICAgICogVGhlIHBheW1lbnQgcXVhbGlmaWVzIGZvciAzRCBTZWN1cmUgMiwgYW5kIHRoZSBpc3N1ZXIgaXMgaW5pdGlhdGluZyBhIGNoYWxsZW5nZSBmbG93LlxuICAgICAqICovXG4gICAgVGhyZWVEUzJDaGFsbGVuZ2UgPSAndGhyZWVEUzJDaGFsbGVuZ2UnLFxuXG4gICAgLypcbiAgICAgKiBXZSB3aWxsIGluaXRpYXRlIGEgM0QgU2VjdXJlIDEgZmFsbGJhY2ssIGJlY2F1c2UgdGhlIGlzc3VlciBkb2VzIG5vdCBzdXBwb3J0IDNEIFNlY3VyZSAyLlxuICAgICAqICovXG4gICAgUmVkaXJlY3QgPSAncmVkaXJlY3QnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IHByZXNlbnRzIHRoZSBRUiBjb2RlIGFuZCBjYWxscyB0aGUgb25BZGRpdGlvbmFsRGV0YWlscyBldmVudC5cbiAgICAgKiAqL1xuICAgIFFSQ29kZSA9ICdxckNvZGUnLFxuXG4gICAgLypcbiAgICAgKiBUaGUgQ29tcG9uZW50IGRpc3BsYXlzIHRoZSB2b3VjaGVyIHdoaWNoIHRoZSBzaG9wcGVyIHVzZXMgdG8gY29tcGxldGUgdGhlIHBheW1lbnQuXG4gICAgICogKi9cbiAgICBWb3VjaGVyID0gJ3ZvdWNoZXInLFxufVxuXG5leHBvcnQgZW51bSBBZHllbkNvbXBvbmVudFR5cGUge1xuICAgIFNlY3VyZWRGaWVsZHMgPSAnc2VjdXJlZGZpZWxkcycsXG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUge1xuICAgIEFDSCA9ICdhY2gnLFxuICAgIEFsaVBheSA9ICdhbGlwYXknLFxuICAgIEJhbmNvbnRhY3QgPSAnYmNtYycsXG4gICAgQ3JlZGl0Q2FyZCA9ICdzY2hlbWUnLFxuICAgIEtsYXJuYSA9ICdrbGFybmEnLFxuICAgIEtsYXJuYVBheU5vdyA9ICdrbGFybmFfcGF5bm93JyxcbiAgICBLbGFybmFBY2NvdW50ID0gJ2tsYXJuYV9hY2NvdW50JyxcbiAgICBJREVBTCA9ICdpZGVhbCcsXG4gICAgR2lyb1BheSA9ICdnaXJvcGF5JyxcbiAgICBHb29nbGVQYXkgPSAncGF5d2l0aGdvb2dsZScsXG4gICAgU0VQQSA9ICdzZXBhZGlyZWN0ZGViaXQnLFxuICAgIFNvZm9ydCA9ICdkaXJlY3RFYmFua2luZycsXG4gICAgVmlwcHMgPSAndmlwcHMnLFxuICAgIFdlQ2hhdFBheVFSID0gJ3dlY2hhdHBheVFSJyxcbn1cblxuZXhwb3J0IGVudW0gSFRUUE1ldGhvZCB7XG4gICAgUE9TVCA9ICdQT1NUJyxcbn1cblxuZXhwb3J0IGVudW0gUmVzdWx0Q29kZSB7XG4gICAgQ2hhbGxlbmdlU2hvcHBlciA9ICdDaGFsbGVuZ2VTaG9wcGVyJyxcbiAgICBFcnJvciA9ICdFcnJvcicsXG4gICAgSWRlbnRpZnlTaG9wcGVyID0gJ0lkZW50aWZ5U2hvcHBlcicsXG59XG5cbmludGVyZmFjZSBBZHllblBheW1lbnRNZXRob2RTdGF0ZSB7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgV2VjaGF0RGF0YVBheW1lbnRNZXRob2RTdGF0ZSB7XG4gICAgcGF5bWVudE1ldGhvZDogQWR5ZW5QYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmludGVyZmFjZSBCb2xldG9EYXRhUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBwYXltZW50TWV0aG9kOiBBZHllblBheW1lbnRNZXRob2RTdGF0ZTtcbiAgICBzaG9wcGVyTmFtZT86IHtcbiAgICAgICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgICAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICB9O1xuICAgIHNvY2lhbFNlY3VyaXR5TnVtYmVyPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ2FyZFBheW1lbnRNZXRob2RTdGF0ZSBleHRlbmRzIEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlIHtcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkRXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkU2VjdXJpdHlDb2RlOiBzdHJpbmc7XG4gICAgaG9sZGVyTmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjJBY3Rpb24ge1xuICAgIG1ldGhvZDogSFRUUE1ldGhvZDtcblxuICAgIC8qKlxuICAgICAqIFZhbHVlIHRoYXQgeW91IG5lZWQgdG8gc3VibWl0IGluIHlvdXIgL3BheW1lbnRzL2RldGFpbHMgcmVxdWVzdCB3aGVuIGhhbmRsaW5nXG4gICAgICogdGhlIHJlZGlyZWN0LlxuICAgICAqL1xuICAgIHBheW1lbnREYXRhOiBzdHJpbmc7XG5cbiAgICBwYXltZW50TWV0aG9kVHlwZTogQWR5ZW5QYXltZW50TWV0aG9kVHlwZTtcblxuICAgIC8qXG4gICAgICogVGhlIENvbXBvbmVudCBwZXJmb3JtcyBhZGRpdGlvbmFsIGZyb250LWVuZCBhY3Rpb25zIGRlcGVuZGluZyBvbiB0aGUgYWN0aW9uLnR5cGUuXG4gICAgICogWW91ciBuZXh0IHN0ZXBzIGRlcGVuZCBvbiB0aGUgdHlwZSBvZiBhY3Rpb24gdGhhdCB0aGUgQ29tcG9uZW50IHBlcmZvcm1zLlxuICAgICAqL1xuICAgIHR5cGU6IEFkeWVuVjJBY3Rpb25UeXBlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIEhUVFAgcmVxdWVzdCBtZXRob2QgdGhhdCB5b3Ugc2hvdWxkIHVzZS4gQWZ0ZXIgdGhlIHNob3BwZXIgY29tcGxldGVzIHRoZSBwYXltZW50LFxuICAgICAqIHRoZXkgd2lsbCBiZSByZWRpcmVjdGVkIGJhY2sgdG8geW91ciByZXR1cm5VUkwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kLlxuICAgICAqL1xuICAgIHVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjNBY3Rpb24ge1xuICAgIG1ldGhvZDogSFRUUE1ldGhvZDtcblxuICAgIC8qKlxuICAgICAqIFZhbHVlIHRoYXQgeW91IG5lZWQgdG8gc3VibWl0IGluIHlvdXIgL3BheW1lbnRzL2RldGFpbHMgcmVxdWVzdCB3aGVuIGhhbmRsaW5nXG4gICAgICogdGhlIHJlZGlyZWN0LlxuICAgICAqL1xuICAgIHBheW1lbnREYXRhOiBzdHJpbmc7XG5cbiAgICBwYXltZW50TWV0aG9kVHlwZTogQWR5ZW5QYXltZW50TWV0aG9kVHlwZTtcblxuICAgIC8qXG4gICAgICogVGhlIENvbXBvbmVudCBwZXJmb3JtcyBhZGRpdGlvbmFsIGZyb250LWVuZCBhY3Rpb25zIGRlcGVuZGluZyBvbiB0aGUgYWN0aW9uLnR5cGUuXG4gICAgICogWW91ciBuZXh0IHN0ZXBzIGRlcGVuZCBvbiB0aGUgdHlwZSBvZiBhY3Rpb24gdGhhdCB0aGUgQ29tcG9uZW50IHBlcmZvcm1zLlxuICAgICAqL1xuICAgIHR5cGU6IEFkeWVuVjNBY3Rpb25UeXBlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIEhUVFAgcmVxdWVzdCBtZXRob2QgdGhhdCB5b3Ugc2hvdWxkIHVzZS4gQWZ0ZXIgdGhlIHNob3BwZXIgY29tcGxldGVzIHRoZSBwYXltZW50LFxuICAgICAqIHRoZXkgd2lsbCBiZSByZWRpcmVjdGVkIGJhY2sgdG8geW91ciByZXR1cm5VUkwgdXNpbmcgdGhlIHNhbWUgbWV0aG9kLlxuICAgICAqL1xuICAgIHVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBBZHllbkFjdGlvbiA9IEFkeWVuVjJBY3Rpb24gfCBBZHllblYzQWN0aW9uO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvbiB7XG4gICAgcmVzdWx0Q29kZTogUmVzdWx0Q29kZTtcbiAgICBhY3Rpb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkFkZGl0aW9uYWxBY3Rpb25DYWxsYmFja3Mge1xuICAgIC8qKlxuICAgICAqIEEgY2FsbGJhY2sgdGhhdCBnZXRzIGNhbGxlZCBiZWZvcmUgYWR5ZW4gY29tcG9uZW50IGlzIGxvYWRlZFxuICAgICAqL1xuICAgIG9uQmVmb3JlTG9hZD8oc2hvcHBlckludGVyYWN0aW9uPzogYm9vbGVhbik6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBBIGNhbGxiYWNrIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBhZHllbiBjb21wb25lbnQgaXMgbG9hZGVkXG4gICAgICovXG4gICAgb25Mb2FkPyhjYW5jZWw/OiAoKSA9PiB2b2lkKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgY2FsbGJhY2sgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIGFkeWVuIGNvbXBvbmVudCB2ZXJpZmljYXRpb25cbiAgICAgKiBpcyBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBvbkNvbXBsZXRlPygpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQSBjYWxsYmFjayB0aGF0IGdldHMgY2FsbGVkIHdoZW4gYW4gYWN0aW9uLCBmb3IgZXhhbXBsZSBhIFFSIGNvZGUgb3IgM0QgU2VjdXJlIDIgYXV0aGVudGljYXRpb24gc2NyZWVuLCBpcyBzaG93biB0byB0aGUgc2hvcHBlclxuICAgICAqL1xuICAgIG9uQWN0aW9uSGFuZGxlZD8oKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkFkZGl0aW9uYWxBY3Rpb25FcnJvclJlc3BvbnNlIHtcbiAgICBwcm92aWRlcl9kYXRhOiBBZHllbkFkZGl0aW9uYWxBY3Rpb247XG4gICAgZXJyb3JzOiBbeyBjb2RlOiBzdHJpbmcgfV07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uT3B0aW9ucyBleHRlbmRzIEFkeWVuQWRkaXRpb25hbEFjdGlvbkNhbGxiYWNrcyB7XG4gICAgLyoqXG4gICAgICogVGhlIGxvY2F0aW9uIHRvIGluc2VydCB0aGUgYWRkaXRpb25hbCBhY3Rpb24gY29tcG9uZW50LlxuICAgICAqL1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IFRocmVlM0RTMkNoYWxsZW5nZSBXaWRnZXQgU2l6ZVxuICAgICAqXG4gICAgICogVmFsdWVzXG4gICAgICogJzAxJyA9IDI1MHB4IHggNDAwcHhcbiAgICAgKiAnMDInID0gMzkwcHggeCA0MDBweFxuICAgICAqICcwMycgPSA1MDBweCB4IDYwMHB4XG4gICAgICogJzA0JyA9IDYwMHB4IHggNDAwcHhcbiAgICAgKiAnMDUnID0gMTAwJSB4IDEwMCVcbiAgICAgKi9cbiAgICB3aWRnZXRTaXplPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQWRkaXRpb25hbEFjdGlvblN0YXRlIHtcbiAgICBkYXRhOiBBZHllbkFkZGl0aW9uYWxBY3Rpb247XG4gICAgaXNWYWxpZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5CYXNlQ2FyZENvbXBvbmVudE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEFycmF5IG9mIGNhcmQgYnJhbmRzIHRoYXQgd2lsbCBiZSByZWNvZ25pemVkIGJ5IHRoZSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKi9cbiAgICBicmFuZHM/OiBzdHJpbmdbXTtcblxuICAgIC8qKlxuICAgICAqIFNldCBhIHN0eWxlIG9iamVjdCB0byBjdXN0b21pemUgdGhlIGlucHV0IGZpZWxkcy4gU2VlIFN0eWxpbmcgU2VjdXJlZCBGaWVsZHNcbiAgICAgKiBmb3IgYSBsaXN0IG9mIHN1cHBvcnRlZCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIHN0eWxlcz86IFN0eWxlT3B0aW9ucztcblxuICAgIHNob3dCcmFuZHNVbmRlckNhcmROdW1iZXI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuQ29tcG9uZW50RXZlbnRzIHtcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgc2hvcHBlciBlbnRlcnMgZGF0YSBpbiB0aGUgY2FyZCBpbnB1dCBmaWVsZHMuXG4gICAgICogSGVyZSB5b3UgaGF2ZSB0aGUgb3B0aW9uIHRvIG92ZXJyaWRlIHlvdXIgbWFpbiBBZHllbiBDaGVja291dCBjb25maWd1cmF0aW9uLlxuICAgICAqL1xuICAgIG9uQ2hhbmdlPyhzdGF0ZTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLCBjb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSBzaG9wcGVyIHNlbGVjdHMgdGhlIFBheSBidXR0b24gYW5kIHBheW1lbnQgZGV0YWlscyBhcmUgdmFsaWQuXG4gICAgICovXG4gICAgb25TdWJtaXQ/KHN0YXRlOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsIGNvbXBvbmVudDogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGluIGNhc2Ugb2YgYW4gaW52YWxpZCBjYXJkIG51bWJlciwgaW52YWxpZCBleHBpcnkgZGF0ZSwgb3JcbiAgICAgKiAgaW5jb21wbGV0ZSBmaWVsZC4gQ2FsbGVkIGFnYWluIHdoZW4gZXJyb3JzIGFyZSBjbGVhcmVkLlxuICAgICAqL1xuICAgIG9uRXJyb3I/KHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSwgY29tcG9uZW50OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG5cbiAgICBvbkZpZWxkVmFsaWQ/KHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSwgY29tcG9uZW50OiBBZHllbkNvbXBvbmVudCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5DbGllbnQge1xuICAgIGNyZWF0ZSh0eXBlOiBzdHJpbmcsIGNvbXBvbmVudE9wdGlvbnM/OiBBZHllbkNvbXBvbmVudE9wdGlvbnMpOiBBZHllbkNvbXBvbmVudDtcblxuICAgIGNyZWF0ZUZyb21BY3Rpb24oXG4gICAgICAgIGFjdGlvbjogQWR5ZW5WMkFjdGlvbiB8IEFkeWVuVjNBY3Rpb24sXG4gICAgICAgIGNvbXBvbmVudE9wdGlvbnM/OlxuICAgICAgICAgICAgfCBUaHJlZURTMkRldmljZUZpbmdlcnByaW50Q29tcG9uZW50T3B0aW9uc1xuICAgICAgICAgICAgfCBBZHllblYzVGhyZWVEUzJDaGFsbGVuZ2VDb21wb25lbnRPcHRpb25zXG4gICAgICAgICAgICB8IEFkeWVuVjJUaHJlZURTMkNoYWxsZW5nZUNvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogQWR5ZW5Db21wb25lbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5Db21wb25lbnQge1xuICAgIGNvbXBvbmVudFJlZj86IHtcbiAgICAgICAgc2hvd1ZhbGlkYXRpb24oKTogdm9pZDtcbiAgICB9O1xuICAgIHByb3BzPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nO1xuICAgIH07XG4gICAgc3RhdGU/OiBBZHllbkNvbXBvbmVudFN0YXRlO1xuICAgIG1vdW50KGNvbnRhaW5lcklkOiBzdHJpbmcpOiBIVE1MRWxlbWVudDtcbiAgICB1bm1vdW50KCk6IHZvaWQ7XG4gICAgc3VibWl0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5Db25maWd1cmF0aW9uIHtcbiAgICAvKlxuICAgICAqIFVzZSB0ZXN0LCBhbmQgdGhlbiBjaGFuZ2UgdGhpcyB0byBsaXZlIHdoZW4geW91J3JlIHJlYWR5IHRvIGFjY2VwdCBsaXZlIHBheW1lbnRzLlxuICAgICAqL1xuICAgIGVudmlyb25tZW50Pzogc3RyaW5nO1xuXG4gICAgLypcbiAgICAgKiBUaGUgc2hvcHBlcidzIGxvY2FsZS4gVGhpcyBpcyB1c2VkIHRvIHNldCB0aGUgbGFuZ3VhZ2UgcmVuZGVyZWQgaW4gdGhlIENvbXBvbmVudHMuXG4gICAgICovXG4gICAgbG9jYWxlPzogc3RyaW5nO1xuXG4gICAgLypcbiAgICAgKiBUaGUgT3JpZ2luIEtleSBvZiB5b3VyIHdlYnNpdGUuXG4gICAgICovXG4gICAgb3JpZ2luS2V5Pzogc3RyaW5nO1xuXG4gICAgLypcbiAgICAgKiBUaGUgQ2xpZW50IEtleSBvZiB5b3VyIEFkeWVuIGFjY291bnQuXG4gICAgICovXG4gICAgY2xpZW50S2V5Pzogc3RyaW5nO1xuXG4gICAgLypcbiAgICAgKiBTdXBwb3J0ZWQgZnJvbSBDb21wb25lbnRzIHZlcnNpb24gMy4wLjAgYW5kIGxhdGVyLiBUaGUgZnVsbCBwYXltZW50TWV0aG9kcyByZXNwb25zZSxcbiAgICAgKiByZXR1cm5lZCBpbiBzdGVwIDEuIFdlIHJlY29tbWVuZCB0aGF0IHlvdSBwYXNzIHRoaXMgb24gdGhlIEFkeWVuQ2hlY2tvdXQgaW5zdGFuY2UuXG4gICAgICogT3RoZXJ3aXNlLCB5b3UgbmVlZCB0byBwYXNzIHRoZSBzcGVjaWZpYyBwYXltZW50IG1ldGhvZCBkZXRhaWxzIHNlcGFyYXRlbHkgZm9yIGVhY2hcbiAgICAgKiBDb21wb25lbnQuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZHNSZXNwb25zZT86IFBheW1lbnRNZXRob2RzUmVzcG9uc2U7XG5cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmF0aW9uIGZvciBzcGVjaWZpYyBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZHNDb25maWd1cmF0aW9uPzoge1xuICAgICAgICBrbGFybmE6IHtcbiAgICAgICAgICAgIHVzZUtsYXJuYVdpZGdldDogYm9vbGVhbjtcbiAgICAgICAgfTtcbiAgICAgICAga2xhcm5hX2FjY291bnQ6IHtcbiAgICAgICAgICAgIHVzZUtsYXJuYVdpZGdldDogYm9vbGVhbjtcbiAgICAgICAgfTtcbiAgICAgICAga2xhcm5hX3BheW5vdzoge1xuICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiBib29sZWFuO1xuICAgICAgICB9O1xuICAgICAgICBjYXJkPzoge1xuICAgICAgICAgICAgaW5zdGFsbG1lbnRPcHRpb25zPzoge1xuICAgICAgICAgICAgICAgIGNhcmQ/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2aXNhPzoge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbWM/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkaW5lcnM/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBqY2I/OiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzaG93SW5zdGFsbG1lbnRBbW91bnRzPzogYm9vbGVhbjtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHNob3dQYXlCdXR0b24/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSWYgeW91ciBzaG9wcGVycyB1c2UgYSBsYW5ndWFnZSB0aGF0IGlzbid0IHN1cHBvcnRlZCBieSB0aGUgQ29tcG9uZW50cywgeW91IGNhbiBjcmVhdGUgeW91ciBvd24gbG9jYWxpemF0aW9uLlxuICAgICAqIFRvIGNyZWF0ZSBhIGxvY2FsaXphdGlvbjpcbiAgICAgKiBBZGQgYSB0cmFuc2xhdGlvbnMgb2JqZWN0IHRvIHlvdXIgcGF5bWVudCBwYWdlLCBzcGVjaWZ5aW5nOlxuICAgICAqIFRoZSBsb2NhbGl6YXRpb24geW91IHdhbnQgdG8gY3JlYXRlLlxuICAgICAqIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBmaWVsZHMgdGhhdCBhcmUgdXNlZCBpbiB0aGUgQ29tcG9uZW50cywgYXMgd2VsbCBhcyB0aGUgdGV4dCB5b3Ugd2FudCBkaXNwbGF5ZWQgZm9yIGVhY2ggZmllbGQuXG4gICAgICpcbiAgICAgKiBcImVuXCI6IHtcbiAgICAgKiAgXCJwYXltZW50TWV0aG9kcy5tb3JlTWV0aG9kc0J1dHRvblwiOiBcIk1vcmUgcGF5bWVudCBtZXRob2RzXCIsXG4gICAgICogIFwicGF5QnV0dG9uXCI6IFwiUGF5XCIsXG4gICAgICogIFwic3RvcmVEZXRhaWxzXCI6IFwiU2F2ZSBmb3IgbXkgbmV4dCBwYXltZW50XCIsXG4gICAgICogICAuLi5cbiAgICAgKiB9XG4gICAgICovXG4gICAgdHJhbnNsYXRpb25zPzoge1xuICAgICAgICBbaW5kZXg6IHN0cmluZ106IHtcbiAgICAgICAgICAgIFtpbmRleDogc3RyaW5nXTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKlxuICAgICAqIFNwZWNpZnkgdGhlIGZ1bmN0aW9uIHRoYXQgeW91IGNyZWF0ZWQsIGZvciBleGFtcGxlLCBoYW5kbGVPbkNoYW5nZS4gSWYgeW91IHdpc2hcbiAgICAgKiB0byBvdmVycmlkZSB0aGlzIGZ1bmN0aW9uLCB5b3UgY2FuIGFsc28gZGVmaW5lIGFuIG9uQ2hhbmdlIGV2ZW50IG9uIHRoZSBDb21wb25lbnRcbiAgICAgKiBsZXZlbC5cbiAgICAgKi9cbiAgICBvbkNoYW5nZT8oc3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xuXG4gICAgb25BZGRpdGlvbmFsRGV0YWlscz8oc3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgY29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuUGxhY2Vob2xkZXJEYXRhIHtcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgaG9sZGVyTmFtZT86IHN0cmluZztcbiAgICBwcmVmaWxsQ2FyZEhvbGRlck5hbWU/OiBib29sZWFuO1xuICAgIGJpbGxpbmdBZGRyZXNzPzoge1xuICAgICAgICBzdHJlZXQ6IHN0cmluZztcbiAgICAgICAgaG91c2VOdW1iZXJPck5hbWU6IHN0cmluZztcbiAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICBjaXR5OiBzdHJpbmc7XG4gICAgICAgIHN0YXRlT3JQcm92aW5jZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNyZWRpdENhcmRDb21wb25lbnRPcHRpb25zXG4gICAgZXh0ZW5kcyBBZHllbkJhc2VDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIC8qKlxuICAgICAqIFNldCBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgZGV0YWlscyBhcnJheSBmb3IgdHlwZTogc2NoZW1lIGZyb21cbiAgICAgKiB0aGUgL3BheW1lbnRNZXRob2RzIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGRldGFpbHM/OiBJbnB1dERldGFpbFtdO1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gc2hvdyB0aGUgY2hlY2tib3ggdG8gc2F2ZSBjYXJkIGRldGFpbHMgZm9yIHRoZSBuZXh0IHBheW1lbnQuXG4gICAgICovXG4gICAgZW5hYmxlU3RvcmVEZXRhaWxzPzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFNldCB0byB0cnVlIHRvIHJlcXVlc3QgdGhlIG5hbWUgb2YgdGhlIGNhcmQgaG9sZGVyLlxuICAgICAqL1xuICAgIGhhc0hvbGRlck5hbWU/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gcmVxdWlyZSB0aGUgY2FyZCBob2xkZXIgbmFtZS5cbiAgICAgKi9cbiAgICBob2xkZXJOYW1lUmVxdWlyZWQ/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSW5mb3JtYXRpb24gdG8gcHJlZmlsbCBmaWVsZHMuXG4gICAgICovXG4gICAgZGF0YT86IEFkeWVuUGxhY2Vob2xkZXJEYXRhO1xuXG4gICAgLyoqXG4gICAgICogRGVmYXVsdHMgdG8gWydtYycsJ3Zpc2EnLCdhbWV4J10uIENvbmZpZ3VyZSBzdXBwb3J0ZWQgY2FyZCB0eXBlcyB0b1xuICAgICAqIGZhY2lsaXRhdGUgYnJhbmQgcmVjb2duaXRpb24gdXNlZCBpbiB0aGUgU2VjdXJlZCBGaWVsZHMgb25CcmFuZCBjYWxsYmFjay5cbiAgICAgKiBTZWUgbGlzdCBvZiBhdmFpbGFibGUgY2FyZCB0eXBlcy4gSWYgYSBzaG9wcGVyIGVudGVycyBhIGNhcmQgdHlwZSBub3RcbiAgICAgKiBzcGVjaWZpZWQgaW4gdGhlIEdyb3VwVHlwZXMgY29uZmlndXJhdGlvbiwgdGhlIG9uQnJhbmQgY2FsbGJhY2sgd2lsbCBub3QgYmUgaW52b2tlZC5cbiAgICAgKi9cbiAgICBncm91cFR5cGVzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IHRoZSBzYW1wbGUgdmFsdWVzIHlvdSB3YW50IHRvIGFwcGVhciBmb3IgY2FyZCBkZXRhaWwgaW5wdXQgZmllbGRzLlxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVycz86IENyZWRpdENhcmRQbGFjZUhvbGRlciB8IFNlcGFQbGFjZUhvbGRlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkN1c3RvbUNhcmRDb21wb25lbnRPcHRpb25zXG4gICAgZXh0ZW5kcyBBZHllbkJhc2VDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgYXJpYSBhdHRyaWJ1dGVzIGZvciB0aGUgaW5wdXQgZmllbGRzIGZvciB3ZWIgYWNjZXNzaWJpbGl0eS5cbiAgICAgKi9cbiAgICBhcmlhTGFiZWxzPzogQ3VzdG9tQ2FyZEFyaWFMYWJlbHM7XG5cbiAgICAvKipcbiAgICAgKiBBdXRvbWF0aWNhbGx5IHNoaWZ0IHRoZSBmb2N1cyBmcm9tIGRhdGUgZmllbGQgdG8gdGhlIENWQyBmaWVsZC5cbiAgICAgKi9cbiAgICBhdXRvZm9jdXM/OiBib29sZWFuO1xufVxuXG50eXBlIEFkeWVuQ2xpZW50Q29uc3RydWN0b3IgPSAoY29uZmlndXJhdGlvbjogQWR5ZW5Db25maWd1cmF0aW9uKSA9PiBQcm9taXNlPEFkeWVuQ2xpZW50PjtcblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkVycm9yIHtcbiAgICBlcnJvckNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0hvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIEFkeWVuQ2hlY2tvdXQ/OiBBZHllbkNsaWVudENvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjJIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBBZHllbkNoZWNrb3V0PzogbmV3IChjb25maWd1cmF0aW9uOiBBZHllbkNvbmZpZ3VyYXRpb24pID0+IEFkeWVuQ2xpZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zXG4gICAgZXh0ZW5kcyBBZHllbkJhc2VDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICAgICAgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIC8qKlxuICAgICAqIE9wdGlvbmFsLiBTZXQgdG8gKipmYWxzZSoqIHRvIHJlbW92ZSB0aGUgYmFuayBsb2dvcyBmcm9tIHRoZSBpREVBTCBmb3JtLlxuICAgICAqL1xuICAgIHNob3dJbWFnZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5Cb2xldG9Db21wb25lbnRPcHRpb25zIGV4dGVuZHMgQWR5ZW5Db21wb25lbnRFdmVudHMge1xuICAgIHBlcnNvbmFsRGV0YWlsc1JlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBzaG93RW1haWxBZGRyZXNzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblN0b3JlZFBheW1lbnRNZXRob2Qge1xuICAgIC8qKlxuICAgICAqIFRoZSBicmFuZCBvZiB0aGUgY2FyZC5cbiAgICAgKi9cbiAgICBicmFuZD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBtb250aCB0aGUgY2FyZCBleHBpcmVzLlxuICAgICAqL1xuICAgIGV4cGlyeU1vbnRoPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHllYXIgdGhlIGNhcmQgZXhwaXJlcy5cbiAgICAgKi9cbiAgICBleHBpcnlZZWFyPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBwYXltZW50IG1ldGhvZCBjb2RlLlxuICAgICAqL1xuICAgIGhvbGRlck5hbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIG9mIHRoaXMgc3RvcmVkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIGlkPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgZm91ciBkaWdpdHMgb2YgdGhlIFBBTi5cbiAgICAgKi9cbiAgICBsYXN0Rm91cj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXNwbGF5IG5hbWUgb2YgdGhlIHN0b3JlZCBwYXltZW50IG1ldGhvZC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2hvcHBlcuKAmXMgZW1haWwgYWRkcmVzcy5cbiAgICAgKi9cbiAgICBzaG9wcGVyRW1haWw/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3VwcG9ydGVkIHNob3BwZXIgaW50ZXJhY3Rpb25zIGZvciB0aGlzIHN0b3JlZCBwYXltZW50IG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdXBwb3J0ZWRTaG9wcGVySW50ZXJhY3Rpb25zPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiBwYXltZW50IG1ldGhvZC5cbiAgICAgKi9cbiAgICB0eXBlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVGhyZWVEUzJPcHRpb25zIGV4dGVuZHMgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uQ2FsbGJhY2tzIHtcbiAgICAvKipcbiAgICAgKiBTcGVjaWZ5IFRocmVlM0RTMkNoYWxsZW5nZSBXaWRnZXQgU2l6ZVxuICAgICAqXG4gICAgICogVmFsdWVzXG4gICAgICogJzAxJyA9IDI1MHB4IHggNDAwcHhcbiAgICAgKiAnMDInID0gMzkwcHggeCA0MDBweFxuICAgICAqICcwMycgPSA1MDBweCB4IDYwMHB4XG4gICAgICogJzA0JyA9IDYwMHB4IHggNDAwcHhcbiAgICAgKiAnMDUnID0gMTAwJSB4IDEwMCVcbiAgICAgKi9cbiAgICB3aWRnZXRTaXplPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhbmsge1xuICAgIC8qKlxuICAgICAqIFRoZSBiYW5rIGFjY291bnQgbnVtYmVyICh3aXRob3V0IHNlcGFyYXRvcnMpLlxuICAgICAqL1xuICAgIGJhbmtBY2NvdW50TnVtYmVyPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGJhbmsgY2l0eS5cbiAgICAgKi9cbiAgICBiYW5rQ2l0eT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhdGlvbiBpZCBvZiB0aGUgYmFuay4gVGhlIGZpZWxkIHZhbHVlIGlzIG5pbCBpbiBtb3N0IGNhc2VzLlxuICAgICAqL1xuICAgIGJhbmtMb2NhdGlvbklkPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGJhbmsuXG4gICAgICovXG4gICAgYmFua05hbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgQnVzaW5lc3MgSWRlbnRpZmllciBDb2RlIChCSUMpIGlzIHRoZSBTV0lGVCBhZGRyZXNzIGFzc2lnbmVkIHRvXG4gICAgICogYSBiYW5rLiBUaGUgZmllbGQgdmFsdWUgaXMgbmlsIGluIG1vc3QgY2FzZXMuXG4gICAgICovXG4gICAgYmljPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ291bnRyeSBjb2RlIHdoZXJlIHRoZSBiYW5rIGlzIGxvY2F0ZWQuXG4gICAgICogQSB2YWxpZCB2YWx1ZSBpcyBhbiBJU08gdHdvLWNoYXJhY3RlciBjb3VudHJ5IGNvZGUgKGUuZy4gJ05MJykuXG4gICAgICovXG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgSW50ZXJuYXRpb25hbCBCYW5rIEFjY291bnQgTnVtYmVyIChJQkFOKS5cbiAgICAgKi9cbiAgICBpYmFuPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGJhbmsgYWNjb3VudCBob2xkZXIuIElmIHlvdSBzdWJtaXQgYSBuYW1lIHdpdGggbm9uLUxhdGluXG4gICAgICogY2hhcmFjdGVycywgd2UgYXV0b21hdGljYWxseSByZXBsYWNlIHNvbWUgb2YgdGhlbSB3aXRoIGNvcnJlc3BvbmRpbmcgTGF0aW5cbiAgICAgKiBjaGFyYWN0ZXJzIHRvIG1lZXQgdGhlIEZBVEYgcmVjb21tZW5kYXRpb25zLiBGb3IgZXhhbXBsZTpcbiAgICAgKiDPhzEyIGlzIGNvbnZlcnRlZCB0byBjaDEyLlxuICAgICAqIMO8QSBpcyBjb252ZXJ0ZWQgdG8gZXVBLlxuICAgICAqIFBldGVyIE3DuGxsZXIgaXMgY29udmVydGVkIHRvIFBldGVyIE1sbGVyLCBiZWNhdXNlIGJhbmtzIGRvbid0IGFjY2VwdCAnw7gnLlxuICAgICAqIEFmdGVyIHJlcGxhY2VtZW50LCB0aGUgb3duZXJOYW1lIG11c3QgaGF2ZSBhdCBsZWFzdCB0aHJlZSBhbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAqIChBLVosIGEteiwgMC05KSwgYW5kIGF0IGxlYXN0IG9uZSBvZiB0aGVtIG11c3QgYmUgYSB2YWxpZCBMYXRpbiBjaGFyYWN0ZXJcbiAgICAgKiAoQS1aLCBhLXopLiBGb3IgZXhhbXBsZTpcbiAgICAgKiBKb2huMTcgLSBhbGxvd2VkLlxuICAgICAqIEoxNyAtIGFsbG93ZWQuXG4gICAgICogMTcxIC0gbm90IGFsbG93ZWQuXG4gICAgICogSm9obi03IC0gYWxsb3dlZC5cbiAgICAgKi9cbiAgICBvd25lck5hbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgYmFuayBhY2NvdW50IGhvbGRlcidzIHRheCBJRC5cbiAgICAgKi9cbiAgICB0YXhJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY2FyZCB2ZXJpZmljYXRpb24gY29kZSAoMS0yMCBjaGFyYWN0ZXJzKS4gRGVwZW5kaW5nIG9uIHRoZSBjYXJkIGJyYW5kLCBpdFxuICAgICAqIGlzIGtub3duIGFsc28gYXM6XG4gICAgICogQ1ZWMi9DVkMyIOKAkyBsZW5ndGg6IDMgZGlnaXRzXG4gICAgICogQ0lEIOKAkyBsZW5ndGg6IDQgZGlnaXRzXG4gICAgICovXG4gICAgY3ZjPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNhcmQgZXhwaXJ5IG1vbnRoLiBGb3JtYXQ6IDIgZGlnaXRzLCB6ZXJvLXBhZGRlZCBmb3Igc2luZ2xlIGRpZ2l0cy4gRm9yIGV4YW1wbGU6XG4gICAgICogMDMgPSBNYXJjaFxuICAgICAqIDExID0gTm92ZW1iZXJcbiAgICAgKiBSZXF1aXJlZFxuICAgICAqL1xuICAgIGV4cGlyeU1vbnRoOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FyZCBleHBpcnkgeWVhci4gRm9ybWF0OiA0IGRpZ2l0cy4gRm9yIGV4YW1wbGU6IDIwMjBcbiAgICAgKiBSZXF1aXJlZFxuICAgICAqL1xuICAgIGV4cGlyeVllYXI6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBjYXJkaG9sZGVyLCBhcyBwcmludGVkIG9uIHRoZSBjYXJkLlxuICAgICAqIFJlcXVpcmVkXG4gICAgICovXG4gICAgaG9sZGVyTmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGlzc3VlIG51bWJlciBvZiB0aGUgY2FyZCAoZm9yIHNvbWUgVUsgZGViaXQgY2FyZHMgb25seSkuXG4gICAgICovXG4gICAgaXNzdWVOdW1iZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FyZCBudW1iZXIgKDQtMTkgY2hhcmFjdGVycykuIERvIG5vdCB1c2UgYW55IHNlcGFyYXRvcnMuIFdoZW4gdGhpcyB2YWx1ZSBpc1xuICAgICAqIHJldHVybmVkIGluIGEgcmVzcG9uc2UsIG9ubHkgdGhlIGxhc3QgNCBkaWdpdHMgb2YgdGhlIGNhcmQgbnVtYmVyIGFyZSByZXR1cm5lZC5cbiAgICAgKiBSZXF1aXJlZFxuICAgICAqL1xuICAgIG51bWJlcjogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1vbnRoIGNvbXBvbmVudCBvZiB0aGUgc3RhcnQgZGF0ZSAoZm9yIHNvbWUgVUsgZGViaXQgY2FyZHMgb25seSkuXG4gICAgICovXG4gICAgc3RhcnROdW1iZXI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgeWVhciBjb21wb25lbnQgb2YgdGhlIHN0YXJ0IGRhdGUgKGZvciBzb21lIFVLIGRlYml0IGNhcmRzIG9ubHkpLlxuICAgICAqL1xuICAgIHN0YXJ0WWVhcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYXJkU3RhdGUge1xuICAgIGRhdGE6IENhcmREYXRhUGF5bWVudE1ldGhvZFN0YXRlO1xuICAgIGlzVmFsaWQ/OiBib29sZWFuO1xuICAgIHZhbGlkPzogeyBba2V5OiBzdHJpbmddOiBib29sZWFuIH07XG4gICAgZXJyb3JzPzogQ2FyZFN0YXRlRXJyb3JzO1xufVxuXG5pbnRlcmZhY2UgSWRlYWxTdGF0ZURhdGEge1xuICAgIGlzc3Vlcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgU2VwYVN0YXRlRGF0YSB7XG4gICAgb3duZXJOYW1lOiBzdHJpbmc7XG4gICAgaWJhbk51bWJlcjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQ2FyZFN0YXRlRGF0YSB7XG4gICAgZW5jcnlwdGVkQ2FyZE51bWJlcjogc3RyaW5nO1xuICAgIGVuY3J5cHRlZEV4cGlyeU1vbnRoOiBzdHJpbmc7XG4gICAgZW5jcnlwdGVkRXhwaXJ5WWVhcjogc3RyaW5nO1xuICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZTogc3RyaW5nO1xuICAgIGhvbGRlck5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllbkNvbXBvbmVudFN0YXRlIHtcbiAgICBkYXRhPzogQ2FyZFN0YXRlRGF0YSB8IElkZWFsU3RhdGVEYXRhIHwgU2VwYVN0YXRlRGF0YTtcbiAgICBpc3N1ZXI/OiBzdHJpbmc7XG4gICAgaXNWYWxpZD86IGJvb2xlYW47XG4gICAgdmFsaWQ/OiB7IFtrZXk6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgICBlcnJvcnM/OiBDYXJkU3RhdGVFcnJvcnM7XG59XG5cbmludGVyZmFjZSBDYXJkRGF0YVBheW1lbnRNZXRob2RTdGF0ZSB7XG4gICAgcGF5bWVudE1ldGhvZDogQ2FyZFBheW1lbnRNZXRob2RTdGF0ZTtcbiAgICBpbnN0YWxsbWVudHM/OiB7IHZhbHVlOiBudW1iZXI7IHBsYW4/OiAnc3RyaW5nJyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRTdGF0ZUVycm9ycyB7XG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlY2hhdFN0YXRlIHtcbiAgICBkYXRhOiBXZWNoYXREYXRhUGF5bWVudE1ldGhvZFN0YXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvbGV0b1N0YXRlIHtcbiAgICBkYXRhOiBCb2xldG9EYXRhUGF5bWVudE1ldGhvZFN0YXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWRpdENhcmRQbGFjZUhvbGRlciB7XG4gICAgZW5jcnlwdGVkQ2FyZE51bWJlcj86IHN0cmluZztcbiAgICBlbmNyeXB0ZWRFeHBpcnlEYXRlPzogc3RyaW5nO1xuICAgIGVuY3J5cHRlZFNlY3VyaXR5Q29kZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgQWNjb3VudERhdGFQYXltZW50TWV0aG9kU3RhdGUge1xuICAgIHBheW1lbnRNZXRob2Q6IEFkeWVuUGF5bWVudE1ldGhvZFN0YXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFjY291bnRTdGF0ZSB7XG4gICAgZGF0YTogQWNjb3VudERhdGFQYXltZW50TWV0aG9kU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3NzUHJvcGVydGllcyB7XG4gICAgYmFja2dyb3VuZD86IHN0cmluZztcbiAgICBjYXJldENvbG9yPzogc3RyaW5nO1xuICAgIGNvbG9yPzogc3RyaW5nO1xuICAgIGRpc3BsYXk/OiBzdHJpbmc7XG4gICAgZm9udD86IHN0cmluZztcbiAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZvbnRTaXplQWRqdXN0Pzogc3RyaW5nO1xuICAgIGZvbnRTbW9vdGhpbmc/OiBzdHJpbmc7XG4gICAgZm9udFN0cmV0Y2g/OiBzdHJpbmc7XG4gICAgZm9udFN0eWxlPzogc3RyaW5nO1xuICAgIGZvbnRWYXJpYW50Pzogc3RyaW5nO1xuICAgIGZvbnRWYXJpYW50QWx0ZXJuYXRlcz86IHN0cmluZztcbiAgICBmb250VmFyaWFudENhcHM/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnRFYXN0QXNpYW4/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnRMaWdhdHVyZXM/OiBzdHJpbmc7XG4gICAgZm9udFZhcmlhbnROdW1lcmljPzogc3RyaW5nO1xuICAgIGZvbnRXZWlnaHQ/OiBzdHJpbmc7XG4gICAgbGV0dGVyU3BhY2luZz86IHN0cmluZztcbiAgICBsaW5lSGVpZ2h0Pzogc3RyaW5nO1xuICAgIG1vek9zeEZvbnRTbW9vdGhpbmc/OiBzdHJpbmc7XG4gICAgbW96VHJhbnNpdGlvbj86IHN0cmluZztcbiAgICBvdXRsaW5lPzogc3RyaW5nO1xuICAgIG9wYWNpdHk/OiBzdHJpbmcgfCBudW1iZXI7XG4gICAgcGFkZGluZz86IHN0cmluZztcbiAgICB0ZXh0QWxpZ24/OiBzdHJpbmc7XG4gICAgdGV4dFNoYWRvdz86IHN0cmluZztcbiAgICB0cmFuc2l0aW9uPzogc3RyaW5nO1xuICAgIHdlYmtpdEZvbnRTbW9vdGhpbmc/OiBzdHJpbmc7XG4gICAgd2Via2l0VHJhbnNpdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21DYXJkQXJpYUxhYmVsIHtcbiAgICBsYWJlbD86IHN0cmluZztcbiAgICBpZnJhbWVUaXRsZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21DYXJkQXJpYUxhYmVscyB7XG4gICAgbGFuZz86IHN0cmluZztcbiAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyPzogQ3VzdG9tQ2FyZEFyaWFMYWJlbDtcbiAgICBlbmNyeXB0ZWRFeHBpcnlEYXRlPzogQ3VzdG9tQ2FyZEFyaWFMYWJlbDtcbiAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGU/OiBDdXN0b21DYXJkQXJpYUxhYmVsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZ3JvdXAuXG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEVjaG8gZGF0YSB0byBiZSB1c2VkIGlmIHRoZSBwYXltZW50IG1ldGhvZCBpcyBkaXNwbGF5ZWQgYXMgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIHBheW1lbnRNZXRob2REYXRhPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBjb2RlIG9mIHRoZSBncm91cC5cbiAgICAgKi9cbiAgICB0eXBlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElucHV0RGV0YWlsIHtcbiAgICAvKipcbiAgICAgKiBDb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSByZXF1aXJlZCBpbnB1dC5cbiAgICAgKi9cbiAgICBjb25maWd1cmF0aW9uPzogb2JqZWN0O1xuXG4gICAgLyoqXG4gICAgICogSW5wdXQgZGV0YWlscyBjYW4gYWxzbyBiZSBwcm92aWRlZCByZWN1cnNpdmVseS5cbiAgICAgKi9cbiAgICBkZXRhaWxzPzogU3ViSW5wdXREZXRhaWxbXTtcblxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYSBzZWxlY3QsIHRoZSBVUkwgZnJvbSB3aGljaCB0byBxdWVyeSB0aGUgaXRlbXMuXG4gICAgICovXG4gICAgaXRlbVNlYXJjaFVybD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEluIGNhc2Ugb2YgYSBzZWxlY3QsIHRoZSBpdGVtcyB0byBjaG9vc2UgZnJvbS5cbiAgICAgKi9cbiAgICBpdGVtcz86IEl0ZW1bXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB2YWx1ZSB0byBwcm92aWRlIGluIHRoZSByZXN1bHQuXG4gICAgICovXG4gICAga2V5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGlzIGlucHV0IHZhbHVlIGlzIG9wdGlvbmFsLlxuICAgICAqL1xuICAgIG9wdGlvbmFsPzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSByZXF1aXJlZCBpbnB1dC5cbiAgICAgKi9cbiAgICB0eXBlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSBwcmUtZmlsbGVkLCBpZiBhdmFpbGFibGUuXG4gICAgICovXG4gICAgdmFsdWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSXRlbSB7XG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIHRvIHByb3ZpZGUgaW4gdGhlIHJlc3VsdC5cbiAgICAgKi9cbiAgICBpZD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXNwbGF5IG5hbWUuXG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50TWV0aG9kIHtcbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIHBvc3NpYmxlIGJyYW5kcy4gRm9yIGV4YW1wbGU6IHZpc2EsIG1jLlxuICAgICAqL1xuICAgIGJyYW5kcz86IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIGNvbmZpZ3VyYXRpb24/OiBvYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBBbGwgaW5wdXQgZGV0YWlscyB0byBiZSBwcm92aWRlZCB0byBjb21wbGV0ZSB0aGUgcGF5bWVudCB3aXRoIHRoaXMgcGF5bWVudFxuICAgICAqIG1ldGhvZC5cbiAgICAgKi9cbiAgICBkZXRhaWxzPzogSW5wdXREZXRhaWxbXTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBncm91cCB3aGVyZSB0aGlzIHBheW1lbnQgbWV0aG9kIGJlbG9uZ3MgdG8uXG4gICAgICovXG4gICAgZ3JvdXA/OiBHcm91cDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBkaXNwbGF5YWJsZSBuYW1lIG9mIHRoaXMgcGF5bWVudCBtZXRob2QuXG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEVjaG8gZGF0YSByZXF1aXJlZCB0byBzZW5kIGluIG5leHQgY2FsbHMuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZERhdGE/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIHBheW1lbnQgbWV0aG9kIHN1cHBvcnRzIHRva2VuaXphdGlvbiBvciBub3QuXG4gICAgICovXG4gICAgc3VwcG9ydHNSZWN1cnJpbmc/OiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBwYXltZW50IG1ldGhvZCBjb2RlLlxuICAgICAqL1xuICAgIHR5cGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudE1ldGhvZEdyb3VwIHtcbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSB0byBzdWJtaXQgZm9yIGFueSBwYXltZW50IG1ldGhvZCBpbiB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIGdyb3VwVHlwZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBodW1hbi1yZWFkYWJsZSBuYW1lIG9mIHRoaXMgZ3JvdXAuXG4gICAgICovXG4gICAgbmFtZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlcyBvZiBwYXltZW50IG1ldGhvZHMgdGhhdCBiZWxvbmcgaW4gdGhpcyBncm91cC5cbiAgICAgKi9cbiAgICB0eXBlcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2RzUmVzcG9uc2Uge1xuICAgIC8qKlxuICAgICAqIEdyb3VwcyBvZiBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgZ3JvdXBzPzogUGF5bWVudE1ldGhvZEdyb3VwW107XG5cbiAgICAvKipcbiAgICAgKiBEZXRhaWxlZCBsaXN0IG9mIG9uZS1jbGljayBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgb25lQ2xpY2tQYXltZW50TWV0aG9kcz86IFJlY3VycmluZ0RldGFpbDtcblxuICAgIC8qKlxuICAgICAqIERldGFpbGVkIGxpc3Qgb2YgcGF5bWVudCBtZXRob2RzIHJlcXVpcmVkIHRvIGdlbmVyYXRlIHBheW1lbnQgZm9ybXMuXG4gICAgICovXG4gICAgcGF5bWVudE1ldGhvZHM/OiBQYXltZW50TWV0aG9kW107XG5cbiAgICAvKipcbiAgICAgKiBMaXN0IG9mIGFsbCBzdG9yZWQgcGF5bWVudCBtZXRob2RzLlxuICAgICAqL1xuICAgIHN0b3JlZFBheW1lbnRNZXRob2RzPzogQWR5ZW5TdG9yZWRQYXltZW50TWV0aG9kW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjdXJyaW5nRGV0YWlsIGV4dGVuZHMgUGF5bWVudE1ldGhvZCB7XG4gICAgLyoqXG4gICAgICogVGhlIHJlZmVyZW5jZSB0aGF0IHVuaXF1ZWx5IGlkZW50aWZpZXMgdGhlIHJlY3VycmluZyBkZXRhaWwuXG4gICAgICovXG4gICAgcmVjdXJyaW5nRGV0YWlsUmVmZXJlbmNlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQ29udGFpbnMgaW5mb3JtYXRpb24gb24gcHJldmlvdXNseSBzdG9yZWQgcGF5bWVudCBkZXRhaWxzLlxuICAgICAqL1xuICAgIHN0b3JlZERldGFpbHM/OiBTdG9yZWREZXRhaWxzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlcGFQbGFjZUhvbGRlciB7XG4gICAgb3duZXJOYW1lPzogc3RyaW5nO1xuICAgIGliYW5OdW1iZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcmVkRGV0YWlscyB7XG4gICAgLyoqXG4gICAgICogVGhlIHN0b3JlZCBiYW5rIGFjY291bnQuXG4gICAgICovXG4gICAgYmFuaz86IEJhbms7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc3RvcmVkIGNhcmQgaW5mb3JtYXRpb24uXG4gICAgICovXG4gICAgY2FyZD86IENhcmQ7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZW1haWwgYXNzb2NpYXRlZCB3aXRoIHN0b3JlZCBwYXltZW50IGRldGFpbHMuXG4gICAgICovXG4gICAgZW1haWxBZGRyZXNzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQmFzZSBzdHlsaW5nIGFwcGxpZWQgdG8gdGhlIGlmcmFtZS4gQWxsIHN0eWxpbmcgZXh0ZW5kcyBmcm9tIHRoaXMgc3R5bGUuXG4gICAgICovXG4gICAgYmFzZT86IENzc1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBTdHlsaW5nIGFwcGxpZWQgd2hlbiBhIGZpZWxkIGZhaWxzIHZhbGlkYXRpb24uXG4gICAgICovXG4gICAgZXJyb3I/OiBDc3NQcm9wZXJ0aWVzO1xuXG4gICAgLyoqXG4gICAgICogU3R5bGluZyBhcHBsaWVkIHRvIHRoZSBmaWVsZCdzIHBsYWNlaG9sZGVyIHZhbHVlcy5cbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlcj86IENzc1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBTdHlsaW5nIGFwcGxpZWQgb25jZSBhIGZpZWxkIHBhc3NlcyB2YWxpZGF0aW9uLlxuICAgICAqL1xuICAgIHZhbGlkYXRlZD86IENzc1Byb3BlcnRpZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3ViSW5wdXREZXRhaWwge1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIHJlcXVpcmVkIGlucHV0LlxuICAgICAqL1xuICAgIGNvbmZpZ3VyYXRpb24/OiBvYmplY3Q7XG5cbiAgICAvKipcbiAgICAgKiBJbiBjYXNlIG9mIGEgc2VsZWN0LCB0aGUgaXRlbXMgdG8gY2hvb3NlIGZyb20uXG4gICAgICovXG4gICAgaXRlbXM/OiBJdGVtW107XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgdG8gcHJvdmlkZSBpbiB0aGUgcmVzdWx0LlxuICAgICAqL1xuICAgIGtleT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRydWUgaWYgdGhpcyBpbnB1dCBpcyBvcHRpb25hbCB0byBwcm92aWRlLlxuICAgICAqL1xuICAgIG9wdGlvbmFsPzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSByZXF1aXJlZCBpbnB1dC5cbiAgICAgKi9cbiAgICB0eXBlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGNhbiBiZSBwcmUtZmlsbGVkLCBpZiBhdmFpbGFibGUuXG4gICAgICovXG4gICAgdmFsdWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM1RocmVlRFMyQ2hhbGxlbmdlQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgY2hhbGxlbmdlV2luZG93U2l6ZT86IHN0cmluZztcbiAgICBvbkFkZGl0aW9uYWxEZXRhaWxzPyhzdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUsIGNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcbiAgICBvbkFjdGlvbkhhbmRsZWQ/KHJ0bk9iajogQWN0aW9uSGFuZGxlZFJldHVybk9iamVjdCk6IHZvaWQ7XG4gICAgb25FcnJvcihlcnJvcjogQWR5ZW5FcnJvcik6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMlRocmVlRFMyQ2hhbGxlbmdlQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgc2l6ZT86IHN0cmluZztcbiAgICBvbkFkZGl0aW9uYWxEZXRhaWxzPyhzdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUsIGNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcbiAgICBvbkFjdGlvbkhhbmRsZWQ/KHJ0bk9iajogQWN0aW9uSGFuZGxlZFJldHVybk9iamVjdCk6IHZvaWQ7XG4gICAgb25FcnJvcihlcnJvcjogQWR5ZW5FcnJvcik6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uSGFuZGxlZFJldHVybk9iamVjdCB7XG4gICAgY29tcG9uZW50VHlwZTogc3RyaW5nO1xuICAgIGFjdGlvbkRlc2NyaXB0aW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGhyZWVEUzJEZXZpY2VGaW5nZXJwcmludENvbXBvbmVudE9wdGlvbnMge1xuICAgIG9uQWN0aW9uSGFuZGxlZD8ocnRuT2JqOiBBY3Rpb25IYW5kbGVkUmV0dXJuT2JqZWN0KTogdm9pZDtcbiAgICBvbkFkZGl0aW9uYWxEZXRhaWxzPyhzdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUsIGNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50KTogdm9pZDtcbiAgICBvbkVycm9yKGVycm9yOiBBZHllbkVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZHllblZhbGlkYXRpb25TdGF0ZSB7XG4gICAgdmFsaWQ6IGJvb2xlYW47XG4gICAgZmllbGRUeXBlPzogQWR5ZW5DYXJkRmllbGRzO1xuICAgIGVuZERpZ2l0cz86IHN0cmluZztcbiAgICBlbmNyeXB0ZWRGaWVsZE5hbWU/OiBzdHJpbmc7XG4gICAgaTE4bj86IHN0cmluZztcbiAgICBlcnJvcj86IHN0cmluZztcbiAgICBlcnJvcktleT86IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gQWR5ZW5DYXJkRmllbGRzIHtcbiAgICBDYXJkTnVtYmVyID0gJ2VuY3J5cHRlZENhcmROdW1iZXInLFxuICAgIFNlY3VyaXR5Q29kZSA9ICdlbmNyeXB0ZWRTZWN1cml0eUNvZGUnLFxuICAgIEV4cGlyeURhdGUgPSAnZW5jcnlwdGVkRXhwaXJ5RGF0ZScsXG59XG5cbmV4cG9ydCB0eXBlIEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSA9IENhcmRTdGF0ZSB8IEJvbGV0b1N0YXRlIHwgV2VjaGF0U3RhdGU7XG5cbmV4cG9ydCB0eXBlIEFkeWVuQ29tcG9uZW50T3B0aW9ucyA9XG4gICAgfCBBZHllbkNyZWRpdENhcmRDb21wb25lbnRPcHRpb25zXG4gICAgfCBBZHllbklkZWFsQ29tcG9uZW50T3B0aW9uc1xuICAgIHwgQWR5ZW5Cb2xldG9Db21wb25lbnRPcHRpb25zXG4gICAgfCBBZHllbkN1c3RvbUNhcmRDb21wb25lbnRPcHRpb25zO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjNQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBjbGllbnRLZXk/OiBzdHJpbmc7XG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmc7XG4gICAgcGF5bWVudE1ldGhvZHNSZXNwb25zZT86IFBheW1lbnRNZXRob2RzUmVzcG9uc2U7XG4gICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbjtcbiAgICBpbnN0YWxsbWVudE9wdGlvbnM/OiBudWxsIHwge1xuICAgICAgICBjYXJkPzoge1xuICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICAgIHZpc2E/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgbWM/OiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG51bWJlcltdO1xuICAgICAgICAgICAgcGxhbnM/OiBzdHJpbmdbXTtcbiAgICAgICAgfTtcbiAgICAgICAgZGluZXJzPzoge1xuICAgICAgICAgICAgdmFsdWVzOiBudW1iZXJbXTtcbiAgICAgICAgICAgIHBsYW5zPzogc3RyaW5nW107XG4gICAgICAgIH07XG4gICAgICAgIGpjYj86IHtcbiAgICAgICAgICAgIHZhbHVlczogbnVtYmVyW107XG4gICAgICAgICAgICBwbGFucz86IHN0cmluZ1tdO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WMlBheW1lbnRNZXRob2RJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIG9yaWdpbktleT86IHN0cmluZztcbiAgICBjbGllbnRLZXk/OiBzdHJpbmc7XG4gICAgZW52aXJvbm1lbnQ/OiBzdHJpbmc7XG4gICAgcGF5bWVudE1ldGhvZHNSZXNwb25zZT86IFBheW1lbnRNZXRob2RzUmVzcG9uc2U7XG4gICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbjtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBOb3RJbml0aWFsaXplZEVycm9yVHlwZSB7XG4gICAgQ2hlY2tvdXRCdXR0b25Ob3RJbml0aWFsaXplZCxcbiAgICBDdXN0b21lck5vdEluaXRpYWxpemVkLFxuICAgIFBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICBTaGlwcGluZ05vdEluaXRpYWxpemVkLFxuICAgIFNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIG1ldGhvZCByZXF1aXJlcyBhIGNlcnRhaW4gaW5pdGlhbGl6YXRpb24gY2FsbCB0byBiZVxuICogbWFkZSBmaXJzdC4gU29tZSBvYmplY3RzIGNhbiBiZSBjb25zdHJ1Y3RlZCBidXQgdGhleSBjYW5ub3QgYmUgdXNlZCB1bnRpbCBhXG4gKiBzZXBhcmF0ZSBpbml0aWFsaXphdGlvbiBjYWxsIGlzIG1hZGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEluaXRpYWxpemVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW5pdGlhbGl6ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW5pdGlhbGl6ZWQnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5DdXN0b21lck5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjdXN0b21lciBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TaGlwcGluZ05vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBzaGlwcGluZyBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2hlY2tvdXQgc3BhbSBwcm90ZWN0aW9uIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGNvbXBvbmVudCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIsIFN0eWxlc2hlZXRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IEFkeWVuQ2xpZW50LCBBZHllbkNvbmZpZ3VyYXRpb24sIEFkeWVuVjJIb3N0V2luZG93IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHllblYyU2NyaXB0TG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfc2NyaXB0TG9hZGVyOiBTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgX3N0eWxlc2hlZXRMb2FkZXI6IFN0eWxlc2hlZXRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgX3dpbmRvdzogQWR5ZW5WMkhvc3RXaW5kb3cgPSB3aW5kb3csXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgbG9hZChjb25maWd1cmF0aW9uOiBBZHllbkNvbmZpZ3VyYXRpb24pOiBQcm9taXNlPEFkeWVuQ2xpZW50PiB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRoaXMuX3N0eWxlc2hlZXRMb2FkZXIubG9hZFN0eWxlc2hlZXQoXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZW52aXJvbm1lbnQgPz8gJydcbiAgICAgICAgICAgICAgICB9LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvc2RrLzMuMTAuMS9hZHllbi5jc3NgLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGVuZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncml0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hhMzg0LThvZmdJQ1paL2s1Y0M1Tjd4ZWdxRlpPQTczSDlSUTdIMTM0MzlKZkFaVzhHajNxanVLTDJpc2FURDNHTUloREUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46ICdhbm9ueW1vdXMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdGhpcy5fc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoXG4gICAgICAgICAgICAgICAgYGh0dHBzOi8vY2hlY2tvdXRzaG9wcGVyLSR7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYXRpb24uZW52aXJvbm1lbnQgPz8gJydcbiAgICAgICAgICAgICAgICB9LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvc2RrLzMuMTAuMS9hZHllbi5qc2AsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZWdyaXR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzaGEzODQtd0cyejl6U1FvNjFFSXZ5WG1pRkNvK3pCM3kwWkI0aHNyWFZjQU5tcFA4SEx0aGpvUUpRUEJoN3RaS0pTVjhqQScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjcm9zc29yaWdpbjogJ2Fub255bW91cycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICksXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGlmICghdGhpcy5fd2luZG93LkFkeWVuQ2hlY2tvdXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLl93aW5kb3cuQWR5ZW5DaGVja291dChjb25maWd1cmF0aW9uKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVzb2x2YWJsZU1vZHVsZSBmcm9tICcuL3Jlc29sdmFibGUtbW9kdWxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9SZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPihcbiAgICBtb2R1bGU6IFRNb2R1bGUsXG4gICAgcmVzb2x2ZUlkczogVElkZW50aWZpZXJbXSxcbik6IFJlc29sdmFibGVNb2R1bGU8VE1vZHVsZSwgVElkZW50aWZpZXI+IHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2R1bGUsIHsgcmVzb2x2ZUlkcyB9KTtcbn1cbiIsImltcG9ydCB7IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgQ2FyZFN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NhcmRTdGF0ZShwYXJhbTogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlKTogcGFyYW0gaXMgQ2FyZFN0YXRlIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAodHlwZW9mIHBhcmFtID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdHlwZW9mIChwYXJhbSBhcyBDYXJkU3RhdGUpLmRhdGEucGF5bWVudE1ldGhvZC5lbmNyeXB0ZWRTZWN1cml0eUNvZGUgPT09ICdzdHJpbmcnKSB8fFxuICAgICAgICB0eXBlb2YgKHBhcmFtIGFzIENhcmRTdGF0ZSkuZGF0YS5wYXltZW50TWV0aG9kLmVuY3J5cHRlZEV4cGlyeU1vbnRoID09PSAnc3RyaW5nJ1xuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIG1ldGhvZCBpcyB1bmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZVxuICogY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSBhcmd1bWVudHMgYWNjb3JkaW5nIHRvIHRoZWlyIHJlcXVpcmVtZW50cyxcbiAqIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdJbnZhbGlkIGFyZ3VtZW50cyBoYXZlIGJlZW4gcHJvdmlkZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ0ludmFsaWRBcmd1bWVudEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ2ludmFsaWRfYXJndW1lbnQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBJbnZhbGlkQXJndW1lbnRFcnJvciBmcm9tICcuL2ludmFsaWQtYXJndW1lbnQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHdlIGFyZSB1bmFibGUgdG8gc3VibWl0IGEgcGF5bWVudCBiZWNhdXNlXG4gKiB0aGUgY2FsbGVyIGhhcyBub3QgcHJvdmlkZWQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMsIGkuZS46IGlmIGFuIGFyZ3VtZW50IGlzXG4gKiBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IgZXh0ZW5kcyBJbnZhbGlkQXJndW1lbnRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoaW52YWxpZEZpZWxkcz86IHN0cmluZ1tdKSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBmb3IgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIHBheWxvYWQgaXMgaW52YWxpZC4nO1xuXG4gICAgICAgIGlmIChpbnZhbGlkRmllbGRzKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7aW52YWxpZEZpZWxkcy5qb2luKFxuICAgICAgICAgICAgICAgICcsICcsXG4gICAgICAgICAgICApfS5gO1xuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcic7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSG9zdGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgQm9vbGVhbigoaW5zdHJ1bWVudCBhcyBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCkuaW5zdHJ1bWVudElkKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY051bWJlcicpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjQ3Z2JylcbiAgICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+IHtcbiAgICBjb25zdCBmb3JtYXR0ZWRJbnN0cnVtZW50ID0gKGluc3RydW1lbnQgYXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4pXG4gICAgICAgIC5mb3JtYXR0ZWRQYXlsb2FkO1xuXG4gICAgaWYgKCFmb3JtYXR0ZWRJbnN0cnVtZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gPT09ICdzdHJpbmcnIHx8XG4gICAgICAgIEJvb2xlYW4oZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4gJiYgZm9ybWF0dGVkSW5zdHJ1bWVudC5iaWdwYXlfdG9rZW4udG9rZW4pXG4gICAgKTtcbn1cbiIsImltcG9ydCBCcm93c2VySW5mbyBmcm9tICcuL2Jyb3dzZXItaW5mbyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEJyb3dzZXJJbmZvKCk6IEJyb3dzZXJJbmZvIHtcbiAgICBjb25zdCB7IG5hdmlnYXRvciB9ID0gd2luZG93O1xuXG4gICAgbGV0IGxhbmd1YWdlOiBzdHJpbmc7XG5cbiAgICBpZiAobmF2aWdhdG9yLmxhbmd1YWdlKSB7XG4gICAgICAgIGxhbmd1YWdlID0gbmF2aWdhdG9yLmxhbmd1YWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxhbmd1YWdlID0gKG5hdmlnYXRvciBhcyBhbnkpLnVzZXJMYW5ndWFnZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBjb2xvcl9kZXB0aDogd2luZG93LnNjcmVlbi5jb2xvckRlcHRoIHx8IDI0LFxuICAgICAgICBqYXZhX2VuYWJsZWQ6IHR5cGVvZiBuYXZpZ2F0b3IuamF2YUVuYWJsZWQgPT09ICdmdW5jdGlvbicgPyBuYXZpZ2F0b3IuamF2YUVuYWJsZWQoKSA6IGZhbHNlLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgc2NyZWVuX2hlaWdodDogd2luZG93LnNjcmVlbi5oZWlnaHQsXG4gICAgICAgIHNjcmVlbl93aWR0aDogd2luZG93LnNjcmVlbi53aWR0aCxcbiAgICAgICAgdGltZV96b25lX29mZnNldDogbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpLnRvU3RyaW5nKCksXG4gICAgfTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHRyeWluZyB0byBtYWtlIGFuIG9yZGVyIGZpbmFsaXphdGlvbiByZXF1ZXN0IGZvciBhXG4gKiBwYXltZW50IG1ldGhvZCB0aGF0IGRvZXMgbm90IHJlcXVpcmUgc3VjaCBwcm9jZWR1cmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcignVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ29yZGVyX2ZpbmFsaXphdGlvbl9ub3RfcmVxdWlyZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBwYXltZW50IGZsb3cgaXMgY2FuY2VsbGVkLiBJdCBjb3VsZCBiZVxuICogZHVlIHRvIGEgZGVsaWJlcmF0ZSB1c2VyIGludGVyYWN0aW9uLCBpLmUuOiB0aGUgdXNlciBjbGlja3Mgb24gYSBjYW5jZWxcbiAqIGJ1dHRvbiB3aGljaCBkaXNtaXNzZXMgdGhlIHBheW1lbnQgbW9kYWwuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnUGF5bWVudCBwcm9jZXNzIHdhcyBjYW5jZWxsZWQuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X2NhbmNlbGxlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgW2tleTogc3RyaW5nXTogQXJyYXk8eyBtZXNzYWdlOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9Pjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEludmFsaWRGb3JtRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZGV0YWlsczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLCBtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgZm9ybSBjb250YWlucyBpbnZhbGlkIGRhdGEuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRJbnZhbGlkRm9ybUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfaW52YWxpZF9mb3JtJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZHllbkFjdGlvbixcbiAgICBBZHllbkFkZGl0aW9uYWxBY3Rpb24sXG4gICAgQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUsXG4gICAgQWR5ZW5DbGllbnQsXG4gICAgQWR5ZW5Db21wb25lbnQsXG4gICAgQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlLFxuICAgIEFkeWVuQ29tcG9uZW50VHlwZSxcbiAgICBBZHllbkVycm9yLFxuICAgIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgQWR5ZW5QbGFjZWhvbGRlckRhdGEsXG4gICAgQWR5ZW5WMkFjdGlvblR5cGUsXG4gICAgQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBBZHllblYyUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBBZHllblYyU2NyaXB0TG9hZGVyLFxuICAgIENhcmRTdGF0ZUVycm9ycyxcbiAgICBpc0FjY291bnRTdGF0ZSxcbiAgICBpc0NhcmRTdGF0ZSxcbiAgICBXaXRoQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9hZHllbi11dGlscyc7XG5pbXBvcnQge1xuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIGdldEJyb3dzZXJJbmZvLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNSZXF1ZXN0RXJyb3IsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFkeWVuVjJQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX2FkeWVuQ2xpZW50PzogQWR5ZW5DbGllbnQ7XG4gICAgcHJpdmF0ZSBfY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudD86IEFkeWVuQ29tcG9uZW50O1xuICAgIHByaXZhdGUgX2NvbXBvbmVudFN0YXRlPzogQWR5ZW5Db21wb25lbnRFdmVudFN0YXRlO1xuICAgIHByaXZhdGUgX3BheW1lbnRDb21wb25lbnQ/OiBBZHllbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM/OiBBZHllblYyUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3NjcmlwdExvYWRlcjogQWR5ZW5WMlNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBhZHllbnYyIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghYWR5ZW52Mikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmFkeWVudjJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgPSBhZHllbnYyO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgLmdldFBheW1lbnRNZXRob2RPclRocm93PEFkeWVuVjJQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhPihvcHRpb25zLm1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBvcmlnaW5LZXksIGNsaWVudEtleSwgZW52aXJvbm1lbnQsIHBheW1lbnRNZXRob2RzUmVzcG9uc2UgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgY2xpZW50U2lkZUF1dGhlbnRpY2F0aW9uID0ge1xuICAgICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob3JpZ2luS2V5KSB7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24ua2V5ID0gJ29yaWdpbktleSc7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24udmFsdWUgPSBvcmlnaW5LZXk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24ua2V5ID0gJ2NsaWVudEtleSc7XG4gICAgICAgICAgICBjbGllbnRTaWRlQXV0aGVudGljYXRpb24udmFsdWUgPSBjbGllbnRLZXkgfHwgJyc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hZHllbkNsaWVudCA9IGF3YWl0IHRoaXMuX3NjcmlwdExvYWRlci5sb2FkKHtcbiAgICAgICAgICAgIGVudmlyb25tZW50LFxuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0TG9jYWxlKCksXG4gICAgICAgICAgICBbY2xpZW50U2lkZUF1dGhlbnRpY2F0aW9uLmtleV06IGNsaWVudFNpZGVBdXRoZW50aWNhdGlvbi52YWx1ZSxcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RzUmVzcG9uc2UsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBlczogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1BUic6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtRVMnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLU1YJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTCc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtQ08nOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLVBFJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkIHx8XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5CYW5jb250YWN0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQgJiYgcGF5bWVudC5wYXltZW50RGF0YTtcbiAgICAgICAgY29uc3Qgc2hvdWxkU2F2ZUluc3RydW1lbnQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgKHBheW1lbnREYXRhIGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50O1xuICAgICAgICBjb25zdCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID1cbiAgICAgICAgICAgIHBheW1lbnREYXRhICYmIChwYXltZW50RGF0YSBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQ2FyZERhdGEoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBjb21wb25lbnRTdGF0ZSA9IHRoaXMuX2NvbXBvbmVudFN0YXRlO1xuXG4gICAgICAgIGlmICghY29tcG9uZW50U3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGxldCBiaWdwYXlUb2tlbiA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoaXNDYXJkU3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyLFxuICAgICAgICAgICAgICAgIH0gPSBjb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjogZW5jcnlwdGVkQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X21vbnRoOiBlbmNyeXB0ZWRFeHBpcnlNb250aCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X3llYXI6IGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogZW5jcnlwdGVkU2VjdXJpdHlDb2RlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NhcmRTdGF0ZShjb21wb25lbnRTdGF0ZSkgfHwgaXNBY2NvdW50U3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBheW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iaWdwYXlUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29tcG9uZW50U3RhdGUuZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX2NvbXBvbmVudFN0YXRlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICh0aGlzLl9wYXltZW50Q29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXltZW50Q29tcG9uZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRDb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudC51bm1vdW50KCk7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldEFkeWVuQ2xpZW50KCk6IEFkeWVuQ2xpZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLl9hZHllbkNsaWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9hZHllbkNsaWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTogQWR5ZW5WMlBheW1lbnRJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgICAgIGlmICghdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1wib3B0aW9ucy5hZHllbnYyXCIgYXJndW1lbnQgd2FzIG5vdCBwcm92aWRlZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFRocmVlRFMyQ2hhbGxlbmdlV2lkZ2V0U2l6ZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zLCB0aHJlZURTMk9wdGlvbnMgfSA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCB3aWRnZXRTaXplID0gYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMud2lkZ2V0U2l6ZSB8fCB0aHJlZURTMk9wdGlvbnM/LndpZGdldFNpemU7XG5cbiAgICAgICAgaWYgKCF3aWRnZXRTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gJzA1JztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB3aWRnZXRTaXplO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZUFjdGlvbihhZGRpdGlvbmFsQWN0aW9uOiBBZHllbkFkZGl0aW9uYWxBY3Rpb24pOiBQcm9taXNlPFBheW1lbnQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdGhyZWVEUzJDb250YWluZXJJZCwgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmVmb3JlTG9hZCwgY29udGFpbmVySWQsIG9uTG9hZCwgb25Db21wbGV0ZSB9ID0gYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBhZHllbkFjdGlvbjogQWR5ZW5BY3Rpb24gPSBKU09OLnBhcnNlKGFkZGl0aW9uYWxBY3Rpb24uYWN0aW9uKTtcblxuICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbXBvbmVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCkuY3JlYXRlRnJvbUFjdGlvbihhZHllbkFjdGlvbiwge1xuICAgICAgICAgICAgICAgIG9uQWRkaXRpb25hbERldGFpbHM6IChhZGRpdGlvbmFsQWN0aW9uU3RhdGU6IEFkeWVuQWRkaXRpb25hbEFjdGlvblN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQ6IGFkeWVuQWN0aW9uLnBheW1lbnRNZXRob2RUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25jZTogSlNPTi5zdHJpbmdpZnkoYWRkaXRpb25hbEFjdGlvblN0YXRlLmRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLl9nZXRUaHJlZURTMkNoYWxsZW5nZVdpZGdldFNpemUoKSxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3I6IEFkeWVuRXJyb3IpID0+IHJlamVjdChlcnJvciksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTG9hZCkge1xuICAgICAgICAgICAgICAgIG9uQmVmb3JlTG9hZChcbiAgICAgICAgICAgICAgICAgICAgYWR5ZW5BY3Rpb24udHlwZSA9PT0gQWR5ZW5WMkFjdGlvblR5cGUuVGhyZWVEUzJDaGFsbGVuZ2UgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkeWVuQWN0aW9uLnR5cGUgPT09IEFkeWVuVjJBY3Rpb25UeXBlLlFSQ29kZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uQ29tcG9uZW50Lm1vdW50KGAjJHtjb250YWluZXJJZCB8fCB0aHJlZURTMkNvbnRhaW5lcklkfWApO1xuXG4gICAgICAgICAgICBpZiAob25Mb2FkKSB7XG4gICAgICAgICAgICAgICAgb25Mb2FkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M/OiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbixcbiAgICApOiBBZHllblBsYWNlaG9sZGVyRGF0YSB7XG4gICAgICAgIGlmICghYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgYWRkcmVzczE6IHN0cmVldCxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBob3VzZU51bWJlck9yTmFtZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgIH0gPSBiaWxsaW5nQWRkcmVzcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaG9sZGVyTmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAnJyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgc3RyZWV0LFxuICAgICAgICAgICAgICAgIGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICAgICAgY291bnRyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgY29uc3QgYWR5ZW52MiA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG4gICAgICAgIGxldCBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFkeWVudjIuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShBZHllbkNvbXBvbmVudFR5cGUuU2VjdXJlZEZpZWxkcywge1xuICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWR5ZW52Mi5vcHRpb25zPy5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnM/LnN0eWxlcz8ucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYyLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25GaWVsZFZhbGlkOiAodmFsaWRhdGVTdGF0ZSkgPT4gYWR5ZW52Mi52YWxpZGF0ZUNhcmRGaWVsZHModmFsaWRhdGVTdGF0ZSksXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50Lm1vdW50KGAjJHthZHllbnYyLmNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKGNhcmRWZXJpZmljYXRpb25Db21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tb3VudFBheW1lbnRDb21wb25lbnQocGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgbGV0IHBheW1lbnRDb21wb25lbnQ6IEFkeWVuQ29tcG9uZW50O1xuICAgICAgICBjb25zdCBhZHllbnYyID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGFkeWVuQ2xpZW50ID0gdGhpcy5fZ2V0QWR5ZW5DbGllbnQoKTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChwYXltZW50TWV0aG9kLm1ldGhvZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkOlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5BQ0g6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLkJhbmNvbnRhY3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlXG4gICAgICAgICAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcHJlZmlsbENhcmRIb2xkZXJOYW1lIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICAgICAgICAgICAgICBwYXltZW50Q29tcG9uZW50ID0gYWR5ZW5DbGllbnQuY3JlYXRlKHBheW1lbnRNZXRob2QubWV0aG9kLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShiaWxsaW5nQWRkcmVzcywgcHJlZmlsbENhcmRIb2xkZXJOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRDb21wb25lbnQubW91bnQoYCMke2FkeWVudjIuY29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuSURFQUw6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLlNFUEE6XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWR5ZW52Mi5oYXNWYXVsdGVkSW5zdHJ1bWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRDb21wb25lbnQgPSBhZHllbkNsaWVudC5jcmVhdGUocGF5bWVudE1ldGhvZC5tZXRob2QsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYyLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IChjb21wb25lbnRTdGF0ZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudC5tb3VudChgIyR7YWR5ZW52Mi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcGF5bWVudE1ldGhvZC5tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuQWxpUGF5OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5HaXJvUGF5OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5Tb2ZvcnQ6XG4gICAgICAgICAgICAgICAgY2FzZSBBZHllblBheW1lbnRNZXRob2RUeXBlLktsYXJuYTpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuS2xhcm5hUGF5Tm93OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5LbGFybmFBY2NvdW50OlxuICAgICAgICAgICAgICAgIGNhc2UgQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5WaXBwczpcbiAgICAgICAgICAgICAgICBjYXNlIEFkeWVuUGF5bWVudE1ldGhvZFR5cGUuV2VDaGF0UGF5UVI6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUNvbXBvbmVudFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHBheW1lbnRNZXRob2QubWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShwYXltZW50Q29tcG9uZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzIHwgdm9pZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAhc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnIH0pXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgdGhpcy5faGFuZGxlQWN0aW9uKGVycm9yLmJvZHkucHJvdmlkZXJfZGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXltZW50LnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKHBheW1lbnRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRFcnJvcixcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3VwZGF0ZUNvbXBvbmVudFN0YXRlKGNvbXBvbmVudFN0YXRlOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50U3RhdGUgPSBjb21wb25lbnRTdGF0ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF92YWxpZGF0ZUNhcmREYXRhKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBhZHllbnYyID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGNhcmRDb21wb25lbnQgPSBhZHllbnYyLmhhc1ZhdWx0ZWRJbnN0cnVtZW50c1xuICAgICAgICAgICAgPyB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50XG4gICAgICAgICAgICA6IHRoaXMuX3BheW1lbnRDb21wb25lbnQ7XG4gICAgICAgIGNvbnN0IGlzRW1wdHlTdHJpbmcgPSAodmFsdWU6IHN0cmluZykgPT4gdmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIGlmICghY2FyZENvbXBvbmVudD8uY29tcG9uZW50UmVmPy5zaG93VmFsaWRhdGlvbiB8fCAhY2FyZENvbXBvbmVudC5zdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FyZENvbXBvbmVudC5jb21wb25lbnRSZWYuc2hvd1ZhbGlkYXRpb24oKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogRm9yIHNvbWUgcmVhc29uIGFkeWVuIHNkayBkb2Vzbid0IHJldHVybiBpc1ZhbGlkIGZvciBwYXltZW50IG1ldGhvZHMgd2l0aCBzZWxlY3QgZmllbGQgaW4gZm9ybShpRGVhbCBmb3IgZXhhbXBsZSlcbiAgICAgICAgICogc28gd2UgbmVlZCB0byBjaGVjayBzdGF0ZSBpc3N1ZXIgZmllbGRcbiAgICAgICAgICovXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNhcmRDb21wb25lbnQuc3RhdGUpLmxlbmd0aCA9PT0gMCB8fFxuICAgICAgICAgICAgKCFjYXJkQ29tcG9uZW50LnN0YXRlLmlzVmFsaWQgJiYgIWNhcmRDb21wb25lbnQuc3RhdGUuaXNzdWVyKSB8fFxuICAgICAgICAgICAgLy8gcHJldmVudCBlbXB0eSBzZXBhIGZpZWxkcyBmcm9tIGJlaW5nIHNlbnRcbiAgICAgICAgICAgIChjYXJkQ29tcG9uZW50LnByb3BzPy50eXBlID09PSAnc2VwYWRpcmVjdGRlYml0JyAmJlxuICAgICAgICAgICAgICAgIGNhcmRDb21wb25lbnQuc3RhdGUuZGF0YSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC52YWx1ZXMoY2FyZENvbXBvbmVudC5zdGF0ZS5kYXRhKS5zb21lKGlzRW1wdHlTdHJpbmcpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLl9tYXBDYXJkRXJyb3JzKGNhcmRDb21wb25lbnQuc3RhdGUuZXJyb3JzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBDYXJkRXJyb3JzKGNhcmRTdGF0ZUVycm9yczogQ2FyZFN0YXRlRXJyb3JzID0ge30pOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgICAgICBjb25zdCBlcnJvcnM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyA9IHt9O1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGNhcmRTdGF0ZUVycm9ycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBlcnJvcnNba2V5XSA9IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNhcmRTdGF0ZUVycm9yc1trZXldLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBrZXksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBlcnJvcnM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQWNjb3VudFN0YXRlLCBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQWNjb3VudFN0YXRlKHBhcmFtOiBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUpOiBwYXJhbSBpcyBBY2NvdW50U3RhdGUge1xuICAgIGNvbnN0IGJhbmtTdXBwb3J0ZWQgPSBbJ2lkZWFsJywgJ3NlcGFkaXJlY3RkZWJpdCcsICdkaXJlY3RFYmFua2luZycsICdnaXJvcGF5J107XG5cbiAgICByZXR1cm4gYmFua1N1cHBvcnRlZC5pbmRleE9mKChwYXJhbSBhcyBBY2NvdW50U3RhdGUpLmRhdGEucGF5bWVudE1ldGhvZC50eXBlKSAhPT0gLTE7XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIsIGdldFN0eWxlc2hlZXRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IEFkeWVuVjJTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2FkeWVuLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQWR5ZW5WMlBheW1lbnRTdHJhdGVneSBmcm9tICcuL2FkeWVudjItcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8QWR5ZW5WMlBheW1lbnRTdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIHJldHVybiBuZXcgQWR5ZW5WMlBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IEFkeWVuVjJTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCksIGdldFN0eWxlc2hlZXRMb2FkZXIoKSksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAnYWR5ZW52MicgfV0pO1xuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyLCBTdHlsZXNoZWV0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgeyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBBZHllbkNsaWVudCwgQWR5ZW5Db25maWd1cmF0aW9uLCBBZHllblYzSG9zdFdpbmRvdyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWR5ZW5WM1NjcmlwdExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3NjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIF9zdHlsZXNoZWV0TG9hZGVyOiBTdHlsZXNoZWV0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIF93aW5kb3c6IEFkeWVuVjNIb3N0V2luZG93ID0gd2luZG93LFxuICAgICkge31cblxuICAgIGFzeW5jIGxvYWQoY29uZmlndXJhdGlvbjogQWR5ZW5Db25maWd1cmF0aW9uKTogUHJvbWlzZTxBZHllbkNsaWVudD4ge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICB0aGlzLl9zdHlsZXNoZWV0TG9hZGVyLmxvYWRTdHlsZXNoZWV0KFxuICAgICAgICAgICAgICAgIGBodHRwczovL2NoZWNrb3V0c2hvcHBlci0ke1xuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmVudmlyb25tZW50ID8/ICcnXG4gICAgICAgICAgICAgICAgfS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay81LjcxLjEvYWR5ZW4uY3NzYCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByZXBlbmQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlZ3JpdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NoYTM4NC01TXZCNFJuenZ2aUEzVkJUNEtZQUJaNEhYTlpHNUxScVJFRWdkNDF4dC9wZi9Rdkttc2oyTzlHdU51eXdSWHg5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyb3Nzb3JpZ2luOiAnYW5vbnltb3VzJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRoaXMuX3NjcmlwdExvYWRlci5sb2FkU2NyaXB0KFxuICAgICAgICAgICAgICAgIGBodHRwczovL2NoZWNrb3V0c2hvcHBlci0ke1xuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmF0aW9uLmVudmlyb25tZW50ID8/ICcnXG4gICAgICAgICAgICAgICAgfS5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL3Nkay81LjcxLjEvYWR5ZW4uanNgLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVncml0eTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hhMzg0LXl2WTJ5Rk5SNFdxSWpQcVA5TXpqSStnSmltbWFKbkF2ajRyTEhLdmdKYmdGRDVmTXVmOHpJSnJGSk9XOExoaGYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Jvc3NvcmlnaW46ICdhbm9ueW1vdXMnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApLFxuICAgICAgICBdKTtcblxuICAgICAgICBpZiAoIXRoaXMuX3dpbmRvdy5BZHllbkNoZWNrb3V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gYXdhaXQgdGhpcy5fd2luZG93LkFkeWVuQ2hlY2tvdXQoY29uZmlndXJhdGlvbik7XG5cbiAgICAgICAgcmV0dXJuIGNoZWNrb3V0O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFkeWVuQWN0aW9uLFxuICAgIEFkeWVuQWRkaXRpb25hbEFjdGlvbixcbiAgICBBZHllbkFkZGl0aW9uYWxBY3Rpb25TdGF0ZSxcbiAgICBBZHllbkNsaWVudCxcbiAgICBBZHllbkNvbXBvbmVudCxcbiAgICBBZHllbkNvbXBvbmVudEV2ZW50U3RhdGUsXG4gICAgQWR5ZW5Db21wb25lbnRUeXBlLFxuICAgIEFkeWVuRXJyb3IsXG4gICAgQWR5ZW5QYXltZW50TWV0aG9kVHlwZSxcbiAgICBBZHllblBsYWNlaG9sZGVyRGF0YSxcbiAgICBBZHllblYzQWN0aW9uVHlwZSxcbiAgICBBZHllblYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIEFkeWVuVjNQYXltZW50TWV0aG9kSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEFkeWVuVjNTY3JpcHRMb2FkZXIsXG4gICAgQ2FyZFN0YXRlRXJyb3JzLFxuICAgIGlzQm9sZXRvU3RhdGUsXG4gICAgaXNDYXJkU3RhdGUsXG4gICAgV2l0aEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYWR5ZW4tdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBCaWxsaW5nQWRkcmVzcyxcbiAgICBnZXRCcm93c2VySW5mbyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzUmVxdWVzdEVycm9yLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3IsXG4gICAgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBZHllbnYzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIF9hZHllbkNsaWVudD86IEFkeWVuQ2xpZW50O1xuICAgIHByaXZhdGUgX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQ/OiBBZHllbkNvbXBvbmVudDtcbiAgICBwcml2YXRlIF9jb21wb25lbnRTdGF0ZT86IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZTtcbiAgICBwcml2YXRlIF9wYXltZW50Q29tcG9uZW50PzogQWR5ZW5Db21wb25lbnQ7XG4gICAgcHJpdmF0ZSBfcGF5bWVudEluaXRpYWxpemVPcHRpb25zPzogQWR5ZW5WM1BheW1lbnRJbml0aWFsaXplT3B0aW9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF9zY3JpcHRMb2FkZXI6IEFkeWVuVjNTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEFkeWVuVjNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYWR5ZW52MyB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIWFkeWVudjMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5hZHllbnYzXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudEluaXRpYWxpemVPcHRpb25zID0gYWR5ZW52MztcblxuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxBZHllblYzUGF5bWVudE1ldGhvZEluaXRpYWxpemF0aW9uRGF0YT4ob3B0aW9ucy5tZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgZW52aXJvbm1lbnQsIGNsaWVudEtleSwgcGF5bWVudE1ldGhvZHNSZXNwb25zZSwgaW5zdGFsbG1lbnRPcHRpb25zIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgdGhpcy5fYWR5ZW5DbGllbnQgPSBhd2FpdCB0aGlzLl9zY3JpcHRMb2FkZXIubG9hZCh7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgICBrbGFybmE6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2xhcm5hX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlS2xhcm5hV2lkZ2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAga2xhcm5hX3BheW5vdzoge1xuICAgICAgICAgICAgICAgICAgICB1c2VLbGFybmFXaWRnZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4oaW5zdGFsbG1lbnRPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YWxsbWVudE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93SW5zdGFsbG1lbnRBbW91bnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmluc3RhbGxtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5fZ2V0TG9jYWxlKCksXG4gICAgICAgICAgICBjbGllbnRLZXksXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kc1Jlc3BvbnNlLFxuICAgICAgICAgICAgc2hvd1BheUJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBlczogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1BUic6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtRVMnOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLU1YJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgICAgICdlcy1DTCc6IHsgJ2NyZWRpdENhcmQuZXhwaXJ5RGF0ZUZpZWxkLnRpdGxlJzogJ0ZlY2hhIGRlIGNhZHVjaWRhZCcgfSxcbiAgICAgICAgICAgICAgICAnZXMtQ08nOiB7ICdjcmVkaXRDYXJkLmV4cGlyeURhdGVGaWVsZC50aXRsZSc6ICdGZWNoYSBkZSBjYWR1Y2lkYWQnIH0sXG4gICAgICAgICAgICAgICAgJ2VzLVBFJzogeyAnY3JlZGl0Q2FyZC5leHBpcnlEYXRlRmllbGQudGl0bGUnOiAnRmVjaGEgZGUgY2FkdWNpZGFkJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50UGF5bWVudENvbXBvbmVudChwYXltZW50TWV0aG9kKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkIHx8XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gQWR5ZW5QYXltZW50TWV0aG9kVHlwZS5CYW5jb250YWN0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGF3YWl0IHRoaXMuX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHBheW1lbnQucGF5bWVudERhdGE7XG5cbiAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID0gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnREYXRhXG4gICAgICAgICAgICA6IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IGZhbHNlLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiBmYWxzZSB9O1xuXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQ2FyZERhdGEoKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkID09PSAna2xhcm5hJyB8fFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCA9PT0gJ2tsYXJuYV9hY2NvdW50JyB8fFxuICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCA9PT0gJ2tsYXJuYV9wYXlub3cnXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudD8uc3VibWl0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBjb21wb25lbnRTdGF0ZSA9IHRoaXMuX2NvbXBvbmVudFN0YXRlIHx8IHtcbiAgICAgICAgICAgIGRhdGE6IHsgcGF5bWVudE1ldGhvZDogeyB0eXBlOiBwYXltZW50Lm1ldGhvZElkIH0gfSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAocGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGxldCBiaWdwYXlUb2tlbiA9IHt9O1xuXG4gICAgICAgICAgICBpZiAoaXNDYXJkU3RhdGUoY29tcG9uZW50U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRDYXJkTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRTZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZEV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRFeHBpcnlZZWFyLFxuICAgICAgICAgICAgICAgIH0gPSBjb21wb25lbnRTdGF0ZS5kYXRhLnBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgY3JlZGl0X2NhcmRfbnVtYmVyX2NvbmZpcm1hdGlvbjogZW5jcnlwdGVkQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X21vbnRoOiBlbmNyeXB0ZWRFeHBpcnlNb250aCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJ5X3llYXI6IGVuY3J5cHRlZEV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl92YWx1ZTogZW5jcnlwdGVkU2VjdXJpdHlDb2RlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uYmlncGF5VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJvd3Nlcl9pbmZvOiBnZXRCcm93c2VySW5mbygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcGF5bWVudFRva2VuID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgLi4uY29tcG9uZW50U3RhdGUuZGF0YS5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgdHlwZTogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgIG9yaWdpbjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHBheW1lbnQubWV0aG9kSWQgPT09ICdib2xldG9iYW5jYXJpbycgJiYgaXNCb2xldG9TdGF0ZShjb21wb25lbnRTdGF0ZSkpIHtcbiAgICAgICAgICAgIHBheW1lbnRUb2tlbiA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBzb2NpYWxTZWN1cml0eU51bWJlcjogY29tcG9uZW50U3RhdGUuZGF0YS5zb2NpYWxTZWN1cml0eU51bWJlcixcbiAgICAgICAgICAgICAgICAuLi5jb21wb25lbnRTdGF0ZS5kYXRhLnNob3BwZXJOYW1lLFxuICAgICAgICAgICAgICAgIHR5cGU6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVkaXRfY2FyZF90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGlzQ2FyZFN0YXRlKGNvbXBvbmVudFN0YXRlKSAmJiBjb21wb25lbnRTdGF0ZS5kYXRhLmluc3RhbGxtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbGxtZW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29tcG9uZW50U3RhdGUuZGF0YS5pbnN0YWxsbWVudHMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYW46IGNvbXBvbmVudFN0YXRlLmRhdGEuaW5zdGFsbG1lbnRzLnBsYW4gfHwgJ3JlZ3VsYXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyX2luZm86IGdldEJyb3dzZXJJbmZvKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IHNob3VsZFNhdmVJbnN0cnVtZW50IHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50U3RhdGUgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuX3BheW1lbnRDb21wb25lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRDb21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgdGhpcy5fcGF5bWVudENvbXBvbmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGU6IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSkge1xuICAgICAgICB0aGlzLl9jb21wb25lbnRTdGF0ZSA9IGNvbXBvbmVudFN0YXRlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldExvY2FsZSgpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBsb2NhbGUgPSB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0TG9jYWxlKCk7XG5cbiAgICAgICAgaWYgKGxvY2FsZSAmJiBsb2NhbGUuc3Vic3RyaW5nKDAsIDIpID09PSAnZXMnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2VzJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2NhbGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QWR5ZW5DbGllbnQoKTogQWR5ZW5DbGllbnQge1xuICAgICAgICBpZiAoIXRoaXMuX2FkeWVuQ2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkeWVuQ2xpZW50O1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpOiBBZHllblYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zIHtcbiAgICAgICAgaWYgKCF0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnXCJvcHRpb25zLmFkeWVudjNcIiBhcmd1bWVudCB3YXMgbm90IHByb3ZpZGVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9wYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlQWN0aW9uKGFkZGl0aW9uYWxBY3Rpb246IEFkeWVuQWRkaXRpb25hbEFjdGlvbik6IFByb21pc2U8UGF5bWVudD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsQWN0aW9uT3B0aW9ucyB9ID0gdGhpcy5fZ2V0UGF5bWVudEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgICAgICBjb25zdCB7IG9uQmVmb3JlTG9hZCwgY29udGFpbmVySWQsIG9uTG9hZCwgb25Db21wbGV0ZSwgd2lkZ2V0U2l6ZSwgb25BY3Rpb25IYW5kbGVkIH0gPVxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25PcHRpb25zO1xuICAgICAgICAgICAgY29uc3QgYWR5ZW5BY3Rpb246IEFkeWVuQWN0aW9uID0gSlNPTi5wYXJzZShhZGRpdGlvbmFsQWN0aW9uLmFjdGlvbik7XG5cbiAgICAgICAgICAgIGNvbnN0IGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQgPSB0aGlzLl9nZXRBZHllbkNsaWVudCgpLmNyZWF0ZUZyb21BY3Rpb24oYWR5ZW5BY3Rpb24sIHtcbiAgICAgICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQ6IChhZGRpdGlvbmFsQWN0aW9uU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgb25BY3Rpb25IYW5kbGVkICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygb25BY3Rpb25IYW5kbGVkID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uU3RhdGUuY29tcG9uZW50VHlwZSAhPT0gJzNEUzJGaW5nZXJwcmludCdcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25BZGRpdGlvbmFsRGV0YWlsczogKGFkZGl0aW9uYWxBY3Rpb25TdGF0ZTogQWR5ZW5BZGRpdGlvbmFsQWN0aW9uU3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RJZDogYWR5ZW5BY3Rpb24ucGF5bWVudE1ldGhvZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbmNlOiBKU09OLnN0cmluZ2lmeShhZGRpdGlvbmFsQWN0aW9uU3RhdGUuZGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNoYWxsZW5nZVdpbmRvd1NpemU6IHdpZGdldFNpemUgfHwgJzA1JyxcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZXJyb3I6IEFkeWVuRXJyb3IpID0+IHJlamVjdChlcnJvciksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG9uQmVmb3JlTG9hZCAmJiB0eXBlb2Ygb25CZWZvcmVMb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkKFxuICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYzQWN0aW9uVHlwZS5UaHJlZURTMiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW5BY3Rpb24udHlwZSA9PT0gQWR5ZW5WM0FjdGlvblR5cGUuUVJDb2RlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBhZHllbkFjdGlvbi50eXBlID09PSBBZHllblYzQWN0aW9uVHlwZS5TZGssXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fbW91bnRFbGVtZW50KGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQsIGNvbnRhaW5lcklkKTtcblxuICAgICAgICAgICAgaWYgKG9uTG9hZCAmJiB0eXBlb2Ygb25Mb2FkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Mb2FkKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKSk7XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQudW5tb3VudCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBBZHllblBsYWNlaG9sZGVyRGF0YShcbiAgICAgICAgYmlsbGluZ0FkZHJlc3M/OiBCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgcHJlZmlsbENhcmRIb2xkZXJOYW1lPzogYm9vbGVhbixcbiAgICApOiBBZHllblBsYWNlaG9sZGVyRGF0YSB7XG4gICAgICAgIGlmICghYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgYWRkcmVzczE6IHN0cmVldCxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBob3VzZU51bWJlck9yTmFtZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICBjaXR5LFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogc3RhdGVPclByb3ZpbmNlLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgIH0gPSBiaWxsaW5nQWRkcmVzcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaG9sZGVyTmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAnJyxcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gZmlyc3ROYW1lIDogJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogcHJlZmlsbENhcmRIb2xkZXJOYW1lID8gbGFzdE5hbWUgOiAnJyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgc3RyZWV0LFxuICAgICAgICAgICAgICAgIGhvdXNlTnVtYmVyT3JOYW1lLFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2UsXG4gICAgICAgICAgICAgICAgY291bnRyeSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRDYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KCk6IFByb21pc2U8QWR5ZW5Db21wb25lbnQ+IHtcbiAgICAgICAgY29uc3QgYWR5ZW52MyA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG4gICAgICAgIGxldCBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKGFkeWVudjMuY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShBZHllbkNvbXBvbmVudFR5cGUuU2VjdXJlZEZpZWxkcywge1xuICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYWR5ZW52My5vcHRpb25zPy5zdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmV0Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5hZHllbnYzLm9wdGlvbnM/LnN0eWxlcz8ucGxhY2Vob2xkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I6ICh2YWxpZGF0ZVN0YXRlKSA9PiBhZHllbnYzLnZhbGlkYXRlQ2FyZEZpZWxkcyh2YWxpZGF0ZVN0YXRlKSxcbiAgICAgICAgICAgICAgICAgICAgb25GaWVsZFZhbGlkOiAodmFsaWRhdGVTdGF0ZSkgPT4gYWR5ZW52My52YWxpZGF0ZUNhcmRGaWVsZHModmFsaWRhdGVTdGF0ZSksXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3VudEVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYWR5ZW52My5jYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbW91bnRQYXltZW50Q29tcG9uZW50KHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2QpOiBQcm9taXNlPEFkeWVuQ29tcG9uZW50PiB7XG4gICAgICAgIGxldCBwYXltZW50Q29tcG9uZW50OiBBZHllbkNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgYWR5ZW52MyA9IHRoaXMuX2dldFBheW1lbnRJbml0aWFsaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBhZHllbkNsaWVudCA9IHRoaXMuX2dldEFkeWVuQ2xpZW50KCk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcHJlZmlsbENhcmRIb2xkZXJOYW1lIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICAgICAgcGF5bWVudENvbXBvbmVudCA9IGFkeWVuQ2xpZW50LmNyZWF0ZShwYXltZW50TWV0aG9kLm1ldGhvZCwge1xuICAgICAgICAgICAgICAgIC4uLmFkeWVudjMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBzaG93QnJhbmRzVW5kZXJDYXJkTnVtYmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzaG93RW1haWxBZGRyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGNvbXBvbmVudFN0YXRlKSA9PiB0aGlzLl91cGRhdGVDb21wb25lbnRTdGF0ZShjb21wb25lbnRTdGF0ZSksXG4gICAgICAgICAgICAgICAgb25TdWJtaXQ6IChjb21wb25lbnRTdGF0ZSkgPT4gdGhpcy5fdXBkYXRlQ29tcG9uZW50U3RhdGUoY29tcG9uZW50U3RhdGUpLFxuICAgICAgICAgICAgICAgIC4uLihiaWxsaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgICAgICA/IHsgZGF0YTogdGhpcy5fbWFwQWR5ZW5QbGFjZWhvbGRlckRhdGEoYmlsbGluZ0FkZHJlc3MsIHByZWZpbGxDYXJkSG9sZGVyTmFtZSkgfVxuICAgICAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdW50RWxlbWVudChwYXltZW50Q29tcG9uZW50LCBhZHllbnYzLmNvbnRhaW5lcklkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKHBheW1lbnRDb21wb25lbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudD86IGJvb2xlYW4sXG4gICAgICAgIHBheW1lbnRUb2tlbj86IHN0cmluZyxcbiAgICAgICAgYmlncGF5VG9rZW4/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPixcbiAgICApOiBQcm9taXNlPFBheW1lbnRJbnRlZ3JhdGlvblNlbGVjdG9ycyB8IHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXNvbWUoZXJyb3IuYm9keS5lcnJvcnMsIHsgY29kZTogJ2FkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkJyB9KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHRoaXMuX2hhbmRsZUFjdGlvbihlcnJvci5ib2R5LnByb3ZpZGVyX2RhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiYXNlUGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudC5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgdG9rZW5EYXRhID1cbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ICYmICFzaG91bGRTYXZlSW5zdHJ1bWVudFxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBwYXltZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpZ3BheV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmJpZ3BheVRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBwYXltZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5wYXltZW50LFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmJhc2VQYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgLi4udG9rZW5EYXRhLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAocGF5bWVudEVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudEVycm9yLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgcGF5bWVudFRva2VuLFxuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3ZhbGlkYXRlQ2FyZERhdGEoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGFkeWVudjMgPSB0aGlzLl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgY2FyZENvbXBvbmVudCA9IGFkeWVudjMuaGFzVmF1bHRlZEluc3RydW1lbnRzXG4gICAgICAgICAgICA/IHRoaXMuX2NhcmRWZXJpZmljYXRpb25Db21wb25lbnRcbiAgICAgICAgICAgIDogdGhpcy5fcGF5bWVudENvbXBvbmVudDtcblxuICAgICAgICBpZiAoIWNhcmRDb21wb25lbnQ/LmNvbXBvbmVudFJlZj8uc2hvd1ZhbGlkYXRpb24gfHwgIWNhcmRDb21wb25lbnQuc3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhcmRDb21wb25lbnQuY29tcG9uZW50UmVmLnNob3dWYWxpZGF0aW9uKCk7XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNhcmRDb21wb25lbnQuc3RhdGUpLmxlbmd0aCA9PT0gMCB8fCAhY2FyZENvbXBvbmVudC5zdGF0ZS5pc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEludmFsaWRGb3JtRXJyb3IodGhpcy5fbWFwQ2FyZEVycm9ycyhjYXJkQ29tcG9uZW50LnN0YXRlLmVycm9ycykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfbWFwQ2FyZEVycm9ycyhjYXJkU3RhdGVFcnJvcnM6IENhcmRTdGF0ZUVycm9ycyA9IHt9KTogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMgPSB7fTtcblxuICAgICAgICBPYmplY3Qua2V5cyhjYXJkU3RhdGVFcnJvcnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgZXJyb3JzW2tleV0gPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjYXJkU3RhdGVFcnJvcnNba2V5XSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZToga2V5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21vdW50RWxlbWVudChhZHllbkNvbXBvbmVudDogQWR5ZW5Db21wb25lbnQsIGNvbnRhaW5lcklkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJJZCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFkeWVuQ29tcG9uZW50Lm1vdW50KGAjJHtjb250YWluZXJJZH1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICBpbnN0cnVtZW50OiB1bmtub3duLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgaW5zdHJ1bWVudCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5zdHJ1bWVudCAhPT0gbnVsbCAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSwgQm9sZXRvU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQm9sZXRvU3RhdGUocGFyYW06IEFkeWVuQ29tcG9uZW50RXZlbnRTdGF0ZSk6IHBhcmFtIGlzIEJvbGV0b1N0YXRlIHtcbiAgICByZXR1cm4gKFxuICAgICAgICAodHlwZW9mIHBhcmFtID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgKHBhcmFtIGFzIEJvbGV0b1N0YXRlKS5kYXRhLnNvY2lhbFNlY3VyaXR5TnVtYmVyKSA9PT1cbiAgICAgICAgICAgICdzdHJpbmcnICYmXG4gICAgICAgIHR5cGVvZiAocGFyYW0gYXMgQm9sZXRvU3RhdGUpLmRhdGEuc2hvcHBlck5hbWU/LmZpcnN0TmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgdHlwZW9mIChwYXJhbSBhcyBCb2xldG9TdGF0ZSkuZGF0YS5zaG9wcGVyTmFtZT8ubGFzdE5hbWUgPT09ICdzdHJpbmcnXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciwgZ2V0U3R5bGVzaGVldExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgQWR5ZW5WM1NjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYWR5ZW4tdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBBZHllblYzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vYWR5ZW52My1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQWR5ZW5WM1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxBZHllblYzUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBBZHllblYzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQWR5ZW5WM1NjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSwgZ2V0U3R5bGVzaGVldExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3ksIFt7IGdhdGV3YXk6ICdhZHllbnYzJyB9XSk7XG4iXSwibmFtZXMiOlsiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIkFkeWVuVjNBY3Rpb25UeXBlIiwiQWR5ZW5WMkFjdGlvblR5cGUiLCJBZHllbkNvbXBvbmVudFR5cGUiLCJBZHllblBheW1lbnRNZXRob2RUeXBlIiwiSFRUUE1ldGhvZCIsIlJlc3VsdENvZGUiLCJBZHllbkNhcmRGaWVsZHMiLCJOb3RJbml0aWFsaXplZEVycm9yVHlwZSIsIkFkeWVuVjJTY3JpcHRMb2FkZXIiLCJfc2NyaXB0TG9hZGVyIiwiX3N0eWxlc2hlZXRMb2FkZXIiLCJfd2luZG93Iiwid2luZG93IiwibG9hZCIsImNvbmZpZ3VyYXRpb24iLCJQcm9taXNlIiwiYWxsIiwibG9hZFN0eWxlc2hlZXQiLCJlbnZpcm9ubWVudCIsInByZXBlbmQiLCJhdHRyaWJ1dGVzIiwiaW50ZWdyaXR5IiwiY3Jvc3NvcmlnaW4iLCJsb2FkU2NyaXB0IiwiYXN5bmMiLCJBZHllbkNoZWNrb3V0IiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsImFzc2lnbiIsImlzQ2FyZFN0YXRlIiwicGFyYW0iLCJkYXRhIiwicGF5bWVudE1ldGhvZCIsImVuY3J5cHRlZFNlY3VyaXR5Q29kZSIsImVuY3J5cHRlZEV4cGlyeU1vbnRoIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsIk5vdEluaXRpYWxpemVkRXJyb3IiLCJzdWJ0eXBlIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiZ2V0RXJyb3JNZXNzYWdlIiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsImluc3RydW1lbnQiLCJCb29sZWFuIiwiaW5zdHJ1bWVudElkIiwiZ2V0QnJvd3NlckluZm8iLCJuYXZpZ2F0b3IiLCJsYW5ndWFnZSIsInVzZXJMYW5ndWFnZSIsImNvbG9yX2RlcHRoIiwic2NyZWVuIiwiY29sb3JEZXB0aCIsImphdmFfZW5hYmxlZCIsImphdmFFbmFibGVkIiwic2NyZWVuX2hlaWdodCIsImhlaWdodCIsInNjcmVlbl93aWR0aCIsIndpZHRoIiwidGltZV96b25lX29mZnNldCIsIkRhdGUiLCJnZXRUaW1lem9uZU9mZnNldCIsInRvU3RyaW5nIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yIiwiZXJyb3IiLCJQYXltZW50SW52YWxpZEZvcm1FcnJvciIsImRldGFpbHMiLCJBZHllblYyUGF5bWVudFN0cmF0ZWd5IiwiX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJpbml0aWFsaXplIiwib3B0aW9ucyIsImFkeWVudjIiLCJfcGF5bWVudEluaXRpYWxpemVPcHRpb25zIiwiZ2V0U3RhdGUiLCJnZXRQYXltZW50TWV0aG9kT3JUaHJvdyIsIm1ldGhvZElkIiwib3JpZ2luS2V5IiwiY2xpZW50S2V5IiwicGF5bWVudE1ldGhvZHNSZXNwb25zZSIsImluaXRpYWxpemF0aW9uRGF0YSIsImNsaWVudFNpZGVBdXRoZW50aWNhdGlvbiIsImtleSIsInZhbHVlIiwiX2FkeWVuQ2xpZW50IiwibG9jYWxlIiwiZ2V0TG9jYWxlIiwidHJhbnNsYXRpb25zIiwiZXMiLCJfcGF5bWVudENvbXBvbmVudCIsIl9tb3VudFBheW1lbnRDb21wb25lbnQiLCJtZXRob2QiLCJDcmVkaXRDYXJkIiwiQmFuY29udGFjdCIsIl9jYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50IiwiX21vdW50Q2FyZFZlcmlmaWNhdGlvbkNvbXBvbmVudCIsInJlc29sdmUiLCJleGVjdXRlIiwicGF5bG9hZCIsInBheW1lbnQiLCJvcmRlciIsInBheW1lbnREYXRhIiwic2hvdWxkU2F2ZUluc3RydW1lbnQiLCJzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IiwicmVqZWN0IiwiX3ZhbGlkYXRlQ2FyZERhdGEiLCJzdWJtaXRPcmRlciIsImNvbXBvbmVudFN0YXRlIiwiX2NvbXBvbmVudFN0YXRlIiwiYmlncGF5VG9rZW4iLCJlbmNyeXB0ZWRDYXJkTnVtYmVyIiwiZW5jcnlwdGVkRXhwaXJ5WWVhciIsImNyZWRpdF9jYXJkX251bWJlcl9jb25maXJtYXRpb24iLCJleHBpcnlfbW9udGgiLCJleHBpcnlfeWVhciIsInZlcmlmaWNhdGlvbl92YWx1ZSIsImluZGV4T2YiLCJzdWJtaXRQYXltZW50IiwiZm9ybWF0dGVkUGF5bG9hZCIsImJpZ3BheV90b2tlbiIsInRva2VuIiwib3JpZ2luIiwibG9jYXRpb24iLCJicm93c2VyX2luZm8iLCJzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudCIsIl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbiIsImNyZWRpdF9jYXJkX3Rva2VuIiwiSlNPTiIsInN0cmluZ2lmeSIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsImZpbmFsaXplIiwiZGVpbml0aWFsaXplIiwidW5kZWZpbmVkIiwidW5tb3VudCIsIl9nZXRBZHllbkNsaWVudCIsIl9nZXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMiLCJfZ2V0VGhyZWVEUzJDaGFsbGVuZ2VXaWRnZXRTaXplIiwiYWRkaXRpb25hbEFjdGlvbk9wdGlvbnMiLCJ0aHJlZURTMk9wdGlvbnMiLCJ3aWRnZXRTaXplIiwiX2hhbmRsZUFjdGlvbiIsImFkZGl0aW9uYWxBY3Rpb24iLCJ0aHJlZURTMkNvbnRhaW5lcklkIiwib25CZWZvcmVMb2FkIiwiY29udGFpbmVySWQiLCJvbkxvYWQiLCJvbkNvbXBsZXRlIiwiYWR5ZW5BY3Rpb24iLCJwYXJzZSIsImFjdGlvbiIsImFkZGl0aW9uYWxBY3Rpb25Db21wb25lbnQiLCJjcmVhdGVGcm9tQWN0aW9uIiwib25BZGRpdGlvbmFsRGV0YWlscyIsImFkZGl0aW9uYWxBY3Rpb25TdGF0ZSIsInBheW1lbnRQYXlsb2FkIiwicGF5bWVudE1ldGhvZFR5cGUiLCJub25jZSIsInNpemUiLCJvbkVycm9yIiwiVGhyZWVEUzJDaGFsbGVuZ2UiLCJRUkNvZGUiLCJtb3VudCIsIl9tYXBBZHllblBsYWNlaG9sZGVyRGF0YSIsImJpbGxpbmdBZGRyZXNzIiwicHJlZmlsbENhcmRIb2xkZXJOYW1lIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJhZGRyZXNzMSIsInN0cmVldCIsImFkZHJlc3MyIiwiaG91c2VOdW1iZXJPck5hbWUiLCJwb3N0YWxDb2RlIiwiY2l0eSIsInN0YXRlT3JQcm92aW5jZUNvZGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJjb3VudHJ5Q29kZSIsImNvdW50cnkiLCJob2xkZXJOYW1lIiwiYWR5ZW5DbGllbnQiLCJjYXJkVmVyaWZpY2F0aW9uQ29tcG9uZW50IiwiY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkIiwiY3JlYXRlIiwiU2VjdXJlZEZpZWxkcyIsInN0eWxlcyIsInBsYWNlaG9sZGVyIiwiY29sb3IiLCJjYXJldENvbG9yIiwib25DaGFuZ2UiLCJfdXBkYXRlQ29tcG9uZW50U3RhdGUiLCJ2YWxpZGF0ZVN0YXRlIiwidmFsaWRhdGVDYXJkRmllbGRzIiwib25GaWVsZFZhbGlkIiwicGF5bWVudENvbXBvbmVudCIsIkFDSCIsImdldEJpbGxpbmdBZGRyZXNzIiwiSURFQUwiLCJTRVBBIiwiaGFzVmF1bHRlZEluc3RydW1lbnRzIiwiQWxpUGF5IiwiR2lyb1BheSIsIlNvZm9ydCIsIktsYXJuYSIsIktsYXJuYVBheU5vdyIsIktsYXJuYUFjY291bnQiLCJWaXBwcyIsIldlQ2hhdFBheVFSIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJjb2RlIiwicHJvdmlkZXJfZGF0YSIsInBheW1lbnRFcnJvciIsImNhcmRDb21wb25lbnQiLCJjb21wb25lbnRSZWYiLCJzaG93VmFsaWRhdGlvbiIsInN0YXRlIiwia2V5cyIsImxlbmd0aCIsImlzVmFsaWQiLCJpc3N1ZXIiLCJwcm9wcyIsInZhbHVlcyIsInRyaW0iLCJfbWFwQ2FyZEVycm9ycyIsImNhcmRTdGF0ZUVycm9ycyIsImZvckVhY2giLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwiZ2V0U2NyaXB0TG9hZGVyIiwiZ2V0U3R5bGVzaGVldExvYWRlciIsImdhdGV3YXkiLCJBZHllblYzU2NyaXB0TG9hZGVyIiwiQWR5ZW52M1BheW1lbnRTdHJhdGVneSIsImFkeWVudjMiLCJpbnN0YWxsbWVudE9wdGlvbnMiLCJwYXltZW50TWV0aG9kc0NvbmZpZ3VyYXRpb24iLCJrbGFybmEiLCJ1c2VLbGFybmFXaWRnZXQiLCJrbGFybmFfYWNjb3VudCIsImtsYXJuYV9wYXlub3ciLCJjYXJkIiwic2hvd0luc3RhbGxtZW50QW1vdW50cyIsIl9nZXRMb2NhbGUiLCJzaG93UGF5QnV0dG9uIiwic3VibWl0IiwicGF5bWVudFRva2VuIiwic29jaWFsU2VjdXJpdHlOdW1iZXIiLCJzaG9wcGVyTmFtZSIsImlzQm9sZXRvU3RhdGUiLCJpbnN0YWxsbWVudHMiLCJwbGFuIiwic3Vic3RyaW5nIiwib25BY3Rpb25IYW5kbGVkIiwiY29tcG9uZW50VHlwZSIsImNoYWxsZW5nZVdpbmRvd1NpemUiLCJUaHJlZURTMiIsIlNkayIsIl9tb3VudEVsZW1lbnQiLCJzaG93QnJhbmRzVW5kZXJDYXJkTnVtYmVyIiwiYmlsbGluZ0FkZHJlc3NSZXF1aXJlZCIsInNob3dFbWFpbEFkZHJlc3MiLCJvblN1Ym1pdCIsImJhc2VQYXltZW50RGF0YSIsInRva2VuRGF0YSIsImFkeWVuQ29tcG9uZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/adyen.js\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV2CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, language, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null, language === null || language === void 0 ? void 0 : language.translate('payment.instrument_trusted_shipping_address_title_text')),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null), language === null || language === void 0 ? void 0 :\n            language.translate('payment.instrument_trusted_shipping_address_text'))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_number_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_cvv_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate }, language === null || language === void 0 ? void 0 : language.translate('payment.credit_card_expiration_label')),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBTW9DO0FBQ3VDO0FBSTNFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFXRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJBQXFCLEVB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QUNsQztnQkFDRCxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQy9DLENBQ1Q7WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVUsSUFDckMsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLFNBQVMsQ0FBQyxzQ0FBc0MsQ0FBQyxDQUN4RDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkNhcmRWYWxpZGF0aW9uLnRzeD81OTgxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgTGFuZ3VhZ2VTZXJ2aWNlLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgdHlwZSBGaWVsZHNWYWxpZGF0aW9uID0geyBba2V5IGluIEFkeWVuQ2FyZEZpZWxkc10/OiBBZHllblZhbGlkYXRpb25TdGF0ZSB9O1xuXG5lbnVtIEFkeWVuQ2FyZEZpZWxkcyB7XG4gICAgQ2FyZE51bWJlciA9ICdlbmNyeXB0ZWRDYXJkTnVtYmVyJyxcbiAgICBTZWN1cml0eUNvZGUgPSAnZW5jcnlwdGVkU2VjdXJpdHlDb2RlJyxcbiAgICBFeHBpcnlEYXRlID0gJ2VuY3J5cHRlZEV4cGlyeURhdGUnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkeWVuVjJDYXJkVmFsaWRhdGlvblByb3BzIHtcbiAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD86IHN0cmluZztcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDtcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlPzogQWR5ZW5WYWxpZGF0aW9uU3RhdGU7XG4gICAgc2VsZWN0ZWRJbnN0cnVtZW50PzogQ2FyZEluc3RydW1lbnQ7XG4gICAgbGFuZ3VhZ2U/OiBMYW5ndWFnZVNlcnZpY2U7XG59XG5cbmNvbnN0IGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUgPSAoe1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBtZXRob2QsXG59OiB7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xufSkgPT4ge1xuICAgIGNvbnN0IHZhbGlkYXRpb25TdGF0ZTogRmllbGRzVmFsaWRhdGlvbiA9IHt9O1xuXG4gICAgaWYgKHNob3VsZFNob3dOdW1iZXJGaWVsZCkge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICBpZiAobWV0aG9kID09PSAnc2NoZW1lJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdiY21jJykge1xuICAgICAgICB2YWxpZGF0aW9uU3RhdGVbQWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGVdID0geyB2YWxpZDogZmFsc2UgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRhdGlvblN0YXRlO1xufTtcblxuY29uc3QgaXNGaWVsZEludmFsaWQgPSAoZmllbGRLZXk6IEFkeWVuQ2FyZEZpZWxkcywgZmllbGRzVmFsaWRhdGlvbjogRmllbGRzVmFsaWRhdGlvbik6IGJvb2xlYW4gPT5cbiAgICAhIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldICYmICFmaWVsZHNWYWxpZGF0aW9uW2ZpZWxkS2V5XS52YWxpZDtcblxuY29uc3QgQWR5ZW5WMkNhcmRWYWxpZGF0aW9uOiBGdW5jdGlvbkNvbXBvbmVudDxBZHllblYyQ2FyZFZhbGlkYXRpb25Qcm9wcz4gPSAoe1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkLFxuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZCxcbiAgICBzZWxlY3RlZEluc3RydW1lbnQsXG4gICAgcGF5bWVudE1ldGhvZCxcbiAgICBjYXJkVmFsaWRhdGlvblN0YXRlLFxuICAgIGxhbmd1YWdlLFxufSkgPT4ge1xuICAgIGNvbnN0IFtmaWVsZHNWYWxpZGF0aW9uLCBzZXRGaWVsZHNWYWxpZGF0aW9uXSA9IHVzZVN0YXRlPEZpZWxkc1ZhbGlkYXRpb24+KFxuICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIWNhcmRWYWxpZGF0aW9uU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlICYmXG4gICAgICAgICAgICAoIWZpZWxkc1ZhbGlkYXRpb25bY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGVdIHx8XG4gICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0/LnZhbGlkICE9PVxuICAgICAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlLnZhbGlkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZSA9PT0gQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyXTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUuZW5kRGlnaXRzICE9PSBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUsIHZhbGlkOiBmYWxzZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7IC4uLmNhcmRWYWxpZGF0aW9uU3RhdGUgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmZpZWxkc1ZhbGlkYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIFtjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV06IGNhcmRWYWxpZGF0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtjYXJkVmFsaWRhdGlvblN0YXRlLCBzZXRGaWVsZHNWYWxpZGF0aW9uLCBzZWxlY3RlZEluc3RydW1lbnQ/Lmxhc3Q0XSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbikge1xuICAgICAgICAgICAgc2V0RmllbGRzVmFsaWRhdGlvbihcbiAgICAgICAgICAgICAgICBnZXRJbml0aWFsVmFsaWRhdGlvblN0YXRlKHsgc2hvdWxkU2hvd051bWJlckZpZWxkLCBtZXRob2Q6IHBheW1lbnRNZXRob2QubWV0aG9kIH0pLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sIFtzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuLCBwYXltZW50TWV0aG9kLm1ldGhvZCwgc2hvdWxkU2hvd051bWJlckZpZWxkXSk7XG5cbiAgICBjb25zdCBzaG93VmFsaWRhdGlvbkljb24gPSAoa2V5OiBBZHllbkNhcmRGaWVsZHMpID0+XG4gICAgICAgIGlzRmllbGRJbnZhbGlkKGtleSwgZmllbGRzVmFsaWRhdGlvbikgJiYgKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24gYWR5ZW4tY2hlY2tvdXQtaW5wdXRfX2lubGluZS12YWxpZGF0aW9uLS1pbnZhbGlkXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyB0cmFuc2Zvcm06ICdub25lJywgcmlnaHQ6ICcyMHB4JyB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgYWx0PVwiYWR5ZW4tY2hlY2tvdXQtaWNvblwiXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0X19pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgc3JjPVwiaHR0cHM6Ly9jaGVja291dHNob3BwZXItdGVzdC5hZHllbi5jb20vY2hlY2tvdXRzaG9wcGVyL2ltYWdlcy9jb21wb25lbnRzL2ZpZWxkX2Vycm9yLnN2Z1wiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9zdHJvbmc+XG5cbiAgICAgICAgICAgICAgICAgICAgPGJyIC8+XG5cbiAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dCcpfVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1jY0ZpZWxkc1wiIGlkPXt2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZH0+XG4gICAgICAgICAgICAgICAge3Nob3VsZFNob3dOdW1iZXJGaWVsZCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkLS1jY051bWJlci0taGFzRXhwaXJ5RGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBkaXYgaXMgaGlkaW5nIGJ5IENTUyBiZWNhdXNlIHRoZXJlIGlzIGFuIEFkeWVuIGxpYnJhcnkgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVja291dC1zZGsgd2hpY2ggbW91bnRzIHZlcmlmaWNhdGlvbiBmaWVsZHMgYW5kIGlmIGlzIHJlbW92ZWQgd2l0aCBKUyB0aGlzIG1vdW50aW5nIGV2ZW50IHdpbGwgYmUgdGhyb3duIGFuIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyAnZm9ybS1maWVsZC1jY051bWJlci0taGlkZSc6ICFzaG91bGRTaG93TnVtYmVyRmllbGQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xhbmd1YWdlPy50cmFuc2xhdGUoJ3BheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsJyl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3B0aW1pemVkQ2hlY2tvdXQtZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoYXMtaWNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtd3JhcHBlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhZHllbi1jaGVja291dF9faW5wdXQtLWVycm9yJzogaXNGaWVsZEludmFsaWQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG93VmFsaWRhdGlvbkljb24oQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXIpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuXG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2N2dl9sYWJlbCcpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsYW5ndWFnZT8udHJhbnNsYXRlKCdwYXltZW50LmNyZWRpdF9jYXJkX2V4cGlyYXRpb25fbGFiZWwnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_contexts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/contexts */ \"./packages/contexts/src/checkout/CheckoutContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nconst AdyenV2Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, showAdditionalActionContent, cancelAdditionalActionModalFlow, additionalActionContainerId, onUnhandledError, checkoutService, checkoutState, paymentForm } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"showAdditionalActionContent\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"onUnhandledError\", \"checkoutService\", \"checkoutState\", \"paymentForm\"]);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const { checkoutState: { data: { isPaymentDataRequired }, }, } = (0,_bigcommerce_checkout_contexts__WEBPACK_IMPORTED_MODULE_2__.useCheckout)();\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState);\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_3__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: showAdditionalActionContent, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !showAdditionalActionContent && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { display: 'none' } }))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV2Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNzRTtBQUVUO0FBSUo7QUFJVDtBQUVDO0FBNEJqRCxNQUFNLFdBQVcsR0FBNkQsQ0FBQyxFQWdCOUUsRUFBRSxFQUFFO1FBaEIwRSxFQUMzRSxNQUFNLEVBQ04sV0FBVyxFQUNYLGlCQUFpQixFQUNqQixtQkFBbUIsRUFDbkIsOEJBQThCLEVBQzlCLGtCQUFrQixFQUNsQixRQUFRLEVBQ1IsMkJBQTJCLEVBQzNCLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsZ0JBQWdCLEVBQ2hCLGVBQWUsRUFDZixhQUFhLEVBQ2IsV0FBVyxPQUVkLEVBRE0sSUFBSSxxREFmb0UsaVRBZ0I5RSxDQURVO0lBRVAsTUFBTSxFQUNGLHVCQUF1QixFQUN2QixhQUFhLEVBQ2IsYUFBYSxFQUNiLFNBQVMsRUFDVCxtQkFBbUIsR0FDdEIsR0FBRyxXQUFXLENBQUM7SUFDaEIsTUFBTSxRQUFRLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNsRCxNQUFNLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDO0lBRXhELE1BQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUVwRSxNQUFNLEVBQ0YsYUFBYSxFQUFFLEVBQ1gsSUFBSSxFQUFFLEVBQUUscUJBQXFCLEVBQUUsR0FDbEMsR0FDSixHQUFHLDJFQUFXLEVBQUUsQ0FBQztJQUNsQixNQUFNLFVBQVUsR0FBRyxRQUFRLGFBQVIsUUFBUSx1QkFBUixRQUFRLENBQUUsT0FBTyxDQUFDO0lBQ3JDLE1BQU0sNEJBQTRCLEdBQUcsQ0FBQyxVQUFVLElBQUksT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUM3RixNQUFNLDRCQUE0QixHQUFHLGtGQUFvQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pGLE1BQU0sOEJBQThCLEdBQUcsa0ZBQXNDLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFN0YsT0FBTyxDQUNIO1FBQ0ksMkRBQUMsdUZBQTRCLG9CQUNyQixJQUFJLElBQ1IsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLG1CQUFtQixFQUN4RCxhQUFhLEVBQUUsYUFBYSxFQUM1Qix3QkFBd0IsUUFDeEIsdUJBQXVCLEVBQUUsdUJBQXVCLEVBQ2hELGlCQUFpQixFQUFFLGlCQUFpQixFQUNwQyxXQUFXLEVBQUUsV0FBVyxFQUN4QixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsRUFBRSw0QkFBNEIsRUFDMUQsb0JBQW9CLEVBQUUsb0JBQW9CLEVBQUUsRUFDNUMscUJBQXFCLEVBQUUscUJBQXFCLEVBQUUsRUFDOUMsVUFBVSxFQUFFLENBQUMsVUFBVSxFQUN2QixlQUFlLEVBQUUsZUFBZSxDQUFDLGVBQWUsRUFDaEQsTUFBTSxFQUFFLE1BQU0sRUFDZCxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsYUFBYSxFQUFFLGFBQWEsRUFDNUIsU0FBUyxFQUFFLFNBQVMsRUFDcEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDhCQUE4QixFQUFFLDhCQUE4QixFQUM5RCw0QkFBNEIsUUFDNUIsT0FBTyxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ3hDLGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QztRQUNGLDJEQUFDLGdFQUFLLElBQ0YsdUJBQXVCLEVBQUMsb0JBQW9CLEVBQzVDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxTQUFTLENBQUMscUJBQXFCLENBQUMsRUFDM0QsTUFBTSxFQUFFLDJCQUEyQixFQUNuQyxjQUFjLEVBQUUsK0JBQStCLEVBQy9DLHFCQUFxQixFQUFFLElBQUk7WUFFM0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsMkJBQTJCLElBQUksQ0FDN0Isb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUN2RSxDQUNGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjIvQWR5ZW5WMkZvcm0udHN4P2EyNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyB1c2VDaGVja291dCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9jb250ZXh0cyc7XG5pbXBvcnQge1xuICAgIHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMsXG4gICAgSG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7IHR5cGUgUGF5bWVudE1ldGhvZFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuZXhwb3J0IHR5cGUgQWR5ZW5WMkZvcm1Qcm9wcyA9IE9taXQ8XG4gICAgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMsXG4gICAgfCAnb25TaWduT3V0J1xuICAgIHwgJ2lzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUnXG4gICAgfCAnaW5zdHJ1bWVudHMnXG4gICAgfCAnaXNMb2FkaW5nSW5zdHJ1bWVudHMnXG4gICAgfCAnaXNQYXltZW50RGF0YVJlcXVpcmVkJ1xuICAgIHwgJ2lzU2lnbmVkSW4nXG4gICAgfCAnaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZCdcbiAgICB8ICdpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQnXG4gICAgfCAnbG9hZEluc3RydW1lbnRzJ1xuICAgIHwgJ3NpZ25PdXQnXG4gICAgfCAnZGVpbml0aWFsaXplUGF5bWVudCdcbj4gJiB7XG4gICAgY29udGFpbmVySWQ6IHN0cmluZztcbiAgICBpc0FjY291bnRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZTogYm9vbGVhbjtcbiAgICB2YWxpZGF0ZUluc3RydW1lbnQ6IChcbiAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuLFxuICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4gUmVhY3ROb2RlO1xuICAgIHNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudDogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93OiAoKSA9PiB2b2lkO1xuICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZDogc3RyaW5nO1xufTtcblxuY29uc3QgQWR5ZW5WMkZvcm06IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjJGb3JtUHJvcHMgJiBQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBtZXRob2QsXG4gICAgY29udGFpbmVySWQsXG4gICAgaW5pdGlhbGl6ZVBheW1lbnQsXG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudCxcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUsXG4gICAgdmFsaWRhdGVJbnN0cnVtZW50LFxuICAgIGxhbmd1YWdlLFxuICAgIHNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudCxcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93LFxuICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICBvblVuaGFuZGxlZEVycm9yLFxuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIHBheW1lbnRGb3JtLFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIGhpZGVQYXltZW50U3VibWl0QnV0dG9uLFxuICAgICAgICBkaXNhYmxlU3VibWl0LFxuICAgICAgICBzZXRGaWVsZFZhbHVlLFxuICAgICAgICBzZXRTdWJtaXQsXG4gICAgICAgIHNldFZhbGlkYXRpb25TY2hlbWEsXG4gICAgfSA9IHBheW1lbnRGb3JtO1xuICAgIGNvbnN0IGN1c3RvbWVyID0gY2hlY2tvdXRTdGF0ZS5kYXRhLmdldEN1c3RvbWVyKCk7XG4gICAgY29uc3QgeyBpc0xvYWRpbmdJbnN0cnVtZW50cyB9ID0gY2hlY2tvdXRTdGF0ZS5zdGF0dXNlcztcblxuICAgIGNvbnN0IGluc3RydW1lbnRzID0gY2hlY2tvdXRTdGF0ZS5kYXRhLmdldEluc3RydW1lbnRzKG1ldGhvZCkgfHwgW107XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoZWNrb3V0U3RhdGU6IHtcbiAgICAgICAgICAgIGRhdGE6IHsgaXNQYXltZW50RGF0YVJlcXVpcmVkIH0sXG4gICAgICAgIH0sXG4gICAgfSA9IHVzZUNoZWNrb3V0KCk7XG4gICAgY29uc3QgaXNTaWduZWRJbiA9IGN1c3RvbWVyPy5pc0d1ZXN0O1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudEZlYXR1cmVBdmFpbGFibGUgPSAhaXNTaWduZWRJbiAmJiBCb29sZWFuKG1ldGhvZC5jb25maWcuaXNWYXVsdGluZ0VuYWJsZWQpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQgPSBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSk7XG4gICAgY29uc3QgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkID0gaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IoY2hlY2tvdXRTdGF0ZSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgICAgPEhvc3RlZFdpZGdldFBheW1lbnRDb21wb25lbnRcbiAgICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgICAgICBjb250YWluZXJJZD17Y29udGFpbmVySWR9XG4gICAgICAgICAgICAgICAgZGVpbml0aWFsaXplUGF5bWVudD17Y2hlY2tvdXRTZXJ2aWNlLmRlaW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgZGlzYWJsZVN1Ym1pdD17ZGlzYWJsZVN1Ym1pdH1cbiAgICAgICAgICAgICAgICBoaWRlQ29udGVudFdoZW5TaWduZWRPdXRcbiAgICAgICAgICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbj17aGlkZVBheW1lbnRTdWJtaXRCdXR0b259XG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVQYXltZW50fVxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzPXtpbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIGlzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkPXtpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZT17aXNJbnN0cnVtZW50RmVhdHVyZUF2YWlsYWJsZX1cbiAgICAgICAgICAgICAgICBpc0xvYWRpbmdJbnN0cnVtZW50cz17aXNMb2FkaW5nSW5zdHJ1bWVudHMoKX1cbiAgICAgICAgICAgICAgICBpc1BheW1lbnREYXRhUmVxdWlyZWQ9e2lzUGF5bWVudERhdGFSZXF1aXJlZCgpfVxuICAgICAgICAgICAgICAgIGlzU2lnbmVkSW49eyFpc1NpZ25lZElufVxuICAgICAgICAgICAgICAgIGxvYWRJbnN0cnVtZW50cz17Y2hlY2tvdXRTZXJ2aWNlLmxvYWRJbnN0cnVtZW50c31cbiAgICAgICAgICAgICAgICBtZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBvblVuaGFuZGxlZEVycm9yPXtvblVuaGFuZGxlZEVycm9yfVxuICAgICAgICAgICAgICAgIHNldEZpZWxkVmFsdWU9e3NldEZpZWxkVmFsdWV9XG4gICAgICAgICAgICAgICAgc2V0U3VibWl0PXtzZXRTdWJtaXR9XG4gICAgICAgICAgICAgICAgc2V0VmFsaWRhdGlvblNjaGVtYT17c2V0VmFsaWRhdGlvblNjaGVtYX1cbiAgICAgICAgICAgICAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU9e3Nob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICBzaG91bGRSZW5kZXJDdXN0b21JbnN0cnVtZW50XG4gICAgICAgICAgICAgICAgc2lnbk91dD17Y2hlY2tvdXRTZXJ2aWNlLnNpZ25PdXRDdXN0b21lcn1cbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8TW9kYWxcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsQm9keUNsYXNzTmFtZT1cIm1vZGFsLWJvZHktLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25MYWJlbD17bGFuZ3VhZ2UudHJhbnNsYXRlKCdjb21tb24uY2xvc2VfYWN0aW9uJyl9XG4gICAgICAgICAgICAgICAgaXNPcGVuPXtzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnR9XG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e2NhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3d9XG4gICAgICAgICAgICAgICAgc2hvdWxkU2hvd0Nsb3NlQnV0dG9uPXt0cnVlfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH0gc3R5bGU9e3sgd2lkdGg6ICcxMDAlJyB9fSAvPlxuICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgIHshc2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50ICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9IHN0eWxlPXt7IGRpc3BsYXk6ICdub25lJyB9fSAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgPC8+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjJGb3JtO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethodType: () => (/* binding */ AdyenV2PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AdyenV2CardValidation */ \"./packages/adyen-integration/src/adyenv2/AdyenV2CardValidation.tsx\");\n/* harmony import */ var _AdyenV2Form__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdyenV2Form */ \"./packages/adyen-integration/src/adyenv2/AdyenV2Form.tsx\");\n\n\n\n\n\n\n\nvar AdyenV2PaymentMethodType;\n(function (AdyenV2PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"bcmc\"] = \"bcmc\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV2PaymentMethodType[\"ideal\"] = \"ideal\";\n})(AdyenV2PaymentMethodType || (AdyenV2PaymentMethodType = {}));\nconst AdyenV2PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [showAdditionalActionContent, setShowAdditionalActionContent] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const threeDS2ContainerId = `adyen-${method.id}-additional-action-component-field`;\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV2PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShowAdditionalActionContent(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setShowAdditionalActionContent(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        const adyenOptions = {\n            [AdyenV2PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n            [AdyenV2PaymentMethodType.bcmc]: {\n                hasHolderName: false,\n            },\n            [AdyenV2PaymentMethodType.ideal]: {\n                showImage: true,\n            },\n        };\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV2PaymentStrategy], adyenv2: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                threeDS2ContainerId,\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        threeDS2ContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2CardValidation__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { cardValidationState: cardValidationState, language: language, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_5__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV2Form__WEBPACK_IMPORTED_MODULE_7__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), language: language, method: method, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, showAdditionalActionContent: showAdditionalActionContent, validateInstrument: validateInstrument })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(AdyenV2PaymentMethod, [{ gateway: 'adyenv2' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBTzRGO0FBQ1A7QUFPOUI7QUFDZ0I7QUFFWDtBQUNwQjtBQVF4QyxJQUFZLHdCQU9YO0FBUEQsV0FBWSx3QkFBd0I7SUFDaEMsZ0VBQWdFO0lBQ2hFLDZDQUFpQjtJQUNqQixnRUFBZ0U7SUFDaEUseUNBQWE7SUFDYixnRUFBZ0U7SUFDaEUsMkNBQWU7QUFDbkIsQ0FBQyxFQVBXLHdCQUF3QixLQUF4Qix3QkFBd0IsUUFPbkM7QUFRRCxNQUFNLG9CQUFvQixHQUEwQyxDQUFDLEVBT3BFLEVBQUUsRUFBRTtRQVBnRSxFQUNqRSxlQUFlLEVBQ2YsYUFBYSxFQUNiLFdBQVcsRUFDWCxNQUFNLEVBQ04sUUFBUSxPQUVYLEVBRE0sSUFBSSxxREFOMEQseUVBT3BFLENBRFU7SUFFUCxNQUFNLEdBQUcsR0FBRyw2Q0FBTSxDQUF3QjtRQUN0QyxlQUFlLEVBQUUsSUFBSTtLQUN4QixDQUFDLENBQUM7SUFDSCxNQUFNLENBQUMsMkJBQTJCLEVBQUUsOEJBQThCLENBQUMsR0FBRywrQ0FBUSxDQUFVLEtBQUssQ0FBQyxDQUFDO0lBQy9GLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxzQkFBc0IsQ0FBQyxHQUFHLCtDQUFRLEVBQXdCLENBQUM7SUFDdkYsTUFBTSxXQUFXLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxrQkFBa0IsQ0FBQztJQUN6RCxNQUFNLDJCQUEyQixHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsb0NBQW9DLENBQUM7SUFDM0YsTUFBTSwyQkFBMkIsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLHNCQUFzQixDQUFDO0lBQzdFLE1BQU0sbUJBQW1CLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQztJQUNuRix5RUFBeUU7SUFDekUsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEVB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QUFJLElBQ1IsMkJBQTJCLEVBQUUsMkJBQTJCLEVBQ3hELCtCQUErQixFQUFFLCtCQUErQixFQUNoRSxlQUFlLEVBQUUsZUFBZSxFQUNoQyxhQUFhLEVBQUUsYUFBYSxFQUM1QixXQUFXLEVBQUUsV0FBVyxFQUN4QixpQkFBaUIsRUFBRSxzQkFBc0IsRUFDekMsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQUUsRUFDMUMsUUFBUSxFQUFFLFFBQVEsRUFDbEIsTUFBTSxFQUFFLE1BQU0sRUFDZCxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsMkJBQTJCLEVBQUUsMkJBQTJCLEVBQ3hELGtCQUFrQixFQUFFLGtCQUFrQixJQUN4QyxDQUNXLENBQ0UsQ0FDMUIsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLHlGQUFxQixDQUNoQyxvQkFBb0IsRUFDcEIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUMzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52Mi9BZHllblYyUGF5bWVudE1ldGhvZC50c3g/MDhmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIHR5cGUgQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICB0eXBlIEFkeWVuSWRlYWxDb21wb25lbnRPcHRpb25zLFxuICAgIHR5cGUgQWR5ZW5WYWxpZGF0aW9uU3RhdGUsXG4gICAgdHlwZSBDYXJkSW5zdHJ1bWVudCxcbiAgICB0eXBlIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgeyBjcmVhdGVBZHllblYyUGF5bWVudFN0cmF0ZWd5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9pbnRlZ3JhdGlvbnMvYWR5ZW4nO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyB0eXBlIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICB0eXBlIFBheW1lbnRNZXRob2RQcm9wcyxcbiAgICB0eXBlIFBheW1lbnRNZXRob2RSZXNvbHZlSWQsXG4gICAgdG9SZXNvbHZhYmxlQ29tcG9uZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgRm9ybUNvbnRleHQsIExvYWRpbmdPdmVybGF5IH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuaW1wb3J0IEFkeWVuVjJDYXJkVmFsaWRhdGlvbiBmcm9tICcuL0FkeWVuVjJDYXJkVmFsaWRhdGlvbic7XG5pbXBvcnQgQWR5ZW5WMkZvcm0gZnJvbSAnLi9BZHllblYyRm9ybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5PcHRpb25zIHtcbiAgICBzY2hlbWU6IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG4gICAgYmNtYzogQWR5ZW5DcmVkaXRDYXJkQ29tcG9uZW50T3B0aW9ucztcbiAgICBpZGVhbDogQWR5ZW5JZGVhbENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBpZGVhbCA9ICdpZGVhbCcsXG59XG5cbmludGVyZmFjZSBBZHllblBheW1lbnRNZXRob2RSZWYge1xuICAgIHNob3VsZFNob3dNb2RhbDogYm9vbGVhbjtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ/OiBib29sZWFuO1xuICAgIGNhbmNlbEFkZGl0aW9uYWxBY3Rpb24/KCk6IHZvaWQ7XG59XG5cbmNvbnN0IEFkeWVuVjJQYXltZW50TWV0aG9kOiBGdW5jdGlvbkNvbXBvbmVudDxQYXltZW50TWV0aG9kUHJvcHM+ID0gKHtcbiAgICBjaGVja291dFNlcnZpY2UsXG4gICAgY2hlY2tvdXRTdGF0ZSxcbiAgICBwYXltZW50Rm9ybSxcbiAgICBtZXRob2QsXG4gICAgbGFuZ3VhZ2UsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuICAgIGNvbnN0IFtzaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQsIHNldFNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gICAgY29uc3QgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldENhcmRWYWxpZGF0aW9uU3RhdGVdID0gdXNlU3RhdGU8QWR5ZW5WYWxpZGF0aW9uU3RhdGU+KCk7XG4gICAgY29uc3QgY29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS1hZGRpdGlvbmFsLWFjdGlvbi1jb21wb25lbnQtZmllbGRgO1xuICAgIGNvbnN0IGNhcmRWZXJpZmljYXRpb25Db250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tdHN2LWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgdGhyZWVEUzJDb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tYWRkaXRpb25hbC1hY3Rpb24tY29tcG9uZW50LWZpZWxkYDtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2NvbnNpc3RlbnQtdHlwZS1hc3NlcnRpb25zXG4gICAgY29uc3QgY29tcG9uZW50ID0gbWV0aG9kLmlkIGFzIEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZTtcbiAgICBjb25zdCBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGUgPSBjb21wb25lbnQgPT09IEFkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5iY21jO1xuXG4gICAgY29uc3Qgb25CZWZvcmVMb2FkID0gdXNlQ2FsbGJhY2soKHNob3BwZXJJbnRlcmFjdGlvbjogYm9vbGVhbikgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TW9kYWwgPSBzaG9wcGVySW50ZXJhY3Rpb247XG5cbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KHJlZi5jdXJyZW50LnNob3VsZFNob3dNb2RhbCk7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25Db21wbGV0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgICAgc2V0U2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50KGZhbHNlKTtcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkxvYWQgPSB1c2VDYWxsYmFjaygoY2FuY2VsPzogYW55KSA9PiB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFzc2lnbm1lbnRcbiAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IGNhbmNlbDtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRTaG93QWRkaXRpb25hbEFjdGlvbkNvbnRlbnQoZmFsc2UpO1xuXG4gICAgICAgIGlmIChyZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKSB7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uKCk7XG4gICAgICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3QgaW5pdGlhbGl6ZUFkeWVuUGF5bWVudDogSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHNbJ2luaXRpYWxpemVQYXltZW50J10gPSB1c2VDYWxsYmFjayhcbiAgICAgICAgYXN5bmMgKG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucywgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudElkID0gc2VsZWN0ZWRJbnN0cnVtZW50Py5iaWdwYXlUb2tlbjtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYyUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBbQWR5ZW5WMlBheW1lbnRNZXRob2RUeXBlLmJjbWNdOiB7XG4gICAgICAgICAgICAgICAgICAgIGhhc0hvbGRlck5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgW0FkeWVuVjJQYXltZW50TWV0aG9kVHlwZS5pZGVhbF06IHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ltYWdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjJQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjI6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgdGhyZWVEUzJDb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIHRocmVlRFMyQ29udGFpbmVySWQsXG4gICAgICAgICAgICBvbkJlZm9yZUxvYWQsXG4gICAgICAgICAgICBvbkNvbXBsZXRlLFxuICAgICAgICAgICAgb25Mb2FkLFxuICAgICAgICAgICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgICAgICBdLFxuICAgICk7XG5cbiAgICBjb25zdCB2YWxpZGF0ZUluc3RydW1lbnQgPSAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd051bWJlckZpZWxkID0gc2hvdWxkU2hvd051bWJlckZpZWxkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QWR5ZW5WMkNhcmRWYWxpZGF0aW9uXG4gICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZT17Y2FyZFZhbGlkYXRpb25TdGF0ZX1cbiAgICAgICAgICAgICAgICBsYW5ndWFnZT17bGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSW5zdHJ1bWVudD17c2VsZWN0ZWRJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZD17c2hvdWxkU2hvd051bWJlckZpZWxkfVxuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPXtjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBjb25zdCBpc0FjY291bnRJbnN0cnVtZW50ID0gKCkgPT4ge1xuICAgICAgICBzd2l0Y2ggKG1ldGhvZC5tZXRob2QpIHtcbiAgICAgICAgICAgIGNhc2UgJ2RpcmVjdEViYW5raW5nJzpcbiAgICAgICAgICAgIGNhc2UgJ2dpcm9wYXknOlxuICAgICAgICAgICAgY2FzZSAnaWRlYWwnOlxuICAgICAgICAgICAgY2FzZSAnc2VwYWRpcmVjdGRlYml0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgaXNMb2FkaW5nID1cbiAgICAgICAgY2hlY2tvdXRTdGF0ZS5zdGF0dXNlcy5pc0xvYWRpbmdJbnN0cnVtZW50cygpIHx8XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nUGF5bWVudE1ldGhvZChtZXRob2QuaWQpO1xuXG4gICAgY29uc3QgZm9ybUNvbnRleHRQcm9wcyA9IHtcbiAgICAgICAgaXNTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLmlzU3VibWl0dGVkKCksXG4gICAgICAgIHNldFN1Ym1pdHRlZDogcGF5bWVudEZvcm0uc2V0U3VibWl0dGVkLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8Rm9ybUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e2Zvcm1Db250ZXh0UHJvcHN9PlxuICAgICAgICAgICAgPExvYWRpbmdPdmVybGF5IGhpZGVDb250ZW50V2hlbkxvYWRpbmcgaXNMb2FkaW5nPXtpc0xvYWRpbmd9PlxuICAgICAgICAgICAgICAgIDxBZHllblYyRm9ybVxuICAgICAgICAgICAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkPXthZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWR9XG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3c9e2NhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3d9XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0U2VydmljZT17Y2hlY2tvdXRTZXJ2aWNlfVxuICAgICAgICAgICAgICAgICAgICBjaGVja291dFN0YXRlPXtjaGVja291dFN0YXRlfVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZD17Y29udGFpbmVySWR9XG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxpemVQYXltZW50PXtpbml0aWFsaXplQWR5ZW5QYXltZW50fVxuICAgICAgICAgICAgICAgICAgICBpc0FjY291bnRJbnN0cnVtZW50PXtpc0FjY291bnRJbnN0cnVtZW50KCl9XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPXtsYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRGb3JtPXtwYXltZW50Rm9ybX1cbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlPXtzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgIHNob3dBZGRpdGlvbmFsQWN0aW9uQ29udGVudD17c2hvd0FkZGl0aW9uYWxBY3Rpb25Db250ZW50fVxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0ZUluc3RydW1lbnQ9e3ZhbGlkYXRlSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Mb2FkaW5nT3ZlcmxheT5cbiAgICAgICAgPC9Gb3JtQ29udGV4dC5Qcm92aWRlcj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlQ29tcG9uZW50PFBheW1lbnRNZXRob2RQcm9wcywgUGF5bWVudE1ldGhvZFJlc29sdmVJZD4oXG4gICAgQWR5ZW5WMlBheW1lbnRNZXRob2QsXG4gICAgW3sgZ2F0ZXdheTogJ2FkeWVudjInIH1dLFxuKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx":
/*!**************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! classnames */ \"./node_modules/classnames/index.js\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/locale */ \"./packages/locale/src/TranslatedString.tsx\");\n\n\n\nvar AdyenCardFields;\n(function (AdyenCardFields) {\n    AdyenCardFields[\"CardNumber\"] = \"encryptedCardNumber\";\n    AdyenCardFields[\"SecurityCode\"] = \"encryptedSecurityCode\";\n    AdyenCardFields[\"ExpiryDate\"] = \"encryptedExpiryDate\";\n})(AdyenCardFields || (AdyenCardFields = {}));\nconst getInitialValidationState = ({ shouldShowNumberField, method, }) => {\n    const validationState = {};\n    if (shouldShowNumberField) {\n        validationState[AdyenCardFields.CardNumber] = { valid: false };\n    }\n    if (method === 'scheme') {\n        validationState[AdyenCardFields.SecurityCode] = { valid: false };\n    }\n    if (method === 'bcmc') {\n        validationState[AdyenCardFields.ExpiryDate] = { valid: false };\n    }\n    return validationState;\n};\nconst isFieldInvalid = (fieldKey, fieldsValidation) => !!fieldsValidation[fieldKey] && !fieldsValidation[fieldKey].valid;\nconst AdyenV3CardValidation = ({ verificationFieldsContainerId, shouldShowNumberField, selectedInstrument, paymentMethod, cardValidationState, }) => {\n    const [fieldsValidation, setFieldsValidation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        var _a;\n        if (!cardValidationState) {\n            return;\n        }\n        if (cardValidationState.fieldType &&\n            (!fieldsValidation[cardValidationState.fieldType] ||\n                ((_a = fieldsValidation[cardValidationState.fieldType]) === null || _a === void 0 ? void 0 : _a.valid) !==\n                    cardValidationState.valid)) {\n            if (cardValidationState.fieldType === AdyenCardFields.CardNumber) {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [AdyenCardFields.CardNumber]: cardValidationState.endDigits !== (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4)\n                        ? Object.assign(Object.assign({}, cardValidationState), { valid: false }) : Object.assign({}, cardValidationState) }));\n            }\n            else {\n                setFieldsValidation(Object.assign(Object.assign({}, fieldsValidation), { [cardValidationState.fieldType]: cardValidationState }));\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [cardValidationState, setFieldsValidation, selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.last4]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n        if (selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken) {\n            setFieldsValidation(getInitialValidationState({ shouldShowNumberField, method: paymentMethod.method }));\n        }\n    }, [selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken, paymentMethod.method, shouldShowNumberField]);\n    const showValidationIcon = (key) => isFieldInvalid(key, fieldsValidation) && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", { className: \"adyen-checkout-input__inline-validation adyen-checkout-input__inline-validation--invalid\", style: { transform: 'none', right: '20px' } },\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"img\", { alt: \"adyen-checkout-icon\", className: \"adyen-checkout__icon\", src: \"https://checkoutshopper-test.adyen.com/checkoutshopper/images/components/field_error.svg\" })));\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", null,\n        shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"p\", null,\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"strong\", null,\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_title_text\" })),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"br\", null),\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.instrument_trusted_shipping_address_text\" }))),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-ccFields\", id: verificationFieldsContainerId },\n            shouldShowNumberField && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-field', 'form-field--ccNumber', {\n                    'form-field--ccNumber--hasExpiryDate': paymentMethod.method === 'bcmc',\n                }, \n                // This div is hiding by CSS because there is an Adyen library in\n                // checkout-sdk which mounts verification fields and if is removed with JS this mounting event will be thrown an error\n                { 'form-field-ccNumber--hide': !shouldShowNumberField }) },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.CardNumber },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_number_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.CardNumber, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.CardNumber, id: AdyenCardFields.CardNumber }),\n                showValidationIcon(AdyenCardFields.CardNumber))),\n            paymentMethod.method === 'scheme' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-ccFields-field--ccCvv\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.SecurityCode },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_cvv_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.SecurityCode, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.SecurityCode, id: AdyenCardFields.SecurityCode }),\n                showValidationIcon(AdyenCardFields.SecurityCode))),\n            paymentMethod.method === 'bcmc' && (react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: \"form-field form-field--ccExpiry\" },\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"label\", { htmlFor: AdyenCardFields.ExpiryDate },\n                    react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_locale__WEBPACK_IMPORTED_MODULE_2__[\"default\"], { id: \"payment.credit_card_expiration_label\" })),\n                react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { className: classnames__WEBPACK_IMPORTED_MODULE_0___default()('form-input', 'optimizedCheckout-form-input', 'has-icon', 'adyen-checkout__input-wrapper', {\n                        'adyen-checkout__input--error': isFieldInvalid(AdyenCardFields.ExpiryDate, fieldsValidation),\n                    }), \"data-cse\": AdyenCardFields.ExpiryDate, id: AdyenCardFields.ExpiryDate }),\n                showValidationIcon(AdyenCardFields.ExpiryDate))))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3CardValidation);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzQ2FyZFZhbGlkYXRpb24udHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUtvQztBQUN1QztBQUVYO0FBSWhFLElBQUssZUFJSjtBQUpELFdBQUssZUFBZTtJQUNoQixxREFBa0M7SUFDbEMseURBQXNDO0lBQ3RDLHFEQUFrQztBQUN0QyxDQUFDLEVBSkksZUFBZSxLQUFmLGVBQWUsUUFJbkI7QUFVRCxNQUFNLHlCQUF5QixHQUFHLENBQUMsRUFDL0IscUJBQXFCLEVBQ3JCLE1BQU0sR0FJVCxFQUFFLEVBQUU7SUFDRCxNQUFNLGVBQWUsR0FBcUIsRUFBRSxDQUFDO0lBRTdDLElBQUkscUJBQXFCLEVBQUUsQ0FBQztRQUN4QixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUN0QixlQUFlLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ3JFLENBQUM7SUFFRCxJQUFJLE1BQU0sS0FBSyxNQUFNLEVBQUUsQ0FBQztRQUNwQixlQUFlLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25FLENBQUM7SUFFRCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDLENBQUM7QUFFRixNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQXlCLEVBQUUsZ0JBQWtDLEVBQVcsRUFBRSxDQUM5RixDQUFDLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFFdEUsTUFBTSxxQkFBcUIsR0FBa0QsQ0FBQyxFQUMxRSw2QkFBNkIsRUFDN0IscUJBQXFCLEVBQ3JCLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsbUJBQW1CLEdBQ3RCLEVBQUUsRUFBRTtJQUNELE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxtQkFBbUIsQ0FBQyxHQUFHLCtDQUFRLENBQ3BELHlCQUF5QixDQUFDLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxFQUFFLGFBQWEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUNyRixDQUFDO0lBRUYsZ0RBQVMsQ0FBQyxHQUFHLEVBQUU7O1FBQ1gsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7WUFDdkIsT0FBTztRQUNYLENBQUM7UUFFRCxJQUNJLG1CQUFtQixDQUFDLFNBQVM7WUFDN0IsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQztnQkFDN0MsdUJBQWdCLENBQUMsbUJBQW1CLENBQUMsU0FBUyxDQUFDLDBDQUFFLEtBQUs7b0JBQ2xELG1CQUFtQixDQUFDLEtBQUssQ0FBQyxFQUNwQyxDQUFDO1lBQ0MsSUFBSSxtQkFBbUIsQ0FBQyxTQUFTLEtBQUssZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFDO2dCQUMvRCxtQkFBbUIsaUNBQ1osZ0JBQWdCLEtBQ25CLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxFQUN4QixtQkFBbUIsQ0FBQyxTQUFTLE1BQUssa0JBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsS0FBSzt3QkFDdkQsQ0FBQyxpQ0FBTSxtQkFBbUIsS0FBRSxLQUFLLEVBQUUsS0FBSyxJQUN4QyxDQUFDLG1CQUFNLG1CQUFtQixDQUFFLElBQ3RDLENBQUM7WUFDUCxDQUFDO2lCQUFNLENBQUM7Z0JBQ0osbUJBQW1CLGlDQUNaLGdCQUFnQixLQUNuQixDQUFDLG1CQUFtQixDQUFDLFNBQVMsQ0FBQyxFQUFFLG1CQUFtQixJQUN0RCxDQUFDO1lBQ1AsQ0FBQztRQUNMLENBQUM7UUFDRCx1REFBdUQ7SUFDM0QsQ0FBQyxFQUFFLENBQUMsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQUUsa0JBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUUxRSxnREFBUyxDQUFDLEdBQUcsRUFBRTtRQUNYLElBQUksa0JBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsV0FBVyxFQUFFLENBQUM7WUFDbEMsbUJBQW1CLENBQ2YseUJBQXlCLENBQUMsRUFBRSxxQkFBcUIsRUFBRSxNQUFNLEVBQUUsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQ3JGLENBQUM7UUFDTixDQUFDO0lBQ0wsQ0FBQyxFQUFFLENBQUMsa0JBQWtCLGFBQWxCLGtCQUFrQix1QkFBbEIsa0JBQWtCLENBQUUsV0FBVyxFQUFFLGFBQWEsQ0FBQyxNQUFNLEVBQUUscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0lBRW5GLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxHQUFvQixFQUFFLEVBQUUsQ0FDaEQsY0FBYyxDQUFDLEdBQUcsRUFBRSxnQkFBZ0IsQ0FBQyxJQUFJLENBQ3JDLHFFQUNJLFNBQVMsRUFBQywwRkFBMEYsRUFDcEcsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO1FBRTNDLG9FQUNJLEdBQUcsRUFBQyxxQkFBcUIsRUFDekIsU0FBUyxFQUFDLHNCQUFzQixFQUNoQyxHQUFHLEVBQUMsMEZBQTBGLEdBQ2hHLENBQ0MsQ0FDVixDQUFDO0lBRU4sT0FBTyxDQUNIO1FBQ0sscUJBQXFCLElBQUksQ0FDdEI7WUFDSTtnQkFDSSwyREFBQyxvRUFBZ0IsSUFBQyxFQUFFLEVBQUMsd0RBQXdELEdBQUcsQ0FDM0U7WUFFVCxzRUFBTTtZQUVOLDJEQUFDLG9FQUFnQixJQUFDLEVBQUUsRUFBQyxrREFBa0QsR0FBRyxDQUMxRSxDQUNQO1FBRUQsb0VBQUssU0FBUyxFQUFDLGVBQWUsRUFBQyxFQUFFLEVBQUUsNkJBQTZCO1lBQzNELHFCQUFxQixJQUFJLENBQ3RCLG9FQUNJLFNBQVMsRUFBRSxpREFBVSxDQUNqQixZQUFZLEVBQ1osc0JBQXNCLEVBQ3RCO29CQUNJLHFDQUFxQyxFQUNqQyxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU07aUJBQ3RDO2dCQUNELGlFQUFpRTtnQkFDakUsc0hBQXNIO2dCQUN0SCxFQUFFLDJCQUEyQixFQUFFLENBQUMscUJBQXFCLEVBQUUsQ0FDMUQ7Z0JBRUQsc0VBQU8sT0FBTyxFQUFFLGVBQWUsQ0FBQyxVQUFVO29CQUN0QywyREFBQyxvRUFBZ0IsSUFBQyxFQUFFLEVBQUMsa0NBQWtDLEdBQUcsQ0FDdEQ7Z0JBQ1Isb0VBQ0ksU0FBUyxFQUFFLGlEQUFVLENBQ2pCLFlBQVksRUFDWiw4QkFBOEIsRUFDOUIsVUFBVSxFQUNWLCtCQUErQixFQUMvQjt3QkFDSSw4QkFBOEIsRUFBRSxjQUFjLENBQzFDLGVBQWUsQ0FBQyxVQUFVLEVBQzFCLGdCQUFnQixDQUNuQjtxQkFDSixDQUNKLGNBQ1MsZUFBZSxDQUFDLFVBQVUsRUFDcEMsRUFBRSxFQUFFLGVBQWUsQ0FBQyxVQUFVLEdBQ2hDO2dCQUNELGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsQ0FDN0MsQ0FDVDtZQUNBLGFBQWEsQ0FBQyxNQUFNLEtBQUssUUFBUSxJQUFJLENBQ2xDLG9FQUFLLFNBQVMsRUFBQyx1Q0FBdUM7Z0JBQ2xELHNFQUFPLE9BQU8sRUFBRSxlQUFlLENBQUMsWUFBWTtvQkFDeEMsMkRBQUMsb0VBQWdCLElBQUMsRUFBRSxFQUFDLCtCQUErQixHQUFHLENBQ25EO2dCQUNSLG9FQUNJLFNBQVMsRUFBRSxpREFBVSxDQUNqQixZQUFZLEVBQ1osOEJBQThCLEVBQzlCLFVBQVUsRUFDViwrQkFBK0IsRUFDL0I7d0JBQ0ksOEJBQThCLEVBQUUsY0FBYyxDQUMxQyxlQUFlLENBQUMsWUFBWSxFQUM1QixnQkFBZ0IsQ0FDbkI7cUJBQ0osQ0FDSixjQUNTLGVBQWUsQ0FBQyxZQUFZLEVBQ3RDLEVBQUUsRUFBRSxlQUFlLENBQUMsWUFBWSxHQUNsQztnQkFDRCxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQy9DLENBQ1Q7WUFDQSxhQUFhLENBQUMsTUFBTSxLQUFLLE1BQU0sSUFBSSxDQUNoQyxvRUFBSyxTQUFTLEVBQUMsaUNBQWlDO2dCQUM1QyxzRUFBTyxPQUFPLEVBQUUsZUFBZSxDQUFDLFVBQVU7b0JBQ3RDLDJEQUFDLG9FQUFnQixJQUFDLEVBQUUsRUFBQyxzQ0FBc0MsR0FBRyxDQUMxRDtnQkFDUixvRUFDSSxTQUFTLEVBQUUsaURBQVUsQ0FDakIsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixVQUFVLEVBQ1YsK0JBQStCLEVBQy9CO3dCQUNJLDhCQUE4QixFQUFFLGNBQWMsQ0FDMUMsZUFBZSxDQUFDLFVBQVUsRUFDMUIsZ0JBQWdCLENBQ25CO3FCQUNKLENBQ0osY0FDUyxlQUFlLENBQUMsVUFBVSxFQUNwQyxFQUFFLEVBQUUsZUFBZSxDQUFDLFVBQVUsR0FDaEM7Z0JBQ0Qsa0JBQWtCLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUM3QyxDQUNULENBQ0MsQ0FDSixDQUNULENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0NhcmRWYWxpZGF0aW9uLnRzeD9kZjgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkayc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCwgeyB0eXBlIEZ1bmN0aW9uQ29tcG9uZW50LCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBUcmFuc2xhdGVkU3RyaW5nIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2xvY2FsZSc7XG5cbmV4cG9ydCB0eXBlIEZpZWxkc1ZhbGlkYXRpb24gPSB7IFtrZXkgaW4gQWR5ZW5DYXJkRmllbGRzXT86IEFkeWVuVmFsaWRhdGlvblN0YXRlIH07XG5cbmVudW0gQWR5ZW5DYXJkRmllbGRzIHtcbiAgICBDYXJkTnVtYmVyID0gJ2VuY3J5cHRlZENhcmROdW1iZXInLFxuICAgIFNlY3VyaXR5Q29kZSA9ICdlbmNyeXB0ZWRTZWN1cml0eUNvZGUnLFxuICAgIEV4cGlyeURhdGUgPSAnZW5jcnlwdGVkRXhwaXJ5RGF0ZScsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uUHJvcHMge1xuICAgIHZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kO1xuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGU/OiBBZHllblZhbGlkYXRpb25TdGF0ZTtcbiAgICBzZWxlY3RlZEluc3RydW1lbnQ/OiBDYXJkSW5zdHJ1bWVudDtcbn1cblxuY29uc3QgZ2V0SW5pdGlhbFZhbGlkYXRpb25TdGF0ZSA9ICh7XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIG1ldGhvZCxcbn06IHtcbiAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG59KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdGlvblN0YXRlOiBGaWVsZHNWYWxpZGF0aW9uID0ge307XG5cbiAgICBpZiAoc2hvdWxkU2hvd051bWJlckZpZWxkKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcl0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIGlmIChtZXRob2QgPT09ICdzY2hlbWUnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuU2VjdXJpdHlDb2RlXSA9IHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxuXG4gICAgaWYgKG1ldGhvZCA9PT0gJ2JjbWMnKSB7XG4gICAgICAgIHZhbGlkYXRpb25TdGF0ZVtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZV0gPSB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB2YWxpZGF0aW9uU3RhdGU7XG59O1xuXG5jb25zdCBpc0ZpZWxkSW52YWxpZCA9IChmaWVsZEtleTogQWR5ZW5DYXJkRmllbGRzLCBmaWVsZHNWYWxpZGF0aW9uOiBGaWVsZHNWYWxpZGF0aW9uKTogYm9vbGVhbiA9PlxuICAgICEhZmllbGRzVmFsaWRhdGlvbltmaWVsZEtleV0gJiYgIWZpZWxkc1ZhbGlkYXRpb25bZmllbGRLZXldLnZhbGlkO1xuXG5jb25zdCBBZHllblYzQ2FyZFZhbGlkYXRpb246IEZ1bmN0aW9uQ29tcG9uZW50PEFkeWVuVjNDYXJkVmFsaWRhdGlvblByb3BzPiA9ICh7XG4gICAgdmVyaWZpY2F0aW9uRmllbGRzQ29udGFpbmVySWQsXG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkLFxuICAgIHNlbGVjdGVkSW5zdHJ1bWVudCxcbiAgICBwYXltZW50TWV0aG9kLFxuICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUsXG59KSA9PiB7XG4gICAgY29uc3QgW2ZpZWxkc1ZhbGlkYXRpb24sIHNldEZpZWxkc1ZhbGlkYXRpb25dID0gdXNlU3RhdGU8RmllbGRzVmFsaWRhdGlvbj4oXG4gICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghY2FyZFZhbGlkYXRpb25TdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5maWVsZFR5cGUgJiZcbiAgICAgICAgICAgICghZmllbGRzVmFsaWRhdGlvbltjYXJkVmFsaWRhdGlvblN0YXRlLmZpZWxkVHlwZV0gfHxcbiAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXT8udmFsaWQgIT09XG4gICAgICAgICAgICAgICAgICAgIGNhcmRWYWxpZGF0aW9uU3RhdGUudmFsaWQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKGNhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlID09PSBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcikge1xuICAgICAgICAgICAgICAgIHNldEZpZWxkc1ZhbGlkYXRpb24oe1xuICAgICAgICAgICAgICAgICAgICAuLi5maWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBbQWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJdOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZFZhbGlkYXRpb25TdGF0ZS5lbmREaWdpdHMgIT09IHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSwgdmFsaWQ6IGZhbHNlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHsgLi4uY2FyZFZhbGlkYXRpb25TdGF0ZSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgW2NhcmRWYWxpZGF0aW9uU3RhdGUuZmllbGRUeXBlXTogY2FyZFZhbGlkYXRpb25TdGF0ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2NhcmRWYWxpZGF0aW9uU3RhdGUsIHNldEZpZWxkc1ZhbGlkYXRpb24sIHNlbGVjdGVkSW5zdHJ1bWVudD8ubGFzdDRdKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuKSB7XG4gICAgICAgICAgICBzZXRGaWVsZHNWYWxpZGF0aW9uKFxuICAgICAgICAgICAgICAgIGdldEluaXRpYWxWYWxpZGF0aW9uU3RhdGUoeyBzaG91bGRTaG93TnVtYmVyRmllbGQsIG1ldGhvZDogcGF5bWVudE1ldGhvZC5tZXRob2QgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSwgW3NlbGVjdGVkSW5zdHJ1bWVudD8uYmlncGF5VG9rZW4sIHBheW1lbnRNZXRob2QubWV0aG9kLCBzaG91bGRTaG93TnVtYmVyRmllbGRdKTtcblxuICAgIGNvbnN0IHNob3dWYWxpZGF0aW9uSWNvbiA9IChrZXk6IEFkeWVuQ2FyZEZpZWxkcykgPT5cbiAgICAgICAgaXNGaWVsZEludmFsaWQoa2V5LCBmaWVsZHNWYWxpZGF0aW9uKSAmJiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFkeWVuLWNoZWNrb3V0LWlucHV0X19pbmxpbmUtdmFsaWRhdGlvbiBhZHllbi1jaGVja291dC1pbnB1dF9faW5saW5lLXZhbGlkYXRpb24tLWludmFsaWRcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7IHRyYW5zZm9ybTogJ25vbmUnLCByaWdodDogJzIwcHgnIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICBhbHQ9XCJhZHllbi1jaGVja291dC1pY29uXCJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYWR5ZW4tY2hlY2tvdXRfX2ljb25cIlxuICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL2NoZWNrb3V0c2hvcHBlci10ZXN0LmFkeWVuLmNvbS9jaGVja291dHNob3BwZXIvaW1hZ2VzL2NvbXBvbmVudHMvZmllbGRfZXJyb3Iuc3ZnXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHtzaG91bGRTaG93TnVtYmVyRmllbGQgJiYgKFxuICAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFRyYW5zbGF0ZWRTdHJpbmcgaWQ9XCJwYXltZW50Lmluc3RydW1lbnRfdHJ1c3RlZF9zaGlwcGluZ19hZGRyZXNzX3RpdGxlX3RleHRcIiAvPlxuICAgICAgICAgICAgICAgICAgICA8L3N0cm9uZz5cblxuICAgICAgICAgICAgICAgICAgICA8YnIgLz5cblxuICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuaW5zdHJ1bWVudF90cnVzdGVkX3NoaXBwaW5nX2FkZHJlc3NfdGV4dFwiIC8+XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWNjRmllbGRzXCIgaWQ9e3ZlcmlmaWNhdGlvbkZpZWxkc0NvbnRhaW5lcklkfT5cbiAgICAgICAgICAgICAgICB7c2hvdWxkU2hvd051bWJlckZpZWxkICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWZpZWxkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1maWVsZC0tY2NOdW1iZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zvcm0tZmllbGQtLWNjTnVtYmVyLS1oYXNFeHBpcnlEYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QubWV0aG9kID09PSAnYmNtYycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGRpdiBpcyBoaWRpbmcgYnkgQ1NTIGJlY2F1c2UgdGhlcmUgaXMgYW4gQWR5ZW4gbGlicmFyeSBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrb3V0LXNkayB3aGljaCBtb3VudHMgdmVyaWZpY2F0aW9uIGZpZWxkcyBhbmQgaWYgaXMgcmVtb3ZlZCB3aXRoIEpTIHRoaXMgbW91bnRpbmcgZXZlbnQgd2lsbCBiZSB0aHJvd24gYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ICdmb3JtLWZpZWxkLWNjTnVtYmVyLS1oaWRlJzogIXNob3VsZFNob3dOdW1iZXJGaWVsZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5DYXJkTnVtYmVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VHJhbnNsYXRlZFN0cmluZyBpZD1cInBheW1lbnQuY3JlZGl0X2NhcmRfbnVtYmVyX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkNhcmROdW1iZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuQ2FyZE51bWJlcil9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge3BheW1lbnRNZXRob2QubWV0aG9kID09PSAnc2NoZW1lJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9ybS1maWVsZCBmb3JtLWNjRmllbGRzLWZpZWxkLS1jY0N2dlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9e0FkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9jdnZfbGFiZWxcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ29wdGltaXplZENoZWNrb3V0LWZvcm0taW5wdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaGFzLWljb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LXdyYXBwZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWR5ZW4tY2hlY2tvdXRfX2lucHV0LS1lcnJvcic6IGlzRmllbGRJbnZhbGlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzVmFsaWRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWNzZT17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLlNlY3VyaXR5Q29kZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICB7c2hvd1ZhbGlkYXRpb25JY29uKEFkeWVuQ2FyZEZpZWxkcy5TZWN1cml0eUNvZGUpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHtwYXltZW50TWV0aG9kLm1ldGhvZCA9PT0gJ2JjbWMnICYmIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWZpZWxkIGZvcm0tZmllbGQtLWNjRXhwaXJ5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUcmFuc2xhdGVkU3RyaW5nIGlkPVwicGF5bWVudC5jcmVkaXRfY2FyZF9leHBpcmF0aW9uX2xhYmVsXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZm9ybS1pbnB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdvcHRpbWl6ZWRDaGVja291dC1mb3JtLWlucHV0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hhcy1pY29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC13cmFwcGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FkeWVuLWNoZWNrb3V0X19pbnB1dC0tZXJyb3InOiBpc0ZpZWxkSW52YWxpZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNWYWxpZGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtY3NlPXtBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17QWR5ZW5DYXJkRmllbGRzLkV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Nob3dWYWxpZGF0aW9uSWNvbihBZHllbkNhcmRGaWVsZHMuRXhwaXJ5RGF0ZSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkeWVuVjNDYXJkVmFsaWRhdGlvbjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx":
/*!****************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UntrustedShippingCardVerificationType: () => (/* binding */ UntrustedShippingCardVerificationType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _bigcommerce_checkout_contexts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/checkout/contexts */ \"./packages/contexts/src/paymentForm/PaymentFormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/hosted-widget-integration */ \"./packages/hosted-widget-integration/src/HostedWidgetPaymentComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardCodeRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/instrument-utils */ \"./packages/instrument-utils/src/guards/isInstrumentCardNumberRequiredSelector.ts\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/modal/Modal.tsx\");\n\n\n\n\n\n\nvar UntrustedShippingCardVerificationType;\n(function (UntrustedShippingCardVerificationType) {\n    UntrustedShippingCardVerificationType[\"CVV\"] = \"cvv\";\n    UntrustedShippingCardVerificationType[\"PAN\"] = \"pan\";\n})(UntrustedShippingCardVerificationType || (UntrustedShippingCardVerificationType = {}));\nconst AdyenV3Form = (_a) => {\n    var { method, containerId, initializePayment, isAccountInstrument, shouldHideInstrumentExpiryDate, validateInstrument, language, shouldRenderAdditionalActionContentModal, isModalVisible, cancelAdditionalActionModalFlow, additionalActionContainerId, checkoutState, checkoutService, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"method\", \"containerId\", \"initializePayment\", \"isAccountInstrument\", \"shouldHideInstrumentExpiryDate\", \"validateInstrument\", \"language\", \"shouldRenderAdditionalActionContentModal\", \"isModalVisible\", \"cancelAdditionalActionModalFlow\", \"additionalActionContainerId\", \"checkoutState\", \"checkoutService\", \"onUnhandledError\"]);\n    const { paymentForm } = (0,_bigcommerce_checkout_contexts__WEBPACK_IMPORTED_MODULE_2__.usePaymentFormContext)();\n    const customer = checkoutState.data.getCustomer();\n    const { isLoadingInstruments } = checkoutState.statuses;\n    const { isPaymentDataRequired } = checkoutState.data;\n    const instruments = checkoutState.data.getInstruments(method) || [];\n    const isSignedIn = customer === null || customer === void 0 ? void 0 : customer.isGuest;\n    const isInstrumentFeatureAvailable = !isSignedIn && Boolean(method.config.isVaultingEnabled);\n    const isInstrumentCardCodeRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(checkoutState);\n    const isInstrumentCardNumberRequired = (0,_bigcommerce_checkout_instrument_utils__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(checkoutState);\n    const { hidePaymentSubmitButton, disableSubmit, setFieldValue, setSubmit, setValidationSchema, } = paymentForm;\n    return (react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null,\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_hosted_widget_integration__WEBPACK_IMPORTED_MODULE_3__[\"default\"], Object.assign({}, rest, { containerId: containerId, deinitializePayment: checkoutService.deinitializePayment, disableSubmit: disableSubmit, hideContentWhenSignedOut: true, hidePaymentSubmitButton: hidePaymentSubmitButton, initializePayment: initializePayment, instruments: instruments, isAccountInstrument: isAccountInstrument, isInstrumentCardCodeRequired: isInstrumentCardCodeRequired, isInstrumentCardNumberRequired: isInstrumentCardNumberRequired, isInstrumentFeatureAvailable: isInstrumentFeatureAvailable, isLoadingInstruments: isLoadingInstruments(), isPaymentDataRequired: isPaymentDataRequired(), isSignedIn: !isSignedIn, loadInstruments: checkoutService.loadInstruments, method: method, onUnhandledError: onUnhandledError, setFieldValue: setFieldValue, setSubmit: setSubmit, setValidationSchema: setValidationSchema, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderCustomInstrument: true, signOut: checkoutService.signOutCustomer, validateInstrument: validateInstrument })),\n        react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { additionalBodyClassName: \"modal-body--center\", closeButtonLabel: language.translate('common.close_action'), isOpen: shouldRenderAdditionalActionContentModal, onRequestClose: cancelAdditionalActionModalFlow, shouldShowCloseButton: true, style: !isModalVisible && method.id === 'scheme'\n                ? {\n                    overlay: {\n                        display: 'none',\n                    },\n                }\n                : {} },\n            react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId, style: { width: '100%' } })),\n        !shouldRenderAdditionalActionContentModal && react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", { id: additionalActionContainerId })));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AdyenV3Form);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFDc0U7QUFHQztBQUlkO0FBSVQ7QUFFQztBQUVqRCxJQUFZLHFDQUdYO0FBSEQsV0FBWSxxQ0FBcUM7SUFDN0Msb0RBQVc7SUFDWCxvREFBVztBQUNmLENBQUMsRUFIVyxxQ0FBcUMsS0FBckMscUNBQXFDLFFBR2hEO0FBNkJELE1BQU0sV0FBVyxHQUE2RCxDQUFDLEVBZ0I5RSxFQUFFLEVBQUU7UUFoQjBFLEVBQzNFLE1BQU0sRUFDTixXQUFXLEVBQ1gsaUJBQWlCLEVBQ2pCLG1CQUFtQixFQUNuQiw4QkFBOEIsRUFDOUIsa0JBQWtCLEVBQ2xCLFFBQVEsRUFDUix3Q0FBd0MsRUFDeEMsY0FBYyxFQUNkLCtCQUErQixFQUMvQiwyQkFBMkIsRUFDM0IsYUFBYSxFQUNiLGVBQWUsRUFDZixnQkFBZ0IsT0FFbkIsRUFETSxJQUFJLHFEQWZvRSxpVUFnQjlFLENBRFU7SUFFUCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcscUZBQXFCLEVBQUUsQ0FBQztJQUNoRCxNQUFNLFFBQVEsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2xELE1BQU0sRUFBRSxvQkFBb0IsRUFBRSxHQUFHLGFBQWEsQ0FBQyxRQUFRLENBQUM7SUFDeEQsTUFBTSxFQUFFLHFCQUFxQixFQUFFLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQztJQUNyRCxNQUFNLFdBQVcsR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDcEUsTUFBTSxVQUFVLEdBQUcsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLE9BQU8sQ0FBQztJQUNyQyxNQUFNLDRCQUE0QixHQUFHLENBQUMsVUFBVSxJQUFJLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLENBQUM7SUFDN0YsTUFBTSw0QkFBNEIsR0FBRyxrRkFBb0MsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN6RixNQUFNLDhCQUE4QixHQUFHLGtGQUFzQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRTdGLE1BQU0sRUFDRix1QkFBdUIsRUFDdkIsYUFBYSxFQUNiLGFBQWEsRUFDYixTQUFTLEVBQ1QsbUJBQW1CLEdBQ3RCLEdBQUcsV0FBVyxDQUFDO0lBRWhCLE9BQU8sQ0FDSDtRQUNJLDJEQUFDLHVGQUE0QixvQkFDckIsSUFBSSxJQUNSLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLG1CQUFtQixFQUFFLGVBQWUsQ0FBQyxtQkFBbUIsRUFDeEQsYUFBYSxFQUFFLGFBQWEsRUFDNUIsd0JBQXdCLFFBQ3hCLHVCQUF1QixFQUFFLHVCQUF1QixFQUNoRCxpQkFBaUIsRUFBRSxpQkFBaUIsRUFDcEMsV0FBVyxFQUFFLFdBQVcsRUFDeEIsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQ3hDLDRCQUE0QixFQUFFLDRCQUE0QixFQUMxRCw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLEVBQUUsNEJBQTRCLEVBQzFELG9CQUFvQixFQUFFLG9CQUFvQixFQUFFLEVBQzVDLHFCQUFxQixFQUFFLHFCQUFxQixFQUFFLEVBQzlDLFVBQVUsRUFBRSxDQUFDLFVBQVUsRUFDdkIsZUFBZSxFQUFFLGVBQWUsQ0FBQyxlQUFlLEVBQ2hELE1BQU0sRUFBRSxNQUFNLEVBQ2QsZ0JBQWdCLEVBQUUsZ0JBQWdCLEVBQ2xDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLG1CQUFtQixFQUFFLG1CQUFtQixFQUN4Qyw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsNEJBQTRCLFFBQzVCLE9BQU8sRUFBRSxlQUFlLENBQUMsZUFBZSxFQUN4QyxrQkFBa0IsRUFBRSxrQkFBa0IsSUFDeEM7UUFDRiwyREFBQyxnRUFBSyxJQUNGLHVCQUF1QixFQUFDLG9CQUFvQixFQUM1QyxnQkFBZ0IsRUFBRSxRQUFRLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLEVBQzNELE1BQU0sRUFBRSx3Q0FBd0MsRUFDaEQsY0FBYyxFQUFFLCtCQUErQixFQUMvQyxxQkFBcUIsRUFBRSxJQUFJLEVBQzNCLEtBQUssRUFDRCxDQUFDLGNBQWMsSUFBSSxNQUFNLENBQUMsRUFBRSxLQUFLLFFBQVE7Z0JBQ3JDLENBQUMsQ0FBQztvQkFDSSxPQUFPLEVBQUU7d0JBQ0wsT0FBTyxFQUFFLE1BQU07cUJBQ2xCO2lCQUNKO2dCQUNILENBQUMsQ0FBQyxFQUFFO1lBR1osb0VBQUssRUFBRSxFQUFFLDJCQUEyQixFQUFFLEtBQUssRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsR0FBSSxDQUM5RDtRQUNQLENBQUMsd0NBQXdDLElBQUksb0VBQUssRUFBRSxFQUFFLDJCQUEyQixHQUFJLENBQ3ZGLENBQ04sQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLGlFQUFlLFdBQVcsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM0Zvcm0udHN4PzRkZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDYXJkSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsnO1xuaW1wb3J0IFJlYWN0LCB7IHR5cGUgRnVuY3Rpb25Db21wb25lbnQsIHR5cGUgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdHlwZSBPbWl0IH0gZnJvbSAndXRpbGl0eS10eXBlcyc7XG5cbmltcG9ydCB7IHVzZVBheW1lbnRGb3JtQ29udGV4dCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9jb250ZXh0cyc7XG5pbXBvcnQge1xuICAgIHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMsXG4gICAgSG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L2hvc3RlZC13aWRnZXQtaW50ZWdyYXRpb24nO1xuaW1wb3J0IHtcbiAgICBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkU2VsZWN0b3IsXG4gICAgaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkU2VsZWN0b3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9pbnN0cnVtZW50LXV0aWxzJztcbmltcG9ydCB7IHR5cGUgUGF5bWVudE1ldGhvZFByb3BzIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IE1vZGFsIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0L3VpJztcblxuZXhwb3J0IGVudW0gVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSB7XG4gICAgQ1ZWID0gJ2N2dicsXG4gICAgUEFOID0gJ3BhbicsXG59XG5cbmV4cG9ydCB0eXBlIEFkeWVuVjNGb3JtUHJvcHMgPSBPbWl0PFxuICAgIEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzLFxuICAgIHwgJ29uU2lnbk91dCdcbiAgICB8ICdpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlJ1xuICAgIHwgJ2luc3RydW1lbnRzJ1xuICAgIHwgJ2lzTG9hZGluZ0luc3RydW1lbnRzJ1xuICAgIHwgJ2lzUGF5bWVudERhdGFSZXF1aXJlZCdcbiAgICB8ICdpc1NpZ25lZEluJ1xuICAgIHwgJ2lzSW5zdHJ1bWVudENhcmRDb2RlUmVxdWlyZWQnXG4gICAgfCAnaXNJbnN0cnVtZW50Q2FyZE51bWJlclJlcXVpcmVkJ1xuICAgIHwgJ2xvYWRJbnN0cnVtZW50cydcbiAgICB8ICdzaWduT3V0J1xuICAgIHwgJ2RlaW5pdGlhbGl6ZVBheW1lbnQnXG4+ICYge1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG4gICAgaXNBY2NvdW50SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGU6IGJvb2xlYW47XG4gICAgdmFsaWRhdGVJbnN0cnVtZW50OiAoXG4gICAgICAgIHNob3VsZFNob3dOdW1iZXJGaWVsZDogYm9vbGVhbixcbiAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50OiBDYXJkSW5zdHJ1bWVudCxcbiAgICApID0+IFJlYWN0Tm9kZTtcbiAgICBzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsOiBib29sZWFuO1xuICAgIGlzTW9kYWxWaXNpYmxlOiBib29sZWFuO1xuICAgIGNhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3c6ICgpID0+IHZvaWQ7XG4gICAgYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkOiBzdHJpbmc7XG59O1xuXG5jb25zdCBBZHllblYzRm9ybTogRnVuY3Rpb25Db21wb25lbnQ8QWR5ZW5WM0Zvcm1Qcm9wcyAmIFBheW1lbnRNZXRob2RQcm9wcz4gPSAoe1xuICAgIG1ldGhvZCxcbiAgICBjb250YWluZXJJZCxcbiAgICBpbml0aWFsaXplUGF5bWVudCxcbiAgICBpc0FjY291bnRJbnN0cnVtZW50LFxuICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZSxcbiAgICB2YWxpZGF0ZUluc3RydW1lbnQsXG4gICAgbGFuZ3VhZ2UsXG4gICAgc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbCxcbiAgICBpc01vZGFsVmlzaWJsZSxcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93LFxuICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICBjaGVja291dFN0YXRlLFxuICAgIGNoZWNrb3V0U2VydmljZSxcbiAgICBvblVuaGFuZGxlZEVycm9yLFxuICAgIC4uLnJlc3Rcbn0pID0+IHtcbiAgICBjb25zdCB7IHBheW1lbnRGb3JtIH0gPSB1c2VQYXltZW50Rm9ybUNvbnRleHQoKTtcbiAgICBjb25zdCBjdXN0b21lciA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRDdXN0b21lcigpO1xuICAgIGNvbnN0IHsgaXNMb2FkaW5nSW5zdHJ1bWVudHMgfSA9IGNoZWNrb3V0U3RhdGUuc3RhdHVzZXM7XG4gICAgY29uc3QgeyBpc1BheW1lbnREYXRhUmVxdWlyZWQgfSA9IGNoZWNrb3V0U3RhdGUuZGF0YTtcbiAgICBjb25zdCBpbnN0cnVtZW50cyA9IGNoZWNrb3V0U3RhdGUuZGF0YS5nZXRJbnN0cnVtZW50cyhtZXRob2QpIHx8IFtdO1xuICAgIGNvbnN0IGlzU2lnbmVkSW4gPSBjdXN0b21lcj8uaXNHdWVzdDtcbiAgICBjb25zdCBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlID0gIWlzU2lnbmVkSW4gJiYgQm9vbGVhbihtZXRob2QuY29uZmlnLmlzVmF1bHRpbmdFbmFibGVkKTtcbiAgICBjb25zdCBpc0luc3RydW1lbnRDYXJkQ29kZVJlcXVpcmVkID0gaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuICAgIGNvbnN0IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZCA9IGlzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZFNlbGVjdG9yKGNoZWNrb3V0U3RhdGUpO1xuXG4gICAgY29uc3Qge1xuICAgICAgICBoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbixcbiAgICAgICAgZGlzYWJsZVN1Ym1pdCxcbiAgICAgICAgc2V0RmllbGRWYWx1ZSxcbiAgICAgICAgc2V0U3VibWl0LFxuICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hLFxuICAgIH0gPSBwYXltZW50Rm9ybTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgICA8SG9zdGVkV2lkZ2V0UGF5bWVudENvbXBvbmVudFxuICAgICAgICAgICAgICAgIHsuLi5yZXN0fVxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcklkPXtjb250YWluZXJJZH1cbiAgICAgICAgICAgICAgICBkZWluaXRpYWxpemVQYXltZW50PXtjaGVja291dFNlcnZpY2UuZGVpbml0aWFsaXplUGF5bWVudH1cbiAgICAgICAgICAgICAgICBkaXNhYmxlU3VibWl0PXtkaXNhYmxlU3VibWl0fVxuICAgICAgICAgICAgICAgIGhpZGVDb250ZW50V2hlblNpZ25lZE91dFxuICAgICAgICAgICAgICAgIGhpZGVQYXltZW50U3VibWl0QnV0dG9uPXtoaWRlUGF5bWVudFN1Ym1pdEJ1dHRvbn1cbiAgICAgICAgICAgICAgICBpbml0aWFsaXplUGF5bWVudD17aW5pdGlhbGl6ZVBheW1lbnR9XG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudHM9e2luc3RydW1lbnRzfVxuICAgICAgICAgICAgICAgIGlzQWNjb3VudEluc3RydW1lbnQ9e2lzQWNjb3VudEluc3RydW1lbnR9XG4gICAgICAgICAgICAgICAgaXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZD17aXNJbnN0cnVtZW50Q2FyZENvZGVSZXF1aXJlZH1cbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRDYXJkTnVtYmVyUmVxdWlyZWQ9e2lzSW5zdHJ1bWVudENhcmROdW1iZXJSZXF1aXJlZH1cbiAgICAgICAgICAgICAgICBpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlPXtpc0luc3RydW1lbnRGZWF0dXJlQXZhaWxhYmxlfVxuICAgICAgICAgICAgICAgIGlzTG9hZGluZ0luc3RydW1lbnRzPXtpc0xvYWRpbmdJbnN0cnVtZW50cygpfVxuICAgICAgICAgICAgICAgIGlzUGF5bWVudERhdGFSZXF1aXJlZD17aXNQYXltZW50RGF0YVJlcXVpcmVkKCl9XG4gICAgICAgICAgICAgICAgaXNTaWduZWRJbj17IWlzU2lnbmVkSW59XG4gICAgICAgICAgICAgICAgbG9hZEluc3RydW1lbnRzPXtjaGVja291dFNlcnZpY2UubG9hZEluc3RydW1lbnRzfVxuICAgICAgICAgICAgICAgIG1ldGhvZD17bWV0aG9kfVxuICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3I9e29uVW5oYW5kbGVkRXJyb3J9XG4gICAgICAgICAgICAgICAgc2V0RmllbGRWYWx1ZT17c2V0RmllbGRWYWx1ZX1cbiAgICAgICAgICAgICAgICBzZXRTdWJtaXQ9e3NldFN1Ym1pdH1cbiAgICAgICAgICAgICAgICBzZXRWYWxpZGF0aW9uU2NoZW1hPXtzZXRWYWxpZGF0aW9uU2NoZW1hfVxuICAgICAgICAgICAgICAgIHNob3VsZEhpZGVJbnN0cnVtZW50RXhwaXJ5RGF0ZT17c2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlfVxuICAgICAgICAgICAgICAgIHNob3VsZFJlbmRlckN1c3RvbUluc3RydW1lbnRcbiAgICAgICAgICAgICAgICBzaWduT3V0PXtjaGVja291dFNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyfVxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5zdHJ1bWVudD17dmFsaWRhdGVJbnN0cnVtZW50fVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxCb2R5Q2xhc3NOYW1lPVwibW9kYWwtYm9keS0tY2VudGVyXCJcbiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbkxhYmVsPXtsYW5ndWFnZS50cmFuc2xhdGUoJ2NvbW1vbi5jbG9zZV9hY3Rpb24nKX1cbiAgICAgICAgICAgICAgICBpc09wZW49e3Nob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWx9XG4gICAgICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e2NhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3d9XG4gICAgICAgICAgICAgICAgc2hvdWxkU2hvd0Nsb3NlQnV0dG9uPXt0cnVlfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICAgICAgIWlzTW9kYWxWaXNpYmxlICYmIG1ldGhvZC5pZCA9PT0gJ3NjaGVtZSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19IC8+XG4gICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgeyFzaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsICYmIDxkaXYgaWQ9e2FkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZH0gLz59XG4gICAgICAgIDwvPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZHllblYzRm9ybTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx":
/*!*************************************************************************!*\
  !*** ./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV3PaymentMethodType: () => (/* binding */ AdyenV3PaymentMethodType),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.mjs\");\n/* harmony import */ var _bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/checkout-sdk/integrations/adyen */ \"../checkout-sdk-js/dist/esm/integrations/adyen.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @bigcommerce/checkout/payment-integration-api */ \"./packages/payment-integration-api/src/toResolvableComponent.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/form/contexts/FormContext.tsx\");\n/* harmony import */ var _bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @bigcommerce/checkout/ui */ \"./packages/ui/src/loading/LoadingOverlay.tsx\");\n/* harmony import */ var _AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./AdyenV3CardValidation */ \"./packages/adyen-integration/src/adyenv3/AdyenV3CardValidation.tsx\");\n/* harmony import */ var _AdyenV3Form__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./AdyenV3Form */ \"./packages/adyen-integration/src/adyenv3/AdyenV3Form.tsx\");\n\n\n\n\n\n\n\nvar AdyenV3PaymentMethodType;\n(function (AdyenV3PaymentMethodType) {\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"scheme\"] = \"scheme\";\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    AdyenV3PaymentMethodType[\"bcmc\"] = \"bcmc\";\n})(AdyenV3PaymentMethodType || (AdyenV3PaymentMethodType = {}));\nconst AdyenV3PaymentMethod = (_a) => {\n    var { checkoutService, checkoutState, paymentForm, method, language, onUnhandledError } = _a, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, [\"checkoutService\", \"checkoutState\", \"paymentForm\", \"method\", \"language\", \"onUnhandledError\"]);\n    const ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)({\n        shouldShowModal: true,\n    });\n    const [shouldRenderAdditionalActionContentModal, setShouldRenderAdditionalActionContentModal] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [isAdditionalActionContentModalVisible, setIsAdditionalActionContentModalVisible] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [cardValidationState, setCardValidationState] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n    const containerId = `adyen-${method.id}-component-field`;\n    const additionalActionContainerId = `adyen-${method.id}-additional-action-component-field`;\n    const cardVerificationContainerId = `adyen-${method.id}-tsv-component-field`;\n    const component = method.id;\n    const shouldHideInstrumentExpiryDate = component === AdyenV3PaymentMethodType.bcmc;\n    const onBeforeLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((shopperInteraction) => {\n        ref.current.shouldShowModal = shopperInteraction;\n        setShouldRenderAdditionalActionContentModal(ref.current.shouldShowModal);\n    }, []);\n    const onComplete = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        ref.current.cancelAdditionalAction = undefined;\n    }, []);\n    const onActionHandled = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(true);\n    }, []);\n    const onLoad = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((cancel) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n        ref.current.cancelAdditionalAction = cancel;\n    }, []);\n    const cancelAdditionalActionModalFlow = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(() => {\n        setIsAdditionalActionContentModalVisible(false);\n        setShouldRenderAdditionalActionContentModal(false);\n        if (ref.current.cancelAdditionalAction) {\n            ref.current.cancelAdditionalAction();\n            ref.current.cancelAdditionalAction = undefined;\n        }\n    }, []);\n    const initializeAdyenPayment = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((options, selectedInstrument) => (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(void 0, void 0, void 0, function* () {\n        const adyenOptions = {\n            [AdyenV3PaymentMethodType.scheme]: {\n                hasHolderName: true,\n                holderNameRequired: true,\n            },\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        const selectedInstrumentId = selectedInstrument === null || selectedInstrument === void 0 ? void 0 : selectedInstrument.bigpayToken;\n        return checkoutService.initializePayment(Object.assign(Object.assign({}, options), { integrations: [_bigcommerce_checkout_sdk_integrations_adyen__WEBPACK_IMPORTED_MODULE_1__.createAdyenV3PaymentStrategy], adyenv3: {\n                cardVerificationContainerId: selectedInstrumentId && cardVerificationContainerId,\n                containerId,\n                hasVaultedInstruments: !!selectedInstrumentId,\n                options: adyenOptions[component],\n                additionalActionOptions: {\n                    widgetSize: '05',\n                    containerId: additionalActionContainerId,\n                    onBeforeLoad,\n                    onComplete,\n                    onLoad,\n                    onActionHandled,\n                },\n                shouldShowNumberField: ref.current.shouldShowNumberField,\n                validateCardFields: (state) => {\n                    setCardValidationState(state);\n                },\n            } }));\n    }), [\n        component,\n        cardVerificationContainerId,\n        containerId,\n        additionalActionContainerId,\n        onBeforeLoad,\n        onComplete,\n        onLoad,\n        onActionHandled,\n        checkoutService,\n    ]);\n    const validateInstrument = (shouldShowNumberField, selectedInstrument) => {\n        ref.current.shouldShowNumberField = shouldShowNumberField;\n        return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3CardValidation__WEBPACK_IMPORTED_MODULE_6__[\"default\"], { cardValidationState: cardValidationState, paymentMethod: method, selectedInstrument: selectedInstrument, shouldShowNumberField: shouldShowNumberField, verificationFieldsContainerId: cardVerificationContainerId }));\n    };\n    const isAccountInstrument = () => {\n        switch (method.method) {\n            case 'directEbanking':\n            case 'giropay':\n            case 'ideal':\n            case 'sepadirectdebit':\n                return true;\n            default:\n                return false;\n        }\n    };\n    const isLoading = checkoutState.statuses.isLoadingInstruments() ||\n        checkoutState.statuses.isLoadingPaymentMethod(method.id);\n    const formContextProps = {\n        isSubmitted: paymentForm.isSubmitted(),\n        setSubmitted: paymentForm.setSubmitted,\n    };\n    return (react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_4__[\"default\"].Provider, { value: formContextProps },\n        react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_bigcommerce_checkout_ui__WEBPACK_IMPORTED_MODULE_5__[\"default\"], { hideContentWhenLoading: true, isLoading: isLoading },\n            react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_AdyenV3Form__WEBPACK_IMPORTED_MODULE_7__[\"default\"], Object.assign({}, rest, { additionalActionContainerId: additionalActionContainerId, cancelAdditionalActionModalFlow: cancelAdditionalActionModalFlow, checkoutService: checkoutService, checkoutState: checkoutState, containerId: containerId, hideContentWhenSignedOut: true, initializePayment: initializeAdyenPayment, isAccountInstrument: isAccountInstrument(), isModalVisible: isAdditionalActionContentModalVisible, language: language, method: method, onUnhandledError: onUnhandledError, paymentForm: paymentForm, shouldHideInstrumentExpiryDate: shouldHideInstrumentExpiryDate, shouldRenderAdditionalActionContentModal: shouldRenderAdditionalActionContentModal, validateInstrument: validateInstrument })))));\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_bigcommerce_checkout_payment_integration_api__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(AdyenV3PaymentMethod, [{ gateway: 'adyenv3' }]));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvYWR5ZW52My9BZHllblYzUGF5bWVudE1ldGhvZC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBTTRGO0FBQ1A7QUFPOUI7QUFDZ0I7QUFFWDtBQUNwQjtBQU14QyxJQUFZLHdCQUtYO0FBTEQsV0FBWSx3QkFBd0I7SUFDaEMsZ0VBQWdFO0lBQ2hFLDZDQUFpQjtJQUNqQixnRUFBZ0U7SUFDaEUseUNBQWE7QUFDakIsQ0FBQyxFQUxXLHdCQUF3QixLQUF4Qix3QkFBd0IsUUFLbkM7QUFRRCxNQUFNLG9CQUFvQixHQUEwQyxDQUFDLEVBUXBFLEVBQUUsRUFBRTtRQVJnRSxFQUNqRSxlQUFlLEVBQ2YsYUFBYSxFQUNiLFdBQVcsRUFDWCxNQUFNLEVBQ04sUUFBUSxFQUNSLGdCQUFnQixPQUVuQixFQURNLElBQUkscURBUDBELDZGQVFwRSxDQURVO0lBRVAsTUFBTSxHQUFHLEdBQUcsNkNBQU0sQ0FBd0I7UUFDdEMsZUFBZSxFQUFFLElBQUk7S0FDeEIsQ0FBQyxDQUFDO0lBRUgsTUFBTSxDQUFDLHdDQUF3QyxFQUFFLDJDQUEyQyxDQUFDLEdBQ3pGLCtDQUFRLENBQVUsS0FBSyxDQUFDLENBQUM7SUFDN0IsTUFBTSxDQUFDLHFDQUFxQyxFQUFFLHdDQUF3QyxDQUFDLEdBQ25GLCtDQUFRLENBQVUsS0FBSyxDQUFDLENBQUM7SUFDN0IsTUFBTSxDQUFDLG1CQUFtQixFQUFFLHNCQUFzQixDQUFDLEdBQUcsK0NBQVEsRUFBd0IsQ0FBQztJQUN2RixNQUFNLFdBQVcsR0FBRyxTQUFTLE1BQU0sQ0FBQyxFQUFFLGtCQUFrQixDQUFDO0lBQ3pELE1BQU0sMkJBQTJCLEdBQUcsU0FBUyxNQUFNLENBQUMsRUFBRSxvQ0FBb0MsQ0FBQztJQUMzRixNQUFNLDJCQUEyQixHQUFHLFNBQVMsTUFBTSxDQUFDLEVBQUUsc0JBQXNCLENBQUM7SUFDN0UsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUM1QixNQUFNLDhCQUE4QixHQUFHLFNBQVMsS0FBSyx3QkFBd0IsQ0FBQyxJQUFJLENBQUM7SUFFbkYsTUFBTSxZQUFZLEdBQUcsa0RBQVcsQ0FBQyxDQUFDLGtCQUEyQixFQUFFLEVBQUU7UUFDN0QsR0FBRyxDQUFDLE9BQU8sQ0FBQyxlQUFlLEdBQUcsa0JBQWtCLENBQUM7UUFFakQsMkNBQTJDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUM3RSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxNQUFNLFVBQVUsR0FBRyxrREFBVyxDQUFDLEdBQUcsRUFBRTtRQUNoQyx3Q0FBd0MsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCwyQ0FBMkMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuRCxHQUFHLENBQUMsT0FBTyxDQUFDLHNCQUFzQixHQUFHLFNBQVMsQ0FBQztJQUNuRCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxNQUFNLGVBQWUsR0FBRyxrREFBVyxDQUFDLEdBQUcsRUFBRTtRQUNyQyx3Q0FBd0MsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxNQUFNLE1BQU0sR0FBRyxrREFBVyxDQUFDLENBQUMsTUFBWSxFQUFFLEVBQUU7UUFDeEMsbUVBQW1FO1FBQ25FLEdBQUcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLEdBQUcsTUFBTSxDQUFDO0lBQ2hELENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUVQLE1BQU0sK0JBQStCLEdBQUcsa0RBQVcsQ0FBQyxHQUFHLEVBQUU7UUFDckQsd0NBQXdDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDaEQsMkNBQTJDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbkQsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLHNCQUFzQixFQUFFLENBQUM7WUFDckMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO1lBQ3JDLEdBQUcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLEdBQUcsU0FBUyxDQUFDO1FBQ25ELENBQUM7SUFDTCxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFFUCxNQUFNLHNCQUFzQixHQUFvRCxrREFBVyxDQUN2RixDQUFPLE9BQWlDLEVBQUUsa0JBQWtDLEVBQUUsRUFBRSxDQUFDO1FBQzdFLE1BQU0sWUFBWSxHQUFpQjtZQUMvQixDQUFDLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUMvQixhQUFhLEVBQUUsSUFBSTtnQkFDbkIsa0JBQWtCLEVBQUUsSUFBSTthQUMzQjtTQUNKLENBQUM7UUFDRix1RUFBdUU7UUFDdkUsTUFBTSxvQkFBb0IsR0FBRyxrQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxXQUFXLENBQUM7UUFFN0QsT0FBTyxlQUFlLENBQUMsaUJBQWlCLGlDQUNqQyxPQUFPLEtBQ1YsWUFBWSxFQUFFLENBQUMsc0dBQTRCLENBQUMsRUFDNUMsT0FBTyxFQUFFO2dCQUNMLDJCQUEyQixFQUN2QixvQkFBb0IsSUFBSSwyQkFBMkI7Z0JBQ3ZELFdBQVc7Z0JBQ1gscUJBQXFCLEVBQUUsQ0FBQyxDQUFDLG9CQUFvQjtnQkFDN0MsT0FBTyxFQUFFLFlBQVksQ0FBQyxTQUFTLENBQUM7Z0JBQ2hDLHVCQUF1QixFQUFFO29CQUNyQixVQUFVLEVBQUUsSUFBSTtvQkFDaEIsV0FBVyxFQUFFLDJCQUEyQjtvQkFDeEMsWUFBWTtvQkFDWixVQUFVO29CQUNWLE1BQU07b0JBQ04sZUFBZTtpQkFDbEI7Z0JBQ0QscUJBQXFCLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxxQkFBcUI7Z0JBQ3hELGtCQUFrQixFQUFFLENBQUMsS0FBMkIsRUFBRSxFQUFFO29CQUNoRCxzQkFBc0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDbEMsQ0FBQzthQUNKLElBQ0gsQ0FBQztJQUNQLENBQUMsR0FDRDtRQUNJLFNBQVM7UUFDVCwyQkFBMkI7UUFDM0IsV0FBVztRQUNYLDJCQUEyQjtRQUMzQixZQUFZO1FBQ1osVUFBVTtRQUNWLE1BQU07UUFDTixlQUFlO1FBQ2YsZUFBZTtLQUNsQixDQUNKLENBQUM7SUFFRixNQUFNLGtCQUFrQixHQUFHLENBQ3ZCLHFCQUE4QixFQUM5QixrQkFBa0MsRUFDcEMsRUFBRTtRQUNBLEdBQUcsQ0FBQyxPQUFPLENBQUMscUJBQXFCLEdBQUcscUJBQXFCLENBQUM7UUFFMUQsT0FBTyxDQUNILDJEQUFDLDhEQUFxQixJQUNsQixtQkFBbUIsRUFBRSxtQkFBbUIsRUFDeEMsYUFBYSxFQUFFLE1BQU0sRUFDckIsa0JBQWtCLEVBQUUsa0JBQWtCLEVBQ3RDLHFCQUFxQixFQUFFLHFCQUFxQixFQUM1Qyw2QkFBNkIsRUFBRSwyQkFBMkIsR0FDNUQsQ0FDTCxDQUFDO0lBQ04sQ0FBQyxDQUFDO0lBRUYsTUFBTSxtQkFBbUIsR0FBRyxHQUFHLEVBQUU7UUFDN0IsUUFBUSxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDcEIsS0FBSyxnQkFBZ0IsQ0FBQztZQUN0QixLQUFLLFNBQVMsQ0FBQztZQUNmLEtBQUssT0FBTyxDQUFDO1lBQ2IsS0FBSyxpQkFBaUI7Z0JBQ2xCLE9BQU8sSUFBSSxDQUFDO1lBRWhCO2dCQUNJLE9BQU8sS0FBSyxDQUFDO1FBQ3JCLENBQUM7SUFDTCxDQUFDLENBQUM7SUFFRixNQUFNLFNBQVMsR0FDWCxhQUFhLENBQUMsUUFBUSxDQUFDLG9CQUFvQixFQUFFO1FBQzdDLGFBQWEsQ0FBQyxRQUFRLENBQUMsc0JBQXNCLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBRTdELE1BQU0sZ0JBQWdCLEdBQUc7UUFDckIsV0FBVyxFQUFFLFdBQVcsQ0FBQyxXQUFXLEVBQUU7UUFDdEMsWUFBWSxFQUFFLFdBQVcsQ0FBQyxZQUFZO0tBQ3pDLENBQUM7SUFFRixPQUFPLENBQ0gsMkRBQUMsZ0VBQVcsQ0FBQyxRQUFRLElBQUMsS0FBSyxFQUFFLGdCQUFnQjtRQUN6QywyREFBQyxnRUFBYyxJQUFDLHNCQUFzQixRQUFDLFNBQVMsRUFBRSxTQUFTO1lBQ3ZELDJEQUFDLG9EQUFXLG9CQUNKLElBQUksSUFDUiwyQkFBMkIsRUFBRSwyQkFBMkIsRUFDeEQsK0JBQStCLEVBQUUsK0JBQStCLEVBQ2hFLGVBQWUsRUFBRSxlQUFlLEVBQ2hDLGFBQWEsRUFBRSxhQUFhLEVBQzVCLFdBQVcsRUFBRSxXQUFXLEVBQ3hCLHdCQUF3QixRQUN4QixpQkFBaUIsRUFBRSxzQkFBc0IsRUFDekMsbUJBQW1CLEVBQUUsbUJBQW1CLEVBQUUsRUFDMUMsY0FBYyxFQUFFLHFDQUFxQyxFQUNyRCxRQUFRLEVBQUUsUUFBUSxFQUNsQixNQUFNLEVBQUUsTUFBTSxFQUNkLGdCQUFnQixFQUFFLGdCQUFnQixFQUNsQyxXQUFXLEVBQUUsV0FBVyxFQUN4Qiw4QkFBOEIsRUFBRSw4QkFBOEIsRUFDOUQsd0NBQXdDLEVBQ3BDLHdDQUF3QyxFQUU1QyxrQkFBa0IsRUFBRSxrQkFBa0IsSUFDeEMsQ0FDVyxDQUNFLENBQzFCLENBQUM7QUFDTixDQUFDLENBQUM7QUFFRixpRUFBZSx5RkFBcUIsQ0FDaEMsb0JBQW9CLEVBQ3BCLENBQUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FDM0IsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0Ly4vcGFja2FnZXMvYWR5ZW4taW50ZWdyYXRpb24vc3JjL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QudHN4PzQ1ZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICB0eXBlIEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgdHlwZSBBZHllblZhbGlkYXRpb25TdGF0ZSxcbiAgICB0eXBlIENhcmRJbnN0cnVtZW50LFxuICAgIHR5cGUgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrJztcbmltcG9ydCB7IGNyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3kgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2ludGVncmF0aW9ucy9hZHllbic7XG5pbXBvcnQgUmVhY3QsIHsgdHlwZSBGdW5jdGlvbkNvbXBvbmVudCwgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IHR5cGUgSG9zdGVkV2lkZ2V0Q29tcG9uZW50UHJvcHMgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvaG9zdGVkLXdpZGdldC1pbnRlZ3JhdGlvbic7XG5pbXBvcnQge1xuICAgIHR5cGUgUGF5bWVudE1ldGhvZFByb3BzLFxuICAgIHR5cGUgUGF5bWVudE1ldGhvZFJlc29sdmVJZCxcbiAgICB0b1Jlc29sdmFibGVDb21wb25lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBGb3JtQ29udGV4dCwgTG9hZGluZ092ZXJsYXkgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQvdWknO1xuXG5pbXBvcnQgQWR5ZW5WM0NhcmRWYWxpZGF0aW9uIGZyb20gJy4vQWR5ZW5WM0NhcmRWYWxpZGF0aW9uJztcbmltcG9ydCBBZHllblYzRm9ybSBmcm9tICcuL0FkeWVuVjNGb3JtJztcblxuZXhwb3J0IGludGVyZmFjZSBBZHllbk9wdGlvbnMge1xuICAgIFtrZXk6IHN0cmluZ106IEFkeWVuQ3JlZGl0Q2FyZENvbXBvbmVudE9wdGlvbnM7XG59XG5cbmV4cG9ydCBlbnVtIEFkeWVuVjNQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICAgIHNjaGVtZSA9ICdzY2hlbWUnLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgICBiY21jID0gJ2JjbWMnLFxufVxuXG5pbnRlcmZhY2UgQWR5ZW5QYXltZW50TWV0aG9kUmVmIHtcbiAgICBzaG91bGRTaG93TW9kYWw6IGJvb2xlYW47XG4gICAgc2hvdWxkU2hvd051bWJlckZpZWxkPzogYm9vbGVhbjtcbiAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uPygpOiB2b2lkO1xufVxuXG5jb25zdCBBZHllblYzUGF5bWVudE1ldGhvZDogRnVuY3Rpb25Db21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzPiA9ICh7XG4gICAgY2hlY2tvdXRTZXJ2aWNlLFxuICAgIGNoZWNrb3V0U3RhdGUsXG4gICAgcGF5bWVudEZvcm0sXG4gICAgbWV0aG9kLFxuICAgIGxhbmd1YWdlLFxuICAgIG9uVW5oYW5kbGVkRXJyb3IsXG4gICAgLi4ucmVzdFxufSkgPT4ge1xuICAgIGNvbnN0IHJlZiA9IHVzZVJlZjxBZHllblBheW1lbnRNZXRob2RSZWY+KHtcbiAgICAgICAgc2hvdWxkU2hvd01vZGFsOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgW3Nob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwsIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxdID1cbiAgICAgICAgdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICAgIGNvbnN0IFtpc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlLCBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlXSA9XG4gICAgICAgIHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgICBjb25zdCBbY2FyZFZhbGlkYXRpb25TdGF0ZSwgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZV0gPSB1c2VTdGF0ZTxBZHllblZhbGlkYXRpb25TdGF0ZT4oKTtcbiAgICBjb25zdCBjb250YWluZXJJZCA9IGBhZHllbi0ke21ldGhvZC5pZH0tY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBhZGRpdGlvbmFsQWN0aW9uQ29udGFpbmVySWQgPSBgYWR5ZW4tJHttZXRob2QuaWR9LWFkZGl0aW9uYWwtYWN0aW9uLWNvbXBvbmVudC1maWVsZGA7XG4gICAgY29uc3QgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkID0gYGFkeWVuLSR7bWV0aG9kLmlkfS10c3YtY29tcG9uZW50LWZpZWxkYDtcbiAgICBjb25zdCBjb21wb25lbnQgPSBtZXRob2QuaWQ7XG4gICAgY29uc3Qgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlID0gY29tcG9uZW50ID09PSBBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuYmNtYztcblxuICAgIGNvbnN0IG9uQmVmb3JlTG9hZCA9IHVzZUNhbGxiYWNrKChzaG9wcGVySW50ZXJhY3Rpb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsID0gc2hvcHBlckludGVyYWN0aW9uO1xuXG4gICAgICAgIHNldFNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWwocmVmLmN1cnJlbnQuc2hvdWxkU2hvd01vZGFsKTtcbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBvbkNvbXBsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgc2V0U2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbChmYWxzZSk7XG4gICAgICAgIHJlZi5jdXJyZW50LmNhbmNlbEFkZGl0aW9uYWxBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfSwgW10pO1xuXG4gICAgY29uc3Qgb25BY3Rpb25IYW5kbGVkID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgICBzZXRJc0FkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWxWaXNpYmxlKHRydWUpO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IG9uTG9hZCA9IHVzZUNhbGxiYWNrKChjYW5jZWw/OiBhbnkpID0+IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXNzaWdubWVudFxuICAgICAgICByZWYuY3VycmVudC5jYW5jZWxBZGRpdGlvbmFsQWN0aW9uID0gY2FuY2VsO1xuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGNhbmNlbEFkZGl0aW9uYWxBY3Rpb25Nb2RhbEZsb3cgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICAgIHNldElzQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbFZpc2libGUoZmFsc2UpO1xuICAgICAgICBzZXRTaG91bGRSZW5kZXJBZGRpdGlvbmFsQWN0aW9uQ29udGVudE1vZGFsKGZhbHNlKTtcblxuICAgICAgICBpZiAocmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbikge1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbigpO1xuICAgICAgICAgICAgcmVmLmN1cnJlbnQuY2FuY2VsQWRkaXRpb25hbEFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGluaXRpYWxpemVBZHllblBheW1lbnQ6IEhvc3RlZFdpZGdldENvbXBvbmVudFByb3BzWydpbml0aWFsaXplUGF5bWVudCddID0gdXNlQ2FsbGJhY2soXG4gICAgICAgIGFzeW5jIChvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHNlbGVjdGVkSW5zdHJ1bWVudDogQ2FyZEluc3RydW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFkeWVuT3B0aW9uczogQWR5ZW5PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIFtBZHllblYzUGF5bWVudE1ldGhvZFR5cGUuc2NoZW1lXToge1xuICAgICAgICAgICAgICAgICAgICBoYXNIb2xkZXJOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBob2xkZXJOYW1lUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50SWQgPSBzZWxlY3RlZEluc3RydW1lbnQ/LmJpZ3BheVRva2VuO1xuXG4gICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRTZXJ2aWNlLmluaXRpYWxpemVQYXltZW50KHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgIGludGVncmF0aW9uczogW2NyZWF0ZUFkeWVuVjNQYXltZW50U3RyYXRlZ3ldLFxuICAgICAgICAgICAgICAgIGFkeWVudjM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnN0cnVtZW50SWQgJiYgY2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgaGFzVmF1bHRlZEluc3RydW1lbnRzOiAhIXNlbGVjdGVkSW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBhZHllbk9wdGlvbnNbY29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbk9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldFNpemU6ICcwNScsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXJJZDogYWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25CZWZvcmVMb2FkLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uTG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQWN0aW9uSGFuZGxlZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlQ2FyZEZpZWxkczogKHN0YXRlOiBBZHllblZhbGlkYXRpb25TdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Q2FyZFZhbGlkYXRpb25TdGF0ZShzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBbXG4gICAgICAgICAgICBjb21wb25lbnQsXG4gICAgICAgICAgICBjYXJkVmVyaWZpY2F0aW9uQ29udGFpbmVySWQsXG4gICAgICAgICAgICBjb250YWluZXJJZCxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZCxcbiAgICAgICAgICAgIG9uQmVmb3JlTG9hZCxcbiAgICAgICAgICAgIG9uQ29tcGxldGUsXG4gICAgICAgICAgICBvbkxvYWQsXG4gICAgICAgICAgICBvbkFjdGlvbkhhbmRsZWQsXG4gICAgICAgICAgICBjaGVja291dFNlcnZpY2UsXG4gICAgICAgIF0sXG4gICAgKTtcblxuICAgIGNvbnN0IHZhbGlkYXRlSW5zdHJ1bWVudCA9IChcbiAgICAgICAgc2hvdWxkU2hvd051bWJlckZpZWxkOiBib29sZWFuLFxuICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ6IENhcmRJbnN0cnVtZW50LFxuICAgICkgPT4ge1xuICAgICAgICByZWYuY3VycmVudC5zaG91bGRTaG93TnVtYmVyRmllbGQgPSBzaG91bGRTaG93TnVtYmVyRmllbGQ7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxBZHllblYzQ2FyZFZhbGlkYXRpb25cbiAgICAgICAgICAgICAgICBjYXJkVmFsaWRhdGlvblN0YXRlPXtjYXJkVmFsaWRhdGlvblN0YXRlfVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2Q9e21ldGhvZH1cbiAgICAgICAgICAgICAgICBzZWxlY3RlZEluc3RydW1lbnQ9e3NlbGVjdGVkSW5zdHJ1bWVudH1cbiAgICAgICAgICAgICAgICBzaG91bGRTaG93TnVtYmVyRmllbGQ9e3Nob3VsZFNob3dOdW1iZXJGaWVsZH1cbiAgICAgICAgICAgICAgICB2ZXJpZmljYXRpb25GaWVsZHNDb250YWluZXJJZD17Y2FyZFZlcmlmaWNhdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaXNBY2NvdW50SW5zdHJ1bWVudCA9ICgpID0+IHtcbiAgICAgICAgc3dpdGNoIChtZXRob2QubWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlICdkaXJlY3RFYmFua2luZyc6XG4gICAgICAgICAgICBjYXNlICdnaXJvcGF5JzpcbiAgICAgICAgICAgIGNhc2UgJ2lkZWFsJzpcbiAgICAgICAgICAgIGNhc2UgJ3NlcGFkaXJlY3RkZWJpdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGlzTG9hZGluZyA9XG4gICAgICAgIGNoZWNrb3V0U3RhdGUuc3RhdHVzZXMuaXNMb2FkaW5nSW5zdHJ1bWVudHMoKSB8fFxuICAgICAgICBjaGVja291dFN0YXRlLnN0YXR1c2VzLmlzTG9hZGluZ1BheW1lbnRNZXRob2QobWV0aG9kLmlkKTtcblxuICAgIGNvbnN0IGZvcm1Db250ZXh0UHJvcHMgPSB7XG4gICAgICAgIGlzU3VibWl0dGVkOiBwYXltZW50Rm9ybS5pc1N1Ym1pdHRlZCgpLFxuICAgICAgICBzZXRTdWJtaXR0ZWQ6IHBheW1lbnRGb3JtLnNldFN1Ym1pdHRlZCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPEZvcm1Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtmb3JtQ29udGV4dFByb3BzfT5cbiAgICAgICAgICAgIDxMb2FkaW5nT3ZlcmxheSBoaWRlQ29udGVudFdoZW5Mb2FkaW5nIGlzTG9hZGluZz17aXNMb2FkaW5nfT5cbiAgICAgICAgICAgICAgICA8QWR5ZW5WM0Zvcm1cbiAgICAgICAgICAgICAgICAgICAgey4uLnJlc3R9XG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxBY3Rpb25Db250YWluZXJJZD17YWRkaXRpb25hbEFjdGlvbkNvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93PXtjYW5jZWxBZGRpdGlvbmFsQWN0aW9uTW9kYWxGbG93fVxuICAgICAgICAgICAgICAgICAgICBjaGVja291dFNlcnZpY2U9e2NoZWNrb3V0U2VydmljZX1cbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRTdGF0ZT17Y2hlY2tvdXRTdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfVxuICAgICAgICAgICAgICAgICAgICBoaWRlQ29udGVudFdoZW5TaWduZWRPdXRcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbGl6ZVBheW1lbnQ9e2luaXRpYWxpemVBZHllblBheW1lbnR9XG4gICAgICAgICAgICAgICAgICAgIGlzQWNjb3VudEluc3RydW1lbnQ9e2lzQWNjb3VudEluc3RydW1lbnQoKX1cbiAgICAgICAgICAgICAgICAgICAgaXNNb2RhbFZpc2libGU9e2lzQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbFZpc2libGV9XG4gICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlPXtsYW5ndWFnZX1cbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kPXttZXRob2R9XG4gICAgICAgICAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3I9e29uVW5oYW5kbGVkRXJyb3J9XG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnRGb3JtPXtwYXltZW50Rm9ybX1cbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkSGlkZUluc3RydW1lbnRFeHBpcnlEYXRlPXtzaG91bGRIaWRlSW5zdHJ1bWVudEV4cGlyeURhdGV9XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFJlbmRlckFkZGl0aW9uYWxBY3Rpb25Db250ZW50TW9kYWw9e1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkUmVuZGVyQWRkaXRpb25hbEFjdGlvbkNvbnRlbnRNb2RhbFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5zdHJ1bWVudD17dmFsaWRhdGVJbnN0cnVtZW50fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0xvYWRpbmdPdmVybGF5PlxuICAgICAgICA8L0Zvcm1Db250ZXh0LlByb3ZpZGVyPlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVDb21wb25lbnQ8UGF5bWVudE1ldGhvZFByb3BzLCBQYXltZW50TWV0aG9kUmVzb2x2ZUlkPihcbiAgICBBZHllblYzUGF5bWVudE1ldGhvZCxcbiAgICBbeyBnYXRld2F5OiAnYWR5ZW52MycgfV0sXG4pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\n\n}");

/***/ }),

/***/ "./packages/adyen-integration/src/index.ts":
/*!*************************************************!*\
  !*** ./packages/adyen-integration/src/index.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdyenV2PaymentMethod: () => (/* reexport safe */ _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__[\"default\"]),\n/* harmony export */   AdyenV3PaymentMethod: () => (/* reexport safe */ _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__[\"default\"])\n/* harmony export */ });\n/* harmony import */ var _adyenv2_AdyenV2PaymentMethod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adyenv2/AdyenV2PaymentMethod */ \"./packages/adyen-integration/src/adyenv2/AdyenV2PaymentMethod.tsx\");\n/* harmony import */ var _adyenv3_AdyenV3PaymentMethod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adyenv3/AdyenV3PaymentMethod */ \"./packages/adyen-integration/src/adyenv3/AdyenV3PaymentMethod.tsx\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9wYWNrYWdlcy9hZHllbi1pbnRlZ3JhdGlvbi9zcmMvaW5kZXgudHM/ZTYxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBkZWZhdWx0IGFzIEFkeWVuVjJQYXltZW50TWV0aG9kIH0gZnJvbSAnLi9hZHllbnYyL0FkeWVuVjJQYXltZW50TWV0aG9kJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQWR5ZW5WM1BheW1lbnRNZXRob2QgfSBmcm9tICcuL2FkeWVudjMvQWR5ZW5WM1BheW1lbnRNZXRob2QnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/adyen-integration/src/index.ts\n\n}");

/***/ })

}]);