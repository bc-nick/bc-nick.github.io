"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["vendors-node_modules_bigcommerce_checkout-sdk_dist_esm_integrations_apple-pay_js"],{

/***/ "./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/apple-pay.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/apple-pay.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createApplePayButtonStrategy: () => (/* binding */ ie),\n/* harmony export */   createApplePayCustomerStrategy: () => (/* binding */ Y),\n/* harmony export */   createApplePayPaymentStrategy: () => (/* binding */ q)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"./node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"./node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ \"./node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\nvar o={};function r(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=\"3.128.0\",l=\"3.123.2\",d=\"3.106.0\";class c{constructor(e){this.paymentIntegrationService=e,this.braintreeWindow=window}getSDKVersion(){const e=this.paymentIntegrationService.getState().getStoreConfig(),t=(null==e?void 0:e.checkoutSettings.features)||{};return this.getPreloadedSDKVersion()||(r(t,\"PAYPAL-5809.braintree_hosted_fields_fix_version\")?s:r(t,\"PAYPAL-5636.update_braintree_sdk_version\")?l:d)}getPreloadedSDKVersion(){const e=this.braintreeWindow.braintree;if(e){const t=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.find)(Object.values(e),e=>!!e.VERSION);return null==t?void 0:t.VERSION}}}class h extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class u extends h{constructor(e){super(e||\"Unsupported browser error\"),this.name=\"UnsupportedBrowserError\",this.type=\"unsupported_browser\"}}var p,m,y,g,v,S,b,C;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(p||(p={}));class f extends h{constructor(e){super(function(e){switch(e){case p.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case p.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case p.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case p.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}!function(e){e.ESTIMATED=\"ESTIMATED\",e.FINAL=\"FINAL\",e.NOT_CURRENTLY_KNOWN=\"NOT_CURRENTLY_KNOWN\"}(m||(m={})),function(e){e.Completed=\"COMPLETED\",e.Pending=\"PENDING\",e.Failed=\"FAILED\"}(y||(y={})),function(e){e.TRUSTLY=\"trustly\"}(g||(g={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"cancelled\",e.UNRECOGNIZED=\"unrecognized\"}(v||(v={})),function(e){e.Customer=\"CUSTOMER\",e.Merchant=\"MERCHANT\",e.Network=\"NETWORK\",e.Internal=\"INTERNAL\",e.Unknown=\"UNKNOWN\"}(S||(S={})),function(e){e.KountNotEnabled=\"DATA_COLLECTOR_KOUNT_NOT_ENABLED\"}(b||(b={})),function(e){e.Visa=\"visa\",e.Mastercard=\"mastercard\",e.AmericanExpress=\"american-express\",e.DinersClub=\"diners-club\",e.Discover=\"discover\",e.Jcb=\"jcb\",e.UnionPay=\"union-pay\",e.Maestro=\"maestro\",e.Elo=\"elo\",e.Mir=\"mir\",e.Hiper=\"hiper\",e.Hipercard=\"hipercard\"}(C||(C={}));var _,w,P,I=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};class T{constructor(e){this.braintreeScriptLoader=e}initialize(e){this.setClientToken(e)}deinitialize(){return I(this,void 0,void 0,function*(){yield this.teardownModule(this.dataCollector),this.dataCollector=void 0})}getClient(){return I(this,void 0,void 0,function*(){if(!this.client){const e=this.getClientTokenOrThrow(),t=yield this.braintreeScriptLoader.loadClient();this.client=yield t.create({authorization:e})}return this.client})}getDataCollectorOrThrow(e){return I(this,void 0,void 0,function*(){const t={deviceData:void 0,teardown:()=>Promise.resolve()};if(!this.dataCollector)try{const t=yield this.getClient(),i=yield this.braintreeScriptLoader.loadDataCollector(),n=Object.assign({client:t,kount:!0},e);this.dataCollector=yield i.create(n)}catch(e){if(function(e){return Boolean(\"object\"==typeof e&&null!==e&&(\"type\"in e||\"message\"in e||\"code\"in e))}(e)&&e.code===b.KountNotEnabled)return t;throw e}return this.dataCollector})}getBraintreeGooglePayment(){return I(this,void 0,void 0,function*(){if(!this.googlePayment){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadGooglePayment()]);this.googlePayment=yield t.create({client:e})}return this.googlePayment})}getBraintreeThreeDS(){return I(this,void 0,void 0,function*(){if(!this.threeDS){const[e,t]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.load3DS()]);this.threeDS=yield t.create({client:e,version:2})}return this.threeDS})}getBraintreeLocalPayment(e){return I(this,void 0,void 0,function*(){if(!this.braintreeLocalPayment){const[t,i]=yield Promise.all([this.getClient(),this.braintreeScriptLoader.loadLocalPayment()]);this.braintreeLocalPayment=yield new Promise((n,a)=>{i.create({client:t,merchantAccountId:e},(e,t)=>{e&&a(e),n(t)})})}return this.braintreeLocalPayment})}getUsBankAccount(){return I(this,void 0,void 0,function*(){if(!this.usBankAccount){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadUsBankAccount();this.usBankAccount=yield t.create({client:e})}return this.usBankAccount})}getBraintreeVisaCheckout(){return this.visaCheckout||(this.visaCheckout=Promise.all([this.getClient(),this.braintreeScriptLoader.loadVisaCheckout()]).then(([e,t])=>t.create({client:e}))),this.visaCheckout}getVisaCheckoutSdk(e){return I(this,void 0,void 0,function*(){return this.visaCheckoutSDK||(this.visaCheckoutSDK=yield this.braintreeScriptLoader.loadVisaCheckoutSdk(e)),this.visaCheckoutSDK})}getVenmoCheckoutOrThrow(){return I(this,void 0,void 0,function*(){if(!this.braintreeVenmo){const e=yield this.getClient(),t=yield this.braintreeScriptLoader.loadVenmoCheckout(),i={client:e,allowDesktop:!0,paymentMethodUsage:\"multi_use\"},n=yield t.create(i);if(!n.isBrowserSupported())throw new u;this.braintreeVenmo=n}return this.braintreeVenmo})}setClientToken(e){this.clientToken=e}getClientTokenOrThrow(){if(!this.clientToken)throw new f(p.PaymentNotInitialized);return this.clientToken}teardownModule(e){return e?e.teardown():Promise.resolve()}}class k extends h{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e.Sandbox=\"sandbox\",e.Production=\"production\"}(_||(_={})),function(e){e.Client=\"client\",e.DataCollector=\"dataCollector\",e.Fastlane=\"fastlane\",e.GooglePayment=\"googlePayment\",e.HostedFields=\"hostedFields\",e.LocalPayment=\"localPayment\",e.Paypal=\"paypal\",e.PaypalCheckout=\"paypalCheckout\",e.ThreeDSecure=\"threeDSecure\",e.UsBankAccount=\"usBankAccount\",e.Venmo=\"venmo\",e.VisaCheckout=\"visaCheckout\"}(w||(w={})),function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\"}(P||(P={}));const A={[d]:{[w.Client]:\"sha384-26BXDNnJI23JYRyFBj4xe4sVNrUSSiSSu11kxVXNM/vEPONm4LuL00w6ZaTgQewt\",[w.PaypalCheckout]:\"sha384-B+vzbZwnQtzWBthpkT4TXKUibO65tyeK7eCxSvpblgprTep2+IAXB2Cxxjrn710O\",[w.Paypal]:\"sha384-uyAGL1/3+XJAHnGoNy4eCoXdzJ4f7Ilzp+6w9PNnEjs6DCCz9WMyJjMN1gzc78U+\",[w.LocalPayment]:\"sha384-LIvOEMkIVEwVuYBdVOQc1AC5YbGGlwyfUheS0ACK218D2STuVYQlZ4FyEPowAEfT\",[w.DataCollector]:\"sha384-1bo9JDz+Kscthc085cCKWur8CLwUoBpoNyxsDi7932mCl0zFq3A5mv+FQLw9GHpV\",[w.UsBankAccount]:\"sha384-xmHBVaU+w74V+OebD3AaPONFxHUGMf+QRs8G/JxVPXNNP7MDa2jL0ICWHIe2tTfJ\",[w.GooglePayment]:\"sha384-WKDJl8mqoP82qZpMGH6AbZxnvXnSW8ILV4M64CyMLiugGMwu7LyP89wjCkHqsiBe\",[w.ThreeDSecure]:\"sha384-VQUlpGHzsGvs5XeiGFip7EXRsvoHWEXDVmgCacfbyieZI9mdBOqq3NSoyo28OCOB\",[w.VisaCheckout]:\"sha384-yx7mADfzTN0T43Q6rlH49LIg1EJ0iUZgBp/EczX9LXsUGkySgxrD+nWHQRBkyfoT\",[w.Venmo]:\"sha384-QX4rPjoj1ZDhuG0aSyKs56lEKDqTMTcjYxUHY1SzO5VZDsqIE2NTkqot7KNSCyov\",[w.HostedFields]:\"sha384-VvYBACfSu0Cr/J32uKmxG7AXcNOJE1AzIIL3kbikyS7YKp5fz5Is+NzNP/lyauNy\",[w.Fastlane]:\"sha384-9oGsZMRZwpGtDEDYa/dFt76dECqj1xAni9gIKgc3KfMIiRnR73nEeeUDLiBzxhFa\"},[l]:{[w.Client]:\"sha384-o+nbQGcwNNxIBeXeu3+XmbSq+Cg8R3EN3N0l5hXCgMMU2RGY0t1z0LroSEIAbfAO\",[w.PaypalCheckout]:\"sha384-WrfbWPBS4mH86GAoycPSgiH8hQ8KH7A67C93Hjhunv/xhNk2YpBn3wbFA4Fhg9U/\",[w.Paypal]:\"sha384-VF389nvvrRUgDsTXMxTYORDtVegB9IQa3Cxr//DyJnLYnz8/X8VCzEvck2c+Megt\",[w.LocalPayment]:\"sha384-tZKx2rEQbfmZpoPSY5VPmJEhaq4X75dLvwHMs3VE9U+C8lPyw+hWTIL1+GPvWCIH\",[w.DataCollector]:\"sha384-E6k3wOpP7syCDDwaRDLF06942Y00NkbwJvWi2OQXwwKzGwG5fd3E7RFUvCCecfvO\",[w.UsBankAccount]:\"sha384-258FON8LZGG0W9Qaz4Jij83pZHu30YnKjJA7gNulLBh6CclkucgF+tHDQuYFRYfW\",[w.GooglePayment]:\"sha384-taJ2p/0+n0VH328POAoBiuEbL3tnHUTE9S42hK1V+Txs3X+QYjZOyKW35JgHRFfO\",[w.ThreeDSecure]:\"sha384-+NSZH4Zj3sO5bdWvPKhU5N16QDxeueTVTnUVeleeESkhLSaz4Ob1hh/5myecc9Ym\",[w.VisaCheckout]:\"sha384-66DiBjghxk1OmBj8aksN8gbQ+CwoQcx1vPfiXUN08g1iQVM+BwewF0p7toM3i7SS\",[w.Venmo]:\"sha384-B5UwY42kE4RoLoWbQ7YpqosUlUad2/DlGWiw0HhoZbSPk30CQAaSA10ohyLDTkDU\",[w.HostedFields]:\"sha384-Aw9EesSaUeWxe36PqEHiOyOyOq8M6CIb1gw7/yHNVPRzGtFXXcd2OQ8qXrIlOj2P\",[w.Fastlane]:\"sha384-rhBL1hpZ71JqG+2TsT0Dih47mbjx8cjJCpeZjk9tw3df1gFMKfCTmMyZunhr7H4Y\"},[s]:{[w.Client]:\"sha384-0WNxksIpRP+fYZiIdr12g6DBUQfLDzYCQJZtR/C8KkcwSGhPHfcFp3tTaGcMyFTq\",[w.PaypalCheckout]:\"sha384-lWM1jk4BOxoDNV6Kop7tVNvQgINlmEVz0c/OwM+HNHK3QC8xqwd54Ovrt2QRDTjh\",[w.Paypal]:\"sha384-fXUmVxC2EMZBDXZ7eTHSTL/LFBrHej/MSXT/vTBXvra4lzgLNGvREAp+x0GYObuH\",[w.LocalPayment]:\"sha384-pha1xGuGSkmZH5x9aqHvRaO4xLea7rmQ/79PFj9zxNzxuFcOWZg7gOP7FibygOEC\",[w.DataCollector]:\"sha384-Q6PI2F9eekWbAxhroybl+aEcvqhdowN/EQlGwBUyJOzPFn9982u9xl6SU6XfGKzc\",[w.UsBankAccount]:\"sha384-W3RLQSKJL1tQ3+Y7mP6tmkamtZ8bV4Yw/XxL9Jj5JtXHraD8loMF8hAIG5m2zK7F\",[w.GooglePayment]:\"sha384-TITQMsFWA3elDNGP2mWz2oKBo4qjt+TlqzovcaPoeBiAh/wPBi6nae50ADdgU1/i\",[w.ThreeDSecure]:\"sha384-YiycYN89ZlL/Evcaq4y1ajW1mhd7JYfZBDuOwHtIn4/Jnm20GL+/XCM+zYAwWD8D\",[w.VisaCheckout]:\"sha384-/OdaTv9qrkKzjObtUe6yzfDhHozFW/+uXlrSl736sOZRJpjGQETvpYXqMFFg69xv\",[w.Venmo]:\"sha384-dA+ojdW9vbJS4JavcXyOs9d5uZHJg5dNtYupoPSH2zsXIiYDVS5amLb/u8qmQ6oz\",[w.HostedFields]:\"sha384-31ZkS58+iaWsW06ftW52zzVZFp43WPd7pNYRiddYynSNg6Oh7WGbSFGorAUH6T1z\",[w.Fastlane]:\"sha384-jlbrwNvL3HvLAUCtLSmrnQ2GH1udCUrRS/bVmReAS5fuIVvcW8Pko/Gkg82tlgtr\"}};var M,N=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};class E{constructor(e,t,i){this.scriptLoader=e,this.braintreeHostWindow=t,this.braintreeSDKVersionManager=i}loadClient(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.Client,\"client.min.js\")})}loadFastlane(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.Fastlane,\"fastlane.min.js\")})}loadPaypalCheckout(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.PaypalCheckout,\"paypal-checkout.min.js\")})}loadPaypal(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.Paypal,\"paypal.min.js\")})}loadLocalPayment(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.LocalPayment,\"local-payment.min.js\")})}loadDataCollector(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.DataCollector,\"data-collector.min.js\")})}loadUsBankAccount(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.UsBankAccount,\"us-bank-account.min.js\")})}loadGooglePayment(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.GooglePayment,\"google-payment.min.js\")})}load3DS(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.ThreeDSecure,\"three-d-secure.min.js\")})}loadVisaCheckout(){return this.loadBraintreeModuleOrThrow(w.VisaCheckout,\"visa-checkout.min.js\")}loadVenmoCheckout(){return this.loadBraintreeModuleOrThrow(w.Venmo,\"venmo.min.js\")}loadHostedFields(){return N(this,void 0,void 0,function*(){return this.loadBraintreeModuleOrThrow(w.HostedFields,\"hosted-fields.min.js\")})}loadVisaCheckoutSdk(e){return N(this,void 0,void 0,function*(){if(this.braintreeHostWindow.V)return this.braintreeHostWindow.V;const t=e?\"sha384-0eu1s1GtqzXlL9DtLgmwzC5WWlEH/ADRM0n38cVQkvtT+W/gey96rcb1LwuUOPDm\":\"sha384-1f1csvP3ZFxg4dILH1GaY4LHlZ0oX7Rk83rxmLlwbnIi4TM0NYzXoev1VoEiVDS6\";return this.scriptLoader.loadScript(`//${e?\"sandbox-\":\"\"}assets.secure.checkout.visa.com/checkout-widget/resources/js/integration/v1/sdk.js`,{async:!0,attributes:{integrity:t,crossorigin:\"anonymous\"}}).then(()=>{if(!this.braintreeHostWindow.V)throw new k;return this.braintreeHostWindow.V})})}loadBraintreeModuleOrThrow(e,t){return N(this,void 0,void 0,function*(){let i=this.getBraintreeModule(e);if(i)return i;const n=this.braintreeSDKVersionManager.getSDKVersion(),a=`//js.braintreegateway.com/web/${n}/js/${t}`,o=n in A?this.getIntegrityValuesByModuleName(e,n):void 0;if(yield this.scriptLoader.loadScript(a,o?{async:!0,attributes:{integrity:o,crossorigin:\"anonymous\"}}:void 0),i=this.getBraintreeModule(e),!i)throw new k;return i})}getBraintreeModule(e){var t;return null===(t=this.braintreeHostWindow.braintree)||void 0===t?void 0:t[e]}getIntegrityValuesByModuleName(e,t){const i=A[t][e];if(!i)throw new Error(\"Unexpected fileName value\");return i}}function O(e,t){return Object.assign(e,{resolveIds:t})}class D extends h{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class B extends D{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class L extends h{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}class z extends h{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}!function(e){e.BRAINTREE=\"braintree\",e.BRAINTREE_FASTLANE=\"braintreeacceleratedcheckout\"}(M||(M={}));var x,U=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Shipping=\"Shipping\",e.Subtotal=\"Subtotal\",e.StoreCredit=\"Store Credit\"}(x||(x={}));class F{constructor(e,t,i,n,a){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=a,this._shippingLabel=x.Shipping,this._subTotalLabel=x.Subtotal,this._storeCreditLabel=x.StoreCredit}initialize(e){var t,i,n,a;return U(this,void 0,void 0,function*(){if(!(null==e?void 0:e.methodId))throw new D('Unable to submit payment because \"options.methodId\" argument is not provided.');const{methodId:o}=e;yield this._applePayScriptLoader.loadSdk(),this._shippingLabel=(null===(t=e.applepay)||void 0===t?void 0:t.shippingLabel)||x.Shipping,this._subTotalLabel=(null===(i=e.applepay)||void 0===i?void 0:i.subtotalLabel)||x.Subtotal,this._storeCreditLabel=(null===(n=e.applepay)||void 0===n?void 0:n.storeCreditLabel)||x.StoreCredit;const r=(yield this._paymentIntegrationService.loadPaymentMethod(o)).getPaymentMethodOrThrow(o);(null===(a=r.initializationData)||void 0===a?void 0:a.gateway)===M.BRAINTREE&&(yield this._initializeBraintreeSdk())})}execute(e,t){return U(this,void 0,void 0,function*(){const{payment:i}=e,n=this._paymentIntegrationService.getState();if(!i)throw new B([\"payment\"]);const{methodId:a}=i,o=n.getPaymentMethodOrThrow(a),r=this._getBaseRequest(n,o),s=this._sessionFactory.create(r);return yield this._paymentIntegrationService.submitOrder({useStoreCredit:e.useStoreCredit},t),s.begin(),new Promise((e,t)=>{this._handleApplePayEvents(s,o,{resolve:e,reject:t})})})}finalize(){return Promise.reject(new L)}deinitialize(){return Promise.resolve()}_getBaseRequest(e,t){const i=e.getCheckoutOrThrow(),n=e.getCartOrThrow(),a=e.getStoreConfigOrThrow(),{storeProfile:{storeCountryCode:o,storeName:r}}=a,{currency:{code:s,decimalPlaces:l}}=n,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=t,{grandTotal:h,isStoreCreditApplied:u,outstandingBalance:p}=i,m=[{label:this._subTotalLabel,amount:`${i.subtotal.toFixed(l)}`}];if(i.taxes.forEach(e=>m.push({label:e.name,amount:`${e.amount.toFixed(l)}`})),m.push({label:this._shippingLabel,amount:`${i.shippingCostTotal.toFixed(l)}`}),u){const{storeCredit:t}=e.getCustomerOrThrow();m.push({label:this._storeCreditLabel,amount:`-${Math.min(h,t).toFixed(l)}`})}return{countryCode:o,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:m,total:{label:r,amount:`${p.toFixed(l)}`,type:\"final\"}}}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>U(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){throw new Error(\"Merchant validation failed\")}}),e.oncancel=()=>U(this,void 0,void 0,function*(){return i.reject(new z(\"Continue with applepay\"))}),e.onpaymentauthorized=n=>this._onPaymentAuthorized(n,e,t,i)}_onValidateMerchant(e,t){return U(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i,n){var a;return U(this,void 0,void 0,function*(){const{token:o}=e.payment;let r;(null===(a=i.initializationData)||void 0===a?void 0:a.gateway)===M.BRAINTREE&&(r=yield this._getBraintreeDeviceData());const s={methodId:i.id,paymentData:{deviceSessionId:r,formattedPayload:{apple_pay_token:{payment_data:o.paymentData,payment_method:o.paymentMethod,transaction_id:o.transactionIdentifier}}}};try{return yield this._paymentIntegrationService.submitPayment(s),t.completePayment(ApplePaySession.STATUS_SUCCESS),n.resolve()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),n.reject(new f(p.PaymentNotInitialized))}})}_getBraintreeDeviceData(){return U(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return U(this,void 0,void 0,function*(){const e=this._paymentIntegrationService.getState();let t=e.getPaymentMethod(M.BRAINTREE_FASTLANE)||e.getPaymentMethod(M.BRAINTREE);t||(yield this._paymentIntegrationService.loadPaymentMethod(M.BRAINTREE),t=e.getPaymentMethod(M.BRAINTREE)),t&&t.clientToken&&t.initializationData&&this._braintreeSdk.initialize(t.clientToken)})}}function R(e){if(!function(e){return\"ApplePaySession\"in e}(e))throw new Error(\"Apple pay is not supported\")}class V{create(e){return R(window),new ApplePaySession(1,e)}}class j{constructor(e){this.scriptLoader=e,this.sdkVersion=\"1.latest\"}loadSdk(){return e=this,t=void 0,n=function*(){yield this.scriptLoader.loadScript(`https://applepay.cdn-apple.com/jsapi/${this.sdkVersion}/apple-pay-sdk.js`),R(window)},new((i=void 0)||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())});// removed by dead control flow\n var e, t, i, n; }}const q=O(n=>{const{getHost:a}=n.getState(),o=new c(n);return new F((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:a()}),n,new V,new T(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,o)),new j(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);var H;!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(H||(H={}));class W extends h{constructor(e){super(function(e){switch(e){case H.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case H.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case H.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case H.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case H.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case H.MissingCheckoutConfig:case H.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case H.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case H.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case H.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case H.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case H.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case H.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class G extends h{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var $,K=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}($||($={}));class X{constructor(e,t,i,n,o){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=o,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._onError=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._onClick=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._subTotalLabel=$.Subtotal,this._shippingLabel=$.Shipping,this._hasApplePaySession=!1}initialize(e){var t;return K(this,void 0,void 0,function*(){const{methodId:i,applepay:n}=e;if(!i||!n)throw new W(H.MissingPaymentMethod);const{container:o,shippingLabel:r,subtotalLabel:s,onError:l=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,onClick:d=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,onPaymentAuthorize:c}=n;this._shippingLabel=r||$.Shipping,this._subTotalLabel=s||$.Subtotal,this._onAuthorizeCallback=c,this._onError=l,this._onClick=d;let h=this._paymentIntegrationService.getState();yield this._applePayScriptLoader.loadSdk();try{this._paymentMethod=h.getPaymentMethodOrThrow(i)}catch(e){h=yield this._paymentIntegrationService.loadPaymentMethod(i),this._paymentMethod=h.getPaymentMethodOrThrow(i)}yield this._paymentIntegrationService.verifyCheckoutSpamProtection(),this._applePayButton=this._createButton(o),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===M.BRAINTREE&&(yield this._initializeBraintreeSdk())})}deinitialize(){return Promise.resolve()}signIn(){throw new G('In order to sign in via Apple, the shopper must click on \"Apple Pay\" button.')}signOut(){throw new G(\"Need to do signout via apple.\")}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}_createButton(e){const t=document.getElementById(e);if(!t)throw new D(\"Unable to create sign-in button without valid container ID.\");const i=this._createApplePayButtonElement();return t.appendChild(i),i}_createApplePayButtonElement(){const e=document.createElement(\"apple-pay-button\");return e.setAttribute(\"buttonstyle\",\"black\"),e.setAttribute(\"type\",\"plain\"),e.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 40px; --apple-pay-button-border-radius: 4px;\"),e}_handleWalletButtonClick(e){if(e.preventDefault(),this._hasApplePaySession)return;this._onClick();const t=this._paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getStoreConfigOrThrow(),a=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new W(H.MissingPaymentMethod);const o=this._getBaseRequest(i,a,n,this._paymentMethod),r=this._sessionFactory.create(o);this._handleApplePayEvents(r,this._paymentMethod,n),r.begin(),this._hasApplePaySession=!0}_getBaseRequest(e,t,i,n){var a;const{storeProfile:{storeCountryCode:o,storeName:r}}=i,{currency:{code:s,decimalPlaces:l}}=e,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=n,h=e.lineItems.physicalItems.length>0,u={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:o,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:[],total:h?{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"pending\"}:{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"final\"}};if(h)null===(a=u.requiredShippingContactFields)||void 0===a||a.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(l)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(l)}`})),u.lineItems=e}return u}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>K(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){this._onError(e)}}),e.onshippingcontactselected=t=>K(this,void 0,void 0,function*(){return this._handleShippingContactSelected(e,i,t)}),e.onshippingmethodselected=t=>K(this,void 0,void 0,function*(){return this._handleShippingMethodSelected(e,i,t)}),e.oncancel=()=>K(this,void 0,void 0,function*(){this._hasApplePaySession=!1;try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){return this._onError(new z)}}),e.onpaymentauthorized=i=>K(this,void 0,void 0,function*(){return this._onPaymentAuthorized(i,e,t)})}_handleShippingContactSelected(e,t,i){var n;return K(this,void 0,void 0,function*(){const a=this._transformContactToAddress(i.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(a)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const{storeProfile:{storeName:o}}=t;let r=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:s}}=r.getCartOrThrow();let l=r.getCheckoutOrThrow();const d=null===(n=l.consignments[0].selectedShippingOption)||void 0===n?void 0:n.id,c=l.consignments[0].availableShippingOptions,h=null==c?void 0:c.find(({id:e})=>e===d),u=null==c?void 0:c.filter(e=>e.id!==d),p=h?[{label:h.description,amount:`${h.cost.toFixed(s)}`,detail:h.additionalDescription,identifier:h.id}]:[];if(u&&[...u.filter(e=>e.isRecommended),...u.filter(e=>!e.isRecommended)].forEach(e=>p.push({label:e.description,amount:`${e.cost.toFixed(s)}`,detail:e.additionalDescription,identifier:e.id})),!(c instanceof Array))throw new Error(\"Shipping options not available.\");if(0===c.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:o,amount:`${l.grandTotal.toFixed(s)}`},[]);const m=c.find(e=>e.isRecommended),y=m?m.id:c[0].id,g=h?h.id:y;try{yield this._updateShippingOption(g)}catch(e){return this._onError(e)}r=this._paymentIntegrationService.getState(),l=r.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:p,newTotal:{type:\"final\",label:o,amount:`${l.grandTotal.toFixed(s)}`},newLineItems:this._getUpdatedLineItems(l,s)})})}_handleShippingMethodSelected(e,t,i){return K(this,void 0,void 0,function*(){const{storeProfile:{storeName:n}}=t,{shippingMethod:{identifier:a}}=i;try{yield this._updateShippingOption(a)}catch(t){return e.abort(),this._hasApplePaySession=!1,this._onError(t)}const o=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:r}}=o.getCartOrThrow(),s=o.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:n,amount:`${s.grandTotal.toFixed(r)}`},newLineItems:this._getUpdatedLineItems(s,r)})})}_getUpdatedLineItems(e,t){const i=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>i.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),i.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),i}_updateShippingOption(e){return K(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return K(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i){var n;return K(this,void 0,void 0,function*(){const{token:a,billingContact:o,shippingContact:r}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let l;(null===(n=i.initializationData)||void 0===n?void 0:n.gateway)===M.BRAINTREE&&(l=yield this._getBraintreeDeviceData());const d={methodId:i.id,paymentData:{deviceSessionId:l,formattedPayload:{apple_pay_token:{payment_data:a.paymentData,payment_method:a.paymentMethod,transaction_id:a.transactionIdentifier}}}},c=this._transformContactToAddress(o),h=this._transformContactToAddress(r),u=null==r?void 0:r.emailAddress,p=(null==r?void 0:r.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},c),{email:u,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(h)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(d),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){return t.completePayment(ApplePaySession.STATUS_FAILURE),this._onError(e)}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return K(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return K(this,void 0,void 0,function*(){yield this._paymentIntegrationService.loadPaymentMethod(M.BRAINTREE);const e=this._paymentIntegrationService.getState().getPaymentMethod(M.BRAINTREE);e&&e.clientToken&&e.initializationData&&this._braintreeSdk.initialize(e.clientToken)})}}const Y=O(n=>{const{getHost:a}=n.getState(),o=new c(n);return new X((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:a()}),n,new V,new T(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,o)),new j(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);class Q extends h{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}var Z,J,ee=function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}l((n=n.apply(e,t||[])).next())})};!function(e){e.Subtotal=\"Subtotal\",e.Shipping=\"Shipping\"}(Z||(Z={})),function(e){e.Black=\"black\",e.White=\"white\",e.WhiteBorder=\"white-border\"}(J||(J={}));class te{constructor(e,t,i,n,o){this._requestSender=e,this._paymentIntegrationService=t,this._sessionFactory=i,this._braintreeSdk=n,this._applePayScriptLoader=o,this._onAuthorizeCallback=lodash__WEBPACK_IMPORTED_MODULE_2__.noop,this._subTotalLabel=Z.Subtotal,this._shippingLabel=Z.Shipping}initialize(e){var t,i;return ee(this,void 0,void 0,function*(){const{methodId:n,containerId:a,applepay:o}=e;if(!n||!o)throw new W(H.MissingPaymentMethod);yield this._applePayScriptLoader.loadSdk();const{onPaymentAuthorize:r,buyNowInitializeOptions:s,requiresShipping:l}=o;this._requiresShipping=l,this._buyNowInitializeOptions=s,this._onAuthorizeCallback=r,s||(yield this._paymentIntegrationService.loadDefaultCheckout()),yield this._paymentIntegrationService.loadPaymentMethod(n);const d=this._paymentIntegrationService.getState();return this._paymentMethod=d.getPaymentMethodOrThrow(n),d.getCart()&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection()),(null===(t=this._paymentMethod.initializationData)||void 0===t?void 0:t.gateway)===M.BRAINTREE&&(yield this._initializeBraintreeSdk()),this._applePayButton=this._createButton(a,null===(i=this._paymentMethod.initializationData)||void 0===i?void 0:i.styleOption),this._applePayButton.addEventListener(\"click\",this._handleWalletButtonClick.bind(this)),Promise.resolve()})}deinitialize(){return Promise.resolve()}_createButton(e,t){const i=document.getElementById(e);if(!i)throw new D(\"Unable to create wallet button without valid container ID.\");const n=this._createApplePayButtonElement(t);return i.appendChild(n),n}_createApplePayButtonElement(e){const t=document.createElement(\"apple-pay-button\");return t.setAttribute(\"buttonstyle\",(e=>{switch(e){case J.White:return\"white\";case J.WhiteBorder:return\"white-outline\";case J.Black:default:return\"black\"}})(e)),t.setAttribute(\"type\",\"plain\"),t.setAttribute(\"style\",\"--apple-pay-button-width: 100%; --apple-pay-button-height: 40px; --apple-pay-button-border-radius: 4px;\"),t}_handleWalletButtonClick(e){var t;return ee(this,void 0,void 0,function*(){if(e.preventDefault(),!this._paymentMethod||!this._paymentMethod.initializationData)throw new W(H.MissingPaymentMethod);if(this._buyNowInitializeOptions&&\"function\"==typeof this._buyNowInitializeOptions.getBuyNowCartRequestBody){const{countryCode:e,currencyCode:i,merchantCapabilities:n,supportedNetworks:a,storeName:o}=this._paymentMethod.initializationData,r=this._getRequestWithEmptyTotal(e,i,a,n);this._requiresShipping&&(null===(t=r.requiredShippingContactFields)||void 0===t||t.push(\"postalAddress\"));const s=this._sessionFactory.create(r);this._handleApplePayEvents(s,this._paymentMethod,o),s.begin()}else{const e=this._paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getStoreConfigOrThrow(),n=e.getCheckoutOrThrow(),a=this._getBaseRequest(t,n,i,this._paymentMethod),o=this._sessionFactory.create(a);this._handleApplePayEvents(o,this._paymentMethod,i.storeProfile.storeName),o.begin()}})}_getRequestWithEmptyTotal(e,t,i,n){return{countryCode:e,currencyCode:t,supportedNetworks:i,merchantCapabilities:n,total:{label:\"\",amount:\"0\",type:\"pending\"},requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"]}}_getBaseRequest(e,t,i,n){var a;const{storeProfile:{storeCountryCode:o,storeName:r}}=i,{currency:{code:s,decimalPlaces:l}}=e,{initializationData:{merchantCapabilities:d,supportedNetworks:c}}=n,h=e.lineItems.physicalItems.length>0,u={requiredBillingContactFields:[\"postalAddress\"],requiredShippingContactFields:[\"email\",\"phone\"],countryCode:o,currencyCode:s,merchantCapabilities:d,supportedNetworks:c,lineItems:[],total:h?{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"pending\"}:{label:r,amount:`${t.grandTotal.toFixed(l)}`,type:\"final\"}};if(h)null===(a=u.requiredShippingContactFields)||void 0===a||a.push(\"postalAddress\");else{const e=[{label:this._subTotalLabel,amount:`${t.subtotal.toFixed(l)}`}];t.taxes.forEach(t=>e.push({label:t.name,amount:`${t.amount.toFixed(l)}`})),u.lineItems=e}return u}_handleApplePayEvents(e,t,i){e.onvalidatemerchant=i=>ee(this,void 0,void 0,function*(){try{const{body:n}=yield this._onValidateMerchant(t,i);e.completeMerchantValidation(n)}catch(e){throw new Error(\"Merchant validation failed\")}}),this._buyNowInitializeOptions&&!this._requiresShipping&&(e.onpaymentmethodselected=()=>ee(this,void 0,void 0,function*(){yield this._createBuyNowCart(),this._handlePaymentMethodSelected(e)})),e.onshippingcontactselected=t=>ee(this,void 0,void 0,function*(){this._buyNowInitializeOptions&&this._requiresShipping&&(yield this._createBuyNowCart()),yield this._handleShippingContactSelected(e,i,t)}),e.onshippingmethodselected=t=>ee(this,void 0,void 0,function*(){yield this._handleShippingMethodSelected(e,i,t)}),e.oncancel=()=>ee(this,void 0,void 0,function*(){try{const e=`/remote-checkout/${t.id}/signout`;return yield this._requestSender.get(e),yield this._paymentIntegrationService.loadCheckout()}catch(e){throw new z}}),e.onpaymentauthorized=i=>ee(this,void 0,void 0,function*(){return this._onPaymentAuthorized(i,e,t)})}_createBuyNowCart(){var e,t;return ee(this,void 0,void 0,function*(){try{const i=null===(t=null===(e=this._buyNowInitializeOptions)||void 0===e?void 0:e.getBuyNowCartRequestBody)||void 0===t?void 0:t.call(e);if(!i)throw new W(H.MissingCart);const n=yield this._paymentIntegrationService.createBuyNowCart(i);yield this._paymentIntegrationService.loadCheckout(n.id);const a=this._paymentIntegrationService.getState(),{shouldExecuteSpamCheck:o}=a.getCheckoutOrThrow();o&&(yield this._paymentIntegrationService.verifyCheckoutSpamProtection())}catch(e){throw new Q}})}_handlePaymentMethodSelected(e){const t=this._paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getStoreConfigOrThrow(),a=t.getCheckoutOrThrow();if(!this._paymentMethod||!this._paymentMethod.initializationData)throw new W(H.MissingPaymentMethod);const o=this._getBaseRequest(i,a,n,this._paymentMethod);delete o.total.type,e.completePaymentMethodSelection({newTotal:o.total,newLineItems:o.lineItems})}_handleShippingContactSelected(e,t,i){var n;return ee(this,void 0,void 0,function*(){const a=this._transformContactToAddress(i.shippingContact);try{yield this._paymentIntegrationService.updateShippingAddress(a)}catch(t){throw e.abort(),new Error(\"Shipping address update failed\")}let o=this._paymentIntegrationService.getState();const{currency:{decimalPlaces:r}}=o.getCartOrThrow();let s=o.getCheckoutOrThrow();const l=null===(n=s.consignments[0].selectedShippingOption)||void 0===n?void 0:n.id,d=s.consignments[0].availableShippingOptions,c=null==d?void 0:d.find(({id:e})=>e===l),h=null==d?void 0:d.filter(e=>e.id!==l),u=c?[{label:c.description,amount:`${c.cost.toFixed(r)}`,detail:c.additionalDescription,identifier:c.id}]:[];if(h&&[...h.filter(e=>e.isRecommended),...h.filter(e=>!e.isRecommended)].forEach(e=>u.push({label:e.description,amount:`${e.cost.toFixed(r)}`,detail:e.additionalDescription,identifier:e.id})),!(d instanceof Array))throw new Error(\"Shipping options not available.\");if(0===d.length)return void e.completeShippingContactSelection(ApplePaySession.STATUS_INVALID_SHIPPING_POSTAL_ADDRESS,[],{type:\"pending\",label:t,amount:`${s.grandTotal.toFixed(r)}`},[]);const p=d.find(e=>e.isRecommended),m=p?p.id:d[0].id,y=c?c.id:m;try{yield this._updateShippingOption(y)}catch(e){throw new Error(\"Shipping options update failed\")}o=this._paymentIntegrationService.getState(),s=o.getCheckoutOrThrow(),e.completeShippingContactSelection({newShippingMethods:u,newTotal:{type:\"final\",label:t,amount:`${s.grandTotal.toFixed(r)}`},newLineItems:this._getUpdatedLineItems(s,r)})})}_handleShippingMethodSelected(e,t,i){return ee(this,void 0,void 0,function*(){const{shippingMethod:{identifier:n}}=i;try{yield this._updateShippingOption(n)}catch(t){throw e.abort(),new Error(\"Shipping option selection update failed.\")}const a=this._paymentIntegrationService.getState(),{currency:{decimalPlaces:o}}=a.getCartOrThrow(),r=a.getCheckoutOrThrow();e.completeShippingMethodSelection({newTotal:{type:\"final\",label:t,amount:`${r.grandTotal.toFixed(o)}`},newLineItems:this._getUpdatedLineItems(r,o)})})}_getUpdatedLineItems(e,t){const i=[{label:this._subTotalLabel,amount:`${e.subtotal.toFixed(t)}`}];return e.taxes.forEach(e=>i.push({label:e.name,amount:`${e.amount.toFixed(t)}`})),i.push({label:this._shippingLabel,amount:`${e.shippingCostTotal.toFixed(t)}`}),i}_updateShippingOption(e){return ee(this,void 0,void 0,function*(){return this._paymentIntegrationService.selectShippingOption(e)})}_onValidateMerchant(e,t){return ee(this,void 0,void 0,function*(){const i=[`validationUrl=${t.validationURL}`,`merchantIdentifier=${e.initializationData.merchantId}`,`displayName=${e.initializationData.storeName}`,`domainName=${window.location.hostname}`].join(\"&\");return this._requestSender.post(`${e.initializationData.paymentsUrl}/api/public/v1/payments/applepay/validate_merchant`,{credentials:!1,headers:{Accept:\"application/json\",\"Content-Type\":\"application/x-www-form-urlencoded\",\"X-XSRF-TOKEN\":null},body:i})})}_onPaymentAuthorized(e,t,i){var n;return ee(this,void 0,void 0,function*(){const{token:a,billingContact:o,shippingContact:r}=e.payment,s=this._paymentIntegrationService.getState().getCartOrThrow().lineItems.physicalItems.length>0;let l;(null===(n=i.initializationData)||void 0===n?void 0:n.gateway)===M.BRAINTREE&&(l=yield this._getBraintreeDeviceData());const d={methodId:i.id,paymentData:{deviceSessionId:l,formattedPayload:{apple_pay_token:{payment_data:a.paymentData,payment_method:a.paymentMethod,transaction_id:a.transactionIdentifier}}}},c=this._transformContactToAddress(o),h=this._transformContactToAddress(r),u=null==r?void 0:r.emailAddress,p=(null==r?void 0:r.phoneNumber)||\"\";try{return yield this._paymentIntegrationService.updateBillingAddress(Object.assign(Object.assign({},c),{email:u,phone:p})),s&&(yield this._paymentIntegrationService.updateShippingAddress(h)),yield this._paymentIntegrationService.submitOrder({useStoreCredit:!1}),yield this._paymentIntegrationService.submitPayment(d),t.completePayment(ApplePaySession.STATUS_SUCCESS),this._onAuthorizeCallback()}catch(e){throw t.completePayment(ApplePaySession.STATUS_FAILURE),new Error(\"Payment cannot complete\")}})}_transformContactToAddress(e){return{firstName:(null==e?void 0:e.givenName)||\"\",lastName:(null==e?void 0:e.familyName)||\"\",city:(null==e?void 0:e.locality)||\"\",company:\"\",address1:(null==e?void 0:e.addressLines)&&e.addressLines[0]||\"\",address2:(null==e?void 0:e.addressLines)&&e.addressLines[1]||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",phone:(null==e?void 0:e.phoneNumber)||\"\",stateOrProvince:(null==e?void 0:e.administrativeArea)||\"\",stateOrProvinceCode:(null==e?void 0:e.administrativeArea)||\"\",customFields:[]}}_getBraintreeDeviceData(){return ee(this,void 0,void 0,function*(){try{const{deviceData:e}=yield this._braintreeSdk.getDataCollectorOrThrow();return e}catch(e){}})}_initializeBraintreeSdk(){return ee(this,void 0,void 0,function*(){yield this._paymentIntegrationService.loadPaymentMethod(M.BRAINTREE);const e=this._paymentIntegrationService.getState().getPaymentMethod(M.BRAINTREE);e&&e.clientToken&&e.initializationData&&this._braintreeSdk.initialize(e.clientToken)})}}const ie=O(n=>{const{getHost:a}=n.getState(),o=new c(n);return new te((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_0__.createRequestSender)({host:a()}),n,new V,new T(new E((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.getScriptLoader)(),window,o)),new j(new _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_1__.ScriptLoader))},[{id:\"applepay\"}]);\n//# sourceMappingURL=apple-pay.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMvYXBwbGUtcGF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBeUwsU0FBUyxxQkFBcUIsTUFBTSx1Q0FBdUMsWUFBWSwrREFBK0QsdUJBQXVCLEVBQUUsc0RBQXNELDBDQUEwQyxRQUFRLGVBQWUsNkRBQTZELGdCQUFnQixzSEFBc0gscUpBQXFKLHlCQUF5Qix1Q0FBdUMsTUFBTSxRQUFRLDRDQUFDLGtDQUFrQyxrQ0FBa0Msc0JBQXNCLGVBQWUsTUFBTSx1VEFBdVQsa0JBQWtCLGVBQWUsMkdBQTJHLG9CQUFvQixhQUFhLHlTQUF5UyxTQUFTLEdBQUcsa0JBQWtCLGVBQWUsa0JBQWtCLFVBQVUsd0hBQXdILHNIQUFzSCx3SEFBd0gsNkhBQTZILDRGQUE0RixpRkFBaUYsYUFBYSxvRkFBb0YsU0FBUyxlQUFlLDhEQUE4RCxTQUFTLGVBQWUsb0JBQW9CLFNBQVMsZUFBZSwrRkFBK0YsU0FBUyxlQUFlLDBHQUEwRyxTQUFTLGVBQWUscURBQXFELFNBQVMsZUFBZSxxUEFBcVAsU0FBUyxHQUFHLDhCQUE4Qix5Q0FBeUMsY0FBYyxJQUFJLGFBQWEsU0FBUyxNQUFNLGNBQWMsSUFBSSxjQUFjLFNBQVMsTUFBTSxjQUFjLE1BQU0sZ0VBQWdFLEtBQUssYUFBYSwrQkFBK0IsR0FBRyxRQUFRLGVBQWUsNkJBQTZCLGNBQWMsdUJBQXVCLGVBQWUsd0NBQXdDLHdFQUF3RSxFQUFFLFlBQVksd0NBQXdDLGlCQUFpQixxRkFBcUYsNEJBQTRCLGdCQUFnQixFQUFFLG1CQUFtQixFQUFFLDJCQUEyQix3Q0FBd0MsU0FBUyxrREFBa0QsMkJBQTJCLHVHQUF1RyxrQkFBa0IsSUFBSSxxQ0FBcUMsU0FBUyxlQUFlLHNGQUFzRix5Q0FBeUMsUUFBUSwwQkFBMEIsRUFBRSw0QkFBNEIsd0NBQXdDLHdCQUF3QixnR0FBZ0csbUNBQW1DLFNBQVMsRUFBRSwwQkFBMEIsRUFB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QUUsRUFBRSw0QkFBNEIsTUFBTSx5Q0FBeUMsTUFBTSwyQ0FBMkMsMEdBQTBHLE1BQU0sdUhBQXVILFNBQVMsMkJBQTJCLG9DQUFvQyxpQkFBaUIsb0dBQW9HLGdKQUFnSixJQUFJLGdHQUFnRyxLQUFLLGdCQUFnQiwwSEFBMEgsa0JBQWtCLHVJQUF1SSxTQUFTLDhGQUE4RixFQUFFLDhCQUE4QixPQUFPLG9oQkFBb2hCLDBCQUEwQix5Q0FBeUMsSUFBSSxNQUFNLGFBQWEsb0RBQW9ELFNBQVMsV0FBVyxFQUFFLDBCQUEwQix5Q0FBeUMscUVBQXFFLGlGQUFpRixxRkFBcUYsR0FBRyxlQUFlLE1BQU0sVUFBVSx5QkFBeUIsY0FBYyxnRkFBQyxFQUFFLFNBQVMsc0JBQXNCLDJFQUFDLHdCQUF3QixvRUFBQyxHQUFHLEdBQUcsY0FBYyxHQUFxSDtBQUNyOTNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2hlY2tvdXQvLi9ub2RlX21vZHVsZXMvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9kaXN0L2VzbS9pbnRlZ3JhdGlvbnMvYXBwbGUtcGF5LmpzPzhmZTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e2NyZWF0ZVJlcXVlc3RTZW5kZXIgYXMgZX1mcm9tXCJAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXJcIjtpbXBvcnR7U2NyaXB0TG9hZGVyIGFzIHQsZ2V0U2NyaXB0TG9hZGVyIGFzIGl9ZnJvbVwiQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXJcIjtpbXBvcnR7ZmluZCBhcyBuLG5vb3AgYXMgYX1mcm9tXCJsb2Rhc2hcIjt2YXIgbz17fTtmdW5jdGlvbiByKGUsdCxpPSEwKXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPWVbdF0pJiZ2b2lkIDAhPT1uP246aX1vLmQ9KGUsdCk9Pntmb3IodmFyIGkgaW4gdClvLm8odCxpKSYmIW8ubyhlLGkpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHtlbnVtZXJhYmxlOiEwLGdldDp0W2ldfSl9LG8ubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCk7Y29uc3Qgcz1cIjMuMTI4LjBcIixsPVwiMy4xMjMuMlwiLGQ9XCIzLjEwNi4wXCI7Y2xhc3MgY3tjb25zdHJ1Y3RvcihlKXt0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U9ZSx0aGlzLmJyYWludHJlZVdpbmRvdz13aW5kb3d9Z2V0U0RLVmVyc2lvbigpe2NvbnN0IGU9dGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0U3RvcmVDb25maWcoKSx0PShudWxsPT1lP3ZvaWQgMDplLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXMpfHx7fTtyZXR1cm4gdGhpcy5nZXRQcmVsb2FkZWRTREtWZXJzaW9uKCl8fChyKHQsXCJQQVlQQUwtNTgwOS5icmFpbnRyZWVfaG9zdGVkX2ZpZWxkc19maXhfdmVyc2lvblwiKT9zOnIodCxcIlBBWVBBTC01NjM2LnVwZGF0ZV9icmFpbnRyZWVfc2RrX3ZlcnNpb25cIik/bDpkKX1nZXRQcmVsb2FkZWRTREtWZXJzaW9uKCl7Y29uc3QgZT10aGlzLmJyYWludHJlZVdpbmRvdy5icmFpbnRyZWU7aWYoZSl7Y29uc3QgdD1uKE9iamVjdC52YWx1ZXMoZSksZT0+ISFlLlZFUlNJT04pO3JldHVybiBudWxsPT10P3ZvaWQgMDp0LlZFUlNJT059fX1jbGFzcyBoIGV4dGVuZHMgRXJyb3J7Y29uc3RydWN0b3IoZSl7dmFyIHQ7c3VwZXIoZXx8XCJBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC5cIiksdGhpcy5uYW1lPVwiU3RhbmRhcmRFcnJvclwiLHRoaXMudHlwZT1cInN0YW5kYXJkXCIsdD1uZXcudGFyZ2V0LnByb3RvdHlwZSxPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdCk6dGhpcy5fX3Byb3RvX189dCxcImZ1bmN0aW9uXCI9PXR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLG5ldy50YXJnZXQpOnRoaXMuc3RhY2s9bmV3IEVycm9yKHRoaXMubWVzc2FnZSkuc3RhY2t9fWNsYXNzIHUgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiVW5zdXBwb3J0ZWQgYnJvd3NlciBlcnJvclwiKSx0aGlzLm5hbWU9XCJVbnN1cHBvcnRlZEJyb3dzZXJFcnJvclwiLHRoaXMudHlwZT1cInVuc3VwcG9ydGVkX2Jyb3dzZXJcIn19dmFyIHAsbSx5LGcsdixTLGIsQzshZnVuY3Rpb24oZSl7ZVtlLkNoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQ9MF09XCJDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkXCIsZVtlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ9MV09XCJDdXN0b21lck5vdEluaXRpYWxpemVkXCIsZVtlLlBheW1lbnROb3RJbml0aWFsaXplZD0yXT1cIlBheW1lbnROb3RJbml0aWFsaXplZFwiLGVbZS5TaGlwcGluZ05vdEluaXRpYWxpemVkPTNdPVwiU2hpcHBpbmdOb3RJbml0aWFsaXplZFwiLGVbZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkPTRdPVwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZFwifShwfHwocD17fSkpO2NsYXNzIGYgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIHAuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgcC5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBwYXltZW50IHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2Nhc2UgcC5TaGlwcGluZ05vdEluaXRpYWxpemVkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuXCI7Y2FzZSBwLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwiO2RlZmF1bHQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLlwifX0oZSkpLHRoaXMuc3VidHlwZT1lLHRoaXMubmFtZT1cIk5vdEluaXRpYWxpemVkRXJyb3JcIix0aGlzLnR5cGU9XCJub3RfaW5pdGlhbGl6ZWRcIn19IWZ1bmN0aW9uKGUpe2UuRVNUSU1BVEVEPVwiRVNUSU1BVEVEXCIsZS5GSU5BTD1cIkZJTkFMXCIsZS5OT1RfQ1VSUkVOVExZX0tOT1dOPVwiTk9UX0NVUlJFTlRMWV9LTk9XTlwifShtfHwobT17fSkpLGZ1bmN0aW9uKGUpe2UuQ29tcGxldGVkPVwiQ09NUExFVEVEXCIsZS5QZW5kaW5nPVwiUEVORElOR1wiLGUuRmFpbGVkPVwiRkFJTEVEXCJ9KHl8fCh5PXt9KSksZnVuY3Rpb24oZSl7ZS5UUlVTVExZPVwidHJ1c3RseVwifShnfHwoZz17fSkpLGZ1bmN0aW9uKGUpe2UuU1VDQ0VFREVEPVwic3VjY2VlZGVkXCIsZS5GQUlMRUQ9XCJmYWlsZWRcIixlLkNBTkNFTEVEPVwiY2FuY2VsbGVkXCIsZS5VTlJFQ09HTklaRUQ9XCJ1bnJlY29nbml6ZWRcIn0odnx8KHY9e30pKSxmdW5jdGlvbihlKXtlLkN1c3RvbWVyPVwiQ1VTVE9NRVJcIixlLk1lcmNoYW50PVwiTUVSQ0hBTlRcIixlLk5ldHdvcms9XCJORVRXT1JLXCIsZS5JbnRlcm5hbD1cIklOVEVSTkFMXCIsZS5Vbmtub3duPVwiVU5LTk9XTlwifShTfHwoUz17fSkpLGZ1bmN0aW9uKGUpe2UuS291bnROb3RFbmFibGVkPVwiREFUQV9DT0xMRUNUT1JfS09VTlRfTk9UX0VOQUJMRURcIn0oYnx8KGI9e30pKSxmdW5jdGlvbihlKXtlLlZpc2E9XCJ2aXNhXCIsZS5NYXN0ZXJjYXJkPVwibWFzdGVyY2FyZFwiLGUuQW1lcmljYW5FeHByZXNzPVwiYW1lcmljYW4tZXhwcmVzc1wiLGUuRGluZXJzQ2x1Yj1cImRpbmVycy1jbHViXCIsZS5EaXNjb3Zlcj1cImRpc2NvdmVyXCIsZS5KY2I9XCJqY2JcIixlLlVuaW9uUGF5PVwidW5pb24tcGF5XCIsZS5NYWVzdHJvPVwibWFlc3Ryb1wiLGUuRWxvPVwiZWxvXCIsZS5NaXI9XCJtaXJcIixlLkhpcGVyPVwiaGlwZXJcIixlLkhpcGVyY2FyZD1cImhpcGVyY2FyZFwifShDfHwoQz17fSkpO3ZhciBfLHcsUCxJPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGEsbyl7ZnVuY3Rpb24gcihlKXt0cnl7bChuLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2wobi50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gbChlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBpP3Q6bmV3IGkoZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKHIscyl9bCgobj1uLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9O2NsYXNzIFR7Y29uc3RydWN0b3IoZSl7dGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXI9ZX1pbml0aWFsaXplKGUpe3RoaXMuc2V0Q2xpZW50VG9rZW4oZSl9ZGVpbml0aWFsaXplKCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudGVhcmRvd25Nb2R1bGUodGhpcy5kYXRhQ29sbGVjdG9yKSx0aGlzLmRhdGFDb2xsZWN0b3I9dm9pZCAwfSl9Z2V0Q2xpZW50KCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmNsaWVudCl7Y29uc3QgZT10aGlzLmdldENsaWVudFRva2VuT3JUaHJvdygpLHQ9eWllbGQgdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZENsaWVudCgpO3RoaXMuY2xpZW50PXlpZWxkIHQuY3JlYXRlKHthdXRob3JpemF0aW9uOmV9KX1yZXR1cm4gdGhpcy5jbGllbnR9KX1nZXREYXRhQ29sbGVjdG9yT3JUaHJvdyhlKXtyZXR1cm4gSSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgdD17ZGV2aWNlRGF0YTp2b2lkIDAsdGVhcmRvd246KCk9PlByb21pc2UucmVzb2x2ZSgpfTtpZighdGhpcy5kYXRhQ29sbGVjdG9yKXRyeXtjb25zdCB0PXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCksaT15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkRGF0YUNvbGxlY3RvcigpLG49T2JqZWN0LmFzc2lnbih7Y2xpZW50OnQsa291bnQ6ITB9LGUpO3RoaXMuZGF0YUNvbGxlY3Rvcj15aWVsZCBpLmNyZWF0ZShuKX1jYXRjaChlKXtpZihmdW5jdGlvbihlKXtyZXR1cm4gQm9vbGVhbihcIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWUmJihcInR5cGVcImluIGV8fFwibWVzc2FnZVwiaW4gZXx8XCJjb2RlXCJpbiBlKSl9KGUpJiZlLmNvZGU9PT1iLktvdW50Tm90RW5hYmxlZClyZXR1cm4gdDt0aHJvdyBlfXJldHVybiB0aGlzLmRhdGFDb2xsZWN0b3J9KX1nZXRCcmFpbnRyZWVHb29nbGVQYXltZW50KCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmdvb2dsZVBheW1lbnQpe2NvbnN0W2UsdF09eWllbGQgUHJvbWlzZS5hbGwoW3RoaXMuZ2V0Q2xpZW50KCksdGhpcy5icmFpbnRyZWVTY3JpcHRMb2FkZXIubG9hZEdvb2dsZVBheW1lbnQoKV0pO3RoaXMuZ29vZ2xlUGF5bWVudD15aWVsZCB0LmNyZWF0ZSh7Y2xpZW50OmV9KX1yZXR1cm4gdGhpcy5nb29nbGVQYXltZW50fSl9Z2V0QnJhaW50cmVlVGhyZWVEUygpe3JldHVybiBJKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtpZighdGhpcy50aHJlZURTKXtjb25zdFtlLHRdPXlpZWxkIFByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWQzRFMoKV0pO3RoaXMudGhyZWVEUz15aWVsZCB0LmNyZWF0ZSh7Y2xpZW50OmUsdmVyc2lvbjoyfSl9cmV0dXJuIHRoaXMudGhyZWVEU30pfWdldEJyYWludHJlZUxvY2FsUGF5bWVudChlKXtyZXR1cm4gSSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYoIXRoaXMuYnJhaW50cmVlTG9jYWxQYXltZW50KXtjb25zdFt0LGldPXlpZWxkIFByb21pc2UuYWxsKFt0aGlzLmdldENsaWVudCgpLHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRMb2NhbFBheW1lbnQoKV0pO3RoaXMuYnJhaW50cmVlTG9jYWxQYXltZW50PXlpZWxkIG5ldyBQcm9taXNlKChuLGEpPT57aS5jcmVhdGUoe2NsaWVudDp0LG1lcmNoYW50QWNjb3VudElkOmV9LChlLHQpPT57ZSYmYShlKSxuKHQpfSl9KX1yZXR1cm4gdGhpcy5icmFpbnRyZWVMb2NhbFBheW1lbnR9KX1nZXRVc0JhbmtBY2NvdW50KCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLnVzQmFua0FjY291bnQpe2NvbnN0IGU9eWllbGQgdGhpcy5nZXRDbGllbnQoKSx0PXlpZWxkIHRoaXMuYnJhaW50cmVlU2NyaXB0TG9hZGVyLmxvYWRVc0JhbmtBY2NvdW50KCk7dGhpcy51c0JhbmtBY2NvdW50PXlpZWxkIHQuY3JlYXRlKHtjbGllbnQ6ZX0pfXJldHVybiB0aGlzLnVzQmFua0FjY291bnR9KX1nZXRCcmFpbnRyZWVWaXNhQ2hlY2tvdXQoKXtyZXR1cm4gdGhpcy52aXNhQ2hlY2tvdXR8fCh0aGlzLnZpc2FDaGVja291dD1Qcm9taXNlLmFsbChbdGhpcy5nZXRDbGllbnQoKSx0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmlzYUNoZWNrb3V0KCldKS50aGVuKChbZSx0XSk9PnQuY3JlYXRlKHtjbGllbnQ6ZX0pKSksdGhpcy52aXNhQ2hlY2tvdXR9Z2V0VmlzYUNoZWNrb3V0U2RrKGUpe3JldHVybiBJKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy52aXNhQ2hlY2tvdXRTREt8fCh0aGlzLnZpc2FDaGVja291dFNESz15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmlzYUNoZWNrb3V0U2RrKGUpKSx0aGlzLnZpc2FDaGVja291dFNES30pfWdldFZlbm1vQ2hlY2tvdXRPclRocm93KCl7cmV0dXJuIEkodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCF0aGlzLmJyYWludHJlZVZlbm1vKXtjb25zdCBlPXlpZWxkIHRoaXMuZ2V0Q2xpZW50KCksdD15aWVsZCB0aGlzLmJyYWludHJlZVNjcmlwdExvYWRlci5sb2FkVmVubW9DaGVja291dCgpLGk9e2NsaWVudDplLGFsbG93RGVza3RvcDohMCxwYXltZW50TWV0aG9kVXNhZ2U6XCJtdWx0aV91c2VcIn0sbj15aWVsZCB0LmNyZWF0ZShpKTtpZighbi5pc0Jyb3dzZXJTdXBwb3J0ZWQoKSl0aHJvdyBuZXcgdTt0aGlzLmJyYWludHJlZVZlbm1vPW59cmV0dXJuIHRoaXMuYnJhaW50cmVlVmVubW99KX1zZXRDbGllbnRUb2tlbihlKXt0aGlzLmNsaWVudFRva2VuPWV9Z2V0Q2xpZW50VG9rZW5PclRocm93KCl7aWYoIXRoaXMuY2xpZW50VG9rZW4pdGhyb3cgbmV3IGYocC5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO3JldHVybiB0aGlzLmNsaWVudFRva2VufXRlYXJkb3duTW9kdWxlKGUpe3JldHVybiBlP2UudGVhcmRvd24oKTpQcm9taXNlLnJlc29sdmUoKX19Y2xhc3MgayBleHRlbmRzIGh7Y29uc3RydWN0b3IoZSl7c3VwZXIoZXx8XCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC5cIiksdGhpcy5uYW1lPVwiUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGVcIn19IWZ1bmN0aW9uKGUpe2UuU2FuZGJveD1cInNhbmRib3hcIixlLlByb2R1Y3Rpb249XCJwcm9kdWN0aW9uXCJ9KF98fChfPXt9KSksZnVuY3Rpb24oZSl7ZS5DbGllbnQ9XCJjbGllbnRcIixlLkRhdGFDb2xsZWN0b3I9XCJkYXRhQ29sbGVjdG9yXCIsZS5GYXN0bGFuZT1cImZhc3RsYW5lXCIsZS5Hb29nbGVQYXltZW50PVwiZ29vZ2xlUGF5bWVudFwiLGUuSG9zdGVkRmllbGRzPVwiaG9zdGVkRmllbGRzXCIsZS5Mb2NhbFBheW1lbnQ9XCJsb2NhbFBheW1lbnRcIixlLlBheXBhbD1cInBheXBhbFwiLGUuUGF5cGFsQ2hlY2tvdXQ9XCJwYXlwYWxDaGVja291dFwiLGUuVGhyZWVEU2VjdXJlPVwidGhyZWVEU2VjdXJlXCIsZS5Vc0JhbmtBY2NvdW50PVwidXNCYW5rQWNjb3VudFwiLGUuVmVubW89XCJ2ZW5tb1wiLGUuVmlzYUNoZWNrb3V0PVwidmlzYUNoZWNrb3V0XCJ9KHd8fCh3PXt9KSksZnVuY3Rpb24oZSl7ZS5DYXJkQ29kZT1cImNhcmRDb2RlXCIsZS5DYXJkQ29kZVZlcmlmaWNhdGlvbj1cImNhcmRDb2RlVmVyaWZpY2F0aW9uXCIsZS5DYXJkRXhwaXJ5PVwiY2FyZEV4cGlyeVwiLGUuQ2FyZE5hbWU9XCJjYXJkTmFtZVwiLGUuQ2FyZE51bWJlcj1cImNhcmROdW1iZXJcIixlLkNhcmROdW1iZXJWZXJpZmljYXRpb249XCJjYXJkTnVtYmVyVmVyaWZpY2F0aW9uXCJ9KFB8fChQPXt9KSk7Y29uc3QgQT17W2RdOntbdy5DbGllbnRdOlwic2hhMzg0LTI2QlhETm5KSTIzSllSeUZCajR4ZTRzVk5yVVNTaVNTdTExa3hWWE5NL3ZFUE9ObTRMdUwwMHc2WmFUZ1Fld3RcIixbdy5QYXlwYWxDaGVja291dF06XCJzaGEzODQtQit2emJad25RdHpXQnRocGtUNFRYS1VpYk82NXR5ZUs3ZUN4U3ZwYmxncHJUZXAyK0lBWEIyQ3h4anJuNzEwT1wiLFt3LlBheXBhbF06XCJzaGEzODQtdXlBR0wxLzMrWEpBSG5Hb055NGVDb1hkeko0ZjdJbHpwKzZ3OVBObkVqczZEQ0N6OVdNeUpqTU4xZ3pjNzhVK1wiLFt3LkxvY2FsUGF5bWVudF06XCJzaGEzODQtTEl2T0VNa0lWRXdWdVlCZFZPUWMxQUM1WWJHR2x3eWZVaGVTMEFDSzIxOEQyU1R1VllRbFo0RnlFUG93QUVmVFwiLFt3LkRhdGFDb2xsZWN0b3JdOlwic2hhMzg0LTFibzlKRHorS3NjdGhjMDg1Y0NLV3VyOENMd1VvQnBvTnl4c0RpNzkzMm1DbDB6RnEzQTVtditGUUx3OUdIcFZcIixbdy5Vc0JhbmtBY2NvdW50XTpcInNoYTM4NC14bUhCVmFVK3c3NFYrT2ViRDNBYVBPTkZ4SFVHTWYrUVJzOEcvSnhWUFhOTlA3TURhMmpMMElDV0hJZTJ0VGZKXCIsW3cuR29vZ2xlUGF5bWVudF06XCJzaGEzODQtV0tESmw4bXFvUDgycVpwTUdINkFiWnhudlhuU1c4SUxWNE02NEN5TUxpdWdHTXd1N0x5UDg5d2pDa0hxc2lCZVwiLFt3LlRocmVlRFNlY3VyZV06XCJzaGEzODQtVlFVbHBHSHpzR3ZzNVhlaUdGaXA3RVhSc3ZvSFdFWERWbWdDYWNmYnlpZVpJOW1kQk9xcTNOU295bzI4T0NPQlwiLFt3LlZpc2FDaGVja291dF06XCJzaGEzODQteXg3bUFEZnpUTjBUNDNRNnJsSDQ5TElnMUVKMGlVWmdCcC9FY3pYOUxYc1VHa3lTZ3hyRCtuV0hRUkJreWZvVFwiLFt3LlZlbm1vXTpcInNoYTM4NC1RWDRyUGpvajFaRGh1RzBhU3lLczU2bEVLRHFUTVRjall4VUhZMVN6TzVWWkRzcUlFMk5Ua3FvdDdLTlNDeW92XCIsW3cuSG9zdGVkRmllbGRzXTpcInNoYTM4NC1WdllCQUNmU3UwQ3IvSjMydUtteEc3QVhjTk9KRTFBeklJTDNrYmlreVM3WUtwNWZ6NUlzK056TlAvbHlhdU55XCIsW3cuRmFzdGxhbmVdOlwic2hhMzg0LTlvR3NaTVJad3BHdERFRFlhL2RGdDc2ZEVDcWoxeEFuaTlnSUtnYzNLZk1JaVJuUjczbkVlZVVETGlCenhoRmFcIn0sW2xdOntbdy5DbGllbnRdOlwic2hhMzg0LW8rbmJRR2N3Tk54SUJlWGV1MytYbWJTcStDZzhSM0VOM04wbDVoWENnTU1VMlJHWTB0MXowTHJvU0VJQWJmQU9cIixbdy5QYXlwYWxDaGVja291dF06XCJzaGEzODQtV3JmYldQQlM0bUg4NkdBb3ljUFNnaUg4aFE4S0g3QTY3QzkzSGpodW52L3hoTmsyWXBCbjN3YkZBNEZoZzlVL1wiLFt3LlBheXBhbF06XCJzaGEzODQtVkYzODludnZyUlVnRHNUWE14VFlPUkR0VmVnQjlJUWEzQ3hyLy9EeUpuTFluejgvWDhWQ3pFdmNrMmMrTWVndFwiLFt3LkxvY2FsUGF5bWVudF06XCJzaGEzODQtdFpLeDJyRVFiZm1acG9QU1k1VlBtSkVoYXE0WDc1ZEx2d0hNczNWRTlVK0M4bFB5dytoV1RJTDErR1B2V0NJSFwiLFt3LkRhdGFDb2xsZWN0b3JdOlwic2hhMzg0LUU2azN3T3BQN3N5Q0REd2FSRExGMDY5NDJZMDBOa2J3SnZXaTJPUVh3d0t6R3dHNWZkM0U3UkZVdkNDZWNmdk9cIixbdy5Vc0JhbmtBY2NvdW50XTpcInNoYTM4NC0yNThGT044TFpHRzBXOVFhejRKaWo4M3BaSHUzMFluS2pKQTdnTnVsTEJoNkNjbGt1Y2dGK3RIRFF1WUZSWWZXXCIsW3cuR29vZ2xlUGF5bWVudF06XCJzaGEzODQtdGFKMnAvMCtuMFZIMzI4UE9Bb0JpdUViTDN0bkhVVEU5UzQyaEsxVitUeHMzWCtRWWpaT3lLVzM1SmdIUkZmT1wiLFt3LlRocmVlRFNlY3VyZV06XCJzaGEzODQtK05TWkg0Wmozc081YmRXdlBLaFU1TjE2UUR4ZXVlVFZUblVWZWxlZUVTa2hMU2F6NE9iMWhoLzVteWVjYzlZbVwiLFt3LlZpc2FDaGVja291dF06XCJzaGEzODQtNjZEaUJqZ2h4azFPbUJqOGFrc044Z2JRK0N3b1FjeDF2UGZpWFVOMDhnMWlRVk0rQndld0YwcDd0b00zaTdTU1wiLFt3LlZlbm1vXTpcInNoYTM4NC1CNVV3WTQya0U0Um9Mb1diUTdZcHFvc1VsVWFkMi9EbEdXaXcwSGhvWmJTUGszMENRQWFTQTEwb2h5TERUa0RVXCIsW3cuSG9zdGVkRmllbGRzXTpcInNoYTM4NC1BdzlFZXNTYVVlV3hlMzZQcUVIaU95T3lPcThNNkNJYjFndzcveUhOVlBSekd0RlhYY2QyT1E4cVhySWxPajJQXCIsW3cuRmFzdGxhbmVdOlwic2hhMzg0LXJoQkwxaHBaNzFKcUcrMlRzVDBEaWg0N21iang4Y2pKQ3BlWmprOXR3M2RmMWdGTUtmQ1RtTXladW5ocjdINFlcIn0sW3NdOntbdy5DbGllbnRdOlwic2hhMzg0LTBXTnhrc0lwUlArZllaaUlkcjEyZzZEQlVRZkxEellDUUpadFIvQzhLa2N3U0doUEhmY0ZwM3RUYUdjTXlGVHFcIixbdy5QYXlwYWxDaGVja291dF06XCJzaGEzODQtbFdNMWprNEJPeG9ETlY2S29wN3RWTnZRZ0lObG1FVnowYy9Pd00rSE5ISzNRQzh4cXdkNTRPdnJ0MlFSRFRqaFwiLFt3LlBheXBhbF06XCJzaGEzODQtZlhVbVZ4QzJFTVpCRFhaN2VUSFNUTC9MRkJySGVqL01TWFQvdlRCWHZyYTRsemdMTkd2UkVBcCt4MEdZT2J1SFwiLFt3LkxvY2FsUGF5bWVudF06XCJzaGEzODQtcGhhMXhHdUdTa21aSDV4OWFxSHZSYU80eExlYTdybVEvNzlQRmo5enhOenh1RmNPV1pnN2dPUDdGaWJ5Z09FQ1wiLFt3LkRhdGFDb2xsZWN0b3JdOlwic2hhMzg0LVE2UEkyRjllZWtXYkF4aHJveWJsK2FFY3ZxaGRvd04vRVFsR3dCVXlKT3pQRm45OTgydTl4bDZTVTZYZkdLemNcIixbdy5Vc0JhbmtBY2NvdW50XTpcInNoYTM4NC1XM1JMUVNLSkwxdFEzK1k3bVA2dG1rYW10WjhiVjRZdy9YeEw5Smo1SnRYSHJhRDhsb01GOGhBSUc1bTJ6SzdGXCIsW3cuR29vZ2xlUGF5bWVudF06XCJzaGEzODQtVElUUU1zRldBM2VsRE5HUDJtV3oyb0tCbzRxanQrVGxxem92Y2FQb2VCaUFoL3dQQmk2bmFlNTBBRGRnVTEvaVwiLFt3LlRocmVlRFNlY3VyZV06XCJzaGEzODQtWWl5Y1lOODlabEwvRXZjYXE0eTFhalcxbWhkN0pZZlpCRHVPd0h0SW40L0pubTIwR0wrL1hDTSt6WUF3V0Q4RFwiLFt3LlZpc2FDaGVja291dF06XCJzaGEzODQtL09kYVR2OXFya0t6ak9idFVlNnl6ZkRoSG96RlcvK3VYbHJTbDczNnNPWlJKcGpHUUVUdnBZWHFNRkZnNjl4dlwiLFt3LlZlbm1vXTpcInNoYTM4NC1kQStvamRXOXZiSlM0SmF2Y1h5T3M5ZDV1WkhKZzVkTnRZdXBvUFNIMnpzWElpWURWUzVhbUxiL3U4cW1RNm96XCIsW3cuSG9zdGVkRmllbGRzXTpcInNoYTM4NC0zMVprUzU4K2lhV3NXMDZmdFc1Mnp6VlpGcDQzV1BkN3BOWVJpZGRZeW5TTmc2T2g3V0diU0ZHb3JBVUg2VDF6XCIsW3cuRmFzdGxhbmVdOlwic2hhMzg0LWpsYnJ3TnZMM0h2TEFVQ3RMU21yblEyR0gxdWRDVXJSUy9iVm1SZUFTNWZ1SVZ2Y1c4UGtvL0drZzgydGxndHJcIn19O3ZhciBNLE49ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIG5ldyhpfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oYSxvKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07Y2xhc3MgRXtjb25zdHJ1Y3RvcihlLHQsaSl7dGhpcy5zY3JpcHRMb2FkZXI9ZSx0aGlzLmJyYWludHJlZUhvc3RXaW5kb3c9dCx0aGlzLmJyYWludHJlZVNES1ZlcnNpb25NYW5hZ2VyPWl9bG9hZENsaWVudCgpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyh3LkNsaWVudCxcImNsaWVudC5taW4uanNcIil9KX1sb2FkRmFzdGxhbmUoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5GYXN0bGFuZSxcImZhc3RsYW5lLm1pbi5qc1wiKX0pfWxvYWRQYXlwYWxDaGVja291dCgpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyh3LlBheXBhbENoZWNrb3V0LFwicGF5cGFsLWNoZWNrb3V0Lm1pbi5qc1wiKX0pfWxvYWRQYXlwYWwoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5QYXlwYWwsXCJwYXlwYWwubWluLmpzXCIpfSl9bG9hZExvY2FsUGF5bWVudCgpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyh3LkxvY2FsUGF5bWVudCxcImxvY2FsLXBheW1lbnQubWluLmpzXCIpfSl9bG9hZERhdGFDb2xsZWN0b3IoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5EYXRhQ29sbGVjdG9yLFwiZGF0YS1jb2xsZWN0b3IubWluLmpzXCIpfSl9bG9hZFVzQmFua0FjY291bnQoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5Vc0JhbmtBY2NvdW50LFwidXMtYmFuay1hY2NvdW50Lm1pbi5qc1wiKX0pfWxvYWRHb29nbGVQYXltZW50KCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KHcuR29vZ2xlUGF5bWVudCxcImdvb2dsZS1wYXltZW50Lm1pbi5qc1wiKX0pfWxvYWQzRFMoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5UaHJlZURTZWN1cmUsXCJ0aHJlZS1kLXNlY3VyZS5taW4uanNcIil9KX1sb2FkVmlzYUNoZWNrb3V0KCl7cmV0dXJuIHRoaXMubG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3cody5WaXNhQ2hlY2tvdXQsXCJ2aXNhLWNoZWNrb3V0Lm1pbi5qc1wiKX1sb2FkVmVubW9DaGVja291dCgpe3JldHVybiB0aGlzLmxvYWRCcmFpbnRyZWVNb2R1bGVPclRocm93KHcuVmVubW8sXCJ2ZW5tby5taW4uanNcIil9bG9hZEhvc3RlZEZpZWxkcygpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5sb2FkQnJhaW50cmVlTW9kdWxlT3JUaHJvdyh3Lkhvc3RlZEZpZWxkcyxcImhvc3RlZC1maWVsZHMubWluLmpzXCIpfSl9bG9hZFZpc2FDaGVja291dFNkayhlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7aWYodGhpcy5icmFpbnRyZWVIb3N0V2luZG93LlYpcmV0dXJuIHRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WO2NvbnN0IHQ9ZT9cInNoYTM4NC0wZXUxczFHdHF6WGxMOUR0TGdtd3pDNVdXbEVIL0FEUk0wbjM4Y1ZRa3Z0VCtXL2dleTk2cmNiMUx3dVVPUERtXCI6XCJzaGEzODQtMWYxY3N2UDNaRnhnNGRJTEgxR2FZNExIbFowb1g3Ums4M3J4bUxsd2JuSWk0VE0wTll6WG9ldjFWb0VpVkRTNlwiO3JldHVybiB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KGAvLyR7ZT9cInNhbmRib3gtXCI6XCJcIn1hc3NldHMuc2VjdXJlLmNoZWNrb3V0LnZpc2EuY29tL2NoZWNrb3V0LXdpZGdldC9yZXNvdXJjZXMvanMvaW50ZWdyYXRpb24vdjEvc2RrLmpzYCx7YXN5bmM6ITAsYXR0cmlidXRlczp7aW50ZWdyaXR5OnQsY3Jvc3NvcmlnaW46XCJhbm9ueW1vdXNcIn19KS50aGVuKCgpPT57aWYoIXRoaXMuYnJhaW50cmVlSG9zdFdpbmRvdy5WKXRocm93IG5ldyBrO3JldHVybiB0aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuVn0pfSl9bG9hZEJyYWludHJlZU1vZHVsZU9yVGhyb3coZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7bGV0IGk9dGhpcy5nZXRCcmFpbnRyZWVNb2R1bGUoZSk7aWYoaSlyZXR1cm4gaTtjb25zdCBuPXRoaXMuYnJhaW50cmVlU0RLVmVyc2lvbk1hbmFnZXIuZ2V0U0RLVmVyc2lvbigpLGE9YC8vanMuYnJhaW50cmVlZ2F0ZXdheS5jb20vd2ViLyR7bn0vanMvJHt0fWAsbz1uIGluIEE/dGhpcy5nZXRJbnRlZ3JpdHlWYWx1ZXNCeU1vZHVsZU5hbWUoZSxuKTp2b2lkIDA7aWYoeWllbGQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChhLG8/e2FzeW5jOiEwLGF0dHJpYnV0ZXM6e2ludGVncml0eTpvLGNyb3Nzb3JpZ2luOlwiYW5vbnltb3VzXCJ9fTp2b2lkIDApLGk9dGhpcy5nZXRCcmFpbnRyZWVNb2R1bGUoZSksIWkpdGhyb3cgbmV3IGs7cmV0dXJuIGl9KX1nZXRCcmFpbnRyZWVNb2R1bGUoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmJyYWludHJlZUhvc3RXaW5kb3cuYnJhaW50cmVlKXx8dm9pZCAwPT09dD92b2lkIDA6dFtlXX1nZXRJbnRlZ3JpdHlWYWx1ZXNCeU1vZHVsZU5hbWUoZSx0KXtjb25zdCBpPUFbdF1bZV07aWYoIWkpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBmaWxlTmFtZSB2YWx1ZVwiKTtyZXR1cm4gaX19ZnVuY3Rpb24gTyhlLHQpe3JldHVybiBPYmplY3QuYXNzaWduKGUse3Jlc29sdmVJZHM6dH0pfWNsYXNzIEQgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLlwiKSx0aGlzLm5hbWU9XCJJbnZhbGlkQXJndW1lbnRFcnJvclwiLHRoaXMudHlwZT1cImludmFsaWRfYXJndW1lbnRcIn19Y2xhc3MgQiBleHRlbmRzIER7Y29uc3RydWN0b3IoZSl7bGV0IHQ9XCJVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuXCI7ZSYmKHQ9YCR7dH0gTWFrZSBzdXJlIHRoZSBmb2xsb3dpbmcgZmllbGRzIGFyZSBwcm92aWRlZCBjb3JyZWN0bHk6ICR7ZS5qb2luKFwiLCBcIil9LmApLHN1cGVyKHQpLHRoaXMubmFtZT1cIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvclwifX1jbGFzcyBMIGV4dGVuZHMgaHtjb25zdHJ1Y3Rvcigpe3N1cGVyKFwiVGhlIGN1cnJlbnQgb3JkZXIgZG9lcyBub3QgbmVlZCB0byBiZSBmaW5hbGl6ZWQgYXQgdGhpcyBzdGFnZS5cIiksdGhpcy5uYW1lPVwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yXCIsdGhpcy50eXBlPVwib3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZFwifX1jbGFzcyB6IGV4dGVuZHMgaHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlfHxcIlBheW1lbnQgcHJvY2VzcyB3YXMgY2FuY2VsbGVkLlwiKSx0aGlzLm5hbWU9XCJQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3JcIix0aGlzLnR5cGU9XCJwYXltZW50X2NhbmNlbGxlZFwifX0hZnVuY3Rpb24oZSl7ZS5CUkFJTlRSRUU9XCJicmFpbnRyZWVcIixlLkJSQUlOVFJFRV9GQVNUTEFORT1cImJyYWludHJlZWFjY2VsZXJhdGVkY2hlY2tvdXRcIn0oTXx8KE09e30pKTt2YXIgeCxVPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGEsbyl7ZnVuY3Rpb24gcihlKXt0cnl7bChuLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2wobi50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gbChlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBpP3Q6bmV3IGkoZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKHIscyl9bCgobj1uLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9OyFmdW5jdGlvbihlKXtlLlNoaXBwaW5nPVwiU2hpcHBpbmdcIixlLlN1YnRvdGFsPVwiU3VidG90YWxcIixlLlN0b3JlQ3JlZGl0PVwiU3RvcmUgQ3JlZGl0XCJ9KHh8fCh4PXt9KSk7Y2xhc3MgRntjb25zdHJ1Y3RvcihlLHQsaSxuLGEpe3RoaXMuX3JlcXVlc3RTZW5kZXI9ZSx0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlPXQsdGhpcy5fc2Vzc2lvbkZhY3Rvcnk9aSx0aGlzLl9icmFpbnRyZWVTZGs9bix0aGlzLl9hcHBsZVBheVNjcmlwdExvYWRlcj1hLHRoaXMuX3NoaXBwaW5nTGFiZWw9eC5TaGlwcGluZyx0aGlzLl9zdWJUb3RhbExhYmVsPXguU3VidG90YWwsdGhpcy5fc3RvcmVDcmVkaXRMYWJlbD14LlN0b3JlQ3JlZGl0fWluaXRpYWxpemUoZSl7dmFyIHQsaSxuLGE7cmV0dXJuIFUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKCEobnVsbD09ZT92b2lkIDA6ZS5tZXRob2RJZCkpdGhyb3cgbmV3IEQoJ1VuYWJsZSB0byBzdWJtaXQgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nKTtjb25zdHttZXRob2RJZDpvfT1lO3lpZWxkIHRoaXMuX2FwcGxlUGF5U2NyaXB0TG9hZGVyLmxvYWRTZGsoKSx0aGlzLl9zaGlwcGluZ0xhYmVsPShudWxsPT09KHQ9ZS5hcHBsZXBheSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2hpcHBpbmdMYWJlbCl8fHguU2hpcHBpbmcsdGhpcy5fc3ViVG90YWxMYWJlbD0obnVsbD09PShpPWUuYXBwbGVwYXkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN1YnRvdGFsTGFiZWwpfHx4LlN1YnRvdGFsLHRoaXMuX3N0b3JlQ3JlZGl0TGFiZWw9KG51bGw9PT0obj1lLmFwcGxlcGF5KXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdG9yZUNyZWRpdExhYmVsKXx8eC5TdG9yZUNyZWRpdDtjb25zdCByPSh5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG8pKS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhvKTsobnVsbD09PShhPXIuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09YT92b2lkIDA6YS5nYXRld2F5KT09PU0uQlJBSU5UUkVFJiYoeWllbGQgdGhpcy5faW5pdGlhbGl6ZUJyYWludHJlZVNkaygpKX0pfWV4ZWN1dGUoZSx0KXtyZXR1cm4gVSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7cGF5bWVudDppfT1lLG49dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO2lmKCFpKXRocm93IG5ldyBCKFtcInBheW1lbnRcIl0pO2NvbnN0e21ldGhvZElkOmF9PWksbz1uLmdldFBheW1lbnRNZXRob2RPclRocm93KGEpLHI9dGhpcy5fZ2V0QmFzZVJlcXVlc3QobixvKSxzPXRoaXMuX3Nlc3Npb25GYWN0b3J5LmNyZWF0ZShyKTtyZXR1cm4geWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7dXNlU3RvcmVDcmVkaXQ6ZS51c2VTdG9yZUNyZWRpdH0sdCkscy5iZWdpbigpLG5ldyBQcm9taXNlKChlLHQpPT57dGhpcy5faGFuZGxlQXBwbGVQYXlFdmVudHMocyxvLHtyZXNvbHZlOmUscmVqZWN0OnR9KX0pfSl9ZmluYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEwpfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fZ2V0QmFzZVJlcXVlc3QoZSx0KXtjb25zdCBpPWUuZ2V0Q2hlY2tvdXRPclRocm93KCksbj1lLmdldENhcnRPclRocm93KCksYT1lLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLHtzdG9yZVByb2ZpbGU6e3N0b3JlQ291bnRyeUNvZGU6byxzdG9yZU5hbWU6cn19PWEse2N1cnJlbmN5Ontjb2RlOnMsZGVjaW1hbFBsYWNlczpsfX09bix7aW5pdGlhbGl6YXRpb25EYXRhOnttZXJjaGFudENhcGFiaWxpdGllczpkLHN1cHBvcnRlZE5ldHdvcmtzOmN9fT10LHtncmFuZFRvdGFsOmgsaXNTdG9yZUNyZWRpdEFwcGxpZWQ6dSxvdXRzdGFuZGluZ0JhbGFuY2U6cH09aSxtPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7aS5zdWJ0b3RhbC50b0ZpeGVkKGwpfWB9XTtpZihpLnRheGVzLmZvckVhY2goZT0+bS5wdXNoKHtsYWJlbDplLm5hbWUsYW1vdW50OmAke2UuYW1vdW50LnRvRml4ZWQobCl9YH0pKSxtLnB1c2goe2xhYmVsOnRoaXMuX3NoaXBwaW5nTGFiZWwsYW1vdW50OmAke2kuc2hpcHBpbmdDb3N0VG90YWwudG9GaXhlZChsKX1gfSksdSl7Y29uc3R7c3RvcmVDcmVkaXQ6dH09ZS5nZXRDdXN0b21lck9yVGhyb3coKTttLnB1c2goe2xhYmVsOnRoaXMuX3N0b3JlQ3JlZGl0TGFiZWwsYW1vdW50OmAtJHtNYXRoLm1pbihoLHQpLnRvRml4ZWQobCl9YH0pfXJldHVybntjb3VudHJ5Q29kZTpvLGN1cnJlbmN5Q29kZTpzLG1lcmNoYW50Q2FwYWJpbGl0aWVzOmQsc3VwcG9ydGVkTmV0d29ya3M6YyxsaW5lSXRlbXM6bSx0b3RhbDp7bGFiZWw6cixhbW91bnQ6YCR7cC50b0ZpeGVkKGwpfWAsdHlwZTpcImZpbmFsXCJ9fX1faGFuZGxlQXBwbGVQYXlFdmVudHMoZSx0LGkpe2Uub252YWxpZGF0ZW1lcmNoYW50PWk9PlUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdHtib2R5Om59PXlpZWxkIHRoaXMuX29uVmFsaWRhdGVNZXJjaGFudCh0LGkpO2UuY29tcGxldGVNZXJjaGFudFZhbGlkYXRpb24obil9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKFwiTWVyY2hhbnQgdmFsaWRhdGlvbiBmYWlsZWRcIil9fSksZS5vbmNhbmNlbD0oKT0+VSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIGkucmVqZWN0KG5ldyB6KFwiQ29udGludWUgd2l0aCBhcHBsZXBheVwiKSl9KSxlLm9ucGF5bWVudGF1dGhvcml6ZWQ9bj0+dGhpcy5fb25QYXltZW50QXV0aG9yaXplZChuLGUsdCxpKX1fb25WYWxpZGF0ZU1lcmNoYW50KGUsdCl7cmV0dXJuIFUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGk9W2B2YWxpZGF0aW9uVXJsPSR7dC52YWxpZGF0aW9uVVJMfWAsYG1lcmNoYW50SWRlbnRpZmllcj0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLm1lcmNoYW50SWR9YCxgZGlzcGxheU5hbWU9JHtlLmluaXRpYWxpemF0aW9uRGF0YS5zdG9yZU5hbWV9YCxgZG9tYWluTmFtZT0ke3dpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZX1gXS5qb2luKFwiJlwiKTtyZXR1cm4gdGhpcy5fcmVxdWVzdFNlbmRlci5wb3N0KGAke2UuaW5pdGlhbGl6YXRpb25EYXRhLnBheW1lbnRzVXJsfS9hcGkvcHVibGljL3YxL3BheW1lbnRzL2FwcGxlcGF5L3ZhbGlkYXRlX21lcmNoYW50YCx7Y3JlZGVudGlhbHM6ITEsaGVhZGVyczp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvblwiLFwiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcIlgtWFNSRi1UT0tFTlwiOm51bGx9LGJvZHk6aX0pfSl9X29uUGF5bWVudEF1dGhvcml6ZWQoZSx0LGksbil7dmFyIGE7cmV0dXJuIFUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0e3Rva2VuOm99PWUucGF5bWVudDtsZXQgcjsobnVsbD09PShhPWkuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09YT92b2lkIDA6YS5nYXRld2F5KT09PU0uQlJBSU5UUkVFJiYocj15aWVsZCB0aGlzLl9nZXRCcmFpbnRyZWVEZXZpY2VEYXRhKCkpO2NvbnN0IHM9e21ldGhvZElkOmkuaWQscGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDpyLGZvcm1hdHRlZFBheWxvYWQ6e2FwcGxlX3BheV90b2tlbjp7cGF5bWVudF9kYXRhOm8ucGF5bWVudERhdGEscGF5bWVudF9tZXRob2Q6by5wYXltZW50TWV0aG9kLHRyYW5zYWN0aW9uX2lkOm8udHJhbnNhY3Rpb25JZGVudGlmaWVyfX19fTt0cnl7cmV0dXJuIHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChzKSx0LmNvbXBsZXRlUGF5bWVudChBcHBsZVBheVNlc3Npb24uU1RBVFVTX1NVQ0NFU1MpLG4ucmVzb2x2ZSgpfWNhdGNoKGUpe3JldHVybiB0LmNvbXBsZXRlUGF5bWVudChBcHBsZVBheVNlc3Npb24uU1RBVFVTX0ZBSUxVUkUpLG4ucmVqZWN0KG5ldyBmKHAuUGF5bWVudE5vdEluaXRpYWxpemVkKSl9fSl9X2dldEJyYWludHJlZURldmljZURhdGEoKXtyZXR1cm4gVSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2RldmljZURhdGE6ZX09eWllbGQgdGhpcy5fYnJhaW50cmVlU2RrLmdldERhdGFDb2xsZWN0b3JPclRocm93KCk7cmV0dXJuIGV9Y2F0Y2goZSl7fX0pfV9pbml0aWFsaXplQnJhaW50cmVlU2RrKCl7cmV0dXJuIFUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO2xldCB0PWUuZ2V0UGF5bWVudE1ldGhvZChNLkJSQUlOVFJFRV9GQVNUTEFORSl8fGUuZ2V0UGF5bWVudE1ldGhvZChNLkJSQUlOVFJFRSk7dHx8KHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoTS5CUkFJTlRSRUUpLHQ9ZS5nZXRQYXltZW50TWV0aG9kKE0uQlJBSU5UUkVFKSksdCYmdC5jbGllbnRUb2tlbiYmdC5pbml0aWFsaXphdGlvbkRhdGEmJnRoaXMuX2JyYWludHJlZVNkay5pbml0aWFsaXplKHQuY2xpZW50VG9rZW4pfSl9fWZ1bmN0aW9uIFIoZSl7aWYoIWZ1bmN0aW9uKGUpe3JldHVyblwiQXBwbGVQYXlTZXNzaW9uXCJpbiBlfShlKSl0aHJvdyBuZXcgRXJyb3IoXCJBcHBsZSBwYXkgaXMgbm90IHN1cHBvcnRlZFwiKX1jbGFzcyBWe2NyZWF0ZShlKXtyZXR1cm4gUih3aW5kb3cpLG5ldyBBcHBsZVBheVNlc3Npb24oMSxlKX19Y2xhc3Mgantjb25zdHJ1Y3RvcihlKXt0aGlzLnNjcmlwdExvYWRlcj1lLHRoaXMuc2RrVmVyc2lvbj1cIjEubGF0ZXN0XCJ9bG9hZFNkaygpe3JldHVybiBlPXRoaXMsdD12b2lkIDAsbj1mdW5jdGlvbiooKXt5aWVsZCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KGBodHRwczovL2FwcGxlcGF5LmNkbi1hcHBsZS5jb20vanNhcGkvJHt0aGlzLnNka1ZlcnNpb259L2FwcGxlLXBheS1zZGsuanNgKSxSKHdpbmRvdyl9LG5ldygoaT12b2lkIDApfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oYSxvKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KTt2YXIgZSx0LGksbn19Y29uc3QgcT1PKG49Pntjb25zdHtnZXRIb3N0OmF9PW4uZ2V0U3RhdGUoKSxvPW5ldyBjKG4pO3JldHVybiBuZXcgRihlKHtob3N0OmEoKX0pLG4sbmV3IFYsbmV3IFQobmV3IEUoaSgpLHdpbmRvdyxvKSksbmV3IGoobmV3IHQpKX0sW3tpZDpcImFwcGxlcGF5XCJ9XSk7dmFyIEg7IWZ1bmN0aW9uKGUpe2VbZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M9MF09XCJNaXNzaW5nQmlsbGluZ0FkZHJlc3NcIixlW2UuTWlzc2luZ0NhcnQ9MV09XCJNaXNzaW5nQ2FydFwiLGVbZS5NaXNzaW5nQ2hlY2tvdXQ9Ml09XCJNaXNzaW5nQ2hlY2tvdXRcIixlW2UuTWlzc2luZ0NvbnNpZ25tZW50cz0zXT1cIk1pc3NpbmdDb25zaWdubWVudHNcIixlW2UuTWlzc2luZ0N1c3RvbWVyPTRdPVwiTWlzc2luZ0N1c3RvbWVyXCIsZVtlLk1pc3NpbmdDaGVja291dENvbmZpZz01XT1cIk1pc3NpbmdDaGVja291dENvbmZpZ1wiLGVbZS5NaXNzaW5nT3JkZXI9Nl09XCJNaXNzaW5nT3JkZXJcIixlW2UuTWlzc2luZ09yZGVyQ29uZmlnPTddPVwiTWlzc2luZ09yZGVyQ29uZmlnXCIsZVtlLk1pc3NpbmdPcmRlcklkPThdPVwiTWlzc2luZ09yZGVySWRcIixlW2UuTWlzc2luZ1BheW1lbnQ9OV09XCJNaXNzaW5nUGF5bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudElkPTEwXT1cIk1pc3NpbmdQYXltZW50SWRcIixlW2UuTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50PTExXT1cIk1pc3NpbmdQYXltZW50SW5zdHJ1bWVudFwiLGVbZS5NaXNzaW5nUGF5bWVudE1ldGhvZD0xMl09XCJNaXNzaW5nUGF5bWVudE1ldGhvZFwiLGVbZS5NaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsPTEzXT1cIk1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmxcIixlW2UuTWlzc2luZ1BheW1lbnRTdGF0dXM9MTRdPVwiTWlzc2luZ1BheW1lbnRTdGF0dXNcIixlW2UuTWlzc2luZ1BheW1lbnRUb2tlbj0xNV09XCJNaXNzaW5nUGF5bWVudFRva2VuXCIsZVtlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M9MTZdPVwiTWlzc2luZ1NoaXBwaW5nQWRkcmVzc1wifShIfHwoSD17fSkpO2NsYXNzIFcgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlIEguTWlzc2luZ0JpbGxpbmdBZGRyZXNzOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEguTWlzc2luZ0NhcnQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEguTWlzc2luZ0NvbnNpZ25tZW50czpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBILk1pc3NpbmdDaGVja291dDpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEguTWlzc2luZ0N1c3RvbWVyOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgSC5NaXNzaW5nQ2hlY2tvdXRDb25maWc6Y2FzZSBILk1pc3NpbmdPcmRlckNvbmZpZzpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLlwiO2Nhc2UgSC5NaXNzaW5nT3JkZXI6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuXCI7Y2FzZSBILk1pc3NpbmdPcmRlcklkOnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC5cIjtjYXNlIEguTWlzc2luZ1BheW1lbnQ6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtjYXNlIEguTWlzc2luZ1BheW1lbnRUb2tlbjpyZXR1cm5cIlVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy5cIjtjYXNlIEguTWlzc2luZ1BheW1lbnRNZXRob2Q6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuXCI7Y2FzZSBILk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6cmV0dXJuXCJVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIjtkZWZhdWx0OnJldHVyblwiVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS5cIn19KGUpKSx0aGlzLnN1YnR5cGU9ZSx0aGlzLm5hbWU9XCJNaXNzaW5nRGF0YUVycm9yXCIsdGhpcy50eXBlPVwibWlzc2luZ19kYXRhXCJ9fWNsYXNzIEcgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiTm90IGltcGxlbWVudGVkLlwiKSx0aGlzLm5hbWU9XCJOb3RJbXBsZW1lbnRlZEVycm9yXCIsdGhpcy50eXBlPVwibm90X2ltcGxlbWVudGVkXCJ9fXZhciAkLEs9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIG5ldyhpfHwoaT1Qcm9taXNlKSkoZnVuY3Rpb24oYSxvKXtmdW5jdGlvbiByKGUpe3RyeXtsKG4ubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChuLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIGk/dDpuZXcgaShmdW5jdGlvbihlKXtlKHQpfSkpLnRoZW4ocixzKX1sKChuPW4uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX07IWZ1bmN0aW9uKGUpe2UuU3VidG90YWw9XCJTdWJ0b3RhbFwiLGUuU2hpcHBpbmc9XCJTaGlwcGluZ1wifSgkfHwoJD17fSkpO2NsYXNzIFh7Y29uc3RydWN0b3IoZSx0LGksbixvKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWUsdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT10LHRoaXMuX3Nlc3Npb25GYWN0b3J5PWksdGhpcy5fYnJhaW50cmVlU2RrPW4sdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXI9byx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrPWEsdGhpcy5fb25FcnJvcj1hLHRoaXMuX29uQ2xpY2s9YSx0aGlzLl9zdWJUb3RhbExhYmVsPSQuU3VidG90YWwsdGhpcy5fc2hpcHBpbmdMYWJlbD0kLlNoaXBwaW5nLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMX1pbml0aWFsaXplKGUpe3ZhciB0O3JldHVybiBLKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDppLGFwcGxlcGF5Om59PWU7aWYoIWl8fCFuKXRocm93IG5ldyBXKEguTWlzc2luZ1BheW1lbnRNZXRob2QpO2NvbnN0e2NvbnRhaW5lcjpvLHNoaXBwaW5nTGFiZWw6cixzdWJ0b3RhbExhYmVsOnMsb25FcnJvcjpsPWEsb25DbGljazpkPWEsb25QYXltZW50QXV0aG9yaXplOmN9PW47dGhpcy5fc2hpcHBpbmdMYWJlbD1yfHwkLlNoaXBwaW5nLHRoaXMuX3N1YlRvdGFsTGFiZWw9c3x8JC5TdWJ0b3RhbCx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrPWMsdGhpcy5fb25FcnJvcj1sLHRoaXMuX29uQ2xpY2s9ZDtsZXQgaD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO3RyeXt0aGlzLl9wYXltZW50TWV0aG9kPWguZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3coaSl9Y2F0Y2goZSl7aD15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGkpLHRoaXMuX3BheW1lbnRNZXRob2Q9aC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhpKX15aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKSx0aGlzLl9hcHBsZVBheUJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24obyksdGhpcy5fYXBwbGVQYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2suYmluZCh0aGlzKSksKG51bGw9PT0odD10aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2F0ZXdheSk9PT1NLkJSQUlOVFJFRSYmKHlpZWxkIHRoaXMuX2luaXRpYWxpemVCcmFpbnRyZWVTZGsoKSl9KX1kZWluaXRpYWxpemUoKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9c2lnbkluKCl7dGhyb3cgbmV3IEcoJ0luIG9yZGVyIHRvIHNpZ24gaW4gdmlhIEFwcGxlLCB0aGUgc2hvcHBlciBtdXN0IGNsaWNrIG9uIFwiQXBwbGUgUGF5XCIgYnV0dG9uLicpfXNpZ25PdXQoKXt0aHJvdyBuZXcgRyhcIk5lZWQgdG8gZG8gc2lnbm91dCB2aWEgYXBwbGUuXCIpfWV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoZSl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2spfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksUHJvbWlzZS5yZXNvbHZlKCl9X2NyZWF0ZUJ1dHRvbihlKXtjb25zdCB0PWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUpO2lmKCF0KXRocm93IG5ldyBEKFwiVW5hYmxlIHRvIGNyZWF0ZSBzaWduLWluIGJ1dHRvbiB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC5cIik7Y29uc3QgaT10aGlzLl9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQoKTtyZXR1cm4gdC5hcHBlbmRDaGlsZChpKSxpfV9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQoKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhcHBsZS1wYXktYnV0dG9uXCIpO3JldHVybiBlLnNldEF0dHJpYnV0ZShcImJ1dHRvbnN0eWxlXCIsXCJibGFja1wiKSxlLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInBsYWluXCIpLGUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIi0tYXBwbGUtcGF5LWJ1dHRvbi13aWR0aDogMTAwJTsgLS1hcHBsZS1wYXktYnV0dG9uLWhlaWdodDogNDBweDsgLS1hcHBsZS1wYXktYnV0dG9uLWJvcmRlci1yYWRpdXM6IDRweDtcIiksZX1faGFuZGxlV2FsbGV0QnV0dG9uQ2xpY2soZSl7aWYoZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbilyZXR1cm47dGhpcy5fb25DbGljaygpO2NvbnN0IHQ9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLGk9dC5nZXRDYXJ0T3JUaHJvdygpLG49dC5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKSxhPXQuZ2V0Q2hlY2tvdXRPclRocm93KCk7aWYoIXRoaXMuX3BheW1lbnRNZXRob2R8fCF0aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSl0aHJvdyBuZXcgVyhILk1pc3NpbmdQYXltZW50TWV0aG9kKTtjb25zdCBvPXRoaXMuX2dldEJhc2VSZXF1ZXN0KGksYSxuLHRoaXMuX3BheW1lbnRNZXRob2QpLHI9dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKG8pO3RoaXMuX2hhbmRsZUFwcGxlUGF5RXZlbnRzKHIsdGhpcy5fcGF5bWVudE1ldGhvZCxuKSxyLmJlZ2luKCksdGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSEwfV9nZXRCYXNlUmVxdWVzdChlLHQsaSxuKXt2YXIgYTtjb25zdHtzdG9yZVByb2ZpbGU6e3N0b3JlQ291bnRyeUNvZGU6byxzdG9yZU5hbWU6cn19PWkse2N1cnJlbmN5Ontjb2RlOnMsZGVjaW1hbFBsYWNlczpsfX09ZSx7aW5pdGlhbGl6YXRpb25EYXRhOnttZXJjaGFudENhcGFiaWxpdGllczpkLHN1cHBvcnRlZE5ldHdvcmtzOmN9fT1uLGg9ZS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MCx1PXtyZXF1aXJlZEJpbGxpbmdDb250YWN0RmllbGRzOltcInBvc3RhbEFkZHJlc3NcIl0scmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHM6W1wiZW1haWxcIixcInBob25lXCJdLGNvdW50cnlDb2RlOm8sY3VycmVuY3lDb2RlOnMsbWVyY2hhbnRDYXBhYmlsaXRpZXM6ZCxzdXBwb3J0ZWROZXR3b3JrczpjLGxpbmVJdGVtczpbXSx0b3RhbDpoP3tsYWJlbDpyLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChsKX1gLHR5cGU6XCJwZW5kaW5nXCJ9OntsYWJlbDpyLGFtb3VudDpgJHt0LmdyYW5kVG90YWwudG9GaXhlZChsKX1gLHR5cGU6XCJmaW5hbFwifX07aWYoaCludWxsPT09KGE9dS5yZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkcyl8fHZvaWQgMD09PWF8fGEucHVzaChcInBvc3RhbEFkZHJlc3NcIik7ZWxzZXtjb25zdCBlPVt7bGFiZWw6dGhpcy5fc3ViVG90YWxMYWJlbCxhbW91bnQ6YCR7dC5zdWJ0b3RhbC50b0ZpeGVkKGwpfWB9XTt0LnRheGVzLmZvckVhY2godD0+ZS5wdXNoKHtsYWJlbDp0Lm5hbWUsYW1vdW50OmAke3QuYW1vdW50LnRvRml4ZWQobCl9YH0pKSx1LmxpbmVJdGVtcz1lfXJldHVybiB1fV9oYW5kbGVBcHBsZVBheUV2ZW50cyhlLHQsaSl7ZS5vbnZhbGlkYXRlbWVyY2hhbnQ9aT0+Syh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2JvZHk6bn09eWllbGQgdGhpcy5fb25WYWxpZGF0ZU1lcmNoYW50KHQsaSk7ZS5jb21wbGV0ZU1lcmNoYW50VmFsaWRhdGlvbihuKX1jYXRjaChlKXt0aGlzLl9vbkVycm9yKGUpfX0pLGUub25zaGlwcGluZ2NvbnRhY3RzZWxlY3RlZD10PT5LKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSxpLHQpfSksZS5vbnNoaXBwaW5nbWV0aG9kc2VsZWN0ZWQ9dD0+Syh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2hhbmRsZVNoaXBwaW5nTWV0aG9kU2VsZWN0ZWQoZSxpLHQpfSksZS5vbmNhbmNlbD0oKT0+Syh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dGhpcy5faGFzQXBwbGVQYXlTZXNzaW9uPSExO3RyeXtjb25zdCBlPWAvcmVtb3RlLWNoZWNrb3V0LyR7dC5pZH0vc2lnbm91dGA7cmV0dXJuIHlpZWxkIHRoaXMuX3JlcXVlc3RTZW5kZXIuZ2V0KGUpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX29uRXJyb3IobmV3IHopfX0pLGUub25wYXltZW50YXV0aG9yaXplZD1pPT5LKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fb25QYXltZW50QXV0aG9yaXplZChpLGUsdCl9KX1faGFuZGxlU2hpcHBpbmdDb250YWN0U2VsZWN0ZWQoZSx0LGkpe3ZhciBuO3JldHVybiBLKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBhPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoaS5zaGlwcGluZ0NvbnRhY3QpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhKX1jYXRjaCh0KXtyZXR1cm4gZS5hYm9ydCgpLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMSx0aGlzLl9vbkVycm9yKHQpfWNvbnN0e3N0b3JlUHJvZmlsZTp7c3RvcmVOYW1lOm99fT10O2xldCByPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtjb25zdHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpzfX09ci5nZXRDYXJ0T3JUaHJvdygpO2xldCBsPXIuZ2V0Q2hlY2tvdXRPclRocm93KCk7Y29uc3QgZD1udWxsPT09KG49bC5jb25zaWdubWVudHNbMF0uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQsYz1sLmNvbnNpZ25tZW50c1swXS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsaD1udWxsPT1jP3ZvaWQgMDpjLmZpbmQoKHtpZDplfSk9PmU9PT1kKSx1PW51bGw9PWM/dm9pZCAwOmMuZmlsdGVyKGU9PmUuaWQhPT1kKSxwPWg/W3tsYWJlbDpoLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtoLmNvc3QudG9GaXhlZChzKX1gLGRldGFpbDpoLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmguaWR9XTpbXTtpZih1JiZbLi4udS5maWx0ZXIoZT0+ZS5pc1JlY29tbWVuZGVkKSwuLi51LmZpbHRlcihlPT4hZS5pc1JlY29tbWVuZGVkKV0uZm9yRWFjaChlPT5wLnB1c2goe2xhYmVsOmUuZGVzY3JpcHRpb24sYW1vdW50OmAke2UuY29zdC50b0ZpeGVkKHMpfWAsZGV0YWlsOmUuYWRkaXRpb25hbERlc2NyaXB0aW9uLGlkZW50aWZpZXI6ZS5pZH0pKSwhKGMgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9ucyBub3QgYXZhaWxhYmxlLlwiKTtpZigwPT09Yy5sZW5ndGgpcmV0dXJuIHZvaWQgZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbihBcHBsZVBheVNlc3Npb24uU1RBVFVTX0lOVkFMSURfU0hJUFBJTkdfUE9TVEFMX0FERFJFU1MsW10se3R5cGU6XCJwZW5kaW5nXCIsbGFiZWw6byxhbW91bnQ6YCR7bC5ncmFuZFRvdGFsLnRvRml4ZWQocyl9YH0sW10pO2NvbnN0IG09Yy5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCkseT1tP20uaWQ6Y1swXS5pZCxnPWg/aC5pZDp5O3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbihnKX1jYXRjaChlKXtyZXR1cm4gdGhpcy5fb25FcnJvcihlKX1yPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxsPXIuZ2V0Q2hlY2tvdXRPclRocm93KCksZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbih7bmV3U2hpcHBpbmdNZXRob2RzOnAsbmV3VG90YWw6e3R5cGU6XCJmaW5hbFwiLGxhYmVsOm8sYW1vdW50OmAke2wuZ3JhbmRUb3RhbC50b0ZpeGVkKHMpfWB9LG5ld0xpbmVJdGVtczp0aGlzLl9nZXRVcGRhdGVkTGluZUl0ZW1zKGwscyl9KX0pfV9oYW5kbGVTaGlwcGluZ01ldGhvZFNlbGVjdGVkKGUsdCxpKXtyZXR1cm4gSyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7c3RvcmVQcm9maWxlOntzdG9yZU5hbWU6bn19PXQse3NoaXBwaW5nTWV0aG9kOntpZGVudGlmaWVyOmF9fT1pO3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbihhKX1jYXRjaCh0KXtyZXR1cm4gZS5hYm9ydCgpLHRoaXMuX2hhc0FwcGxlUGF5U2Vzc2lvbj0hMSx0aGlzLl9vbkVycm9yKHQpfWNvbnN0IG89dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpyfX09by5nZXRDYXJ0T3JUaHJvdygpLHM9by5nZXRDaGVja291dE9yVGhyb3coKTtlLmNvbXBsZXRlU2hpcHBpbmdNZXRob2RTZWxlY3Rpb24oe25ld1RvdGFsOnt0eXBlOlwiZmluYWxcIixsYWJlbDpuLGFtb3VudDpgJHtzLmdyYW5kVG90YWwudG9GaXhlZChyKX1gfSxuZXdMaW5lSXRlbXM6dGhpcy5fZ2V0VXBkYXRlZExpbmVJdGVtcyhzLHIpfSl9KX1fZ2V0VXBkYXRlZExpbmVJdGVtcyhlLHQpe2NvbnN0IGk9W3tsYWJlbDp0aGlzLl9zdWJUb3RhbExhYmVsLGFtb3VudDpgJHtlLnN1YnRvdGFsLnRvRml4ZWQodCl9YH1dO3JldHVybiBlLnRheGVzLmZvckVhY2goZT0+aS5wdXNoKHtsYWJlbDplLm5hbWUsYW1vdW50OmAke2UuYW1vdW50LnRvRml4ZWQodCl9YH0pKSxpLnB1c2goe2xhYmVsOnRoaXMuX3NoaXBwaW5nTGFiZWwsYW1vdW50OmAke2Uuc2hpcHBpbmdDb3N0VG90YWwudG9GaXhlZCh0KX1gfSksaX1fdXBkYXRlU2hpcHBpbmdPcHRpb24oZSl7cmV0dXJuIEsodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUpfSl9X29uVmFsaWRhdGVNZXJjaGFudChlLHQpe3JldHVybiBLKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBpPVtgdmFsaWRhdGlvblVybD0ke3QudmFsaWRhdGlvblVSTH1gLGBtZXJjaGFudElkZW50aWZpZXI9JHtlLmluaXRpYWxpemF0aW9uRGF0YS5tZXJjaGFudElkfWAsYGRpc3BsYXlOYW1lPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEuc3RvcmVOYW1lfWAsYGRvbWFpbk5hbWU9JHt3aW5kb3cubG9jYXRpb24uaG9zdG5hbWV9YF0uam9pbihcIiZcIik7cmV0dXJuIHRoaXMuX3JlcXVlc3RTZW5kZXIucG9zdChgJHtlLmluaXRpYWxpemF0aW9uRGF0YS5wYXltZW50c1VybH0vYXBpL3B1YmxpYy92MS9wYXltZW50cy9hcHBsZXBheS92YWxpZGF0ZV9tZXJjaGFudGAse2NyZWRlbnRpYWxzOiExLGhlYWRlcnM6e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb25cIixcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsXCJYLVhTUkYtVE9LRU5cIjpudWxsfSxib2R5Oml9KX0pfV9vblBheW1lbnRBdXRob3JpemVkKGUsdCxpKXt2YXIgbjtyZXR1cm4gSyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3R7dG9rZW46YSxiaWxsaW5nQ29udGFjdDpvLHNoaXBwaW5nQ29udGFjdDpyfT1lLnBheW1lbnQscz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGg+MDtsZXQgbDsobnVsbD09PShuPWkuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5nYXRld2F5KT09PU0uQlJBSU5UUkVFJiYobD15aWVsZCB0aGlzLl9nZXRCcmFpbnRyZWVEZXZpY2VEYXRhKCkpO2NvbnN0IGQ9e21ldGhvZElkOmkuaWQscGF5bWVudERhdGE6e2RldmljZVNlc3Npb25JZDpsLGZvcm1hdHRlZFBheWxvYWQ6e2FwcGxlX3BheV90b2tlbjp7cGF5bWVudF9kYXRhOmEucGF5bWVudERhdGEscGF5bWVudF9tZXRob2Q6YS5wYXltZW50TWV0aG9kLHRyYW5zYWN0aW9uX2lkOmEudHJhbnNhY3Rpb25JZGVudGlmaWVyfX19fSxjPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MobyksaD10aGlzLl90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKHIpLHU9bnVsbD09cj92b2lkIDA6ci5lbWFpbEFkZHJlc3MscD0obnVsbD09cj92b2lkIDA6ci5waG9uZU51bWJlcil8fFwiXCI7dHJ5e3JldHVybiB5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxjKSx7ZW1haWw6dSxwaG9uZTpwfSkpLHMmJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhoKSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7dXNlU3RvcmVDcmVkaXQ6ITF9KSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoZCksdC5jb21wbGV0ZVBheW1lbnQoQXBwbGVQYXlTZXNzaW9uLlNUQVRVU19TVUNDRVNTKSx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrKCl9Y2F0Y2goZSl7cmV0dXJuIHQuY29tcGxldGVQYXltZW50KEFwcGxlUGF5U2Vzc2lvbi5TVEFUVVNfRkFJTFVSRSksdGhpcy5fb25FcnJvcihlKX19KX1fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhlKXtyZXR1cm57Zmlyc3ROYW1lOihudWxsPT1lP3ZvaWQgMDplLmdpdmVuTmFtZSl8fFwiXCIsbGFzdE5hbWU6KG51bGw9PWU/dm9pZCAwOmUuZmFtaWx5TmFtZSl8fFwiXCIsY2l0eToobnVsbD09ZT92b2lkIDA6ZS5sb2NhbGl0eSl8fFwiXCIsY29tcGFueTpcIlwiLGFkZHJlc3MxOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3NMaW5lcykmJmUuYWRkcmVzc0xpbmVzWzBdfHxcIlwiLGFkZHJlc3MyOihudWxsPT1lP3ZvaWQgMDplLmFkZHJlc3NMaW5lcykmJmUuYWRkcmVzc0xpbmVzWzFdfHxcIlwiLHBvc3RhbENvZGU6KG51bGw9PWU/dm9pZCAwOmUucG9zdGFsQ29kZSl8fFwiXCIsY291bnRyeUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuY291bnRyeUNvZGUpfHxcIlwiLHBob25lOihudWxsPT1lP3ZvaWQgMDplLnBob25lTnVtYmVyKXx8XCJcIixzdGF0ZU9yUHJvdmluY2U6KG51bGw9PWU/dm9pZCAwOmUuYWRtaW5pc3RyYXRpdmVBcmVhKXx8XCJcIixzdGF0ZU9yUHJvdmluY2VDb2RlOihudWxsPT1lP3ZvaWQgMDplLmFkbWluaXN0cmF0aXZlQXJlYSl8fFwiXCIsY3VzdG9tRmllbGRzOltdfX1fZ2V0QnJhaW50cmVlRGV2aWNlRGF0YSgpe3JldHVybiBLKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7ZGV2aWNlRGF0YTplfT15aWVsZCB0aGlzLl9icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKTtyZXR1cm4gZX1jYXRjaChlKXt9fSl9X2luaXRpYWxpemVCcmFpbnRyZWVTZGsoKXtyZXR1cm4gSyh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChNLkJSQUlOVFJFRSk7Y29uc3QgZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0UGF5bWVudE1ldGhvZChNLkJSQUlOVFJFRSk7ZSYmZS5jbGllbnRUb2tlbiYmZS5pbml0aWFsaXphdGlvbkRhdGEmJnRoaXMuX2JyYWludHJlZVNkay5pbml0aWFsaXplKGUuY2xpZW50VG9rZW4pfSl9fWNvbnN0IFk9TyhuPT57Y29uc3R7Z2V0SG9zdDphfT1uLmdldFN0YXRlKCksbz1uZXcgYyhuKTtyZXR1cm4gbmV3IFgoZSh7aG9zdDphKCl9KSxuLG5ldyBWLG5ldyBUKG5ldyBFKGkoKSx3aW5kb3csbykpLG5ldyBqKG5ldyB0KSl9LFt7aWQ6XCJhcHBsZXBheVwifV0pO2NsYXNzIFEgZXh0ZW5kcyBoe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGV8fFwiQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQgZHVyaW5nIGJ1eSBub3cgY2FydCBjcmVhdGlvbiBwcm9jZXNzLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKSx0aGlzLm5hbWU9XCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvclwiLHRoaXMudHlwZT1cImJ1eV9ub3dfY2FydF9jcmVhdGlvbl9lcnJvclwifX12YXIgWixKLGVlPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBuZXcoaXx8KGk9UHJvbWlzZSkpKGZ1bmN0aW9uKGEsbyl7ZnVuY3Rpb24gcihlKXt0cnl7bChuLm5leHQoZSkpfWNhdGNoKGUpe28oZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2wobi50aHJvdyhlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gbChlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBpP3Q6bmV3IGkoZnVuY3Rpb24oZSl7ZSh0KX0pKS50aGVuKHIscyl9bCgobj1uLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSl9OyFmdW5jdGlvbihlKXtlLlN1YnRvdGFsPVwiU3VidG90YWxcIixlLlNoaXBwaW5nPVwiU2hpcHBpbmdcIn0oWnx8KFo9e30pKSxmdW5jdGlvbihlKXtlLkJsYWNrPVwiYmxhY2tcIixlLldoaXRlPVwid2hpdGVcIixlLldoaXRlQm9yZGVyPVwid2hpdGUtYm9yZGVyXCJ9KEp8fChKPXt9KSk7Y2xhc3MgdGV7Y29uc3RydWN0b3IoZSx0LGksbixvKXt0aGlzLl9yZXF1ZXN0U2VuZGVyPWUsdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZT10LHRoaXMuX3Nlc3Npb25GYWN0b3J5PWksdGhpcy5fYnJhaW50cmVlU2RrPW4sdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXI9byx0aGlzLl9vbkF1dGhvcml6ZUNhbGxiYWNrPWEsdGhpcy5fc3ViVG90YWxMYWJlbD1aLlN1YnRvdGFsLHRoaXMuX3NoaXBwaW5nTGFiZWw9Wi5TaGlwcGluZ31pbml0aWFsaXplKGUpe3ZhciB0LGk7cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHttZXRob2RJZDpuLGNvbnRhaW5lcklkOmEsYXBwbGVwYXk6b309ZTtpZighbnx8IW8pdGhyb3cgbmV3IFcoSC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7eWllbGQgdGhpcy5fYXBwbGVQYXlTY3JpcHRMb2FkZXIubG9hZFNkaygpO2NvbnN0e29uUGF5bWVudEF1dGhvcml6ZTpyLGJ1eU5vd0luaXRpYWxpemVPcHRpb25zOnMscmVxdWlyZXNTaGlwcGluZzpsfT1vO3RoaXMuX3JlcXVpcmVzU2hpcHBpbmc9bCx0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucz1zLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2s9cixzfHwoeWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCkpLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2Qobik7Y29uc3QgZD10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7cmV0dXJuIHRoaXMuX3BheW1lbnRNZXRob2Q9ZC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhuKSxkLmdldENhcnQoKSYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudmVyaWZ5Q2hlY2tvdXRTcGFtUHJvdGVjdGlvbigpKSwobnVsbD09PSh0PXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nYXRld2F5KT09PU0uQlJBSU5UUkVFJiYoeWllbGQgdGhpcy5faW5pdGlhbGl6ZUJyYWludHJlZVNkaygpKSx0aGlzLl9hcHBsZVBheUJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24oYSxudWxsPT09KGk9dGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0eWxlT3B0aW9uKSx0aGlzLl9hcHBsZVBheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9oYW5kbGVXYWxsZXRCdXR0b25DbGljay5iaW5kKHRoaXMpKSxQcm9taXNlLnJlc29sdmUoKX0pfWRlaW5pdGlhbGl6ZSgpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX1fY3JlYXRlQnV0dG9uKGUsdCl7Y29uc3QgaT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKTtpZighaSl0aHJvdyBuZXcgRChcIlVuYWJsZSB0byBjcmVhdGUgd2FsbGV0IGJ1dHRvbiB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC5cIik7Y29uc3Qgbj10aGlzLl9jcmVhdGVBcHBsZVBheUJ1dHRvbkVsZW1lbnQodCk7cmV0dXJuIGkuYXBwZW5kQ2hpbGQobiksbn1fY3JlYXRlQXBwbGVQYXlCdXR0b25FbGVtZW50KGUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFwcGxlLXBheS1idXR0b25cIik7cmV0dXJuIHQuc2V0QXR0cmlidXRlKFwiYnV0dG9uc3R5bGVcIiwoZT0+e3N3aXRjaChlKXtjYXNlIEouV2hpdGU6cmV0dXJuXCJ3aGl0ZVwiO2Nhc2UgSi5XaGl0ZUJvcmRlcjpyZXR1cm5cIndoaXRlLW91dGxpbmVcIjtjYXNlIEouQmxhY2s6ZGVmYXVsdDpyZXR1cm5cImJsYWNrXCJ9fSkoZSkpLHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicGxhaW5cIiksdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiLS1hcHBsZS1wYXktYnV0dG9uLXdpZHRoOiAxMDAlOyAtLWFwcGxlLXBheS1idXR0b24taGVpZ2h0OiA0MHB4OyAtLWFwcGxlLXBheS1idXR0b24tYm9yZGVyLXJhZGl1czogNHB4O1wiKSx0fV9oYW5kbGVXYWxsZXRCdXR0b25DbGljayhlKXt2YXIgdDtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe2lmKGUucHJldmVudERlZmF1bHQoKSwhdGhpcy5fcGF5bWVudE1ldGhvZHx8IXRoaXMuX3BheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhKXRocm93IG5ldyBXKEguTWlzc2luZ1BheW1lbnRNZXRob2QpO2lmKHRoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkpe2NvbnN0e2NvdW50cnlDb2RlOmUsY3VycmVuY3lDb2RlOmksbWVyY2hhbnRDYXBhYmlsaXRpZXM6bixzdXBwb3J0ZWROZXR3b3JrczphLHN0b3JlTmFtZTpvfT10aGlzLl9wYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSxyPXRoaXMuX2dldFJlcXVlc3RXaXRoRW1wdHlUb3RhbChlLGksYSxuKTt0aGlzLl9yZXF1aXJlc1NoaXBwaW5nJiYobnVsbD09PSh0PXIucmVxdWlyZWRTaGlwcGluZ0NvbnRhY3RGaWVsZHMpfHx2b2lkIDA9PT10fHx0LnB1c2goXCJwb3N0YWxBZGRyZXNzXCIpKTtjb25zdCBzPXRoaXMuX3Nlc3Npb25GYWN0b3J5LmNyZWF0ZShyKTt0aGlzLl9oYW5kbGVBcHBsZVBheUV2ZW50cyhzLHRoaXMuX3BheW1lbnRNZXRob2Qsbykscy5iZWdpbigpfWVsc2V7Y29uc3QgZT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCksdD1lLmdldENhcnRPclRocm93KCksaT1lLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLG49ZS5nZXRDaGVja291dE9yVGhyb3coKSxhPXRoaXMuX2dldEJhc2VSZXF1ZXN0KHQsbixpLHRoaXMuX3BheW1lbnRNZXRob2QpLG89dGhpcy5fc2Vzc2lvbkZhY3RvcnkuY3JlYXRlKGEpO3RoaXMuX2hhbmRsZUFwcGxlUGF5RXZlbnRzKG8sdGhpcy5fcGF5bWVudE1ldGhvZCxpLnN0b3JlUHJvZmlsZS5zdG9yZU5hbWUpLG8uYmVnaW4oKX19KX1fZ2V0UmVxdWVzdFdpdGhFbXB0eVRvdGFsKGUsdCxpLG4pe3JldHVybntjb3VudHJ5Q29kZTplLGN1cnJlbmN5Q29kZTp0LHN1cHBvcnRlZE5ldHdvcmtzOmksbWVyY2hhbnRDYXBhYmlsaXRpZXM6bix0b3RhbDp7bGFiZWw6XCJcIixhbW91bnQ6XCIwXCIsdHlwZTpcInBlbmRpbmdcIn0scmVxdWlyZWRCaWxsaW5nQ29udGFjdEZpZWxkczpbXCJwb3N0YWxBZGRyZXNzXCJdLHJlcXVpcmVkU2hpcHBpbmdDb250YWN0RmllbGRzOltcImVtYWlsXCIsXCJwaG9uZVwiXX19X2dldEJhc2VSZXF1ZXN0KGUsdCxpLG4pe3ZhciBhO2NvbnN0e3N0b3JlUHJvZmlsZTp7c3RvcmVDb3VudHJ5Q29kZTpvLHN0b3JlTmFtZTpyfX09aSx7Y3VycmVuY3k6e2NvZGU6cyxkZWNpbWFsUGxhY2VzOmx9fT1lLHtpbml0aWFsaXphdGlvbkRhdGE6e21lcmNoYW50Q2FwYWJpbGl0aWVzOmQsc3VwcG9ydGVkTmV0d29ya3M6Y319PW4saD1lLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wLHU9e3JlcXVpcmVkQmlsbGluZ0NvbnRhY3RGaWVsZHM6W1wicG9zdGFsQWRkcmVzc1wiXSxyZXF1aXJlZFNoaXBwaW5nQ29udGFjdEZpZWxkczpbXCJlbWFpbFwiLFwicGhvbmVcIl0sY291bnRyeUNvZGU6byxjdXJyZW5jeUNvZGU6cyxtZXJjaGFudENhcGFiaWxpdGllczpkLHN1cHBvcnRlZE5ldHdvcmtzOmMsbGluZUl0ZW1zOltdLHRvdGFsOmg/e2xhYmVsOnIsYW1vdW50OmAke3QuZ3JhbmRUb3RhbC50b0ZpeGVkKGwpfWAsdHlwZTpcInBlbmRpbmdcIn06e2xhYmVsOnIsYW1vdW50OmAke3QuZ3JhbmRUb3RhbC50b0ZpeGVkKGwpfWAsdHlwZTpcImZpbmFsXCJ9fTtpZihoKW51bGw9PT0oYT11LnJlcXVpcmVkU2hpcHBpbmdDb250YWN0RmllbGRzKXx8dm9pZCAwPT09YXx8YS5wdXNoKFwicG9zdGFsQWRkcmVzc1wiKTtlbHNle2NvbnN0IGU9W3tsYWJlbDp0aGlzLl9zdWJUb3RhbExhYmVsLGFtb3VudDpgJHt0LnN1YnRvdGFsLnRvRml4ZWQobCl9YH1dO3QudGF4ZXMuZm9yRWFjaCh0PT5lLnB1c2goe2xhYmVsOnQubmFtZSxhbW91bnQ6YCR7dC5hbW91bnQudG9GaXhlZChsKX1gfSkpLHUubGluZUl0ZW1zPWV9cmV0dXJuIHV9X2hhbmRsZUFwcGxlUGF5RXZlbnRzKGUsdCxpKXtlLm9udmFsaWRhdGVtZXJjaGFudD1pPT5lZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0e2JvZHk6bn09eWllbGQgdGhpcy5fb25WYWxpZGF0ZU1lcmNoYW50KHQsaSk7ZS5jb21wbGV0ZU1lcmNoYW50VmFsaWRhdGlvbihuKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXJjaGFudCB2YWxpZGF0aW9uIGZhaWxlZFwiKX19KSx0aGlzLl9idXlOb3dJbml0aWFsaXplT3B0aW9ucyYmIXRoaXMuX3JlcXVpcmVzU2hpcHBpbmcmJihlLm9ucGF5bWVudG1ldGhvZHNlbGVjdGVkPSgpPT5lZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5fY3JlYXRlQnV5Tm93Q2FydCgpLHRoaXMuX2hhbmRsZVBheW1lbnRNZXRob2RTZWxlY3RlZChlKX0pKSxlLm9uc2hpcHBpbmdjb250YWN0c2VsZWN0ZWQ9dD0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RoaXMuX2J1eU5vd0luaXRpYWxpemVPcHRpb25zJiZ0aGlzLl9yZXF1aXJlc1NoaXBwaW5nJiYoeWllbGQgdGhpcy5fY3JlYXRlQnV5Tm93Q2FydCgpKSx5aWVsZCB0aGlzLl9oYW5kbGVTaGlwcGluZ0NvbnRhY3RTZWxlY3RlZChlLGksdCl9KSxlLm9uc2hpcHBpbmdtZXRob2RzZWxlY3RlZD10PT5lZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7eWllbGQgdGhpcy5faGFuZGxlU2hpcHBpbmdNZXRob2RTZWxlY3RlZChlLGksdCl9KSxlLm9uY2FuY2VsPSgpPT5lZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7dHJ5e2NvbnN0IGU9YC9yZW1vdGUtY2hlY2tvdXQvJHt0LmlkfS9zaWdub3V0YDtyZXR1cm4geWllbGQgdGhpcy5fcmVxdWVzdFNlbmRlci5nZXQoZSkseWllbGQgdGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoKX1jYXRjaChlKXt0aHJvdyBuZXcgen19KSxlLm9ucGF5bWVudGF1dGhvcml6ZWQ9aT0+ZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9vblBheW1lbnRBdXRob3JpemVkKGksZSx0KX0pfV9jcmVhdGVCdXlOb3dDYXJ0KCl7dmFyIGUsdDtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3RyeXtjb25zdCBpPW51bGw9PT0odD1udWxsPT09KGU9dGhpcy5fYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2FsbChlKTtpZighaSl0aHJvdyBuZXcgVyhILk1pc3NpbmdDYXJ0KTtjb25zdCBuPXlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydChpKTt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChuLmlkKTtjb25zdCBhPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSx7c2hvdWxkRXhlY3V0ZVNwYW1DaGVjazpvfT1hLmdldENoZWNrb3V0T3JUaHJvdygpO28mJih5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnZlcmlmeUNoZWNrb3V0U3BhbVByb3RlY3Rpb24oKSl9Y2F0Y2goZSl7dGhyb3cgbmV3IFF9fSl9X2hhbmRsZVBheW1lbnRNZXRob2RTZWxlY3RlZChlKXtjb25zdCB0PXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKSxpPXQuZ2V0Q2FydE9yVGhyb3coKSxuPXQuZ2V0U3RvcmVDb25maWdPclRocm93KCksYT10LmdldENoZWNrb3V0T3JUaHJvdygpO2lmKCF0aGlzLl9wYXltZW50TWV0aG9kfHwhdGhpcy5fcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEpdGhyb3cgbmV3IFcoSC5NaXNzaW5nUGF5bWVudE1ldGhvZCk7Y29uc3Qgbz10aGlzLl9nZXRCYXNlUmVxdWVzdChpLGEsbix0aGlzLl9wYXltZW50TWV0aG9kKTtkZWxldGUgby50b3RhbC50eXBlLGUuY29tcGxldGVQYXltZW50TWV0aG9kU2VsZWN0aW9uKHtuZXdUb3RhbDpvLnRvdGFsLG5ld0xpbmVJdGVtczpvLmxpbmVJdGVtc30pfV9oYW5kbGVTaGlwcGluZ0NvbnRhY3RTZWxlY3RlZChlLHQsaSl7dmFyIG47cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdCBhPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MoaS5zaGlwcGluZ0NvbnRhY3QpO3RyeXt5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhKX1jYXRjaCh0KXt0aHJvdyBlLmFib3J0KCksbmV3IEVycm9yKFwiU2hpcHBpbmcgYWRkcmVzcyB1cGRhdGUgZmFpbGVkXCIpfWxldCBvPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtjb25zdHtjdXJyZW5jeTp7ZGVjaW1hbFBsYWNlczpyfX09by5nZXRDYXJ0T3JUaHJvdygpO2xldCBzPW8uZ2V0Q2hlY2tvdXRPclRocm93KCk7Y29uc3QgbD1udWxsPT09KG49cy5jb25zaWdubWVudHNbMF0uc2VsZWN0ZWRTaGlwcGluZ09wdGlvbil8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWQsZD1zLmNvbnNpZ25tZW50c1swXS5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMsYz1udWxsPT1kP3ZvaWQgMDpkLmZpbmQoKHtpZDplfSk9PmU9PT1sKSxoPW51bGw9PWQ/dm9pZCAwOmQuZmlsdGVyKGU9PmUuaWQhPT1sKSx1PWM/W3tsYWJlbDpjLmRlc2NyaXB0aW9uLGFtb3VudDpgJHtjLmNvc3QudG9GaXhlZChyKX1gLGRldGFpbDpjLmFkZGl0aW9uYWxEZXNjcmlwdGlvbixpZGVudGlmaWVyOmMuaWR9XTpbXTtpZihoJiZbLi4uaC5maWx0ZXIoZT0+ZS5pc1JlY29tbWVuZGVkKSwuLi5oLmZpbHRlcihlPT4hZS5pc1JlY29tbWVuZGVkKV0uZm9yRWFjaChlPT51LnB1c2goe2xhYmVsOmUuZGVzY3JpcHRpb24sYW1vdW50OmAke2UuY29zdC50b0ZpeGVkKHIpfWAsZGV0YWlsOmUuYWRkaXRpb25hbERlc2NyaXB0aW9uLGlkZW50aWZpZXI6ZS5pZH0pKSwhKGQgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgbmV3IEVycm9yKFwiU2hpcHBpbmcgb3B0aW9ucyBub3QgYXZhaWxhYmxlLlwiKTtpZigwPT09ZC5sZW5ndGgpcmV0dXJuIHZvaWQgZS5jb21wbGV0ZVNoaXBwaW5nQ29udGFjdFNlbGVjdGlvbihBcHBsZVBheVNlc3Npb24uU1RBVFVTX0lOVkFMSURfU0hJUFBJTkdfUE9TVEFMX0FERFJFU1MsW10se3R5cGU6XCJwZW5kaW5nXCIsbGFiZWw6dCxhbW91bnQ6YCR7cy5ncmFuZFRvdGFsLnRvRml4ZWQocil9YH0sW10pO2NvbnN0IHA9ZC5maW5kKGU9PmUuaXNSZWNvbW1lbmRlZCksbT1wP3AuaWQ6ZFswXS5pZCx5PWM/Yy5pZDptO3RyeXt5aWVsZCB0aGlzLl91cGRhdGVTaGlwcGluZ09wdGlvbih5KX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJTaGlwcGluZyBvcHRpb25zIHVwZGF0ZSBmYWlsZWRcIil9bz10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkscz1vLmdldENoZWNrb3V0T3JUaHJvdygpLGUuY29tcGxldGVTaGlwcGluZ0NvbnRhY3RTZWxlY3Rpb24oe25ld1NoaXBwaW5nTWV0aG9kczp1LG5ld1RvdGFsOnt0eXBlOlwiZmluYWxcIixsYWJlbDp0LGFtb3VudDpgJHtzLmdyYW5kVG90YWwudG9GaXhlZChyKX1gfSxuZXdMaW5lSXRlbXM6dGhpcy5fZ2V0VXBkYXRlZExpbmVJdGVtcyhzLHIpfSl9KX1faGFuZGxlU2hpcHBpbmdNZXRob2RTZWxlY3RlZChlLHQsaSl7cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHtzaGlwcGluZ01ldGhvZDp7aWRlbnRpZmllcjpufX09aTt0cnl7eWllbGQgdGhpcy5fdXBkYXRlU2hpcHBpbmdPcHRpb24obil9Y2F0Y2godCl7dGhyb3cgZS5hYm9ydCgpLG5ldyBFcnJvcihcIlNoaXBwaW5nIG9wdGlvbiBzZWxlY3Rpb24gdXBkYXRlIGZhaWxlZC5cIil9Y29uc3QgYT10aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkse2N1cnJlbmN5OntkZWNpbWFsUGxhY2VzOm99fT1hLmdldENhcnRPclRocm93KCkscj1hLmdldENoZWNrb3V0T3JUaHJvdygpO2UuY29tcGxldGVTaGlwcGluZ01ldGhvZFNlbGVjdGlvbih7bmV3VG90YWw6e3R5cGU6XCJmaW5hbFwiLGxhYmVsOnQsYW1vdW50OmAke3IuZ3JhbmRUb3RhbC50b0ZpeGVkKG8pfWB9LG5ld0xpbmVJdGVtczp0aGlzLl9nZXRVcGRhdGVkTGluZUl0ZW1zKHIsbyl9KX0pfV9nZXRVcGRhdGVkTGluZUl0ZW1zKGUsdCl7Y29uc3QgaT1be2xhYmVsOnRoaXMuX3N1YlRvdGFsTGFiZWwsYW1vdW50OmAke2Uuc3VidG90YWwudG9GaXhlZCh0KX1gfV07cmV0dXJuIGUudGF4ZXMuZm9yRWFjaChlPT5pLnB1c2goe2xhYmVsOmUubmFtZSxhbW91bnQ6YCR7ZS5hbW91bnQudG9GaXhlZCh0KX1gfSkpLGkucHVzaCh7bGFiZWw6dGhpcy5fc2hpcHBpbmdMYWJlbCxhbW91bnQ6YCR7ZS5zaGlwcGluZ0Nvc3RUb3RhbC50b0ZpeGVkKHQpfWB9KSxpfV91cGRhdGVTaGlwcGluZ09wdGlvbihlKXtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKGUpfSl9X29uVmFsaWRhdGVNZXJjaGFudChlLHQpe3JldHVybiBlZSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24qKCl7Y29uc3QgaT1bYHZhbGlkYXRpb25Vcmw9JHt0LnZhbGlkYXRpb25VUkx9YCxgbWVyY2hhbnRJZGVudGlmaWVyPSR7ZS5pbml0aWFsaXphdGlvbkRhdGEubWVyY2hhbnRJZH1gLGBkaXNwbGF5TmFtZT0ke2UuaW5pdGlhbGl6YXRpb25EYXRhLnN0b3JlTmFtZX1gLGBkb21haW5OYW1lPSR7d2luZG93LmxvY2F0aW9uLmhvc3RuYW1lfWBdLmpvaW4oXCImXCIpO3JldHVybiB0aGlzLl9yZXF1ZXN0U2VuZGVyLnBvc3QoYCR7ZS5pbml0aWFsaXphdGlvbkRhdGEucGF5bWVudHNVcmx9L2FwaS9wdWJsaWMvdjEvcGF5bWVudHMvYXBwbGVwYXkvdmFsaWRhdGVfbWVyY2hhbnRgLHtjcmVkZW50aWFsczohMSxoZWFkZXJzOntBY2NlcHQ6XCJhcHBsaWNhdGlvbi9qc29uXCIsXCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFwiWC1YU1JGLVRPS0VOXCI6bnVsbH0sYm9keTppfSl9KX1fb25QYXltZW50QXV0aG9yaXplZChlLHQsaSl7dmFyIG47cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXtjb25zdHt0b2tlbjphLGJpbGxpbmdDb250YWN0Om8sc2hpcHBpbmdDb250YWN0OnJ9PWUucGF5bWVudCxzPXRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aD4wO2xldCBsOyhudWxsPT09KG49aS5pbml0aWFsaXphdGlvbkRhdGEpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmdhdGV3YXkpPT09TS5CUkFJTlRSRUUmJihsPXlpZWxkIHRoaXMuX2dldEJyYWludHJlZURldmljZURhdGEoKSk7Y29uc3QgZD17bWV0aG9kSWQ6aS5pZCxwYXltZW50RGF0YTp7ZGV2aWNlU2Vzc2lvbklkOmwsZm9ybWF0dGVkUGF5bG9hZDp7YXBwbGVfcGF5X3Rva2VuOntwYXltZW50X2RhdGE6YS5wYXltZW50RGF0YSxwYXltZW50X21ldGhvZDphLnBheW1lbnRNZXRob2QsdHJhbnNhY3Rpb25faWQ6YS50cmFuc2FjdGlvbklkZW50aWZpZXJ9fX19LGM9dGhpcy5fdHJhbnNmb3JtQ29udGFjdFRvQWRkcmVzcyhvKSxoPXRoaXMuX3RyYW5zZm9ybUNvbnRhY3RUb0FkZHJlc3MociksdT1udWxsPT1yP3ZvaWQgMDpyLmVtYWlsQWRkcmVzcyxwPShudWxsPT1yP3ZvaWQgMDpyLnBob25lTnVtYmVyKXx8XCJcIjt0cnl7cmV0dXJuIHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGMpLHtlbWFpbDp1LHBob25lOnB9KSkscyYmKHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGgpKSx5aWVsZCB0aGlzLl9wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt1c2VTdG9yZUNyZWRpdDohMX0pLHlpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChkKSx0LmNvbXBsZXRlUGF5bWVudChBcHBsZVBheVNlc3Npb24uU1RBVFVTX1NVQ0NFU1MpLHRoaXMuX29uQXV0aG9yaXplQ2FsbGJhY2soKX1jYXRjaChlKXt0aHJvdyB0LmNvbXBsZXRlUGF5bWVudChBcHBsZVBheVNlc3Npb24uU1RBVFVTX0ZBSUxVUkUpLG5ldyBFcnJvcihcIlBheW1lbnQgY2Fubm90IGNvbXBsZXRlXCIpfX0pfV90cmFuc2Zvcm1Db250YWN0VG9BZGRyZXNzKGUpe3JldHVybntmaXJzdE5hbWU6KG51bGw9PWU/dm9pZCAwOmUuZ2l2ZW5OYW1lKXx8XCJcIixsYXN0TmFtZToobnVsbD09ZT92b2lkIDA6ZS5mYW1pbHlOYW1lKXx8XCJcIixjaXR5OihudWxsPT1lP3ZvaWQgMDplLmxvY2FsaXR5KXx8XCJcIixjb21wYW55OlwiXCIsYWRkcmVzczE6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzc0xpbmVzKSYmZS5hZGRyZXNzTGluZXNbMF18fFwiXCIsYWRkcmVzczI6KG51bGw9PWU/dm9pZCAwOmUuYWRkcmVzc0xpbmVzKSYmZS5hZGRyZXNzTGluZXNbMV18fFwiXCIscG9zdGFsQ29kZToobnVsbD09ZT92b2lkIDA6ZS5wb3N0YWxDb2RlKXx8XCJcIixjb3VudHJ5Q29kZToobnVsbD09ZT92b2lkIDA6ZS5jb3VudHJ5Q29kZSl8fFwiXCIscGhvbmU6KG51bGw9PWU/dm9pZCAwOmUucGhvbmVOdW1iZXIpfHxcIlwiLHN0YXRlT3JQcm92aW5jZToobnVsbD09ZT92b2lkIDA6ZS5hZG1pbmlzdHJhdGl2ZUFyZWEpfHxcIlwiLHN0YXRlT3JQcm92aW5jZUNvZGU6KG51bGw9PWU/dm9pZCAwOmUuYWRtaW5pc3RyYXRpdmVBcmVhKXx8XCJcIixjdXN0b21GaWVsZHM6W119fV9nZXRCcmFpbnRyZWVEZXZpY2VEYXRhKCl7cmV0dXJuIGVlKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbiooKXt0cnl7Y29uc3R7ZGV2aWNlRGF0YTplfT15aWVsZCB0aGlzLl9icmFpbnRyZWVTZGsuZ2V0RGF0YUNvbGxlY3Rvck9yVGhyb3coKTtyZXR1cm4gZX1jYXRjaChlKXt9fSl9X2luaXRpYWxpemVCcmFpbnRyZWVTZGsoKXtyZXR1cm4gZWUodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMuX3BheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoTS5CUkFJTlRSRUUpO2NvbnN0IGU9dGhpcy5fcGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldFBheW1lbnRNZXRob2QoTS5CUkFJTlRSRUUpO2UmJmUuY2xpZW50VG9rZW4mJmUuaW5pdGlhbGl6YXRpb25EYXRhJiZ0aGlzLl9icmFpbnRyZWVTZGsuaW5pdGlhbGl6ZShlLmNsaWVudFRva2VuKX0pfX1jb25zdCBpZT1PKG49Pntjb25zdHtnZXRIb3N0OmF9PW4uZ2V0U3RhdGUoKSxvPW5ldyBjKG4pO3JldHVybiBuZXcgdGUoZSh7aG9zdDphKCl9KSxuLG5ldyBWLG5ldyBUKG5ldyBFKGkoKSx3aW5kb3csbykpLG5ldyBqKG5ldyB0KSl9LFt7aWQ6XCJhcHBsZXBheVwifV0pO2V4cG9ydHtpZSBhcyBjcmVhdGVBcHBsZVBheUJ1dHRvblN0cmF0ZWd5LFkgYXMgY3JlYXRlQXBwbGVQYXlDdXN0b21lclN0cmF0ZWd5LHEgYXMgY3JlYXRlQXBwbGVQYXlQYXltZW50U3RyYXRlZ3l9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwbGUtcGF5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@bigcommerce/checkout-sdk/dist/esm/integrations/apple-pay.js\n\n}");

/***/ })

}]);