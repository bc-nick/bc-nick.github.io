"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_bigcommerce-payments_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js":
/*!************************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsButtonStrategy: () => (/* binding */ ht),\n/* harmony export */   createBigCommercePaymentsAlternativeMethodsPaymentStrategy: () => (/* binding */ Re),\n/* harmony export */   createBigCommercePaymentsButtonStrategy: () => (/* binding */ st),\n/* harmony export */   createBigCommercePaymentsCreditCardsPaymentStrategy: () => (/* binding */ Ue),\n/* harmony export */   createBigCommercePaymentsCustomerStrategy: () => (/* binding */ Ke),\n/* harmony export */   createBigCommercePaymentsFastlaneCustomerStrategy: () => (/* binding */ Ze),\n/* harmony export */   createBigCommercePaymentsFastlanePaymentStrategy: () => (/* binding */ be),\n/* harmony export */   createBigCommercePaymentsPayLaterButtonStrategy: () => (/* binding */ ct),\n/* harmony export */   createBigCommercePaymentsPayLaterCustomerStrategy: () => (/* binding */ tt),\n/* harmony export */   createBigCommercePaymentsPayLaterPaymentStrategy: () => (/* binding */ Ce),\n/* harmony export */   createBigCommercePaymentsPaymentStrategy: () => (/* binding */ Q),\n/* harmony export */   createBigCommercePaymentsRatePayPayPaymentStrategy: () => (/* binding */ ke),\n/* harmony export */   createBigCommercePaymentsRedirectAlternativeMethodsPaymentStrategy: () => (/* binding */ $e),\n/* harmony export */   createBigCommercePaymentsVenmoButtonStrategy: () => (/* binding */ gt),\n/* harmony export */   createBigCommercePaymentsVenmoCustomerStrategy: () => (/* binding */ ot),\n/* harmony export */   createBigCommercePaymentsVenmoPaymentStrategy: () => (/* binding */ Ge)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l;class c extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class m extends c{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class u extends c{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}var h=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class y{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return h(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new m}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return h(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new m;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return h(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new m}return this.window.paypalApms})}getPayPalMessages(e,t){return h(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new m;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return h(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new u(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":a,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"three-domain-secure\"],currency:t,intent:r},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new u(l.MissingPaymentMethod);const{intent:r,clientId:a,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:m,isDeveloperModeApplicable:h}=o,y=m||i;return{options:Object.assign({\"client-id\":a,\"merchant-id\":s,commit:y,components:[\"googlepay\"],currency:t,intent:r},h&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new u(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:r,buyerCountry:a,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:m=[]}=i,h=this.filterFundingOptions(m),y=this.filterFundingOptions(c.filter(e=>!m.includes(e)));return{options:Object.assign({\"client-id\":o,\"merchant-id\":r,\"enable-funding\":h.length>0?h:void 0,\"disable-funding\":y.length>0?y:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":a}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new u(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:r,isDeveloperModeApplicable:a,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},a&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":r}}}filterFundingOptions(e){const t=[\"klarna\",\"afterpay\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function p(){return new y((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.createScriptLoader)())}function g(e,t){return Object.assign(e,{resolveIds:t})}const v={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},f=\"embedded-checkout-loading-indicator-rotation\";class b{constructor(e){this.styles=Object.assign(Object.assign({},v),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${f} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(f))return;const t=document.createElement(\"style\");t.id=f,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${f} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}const P={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class S extends c{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const I={body:{},headers:{},status:0};class C extends c{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:r}=e||I;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=r,this.errors=i||[]}}var w,O,_,k,A,E,T,z;!function(e){e.BuyNow=\"BUY_NOW\"}(w||(w={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(O||(O={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(_||(_={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(k||(k={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(A||(A={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(E||(E={})),function(e){e.OXXO=\"oxxo\"}(T||(T={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(z||(z={}));var F=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.bigCommercePaymentsRequestSender=i,this.bigCommercePaymentsScriptLoader=n}loadPayPalSdk(e,t,i,n){return F(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),r=t||o.getCartOrThrow().currency.code,a=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.bigCommercePaymentsScriptLoader.getPayPalSDK(a,r,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new m;return this.paypalSdk}createBuyNowCartOrThrow(e){return F(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new u(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new S}})}createOrder(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.bigCommercePaymentsRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return F(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.bigCommercePaymentsRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new C}})}getOrderStatus(e,t){return F(this,void 0,void 0,function*(){try{const{status:i}=yield this.bigCommercePaymentsRequestSender.getOrderStatus(e,t);return i}catch(e){throw new C}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new u(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===w.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return F(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[r,...a]=o.split(\" \");return this.getAddress({firstName:r,lastName:a.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},a={color:t&&A[t]?t:void 0,height:this.getValidHeight(i),label:n&&k[n]?n:void 0,shape:o&&E[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(a,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const M=\"This API endpoint is for internal use only and may change in the future\";var x;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(x||(x={}));const D=x,N={\"X-Checkout-SDK-Version\":\"1.867.0\"};var U=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class j{constructor(e){this.requestSender=e}createOrder(e,t){return U(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":D.Json},N);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return U(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":D.Json},N);return(yield this.requestSender.put(\"/api/storefront/initialization/bigcommerce_payments\",{headers:i,body:t})).body})}getOrderStatus(e=\"bigcommerce_payments\",t){return U(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":D.Json},N);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var V=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class R{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return V(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return V(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new m;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:r}=e;if(!(null==r?void 0:r.clientId))throw new u(l.MissingPaymentMethod);const{intent:a,clientId:s,merchantId:d,buyerCountry:c,attributionId:m,isVenmoEnabled:h,isHostedCheckoutEnabled:y,isPayPalCreditAvailable:p,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:b}=r,P=y||i,S=\"bigcommerce_payments_creditcards\"===n,I=S?[\"card\"]:[],C=S?[]:[\"card\"],w=p?[\"credit\",\"paylater\"]:[],O=p?[]:[\"credit\",\"paylater\"],_=h?[\"venmo\"]:[],k=h?[]:[\"venmo\"],A=v.filter(e=>!f.includes(e)),E=b?[\"googlepay\"]:[],T=i?[\"card-fields\"]:[],z=this.filterFundingOptions([...C,...O,...k,...A]),F=this.filterFundingOptions([...I,...w,..._,...f]);return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":F.length>0?F:void 0,\"disable-funding\":z.length>0?z:void 0,commit:P,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...E,...T],currency:t,intent:a},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":m,\"data-client-token\":o}}}filterFundingOptions(e){const t=[\"klarna\",\"afterpay\"];return e?e.filter(e=>!t.includes(e)):[]}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const L=e=>{const{getHost:o}=e.getState();return new B((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__.createFormPoster)(),e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:o()})),new R((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()))},$=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};class q extends c{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class H extends q{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class G extends C{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class Y extends c{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function W(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function K(e){return Boolean(e.instrumentId)}function J(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var X=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Z{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.paypalSdkHelper=i,this.loadingIndicator=n}initialize(e){return X(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments:i}=e||{};if(this.bigcommerce_payments=i,!t)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(t),{container:r,bannerContainerId:a}=i,{orderId:s,paypalBNPLConfiguration:d=[],isPayPalCreditAvailable:l}=o.initializationData||{};if(void 0!==a){if(!document.getElementById(a))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==d?void 0:d.find(({id:e})=>\"checkout\"===e);if(l||!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(o,n.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,a,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}s?this.orderId=s:(this.loadingIndicatorContainer=null==r?void 0:r.split(\"#\")[1],yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),i.onInit&&\"function\"==typeof i.onInit&&i.onInit(()=>this.renderButton(t,i)),(void 0===i.shouldRenderPayPalButtonOnInitialization||i.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(t,i))})}execute(e,t){return X(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:o}=this.bigcommerce_payments||{};if(!i)throw new H([\"payment\"]);const{methodId:r,paymentData:a}=i;if(this.isPayPalVaultedInstrumentPaymentData(a)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new G;const s=this.isPayPalVaultedInstrumentPaymentData(a)?this.prepareVaultedInstrumentPaymentPayload(r,this.orderId,a):this.preparePaymentPayload(r,this.orderId,a);try{yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(s)}catch(e){return this.isProviderError(e)&&(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i.methodId),yield new Promise((e,t)=>{var n;this.bigcommerce_payments&&(null===(n=this.paypalButton)||void 0===n||n.close(),this.renderButton(i.methodId,this.bigcommerce_payments),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),o)),t()})),this.handleError(e,o),Promise.reject()}})}finalize(){return Promise.reject(new Y)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,r=!this.isTrustedVaultingFlow(i);return r?{methodId:e,paymentData:{shouldSaveInstrument:r,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=W(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t;if(!a)throw new q('Unable to initialize payment because \"container\" argument is not provided.');const m={fundingSource:i.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onError:e=>this.handleError(e,s),onCancel:()=>this.toggleLoadingIndicator(!1)};this.paypalButton=i.Buttons(m),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(a))}handleClick(e,t){return X(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return X(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_paymentscheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.bigcommerce_payments||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&K(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>J(t)&&t.bigpayToken===e.instrumentId);return!(J(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&K(e)&&W(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:$(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}}const Q=g(e=>new Z(e,L(e),p(),new b({containerStyles:P})),[{id:\"bigcommerce_payments\"}]);var ee,te,ie,ne,oe,re,ae,se,de;!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(ee||(ee={}));class le{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:r,domain:a,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}r&&(n+=`; path=${r}`),a&&(n+=`; domain=${a}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){le.set(e,\"\",Object.assign({expires:new Date(0)},t))}}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(te||(te={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(ie||(ie={})),function(e){e.Always=\"SCA_ALWAYS\"}(ne||(ne={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(oe||(oe={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(re||(re={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(ae||(ae={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(se||(se={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(de||(de={}));var ce=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class me{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return ce(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new m;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return ce(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return ce(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};le.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){le.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return le.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:r,profileData:a}=t,s=null===(o=null===(n=null===(i=null==a?void 0:a.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==a?void 0:a.shippingAddress,l=null==a?void 0:a.name,c=null==a?void 0:a.card,m=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],y=this.filterAddresses([m,u]);return{authenticationState:r||de.UNRECOGNIZED,addresses:y,billingAddress:u,shippingAddress:m,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:r,lastDigits:a}=n.card,[s,d]=r.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:a,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:ee.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,r]=t.fullName.split(\" \"),a=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||r||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+a,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function ue(){return new me}function he(e){return\"string\"!=typeof e}function ye(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,he),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,he),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,he),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,he),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,he),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(r).length&&(n.input=r),Object.keys(a).length&&(n.toggle=a),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,r,a,s,d,l,c,m,u,h,y,p,g,v,f,b,P,S,I,C;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(m=null==t?void 0:t.input)||void 0===m?void 0:m.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(p=null==t?void 0:t.toggle)||void 0===p?void 0:p.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(b=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===b?void 0:b.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(S=null===(P=null==t?void 0:t.text)||void 0===P?void 0:P.caption)||void 0===S?void 0:S.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(C=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===C?void 0:C.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}function pe(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}function ge(e,t,i=!0){var n;return null!==(n=e[t])&&void 0!==n?n:i}var ve=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsRequestSender=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){var t,i;return ve(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_fastlane:o}=e;if(!n)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(this.methodId=n,!o)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_fastlane\" argument is not provided.');if(this.bigcommerce_payments_fastlane=o,!o.onInit||\"function\"!=typeof o.onInit)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_fastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState(),a=r.getCartOrThrow(),s=r.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(s,a.currency.code,a.id);const c=ye(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return ve(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new H([\"payment\"]);const{paymentData:o,methodId:r}=i,a=o&&K(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=a?yield this.prepareVaultedInstrumentPaymentPayload(r,o):yield this.preparePaymentPayload(r,o);yield this.paymentIntegrationService.submitPayment(e),this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"name\"in e.response}(e)&&\"INVALID_REQUEST\"===e.response.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new Y)}deinitialize(){return ve(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=pe(n)?n:{},r=this.bigCommercePaymentsFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===de.CANCELED||(null==o?void 0:o.authenticationState)||r!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return ve(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),{authenticationState:d,addresses:l,instruments:c}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===de.CANCELED?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return ve(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new q('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new m;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return ve(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),o=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&n.config.is3dsEnabled?yield this.get3DSNonce(i):i;return yield this.createOrder(o),{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:o}}}}})}preparePaymentPayload(e,t){return ve(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),r=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:a}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield a({name:{fullName:r},billingAddress:this.bigCommercePaymentsFastlaneUtils.mapBcToPayPalAddress(n)}),d=this.isBigcommercePaymentsFastlaneThreeDSAvailable()&&o.config.is3dsEnabled,{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:c=!1}=W(t)?t:{},m=d?yield this.get3DSNonce(s):s;return yield this.createOrder(m),{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:c,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:m}}})}})}createOrder(e){return ve(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.bigCommercePaymentsRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return ve(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),r=i.getStoreConfigOrThrow().links.checkoutLink,a=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!a)throw new m;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:this.threeDSVerificationMethod===ne.Always,transactionContext:{experience_context:{locale:\"en-US\",return_url:r,cancel_url:r}}},d=yield a.isEligible(s);if(this.threeDSVerificationMethod===ne.Always&&!d)throw new G;if(d){const{liabilityShift:e,authenticationState:t,nonce:i}=yield a.show();if(e===O.No||e===O.Unknown||t===oe.Errored||t===oe.Cancelled)throw new G;if(t===oe.Succeeded&&[O.Yes,O.Possible].includes(e))return i}return e})}handlePayPalStoredInstrumentChange(e){return ve(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=pe(t)?t:{},o=this.bigCommercePaymentsFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}isBigcommercePaymentsFastlaneThreeDSAvailable(){return ge(this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings.features,\"PROJECT-7080.bcp_fastlane_three_ds\")}handleError(e){var t;(null===(t=this.bigcommerce_payments_fastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.bigcommerce_payments_fastlane.onError&&this.bigcommerce_payments_fastlane.onError(e)}}const be=g(e=>{const{getHost:t}=e.getState();return new fe(e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),p(),ue())},[{id:\"bigcommerce_payments_fastlane\"}]);class Pe extends c{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var Se=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ie{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.paypalSdkHelper=n}initialize(e){return Se(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_paylater:i}=e||{};if(!t)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:r=[],orderId:a}=o.initializationData||{},{bannerContainerId:s,container:d}=i;if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=r&&r.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalSdkHelper.getPayPalMessages(o,n.getCartOrThrow().currency.code);return this.renderMessages(t,s,e)}a?this.orderId=a:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==d?void 0:d.split(\"#\")[1],this.renderButton(t,i))})}execute(e,t){return Se(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new H([\"payment\"]);if(!this.orderId)throw new G;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Y)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.bigCommercePaymentsButtons)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new q('Unable to initialize payment because \"container\" argument is not provided.');const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;m.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.bigCommercePaymentsButtons=i.Buttons(t),this.bigCommercePaymentsButtons.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.bigCommercePaymentsButtons.isEligible()&&e===i.FUNDING.CREDIT)throw new Pe(`BigCommercePayments ${e} is not available for your region. Please use BigCommercePayments Checkout instead.`);d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButtons.render(a),u=!0}})}handleClick(e,t){return Se(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;t&&\"function\"==typeof t&&(yield t(()=>(this.toggleLoadingIndicator(!0),i()),n))})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:$(i)};e.Messages(n).render(`#${t}`)}}const Ce=g(e=>new Ie(e,L(e),new b({containerStyles:P}),p()),[{id:\"bigcommerce_payments_paylater\"}]);class we extends C{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var Oe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class _e{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Oe(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_ratepay:n}=e;if(!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_ratepay\" argument is not provided.');const{legalTextContainer:o,container:r,loadingContainerId:a}=n;if(!r)throw new q('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new q('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!a)throw new q('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=a;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new q(\"Unable to initialize payment because merchantId argument is not provided.\");this.bigcommerce_payments_ratepay=n,yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,r)})}execute(e,t){return Oe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.bigcommerce_payments_ratepay||{};if(!i)throw new H([\"payment\"]);if(!o||\"function\"!=typeof o)throw new q('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apmscheckout\",{metadataId:this.guid}),{ratepayBirthDate:r,ratepayPhoneNumber:a,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(r),phone:{national_number:a,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new Y)}deinitialize(){const{legalTextContainer:e}=this.bigcommerce_payments_ratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),r=null==o?void 0:o.parentNode,a=document.createElement(\"div\");a.style.marginBottom=\"20px\",a.setAttribute(\"id\",i),null==r||r.prepend(a);const s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new q('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.bigcommerce_payments_ratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,r=document.createElement(\"script\");r.setAttribute(\"type\",\"application/json\"),r.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),r.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const a={f:this.guid,s:`${e}_checkout-page`,sandbox:o};r.innerHTML=JSON.stringify(a),document.body.appendChild(r)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Oe(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Oe(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(\"bigcommerce_payments_apms\",{params:{useMetadata:!0}}),r=o===z.PollingStop,a=o===z.PollingError;if(r)return this.deinitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigcommerce_payments_ratepay:this.bigcommerce_payments_ratepay}),this.handleError(new we)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const ke=g(e=>new _e(e,L(e),new b({containerStyles:Object.assign(Object.assign({},P),{position:\"fixed\"})})),[{gateway:\"bigcommerce_payments_apms\",id:\"ratepay\"}]);var Ae;!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(Ae||(Ae={}));const Ee=Ae;function Te(e){return Ee.CardNumber in e&&Ee.CardName in e&&Ee.CardExpiry in e}function ze(e){return Ee.CardNumberVerification in e&&Ee.CardCodeVerification in e&&Ee.CardExpiryVerification in e}class Fe extends c{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var Be;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(Be||(Be={}));class Me extends c{constructor(e){super(function(e){switch(e){case Be.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case Be.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case Be.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case Be.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class xe extends c{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var De=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ne{constructor(e,t,i,n){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdk=i,this.bigCommercePaymentsFastlaneUtils=n}initialize(e){return De(this,void 0,void 0,function*(){const{methodId:t,bigcommerce_payments_creditcards:i}=e,n=i,{form:o,onCreditCardFieldsRenderingError:r,onLoadComplete:a}=n||{};if(!t)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new q('Unable to proceed because \"options.bigcommerce_payments_creditcards.form\" argument is not provided.');this.hostedFormOptions=o,this.isCreditCardForm=Te(o.fields),this.isCreditCardVaultedForm=ze(o.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(o,r)),null==a||a(),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return De(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:r}=i||{};if(!i||!o)throw new H([\"payment\"]);if(this.executionPaymentData=r,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const a=this.preparePaymentPayload(o,r,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(a)})}finalize(){return Promise.reject(new Y)}deinitialize(){var e,t,i,n;return De(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:a=!1}=W(t)?t:{},s=t&&K(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:a,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return De(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.getExecuteCallback(i),a=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===O.No||i===O.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new Fe},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},r);if(this.cardFields=yield o.CardFields(a),!this.cardFields.isEligible())throw new Me(Be.PaymentNotInitialized);try{this.stylizeInputContainers(i),Te(i)&&(yield this.renderFields(i)),ze(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return ze(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>De(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>De(this,void 0,void 0,function*(){const{orderId:e}=(yield this.bigCommercePaymentsIntegrationService.createOrderCardFields(\"bigcommerce_payments_creditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return De(this,void 0,void 0,function*(){const r=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=r.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=r.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=r.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=r.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return De(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(W(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(K(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return De(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new Fe(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return De(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new xe(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case Ee.CardCode:case Ee.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case Ee.CardNumber:case Ee.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case Ee.CardExpiry:case Ee.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return Ee.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?Ee.CardNumber:Ee.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?Ee.CardExpiry:Ee.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?Ee.CardCode:Ee.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Me(Be.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},r=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:r,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":r,\":focus\":r}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),r=n.getPaymentProviderCustomer(),a=(s=r)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?r:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isBigCommercePaymentsAnalyticsV2Enabled)&&!(null==a?void 0:a.authenticationState)}initializePayPalFastlaneOrThrow(e){return De(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const r=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(r,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const Ue=g(e=>new Ne(e,L(e),p(),ue()),[{id:\"bigcommerce_payments_creditcards\"}]);var je=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Ve{constructor(e,t,i,n,o=3e3,r=3e5){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.bigCommercePaymentsSdkHelper=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=r,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return je(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,bigcommerce_payments_apms:n}=e;if(this.bigCommercePaymentsAlternativeMethods=n,!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');const o=this.paymentIntegrationService.getState(),r=o.getPaymentMethodOrThrow(i,t),{orderId:a,shouldRenderFields:s}=r.initializationData||{},d=o.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=ge(d,\"PAYPAL-5624.bcp_ideal_polling\"),a?this.orderId=a:(this.paypalApms=yield this.bigCommercePaymentsSdkHelper.getPayPalApmsSdk(r,o.getCartOrThrow().currency.code),this.loadingIndicatorContainer=n.container.split(\"#\")[1],this.renderButton(i,t,n),s&&this.renderFields(i,n))})}execute(e,t){return je(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new H([\"payment\"]);const{methodId:o,gatewayId:r}=i;if(!this.orderId)throw new G;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,r)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.bigCommercePaymentsIntegrationService.submitPayment(o,this.orderId,r)})}finalize(){return Promise.reject(new Y)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.bigCommercePaymentsButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return je(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.bigCommercePaymentsIntegrationService.getOrderStatus(n),r=o===z.Approved,a=o===z.PollingError;if(r)return this.deInitializePollingMechanism(),t();if(a)return i();if(!r&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,bigCommercePaymentsAlternativeMethods:this.bigCommercePaymentsAlternativeMethods}),this.handleError(new we)}catch(e){i()}})}deInitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deInitializePollingMechanism()}reinitializeStrategy(e){return je(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:r}=o.initializationData||{},{container:a,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deInitializePollingMechanism()},onError:e=>{this.deInitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>je(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.bigCommercePaymentsButton=n.Buttons(c),this.bigCommercePaymentsButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.bigCommercePaymentsButton.render(a))}onCreateOrder(e,t,i){return je(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.bigCommercePaymentsIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:r,email:a}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${r}`},email:{value:a}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in T}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new m;return this.paypalApms}}const Re=g(e=>new Ve(e,L(e),p(),new b({containerStyles:P})),[{gateway:\"bigcommerce_payments_apms\"}]);class Le{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){const{gatewayId:t,methodId:i,bigcommerce_payments_apms:n}=e;if(this.bigCommercePaymentsAlternativeMethods=n,!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');return Promise.resolve()}execute(e,t){return i=this,n=void 0,r=function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new H([\"payment\"]);const{methodId:o,gatewayId:r}=i;try{const e={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:o,paypal_account:{order_id:yield this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\",{gatewayId:\"bigcommerce_payments_apms\",methodId:o})}}};yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:o,gatewayId:r,paymentData:e})}catch(e){if(function(e){var t,i;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&(null===(i=null===(t=e.body)||void 0===t?void 0:t.additional_action_required)||void 0===i?void 0:i.data.redirect_url)}(e)){const t=e.body.additional_action_required.data.redirect_url;return new Promise((e,i)=>{window.location.replace(t),i()})}return this.handleError(e),Promise.reject(e)}},new((o=void 0)||(o=Promise))(function(e,t){function a(e){try{d(r.next(e))}catch(e){t(e)}}function s(e){try{d(r.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o(function(e){e(i)})).then(a,s)}d((r=r.apply(i,n||[])).next())});// removed by dead control flow\n var i, n, o, r; }finalize(){return Promise.reject(new Y)}deinitialize(){return Promise.resolve()}handleError(e){const{onError:t}=this.bigCommercePaymentsAlternativeMethods||{};t&&\"function\"==typeof t&&t(e)}}const $e=g(e=>new Le(e,L(e)),[{gateway:\"bigcommerce_payments_apms\",id:\"klarna\"},{gateway:\"bigcommerce_payments_apms\",id:\"afterpay\"}]);var qe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class He{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return qe(this,void 0,void 0,function*(){const{methodId:n,bigcommerce_payments_venmo:o}=e||{};if(!n)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=r.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=r.initializationData)||void 0===i?void 0:i.orderId:(yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=o.container.split(\"#\")[1],this.renderButton(n,o))})}execute(e,t){return qe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new H([\"payment\"]);if(!this.orderId)throw new G;yield this.paymentIntegrationService.submitOrder(n,t),yield this.bigCommercePaymentsIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new Y)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:r}=o||{},{container:a,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,m={fundingSource:i.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(m),!this.paypalButton.isEligible())throw new Pe(\"Venmo is not available for your region. Please another payment method instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(a)}handleClick(e,t){return qe(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;yield t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ge=g(e=>new He(e,L(e),new b({styles:{backgroundColor:\"black\"}})),[{id:\"bigcommerce_payments_venmo\"}]);var Ye=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class We{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Ye(this,void 0,void 0,function*(){const{bigcommerce_payments:t,methodId:i}=e;if(!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(!t.container)throw new q('Unable to initialize payment because \"options.bigcommerce_payments.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new q('Unable to initialize payment because \"options.bigcommerce_payments.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Ye(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return Ye(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n,onComplete:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,o)},u=Object.assign(Object.assign({fundingSource:r.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:40}))},c),s&&m),h=r.Buttons(u);h.isEligible()?h.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return Ye(this,void 0,void 0,function*(){if(!e.orderID)throw new u(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return Ye(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return Ye(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const Ke=g(e=>new We(e,L(e)),[{id:\"bigcommerce_payments\"}]);var Je=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class Xe{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsSdk=t,this.bigCommercePaymentsFastlaneUtils=i}initialize(e){var t;return Je(this,void 0,void 0,function*(){const{methodId:i,bigcommerce_payments_fastlane:n}=e;if(!i)throw new q('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),r=e.getPaymentMethodOrThrow(i),a=!!(null===(t=r.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.bigCommercePaymentsSdk.getPayPalFastlaneSdk(r,o.currency.code,o.id);yield this.bigCommercePaymentsFastlaneUtils.initializePayPalFastlane(s,a,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return Je(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return Je(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return Je(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return Je(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new q('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new q('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return Je(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),r=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:a}=yield this.bigCommercePaymentsFastlaneUtils.lookupCustomerOrThrow(r),s=yield this.bigCommercePaymentsFastlaneUtils.triggerAuthenticationFlowOrThrow(a),d=s.authenticationState===de.CANCELED;yield this.updateCustomerDataState(e,s),d?this.bigCommercePaymentsFastlaneUtils.removeStorageSessionId():this.bigCommercePaymentsFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return Je(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:r,billingAddress:a,shippingAddress:s,instruments:d}=this.bigCommercePaymentsFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:r,instruments:d}),a&&(yield this.paymentIntegrationService.updateBillingAddress(a)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},r=t.getConsignments()||[],a=(null===(i=r[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=a[0],l=a.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return ye(o?n:{},null==t?void 0:t.styles)}}const Ze=g(e=>new Xe(e,p(),ue()),[{id:\"bigcommerce_payments_fastlane\"},{id:\"bigcommerce_payments_creditcards\"}]);var Qe=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class et{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Qe(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,methodId:i}=e;if(!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(!t.container)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC BigCommercePayments PayLater]: button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return Qe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return Qe(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,r=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d}=a.initializationData||{},{checkoutTopButtonStyles:l}=d||{},c=Object.assign({createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),m={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)},u=[r.FUNDING.PAYLATER,r.FUNDING.CREDIT];let h=!1;u.forEach(e=>{if(!h){const t=Object.assign(Object.assign({fundingSource:e,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},l),{height:40}))},c),s&&m),n=r.Buttons(t);n.isEligible()&&(n.render(`#${i}`),h=!0)}}),h||this.bigCommercePaymentsIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return Qe(this,void 0,void 0,function*(){if(!e.orderID)throw new u(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return Qe(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return Qe(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const tt=g(e=>new et(e,L(e)),[{id:\"bigcommerce_payments_paylater\"}]);var it=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class nt{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return it(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,methodId:i}=e;if(!i)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(!t.container)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC Payments Venmo]: Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return it(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return it(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:a}=r.initializationData||{},{checkoutTopButtonStyles:s}=a||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:40})),createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:t})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.bigCommercePaymentsIntegrationService.removeElement(i)}}const ot=g(e=>new nt(e,L(e)),[{id:\"bigcommerce_payments_venmo\"}]);var rt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class at{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){var t;return rt(this,void 0,void 0,function*(){const{bigcommerce_payments:i,containerId:n,methodId:o}=e,r=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new q('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.bigcommerce_payments\" argument is not provided.');if(r&&!i.currencyCode)throw new q('Unable to initialize payment because \"options.bigcommerce_payments.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new q('Unable to initialize payment because \"options.bigcommerce_payments.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const a=r?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(o,a,!1),this.renderButton(n,o,i,r)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i,n){var o,r;const{buyNowInitializeOptions:a,style:s,onComplete:d,onEligibilityFailure:l}=i,c=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),m=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:u,isAppSwitchEnabled:h}=m.initializationData||{},y=Object.assign(Object.assign({},!n&&this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)}),p={onClick:()=>this.handleClick(a),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},g=Object.assign(Object.assign({},!h&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,d)}),v=Object.assign(Object.assign(Object.assign({fundingSource:c.FUNDING.PAYPAL,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(s)},y),a&&p),u&&g),f=c.Buttons(v);f.isEligible()?(null===(o=f.hasReturned)||void 0===o?void 0:o.call(f))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(r=f.resume)||void 0===r||r.call(f):f.render(`#${e}`):l&&\"function\"==typeof l?l():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return rt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return rt(this,void 0,void 0,function*(){if(!e.orderID)throw new u(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return rt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return rt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t,i;return null!==(i=null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)&&void 0!==i&&i}}const st=g(e=>new at(e,L(e)),[{id:\"bigcommerce_payments\"}]);var dt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class lt{constructor(e,t,i){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t,this.payPalSdkHelper=i}initialize(e){return dt(this,void 0,void 0,function*(){const{bigcommerce_payments_paylater:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r,messagingContainerId:a}=t||{},s=!!o;if(!n)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater\" argument is not provided.');if(s&&!r)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new q('Unable to initialize payment because \"options.bigcommerce_payments_paylater.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=this.paymentIntegrationService.getState(),l=s?r:d.getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,l,!1),this.renderButton(i,n,t);const c=a&&document.getElementById(a);if(l&&c){const e=d.getPaymentMethodOrThrow(n),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;c.removeAttribute(\"data-pp-style-logo-type\"),c.removeAttribute(\"data-pp-style-logo-position\"),c.removeAttribute(\"data-pp-style-text-color\"),c.removeAttribute(\"data-pp-style-text-size\");const o=yield this.payPalSdkHelper.getPayPalMessages(e,l);this.renderMessages(o,a,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l}=d.initializationData||{},c={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_paylater\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},m={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},u={onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e),onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,r)},h=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let y=!1;h.forEach(t=>{if(!y){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(o)},c),n&&m),l&&u),r=s.Buttons(i);r.isEligible()?(r.render(`#${e}`),y=!0):a&&\"function\"==typeof a&&a()}}),y||this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return dt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return dt(this,void 0,void 0,function*(){if(!e.orderID)throw new u(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),r=yield t.order.get();try{const t=this.bigCommercePaymentsIntegrationService.getBillingAddressFromOrderDetails(r);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.bigCommercePaymentsIntegrationService.getShippingAddressFromOrderDetails(r);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.bigCommercePaymentsIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.bigCommercePaymentsIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return dt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return dt(this,void 0,void 0,function*(){const t=this.bigCommercePaymentsIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.bigCommercePaymentsIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:$(i)};e.Messages(n).render(`#${t}`)}}const ct=g(e=>new lt(e,L(e),p()),[{id:\"bigcommerce_payments_paylater\"}]);var mt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class ut{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return mt(this,void 0,void 0,function*(){const{bigcommerce_payments_apms:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:r,currencyCode:a}=t||{},s=!!r;if(!n)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms\" argument is not provided.');if(!o)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms.apm\" argument is not provided.');if(s&&!a)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==r?void 0:r.getBuyNowCartRequestBody))throw new q('Unable to initialize payment because \"options.bigcommerce_payments_apms.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:r,onEligibilityFailure:a}=i,s=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new q('Unable to initialize PayPal button because \"options.bigcommerce_payments_apms.apm\" argument is not valid funding source.');const d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_apms\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.bigCommercePaymentsIntegrationService.getValidButtonStyle(r)},d),o&&l),m=s.Buttons(c);m.isEligible()?m.render(`#${e}`):a&&\"function\"==typeof a?a():this.bigCommercePaymentsIntegrationService.removeElement(e)}handleClick(e){return mt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const ht=g(e=>new ut(e,L(e)),[{id:\"bigcommerce_payments_apms\"}]);var yt=function(e,t,i,n){return new(i||(i=Promise))(function(o,r){function a(e){try{d(n.next(e))}catch(e){r(e)}}function s(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}d((n=n.apply(e,t||[])).next())})};class pt{constructor(e,t){this.paymentIntegrationService=e,this.bigCommercePaymentsIntegrationService=t}initialize(e){return yt(this,void 0,void 0,function*(){const{bigcommerce_payments_venmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:r}=t||{},a=!!o;if(!n)throw new q('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new q('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo\" argument is not provided.');if(a&&!r)throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new q('Unable to initialize payment because \"options.bigcommerce_payments_venmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=a?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.bigCommercePaymentsIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:r}=i,a=this.bigCommercePaymentsIntegrationService.getPayPalSdkOrThrow(),s=a.FUNDING.VENMO,d={createOrder:()=>this.bigCommercePaymentsIntegrationService.createOrder(\"bigcommerce_payments_venmo\"),onApprove:({orderID:e})=>this.bigCommercePaymentsIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),m=a.Buttons(c);m.isEligible()?m.render(`#${e}`):r&&\"function\"==typeof r?r():this.bigCommercePaymentsIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.bigCommercePaymentsIntegrationService.getValidButtonStyle(e);return t.color===A.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return yt(this,void 0,void 0,function*(){if(e){const t=yield this.bigCommercePaymentsIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const gt=g(e=>new pt(e,L(e)),[{id:\"bigcommerce_payments_venmo\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9iaWdjb21tZXJjZS1wYXltZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFQ0tHLE1BQWVDLFVBQXNCQyxNQUloRCxXQUFBQyxDQUFZQyxHQ1hELElBQXFDQyxFRFk1Q0MsTUFBTUYsR0FBVyxxQ0FKckIsS0FBQUcsS0FBTyxnQkFDUCxLQUFBQyxLQUFPLFdDVHlDSCxhRGNaQSxVQ2JoQ0ksT0FBT0MsZUFDUEQsT0FBT0MsZURZUUMsS0NaZU4sR0RZZk0sS0NWUkMsVUFBWVAsRURZb0IsbUJBQTVCSCxNQUFNVyxrQkFDYlgsTUFBTVcsa0JBQWtCRixpQkFFeEJBLEtBQUtHLE1BQVEsSUFBSVosTUFBTVMsS0FBS1AsU0FBU1UsS0FFN0MsRUVmVyxNQUFNQyxVQUE0Q2QsRUFDN0QsV0FBQUUsQ0FBWUMsR0FDUkUsTUFDSUYsR0FDSSx1R0FHUk8sS0FBS0osS0FBTyxzQ0FDWkksS0FBS0gsS0FBTyxtQ0FDaEIsR0hiSixTQUFZUixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtBeUJqQixNQUFNZ0IsVUFBeUJmLEVBQzFDLFdBQUFFLENBQW1CYyxHQUNmWCxNQU9SLFNBQXlCRSxHQUNyQixPQUFRQSxHQUNKLEtBQUtSLEVBQXFCa0Isc0JBQ3RCLE1BQU8saUVBRVgsS0FBS2xCLEVBQXFCbUIsWUFDdEIsTUFBTyxzREFFWCxLQUFLbkIsRUFBcUJvQixvQkFDdEIsTUFBTyw4REFFWCxLQUFLcEIsRUFBcUJxQixnQkFDdEIsTUFBTywwREFFWCxLQUFLckIsRUFBcUJzQixnQkFDdEIsTUFBTywwREFFWCxLQUFLdEIsRUFBcUJ1QixzQkFDMUIsS0FBS3ZCLEVB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QUNBOVAsTUFBT2xILEtBQUt1NUIsMEJBQTBCcnlCLElBQ25DdXZCLEdBQ0NwckIsR0FBMkJxdEIsR0FHN0JSLEVBQXFCanRCLEVBQVUyTSxRQUFRa2YsR0FFekNvQixFQUFtQnJnQixhQUNuQnFnQixFQUFtQnBnQixPQUFPLElBQUlrWixLQUN2QnNILEdBQXdELG1CQUF6QkEsRUFDdENBLElBRUF0NEIsS0FBS2lVLHNDQUFzQ3RELGNBQWNxZ0IsRUFFakUsQ0FFUSx5QkFBQXVJLENBQTBCcnlCLEdBQzlCLE1BQU1zeUIsRUFDRng1QixLQUFLaVUsc0NBQXNDN0Qsb0JBQW9CbEosR0FFbkUsT0FBSXN5QixFQUFpQnZ6QixRQUFVZ0UsRUFBaUJ3dkIsS0FDckMsT0FBUCx3QkFDT0QsR0FBZ0IsQ0FDbkJ2ekIsV0FBT3BCLElBSVIyMEIsQ0FDWCxDQUVjLFdBQUFsaUIsQ0FDVmpNLEcseUNBRUEsR0FBSUEsRUFBeUIsQ0FDekIsTUFBTXd0QixRQUNJNzRCLEtBQUtpVSxzQ0FBc0M3SSx3QkFDN0NDLFNBR0ZyTCxLQUFLdUssMEJBQTBCdXVCLGFBQWFELEVBQVc5dkIsRyxDQUVyRSxFLEVDekpKLE1BUUEsR0FBZXBELEVBTlY0RSxHQUNELElBQUkrdUIsR0FDQS91QixFQUNBLEVBQTRDQSxJQUc0QixDQUM1RSxDQUFFeEIsR0FBSSxnQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3BheXBhbC1zZGstaGVscGVyLnRzPzBjMDUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtc2RrLnRzPzE1MTciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91aS9zcmMvbG9hZGluZy1pbmRpY2F0b3IvbG9hZGluZy1pbmRpY2F0b3IudHM/YjA4NyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNvbnN0YW50cy50cz83NDMxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2J1eS1ub3ctY2FydC1jcmVhdGlvbi1lcnJvci50cz9kNjA0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3JlcXVlc3QtZXJyb3IudHM/Yzg0MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NhcnQvY2FydC1zb3VyY2UudHM/Mzg4YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzLnRzPzkwZjIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzk2M2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2ludGVybmFsLWFwaS1oZWFkZXJzLnRzPzQxMTEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9jb21tb24vaHR0cC1yZXF1ZXN0L2NvbnRlbnQtdHlwZS50cz81MDRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9zZGstdmVyc2lvbi1oZWFkZXJzLnRzPzdiZjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1yZXF1ZXN0LXNlbmRlci50cz9hMDQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtc2NyaXB0LWxvYWRlci50cz9mNDY1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UudHM/N2I3NSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2dldC1wYXlwYWwtbWVzc2FnZXMtc3R5bGVzLWZyb20tYm5wbC1jb25maWcudHM/NWU4NSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9pbnZhbGlkLWFyZ3VtZW50LWVycm9yLnRzPzM5MjEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1hcmd1bWVudC1pbnZhbGlkLWVycm9yLnRzP2E1MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtaW52YWxpZC1lcnJvci50cz8zYWRmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL29yZGVyLWZpbmFsaXphdGlvbi1ub3QtcmVxdWlyZWQtZXJyb3IudHM/YjVhMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtaG9zdGVkLWludHJ1bWVudC1saWtlLnRzPzg3NjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9wYXltZW50L2lzLXZhdWx0ZWQtaW5zdHJ1bWVudC50cz8xODBmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1iYXNlLWluc3RydW1lbnQvaXMtYmFzZS1pbnN0cnVtZW50LnRzP2U5MmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXltZW50LXN0cmF0ZWd5LnRzPzdjNTMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9pcy1iaWdjb21tZXJjZS1wYXltZW50cy1wcm92aWRlci1lcnJvci50cz9mMDdkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXBheW1lbnQtc3RyYXRlZ3kudHM/MTFjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaW5zdHJ1bWVudC50cz9mMmI2Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscy9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMudHM/NjRkNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RvcmFnZS9zcmMvY29va2llLXN0b3JhZ2UudHM/MTUzYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLXV0aWxzLnRzPzgzYTgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtdXRpbHMudHM/NDBlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2dldC1mYXN0bGFuZS1zdHlsZXMudHM/NWU3NCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2lzLXBheXBhbC1mYXN0bGFuZS1jdXN0b21lci50cz9kOTQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy91dGlsaXR5L3NyYy9pcy1leHBlcmltZW50LWVuYWJsZWQvaXMtZXhwZXJpbWVudC1lbmFibGVkLnRzP2M5YTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzP2YxOTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9pcy1iaWdjb21tZXJjZS1mYXN0bGFuZS1yZXF1ZXN0LWVycm9yLnRzP2NiNmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtcGF5bWVudC1zdHJhdGVneS50cz8xNGY1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL25vdC1pbXBsZW1lbnRlZC1lcnJvci50cz8zYTM1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItcGF5bWVudC1zdHJhdGVneS50cz8yNGUyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLXBheW1lbnQtc3RyYXRlZ3kudHM/OGQ1MiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy90aW1lb3V0LWVycm9yLnRzPzA4MGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5L2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJhdGVwYXktcGF5bWVudC1zdHJhdGVneS50cz8wODFjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5LnRzP2Q5Y2EiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9ob3N0ZWQtZmllbGQtdHlwZS50cz82NWQ4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvaG9zdGVkLWZvcm0vaXMtY3JlZGl0LWNhcmQtZm9ybS1maWVsZHMudHM/MGZhYSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2lzLWNyZWRpdC1jYXJkLXZhdWx0ZWQtZm9ybS1maWVsZHMudHM/ZjNiMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1mYWlsZWQtZXJyb3IudHM/MDdkZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW5pdGlhbGl6ZWQtZXJyb3IudHM/OGI0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWludmFsaWQtZm9ybS1lcnJvci50cz9jMGZiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5LnRzP2RlMGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzL3NyYy91dGlscy9pcy1iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1jdXN0b21lci50cz9hNWNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtY3JlZGl0LWNhcmRzL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMtcGF5bWVudC1zdHJhdGVneS50cz9kZmU5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3kudHM/M2EzZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz80ZmI1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy9iaWdjb21lbXJjZS1wYXltZW50cy1yZWRpcmVjdC1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3kudHM/MjllZiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMvc3JjL3V0aWxzL2lzLXJlZGlyZWN0LWVycm9yLnRzPzVmNTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzPzg0MGIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzP2RiNzYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz81OGZlIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvYmlnY29tbWVyY2UtcGF5bWVudHMtY3VzdG9tZXItc3RyYXRlZ3kudHM/YmZiNyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NoZWNrb3V0LWJ1dHRvbnMvZGVmYXVsdC1jaGVja291dC1idXR0b24taGVpZ2h0LnRzP2Q0MjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtY3VzdG9tZXItc3RyYXRlZ3kudHM/ZGJjZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzhkNDYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/MTk4MiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2Q2NDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItY3VzdG9tZXItc3RyYXRlZ3kudHM/MmI5YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2MwMzEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/ZmU3MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24vc3JjL2JpZ2NvbW1lcmNlLXBheW1lbnRzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneS50cz8yMzU0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMvY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneS50cz80NGM3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXIvYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLXN0cmF0ZWd5LnRzP2Y3MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bGF0ZXItYnV0dG9uLXN0cmF0ZWd5LnRzPzMyMTAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLXN0cmF0ZWd5LnRzPzhiYmEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneS50cz80OTkyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi9zcmMvYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLXN0cmF0ZWd5LnRzPzQwYjUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uL3NyYy9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLXN0cmF0ZWd5LnRzPzFlM2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgZW51bSBNaXNzaW5nRGF0YUVycm9yVHlwZSB7XG4gICAgTWlzc2luZ0JpbGxpbmdBZGRyZXNzLFxuICAgIE1pc3NpbmdDYXJ0LFxuICAgIE1pc3NpbmdDaGVja291dCxcbiAgICBNaXNzaW5nQ29uc2lnbm1lbnRzLFxuICAgIE1pc3NpbmdDdXN0b21lcixcbiAgICBNaXNzaW5nQ2hlY2tvdXRDb25maWcsXG4gICAgTWlzc2luZ09yZGVyLFxuICAgIE1pc3NpbmdPcmRlckNvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXJJZCxcbiAgICBNaXNzaW5nUGF5bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudElkLFxuICAgIE1pc3NpbmdQYXltZW50SW5zdHJ1bWVudCxcbiAgICBNaXNzaW5nUGF5bWVudE1ldGhvZCxcbiAgICBNaXNzaW5nUGF5bWVudFJlZGlyZWN0VXJsLFxuICAgIE1pc3NpbmdQYXltZW50U3RhdHVzLFxuICAgIE1pc3NpbmdQYXltZW50VG9rZW4sXG4gICAgTWlzc2luZ1NoaXBwaW5nQWRkcmVzcyxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIHdoZW4gZGF0YSB0aGF0IGlzIGV4cGVjdGVkIHRvIGV4aXN0IGlzIG1pc3NpbmcuIFVzdWFsbHkgaXRcbiAqIGlzIGR1ZSB0byB0aGUgZmFjdCB0aGF0IGNlcnRhaW4gZGF0YSBoYXMgbm90IGJlZW4gcmV0cmlldmVkIGZyb20gb3Igc2F2ZWQgdG9cbiAqIHRoZSBzZXJ2ZXIgeWV0LiBBbmQgc3VjaCBkYXRhIGlzIHJlcXVpcmVkIHRvIHBlcmZvcm0gY2VydGFpbiBhY3Rpb25zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW5nRGF0YUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ01pc3NpbmdEYXRhRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbWlzc2luZ19kYXRhJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGJpbGxpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjYXJ0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDb25zaWdubWVudHM6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uc2lnbm1lbnRzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjaGVja291dCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ3VzdG9tZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY3VzdG9tZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0Q29uZmlnOlxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlckNvbmZpZzpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25maWd1cmF0aW9uIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBvcmRlciBJRCBpcyB1bmF2YWlsYWJsZSBvciBub3QgZ2VuZXJhdGVkIHlldC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudFRva2VuOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSB0b2tlbiByZXF1aXJlZCB0byBzdWJtaXQgYSBwYXltZW50IGlzIG1pc3NpbmcuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgbWV0aG9kIGRhdGEgaXMgdW5hdmFpbGFibGUgb3Igbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdTaGlwcGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugc2hpcHBpbmcgYWRkcmVzcyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBDdXN0b21FcnJvciBmcm9tICcuL2N1c3RvbS1lcnJvcic7XG5pbXBvcnQgc2V0UHJvdG90eXBlT2YgZnJvbSAnLi9zZXQtcHJvdG90eXBlLW9mJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHR5cGUgc2hvdWxkIG5vdCBiZSBjb25zdHJ1Y3RlZCBkaXJlY3RseS4gSXQgaXMgYSBiYXNlIGNsYXNzIGZvclxuICogYWxsIGN1c3RvbSBlcnJvcnMgdGhyb3duIGluIHRoaXMgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYWJzdHJhY3QgY2xhc3MgU3RhbmRhcmRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgQ3VzdG9tRXJyb3Ige1xuICAgIG5hbWUgPSAnU3RhbmRhcmRFcnJvcic7XG4gICAgdHlwZSA9ICdzdGFuZGFyZCc7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIG5ldy50YXJnZXQucHJvdG90eXBlKTtcblxuICAgICAgICBpZiAodHlwZW9mIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBuZXcudGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2sgPSBuZXcgRXJyb3IodGhpcy5tZXNzYWdlKS5zdGFjaztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldFByb3RvdHlwZU9mKG9iamVjdDogYW55LCBwcm90b3R5cGU6IG9iamVjdCkge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKG9iamVjdCwgcHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIHJldHVybiBvYmplY3Q7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBmYWlsc1xuICogdG8gbG9hZCwgb3IgZm9yIHNvbWUgcmVhc29uLCBpdCBpcyBpbmFjY2Vzc2libGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBpcyBub3QgbG9hZGVkIG9yIHJlYWR5IHRvIGJlIHVzZWQuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X3VuYXZhaWxhYmxlJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIEZ1bmRpbmdUeXBlLFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEdvb2dsZVBheVNkayxcbiAgICBQYXlQYWxIb3N0V2luZG93LFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgIFBheVBhbFNka0NvbmZpZyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbFNka0hlbHBlciB7XG4gICAgcHJpdmF0ZSB3aW5kb3c6IFBheVBhbEhvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgc2Vzc2lvbklkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZVNkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsoY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbEdvb2dsZVBheVNkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsR29vZ2xlUGF5U2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5IHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKHBheW1lbnRNZXRob2QsIGN1cnJlbmN5Q29kZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxBcG1zO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbE1lc3NhZ2VzU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFNka01lc3NhZ2VzQ29uZmlnID0gdGhpcy5nZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrTWVzc2FnZXNDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAgbG9hZFBheVBhbFNkayBpcyBhIHBheXBhbCBzZGsgc2NyaXB0IGxvYWRlclxuICAgICAqICB3aGljaCBsb2FkcyBwYXlwYWwgc2RrIGJhc2VkIG9uIHByb3ZpZGVkIGNvbmZpZ3VyYXRpb25cbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheVBhbFNkayh7IG9wdGlvbnMsIGF0dHJpYnV0ZXMgfTogUGF5UGFsU2RrQ29uZmlnKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNjcmlwdE9wdGlvbnMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxQYXlQYWxTZGtDb25maWdbJ29wdGlvbnMnXT4ob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHNjcmlwdEF0dHJpYnV0ZXMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxQYXlQYWxTZGtDb25maWdbJ2F0dHJpYnV0ZXMnXT4oYXR0cmlidXRlcyk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrVXJsID0gJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzJztcbiAgICAgICAgY29uc3Qgc2NyaXB0UXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHNjcmlwdE9wdGlvbnMpLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHNjcmlwdFNyYyA9IGAke3BheXBhbFNka1VybH0/JHtzY3JpcHRRdWVyeX1gO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoc2NyaXB0U3JjLCB7XG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHNjcmlwdEF0dHJpYnV0ZXMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ29uZmlndXJhdGlvbnMgc2VjdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbnRlbnQsIGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydmYXN0bGFuZScsICd0aHJlZS1kb21haW4tc2VjdXJlJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc6IHNlc3Npb25JZC5yZXBsYWNlKC8tL2csICcnKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsRmFzdGxhbmVTZGsnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSA9IHRydWUsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgY29tbWl0ID0gaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfHwgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbW1pdCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ2dvb2dsZXBheSddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxHb29nbGVQYXknLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBlbmFibGVBUE1zRnVuZGluZyA9IHRoaXMuZmlsdGVyRnVuZGluZ09wdGlvbnMoZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMpO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSB0aGlzLmZpbHRlckZ1bmRpbmdPcHRpb25zKFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgICAgICksXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVBUE1zRnVuZGluZy5sZW5ndGggPiAwID8gZW5hYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc6IGRpc2FibGVBUE1zRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUFQTXNGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ2J1dHRvbnMnLCAncGF5bWVudC1maWVsZHMnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsQXBtcycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkLCBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBidXllckNvdW50cnkgfSA9XG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ21lc3NhZ2VzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsTWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZmlsdGVyRnVuZGluZ09wdGlvbnMoZnVuZGluZ09wdGlvbnM6IEZ1bmRpbmdUeXBlW10gfCB1bmRlZmluZWQpOiBGdW5kaW5nVHlwZVtdIHtcbiAgICAgICAgY29uc3QgZnVuZGluZ1R5cGVzVG9CZUZpbHRlcmVkID0gWydrbGFybmEnLCAnYWZ0ZXJwYXknXTtcblxuICAgICAgICBpZiAoIWZ1bmRpbmdPcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuZGluZ09wdGlvbnMuZmlsdGVyKFxuICAgICAgICAgICAgKGZ1bmRpbmdPcHRpb246IEZ1bmRpbmdUeXBlKSA9PiAhZnVuZGluZ1R5cGVzVG9CZUZpbHRlcmVkLmluY2x1ZGVzKGZ1bmRpbmdPcHRpb24pLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQgUGF5UGFsU2RrSGVscGVyIGZyb20gJy4vcGF5cGFsLXNkay1oZWxwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCk6IFBheVBhbFNka0hlbHBlciB7XG4gICAgcmV0dXJuIG5ldyBQYXlQYWxTZGtIZWxwZXIoY3JlYXRlU2NyaXB0TG9hZGVyKCkpO1xufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCJpbXBvcnQge1xuICAgIExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXMsXG4gICAgTG9hZGluZ0luZGljYXRvclN0eWxlcyxcbn0gZnJvbSAnLi9sb2FkaW5nLWluZGljYXRvci1zdHlsZXMnO1xuXG5jb25zdCBERUZBVUxUX1NUWUxFUzogTG9hZGluZ0luZGljYXRvclN0eWxlcyA9IHtcbiAgICBzaXplOiA3MCxcbiAgICBjb2xvcjogJyNkOWQ5ZDknLFxuICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnLFxufTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyA9IHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAnYmFja2dyb3VuZC1jb2xvcic6ICdyZ2JhKDAsIDAsIDAsIDAuNCknLFxuICAgICd6LWluZGV4JzogJzEwMDAnLFxufTtcblxuY29uc3QgUk9UQVRJT05fQU5JTUFUSU9OID0gJ2VtYmVkZGVkLWNoZWNrb3V0LWxvYWRpbmctaW5kaWNhdG9yLXJvdGF0aW9uJztcblxuaW50ZXJmYWNlIExvYWRpbmdJbmRpY2F0b3JPcHRpb25zIHtcbiAgICBzdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIGNvbnRhaW5lclN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvYWRpbmdJbmRpY2F0b3Ige1xuICAgIHByaXZhdGUgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGluZGljYXRvcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgcHJpdmF0ZSBjb250YWluZXJTdHlsZXM6IExvYWRpbmdJbmRpY2F0b3JDb250YWluZXJTdHlsZXM7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogTG9hZGluZ0luZGljYXRvck9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdHlsZXMgPSB7IC4uLkRFRkFVTFRfU1RZTEVTLCAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLnN0eWxlcykgfTtcbiAgICAgICAgdGhpcy5jb250YWluZXJTdHlsZXMgPSB7IC4uLihvcHRpb25zICYmIG9wdGlvbnMuY29udGFpbmVyU3R5bGVzKSB9O1xuXG4gICAgICAgIHRoaXMuZGVmaW5lQW5pbWF0aW9uKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLmJ1aWxkQ29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMuaW5kaWNhdG9yID0gdGhpcy5idWlsZEluZGljYXRvcigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW5kaWNhdG9yKTtcbiAgICB9XG5cbiAgICBzaG93KHBhcmVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmIChwYXJlbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGFyZW50SWQpO1xuXG4gICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBhdHRhY2ggdGhlIGxvYWRpbmcgaW5kaWNhdG9yIGJlY2F1c2UgdGhlIHBhcmVudCBJRCBpcyBub3QgdmFsaWQuJyxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9XG5cbiAgICBoaWRlKCk6IHZvaWQge1xuICAgICAgICBjb25zdCBoYW5kbGVUcmFuc2l0aW9uRW5kID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudG9wID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdhbGwgMjUwbXMgZWFzZS1vdXQnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcblxuICAgICAgICB0aGlzLnNldFN0eWxlQXR0cmlidXRlKGNvbnRhaW5lciwgdGhpcy5jb250YWluZXJTdHlsZXMpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZEluZGljYXRvcigpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGluZGljYXRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLndpZHRoID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlclJhZGl1cyA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyID0gJ3NvbGlkIDFweCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJDb2xvciA9IGAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9ICR7dGhpcy5zdHlsZXMuY29sb3J9YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLm1hcmdpbiA9ICcwIGF1dG8nO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudG9wID0gJzUwJSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyknO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtU3R5bGUgPSAncHJlc2VydmUtM2QnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYW5pbWF0aW9uID0gYCR7Uk9UQVRJT05fQU5JTUFUSU9OfSA1MDBtcyBpbmZpbml0ZSBjdWJpYy1iZXppZXIoMC42OSwgMC4zMSwgMC41NiwgMC44MylgO1xuXG4gICAgICAgIHJldHVybiBpbmRpY2F0b3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTdHlsZUF0dHJpYnV0ZShlbGVtZW50OiBIVE1MRWxlbWVudCwgYXR0cnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0pOiB2b2lkIHtcbiAgICAgICAgT2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goKGspID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoaywgYXR0cnNba10pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlZmluZUFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gZGVmaW5lIENTUyBhbmltYXRpb24sIHdlIG5lZWQgdG8gaW5zZXJ0IGEgc3R5bGVzaGVldCBpbnRvIHRoZSBob3N0IGZyYW1lLlxuICAgICAgICAvLyBXZSBvbmx5IGhhdmUgdG8gZG8gaXQgb25jZS5cbiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFJPVEFUSU9OX0FOSU1BVElPTikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICAgICAgICBzdHlsZS5pZCA9IFJPVEFUSU9OX0FOSU1BVElPTjtcblxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICBkb2N1bWVudC5oZWFkPy5hcHBlbmRDaGlsZChzdHlsZSk7XG5cbiAgICAgICAgaWYgKHN0eWxlLnNoZWV0IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCkge1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBwcm92aWRlIHRoZSAybmQgcGFyYW1ldGVyIGZvciBJRTExLCBldmVuIHRob3VnaCBpdCBpc1xuICAgICAgICAgICAgLy8gMCBieSBkZWZhdWx0IGZvciBhbGwgb3RoZXIgYnJvd3NlcnMuXG4gICAgICAgICAgICBzdHlsZS5zaGVldC5pbnNlcnRSdWxlKFxuICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzICR7Uk9UQVRJT05fQU5JTUFUSU9OfSB7XG4gICAgICAgICAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgICAgICAgICAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYCxcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgPSB7XG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gQ2FydFNvdXJjZSB7XG4gICAgQnV5Tm93ID0gJ0JVWV9OT1cnLFxufVxuIiwiaW1wb3J0IHsgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIFNoaXBwaW5nT3B0aW9uLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZztcbi8vIFRPRE86IHJlbmFtZSBCaWdDb21tZXJjZVBheW1lbnRzU0RLRnVuZGluZyB0byBQYXlQYWxTREtGdW5kaW5nXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNTREtGdW5kaW5nIHtcbiAgICBDQVJEOiBzdHJpbmc7XG4gICAgUEFZUEFMOiBzdHJpbmc7XG4gICAgQ1JFRElUOiBzdHJpbmc7XG4gICAgUEFZTEFURVI6IHN0cmluZztcbiAgICBPWFhPOiBzdHJpbmc7XG4gICAgU0VQQTogc3RyaW5nO1xuICAgIFZFTk1POiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIEJpZ0NvbW1lcmNlIFBheW1lbnRzIFNES1xuICpcbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25Gb2N1cyhkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25CbHVyKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICB9O1xuICAgIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbj86IChkYXRhOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKSA9PiB2b2lkO1xuICAgIGNyZWF0ZU9yZGVyPzogKCkgPT4gUHJvbWlzZTxzdHJpbmc+O1xuICAgIHN0eWxlOiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSk6IHZvaWQ7XG4gICAgb25FcnJvcigpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzT25BcHByb3ZlRGF0YSB7XG4gICAgdmF1bHRTZXR1cFRva2VuPzogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbiAgICBsaWFiaWxpdHlTaGlmdD86IExpYWJpbGl0eVNoaWZ0RW51bTtcbn1cblxuZXhwb3J0IGVudW0gTGlhYmlsaXR5U2hpZnRFbnVtIHtcbiAgICBQb3NzaWJsZSA9ICdQT1NTSUJMRScsXG4gICAgTm8gPSAnTk8nLFxuICAgIFVua25vd24gPSAnVU5LTk9XTicsXG4gICAgWWVzID0gJ1lFUycsXG59XG5cbmludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDYXJkID0gQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGlzRm9ybVZhbGlkOiBib29sZWFuO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gICAgZmllbGRzOiB7XG4gICAgICAgIGNhcmRDdnZGaWVsZDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROdW1iZXJGaWVsZDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZEV4cGlyeUZpZWxkOiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSB7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHMge1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICBDVlZGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBFeHBpcnlGaWVsZChjb25maWc/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgTnVtYmVyRmllbGQoY29uZmlnPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgc3VibWl0KGNvbmZpZz86IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3VibWl0Q29uZmlnKTogUHJvbWlzZTx2b2lkPjtcbiAgICBnZXRTdGF0ZSgpOiBQcm9taXNlPEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3VibWl0Q29uZmlnIHtcbiAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICBjb21wYW55Pzogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzTGluZTE6IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgICAgICBhZG1pbkFyZWExOiBzdHJpbmc7IC8vIFN0YXRlXG4gICAgICAgIGFkbWluQXJlYTI6IHN0cmluZzsgLy8gQ2l0eVxuICAgICAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnlDb2RlPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU0RLIHtcbiAgICBDYXJkRmllbGRzOiAoXG4gICAgICAgIGRhdGE6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzQ29uZmlnLFxuICAgICkgPT4gUHJvbWlzZTxCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcz47XG4gICAgR29vZ2xlcGF5OiAoKSA9PiB7XG4gICAgICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgICAgICBjb25maXJtT3JkZXI6IChhcmcwOiB7XG4gICAgICAgICAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kRGF0YTogQ29uZmlybU9yZGVyRGF0YTtcbiAgICAgICAgfSkgPT4gUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nIH0+O1xuICAgICAgICBpbml0aWF0ZVBheWVyQWN0aW9uOiAoKSA9PiB2b2lkO1xuICAgIH07XG4gICAgRlVORElORzogQmlnQ29tbWVyY2VQYXltZW50c1NES0Z1bmRpbmc7XG4gICAgSG9zdGVkRmllbGRzOiB7XG4gICAgICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgZGF0YTogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMsXG4gICAgICAgICk6IFByb21pc2U8QmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMpOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucztcbiAgICBQYXltZW50RmllbGRzKFxuICAgICAgICBvcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkc09wdGlvbnMsXG4gICAgKTogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRGaWVsZHM7XG4gICAgTWVzc2FnZXMob3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNNZXNzYWdlcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb25maXJtT3JkZXJEYXRhIHtcbiAgICB0b2tlbml6YXRpb25EYXRhOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIGluZm86IHtcbiAgICAgICAgY2FyZE5ldHdvcms6IHN0cmluZztcbiAgICAgICAgY2FyZERldGFpbHM6IHN0cmluZztcbiAgICB9O1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IHR5cGUgUGF5UGFsTGVnYWwgPSAocGFyYW1zOiB7IGZ1bmRpbmdTb3VyY2U6IHN0cmluZyB9KSA9PiB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVnYWxGdW5kaW5nIHtcbiAgICBGVU5ESU5HOiB7XG4gICAgICAgIFBBWV9VUE9OX0lOVk9JQ0U6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpcnRoRGF0ZSB7XG4gICAgZ2V0RnVsbFllYXIoKTogbnVtYmVyO1xuICAgIGdldERhdGUoKTogbnVtYmVyO1xuICAgIGdldE1vbnRoKCk6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zIHtcbiAgICBvcHRpb25zOiB7XG4gICAgICAgICdjbGllbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnbWVyY2hhbnQtaWQnPzogc3RyaW5nO1xuICAgICAgICAnYnV5ZXItY291bnRyeSc/OiBzdHJpbmc7XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlW107XG4gICAgICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgICAgICBjb21taXQ/OiBib29sZWFuO1xuICAgICAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgICAgICBjb21wb25lbnRzPzogQ29tcG9uZW50c1NjcmlwdFR5cGU7XG4gICAgfTtcbiAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS11c2VyLWlkLXRva2VuJz86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZW51bSBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBDb21wb25lbnRzU2NyaXB0VHlwZSA9IEFycmF5PFxuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgcGF5cGFsPzogUGF5UGFsU0RLO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBJbml0aWFsaXphdGlvbiBEYXRhXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBidXR0b25TdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBidXllckNvdW50cnk/OiBzdHJpbmc7XG4gICAgY2xpZW50SWQ6IHN0cmluZztcbiAgICBjbGllbnRUb2tlbj86IHN0cmluZztcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47XG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgaXNBcHBTd2l0Y2hFbmFibGVkPzogYm9vbGVhbjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBCdXlOb3dcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMge1xuICAgIGdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpOiBCdXlOb3dDYXJ0UmVxdWVzdEJvZHk7XG59XG5cbi8qKlxuICpcbiAqIEJpZ0NvbW1lcmNlIFBheW1lbnRzIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMge1xuICAgIGZpZWxkcz86IHtcbiAgICAgICAgbnVtYmVyPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBjdnY/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uO1xuICAgIH07XG4gICAgcGF5bWVudHNTREs/OiBib29sZWFuO1xuICAgIHN0eWxlcz86IHtcbiAgICAgICAgaW5wdXQ/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnLmludmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy52YWxpZCc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgICAgICAnOmZvY3VzJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgfTtcbiAgICBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkT3B0aW9uIHtcbiAgICBzZWxlY3Rvcjogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHMge1xuICAgIHN1Ym1pdChcbiAgICAgICAgb3B0aW9ucz86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8QmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0FwcHJvdmU+O1xuICAgIGdldFN0YXRlKCk6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1N0YXRlKSA9PiB2b2lkKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyB7XG4gICAgY29udGluZ2VuY2llcz86IEFycmF5PCczRF9TRUNVUkUnPjtcbiAgICBjYXJkaG9sZGVyTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc1N0YXRlIHtcbiAgICBjYXJkczogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbnVtYmVyPzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uTW9udGg/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBleHBpcmF0aW9uWWVhcj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIHBvc3RhbENvZGU/OiBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0hvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSG9zdGVkRmllbGRzRmllbGREYXRhIHtcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgICBpc0VtcHR5OiBib29sZWFuO1xuICAgIGlzUG90ZW50aWFsbHlWYWxpZDogYm9vbGVhbjtcbiAgICBpc1ZhbGlkOiBib29sZWFuO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBCdXR0b25zXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgY2xvc2UoKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgaGFzUmV0dXJuZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVzdW1lPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgZXhwZXJpZW5jZT86IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhkYXRhOiBJbml0Q2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBJbml0Q2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNvbXBsZXRlPyhkYXRhOiBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KGRhdGE6IENsaWNrQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG4gICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3NDYWxsYmFja0RhdGEge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB7XG4gICAgYW1vdW50OiB7XG4gICAgICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgcGhvbmU/OiB7XG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRkcmVzc19saW5lXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQge1xuICAgIGludGVudDogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgUGF5bWVudCBmaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkc09wdGlvbnMge1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG5hbWU/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWw/OiB7XG4gICAgICAgICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZVBheW1lbnRzIE1lc3NhZ2VzXG4gKi9cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuLy8gVE9ETzogVGhpcyBpbnRlcmZhY2UgY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgUGF5UGF5U0RLIGludGVyZmFjZSBpcyByZW1vdmVkXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogQmlnQ29tbWVyY2VQYXltZW50c01lc3NhZ2VzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzTWVzc2FnZXNTdHlsZU9wdGlvbnMge1xuICAgIGxheW91dD86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogT3RoZXJcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIHtcbiAgICBPWFhPID0gJ294eG8nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGF0YSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgYXBwcm92ZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHkge1xuICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz86IFNoaXBwaW5nT3B0aW9uW107XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj86IFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2Uge1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5IGV4dGVuZHMgSG9zdGVkSW5zdHJ1bWVudCwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIG1ldGFkYXRhSWQ/OiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IGJvb2xlYW47XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbiAgICBtZXRob2RJZD86IHN0cmluZztcbiAgICBnYXRld2F5SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbE9yZGVyU3RhdHVzIHtcbiAgICBBcHByb3ZlZCA9ICdBUFBST1ZFRCcsXG4gICAgQ3JlYXRlZCA9ICdDUkVBVEVEJyxcbiAgICBQYXllckFjdGlvblJlcXVpcmVkID0gJ1BBWUVSX0FDVElPTl9SRVFVSVJFRCcsXG4gICAgUG9sbGluZ1N0b3AgPSAnUE9MTElOR19TVE9QJyxcbiAgICBQb2xsaW5nRXJyb3IgPSAnUE9MTElOR19FUlJPUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJTdGF0dXNEYXRhIHtcbiAgICBzdGF0dXM6IFBheVBhbE9yZGVyU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSxcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDYXJ0LFxuICAgIENhcnRTb3VyY2UsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTaGlwcGluZ09wdGlvbixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXJlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtc2NyaXB0LWxvYWRlcic7XG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxuICAgIFBheVBhbFNESyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxuICAgIFN0eWxlQnV0dG9uTGFiZWwsXG4gICAgU3R5bGVCdXR0b25TaGFwZSxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uge1xuICAgIHByaXZhdGUgcGF5cGFsU2RrPzogUGF5UGFsU0RLO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgZm9ybVBvc3RlcjogRm9ybVBvc3RlcixcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyOiBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlcixcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsU0RLIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRQYXlQYWxTZGsoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHByb3ZpZGVkQ3VycmVuY3lDb2RlPzogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBwcm92aWRlZEN1cnJlbmN5Q29kZSB8fCBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMucGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyLmdldFBheVBhbFNESyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgZm9yY2VMb2FkLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxTZGtPclRocm93KCk6IFBheVBhbFNESyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxTZGspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV5IE5vdyBjYXJ0IGNyZWF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9uczogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgICAgIGNvbnN0IGNhcnRSZXF1ZXN0Qm9keSA9IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO1xuXG4gICAgICAgIGlmICghY2FydFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KGNhcnRSZXF1ZXN0Qm9keSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT3JkZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHByb3ZpZGVySWQsIHtcbiAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8UGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNldHVwVG9rZW4gfSA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHsgb3JkZXJJZCwgLi4uKHNldHVwVG9rZW4gPyB7IHNldHVwVG9rZW4gfSA6IHt9KSB9O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIudXBkYXRlT3JkZXIoe1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uczogY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLFxuICAgICAgICAgICAgICAgIGNhcnRJZDogY2FydC5pZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMobWV0aG9kSWQ/OiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXM+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgc3RhdHVzIH0gPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLmdldE9yZGVyU3RhdHVzKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5bWVudCBzdWJtaXR0aW5nIGFuZCB0b2tlbml6aW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHRva2VuaXplUGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghb3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybVBvc3Rlci5wb3N0Rm9ybSgnL2NoZWNrb3V0LnBocCcsIHtcbiAgICAgICAgICAgIHBheW1lbnRfdHlwZTogJ3BheXBhbCcsXG4gICAgICAgICAgICBhY3Rpb246ICdzZXRfZXh0ZXJuYWxfY2hlY2tvdXQnLFxuICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgICAuLi4oY2FydC5zb3VyY2UgPT09IENhcnRTb3VyY2UuQnV5Tm93ICYmIHsgY2FydF9pZDogY2FydC5pZCB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3VibWl0UGF5bWVudChtZXRob2RJZDogc3RyaW5nLCBvcmRlcklkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudCh7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgLi4uKGdhdGV3YXlJZCA/IHsgZ2F0ZXdheUlkIH0gOiB7fSksXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2hpcHBpbmcgb3B0aW9ucyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkPzogc3RyaW5nKTogU2hpcHBpbmdPcHRpb24ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IHN0YXRlLmdldENvbnNpZ25tZW50c09yVGhyb3coKVswXTtcblxuICAgICAgICBjb25zdCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG5cbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgKG9wdGlvbikgPT4gb3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiA9IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZFxuICAgICAgICAgICAgPyBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZCgob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IHNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZClcbiAgICAgICAgICAgIDogYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaWQgPT09IGNvbnNpZ25tZW50LnNlbGVjdGVkU2hpcHBpbmdPcHRpb24/LmlkLFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uVG9TZWxlY3QgPVxuICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB8fCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcblxuICAgICAgICBpZiAoIXNoaXBwaW5nT3B0aW9uVG9TZWxlY3QpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdXIgb3JkZXIgY2FuJ3QgYmUgc2hpcHBlZCB0byB0aGlzIGFkZHJlc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2hpcHBpbmdPcHRpb25Ub1NlbGVjdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEFkZHJlc3MgdHJhbnNmb3JtaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldEFkZHJlc3MoYWRkcmVzcz86IFBhcnRpYWw8QmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keT4pOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogYWRkcmVzcz8uZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGFkZHJlc3M/Lmxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgZW1haWw6IGFkZHJlc3M/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgcGhvbmU6IGFkZHJlc3M/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcz8uYWRkcmVzczIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3M/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2VDb2RlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBnZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoeyBwYXllciB9OiBQYXlQYWxPcmRlckRldGFpbHMpOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IHBheWVyLm5hbWUuZ2l2ZW5fbmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBwYXllci5uYW1lLnN1cm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogcGF5ZXIuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBwYXllci5hZGRyZXNzLmFkZHJlc3NfbGluZV8xLFxuICAgICAgICAgICAgYWRkcmVzczI6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzIsXG4gICAgICAgICAgICBjaXR5OiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMixcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBwYXllci5hZGRyZXNzLmNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHBheWVyLmFkZHJlc3MucG9zdGFsX2NvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBwYXllci5hZGRyZXNzLmFkbWluX2FyZWFfMSxcbiAgICAgICAgICAgIHBob25lOiBwYXllci5waG9uZT8ucGhvbmVfbnVtYmVyPy5uYXRpb25hbF9udW1iZXIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgIG9yZGVyRGV0YWlsczogUGF5UGFsT3JkZXJEZXRhaWxzLFxuICAgICk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICBjb25zdCB7IHBheWVyLCBwdXJjaGFzZV91bml0cyB9ID0gb3JkZXJEZXRhaWxzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhZGRyZXNzLFxuICAgICAgICAgICAgbmFtZTogeyBmdWxsX25hbWUgfSxcbiAgICAgICAgfSA9IHB1cmNoYXNlX3VuaXRzWzBdLnNoaXBwaW5nO1xuXG4gICAgICAgIGNvbnN0IFtmaXJzdE5hbWUsIC4uLmxhc3ROYW1lXSA9IGZ1bGxfbmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IGxhc3ROYW1lLmpvaW4oJyAnKSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbnMgc3R5bGUgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyk6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgICAgIGNvbnN0IHsgY29sb3IsIGhlaWdodCwgbGFiZWwsIHNoYXBlIH0gPSBzdHlsZSB8fCB7fTtcblxuICAgICAgICBjb25zdCB2YWxpZFN0eWxlcyA9IHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvciAmJiBTdHlsZUJ1dHRvbkNvbG9yW2NvbG9yXSA/IGNvbG9yIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmdldFZhbGlkSGVpZ2h0KGhlaWdodCksXG4gICAgICAgICAgICBsYWJlbDogbGFiZWwgJiYgU3R5bGVCdXR0b25MYWJlbFtsYWJlbF0gPyBsYWJlbCA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNoYXBlOiBzaGFwZSAmJiBTdHlsZUJ1dHRvblNoYXBlW3NoYXBlXSA/IHNoYXBlIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvbWl0QnkodmFsaWRTdHlsZXMsIGlzTmlsKTtcbiAgICB9XG5cbiAgICBnZXRWYWxpZEhlaWdodChoZWlnaHQ/OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gNDA7XG4gICAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDI1O1xuICAgICAgICBjb25zdCBtYXhIZWlnaHQgPSA1NTtcblxuICAgICAgICBpZiAoIWhlaWdodCB8fCB0eXBlb2YgaGVpZ2h0ICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWF4SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhlaWdodCA8IG1pbkhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlscyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KGVsZW1lbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudElkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnRJZCk7XG5cbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIEZvciBub3cgdGhpcyBpcyBhIHRlbXBvcmFyeSBzb2x1dGlvbiwgZnVydGhlciByZW1vdmVFbGVtZW50IG1ldGhvZCB3aWxsIGJlIHJlbW92ZWRcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBJTlRFUk5BTF9VU0VfT05MWSA9XG4gICAgJ1RoaXMgQVBJIGVuZHBvaW50IGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seSBhbmQgbWF5IGNoYW5nZSBpbiB0aGUgZnV0dXJlJztcbiIsImVudW0gQ29udGVudFR5cGUge1xuICAgIEpzb24gPSAnYXBwbGljYXRpb24vanNvbicsXG4gICAgSnNvblYxID0gJ2FwcGxpY2F0aW9uL3ZuZC5iYy52MStqc29uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGVudFR5cGU7XG4iLCJleHBvcnQgY29uc3QgU0RLX1ZFUlNJT05fSEVBREVSUyA9IHsgJ1gtQ2hlY2tvdXQtU0RLLVZlcnNpb24nOiBMSUJSQVJZX1ZFUlNJT04gfTtcbiIsImltcG9ydCB7IFJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIENvbnRlbnRUeXBlLFxuICAgIElOVEVSTkFMX1VTRV9PTkxZLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFNES19WRVJTSU9OX0hFQURFUlMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsT3JkZXJEYXRhLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzRGF0YSxcbiAgICBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2UsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZXF1ZXN0U2VuZGVyOiBSZXF1ZXN0U2VuZGVyKSB7fVxuXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlckRhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9wYXltZW50LyR7cHJvdmlkZXJJZH1gO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucG9zdDxQYXlQYWxPcmRlckRhdGE+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVPcmRlcihcbiAgICAgICAgcmVxdWVzdEJvZHk6IFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgKTogUHJvbWlzZTxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vYmlnY29tbWVyY2VfcGF5bWVudHNgO1xuICAgICAgICBjb25zdCBib2R5ID0gcmVxdWVzdEJvZHk7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIucHV0PFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+KHVybCwgeyBoZWFkZXJzLCBib2R5IH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPcmRlclN0YXR1cyhcbiAgICAgICAgbWV0aG9kSWQgPSAnYmlnY29tbWVyY2VfcGF5bWVudHMnLFxuICAgICAgICBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1c0RhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke21ldGhvZElkfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0PFBheVBhbE9yZGVyU3RhdHVzRGF0YT4odXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0V2luZG93LFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1NjcmlwdFBhcmFtcyxcbiAgICBDb21wb25lbnRzU2NyaXB0VHlwZSxcbiAgICBGdW5kaW5nVHlwZSxcbiAgICBQYXlQYWxTREssXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogQmlnQ29tbWVyY2VQYXltZW50c0hvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBheVBhbFNESyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNka1NjcmlwdENvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRQYXlQYWxTREsocGF5cGFsU2RrU2NyaXB0Q29uZmlnLCBmb3JjZUxvYWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFBheVBhbFNESyhcbiAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zLFxuICAgICAgICBmb3JjZUxvYWQgPSBmYWxzZSxcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zWydvcHRpb25zJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5vcHRpb25zLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zWydhdHRyaWJ1dGVzJ10+KFxuICAgICAgICAgICAgICAgIHBheXBhbFNka1NjcmlwdENvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrVXJsID0gJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vc2RrL2pzJztcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhvcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmxvYWRTY3JpcHQoc2NyaXB0U3JjLCB7IGFzeW5jOiB0cnVlLCBhdHRyaWJ1dGVzIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbFNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0UGFyYW1zIHtcbiAgICAgICAgY29uc3QgeyBpZCwgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YT8uY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc1Zlbm1vRW5hYmxlZCxcbiAgICAgICAgICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLFxuICAgICAgICAgICAgaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGlzR29vZ2xlUGF5RW5hYmxlZCxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBjb21taXQgPSBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCB8fCBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlO1xuXG4gICAgICAgIGNvbnN0IHNob3VsZEVuYWJsZUNhcmQgPSBpZCA9PT0gJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzJztcbiAgICAgICAgY29uc3QgZW5hYmxlQ2FyZEZ1bmRpbmcgPSBzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNhcmRGdW5kaW5nID0gIXNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUNyZWRpdEZ1bmRpbmcgPSBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNyZWRpdEZ1bmRpbmcgPSAhaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlVmVubW9GdW5kaW5nID0gaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZVZlbm1vRnVuZGluZyA9ICFpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmZpbHRlcihcbiAgICAgICAgICAgIChhcG06IHN0cmluZykgPT4gIWVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmluY2x1ZGVzKGFwbSksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGdvb2dsZVBheUNvbXBvbmVudDogQ29tcG9uZW50c1NjcmlwdFR5cGUgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ2FyZEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlQVBNc0Z1bmRpbmcsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBlbmFibGVGdW5kaW5nOiBGdW5kaW5nVHlwZVtdID0gdGhpcy5maWx0ZXJGdW5kaW5nT3B0aW9ucyhbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnOiBkaXNhYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0LFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFtcbiAgICAgICAgICAgICAgICAgICAgJ2J1dHRvbnMnLFxuICAgICAgICAgICAgICAgICAgICAnaG9zdGVkLWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdsZWdhbCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLmdvb2dsZVBheUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgLi4uY2FyZEZpZWxkc0NvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZpbHRlckZ1bmRpbmdPcHRpb25zKGZ1bmRpbmdPcHRpb25zOiBGdW5kaW5nVHlwZVtdIHwgdW5kZWZpbmVkKTogRnVuZGluZ1R5cGVbXSB7XG4gICAgICAgIGNvbnN0IGZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCA9IFsna2xhcm5hJywgJ2FmdGVycGF5J107XG5cbiAgICAgICAgaWYgKCFmdW5kaW5nT3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmRpbmdPcHRpb25zLmZpbHRlcihcbiAgICAgICAgICAgIChmdW5kaW5nT3B0aW9uOiBGdW5kaW5nVHlwZSkgPT4gIWZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZC5pbmNsdWRlcyhmdW5kaW5nT3B0aW9uKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zZm9ybUNvbmZpZzxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGNvbmZpZzogVCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgICAgICBsZXQgdHJhbnNmb3JtZWRDb25maWcgPSB7fTtcblxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY29uZmlnKSBhcyBBcnJheTxrZXlvZiBUPjtcblxuICAgICAgICBrZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSAnJyB8fFxuICAgICAgICAgICAgICAgIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zZm9ybWVkQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC4uLnRyYW5zZm9ybWVkQ29uZmlnLFxuICAgICAgICAgICAgICAgIFtrZXldOiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlLmpvaW4oJywnKSA6IHZhbHVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkQ29uZmlnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIsXG59IGZyb20gJy4vaW5kZXgnO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShcbiAgICAgICAgY3JlYXRlRm9ybVBvc3RlcigpLFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXIoY3JlYXRlUmVxdWVzdFNlbmRlcih7IGhvc3Q6IGdldEhvc3QoKSB9KSksXG4gICAgICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmZ1bmN0aW9uIGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoe1xuICAgIHN0eWxlcyxcbn06IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSk6IE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb25zdCBtZXNzYWdlc1N0eWxlczogTWVzc2FnZXNTdHlsZU9wdGlvbnMgPSB7fTtcblxuICAgIGlmIChzdHlsZXMuY29sb3IpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMuY29sb3IgPSBzdHlsZXMuY29sb3I7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlcy5sYXlvdXQpIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubGF5b3V0ID0gc3R5bGVzLmxheW91dDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzWydsb2dvLXR5cGUnXSB8fCBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXSkge1xuICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvID0ge307XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28udHlwZSA9IHN0eWxlc1snbG9nby10eXBlJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxvZ28ucG9zaXRpb24gPSBzdHlsZXNbJ2xvZ28tcG9zaXRpb24nXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdHlsZXMucmF0aW8pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMucmF0aW8gPSBzdHlsZXMucmF0aW87XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1sndGV4dC1jb2xvciddIHx8IHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dCA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSkge1xuICAgICAgICAgICAgbWVzc2FnZXNTdHlsZXMudGV4dC5jb2xvciA9IHN0eWxlc1sndGV4dC1jb2xvciddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1sndGV4dC1zaXplJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuc2l6ZSA9ICtzdHlsZXNbJ3RleHQtc2l6ZSddO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lc3NhZ2VzU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBzdWNjZXNzZnVsbHkgc3VibWl0IGEgc2VydmVyIHJlcXVlc3RcbiAqIHVzaW5nIGEgcGF5bWVudCBtZXRob2QgYmVjYXVzZSB0aGUgbWV0aG9kIGhhcyBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gb3IgaXMgaW5cbiAqIGFuIGludmFsaWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RJbnZhbGlkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiZXhwb3J0IGludGVyZmFjZSBCYXNlSW5zdHJ1bWVudCB7XG4gICAgYmlncGF5VG9rZW46IHN0cmluZztcbiAgICBkZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbjtcbiAgICBwcm92aWRlcjogc3RyaW5nO1xuICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGJvb2xlYW47XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNCYXNlSW5zdHJ1bWVudChpbnN0cnVtZW50OiB1bmtub3duKTogaW5zdHJ1bWVudCBpcyBCYXNlSW5zdHJ1bWVudCB7XG4gICAgaWYgKHR5cGVvZiBpbnN0cnVtZW50ICE9PSAnb2JqZWN0JyB8fCBpbnN0cnVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYmlncGF5VG9rZW4nIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ2RlZmF1bHRJbnN0cnVtZW50JyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdwcm92aWRlcicgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHJ1c3RlZFNoaXBwaW5nQWRkcmVzcycgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAnbWV0aG9kJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICd0eXBlJyBpbiBpbnN0cnVtZW50XG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBpc0JpZ0NvbW1lcmNlUGF5bWVudHNQcm92aWRlckVycm9yLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNCYXNlSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM7XG4gICAgcHJpdmF0ZSBiaWdjb21tZXJjZV9wYXltZW50cz86IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsU2RrSGVscGVyOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMgPSBiaWdjb21tZXJjZV9wYXltZW50cztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBiYW5uZXJDb250YWluZXJJZCB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHM7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10sXG4gICAgICAgICAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSxcbiAgICAgICAgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGlmIChiYW5uZXJDb250YWluZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lckNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID0gcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/LmZpbmQoXG4gICAgICAgICAgICAgICAgKHsgaWQgfSkgPT4gaWQgPT09ICdjaGVja291dCcsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgfHwgIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnBheXBhbFNka0hlbHBlci5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICghcGF5cGFsTWVzc2FnZXMgfHwgdHlwZW9mIHBheXBhbE1lc3NhZ2VzPy5NZXNzYWdlcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsQ29tbWVyY2UgUGF5TGF0ZXJdOiBiYW5uZXIgY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJNZXNzYWdlcyhwYXlwYWxNZXNzYWdlcywgYmFubmVyQ29udGFpbmVySWQsIGJhbm5lckNvbmZpZ3VyYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGNvbnRhaW5lcj8uc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uSW5pdCAmJiB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHMub25Jbml0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50cy5vbkluaXQoKCkgPT4gdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50cy5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50cyB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKSAmJiAhdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEocGF5bWVudERhdGEpXG4gICAgICAgICAgICA/IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHRoaXMub3JkZXJJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICA6IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhwYXltZW50Lm1ldGhvZElkKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKHBheW1lbnQubWV0aG9kSWQsIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0lOU1RSVU1FTlRfREVDTElORUQnKSwgb25FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCAmIEhvc3RlZEluc3RydW1lbnQsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBwYXltZW50RGF0YTtcblxuICAgICAgICBjb25zdCBzaG91bGRDb25maXJtSW5zdHJ1bWVudCA9ICF0aGlzLmlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhwYXltZW50RGF0YSk7XG5cbiAgICAgICAgaWYgKHNob3VsZENvbmZpcm1JbnN0cnVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50OiBzaG91bGRDb25maXJtSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9yZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBiaWdjb21tZXJjZV9wYXltZW50cztcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoXG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PiB0aGlzLmNyZWF0ZU9yZGVyKCksXG4gICAgICAgICAgICBvbkNsaWNrOiAoXywgYWN0aW9ucykgPT4gdGhpcy5oYW5kbGVDbGljayhhY3Rpb25zLCBvblZhbGlkYXRlKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IG9uVmFsaWRhdGU/LihvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0/LigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiB1bmtub3duLFxuICAgICAgICBvbkVycm9yOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBmaWVsZHNWYWx1ZXMgPSB0aGlzLmdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNjaGVja291dCcsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ6IGZpZWxkc1ZhbHVlcz8uc2hvdWxkU2F2ZUluc3RydW1lbnQgfHwgZmFsc2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmF1bHRpbmcgZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgZ2V0RmllbGRzVmFsdWVzKCk6IEhvc3RlZEluc3RydW1lbnQgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCB7IGdldEZpZWxkc1ZhbHVlcyB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50cyB8fCB7fTtcblxuICAgICAgICByZXR1cm4gdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyA9PT0gJ2Z1bmN0aW9uJyA/IGdldEZpZWxkc1ZhbHVlcygpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNUcnVzdGVkVmF1bHRpbmdGbG93KHBheW1lbnREYXRhPzogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkKTogYm9vbGVhbiB7XG4gICAgICAgIGlmIChwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgY29uc3QgaW5zdHJ1bWVudHMgPSBzdGF0ZS5nZXRJbnN0cnVtZW50cygpO1xuXG4gICAgICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgICAgIChpbnN0cnVtZW50KSA9PlxuICAgICAgICAgICAgICAgICAgICBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnQuYmlncGF5VG9rZW4gPT09IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgICAgICA/IGZpbmRJbnN0cnVtZW50LnRydXN0ZWRTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogR3VhcmRzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgKTogcGF5bWVudERhdGEgaXMgVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICEhcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlciBQYXkgTGF0ZXIgTWVzc2FnZXNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXM6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBiYW5uZXJDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdwYXltZW50JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucykucmVuZGVyKGAjJHtiYW5uZXJDb250YWluZXJJZH1gKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaXNCaWdDb21tZXJjZVBheW1lbnRzUHJvdmlkZXJFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbFByb3ZpZGVyRXJyb3IgPSBlcnJvcj8uZXJyb3JzPy5maWx0ZXIoKGUpID0+IGUucHJvdmlkZXJfZXJyb3IpIHx8IFtdO1xuXG4gICAgICAgICAgICByZXR1cm4gcGF5cGFsUHJvdmlkZXJFcnJvclswXT8ucHJvdmlkZXJfZXJyb3I/LmNvZGUgPT09ICdJTlNUUlVNRU5UX0RFQ0xJTkVEJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZXJyb3JzPzogRXJyb3JFbGVtZW50W107XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogdW5rbm93bjtcbiAgICAgICAgcGF5ZXJfYXV0aF9yZXF1ZXN0OiB1bmtub3duO1xuICAgICAgICBtZXJjaGFudF9kYXRhOiB1bmtub3duO1xuICAgICAgICBjYWxsYmFja191cmw6IHVua25vd247XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckVsZW1lbnQge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcHJvdmlkZXJfZXJyb3I/OiB7XG4gICAgICAgIGNvZGU6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpZ0NvbW1lcmNlUGF5bWVudHNQcm92aWRlckVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUHJvdmlkZXJFcnJvciB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ2Vycm9ycycgaW4gZXJyb3I7XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtY29uc3RhbnRzJztcbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImltcG9ydCB7IENhcmRJbnN0cnVtZW50LCBDdXN0b21lckFkZHJlc3MgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZztcblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgSW5pdGlhbGl6YXRpb24gRGF0YVxuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBhdHRyaWJ1dGlvbklkPzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlW107XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVTdHlsZXM/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzO1xuICAgIGNvbm5lY3RDbGllbnRUb2tlbj86IHN0cmluZzsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGVbXTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc0JpZ0NvbW1lcmNlUGF5bWVudHNBbmFseXRpY3NWMkVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlPzogYm9vbGVhbjtcbiAgICBpc1Zlbm1vRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNHb29nbGVQYXlFbmFibGVkPzogYm9vbGVhbjtcbiAgICBtZXJjaGFudElkPzogc3RyaW5nO1xuICAgIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgc2hvdWxkUmVuZGVyRmllbGRzPzogYm9vbGVhbjtcbiAgICBzaG91bGRSdW5BY2NlbGVyYXRlZENoZWNrb3V0PzogYm9vbGVhbjsgLy8gVE9ETzogcmVtb3ZlIHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0IHdpbGwgYmUgZmluaXNoZWRcbiAgICBwYXltZW50QnV0dG9uU3R5bGVzPzogUmVjb3JkPHN0cmluZywgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zPjtcbiAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj86IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbVtdO1xuICAgIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbEhvc3RXaW5kb3cgY29udGFpbnMgZGlmZmVyZW50XG4gKiBQYXlQYWwgU2RrIGluc3RhbmNlcyBmb3IgZGlmZmVyZW50IHB1cnBvc2VzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbEZhc3RsYW5lPzogUGF5UGFsRmFzdGxhbmU7XG4gICAgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwYXlwYWxNZXNzYWdlcz86IFBheVBhbE1lc3NhZ2VzU2RrO1xuICAgIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcGF5cGFsR29vZ2xlUGF5PzogUGF5UGFsR29vZ2xlUGF5U2RrO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgU0RLIGNvbmZpZ1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxTZGtDb25maWcge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEZ1bmRpbmdUeXBlW107XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGVbXTtcbiAgICAgICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgICAgIGNvbW1pdD86IGJvb2xlYW47XG4gICAgICAgIGludGVudD86IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBQYXlQYWxTZGtDb21wb25lbnRzO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtdXNlci1pZC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLW5hbWVzcGFjZSc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlbnQge1xuICAgIEFVVEhPUklaRSA9ICdhdXRob3JpemUnLFxuICAgIENBUFRVUkUgPSAnY2FwdHVyZScsXG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbFNka0NvbXBvbmVudHMgPSBBcnJheTxcbiAgICAnZmFzdGxhbmUnIHwgJ21lc3NhZ2VzJyB8ICdidXR0b25zJyB8ICdwYXltZW50LWZpZWxkcycgfCAnZ29vZ2xlcGF5JyB8ICd0aHJlZS1kb21haW4tc2VjdXJlJ1xuPjtcblxuLyoqXG4gKlxuICogUGF5UGFsIFNkayBpbnN0YW5jZXNcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHRocmVlRFNlY3VyZVBhcmFtZXRlcnMge1xuICAgIGFtb3VudDogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICB0aHJlZURTUmVxdWVzdGVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgIGJyYW5kX25hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICBsb2NhbGU6IHN0cmluZztcbiAgICAgICAgICAgIHJldHVybl91cmw6IHN0cmluZztcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lU2RrIHtcbiAgICBUaHJlZURvbWFpblNlY3VyZUNsaWVudDoge1xuICAgICAgICBpc0VsaWdpYmxlKHBhcmFtczogdGhyZWVEU2VjdXJlUGFyYW1ldGVycyk6IFByb21pc2U8Ym9vbGVhbj47XG4gICAgICAgIHNob3coKTogUHJvbWlzZTxUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZT47XG4gICAgfTtcbiAgICBGYXN0bGFuZShvcHRpb25zPzogUGF5UGFsRmFzdGxhbmVPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZT47XG59XG5cbmludGVyZmFjZSBUaHJlZURvbWFpblNlY3VyZUNsaWVudFNob3dSZXNwb25zZSB7XG4gICAgbGlhYmlsaXR5U2hpZnQ6IExpYWJpbGl0eVNoaWZ0RW51bTtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgbm9uY2U6IHN0cmluZzsgLy8gRW5yaWNoZWQgbm9uY2Ugb3IgdGhlIG9yaWdpbmFsIG5vbmNlXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsTWVzc2FnZXNTZGsge1xuICAgIE1lc3NhZ2VzKG9wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMpOiBNZXNzYWdpbmdSZW5kZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQXBtU2RrIHtcbiAgICBCdXR0b25zKG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyk6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMoXG4gICAgICAgIG9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyxcbiAgICApOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxHb29nbGVQYXlTZGsge1xuICAgIEdvb2dsZXBheSgpOiBHb29nbGVQYXk7XG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kIHtcbiAgICBBbHdheXMgPSAnU0NBX0FMV0FZUycsXG59XG5cbmV4cG9ydCBlbnVtIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU3VjY2VlZGVkID0gJ3N1Y2NlZWRlZCcsXG4gICAgQ2FuY2VsbGVkID0gJ2NhbmNlbGxlZCcsXG4gICAgRXJyb3JlZCA9ICdlcnJvcmVkJyxcbn1cblxuLyoqXG4gKlxuICogR29vZ2xlIFBheSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5cbmludGVyZmFjZSBHb29nbGVQYXkge1xuICAgIGNvbmZpZzogKCkgPT4gUHJvbWlzZTxHb29nbGVQYXlDb25maWc+O1xuICAgIGNvbmZpcm1PcmRlcjogKGNvbmZpcm1PcmRlckNvbmZpZzogQ29uZmlybU9yZGVyQ29uZmlnKSA9PiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcgfT47XG4gICAgaW5pdGlhdGVQYXllckFjdGlvbjogKHBheWVyQWN0aW9uQ29uZmlnOiBQYXllckFjdGlvbkNvbmZpZykgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuaW50ZXJmYWNlIENvbmZpcm1PcmRlckNvbmZpZyB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHBheW1lbnRNZXRob2REYXRhOiBDb25maXJtT3JkZXJEYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbmZpcm1PcmRlckRhdGEge1xuICAgIHRva2VuaXphdGlvbkRhdGE6IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG4gICAgaW5mbzoge1xuICAgICAgICBjYXJkTmV0d29yazogc3RyaW5nO1xuICAgICAgICBjYXJkRGV0YWlsczogc3RyaW5nO1xuICAgIH07XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUGF5ZXJBY3Rpb25Db25maWcge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHb29nbGVQYXlDb25maWcge1xuICAgIGFsbG93ZWRQYXltZW50TWV0aG9kczogQWxsb3dlZFBheW1lbnRNZXRob2RzW107XG4gICAgYXBpVmVyc2lvbjogbnVtYmVyO1xuICAgIGFwaVZlcnNpb25NaW5vcjogbnVtYmVyO1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgaXNFbGlnaWJsZTogYm9vbGVhbjtcbiAgICBtZXJjaGFudEluZm86IHtcbiAgICAgICAgbWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICBtZXJjaGFudE9yaWdpbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWxsb3dlZFBheW1lbnRNZXRob2RzIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgICBhbGxvd2VkQXV0aE1ldGhvZHM6IHN0cmluZ1tdO1xuICAgICAgICBhbGxvd2VkQ2FyZE5ldHdvcmtzOiBzdHJpbmdbXTtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYXNzdXJhbmNlRGV0YWlsc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1BhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGZvcm1hdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgdG9rZW5pemF0aW9uU3BlY2lmaWNhdGlvbjoge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgIGdhdGV3YXk6IHN0cmluZztcbiAgICAgICAgICAgIGdhdGV3YXlNZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuLyoqXG4gKlxuICogQmlnQ29tbWVyY2UgUGF5bWVudHMgQnV0dG9uc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xuICAgIGNsb3NlKCk6IHZvaWQ7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oXG4gICAgICAgIGRhdGE6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhcbiAgICAgICAgZGF0YTogUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IFBheVBhbEJ1dHRvbkNsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQ2xpY2tDYWxsYmFja1BheWxvYWQge1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25DbGlja0NhbGxiYWNrQWN0aW9ucyB7XG4gICAgcmVqZWN0KCk6IHZvaWQ7XG4gICAgcmVzb2x2ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbkluaXRDYWxsYmFja1BheWxvYWQge1xuICAgIGNvcnJlbGF0aW9uSUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25Jbml0Q2FsbGJhY2tBY3Rpb25zIHtcbiAgICBkaXNhYmxlKCk6IHZvaWQ7XG4gICAgZW5hYmxlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25BcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICB9O1xuICAgIHB1cmNoYXNlX3VuaXRzOiBBcnJheTx7XG4gICAgICAgIHNoaXBwaW5nOiB7XG4gICAgICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMjogc3RyaW5nO1xuICAgIGFkbWluX2FyZWFfMT86IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkxhYmVsIHtcbiAgICBwYXlwYWwgPSAncGF5cGFsJyxcbiAgICBjaGVja291dCA9ICdjaGVja291dCcsXG4gICAgYnV5bm93ID0gJ2J1eW5vdycsXG4gICAgcGF5ID0gJ3BheScsXG4gICAgaW5zdGFsbG1lbnQgPSAnaW5zdGFsbG1lbnQnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvbkNvbG9yIHtcbiAgICBnb2xkID0gJ2dvbGQnLFxuICAgIGJsdWUgPSAnYmx1ZScsXG4gICAgc2lsdmVyID0gJ3NpbHZlcicsXG4gICAgYmxhY2sgPSAnYmxhY2snLFxuICAgIHdoaXRlID0gJ3doaXRlJyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25TaGFwZSB7XG4gICAgcGlsbCA9ICdwaWxsJyxcbiAgICByZWN0ID0gJ3JlY3QnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBTdHlsZUJ1dHRvbkNvbG9yO1xuICAgIHNoYXBlPzogU3R5bGVCdXR0b25TaGFwZTtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgbGFiZWw/OiBTdHlsZUJ1dHRvbkxhYmVsO1xufVxuXG4vKipcbiAqXG4gKiBCaWdDb21tZXJjZSBQYXltZW50cyBQYXltZW50RmllbGRzIGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudEZpZWxkcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXltZW50RmllbGRzT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlnQ29tbWVyY2VQYXltZW50c0ZpZWxkc1N0eWxlT3B0aW9ucyB7XG4gICAgdmFyaWFibGVzPzoge1xuICAgICAgICBmb250RmFtaWx5Pzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZUJhc2U/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplU20/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVMZz86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yPzogc3RyaW5nO1xuICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgY29sb3JCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICAgICAgICBjb2xvckluZm8/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yRGFuZ2VyPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckNvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgYm9yZGVyRm9jdXNDb2xvcj86IHN0cmluZztcbiAgICAgICAgc3BhY2luZ1VuaXQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBydWxlcz86IHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuICAgIH07XG59XG5cbi8qKlxuICpcbiAqIFBheUxhdGVyIE1lc3NhZ2VzIHJlbGF0ZWQgdHlwZXNcbiAqIGRvYzogaHR0cHM6Ly9kZXZlbG9wZXIucGF5cGFsLmNvbS9kb2NzL2NoZWNrb3V0L3BheS1sYXRlci91cy9pbnRlZ3JhdGUvcmVmZXJlbmNlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nUmVuZGVyIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VzU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IHN0cmluZzsgLy8gJ2JsdWUnIHwgJ2JsYWNrJyB8ICd3aGl0ZScgfCAnd2hpdGUtbm8tYm9yZGVyJyB8ICdncmF5JyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgbGF5b3V0Pzogc3RyaW5nOyAvLyAndGV4dCcgfCAnZmxleCdcbiAgICBsb2dvPzoge1xuICAgICAgICB0eXBlPzogc3RyaW5nOyAvLyAncHJpbWFyeScgfCAnYWx0ZXJuYXRpdmUnIHwgJ2lubGluZScgfCAnbm9uZSdcbiAgICAgICAgcG9zaXRpb24/OiBzdHJpbmc7IC8vICdsZWZ0JyB8ICdyaWdodCcgfCAndG9wJ1xuICAgIH07XG4gICAgcmF0aW8/OiBzdHJpbmc7IC8vICcxeDEnIHwgJzF4NCcgfCAnOHgxJyB8ICcyMHgxJ1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGFsaWduPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ2NlbnRlcidcbiAgICAgICAgY29sb3I/OiBzdHJpbmc7IC8vICdibGFjaycgfCAnd2hpdGUnIHwgJ21vbm9jaHJvbWUnIHwgJ2dyYXlzY2FsZSdcbiAgICAgICAgc2l6ZT86IG51bWJlcjsgLy8gZnJvbSAxMCB0byAxNlxuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnaW5nT3B0aW9ucyB7XG4gICAgYW1vdW50OiBudW1iZXI7XG4gICAgcGxhY2VtZW50OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBNZXNzYWdlc1N0eWxlT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0YXR1czogYm9vbGVhbjtcbiAgICBzdHlsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkIHR5cGVzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lIHtcbiAgICBpZGVudGl0eTogUGF5UGFsRmFzdGxhbmVJZGVudGl0eTtcbiAgICBldmVudHM6IFBheVBhbEZhc3RsYW5lRXZlbnRzO1xuICAgIHByb2ZpbGU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZTtcbiAgICBGYXN0bGFuZUNhcmRDb21wb25lbnQoXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9wdGlvbnMge1xuICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lSWRlbnRpdHkge1xuICAgIGxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD47XG4gICAgdHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lTG9va3VwQ3VzdG9tZXJCeUVtYWlsUmVzdWx0IHtcbiAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlPzogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIHByb2ZpbGVEYXRhPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIHtcbiAgICBTVUNDRUVERUQgPSAnc3VjY2VlZGVkJyxcbiAgICBGQUlMRUQgPSAnZmFpbGVkJyxcbiAgICBDQU5DRUxFRCA9ICdjYW5jZWxlZCcsXG4gICAgVU5SRUNPR05JWkVEID0gJ3VucmVjb2duaXplZCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlRGF0YSB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBzaGlwcGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzO1xuICAgIGNhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSB7XG4gICAgZnVsbE5hbWU6IHN0cmluZztcbiAgICBmaXJzdE5hbWU/OiBzdHJpbmc7XG4gICAgbGFzdE5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUge1xuICAgIGNvdW50cnlDb2RlOiBzdHJpbmc7XG4gICAgbmF0aW9uYWxOdW1iZXI6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcyB7XG4gICAgbmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZTtcbiAgICBwaG9uZU51bWJlcjogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmU7XG4gICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQge1xuICAgIGlkOiBzdHJpbmc7IC8vIG5vbmNlIC8gdG9rZW5cbiAgICBwYXltZW50U291cmNlOiBQYXlQYWxGYXN0bGFuZVBheW1lbnRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlIHtcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZUNhcmRTb3VyY2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlIHtcbiAgICBicmFuZDogc3RyaW5nO1xuICAgIGV4cGlyeTogc3RyaW5nOyAvLyBcIllZWVktTU1cIlxuICAgIGxhc3REaWdpdHM6IHN0cmluZzsgLy8gXCIxMTExXCJcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYmlsbGluZ0FkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgYWRkcmVzc0xpbmUyPzogc3RyaW5nO1xuICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgIGF1dGhlbnRpY2F0aW9uU3RhdGU6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBhZGRyZXNzZXM6IEN1c3RvbWVyQWRkcmVzc1tdO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogQ3VzdG9tZXJBZGRyZXNzO1xuICAgIHNoaXBwaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBpbnN0cnVtZW50czogQ2FyZEluc3RydW1lbnRbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB7XG4gICAgcm9vdD86IHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgZXJyb3JDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBwYWRkaW5nPzogc3RyaW5nO1xuICAgICAgICBwcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbnB1dD86IHtcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgZm9jdXNCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJXaWR0aD86IHN0cmluZztcbiAgICAgICAgdGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICB9O1xuICAgIHRvZ2dsZT86IHtcbiAgICAgICAgY29sb3JQcmltYXJ5Pzogc3RyaW5nO1xuICAgICAgICBjb2xvclNlY29uZGFyeT86IHN0cmluZztcbiAgICB9O1xuICAgIHRleHQ/OiB7XG4gICAgICAgIGJvZHk/OiB7XG4gICAgICAgICAgICBjb2xvcj86IHN0cmluZztcbiAgICAgICAgICAgIGZvbnRTaXplPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBjYXB0aW9uPzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIGJyYW5kaW5nPzogc3RyaW5nOyAvLyAnbGlnaHQnIHwgJ2RhcmsnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVQcm9maWxlIHtcbiAgICBzaG93Q2FyZFNlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZT47XG4gICAgc2hvd1NoaXBwaW5nQWRkcmVzc1NlbGVjdG9yKCk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzc1NlbGVjdG9yUmVzcG9uc2Uge1xuICAgIHNlbGVjdGlvbkNoYW5nZWQ6IGJvb2xlYW47XG4gICAgc2VsZWN0ZWRBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQ2FyZDogUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ+O1xuICAgIHJlbmRlcihlbGVtZW50OiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lR2V0UGF5bWVudFRva2VuT3B0aW9ucyB7XG4gICAgbmFtZT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgYmlsbGluZ0FkZHJlc3M/OiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgZmllbGRzPzogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50RmllbGRzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcyB7XG4gICAgY2FyZGhvbGRlck5hbWU/OiB7XG4gICAgICAgIGVuYWJsZWQ/OiBib29sZWFuO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvbmVOdW1iZXI/OiB7XG4gICAgICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICAgICAgICBwcmVmaWxsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudHMge1xuICAgIGFwbVNlbGVjdGVkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBlbWFpbFN1Ym1pdHRlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zKSA9PiB2b2lkO1xuICAgIG9yZGVyUGxhY2VkOiAob3B0aW9uczogUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUV2ZW50Q29tbW9uT3B0aW9ucyB7XG4gICAgY29udGV4dF90eXBlOiAnY3NfaWQnO1xuICAgIGNvbnRleHRfaWQ6IHN0cmluZzsgLy8gY2hlY2tvdXQgc2Vzc2lvbiBpZFxuICAgIHBhZ2VfdHlwZTogJ2NoZWNrb3V0X3BhZ2UnO1xuICAgIHBhZ2VfbmFtZTogc3RyaW5nOyAvLyB0aXRsZSBvZiB0aGUgY2hlY2tvdXQgaW5pdGlhdGlvbiBwYWdlXG4gICAgcGFydG5lcl9uYW1lOiAnYmlnYyc7XG4gICAgdXNlcl90eXBlOiAnc3RvcmVfbWVtYmVyJyB8ICdzdG9yZV9ndWVzdCc7IC8vIHR5cGUgb2YgdGhlIHVzZXIgb24gdGhlIG1lcmNoYW50IHNpdGVcbiAgICBzdG9yZV9pZDogc3RyaW5nO1xuICAgIG1lcmNoYW50X25hbWU6IHN0cmluZztcbiAgICBleHBlcmltZW50OiBzdHJpbmc7IC8vIHN0cmluZ2lmeSBKU09OIG9iamVjdCBcIlt7IHRyZWF0bWVudF9ncm91cDogJ3Rlc3QnIHwgJ2NvbnRyb2wnIH1dXCJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUFwbVNlbGVjdGVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9zZWxlY3RlZDogc3RyaW5nOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBtZXRob2Qgc2VsZWN0ZWQgLyBtZXRob2RJZFxuICAgIGFwbV9sb2NhdGlvbjogJ3ByZS1lbWFpbCBzZWN0aW9uJyB8ICdwYXltZW50IHNlY3Rpb24nOyAvLyBwbGFjZW1lbnQgb2YgQVBNLCB3aGV0aGVyIGl0IGJlIGFib3ZlIHRoZSBlbWFpbCBlbnRyeSBvciBpbiB0aGUgcmFkaW8gYnV0dG9uc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRW1haWxFbnRlcmVkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHVzZXJfZW1haWxfc2F2ZWQ6IGJvb2xlYW47IC8vIHNob3dzIHdoZXRoZXIgY2hlY2tvdXQgd2FzIGxvYWRlZCB3aXRoIG9yIHdpdGhvdXQgYSBzYXZlZCBlbWFpbFxuICAgIGFwbV9zaG93bjogJzAnIHwgJzEnOyAvLyBhbHRlcm5hdGUgcGF5bWVudCBzaG93biBvbiB0aGUgY2hlY2tvdXQgcGFnZVxuICAgIGFwbV9saXN0OiBzdHJpbmc7IC8vIGxpc3Qgb2YgYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gY2hlY2tvdXQgcGFnZSAnYXBwbGVwYXksZ29vZ2xlcGF5LHBheXBhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZU9yZGVyUGxhY2VkRXZlbnRPcHRpb25zIGV4dGVuZHMgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIHNlbGVjdGVkX3BheW1lbnRfbWV0aG9kOiBzdHJpbmc7XG4gICAgY3VycmVuY3lfY29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQge1xuICAgIHBheXBhbF9jb25uZWN0X3Rva2VuPzoge1xuICAgICAgICBvcmRlcl9pZD86IHN0cmluZztcbiAgICAgICAgdG9rZW46IHN0cmluZztcbiAgICB9O1xuICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGYXN0bGFuZVN0eWxlc1NldHRpbmdzIHtcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZz86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1ByaW1hcnlDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXM/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvcj86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICBmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemU/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlZGlyZWN0RXJyb3Ige1xuICAgIGJvZHk6IHtcbiAgICAgICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmw6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbn1cbiIsImludGVyZmFjZSBDb29raWVPcHRpb25zIHtcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBzZWN1cmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb29raWVTdG9yYWdlIHtcbiAgICBzdGF0aWMgZ2V0KG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBjb29raWVLZXkgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoYCR7bmFtZX1gKX09YDtcbiAgICAgICAgY29uc3QgY29va2llID0gZG9jdW1lbnQuY29va2llO1xuXG4gICAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG5cbiAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKGNvb2tpZUtleSk7XG5cbiAgICAgICAgaWYgKGZpcnN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgbGV0IGxhc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKCc7JywgZmlyc3RJbmRleCk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gY29va2llLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhmaXJzdEluZGV4ICsgY29va2llS2V5Lmxlbmd0aCwgbGFzdEluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMgPSB7IHNlY3VyZTogdHJ1ZSB9KSB7XG4gICAgICAgIGxldCBjb29raWVUZXh0ID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcblxuICAgICAgICBjb25zdCB7IGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtleHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAvLyBpbmZvOiBkZWZhdWx0IGNvb2tpZSBleHBpcmF0aW9uIHRpbWUgYWZ0ZXIgc2V0dXBcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSA2MDtcblxuICAgICAgICAgICAgbm93LnNldFRpbWUobm93LmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtub3cudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgcGF0aD0ke3BhdGh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZG9tYWluPSR7ZG9tYWlufWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9ICc7IHNlY3VyZSc7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVUZXh0O1xuICAgIH1cblxuICAgIHN0YXRpYyByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xuICAgICAgICBDb29raWVTdG9yYWdlLnNldChuYW1lLCAnJywgeyBleHBpcmVzOiBuZXcgRGF0ZSgwKSwgLi4ub3B0aW9ucyB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc0VxdWFsLCBvbWl0IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEN1c3RvbWVyQWRkcmVzcyxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IENvb2tpZVN0b3JhZ2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0b3JhZ2UnO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbEZhc3RsYW5lLFxuICAgIFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4gICAgUGF5UGFsSG9zdFdpbmRvdyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsSG9zdFdpbmRvdztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgIHBheXBhbEZhc3RsYW5lU2RrOiBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQ6IGJvb2xlYW4sXG4gICAgICAgIHN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmU+IHtcbiAgICAgICAgaWYgKGlzVGVzdE1vZGVFbmFibGVkKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Zhc3RsYW5lRW52JywgJ3NhbmRib3gnKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXhvRW52JywgJ3NhbmRib3gnKTsgLy8gVE9ETzogcmVtb3ZlIGlmIHRoaXMga2V5IGRvZXMgbm90IHVzZSBvbiBQYXlQYWwgc2lkZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSkge1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHtcbiAgICAgICAgICAgICAgICByb290OiB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lID0gYXdhaXQgcGF5cGFsRmFzdGxhbmVTZGsuRmFzdGxhbmUoe1xuICAgICAgICAgICAgICAgIHN0eWxlczogc3R5bGVzIHx8IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTogUGF5UGFsRmFzdGxhbmUge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERldGVjdHMgdGhlIGN1c3RvbWVyIHRvIFBheVBhbCBGYXN0bGFuZSByZWxhdGlvbiBhbmRcbiAgICAgKiByZXR1cm5zIGN1c3RvbWVyQ29udGV4dElkIHRvIHVzZSBpdCBmb3IgYXV0aGVudGljYXRpb25cbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvb2t1cEN1c3RvbWVyT3JUaHJvdyhlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdD4ge1xuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuIHBheXBhbEZhc3RsYW5lLmlkZW50aXR5Lmxvb2t1cEN1c3RvbWVyQnlFbWFpbChlbWFpbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUcmlnZ2VycyBhdXRoZW50aWNhdGlvbiBmbG93IChzaG93cyBPVFAgcG9wdXApIGlmIHRoZSBjdXN0b21lciByZWNvZ25pc2VkIGFzIFBheVBhbCBGYXN0bGFuZSB1c2VyXG4gICAgICogYW5kIHJldHVybnMgUGF5UGFsIEZhc3RsYW5lIFByb2ZpbGUgZGF0YSB0byB1c2UgaXQgaW4gQkMgY2hlY2tvdXRcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIHRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KFxuICAgICAgICBjdXN0b21lckNvbnRleHRJZD86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQ+IHtcbiAgICAgICAgaWYgKCFjdXN0b21lckNvbnRleHRJZCkge1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBwYXlwYWxGYXN0bGFuZS5pZGVudGl0eS50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93KGN1c3RvbWVyQ29udGV4dElkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICd1cGRhdGVTdG9yYWdlU2Vzc2lvbklkJyBtZXRob2QgaXMgdXNlZCB0bzpcbiAgICAgKiAtIHNldCBzZXNzaW9uIGlkIGFmdGVyIHVzZXIgd2FzIGF1dGhlbnRpY2F0ZWQgKG9yIHVucmVjb2duaXNlZCkgdG8gdHJpZ2dlciBhdXRoZW50aWNhdGlvbiBhZnRlciBwYWdlIHJlZnJlc2hcbiAgICAgKlxuICAgICAqIEZsb3cgaW5mbzpcbiAgICAgKiBJZiB1c2VyIHVucmVjb2duaXNlZCB0aGVuIHRoZSBsb29rdXAgbWV0aG9kIHdpbGwgYmUgd29ya2luZyBidXQgdGhlIE9UUCB3aWxsIG5vdCBiZSBzaG93blxuICAgICAqIElmIHVzZXIgcmVjb2duaXNlZCBhbmQgbm90IGNhbmNlbGVkIHRoZW4gdGhlIGxvb2t1cCBtZXRob2Qgd2lsbCBiZSB3b3JraW5nIGFuZCB0aGUgT1RQIHdpbGwgYmUgc2hvd24gb25seSBpZiBuZWVkZWRcbiAgICAgKiBJZiB1c2VyIGNhbmNlbHMgdGhlIE9QVCB0aGVuIE9UUCB3aWxsIG5vdCBiZSB0cmlnZ2VyZWQgYWZ0ZXIgcGFnZSByZWZyZXNoXG4gICAgICpcbiAgICAgKi9cbiAgICB1cGRhdGVTdG9yYWdlU2Vzc2lvbklkKHNlc3Npb25JZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGV4cGlyZXMgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIGV4cGlyZXMuc2V0RGF0ZShleHBpcmVzLmdldERhdGUoKSArIDE0KTsgLy8gMiB3ZWVrcyBleHBpcnlcblxuICAgICAgICBjb25zdCBjb29raWVzT3B0aW9uID0ge1xuICAgICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfTtcblxuICAgICAgICBDb29raWVTdG9yYWdlLnNldCgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJywgc2Vzc2lvbklkLCBjb29raWVzT3B0aW9uKTtcbiAgICB9XG5cbiAgICByZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk6IHZvaWQge1xuICAgICAgICBDb29raWVTdG9yYWdlLnJlbW92ZSgnYmMtZmFzdGxhbmUtc2Vzc2lvbklkJyk7XG4gICAgfVxuXG4gICAgZ2V0U3RvcmFnZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQ29va2llU3RvcmFnZS5nZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpIHx8ICcnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogJ21hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEnIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3I6XG4gICAgICogLSBtYXBwaW5nIFBheVBhbCBGYXN0bGFuZSBQcm9maWxlIGRhdGEgdG8gQkMgZGF0YSBzaGFwZVxuICAgICAqIC0gcmV0dXJuaW5nIG1hcHBlZCBkYXRhIHRvIHVzZSBmb3IgdXBkYXRpbmcgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgc3RhdGUgYW5kXG4gICAgICogdXBkYXRlIHNoaXBwaW5nIGFuZCBiaWxsaW5nIGFkZHJlc3Nlc1xuICAgICAqXG4gICAgICovXG4gICAgbWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQ6IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgKTogUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YU1hcHBpbmdSZXN1bHQge1xuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIHByb2ZpbGVEYXRhIH0gPSBhdXRoZW50aWNhdGlvblJlc3VsdDtcblxuICAgICAgICBjb25zdCBwYXlwYWxCaWxsaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5jYXJkPy5wYXltZW50U291cmNlPy5jYXJkPy5iaWxsaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsU2hpcHBpbmdBZGRyZXNzID0gcHJvZmlsZURhdGE/LnNoaXBwaW5nQWRkcmVzcztcbiAgICAgICAgY29uc3QgcGF5cGFsUHJvZmlsZU5hbWUgPSBwcm9maWxlRGF0YT8ubmFtZTtcbiAgICAgICAgY29uc3QgcGF5cGFsSW5zdHJ1bWVudCA9IHByb2ZpbGVEYXRhPy5jYXJkO1xuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHBheXBhbFNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MubmFtZSxcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5waG9uZU51bWJlcixcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzICYmIHBheXBhbFByb2ZpbGVOYW1lXG4gICAgICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNBZGRyZXNzKFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFByb2ZpbGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcz8ucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRzID0gcGF5cGFsSW5zdHJ1bWVudFxuICAgICAgICAgICAgPyB0aGlzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KG1ldGhvZElkLCBwYXlwYWxJbnN0cnVtZW50KVxuICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBjb25zdCBhZGRyZXNzZXMgPSB0aGlzLmZpbHRlckFkZHJlc3Nlcyhbc2hpcHBpbmdBZGRyZXNzLCBiaWxsaW5nQWRkcmVzc10pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlOlxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgfHwgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLlVOUkVDT0dOSVpFRCxcbiAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzLFxuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgaW5zdHJ1bWVudHMsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0luc3RydW1lbnQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGluc3RydW1lbnQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQsXG4gICAgKTogQ2FyZEluc3RydW1lbnRbXSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIHBheW1lbnRTb3VyY2UgfSA9IGluc3RydW1lbnQ7XG4gICAgICAgIGNvbnN0IHsgYnJhbmQsIGV4cGlyeSwgbGFzdERpZ2l0cyB9ID0gcGF5bWVudFNvdXJjZS5jYXJkO1xuXG4gICAgICAgIGNvbnN0IFtleHBpcnlZZWFyLCBleHBpcnlNb250aF0gPSBleHBpcnkuc3BsaXQoJy0nKTtcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJpZ3BheVRva2VuOiBpZCxcbiAgICAgICAgICAgICAgICBicmFuZCxcbiAgICAgICAgICAgICAgICBkZWZhdWx0SW5zdHJ1bWVudDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXhwaXJ5TW9udGgsXG4gICAgICAgICAgICAgICAgZXhwaXJ5WWVhcixcbiAgICAgICAgICAgICAgICBpaW46ICcnLFxuICAgICAgICAgICAgICAgIGxhc3Q0OiBsYXN0RGlnaXRzLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRydXN0ZWRTaGlwcGluZ0FkZHJlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGU6IFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUuUEFOLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXJkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgbWFwQmNUb1BheVBhbEFkZHJlc3MoYWRkcmVzcz86IEFkZHJlc3MpOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3Mge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcz8uY29tcGFueSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3NMaW5lMTogYWRkcmVzcz8uYWRkcmVzczEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTI6IGFkZHJlc3M/LmFkZHJlc3MyIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMTogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCBhZGRyZXNzPy5zdGF0ZU9yUHJvdmluY2UgfHwgJycsXG4gICAgICAgICAgICBhZG1pbkFyZWEyOiBhZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogYWRkcmVzcz8ucG9zdGFsQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBtYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgYWRkcmVzczogUGF5UGFsRmFzdGxhbmVBZGRyZXNzLFxuICAgICAgICBwcm9maWxlTmFtZTogUGF5UGFsRmFzdGxhbmVQcm9maWxlTmFtZSxcbiAgICAgICAgcGhvbmU/OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVQaG9uZSxcbiAgICAgICAgY3VzdG9tRmllbGRzPzogQ3VzdG9tZXJBZGRyZXNzWydjdXN0b21GaWVsZHMnXSxcbiAgICApOiBDdXN0b21lckFkZHJlc3Mge1xuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCBsYXN0TmFtZV0gPSBwcm9maWxlTmFtZS5mdWxsTmFtZS5zcGxpdCgnICcpO1xuXG4gICAgICAgIGNvbnN0IHBob25lRGF0YSA9IHtcbiAgICAgICAgICAgIG5hdGlvbmFsTnVtYmVyOiBwaG9uZT8ubmF0aW9uYWxOdW1iZXIgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogcGhvbmU/LmNvdW50cnlDb2RlIHx8ICcnLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHR5cGU6ICdwYXlwYWwtYWRkcmVzcycsXG4gICAgICAgICAgICBmaXJzdE5hbWU6IHByb2ZpbGVOYW1lLmZpcnN0TmFtZSB8fCBmaXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogcHJvZmlsZU5hbWUubGFzdE5hbWUgfHwgbGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiBhZGRyZXNzLmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzTGluZTEsXG4gICAgICAgICAgICBhZGRyZXNzMjogYWRkcmVzcy5hZGRyZXNzTGluZTIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmFkbWluQXJlYTIsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3MuYWRtaW5BcmVhMSxcbiAgICAgICAgICAgIGNvdW50cnk6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsIC8vIFRPRE86IHVwZGF0ZSBjb3VudHJ5IHdpdGggdmFsaWQgbmFtaW5nXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHBob25lOiBwaG9uZURhdGEuY291bnRyeUNvZGUgKyBwaG9uZURhdGEubmF0aW9uYWxOdW1iZXIsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IGN1c3RvbUZpZWxkcyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBmaWx0ZXJpbmcgUGF5UGFsIEZhc3RsYW5lIGFkZHJlc3NlcyBpZiB0aGV5IGFyZSB0aGUgc2FtZVxuICAgICAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIGFkZHJlc3NlcyB0byB1c2UgdGhlbSBmb3Igc2hpcHBpbmcgYW5kL29yIGJpbGxpbmcgYWRkcmVzcyBzZWxlY3Rpb25zXG4gICAgICogc28gdGhlIGN1c3RvbWVyIHdpbGwgYmUgYWJsZSB0byB1c2UgYWRkcmVzc2VzIGZyb20gUGF5UGFsIEZhc3RsYW5lIGluIGNoZWNrb3V0IGZsb3dcbiAgICAgKlxuICAgICAqL1xuICAgIGZpbHRlckFkZHJlc3NlcyhhZGRyZXNzZXM6IEFycmF5PEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZD4pOiBDdXN0b21lckFkZHJlc3NbXSB7XG4gICAgICAgIHJldHVybiBhZGRyZXNzZXMucmVkdWNlKFxuICAgICAgICAgICAgKGN1c3RvbWVyQWRkcmVzc2VzOiBDdXN0b21lckFkZHJlc3NbXSwgY3VycmVudEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyQWRkcmVzc2VzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IHNhbWVBZGRyZXNzSW5UaGVBcnJheSA9IGN1c3RvbWVyQWRkcmVzc2VzLnNvbWUoKGN1c3RvbWVyQWRkcmVzcykgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0VxdWFsQWRkcmVzc2VzKGN1c3RvbWVyQWRkcmVzcywgY3VycmVudEFkZHJlc3MpLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2FtZUFkZHJlc3NJblRoZUFycmF5XG4gICAgICAgICAgICAgICAgICAgID8gY3VzdG9tZXJBZGRyZXNzZXNcbiAgICAgICAgICAgICAgICAgICAgOiBbLi4uY3VzdG9tZXJBZGRyZXNzZXMsIGN1cnJlbnRBZGRyZXNzXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbXSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzRXF1YWxBZGRyZXNzZXMoXG4gICAgICAgIGZpcnN0QWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICAgICBzZWNvbmRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MsXG4gICAgKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBpc0VxdWFsKHRoaXMubm9ybWFsaXplQWRkcmVzcyhmaXJzdEFkZHJlc3MpLCB0aGlzLm5vcm1hbGl6ZUFkZHJlc3Moc2Vjb25kQWRkcmVzcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplQWRkcmVzcyhhZGRyZXNzOiBDdXN0b21lckFkZHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG9taXQoYWRkcmVzcywgWydpZCcsICdwaG9uZSddKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCk6IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIHtcbiAgICByZXR1cm4gbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCk7XG59XG4iLCJpbXBvcnQgeyBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQgeyBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLCBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB9IGZyb20gJy4uL2luZGV4JztcblxuZnVuY3Rpb24gaXNJbnZhbGlkU3R5bGVPcHRpb24oc3R5bGVPcHRpb246IHVua25vd24pIHtcbiAgICByZXR1cm4gdHlwZW9mIHN0eWxlT3B0aW9uICE9PSAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgc3R5bGVTZXR0aW5ncz86IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsXG4gICAgdWlTdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbikge1xuICAgIGlmICghdWlTdHlsZXMgJiYgIXN0eWxlU2V0dGluZ3MpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYW5VcEZhc3RsYW5lU3R5bGVzKG1lcmdlRmFzdGxhbmVTdHlsZXMoc3R5bGVTZXR0aW5ncywgdWlTdHlsZXMpKTtcbn1cblxuZnVuY3Rpb24gbWVyZ2VGYXN0bGFuZVN0eWxlcyhcbiAgICBzdHlsZVNldHRpbmdzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyxcbiAgICB1aVN0eWxlcz86IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuKTogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvb3Q6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8ucm9vdD8uYmFja2dyb3VuZENvbG9yUHJpbWFyeSxcbiAgICAgICAgICAgIGVycm9yQ29sb3I6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRXJyb3JDb2xvciB8fCB1aVN0eWxlcz8ucm9vdD8uZXJyb3JDb2xvcixcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSB8fCB1aVN0eWxlcz8ucm9vdD8uZm9udEZhbWlseSxcbiAgICAgICAgICAgIGZvbnRTaXplQmFzZTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRTaXplIHx8IHVpU3R5bGVzPy5yb290Py5mb250U2l6ZUJhc2UsXG4gICAgICAgICAgICBwYWRkaW5nOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmcgfHwgdWlTdHlsZXM/LnJvb3Q/LnBhZGRpbmcsXG4gICAgICAgICAgICBwcmltYXJ5Q29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IgfHwgdWlTdHlsZXM/LnJvb3Q/LnByaW1hcnlDb2xvcixcbiAgICAgICAgfSxcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMgfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJSYWRpdXMsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvciB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlckNvbG9yLFxuICAgICAgICAgICAgZm9jdXNCb3JkZXJDb2xvcjpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2UgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8uaW5wdXQ/LmZvY3VzQm9yZGVyQ29sb3IsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LmlucHV0Py5iYWNrZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICBib3JkZXJXaWR0aDpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJXaWR0aCB8fCB1aVN0eWxlcz8uaW5wdXQ/LmJvcmRlcldpZHRoLFxuICAgICAgICAgICAgdGV4dENvbG9yQmFzZTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUlucHV0U2V0dGluZ3NUZXh0Q29sb3JCYXNlIHx8IHVpU3R5bGVzPy5pbnB1dD8udGV4dENvbG9yQmFzZSxcbiAgICAgICAgfSxcbiAgICAgICAgdG9nZ2xlOiB7XG4gICAgICAgICAgICBjb2xvclByaW1hcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeSB8fCB1aVN0eWxlcz8udG9nZ2xlPy5jb2xvclByaW1hcnksXG4gICAgICAgICAgICBjb2xvclNlY29uZGFyeTpcbiAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnkgfHxcbiAgICAgICAgICAgICAgICB1aVN0eWxlcz8udG9nZ2xlPy5jb2xvclNlY29uZGFyeSxcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgICAgIGNvbG9yOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvciB8fCB1aVN0eWxlcz8udGV4dD8uYm9keT8uY29sb3IsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5ib2R5Py5mb250U2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgY29sb3I6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5jYXB0aW9uPy5jb2xvcixcbiAgICAgICAgICAgICAgICBmb250U2l6ZTpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUgfHxcbiAgICAgICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRleHQ/LmNhcHRpb24/LmZvbnRTaXplLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYnJhbmRpbmc6IHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncyB8fCB1aVN0eWxlcz8uYnJhbmRpbmcsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY2xlYW5VcEZhc3RsYW5lU3R5bGVzKHN0eWxlczogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24pIHtcbiAgICBjb25zdCBmYXN0bGFuZVN0eWxlczogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24gPSB7fTtcblxuICAgIGNvbnN0IHJvb3QgPSBvbWl0Qnkoc3R5bGVzLnJvb3QsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCBpbnB1dCA9IG9taXRCeShzdHlsZXMuaW5wdXQsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0b2dnbGUgPSBvbWl0Qnkoc3R5bGVzLnRvZ2dsZSwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRleHRCb2R5ID0gb21pdEJ5KHN0eWxlcy50ZXh0Py5ib2R5LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdGV4dENhcHRpb24gPSBvbWl0Qnkoc3R5bGVzLnRleHQ/LmNhcHRpb24sIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCBicmFuZGluZyA9IHN0eWxlcy5icmFuZGluZztcblxuICAgIGlmIChPYmplY3Qua2V5cyhyb290KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMucm9vdCA9IHJvb3Q7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGlucHV0KS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMuaW5wdXQgPSBpbnB1dDtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModG9nZ2xlKS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudG9nZ2xlID0gdG9nZ2xlO1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0ZXh0Qm9keSkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQgPSB7fTtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dC5ib2R5ID0gdGV4dEJvZHk7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRleHRDYXB0aW9uKS5sZW5ndGgpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMudGV4dCA9IHtcbiAgICAgICAgICAgIC4uLmZhc3RsYW5lU3R5bGVzLnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQuY2FwdGlvbiA9IHRleHRDYXB0aW9uO1xuICAgIH1cblxuICAgIGlmIChicmFuZGluZykge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy5icmFuZGluZyA9IGJyYW5kaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBmYXN0bGFuZVN0eWxlcztcbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLy8gVE9ETzogdXBkYXRlIFBheVBhbENvbm5lY3RDdXN0b21lciB3aXRoIFBheVBhbEZhc3RsYW5lQ3VzdG9tZXJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEZlYXR1cmVzIHtcbiAgICBbZmVhdHVyZU5hbWU6IHN0cmluZ106IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzRXhwZXJpbWVudEVuYWJsZWQoXG4gICAgZmVhdHVyZXM6IEZlYXR1cmVzLFxuICAgIGV4cGVyaW1lbnROYW1lOiBzdHJpbmcsXG4gICAgZmFsbGJhY2tWYWx1ZSA9IHRydWUsXG4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmVhdHVyZXNbZXhwZXJpbWVudE5hbWVdID8/IGZhbGxiYWNrVmFsdWU7XG59XG4iLCJpbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgZ2V0RmFzdGxhbmVTdHlsZXMsXG4gICAgaXNCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yLFxuICAgIGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyxcbiAgICBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgIFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsU2RrSGVscGVyLFxuICAgIFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICBURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIENhcmRJbnN0cnVtZW50LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgaXNFeHBlcmltZW50RW5hYmxlZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgeyBMaWFiaWxpdHlTaGlmdEVudW0gfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHBheXBhbENvbXBvbmVudE1ldGhvZHM/OiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzO1xuICAgIHByaXZhdGUgdGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lU2RrPzogUGF5UGFsRmFzdGxhbmVTZGs7XG4gICAgcHJpdmF0ZSBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZT86IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICBwcml2YXRlIG1ldGhvZElkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1JlcXVlc3RTZW5kZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGs6IFBheVBhbFNka0hlbHBlcixcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlsczogQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZWZhdWx0IG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tZXRob2RJZCA9IG1ldGhvZElkO1xuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUgPSBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25Jbml0IHx8XG4gICAgICAgICAgICB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUub25Jbml0ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uSW5pdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkNoYW5nZSB8fFxuICAgICAgICAgICAgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uQ2hhbmdlICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uQ2hhbmdlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSwgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgdGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kO1xuXG4gICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVN0eWxpbmcgPSBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWRcbiAgICAgICAgICAgID8gcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5mYXN0bGFuZVN0eWxlc1xuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICBjb25zdCBmYXN0bGFuZVN0eWxlcyA9IGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTdHlsaW5nLFxuICAgICAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmU/LnN0eWxlcyxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAhIWlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBmYXN0bGFuZVN0eWxlcyxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3coKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKTtcblxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkluaXQoKGNvbnRhaW5lcjogc3RyaW5nKSA9PlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50KGNvbnRhaW5lciksXG4gICAgICAgICk7XG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lLm9uQ2hhbmdlKCgpID0+XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UobWV0aG9kSWQpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSwgbWV0aG9kSWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRmxvdyA9IHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IGlzVmF1bHRlZEZsb3dcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4oXG4gICAgICAgICAgICAgICAgcGF5bWVudFBheWxvYWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBpc0JpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IoZXJyb3IpICYmXG4gICAgICAgICAgICAgICAgZXJyb3IucmVzcG9uc2UubmFtZSA9PT0gJ0lOVkFMSURfUkVRVUVTVCdcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0RXJyb3IgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAncGF5bWVudC5lcnJvcnMuaW52YWxpZF9yZXF1ZXN0X2Vycm9yJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihpbnZhbGlkUmVxdWVzdEVycm9yKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lICE9PSAnRmFzdGxhbmVFcnJvcicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBdXRoZW50aWNhdGlvbiBmbG93IG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZUN1c3RvbWVyID0gaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyKHBheW1lbnRQcm92aWRlckN1c3RvbWVyKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuZ2V0U3RvcmFnZVNlc3Npb25JZCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFjdXN0b21lci5pc0d1ZXN0IHx8XG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhcGF5cGFsRmFzdGxhbmVDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZSAmJiBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9PT0gY2FydC5pZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5sb29rdXBDdXN0b21lck9yVGhyb3coY3VzdG9tZXJFbWFpbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVzdWx0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21lckNvbnRleHRJZCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIGFkZHJlc3NlcywgaW5zdHJ1bWVudHMgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkID1cbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRDtcblxuICAgICAgICAgICAgaWYgKGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy51cGRhdGVTdG9yYWdlU2Vzc2lvbklkKGNhcnQuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQmlnQ29tbWVyY2VQYXltZW50cyBGYXN0bGFuZSBDYXJkIENvbXBvbmVudCByZW5kZXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwaG9uZSA9IGJpbGxpbmdBZGRyZXNzLnBob25lO1xuICAgICAgICBjb25zdCBmdWxsTmFtZSA9IGAke2JpbGxpbmdBZGRyZXNzLmZpcnN0TmFtZX0gJHtiaWxsaW5nQWRkcmVzcy5sYXN0TmFtZX1gLnRyaW0oKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZSA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgY2FyZENvbXBvbmVudE9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBjYXJkaG9sZGVyTmFtZToge1xuICAgICAgICAgICAgICAgICAgICBwcmVmaWxsOiBmdWxsTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLihwaG9uZSAmJiB7XG4gICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaWxsOiBwaG9uZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzID0gYXdhaXQgcGF5cGFsRmFzdGxhbmUuRmFzdGxhbmVDYXJkQ29tcG9uZW50KFxuICAgICAgICAgICAgY2FyZENvbXBvbmVudE9wdGlvbnMsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50KGNvbnRhaW5lcj86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxDb21wb25lbnRNZXRob2RzID0gdGhpcy5nZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byByZW5kZXIgY2FyZCBjb21wb25lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBheXBhbENvbXBvbmVudE1ldGhvZHMucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxDb21wb25lbnRNZXRob2RzT3JUaHJvdygpOiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheW1lbnQgUGF5bG9hZCBwcmVwYXJhdGlvbiBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogVmF1bHRlZEluc3RydW1lbnQsXG4gICAgKTogUHJvbWlzZTxQYXltZW50PFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQ+PiB7XG4gICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSBwYXltZW50RGF0YTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgaXMzRFNFbmFibGVkID1cbiAgICAgICAgICAgIHRoaXMuaXNCaWdjb21tZXJjZVBheW1lbnRzRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCkgJiZcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuY29uZmlnLmlzM2RzRW5hYmxlZDtcblxuICAgICAgICBjb25zdCBub25jZSA9IGlzM0RTRW5hYmxlZCA/IGF3YWl0IHRoaXMuZ2V0M0RTTm9uY2UoaW5zdHJ1bWVudElkKSA6IGluc3RydW1lbnRJZDtcblxuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKG5vbmNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2Zhc3RsYW5lX3Rva2VuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW46IG5vbmNlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgKTogUHJvbWlzZTxQYXltZW50PFBheVBhbEZhc3RsYW5lUGF5bWVudEZvcm1hdHRlZFBheWxvYWQ+PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0UGF5bWVudFRva2VuIH0gPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgZ2V0UGF5bWVudFRva2VuKHtcbiAgICAgICAgICAgIG5hbWU6IHsgZnVsbE5hbWUgfSxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMubWFwQmNUb1BheVBhbEFkZHJlc3MoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBpczNEU0VuYWJsZWQgPVxuICAgICAgICAgICAgdGhpcy5pc0JpZ2NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVRocmVlRFNBdmFpbGFibGUoKSAmJlxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIGNvbnN0IG5vbmNlID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpZCkgOiBpZDtcblxuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKG5vbmNlKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIC4uLnBheW1lbnREYXRhLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhdGVPcmRlcihpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHN0YXRlLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgaWYgKHRoaXMubWV0aG9kSWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgICAgICAgICBmYXN0bGFuZVRva2VuOiBpZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogM0RTZWN1cmUgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldDNEU05vbmNlKG5vbmNlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXIgPSBzdGF0ZS5nZXRPcmRlck9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY2hlY2tvdXRVcmwgPSBzdGF0ZS5nZXRTdG9yZUNvbmZpZ09yVGhyb3coKS5saW5rcy5jaGVja291dExpbms7XG5cbiAgICAgICAgY29uc3QgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQgPSB0aGlzLnBheXBhbEZhc3RsYW5lU2RrPy5UaHJlZURvbWFpblNlY3VyZUNsaWVudDtcblxuICAgICAgICBpZiAoIXRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRocmVlRG9tYWluU2VjdXJlUGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogb3JkZXIub3JkZXJBbW91bnQudG9GaXhlZCgyKSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICBub25jZSxcbiAgICAgICAgICAgIHRocmVlRFNSZXF1ZXN0ZWQ6IHRoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCA9PT0gVERTZWN1cmVWZXJpZmljYXRpb25NZXRob2QuQWx3YXlzLFxuICAgICAgICAgICAgdHJhbnNhY3Rpb25Db250ZXh0OiB7XG4gICAgICAgICAgICAgICAgZXhwZXJpZW5jZV9jb250ZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZTogJ2VuLVVTJyxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuX3VybDogY2hlY2tvdXRVcmwsXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbF91cmw6IGNoZWNrb3V0VXJsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSA9IGF3YWl0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50LmlzRWxpZ2libGUoXG4gICAgICAgICAgICB0aHJlZURvbWFpblNlY3VyZVBhcmFtZXRlcnMsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy50aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kID09PSBURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZC5BbHdheXMgJiZcbiAgICAgICAgICAgICFpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVGhyZWVEb21haW5TZWN1cmVFbGlnaWJsZSkge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0LFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgbm9uY2U6IHRocmVlRFNOb25jZSxcbiAgICAgICAgICAgIH0gPSBhd2FpdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudC5zaG93KCk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5Vbmtub3duIHx8XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLkVycm9yZWQgfHxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlID09PSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ2FuY2VsbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLlN1Y2NlZWRlZCAmJlxuICAgICAgICAgICAgICAgIFtMaWFiaWxpdHlTaGlmdEVudW0uWWVzLCBMaWFiaWxpdHlTaGlmdEVudW0uUG9zc2libGVdLmluY2x1ZGVzKGxpYWJpbGl0eVNoaWZ0KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRocmVlRFNOb25jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBub25jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJpZ0NvbW1lcmNlUGF5bWVudHMgRmFzdGxhbmUgaW5zdHJ1bWVudCBjaGFuZ2VcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPENhcmRJbnN0cnVtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHBheXBhbEF4b1NkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMuZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25DaGFuZ2VkLCBzZWxlY3RlZENhcmQgfSA9IGF3YWl0IHBheXBhbEF4b1Nkay5wcm9maWxlLnNob3dDYXJkU2VsZWN0b3IoKTtcblxuICAgICAgICBpZiAoc2VsZWN0aW9uQ2hhbmdlZCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lQ3VzdG9tZXIgPSBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIocGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIpXG4gICAgICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5zdHJ1bWVudCA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FyZCxcbiAgICAgICAgICAgICAgICApWzBdO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIC4uLnBheXBhbEZhc3RsYW5lQ3VzdG9tZXIsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudHM6IFtzZWxlY3RlZEluc3RydW1lbnRdLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZEluc3RydW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQmlnY29tbWVyY2UgUGF5bWVudHMgRmFzdGxhbmUgZXhwZXJpbWVudHMgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNCaWdjb21tZXJjZVBheW1lbnRzRmFzdGxhbmVUaHJlZURTQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBmZWF0dXJlcyA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3MuZmVhdHVyZXM7XG5cbiAgICAgICAgcmV0dXJuIGlzRXhwZXJpbWVudEVuYWJsZWQoZmVhdHVyZXMsICdQUk9KRUNULTcwODAuYmNwX2Zhc3RsYW5lX3RocmVlX2RzJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lPy5vbkVycm9yICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkVycm9yID09PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZS5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvciB7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICByZXNwb25zZToge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNCaWdjb21tZXJjZUZhc3RsYW5lUmVxdWVzdEVycm9yKFxuICAgIGVycm9yOiB1bmtub3duLFxuKTogZXJyb3IgaXMgQmlnY29tbWVyY2VGYXN0bGFuZVJlcXVlc3RFcnJvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICAnbWVzc2FnZScgaW4gZXJyb3IgJiZcbiAgICAgICAgJ3Jlc3BvbnNlJyBpbiBlcnJvciAmJlxuICAgICAgICAnbmFtZScgaW4gKGVycm9yIGFzIEJpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IpLnJlc3BvbnNlXG4gICAgKTtcbn1cbiIsImltcG9ydCB7IGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgY29uc3QgeyBnZXRIb3N0IH0gPSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICByZXR1cm4gbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNSZXF1ZXN0U2VuZGVyKGNyZWF0ZVJlcXVlc3RTZW5kZXIoeyBob3N0OiBnZXRIb3N0KCkgfSkpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUnIH0sIC8vIEJpZ0NvbW1lcmNlUGF5bWVudHMgRmFzdGxhbmUgcmVsYXRlcyB0byAnYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUnIG1ldGhvZCBpZFxuXSk7XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIHRyeSB0byBjYWxsIGEgbWV0aG9kIHRoYXQgaXMgb25seSBhIHN0dWIgYW5kIGhhcyBub3RcbiAqIGJlZW4gZnVsbHkgaW1wbGVtZW50ZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdEltcGxlbWVudGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ05vdCBpbXBsZW1lbnRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTm90SW1wbGVtZW50ZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdub3RfaW1wbGVtZW50ZWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zPzogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxTZGtIZWxwZXI6IFBheVBhbFNka0hlbHBlcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSwgb3JkZXJJZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgYmFubmVyQ29udGFpbmVySWQsIGNvbnRhaW5lciB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI7XG5cbiAgICAgICAgaWYgKGJhbm5lckNvbnRhaW5lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmFubmVyQ29udGFpbmVySWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIGJhbm5lciB3aXRob3V0IHZhbGlkIGJhbm5lciBjb250YWluZXIgSUQuJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPVxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uICYmXG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24uZmluZCgoeyBpZCB9KSA9PiBpZCA9PT0gJ2NoZWNrb3V0Jyk7XG5cbiAgICAgICAgICAgIGlmICghYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IGF3YWl0IHRoaXMucGF5cGFsU2RrSGVscGVyLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBCaWdDb21tZXJjZVBheW1lbnRzIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciBCaWdDb21tZXJjZVBheW1lbnRzIGJ1dHRvbi5cbiAgICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBjb250YWluZXI/LnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICB0aGlzLm9yZGVySWQsXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnM/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyPy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlnQ29tbWVyY2VTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25FcnJvciwgb25SZW5kZXJCdXR0b24sIG9uVmFsaWRhdGUsIHN1Ym1pdEZvcm0gfSA9XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjtcblxuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlcyA9IFtiaWdDb21tZXJjZVNkay5GVU5ESU5HLlBBWUxBVEVSLCBiaWdDb21tZXJjZVNkay5GVU5ESU5HLkNSRURJVF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zID0gYmlnQ29tbWVyY2VTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLmlzRWxpZ2libGUoKSAmJlxuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UgPT09IGJpZ0NvbW1lcmNlU2RrLkZVTkRJTkcuUEFZTEFURVJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLmlzRWxpZ2libGUoKSAmJlxuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UgPT09IGJpZ0NvbW1lcmNlU2RrLkZVTkRJTkcuQ1JFRElUXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgYEJpZ0NvbW1lcmNlUGF5bWVudHMgJHtmdW5kaW5nU291cmNlfSBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIHVzZSBCaWdDb21tZXJjZVBheW1lbnRzIENoZWNrb3V0IGluc3RlYWQuYCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucy5yZW5kZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvblZhbGlkYXRlJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcmVzb2x2ZSwgcmVqZWN0IH0gPSBhY3Rpb25zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAob25WYWxpZGF0ZSAmJiB0eXBlb2Ygb25WYWxpZGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYXdhaXQgb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBpZiAoc3VibWl0Rm9ybSAmJiB0eXBlb2Ygc3VibWl0Rm9ybSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihcbiAgICAgICAgZXJyb3I6IEVycm9yLFxuICAgICAgICBvbkVycm9yOiBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlciBQYXkgTGF0ZXIgTWVzc2FnZXNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXM6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBiYW5uZXJDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdwYXltZW50JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucykucmVuZGVyKGAjJHtiYW5uZXJDb250YWluZXJJZH1gKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtY29uc3RhbnRzJztcbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicgfSxcbl0pO1xuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIHJlcXVlc3QgZmFpbHMgdG8gY29tcGxldGUgd2l0aGluIGl0cyByZXF1aXJlZCB0aW1lZnJhbWVcbiAqIGJlY2F1c2Ugb2YgYSBuZXR3b3JrIGlzc3VlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lb3V0RXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgcmVxdWVzdCBoYXMgdGltZWQgb3V0IG9yIGFib3J0ZWQuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICd0aW1lb3V0JztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBUaW1lb3V0RXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBCaXJ0aERhdGUsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtcmF0ZXBheS1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5jb25zdCBQT0xMSU5HX0lOVEVSVkFMID0gMzAwMDtcbmNvbnN0IE1BWF9QT0xMSU5HX1RJTUUgPSAzMDAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGd1aWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5PzogQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcG9sbGluZ1RpbWVyID0gMDtcbiAgICBwcml2YXRlIHN0b3BQb2xsaW5nID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICBwcml2YXRlIHBvbGxpbmdJbnRlcnZhbDogbnVtYmVyID0gUE9MTElOR19JTlRFUlZBTCxcbiAgICAgICAgcHJpdmF0ZSBtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lOiBudW1iZXIgPSBNQVhfUE9MTElOR19USU1FLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBnYXRld2F5SWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5IH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIsIGxvYWRpbmdDb250YWluZXJJZCB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheTtcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbGVnYWxUZXh0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubGVnYWxUZXh0Q29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFsb2FkaW5nQ29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5sb2FkaW5nQ29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBsb2FkaW5nQ29udGFpbmVySWQ7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHsgbWVyY2hhbnRJZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXJjaGFudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBtZXJjaGFudElkIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlRnJhdWROZXRTY3JpcHQobWVyY2hhbnRJZCwgbWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgdGhpcy5sb2FkRnJhdWRuZXRDb25maWcoKTtcblxuICAgICAgICB0aGlzLnJlbmRlckxlZ2FsVGV4dChsZWdhbFRleHRDb250YWluZXIsIGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgY29uc3QgeyBnZXRGaWVsZHNWYWx1ZXMgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnZXRGaWVsZHNWYWx1ZXMgfHwgdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdldEZpZWxkc1ZhbHVlc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICB7IG1ldGFkYXRhSWQ6IHRoaXMuZ3VpZCB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgeyByYXRlcGF5QmlydGhEYXRlLCByYXRlcGF5UGhvbmVOdW1iZXIsIHJhdGVwYXlQaG9uZUNvdW50cnlDb2RlIH0gPVxuICAgICAgICAgICAgICAgIGdldEZpZWxkc1ZhbHVlcygpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGRldmljZV9pbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJhdGVfcGF5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaXJ0aF9kYXRlOiB0aGlzLm5vcm1hbGl6ZURhdGUocmF0ZXBheUJpcnRoRGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdGlvbmFsX251bWJlcjogcmF0ZXBheVBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnlfY29kZTogcmF0ZXBheVBob25lQ291bnRyeUNvZGUuc3BsaXQoJysnKVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5nYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoX3Jlc29sdmUsIHJlamVjdCkgPT4gcmVqZWN0KCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIgfSA9IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSB8fCB7fTtcbiAgICAgICAgY29uc3QgZnJhdWROZXRTY3JpcHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1pZD1cImZyYXVkbmV0U2NyaXB0XCJdJylbMF07XG4gICAgICAgIGNvbnN0IGZyYXVkTmV0Q29uZmlnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJmcmF1ZG5ldENvbmZpZ1wiXScpWzBdO1xuXG4gICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgIGZyYXVkTmV0U2NyaXB0LnJlbW92ZSgpO1xuICAgICAgICBmcmF1ZE5ldENvbmZpZy5yZW1vdmUoKTtcblxuICAgICAgICBpZiAobGVnYWxUZXh0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGVnYWxUZXh0Q29udGFpbmVyKTtcblxuICAgICAgICAgICAgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudD8ucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemVEYXRlKGRhdGU6IEJpcnRoRGF0ZSkge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gdGhpcy5mb3JtYXREYXRlKGRhdGUuZ2V0RGF0ZSgpKTtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkTW9udGggPSB0aGlzLmZvcm1hdERhdGUoZGF0ZS5nZXRNb250aCgpICsgMSk7XG5cbiAgICAgICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0tJHtmb3JtYXR0ZWRNb250aH0tJHtmb3JtYXR0ZWREYXRlfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXREYXRlKGRhdGU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtkYXRlIDwgMTAgPyAwIDogJyd9JHtkYXRlfWA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJMZWdhbFRleHQobGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudElkOiBzdHJpbmcsIGNvbnRhaW5lcjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lcklkID0gbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudElkO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJJZCA9IGNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChidXR0b25Db250YWluZXJJZCk7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lclBhcmVudCA9IGJ1dHRvbkNvbnRhaW5lcj8ucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgbGVnYWxUZXh0Q29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcbiAgICAgICAgbGVnYWxUZXh0Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCBsZWdhbFRleHRDb250YWluZXJJZCk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lclBhcmVudD8ucHJlcGVuZChsZWdhbFRleHRDb250YWluZXIpO1xuXG4gICAgICAgIGNvbnN0IGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsgPVxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcmF0ZVBheUJ1dHRvbiA9IGJpZ0NvbW1lcmNlUGF5bWVudHNTZGsuTGVnYWwoe1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogYmlnQ29tbWVyY2VQYXltZW50c1Nkay5MZWdhbC5GVU5ESU5HLlBBWV9VUE9OX0lOVk9JQ0UsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGVnYWxUZXh0Q29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChsZWdhbFRleHRDb250YWluZXJFbGVtZW50KSB7XG4gICAgICAgICAgICByYXRlUGF5QnV0dG9uLnJlbmRlcihgIyR7bGVnYWxUZXh0Q29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRcIiBhcmd1bWVudCBpcyBub3QgZm91bmQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5iaWdjb21tZXJjZV9wYXltZW50c19yYXRlcGF5IHx8IHt9O1xuXG4gICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkOiBzdHJpbmcsIG1ldGhvZElkOiBzdHJpbmcsIGdhdGV3YXlJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgY29uc3QgeyB0ZXN0TW9kZSB9ID0gcGF5bWVudE1ldGhvZC5jb25maWc7XG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdmbmNscycsICdmbnBhcmFtcy1kZWRlN2NjNS0xNWZkLTRjNzUtYTlmNC0zNmM0MzBlZTNhOTknKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRTY3JpcHQnKTtcbiAgICAgICAgdGhpcy5ndWlkID0gdGhpcy5nZW5lcmF0ZUdVSUQoKTtcblxuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IHtcbiAgICAgICAgICAgIGY6IHRoaXMuZ3VpZCxcbiAgICAgICAgICAgIHM6IGAke21lcmNoYW50SWR9X2NoZWNrb3V0LXBhZ2VgLFxuICAgICAgICAgICAgc2FuZGJveDogdGVzdE1vZGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShmcmF1ZE5ldENvbmZpZyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUdVSUQoKSB7XG4gICAgICAgIGxldCBndWlkID0gJyc7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCk7XG5cbiAgICAgICAgICAgIGd1aWQgKz0gY2hhcmFjdGVyc1tyYW5kb21JbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3VpZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRGcmF1ZG5ldENvbmZpZygpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsICdmcmF1ZG5ldENvbmZpZycpO1xuICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vYy5wYXlwYWwuY29tL2RhL3IvZmIuanMnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWluaXRpYWxpemVTdHJhdGVneShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQb2xsaW5nIG1lY2hhbmlzbVxuICAgICAqXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHJlc29sdmVQcm9taXNlOiAoKSA9PiB2b2lkLFxuICAgICAgICByZWplY3RQcm9taXNlOiAoKSA9PiB2b2lkLFxuICAgICAgICBnYXRld2F5SWQ/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIHRoaXMucG9sbGluZ0ludGVydmFsKTtcblxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciArPSB0aGlzLnBvbGxpbmdJbnRlcnZhbDtcblxuICAgICAgICAgICAgY29uc3Qgb3JkZXJTdGF0dXMgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VNZXRhZGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaXNPcmRlckFwcHJvdmVkID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdTdG9wO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ0Vycm9yO1xuXG4gICAgICAgICAgICBpZiAoaXNPcmRlckFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG9sbGluZ0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc09yZGVyQXBwcm92ZWQgJiYgdGhpcy5wb2xsaW5nVGltZXIgPCB0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3RQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3JhdGVwYXk6IHRoaXMuYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xuICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciA9IDA7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNldFBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1jb25zdGFudHMnO1xuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUmF0ZVBheVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiB7IC4uLkxPQURJTkdfSU5ESUNBVE9SX1NUWUxFUywgcG9zaXRpb246ICdmaXhlZCcgfSxcbiAgICAgICAgfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNSYXRlUGF5UGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAnYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcycsIGlkOiAncmF0ZXBheScgfSxcbl0pO1xuIiwiLy8gY29waWVkIGZyb20gcGFja2FnZXMvY29yZS9zcmMvaG9zdGVkLWZvcm0vaG9zdGVkLWZpZWxkLXR5cGUudHNcblxuZW51bSBIb3N0ZWRGaWVsZFR5cGUge1xuICAgIENhcmRDb2RlID0gJ2NhcmRDb2RlJyxcbiAgICBDYXJkQ29kZVZlcmlmaWNhdGlvbiA9ICdjYXJkQ29kZVZlcmlmaWNhdGlvbicsXG4gICAgQ2FyZEV4cGlyeSA9ICdjYXJkRXhwaXJ5JyxcbiAgICBDYXJkTmFtZSA9ICdjYXJkTmFtZScsXG4gICAgQ2FyZE51bWJlciA9ICdjYXJkTnVtYmVyJyxcbiAgICBDYXJkTnVtYmVyVmVyaWZpY2F0aW9uID0gJ2NhcmROdW1iZXJWZXJpZmljYXRpb24nLFxuICAgIENhcmRFeHBpcnlWZXJpZmljYXRpb24gPSAnY2FyZEV4cGlyeVZlcmlmaWNhdGlvbicsXG59XG5cbmV4cG9ydCBkZWZhdWx0IEhvc3RlZEZpZWxkVHlwZTtcbiIsImltcG9ydCBIb3N0ZWRGaWVsZFR5cGUgZnJvbSAnLi9ob3N0ZWQtZmllbGQtdHlwZSc7XG5pbXBvcnQgeyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIH0gZnJvbSAnLi9ob3N0ZWQtZm9ybS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhcbiAgICBmaWVsZHM6IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAgfCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuKTogZmllbGRzIGlzIEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAge1xuICAgIHJldHVybiAoXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE5hbWUgaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5IGluIGZpZWxkc1xuICAgICk7XG59XG4iLCJpbXBvcnQgSG9zdGVkRmllbGRUeXBlIGZyb20gJy4vaG9zdGVkLWZpZWxkLXR5cGUnO1xuaW1wb3J0IHsgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCB9IGZyb20gJy4vaG9zdGVkLWZvcm0tb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKFxuICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4pOiBmaWVsZHMgaXMgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb24gaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbiBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlWZXJpZmljYXRpb24gaW4gZmllbGRzXG4gICAgKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgcGF5bWVudCBtZXRob2QgZXhwZXJpZW5jZXMgc29tZSBraW5kIG9mXG4gKiBmYWlsdXJlIChpLmUuOiBpdHMgY2xpZW50IGxpYnJhcnkgcmV0dXJucyBhIHJlamVjdGVkIHByb21pc2UpLiBBbmQgdGhlcmUgaXNcbiAqIG5vIG90aGVyIGVycm9yIHR5cGUgdGhhdCBpcyBtb3JlIHNwZWNpZmljIHRoYW4gdGhpcyBvbmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RGYWlsZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNsaWVudCBsaWJyYXJ5IG9mIGEgcGF5bWVudCBtZXRob2QgaGFzIHRocm93biBhbiB1bmV4cGVjdGVkIGVycm9yLicsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RGYWlsZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlIHtcbiAgICBDaGVja291dEJ1dHRvbk5vdEluaXRpYWxpemVkLFxuICAgIEN1c3RvbWVyTm90SW5pdGlhbGl6ZWQsXG4gICAgUGF5bWVudE5vdEluaXRpYWxpemVkLFxuICAgIFNoaXBwaW5nTm90SW5pdGlhbGl6ZWQsXG4gICAgU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCxcbn1cblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIGEgbWV0aG9kIHJlcXVpcmVzIGEgY2VydGFpbiBpbml0aWFsaXphdGlvbiBjYWxsIHRvIGJlXG4gKiBtYWRlIGZpcnN0LiBTb21lIG9iamVjdHMgY2FuIGJlIGNvbnN0cnVjdGVkIGJ1dCB0aGV5IGNhbm5vdCBiZSB1c2VkIHVudGlsIGFcbiAqIHNlcGFyYXRlIGluaXRpYWxpemF0aW9uIGNhbGwgaXMgbWFkZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW5pdGlhbGl6ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbml0aWFsaXplZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbml0aWFsaXplZCc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGN1c3RvbWVyIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHNoaXBwaW5nIHN0ZXAgb2YgY2hlY2tvdXQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgY2FzZSBOb3RJbml0aWFsaXplZEVycm9yVHlwZS5TcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjaGVja291dCBzcGFtIHByb3RlY3Rpb24gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcmVxdWlyZWQgY29tcG9uZW50IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuICAgIH1cbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyB7XG4gICAgW2tleTogc3RyaW5nXTogQXJyYXk8eyBtZXNzYWdlOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9Pjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEludmFsaWRGb3JtRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZGV0YWlsczogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzLCBtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHBheW1lbnQgZm9ybSBjb250YWlucyBpbnZhbGlkIGRhdGEuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRJbnZhbGlkRm9ybUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfaW52YWxpZF9mb3JtJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpc05pbCwgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIGlzQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXIsXG4gICAgUGF5UGFsU2RrSGVscGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucyxcbiAgICBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLFxuICAgIEhvc3RlZEZpZWxkQmx1ckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEVudGVyRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgSG9zdGVkRmllbGRUeXBlLFxuICAgIEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEsXG4gICAgSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YSxcbiAgICBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0NyZWRpdENhcmRGb3JtRmllbGRzLFxuICAgIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzLFxuICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UsXG4gICAgaXNWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBOb3RJbml0aWFsaXplZEVycm9yLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yLFxuICAgIFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyxcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkcyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc0NvbmZpZyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zLFxuICAgIExpYWJpbGl0eVNoaWZ0RW51bSxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1jcmVkaXQtY2FyZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgZXhlY3V0aW9uUGF5bWVudERhdGE/OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXTtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZEZvcm0/OiBib29sZWFuO1xuICAgIHByaXZhdGUgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0/OiBib29sZWFuO1xuXG4gICAgcHJpdmF0ZSBjYXJkRmllbGRzPzogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHM7XG4gICAgcHJpdmF0ZSBjdnZGaWVsZD86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgcHJpdmF0ZSBleHBpcnlGaWVsZD86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgcHJpdmF0ZSBudW1iZXJGaWVsZD86IEJpZ0NvbW1lcmNlUGF5bWVudHNGaWVsZHM7XG4gICAgcHJpdmF0ZSBuYW1lRmllbGQ/OiBCaWdDb21tZXJjZVBheW1lbnRzRmllbGRzO1xuXG4gICAgcHJpdmF0ZSBob3N0ZWRGb3JtT3B0aW9ucz86IEhvc3RlZEZvcm1PcHRpb25zO1xuICAgIHByaXZhdGUgcmV0dXJuZWRPcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcmV0dXJuZWRWYXVsdGVkVG9rZW4/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1NkazogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzOiBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbk9wdGlvbnMgPSBiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcztcblxuICAgICAgICBjb25zdCB7IGZvcm0sIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yLCBvbkxvYWRDb21wbGV0ZSB9ID1cbiAgICAgICAgICAgIGJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbk9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzLmZvcm1cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhvc3RlZEZvcm1PcHRpb25zID0gZm9ybTtcblxuICAgICAgICB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0gPSBpc0NyZWRpdENhcmRGb3JtRmllbGRzKGZvcm0uZmllbGRzKTtcbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRWYXVsdGVkRm9ybSA9XG4gICAgICAgICAgICBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcykgJiYgIXRoaXMuaGFzVW5kZWZpbmVkVmFsdWVzKCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0gfHwgdGhpcy5pc0NyZWRpdENhcmRWYXVsdGVkRm9ybSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplRmllbGRzKGZvcm0sIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9uTG9hZENvbXBsZXRlPy4oKTtcblxuICAgICAgICBpZiAodGhpcy5zaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH0gPSBwYXltZW50IHx8IHt9O1xuXG4gICAgICAgIGlmICghcGF5bWVudCB8fCAhbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5leGVjdXRpb25QYXltZW50RGF0YSA9IHBheW1lbnREYXRhO1xuXG4gICAgICAgIGlmICh0aGlzLmlzQ3JlZGl0Q2FyZEZvcm0gfHwgdGhpcy5pc0NyZWRpdENhcmRWYXVsdGVkRm9ybSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGF0ZUhvc3RlZEZvcm1PclRocm93KCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN1Ym1pdEhvc3RlZEZvcm0oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZSBjb25kaXRpb24gZ2V0cyB0cmlnZ2VyZWQgd2hlbiBjdXN0b21lciBwYXlzIHdpdGggdmF1bHRlZCBpbnN0cnVtZW50IGFuZCBzaGlwcGluZyBhZGRyZXNzIGlzIHRydXN0ZWRcbiAgICAgICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdHJ1bWVudFBhcmFtcygpLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRPcmRlcklkID0gb3JkZXJJZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN1Ym1pdFBheW1lbnRQYXlsb2FkID0gdGhpcy5wcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZE9yZGVySWQsXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkVmF1bHRlZFRva2VuLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHN1Ym1pdFBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmN2dkZpZWxkPy5jbG9zZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmV4cGlyeUZpZWxkPy5jbG9zZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLm51bWJlckZpZWxkPy5jbG9zZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLm5hbWVGaWVsZD8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTdWJtaXQgUGF5bWVudCBQYXlsb2FkIHByZXBhcmluZyBtZXRob2RcbiAgICAgKlxuICAgICAqIGB2YXVsdGVkVG9rZW5gIGlzIHVzZWQgd2hlbiB3ZSBwYXkgd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgKHdpdGggdHJ1c3RlZCBzaGlwcGluZyBhZGRyZXNzIGFuZCB1bnRydXN0ZWQpXG4gICAgICogYHNldHVwVG9rZW5gIGlzIHVzZWQgd2hlbiB3ZSBwYXkgd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgKHVudHJ1c3RlZCBzaGlwcGluZyBhZGRyZXNzKVxuICAgICAqIGBvcmRlcklkYCBpcyB1c2VkIGluIGV2ZXJ5IGNhc2UgKGJhc2ljIGNhcmQgcGF5bWVudCwgdHJ1c3RlZCBzaGlwcGluZyBhZGRyZXNzIGFuZCB1bnRydXN0ZWQpXG4gICAgICovXG4gICAgcHJpdmF0ZSBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICAgICAgb3JkZXJJZD86IHN0cmluZyxcbiAgICAgICAgbm9uY2U/OiBzdHJpbmcsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIGNvbnN0IGluc3RydW1lbnRJZCA9XG4gICAgICAgICAgICBwYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnREYXRhKSA/IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCA6IHVuZGVmaW5lZDtcblxuICAgICAgICBjb25zdCBiaWdwYXlfdG9rZW4gPSBvbWl0QnkoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX25vbmNlOiBub25jZSxcbiAgICAgICAgICAgICAgICB0b2tlbjogaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTmlsLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAuLi4obm9uY2UgfHwgaW5zdHJ1bWVudElkID8geyBiaWdwYXlfdG9rZW4gfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9yZGVySWQgPyB7IGNhcmRfd2l0aF9vcmRlcjogeyBvcmRlcl9pZDogb3JkZXJJZCB9IH0gOiB7fSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDYXJkIGZpZWxkcyBpbml0aWFsaXplXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVGaWVsZHMoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3I/OiBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yJ10sXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgZmllbGRzLCBzdHlsZXMgfSA9IGZvcm1PcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGVDYWxsYmFjayA9IHRoaXMuZ2V0RXhlY3V0ZUNhbGxiYWNrKGZpZWxkcyk7XG5cbiAgICAgICAgY29uc3QgY2FyZEZpZWxkc0NvbmZpZzogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNDb25maWcgPSB7XG4gICAgICAgICAgICBzdHlsZTogdGhpcy5nZXRJbnB1dFN0eWxlcyhzdHlsZXMpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoe1xuICAgICAgICAgICAgICAgIG9yZGVySUQsXG4gICAgICAgICAgICAgICAgdmF1bHRTZXR1cFRva2VuLFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0LFxuICAgICAgICAgICAgfTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHsgb3JkZXJJRCwgdmF1bHRTZXR1cFRva2VuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLm9uQ2hhbmdlSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6IChldmVudCkgPT4gdGhpcy5vbkZvY3VzSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB0aGlzLm9uQmx1ckhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdDogKGV2ZW50KSA9PiB0aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZXhlY3V0ZUNhbGxiYWNrLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHBheXBhbFNkay5DYXJkRmllbGRzKGNhcmRGaWVsZHNDb25maWcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMoZmllbGRzKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgZXhlY3V0ZSBjYWxsYmFjayBtZXRob2RcbiAgICAgKiBEZXBlbmRzIG9uIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZCBvciBub3Qgd2Ugc2hvdWxkIHBhc3MgdG8gUFBcbiAgICAgKiBgY3JlYXRlVmF1bHRTZXR1cFRva2VuYCBjYWxsYmFjayBpZiBhZGRyZXNzIGlzIHVudHJ1c3RlZCBvclxuICAgICAqIGBjcmVhdGVPcmRlcmAgaWYgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRm9ybSA9IGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcyk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmF1bHRlZEZvcm0gPyB0aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkgOiB0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXR1cFRva2VuIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkc2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFRva2VuOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dXBUb2tlbjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVPcmRlckNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IG9yZGVySWQgfSA9XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogb25BcHByb3ZlIG1ldGhvZFxuICAgICAqIFdoZW4gc3VibWl0dGluZyBhIGZvcm0gd2l0aCBhIGBzdWJtaXRIb3N0ZWRGb3JtYCBtZXRob2QgaWYgdGhlcmUgaXMgbm8gZXJyb3JcbiAgICAgKiB0aGVuIG9uQXBwcm92ZSBjYWxsYmFjayBpcyB0cmlnZ2VyZWQgYW5kIGRlcGVuZHMgb24gdGhlIGZsb3dcbiAgICAgKiB3ZSB3aWxsIHJlY2VpdmUgYW4gYG9yZGVySURgIGlmIGl0J3MgYmFzaWMgcGF5aW5nIGFuZCBgdmF1bHRTZXR1cFRva2VuYCBpZiB3ZSBhcmUgcGF5aW5nXG4gICAgICogd2l0aCB2YXVsdGVkIGluc3RydW1lbnQgYW5kIHNoaXBwaW5nIGFkZHJlc3MgaXMgdW50cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoe1xuICAgICAgICBvcmRlcklELFxuICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgfTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSB7XG4gICAgICAgIGlmIChvcmRlcklEKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmF1bHRTZXR1cFRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkVmF1bHRlZFRva2VuID0gdmF1bHRTZXR1cFRva2VuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXJpbmcgQ2FyZCBGaWVsZHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGUuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5Py5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnkuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTmFtZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gY2FyZEZpZWxkcy5OYW1lRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROYW1lLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlcj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXIuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlclZhdWx0ZWRGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGVWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnlWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5udW1iZXJGaWVsZCA9IGNhcmRGaWVsZHMuTnVtYmVyRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5zdHJ1bWVudCBwYXJhbXMgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEluc3RydW1lbnRQYXJhbXMoKTogSG9zdGVkSW5zdHJ1bWVudCB8IFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVmF1bHRlZEluc3RydW1lbnQodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCh7XG4gICAgICAgIGVtaXR0ZWRCeSxcbiAgICB9OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlKTpcbiAgICAgICAgfCBIb3N0ZWRGaWVsZEJsdXJFdmVudERhdGFcbiAgICAgICAgfCBIb3N0ZWRGaWVsZEVudGVyRXZlbnREYXRhXG4gICAgICAgIHwgSG9zdGVkRmllbGRGb2N1c0V2ZW50RGF0YSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFR5cGU6IHRoaXMubWFwRmllbGRUeXBlKGVtaXR0ZWRCeSksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGb3JtIHN1Ym1pdCBtZXRob2RcbiAgICAgKiBUcmlnZ2VycyBhIGZvcm0gc3VibWl0XG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgc3VibWl0SG9zdGVkRm9ybSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdWJtaXRDb25maWcgPSB7XG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzczoge1xuICAgICAgICAgICAgICAgIGNvbXBhbnk6IGJpbGxpbmdBZGRyZXNzLmNvbXBhbnksXG4gICAgICAgICAgICAgICAgYWRkcmVzc0xpbmUxOiBiaWxsaW5nQWRkcmVzcy5hZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTI6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MyLFxuICAgICAgICAgICAgICAgIGFkbWluQXJlYTE6IGJpbGxpbmdBZGRyZXNzLnN0YXRlT3JQcm92aW5jZUNvZGUsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMjogYmlsbGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGNvdW50cnlDb2RlOiBiaWxsaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZEZpZWxkcy5zdWJtaXQoc3VibWl0Q29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcihcbiAgICAgICAgICAgICAgICAnRmFpbGVkIGF1dGhlbnRpY2F0aW9uLiBQbGVhc2UgdHJ5IHRvIGF1dGhvcml6ZSBhZ2Fpbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmFsaWRhdGlvbiBhbmQgZXJyb3JzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKSB7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHMgPSB0aGlzLmdldENhcmRGaWVsZHNPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNTdGF0ZSA9IGF3YWl0IGNhcmRGaWVsZHMuZ2V0U3RhdGUoKS50aGVuKChkYXRhKSA9PiBkYXRhKTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkRhdGEgPSB0aGlzLmdldFZhbGlkaXR5RGF0YShjYXJkRmllbGRzU3RhdGUpO1xuXG4gICAgICAgIGlmICh2YWxpZGF0aW9uRGF0YS5pc1ZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhvc3RlZEZvcm1PcHRpb25zPy5vblZhbGlkYXRlPy4odmFsaWRhdGlvbkRhdGEpO1xuXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50SW52YWxpZEZvcm1FcnJvcih0aGlzLm1hcFZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkRhdGEuZXJyb3JzKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZGl0eURhdGEoe1xuICAgICAgICBmaWVsZHMsXG4gICAgfTogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSk6IEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEge1xuICAgICAgICBjb25zdCB1cGRhdGVkRmllbGRzID0geyAuLi5maWVsZHMgfTtcblxuICAgICAgICBkZWxldGUgdXBkYXRlZEZpZWxkcy5jYXJkTmFtZUZpZWxkO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkc0tleXMgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmllbGRzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGVbJ2ZpZWxkcyddXG4gICAgICAgID47XG5cbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGZpZWxkc0tleXMuZXZlcnkoKGtleSkgPT4gdXBkYXRlZEZpZWxkc1trZXldPy5pc1ZhbGlkKTtcblxuICAgICAgICBjb25zdCBlcnJvcnMgPSBmaWVsZHNLZXlzLnJlZHVjZSgoZmllbGRzRXJyb3JzLCBrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IHRoaXMubWFwRmllbGRUeXBlKGtleSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uZmllbGRzRXJyb3JzLFxuICAgICAgICAgICAgICAgIFtmaWVsZFR5cGVdOiB1cGRhdGVkRmllbGRzW2tleV0/LmlzVmFsaWRcbiAgICAgICAgICAgICAgICAgICAgPyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgOiBbdGhpcy5nZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShmaWVsZFR5cGUpXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sIHt9KTtcblxuICAgICAgICByZXR1cm4geyBpc1ZhbGlkLCBlcnJvcnMgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlKGZpZWxkVHlwZTogc3RyaW5nKTogSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YSB7XG4gICAgICAgIHN3aXRjaCAoZmllbGRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZTpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBjb2RlJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9jb2RlJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyOlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgbnVtYmVyJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9udW1iZXInLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnk6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uOlxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgY2FyZCBleHBpcnknLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW52YWxpZF9jYXJkX2V4cGlyeScsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGZpZWxkJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWQnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFZhbGlkYXRpb25FcnJvcnMoXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnM6IEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGFNYXAgPSB7fSxcbiAgICApOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMge1xuICAgICAgICBjb25zdCBlcnJvcnM6IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yRGV0YWlscyA9IHt9O1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzS2V5cyA9IE9iamVjdC5rZXlzKHZhbGlkYXRpb25FcnJvcnMpIGFzIEFycmF5PFxuICAgICAgICAgICAga2V5b2YgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcFxuICAgICAgICA+O1xuXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnNLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgZXJyb3JzW2tleV0gPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB2YWxpZGF0aW9uRXJyb3JzW2tleV0/LlswXT8ubWVzc2FnZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZToga2V5LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZXJyb3JzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmllbGRzIG1hcHBlcnNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgbWFwRmllbGRUeXBlKHR5cGU6IHN0cmluZyk6IEhvc3RlZEZpZWxkVHlwZSB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbmFtZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEhvc3RlZEZpZWxkVHlwZS5DYXJkTmFtZTtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZE51bWJlckZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgIDogSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb247XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmRFeHBpcnlGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdleHBpcnknOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5VmVyaWZpY2F0aW9uO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkQ3Z2RmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnY3Z2JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlXG4gICAgICAgICAgICAgICAgICAgIDogSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBmaWVsZCB0eXBlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldENhcmRGaWVsZHNPclRocm93KCk6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhcmRGaWVsZHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jYXJkRmllbGRzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0SW5wdXRTdHlsZXMoXG4gICAgICAgIHN0eWxlcz86IEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgICk6IEJpZ0NvbW1lcmNlUGF5bWVudHNIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zWydzdHlsZXMnXSB7XG4gICAgICAgIGNvbnN0IGNvbW1vblN0eWxlcyA9IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRTaXplIHx8ICcxcmVtJyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6XG4gICAgICAgICAgICAgICAgc3R5bGVzPy5kZWZhdWx0Py5mb250RmFtaWx5IHx8ICdNb250c2VycmF0LCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250LXdlaWdodCc6IHN0eWxlcz8uZGVmYXVsdD8uZm9udFdlaWdodCB8fCAnNDAwJyxcbiAgICAgICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICc5cHggMTNweCcsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJyMzMzMzMzMnIH07XG4gICAgICAgIGNvbnN0IGVycm9yU3R5bGVzID0geyAuLi5jb21tb25TdHlsZXMsIGNvbG9yOiAncmVkJyB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dDogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgICcuaW52YWxpZCc6IGVycm9yU3R5bGVzLFxuICAgICAgICAgICAgJy52YWxpZCc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnOmZvY3VzJzogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0eWxpemVJbnB1dENvbnRhaW5lcnMoXG4gICAgICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMoZmllbGRzIHx8IHt9KS5mb3JFYWNoKChpZDogSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkPy5jb250YWluZXJJZCB8fCAnJ31gKTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9ICctNXB4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNVbmRlZmluZWRWYWx1ZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3RlZEZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLmhvc3RlZEZvcm1PcHRpb25zLmZpZWxkcykuc29tZShcbiAgICAgICAgICAgICAgICAodmFsdWUpID0+IHZhbHVlID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBJbnB1dCBldmVudHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNoYW5nZUhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vblZhbGlkYXRlPy4odGhpcy5nZXRWYWxpZGl0eURhdGEoZXZlbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRm9jdXNIYW5kbGVyKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIGV2ZW50OiBCaWdDb21tZXJjZVBheW1lbnRzQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25Gb2N1cz8uKHRoaXMuZ2V0RmllbGRUeXBlQnlFbWl0dGVkRmllbGQoZXZlbnQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQmx1ckhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IEJpZ0NvbW1lcmNlUGF5bWVudHNDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkJsdXI/Lih0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbklucHV0U3VibWl0UmVxdWVzdChcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogQmlnQ29tbWVyY2VQYXltZW50c0NhcmRGaWVsZHNTdGF0ZSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgZm9ybU9wdGlvbnM/Lm9uRW50ZXI/Lih0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCaWdDb21tZXJjZVBheW1lbnRzIEFjY2VsZXJhdGVkIGNoZWNrb3V0IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIEJDUCBGYXN0bGFuZSBBL0IgdGVzdGluZyB3aWxsIGJlIGZpbmlzaGVkXG4gICAgcHJpdmF0ZSBzaG91bGRJbml0aWFsaXplUGF5UGFsRmFzdGxhbmUobWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBiaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBpc0JpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyKFxuICAgICAgICAgICAgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8uaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZCAmJlxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5pc0JpZ0NvbW1lcmNlUGF5bWVudHNBbmFseXRpY3NWMkVuYWJsZWQgJiZcbiAgICAgICAgICAgICFiaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBwYXJ0IHdoZW4gQkNQIEZhc3RsYW5lIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhPy5jb25uZWN0Q2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheVBhbEZhc3RsYW5lU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrLmdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgICAgIGNhcnQuaWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICAhIWluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF86IHVua25vd24pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCB0aHJvd2luZyBhbnkgZXJyb3IgZnJvbSB0aGlzIGZsb3cgdG8gZG8gbm8gYnJha2UgZGVmYXVsdCBmbG93XG4gICAgICAgICAgICAvLyBUaGlzIGZsb3cgaXMgb3B0aW9uYWxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGssXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNTZGsoKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0NyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxBcG1TZGssXG4gICAgUGF5UGFsU2RrSGVscGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBUaW1lb3V0RXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNFeHBlcmltZW50RW5hYmxlZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLFxuICAgIFBheVBhbE9yZGVyU3RhdHVzLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmNvbnN0IFBPTExJTkdfSU5URVJWQUwgPSAzMDAwO1xuY29uc3QgTUFYX1BPTExJTkdfVElNRSA9IDMwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuICAgIGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5XG57XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24/OiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucztcbiAgICBwcml2YXRlIHBheXBhbEFwbXM/OiBQYXlQYWxBcG1TZGs7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuICAgIHByaXZhdGUgaXNQb2xsaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcz86IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c1Nka0hlbHBlcjogUGF5UGFsU2RrSGVscGVyLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgICAgIHByaXZhdGUgcG9sbGluZ0ludGVydmFsOiBudW1iZXIgPSBQT0xMSU5HX0lOVEVSVkFMLFxuICAgICAgICBwcml2YXRlIG1heFBvbGxpbmdJbnRlcnZhbFRpbWU6IG51bWJlciA9IE1BWF9QT0xMSU5HX1RJTUUsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBvcmRlcklkLCBzaG91bGRSZW5kZXJGaWVsZHMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcblxuICAgICAgICB0aGlzLmlzUG9sbGluZ0VuYWJsZWQgPSBpc0V4cGVyaW1lbnRFbmFibGVkKGZlYXR1cmVzLCAnUEFZUEFMLTU2MjQuYmNwX2lkZWFsX3BvbGxpbmcnKTtcblxuICAgICAgICAvLyBJbmZvOlxuICAgICAgICAvLyBUaGUgQVBNIGJ1dHRvbiBhbmQgZmllbGRzIHNob3VsZCBub3QgYmUgcmVuZGVyZWQgd2hlbiBzaG9wcGVyIHdhcyByZWRpcmVjdGVkIHRvIENoZWNrb3V0IHBhZ2VcbiAgICAgICAgLy8gYWZ0ZXIgdXNpbmcgc21hcnQgcGF5bWVudCBidXR0b24gb24gUERQIG9yIENhcnQgcGFnZS4gSW4gdGhpcyBjYXNlIGJhY2tlbmQgcmV0dXJucyBvcmRlciBpZCBpZlxuICAgICAgICAvLyBpdCBpcyBhdmFpbGFibGUgaW4gY2hlY2tvdXQgc2Vzc2lvbi4gVGhlcmVmb3JlLCBpdCBpcyBub3QgbmVjZXNzYXJ5IHRvIHJlbmRlciB0aGUgYnV0dG9uLlxuICAgICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxBcG1zID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrSGVscGVyLmdldFBheVBhbEFwbXNTZGsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuY29udGFpbmVyLnNwbGl0KCcjJylbMV07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGdhdGV3YXlJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyk7XG5cbiAgICAgICAgaWYgKHNob3VsZFJlbmRlckZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWVsZHMobWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzUG9sbGluZ0VuYWJsZWQgJiYgbWV0aG9kSWQgPT09ICdpZGVhbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20obWV0aG9kSWQsIHJlc29sdmUsIHJlamVjdCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQb2xsaW5nIG1lY2hhbmlzbVxuICAgICAqXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHJlc29sdmVQcm9taXNlOiAodmFsdWU/OiB1bmtub3duKSA9PiB2b2lkLFxuICAgICAgICByZWplY3RQcm9taXNlOiAodmFsdWU/OiB1bmtub3duKSA9PiB2b2lkLFxuICAgICAgICBnYXRld2F5SWQ/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KHJlc29sdmUsIHRoaXMucG9sbGluZ0ludGVydmFsKTtcblxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnBvbGxpbmdUaW1lciArPSB0aGlzLnBvbGxpbmdJbnRlcnZhbDtcblxuICAgICAgICAgICAgY29uc3Qgb3JkZXJTdGF0dXMgPSBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaXNPcmRlckFwcHJvdmVkID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLkFwcHJvdmVkO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ0Vycm9yO1xuXG4gICAgICAgICAgICBpZiAoaXNPcmRlckFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZUluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG9sbGluZ0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc09yZGVyQXBwcm92ZWQgJiYgdGhpcy5wb2xsaW5nVGltZXIgPCB0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3RQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIGJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHM6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlaW5pdGlhbGl6ZVN0cmF0ZWd5KFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZGVpbml0aWFsaXplKCk7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZShvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzIHx8IHt9O1xuXG4gICAgICAgIGlmICh0aGlzLmlzUG9sbGluZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtczogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsQW1wc1NkayA9IHRoaXMuZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBidXR0b25TdHlsZSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBzdWJtaXRGb3JtIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKGJ1dHRvblN0eWxlKSxcbiAgICAgICAgICAgIG9uSW5pdDogKF8sIGFjdGlvbnMpID0+IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMub25Jbml0QnV0dG9uKGFjdGlvbnMpLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMub25DcmVhdGVPcmRlcihtZXRob2RJZCwgZ2F0ZXdheUlkLCBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGEpID0+IHRoaXMuaGFuZGxlQXBwcm92ZShkYXRhLCBzdWJtaXRGb3JtKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlSW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUZhaWx1cmUoZXJyb3IsIG9uRXJyb3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIChfLCBhY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMub25WYWxpZGF0ZShhY3Rpb25zLnJlc29sdmUsIGFjdGlvbnMucmVqZWN0KSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24gPSBwYXlwYWxBbXBzU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25DcmVhdGVPcmRlcihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgZ2F0ZXdheUlkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM6IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgeyBvblZhbGlkYXRlIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGNvbnN0IG9uVmFsaWRhdGlvblBhc3NlZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuICgpID0+IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IG9uVmFsaWRhdGUob25WYWxpZGF0aW9uUGFzc2VkLCBub29wKTtcblxuICAgICAgICBjb25zdCBvcmRlcklkID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHsgdXNlU3RvcmVDcmVkaXQ6IGZhbHNlIH07XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZhaWx1cmUoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJGaWVsZHMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM6IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwgfSA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXBtRmllbGRzQ29udGFpbmVyLCBhcG1GaWVsZHNTdHlsZXMgfSA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM7XG5cbiAgICAgICAgaWYgKCFhcG1GaWVsZHNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zXCIgYXJndW1lbnQgc2hvdWxkIGNvbnRhaW4gXCJhcG1GaWVsZHNDb250YWluZXJcIi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpZWxkQ29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXBtRmllbGRzQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoZmllbGRDb250YWluZXJFbGVtZW50KSB7XG4gICAgICAgICAgICBmaWVsZENvbnRhaW5lckVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZHNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogbWV0aG9kSWQsXG4gICAgICAgICAgICBzdHlsZTogYXBtRmllbGRzU3R5bGVzIHx8IHt9LFxuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZW1haWwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsUGF5bWVudEZpZWxkcyA9IHBheXBhbEFtcHNTZGsuUGF5bWVudEZpZWxkcyhmaWVsZHNPcHRpb25zKTtcblxuICAgICAgICBwYXlwYWxQYXltZW50RmllbGRzLnJlbmRlcihhcG1GaWVsZHNDb250YWluZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBpc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZElkLnRvVXBwZXJDYXNlKCkgaW4gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQXBtcztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtY29uc3RhbnRzJztcbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGdhdGV3YXk6ICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBpc1JlZGlyZWN0RXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tZW1yY2UtcGF5bWVudHMtcmVkaXJlY3QtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuICAgIGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5XG57XG4gICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzPzogQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBwYXltZW50O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlcklkID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGdhdGV3YXlJZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLFxuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudERhdGEgPSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICB2YXVsdF9wYXltZW50X2luc3RydW1lbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kX2lkOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgaWYgKGlzUmVkaXJlY3RFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWRpcmVjdFVybCA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQuZGF0YS5yZWRpcmVjdF91cmw7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShyZWRpcmVjdFVybCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgY29uc3QgeyBvbkVycm9yIH0gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMgfHwge307XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgaXNSZXF1ZXN0RXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgUmVkaXJlY3RFcnJvciB9IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNSZWRpcmVjdEVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVkaXJlY3RFcnJvciB7XG4gICAgcmV0dXJuIGlzUmVxdWVzdEVycm9yKGVycm9yKSAmJiBlcnJvci5ib2R5Py5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZD8uZGF0YS5yZWRpcmVjdF91cmw7XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL2JpZ2NvbWVtcmNlLXBheW1lbnRzLXJlZGlyZWN0LWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNSZWRpcmVjdEFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c1JlZGlyZWN0QWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3ksXG4gICAgW1xuICAgICAgICB7IGdhdGV3YXk6ICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJywgaWQ6ICdrbGFybmEnIH0sXG4gICAgICAgIHsgZ2F0ZXdheTogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnLCBpZDogJ2FmdGVycGF5JyB9LFxuICAgIF0sXG4pO1xuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1wYXltZW50LWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tb1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tb2NoZWNrb3V0JyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgYFZlbm1vIGlzIG5vdCBhdmFpbGFibGUgZm9yIHlvdXIgcmVnaW9uLiBQbGVhc2UgYW5vdGhlciBwYXltZW50IG1ldGhvZCBpbnN0ZWFkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IG9uVmFsaWRhdGUob25WYWxpZGF0aW9uUGFzc2VkLCByZWplY3QpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZShcbiAgICAgICAgeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIHN1Ym1pdEZvcm06IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHsgc3R5bGVzOiB7IGJhY2tncm91bmRDb2xvcjogJ2JsYWNrJyB9IH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8nIH0sXG5dKTtcbiIsImltcG9ydCB7IG5vb3AgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIG9uRXJyb3IgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHMsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHMuY29udGFpbmVyXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uQ2xpY2sgJiYgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzLm9uQ2xpY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9uRXJyb3IgPSBiaWdjb21tZXJjZV9wYXltZW50cy5vbkVycm9yIHx8IG5vb3A7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5bWVudE1ldGhvZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnW0JDIFBheVBhbF06IFBheVBhbCBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50cyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbk91dChvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25PdXRDdXN0b21lcihvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50czogQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrLCBvbkNvbXBsZXRlIH0gPSBiaWdjb21tZXJjZV9wYXltZW50cztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuUEFZUEFMLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHtcbiAgICAgICAgICAgICAgICAuLi5jaGVja291dFRvcEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcn1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgZXhjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJjb25zdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQgPSA0MDtcblxuZXhwb3J0IGRlZmF1bHQgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0O1xuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQ3VzdG9tZXJTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50cycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIGdldEZhc3RsYW5lU3R5bGVzLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgIFBheVBhbFNka0hlbHBlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9iaWdjb21tZXJjZS1wYXltZW50cy11dGlscyc7XG5pbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWZhc3RsYW5lLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNTZGs6IFBheVBhbFNka0hlbHBlcixcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlsczogQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBpc1Rlc3RNb2RlRW5hYmxlZCA9ICEhcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzU2RrLmdldFBheVBhbEZhc3RsYW5lU2RrKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgICAgIGNhcnQuaWQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlwYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICBpc1Rlc3RNb2RlRW5hYmxlZCxcbiAgICAgICAgICAgICAgICB0aGlzLmdldEZhc3RsYW5lU3R5bGVzKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19mYXN0bGFuZSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbG9nZ2VyIHRvIGJlIGFibGUgdG8gZGVidWcgaXNzdWVzIGlmIHRoZXJlIGFueVxuICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChcbiAgICAgICAgb3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkLCBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrLCBtZXRob2RJZCB9ID1cbiAgICAgICAgICAgIG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGN1c3RvbWVyLmlzR3Vlc3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSBjdXN0b21lcj8uZW1haWwgfHwgYmlsbGluZ0FkZHJlc3M/LmVtYWlsIHx8ICcnO1xuXG4gICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLmxvb2t1cEN1c3RvbWVyT3JUaHJvdyhjdXN0b21lckVtYWlsKTtcblxuICAgICAgICBjb25zdCBhdXRoZW50aWNhdGlvblJlc3VsdCA9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzLnRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KFxuICAgICAgICAgICAgICAgIGN1c3RvbWVyQ29udGV4dElkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkID1cbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRDtcblxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlKG1ldGhvZElkLCBhdXRoZW50aWNhdGlvblJlc3VsdCk7XG5cbiAgICAgICAgaWYgKGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy51cGRhdGVTdG9yYWdlU2Vzc2lvbklkKGNhcnRJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdDogUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBhZGRyZXNzZXMsIGJpbGxpbmdBZGRyZXNzLCBzaGlwcGluZ0FkZHJlc3MsIGluc3RydW1lbnRzIH0gPVxuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscy5tYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSxcbiAgICAgICAgICAgIGFkZHJlc3NlcyxcbiAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYmlsbGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hpcHBpbmdBZGRyZXNzICYmIGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgICAgICAgICBzaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgICAgICB1cGRhdGVkU3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB7IGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkIH0gPVxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gdXBkYXRlZFN0YXRlLmdldENvbnNpZ25tZW50cygpIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zID0gY29uc2lnbm1lbnRzWzBdPy5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW107XG4gICAgICAgICAgICBjb25zdCBmaXJzdFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuICAgICAgICAgICAgY29uc3QgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKFxuICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIHx8IGZpcnN0U2hpcHBpbmdPcHRpb24pICYmXG4gICAgICAgICAgICAgICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uSWQgPSByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uPy5pZCB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uLmlkO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBGYXN0bGFuZSBzdHlsaW5nIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0RmFzdGxhbmVTdHlsZXMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lOlxuICAgICAgICAgICAgfCBCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lckluaXRpYWxpemVPcHRpb25zXG4gICAgICAgICAgICB8IHVuZGVmaW5lZCxcbiAgICApOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IHsgZmFzdGxhbmVTdHlsZXMsIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgcmV0dXJuIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgaXNGYXN0bGFuZVN0eWxpbmdFbmFibGVkID8gZmFzdGxhbmVTdHlsZXMgOiB7fSxcbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lPy5zdHlsZXMsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXV0aWxzJztcbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1mYXN0bGFuZS1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2Zhc3RsYW5lJyB9LCAvLyB0aGlzIG1ldGhvZCBpZCB3aWxsIGJlIHByb3ZpZGVkIGZvciB1c2VycyBmcm9tIHRlc3QgZ3JvdXBcbiAgICB7IGlkOiAnYmlnY29tbWVyY2VfcGF5bWVudHNfY3JlZGl0Y2FyZHMnIH0sIC8vIHRoaXMgbWV0aG9kIGlkIHdpbGwgYmUgcHJvdmlkZWQgZm9yIHVzZXJzIGZyb20gY29udHJvbCBncm91cFxuXSk7XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBvbkVycm9yID0gbm9vcDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZTogQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICZcbiAgICAgICAgICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLmNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLm9uQ2xpY2sgJiZcbiAgICAgICAgICAgIHR5cGVvZiBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5vbkNsaWNrICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvciA9IGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyLm9uRXJyb3IgfHwgbm9vcDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgQmlnQ29tbWVyY2VQYXltZW50cyBQYXlMYXRlcl06IGJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNvbXBsZXRlLCBvbkNsaWNrIH0gPSBiaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXI7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsIHBheW1lbnRCdXR0b25TdHlsZXMgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZnVuZGluZ1NvdXJjZXMgPSBbcGF5cGFsU2RrLkZVTkRJTkcuUEFZTEFURVIsIHBheXBhbFNkay5GVU5ESU5HLkNSRURJVF07XG4gICAgICAgIGxldCBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gZmFsc2U7XG5cbiAgICAgICAgZnVuZGluZ1NvdXJjZXMuZm9yRWFjaCgoZnVuZGluZ1NvdXJjZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICAgICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25Ib3N0ZWRDaGVja291dEFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIWRhdGEub3JkZXJJRCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyRGV0YWlscyA9IGF3YWl0IGFjdGlvbnMub3JkZXIuZ2V0KCk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoe30sIHsgcGFyYW1zOiB7IG1ldGhvZElkIH0gfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBleGNlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KFxuICAgICAgICAgICAgZGF0YS5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkLFxuICAgICAgICApO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25FcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXR5cGVzJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbywgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5vbkNsaWNrICYmXG4gICAgICAgICAgICB0eXBlb2YgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8ub25DbGljayAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5vbkNsaWNrXCIgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24uJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5bWVudHMgVmVubW9dOiBCdXR0b24gY291bGQgbm90IGJlIHJlbmRlcmVkLCBkdWUgdG8gaXNzdWVzIHdpdGggbG9hZGluZyBQYXlQYWwgU0RLJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW86IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5WRU5NTyxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vJyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgICAgICAuLi4ob25DbGljayAmJiB7IG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soKSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBiaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlOiBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gQm9vbGVhbihiaWdjb21tZXJjZV9wYXltZW50cz8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIWJpZ2NvbW1lcmNlX3BheW1lbnRzLmN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJpZ2NvbW1lcmNlX3BheW1lbnRzLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50cy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBiaWdjb21tZXJjZV9wYXltZW50cy5jdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIDogdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihjb250YWluZXJJZCwgbWV0aG9kSWQsIGJpZ2NvbW1lcmNlX3BheW1lbnRzLCBpc0J1eU5vd0Zsb3cpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50czogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBpc0J1eU5vd0Zsb3c/OiBib29sZWFuLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25Db21wbGV0ZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50cztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgaXNBcHBTd2l0Y2hFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICAgICAgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkgJiYge1xuICAgICAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdiaWdjb21tZXJjZV9wYXltZW50cycpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICAuLi4oIWlzQXBwU3dpdGNoRW5hYmxlZCAmJiB7XG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICAgICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U6IChkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nT3B0aW9uc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucykgPT5cbiAgICAgICAgICAgICAgICB0aGlzLm9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKGRhdGEsIGFjdGlvbnMsIG1ldGhvZElkLCBvbkNvbXBsZXRlKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIGlmIChwYXlwYWxCdXR0b24uaGFzUmV0dXJuZWQ/LigpICYmIHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlc3VtZT8uKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZW5kZXIoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9uRWxpZ2liaWxpdHlGYWlsdXJlICYmIHR5cGVvZiBvbkVsaWdpYmlsaXR5RmFpbHVyZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZJWE1FOiBEbyB3ZSByZWFsbHkgbmVlZCB0byByZXR1cm4gdHJ1ZSBoZXJlP1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBhY2NlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFBheVBhbCBBcHBTd2l0Y2ggZW5hYmxpbmcgaGFuZGxpbmdcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICByZXR1cm4gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzQXBwU3dpdGNoRW5hYmxlZCA/PyBmYWxzZTtcbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneTogQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3Rvcnk8XG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ2JpZ2NvbW1lcmNlX3BheW1lbnRzJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyxcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICBQYXlQYWxTZGtIZWxwZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1wYXlsYXRlci1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5UGFsU2RrSGVscGVyOiBQYXlQYWxTZGtIZWxwZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1BheUxhdGVyQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQsXG4gICAgICAgIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlciB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXIuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlci5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcik7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnaW5nQ29udGFpbmVyID1cbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1lc3NhZ2luZ0NvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAoY3VycmVuY3lDb2RlICYmIG1lc3NhZ2luZ0NvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCB7IHBheXBhbEJOUExDb25maWd1cmF0aW9uID0gW10gfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICAgICAgY29uc3QgYmFubmVyQ29uZmlndXJhdGlvbiA9XG4gICAgICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gJiYgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24uZmluZCgoeyBpZCB9KSA9PiBpZCA9PT0gJ2NhcnQnKTtcblxuICAgICAgICAgICAgaWYgKCFiYW5uZXJDb25maWd1cmF0aW9uPy5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIHdoZW4gZGF0YSBhdHRyaWJ1dGVzIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHJlbGF0ZWQgY2FydCBiYW5uZXIgY29udGFpbmVyIGluIGNvbnRlbnQgc2VydmljZVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS1sb2dvLXR5cGUnKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtbG9nby1wb3NpdGlvbicpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS10ZXh0LWNvbG9yJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLXRleHQtc2l6ZScpO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlQYWxTZGtIZWxwZXIgPSBhd2FpdCB0aGlzLnBheVBhbFNka0hlbHBlci5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5UGFsU2RrSGVscGVyLCBtZXNzYWdpbmdDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXI6IEJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25Db21wbGV0ZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcjtcblxuICAgICAgICBjb25zdCBiaWdDb21tZXJjZVBheW1lbnRzU2RrID1cbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8QmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgICAgICAgICAnYmlnY29tbWVyY2VfcGF5bWVudHNfcGF5bGF0ZXInLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW1xuICAgICAgICAgICAgYmlnQ29tbWVyY2VQYXltZW50c1Nkay5GVU5ESU5HLlBBWUxBVEVSLFxuICAgICAgICAgICAgYmlnQ29tbWVyY2VQYXltZW50c1Nkay5GVU5ESU5HLkNSRURJVCxcbiAgICAgICAgXTtcbiAgICAgICAgbGV0IGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSBmYWxzZTtcblxuICAgICAgICBmdW5kaW5nU291cmNlcy5mb3JFYWNoKChmdW5kaW5nU291cmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBCaWdDb21tZXJjZVBheW1lbnRzQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gYmlnQ29tbWVyY2VQYXltZW50c1Nkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWhhc1JlbmRlcmVkU21hcnRCdXR0b24pIHtcbiAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEZJWE1FOiBEbyB3ZSByZWFsbHkgbmVlZCB0byByZXR1cm4gdHJ1ZSBoZXJlP1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWRkcmVzcyA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBhY2NlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPVxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoXG4gICAgICAgIGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlc1NkazogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2NhcnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBwYXlwYWxNZXNzYWdlc1Nkay5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpO1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLnJlbmRlcihgIyR7bWVzc2FnaW5nQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvYmlnY29tbWVyY2UtcGF5bWVudHMtdXRpbHMnO1xuaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneSBmcm9tICcuL2JpZ2NvbW1lcmNlLXBheW1lbnRzLXBheWxhdGVyLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkaygpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXJCdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19wYXlsYXRlcicgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2JpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtdHlwZXMnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbiAgICBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lcbntcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYXBtLFxuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICB9ID0gYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMuYXBtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcHJvdmlkZWRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXM6IEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBhcG0sIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBzdHlsZSwgb25FbGlnaWJpbGl0eUZhaWx1cmUgfSA9XG4gICAgICAgICAgICBiaWdjb21tZXJjZV9wYXltZW50c19hcG1zO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGlzQXZhaWxhYmxlRnVuZGluZ1NvdXJjZSA9IE9iamVjdC52YWx1ZXMocGF5cGFsU2RrLkZVTkRJTkcpLmluY2x1ZGVzKGFwbSk7XG5cbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZUZ1bmRpbmdTb3VyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgUGF5UGFsIGJ1dHRvbiBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c19hcG1zLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCB2YWxpZCBmdW5kaW5nIHNvdXJjZS5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX2FwbXMnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IEJpZ0NvbW1lcmNlUGF5bWVudHNCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IGFwbSxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLWJpZ2NvbW1lcmNlLXBheW1lbnRzLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBCaWdDb21tZXJjZVBheW1lbnRzQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZUJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c19hcG1zJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vYmlnY29tbWVyY2UtcGF5bWVudHMtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBTdHlsZUJ1dHRvbkNvbG9yLFxufSBmcm9tICcuLi9iaWdjb21tZXJjZS1wYXltZW50cy10eXBlcyc7XG5cbmltcG9ydCBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9iaWdjb21tZXJjZS1wYXltZW50cy12ZW5tby1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2U6IEJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmXG4gICAgICAgICAgICBXaXRoQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgYmlnY29tbWVyY2VfcGF5bWVudHNfdmVubW8sIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSB9ID1cbiAgICAgICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IGlzQnV5Tm93RmxvdyA9ICEhYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmNvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQnV5Tm93RmxvdyAmJiAhcHJvdmlkZWRDdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5iaWdjb21tZXJjZV9wYXltZW50c192ZW5tby5jdXJyZW5jeUNvZGVcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0J1eU5vd0Zsb3cgJiZcbiAgICAgICAgICAgIHR5cGVvZiBidXlOb3dJbml0aWFsaXplT3B0aW9ucz8uZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5ICE9PSAnZnVuY3Rpb24nXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGJpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vOiBCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPSBiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbztcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlID0gcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU87XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcihcbiAgICAgICAgICAgICAgICAgICAgJ2JpZ2NvbW1lcmNlX3BheW1lbnRzX3Zlbm1vJyxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV5Tm93Rmxvd0NhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IHRoaXMuaGFuZGxlQ2xpY2soYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWYWxpZFZlbm1vQnV0dG9uU3R5bGVzKHN0eWxlOiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMgfCB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdmFsaWRCdXR0b25TdHlsZSA9XG4gICAgICAgICAgICB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSk7XG5cbiAgICAgICAgaWYgKHZhbGlkQnV0dG9uU3R5bGUuY29sb3IgPT09IFN0eWxlQnV0dG9uQ29sb3IuZ29sZCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi52YWxpZEJ1dHRvblN0eWxlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkQnV0dG9uU3R5bGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/OiBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJpZ0NvbW1lcmNlUGF5bWVudHNJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1iaWdjb21tZXJjZS1wYXltZW50cy1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5IGZyb20gJy4vYmlnY29tbWVyY2UtcGF5bWVudHMtdmVubW8tYnV0dG9uLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1Zlbm1vQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IEJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzVmVubW9CdXR0b25TdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbycgfSxcbl0pO1xuIl0sIm5hbWVzIjpbIk1pc3NpbmdEYXRhRXJyb3JUeXBlIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwicHJvdG90eXBlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJQYXlQYWxTZGtIZWxwZXIiLCJzY3JpcHRMb2FkZXIiLCJ3aW5kb3ciLCJnZXRQYXlQYWxGYXN0bGFuZVNkayIsInBheW1lbnRNZXRob2QiLCJjdXJyZW5jeUNvZGUiLCJzZXNzaW9uSWQiLCJwYXlwYWxGYXN0bGFuZVNkayIsImNvbmZpZyIsImdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbiIsImxvYWRQYXlQYWxTZGsiLCJnZXRQYXlQYWxHb29nbGVQYXlTZGsiLCJpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlIiwiZm9yY2VMb2FkIiwicGF5cGFsR29vZ2xlUGF5IiwicGF5cGFsU2RrU2NyaXB0Q29uZmlnIiwiZ2V0UGF5UGFsR29vZ2xlUGF5U2RrU2NyaXB0Q29uZmlnT3JUaHJvdyIsImdldFBheVBhbEFwbXNTZGsiLCJwYXlwYWxBcG1zIiwiZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbiIsImdldFBheVBhbE1lc3NhZ2VzIiwicGF5cGFsTWVzc2FnZXMiLCJwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyIsImdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbiIsIm9wdGlvbnMiLCJhdHRyaWJ1dGVzIiwic2NyaXB0T3B0aW9ucyIsInRyYW5zZm9ybUNvbmZpZyIsInNjcmlwdEF0dHJpYnV0ZXMiLCJzY3JpcHRTcmMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsImxvYWRTY3JpcHQiLCJhc3luYyIsImNsaWVudFRva2VuIiwiaW5pdGlhbGl6YXRpb25EYXRhIiwiY2xpZW50SWQiLCJpbnRlbnQiLCJtZXJjaGFudElkIiwiYXR0cmlidXRpb25JZCIsImNvbW1pdCIsImNvbXBvbmVudHMiLCJjdXJyZW5jeSIsInJlcGxhY2UiLCJidXllckNvdW50cnkiLCJpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCIsImlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUiLCJhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVBUE1zRnVuZGluZyIsImZpbHRlckZ1bmRpbmdPcHRpb25zIiwiZGlzYWJsZUFQTXNGdW5kaW5nIiwiZmlsdGVyIiwiYXBtIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJmdW5kaW5nT3B0aW9ucyIsImZ1bmRpbmdUeXBlc1RvQmVGaWx0ZXJlZCIsImZ1bmRpbmdPcHRpb24iLCJ0cmFuc2Zvcm1lZENvbmZpZyIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJqb2luIiwiY3JlYXRlQmlnQ29tbWVyY2VQYXltZW50c1NkayIsImNyZWF0ZVNjcmlwdExvYWRlciIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJhc3NpZ24iLCJERUZBVUxUX1NUWUxFUyIsInNpemUiLCJjb2xvciIsImJhY2tncm91bmRDb2xvciIsIlJPVEFUSU9OX0FOSU1BVElPTiIsIkxvYWRpbmdJbmRpY2F0b3IiLCJzdHlsZXMiLCJjb250YWluZXJTdHlsZXMiLCJkZWZpbmVBbmltYXRpb24iLCJjb250YWluZXIiLCJidWlsZENvbnRhaW5lciIsImluZGljYXRvciIsImJ1aWxkSW5kaWNhdG9yIiwiYXBwZW5kQ2hpbGQiLCJzaG93IiwicGFyZW50SWQiLCJwYXJlbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJ2aXNpYmlsaXR5Iiwib3BhY2l0eSIsImhpZGUiLCJoYW5kbGVUcmFuc2l0aW9uRW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJjcmVhdGVFbGVtZW50IiwiZGlzcGxheSIsImJvdHRvbSIsImxlZnQiLCJoZWlnaHQiLCJ3aWR0aCIsInBvc2l0aW9uIiwicmlnaHQiLCJ0b3AiLCJ0cmFuc2l0aW9uIiwic2V0U3R5bGVBdHRyaWJ1dGUiLCJib3JkZXJSYWRpdXMiLCJib3JkZXIiLCJib3JkZXJDb2xvciIsIm1hcmdpbiIsInRyYW5zZm9ybSIsInRyYW5zZm9ybVN0eWxlIiwiYW5pbWF0aW9uIiwiZWxlbWVudCIsImF0dHJzIiwiayIsInNldFByb3BlcnR5IiwiaWQiLCJoZWFkIiwic2hlZXQiLCJDU1NTdHlsZVNoZWV0IiwiaW5zZXJ0UnVsZSIsIkxPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyIsIkJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yIiwiREVGQVVMVF9SRVNQT05TRSIsImJvZHkiLCJoZWFkZXJzIiwic3RhdHVzIiwiUmVxdWVzdEVycm9yIiwicmVzcG9uc2UiLCJlcnJvcnMiLCJDYXJ0U291cmNlIiwiTGlhYmlsaXR5U2hpZnRFbnVtIiwiQmlnQ29tbWVyY2VQYXltZW50c0ludGVudCIsIlN0eWxlQnV0dG9uTGFiZWwiLCJTdHlsZUJ1dHRvbkNvbG9yIiwiU3R5bGVCdXR0b25TaGFwZSIsIk5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIiwiUGF5UGFsT3JkZXJTdGF0dXMiLCJCaWdDb21tZXJjZVBheW1lbnRzSW50ZWdyYXRpb25TZXJ2aWNlIiwiZm9ybVBvc3RlciIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJiaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciIsImJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIiLCJtZXRob2RJZCIsInByb3ZpZGVkQ3VycmVuY3lDb2RlIiwic3RhdGUiLCJnZXRTdGF0ZSIsImdldENhcnRPclRocm93IiwiY29kZSIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwicGF5cGFsU2RrIiwiZ2V0UGF5UGFsU0RLIiwiZ2V0UGF5UGFsU2RrT3JUaHJvdyIsImNyZWF0ZUJ1eU5vd0NhcnRPclRocm93IiwiYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMiLCJjYXJ0UmVxdWVzdEJvZHkiLCJnZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkiLCJjcmVhdGVCdXlOb3dDYXJ0IiwiZXJyb3IiLCJjcmVhdGVPcmRlciIsInByb3ZpZGVySWQiLCJyZXF1ZXN0Qm9keSIsImNhcnRJZCIsIm9yZGVySWQiLCJjcmVhdGVPcmRlckNhcmRGaWVsZHMiLCJzZXR1cFRva2VuIiwidXBkYXRlT3JkZXIiLCJjYXJ0IiwiY29uc2lnbm1lbnQiLCJnZXRDb25zaWdubWVudHNPclRocm93IiwiYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIiwic2VsZWN0ZWRTaGlwcGluZ09wdGlvbiIsIl9lcnJvciIsImdldE9yZGVyU3RhdHVzIiwidG9rZW5pemVQYXltZW50IiwicG9zdEZvcm0iLCJwYXltZW50X3R5cGUiLCJhY3Rpb24iLCJwcm92aWRlciIsIm9yZGVyX2lkIiwic291cmNlIiwiQnV5Tm93IiwiY2FydF9pZCIsInN1Ym1pdFBheW1lbnQiLCJnYXRld2F5SWQiLCJwYXltZW50RGF0YSIsImZvcm1hdHRlZFBheWxvYWQiLCJ2YXVsdF9wYXltZW50X2luc3RydW1lbnQiLCJzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudCIsImRldmljZV9pbmZvIiwibWV0aG9kX2lkIiwicGF5cGFsX2FjY291bnQiLCJnZXRTaGlwcGluZ09wdGlvbk9yVGhyb3ciLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQiLCJyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIiwiZmluZCIsIm9wdGlvbiIsImlzUmVjb21tZW5kZWQiLCJzaGlwcGluZ09wdGlvblRvU2VsZWN0IiwiZ2V0QWRkcmVzcyIsImFkZHJlc3MiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmUiLCJjb21wYW55IiwiYWRkcmVzczEiLCJhZGRyZXNzMiIsImNpdHkiLCJjb3VudHJ5Q29kZSIsInBvc3RhbENvZGUiLCJzdGF0ZU9yUHJvdmluY2UiLCJzdGF0ZU9yUHJvdmluY2VDb2RlIiwiY3VzdG9tRmllbGRzIiwiZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwicGF5ZXIiLCJnaXZlbl9uYW1lIiwic3VybmFtZSIsImVtYWlsX2FkZHJlc3MiLCJhZGRyZXNzX2xpbmVfMSIsImFkZHJlc3NfbGluZV8yIiwiYWRtaW5fYXJlYV8yIiwiY291bnRyeV9jb2RlIiwicG9zdGFsX2NvZGUiLCJhZG1pbl9hcmVhXzEiLCJwaG9uZV9udW1iZXIiLCJuYXRpb25hbF9udW1iZXIiLCJnZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzIiwib3JkZXJEZXRhaWxzIiwicHVyY2hhc2VfdW5pdHMiLCJmdWxsX25hbWUiLCJzaGlwcGluZyIsInNwbGl0IiwiZ2V0VmFsaWRCdXR0b25TdHlsZSIsImxhYmVsIiwic2hhcGUiLCJ2YWxpZFN0eWxlcyIsImdldFZhbGlkSGVpZ2h0Iiwib21pdEJ5IiwiaXNOaWwiLCJyZW1vdmVFbGVtZW50IiwiZWxlbWVudElkIiwiSU5URVJOQUxfVVNFX09OTFkiLCJDb250ZW50VHlwZSIsIlNES19WRVJTSU9OX0hFQURFUlMiLCJCaWdDb21tZXJjZVBheW1lbnRzUmVxdWVzdFNlbmRlciIsInJlcXVlc3RTZW5kZXIiLCJ1cmwiLCJKc29uIiwicG9zdCIsInB1dCIsImdldCIsIkJpZ0NvbW1lcmNlUGF5bWVudHNTY3JpcHRMb2FkZXIiLCJnZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93IiwibG9hZFBheVBhbFNESyIsInBheXBhbCIsImlzVmVubW9FbmFibGVkIiwiaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUiLCJpc0dvb2dsZVBheUVuYWJsZWQiLCJzaG91bGRFbmFibGVDYXJkIiwiZW5hYmxlQ2FyZEZ1bmRpbmciLCJkaXNhYmxlQ2FyZEZ1bmRpbmciLCJlbmFibGVDcmVkaXRGdW5kaW5nIiwiZGlzYWJsZUNyZWRpdEZ1bmRpbmciLCJlbmFibGVWZW5tb0Z1bmRpbmciLCJkaXNhYmxlVmVubW9GdW5kaW5nIiwiZ29vZ2xlUGF5Q29tcG9uZW50IiwiY2FyZEZpZWxkc0NvbXBvbmVudCIsImRpc2FibGVGdW5kaW5nIiwiZW5hYmxlRnVuZGluZyIsImdldEhvc3QiLCJjcmVhdGVGb3JtUG9zdGVyIiwiY3JlYXRlUmVxdWVzdFNlbmRlciIsImhvc3QiLCJnZXRTY3JpcHRMb2FkZXIiLCJtZXNzYWdlc1N0eWxlcyIsImxheW91dCIsImxvZ28iLCJyYXRpbyIsInRleHQiLCJJbnZhbGlkQXJndW1lbnRFcnJvciIsIlBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciIsImludmFsaWRGaWVsZHMiLCJQYXltZW50TWV0aG9kSW52YWxpZEVycm9yIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSIsImluc3RydW1lbnQiLCJzaG91bGRTYXZlSW5zdHJ1bWVudCIsInNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQiLCJpc1ZhdWx0ZWRJbnN0cnVtZW50IiwiQm9vbGVhbiIsImluc3RydW1lbnRJZCIsImlzQmFzZUluc3RydW1lbnQiLCJCaWdDb21tZXJjZVBheW1lbnRzUGF5bWVudFN0cmF0ZWd5IiwiYmlnQ29tbWVyY2VQYXltZW50c0ludGVncmF0aW9uU2VydmljZSIsInBheXBhbFNka0hlbHBlciIsImxvYWRpbmdJbmRpY2F0b3IiLCJpbml0aWFsaXplIiwiYmlnY29tbWVyY2VfcGF5bWVudHMiLCJsb2FkUGF5bWVudE1ldGhvZCIsImJhbm5lckNvbnRhaW5lcklkIiwicGF5cGFsQk5QTENvbmZpZ3VyYXRpb24iLCJjb25zb2xlIiwiYmFubmVyQ29uZmlndXJhdGlvbiIsIk1lc3NhZ2VzIiwicmVuZGVyTWVzc2FnZXMiLCJsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyIiwib25Jbml0IiwicmVuZGVyQnV0dG9uIiwic2hvdWxkUmVuZGVyUGF5UGFsQnV0dG9uT25Jbml0aWFsaXphdGlvbiIsImV4ZWN1dGUiLCJwYXlsb2FkIiwicGF5bWVudCIsIm9yZGVyIiwib25FcnJvciIsImlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YSIsInBheW1lbnRQYXlsb2FkIiwicHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQiLCJwcmVwYXJlUGF5bWVudFBheWxvYWQiLCJzdWJtaXRPcmRlciIsImlzUHJvdmlkZXJFcnJvciIsIlByb21pc2UiLCJfcmVzb2x2ZSIsInJlamVjdCIsInBheXBhbEJ1dHRvbiIsImNsb3NlIiwiaGFuZGxlRXJyb3IiLCJmaW5hbGl6ZSIsImRlaW5pdGlhbGl6ZSIsInJlc29sdmUiLCJwYXlwYWxPcmRlcklkIiwic2hvdWxkQ29uZmlybUluc3RydW1lbnQiLCJpc1RydXN0ZWRWYXVsdGluZ0Zsb3ciLCJiaWdwYXlfdG9rZW4iLCJ0b2tlbiIsInBheW1lbnRCdXR0b25TdHlsZXMiLCJjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMiLCJvblJlbmRlckJ1dHRvbiIsIm9uVmFsaWRhdGUiLCJzdWJtaXRGb3JtIiwiYnV0dG9uT3B0aW9ucyIsImZ1bmRpbmdTb3VyY2UiLCJGVU5ESU5HIiwiUEFZUEFMIiwib25DbGljayIsIl8iLCJhY3Rpb25zIiwiaGFuZGxlQ2xpY2siLCJvbkFwcHJvdmUiLCJkYXRhIiwiaGFuZGxlQXBwcm92ZSIsIm9uQ2FuY2VsIiwidG9nZ2xlTG9hZGluZ0luZGljYXRvciIsIkJ1dHRvbnMiLCJpc0VsaWdpYmxlIiwicmVuZGVyIiwib3JkZXJJRCIsImZpZWxkc1ZhbHVlcyIsImdldEZpZWxkc1ZhbHVlcyIsImluc3RydW1lbnRzIiwiZ2V0SW5zdHJ1bWVudHMiLCJmaW5kSW5zdHJ1bWVudCIsImJpZ3BheVRva2VuIiwidHJ1c3RlZFNoaXBwaW5nQWRkcmVzcyIsImlzTG9hZGluZyIsInBheXBhbE1lc3NhZ2VzT3B0aW9ucyIsImFtb3VudCIsImdldENoZWNrb3V0T3JUaHJvdyIsIm91dHN0YW5kaW5nQmFsYW5jZSIsInBsYWNlbWVudCIsImlzQmlnQ29tbWVyY2VQYXltZW50c1Byb3ZpZGVyRXJyb3IiLCJlIiwicHJvdmlkZXJfZXJyb3IiLCJVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlIiwiVERTZWN1cmVWZXJpZmljYXRpb25NZXRob2QiLCJURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUiLCJDb29raWVTdG9yYWdlIiwiY29va2llS2V5IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY29va2llIiwiZmlyc3RJbmRleCIsImluZGV4T2YiLCJsYXN0SW5kZXgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJzdWJzdHJpbmciLCJzZXQiLCJzZWN1cmUiLCJjb29raWVUZXh0IiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJ0b1VUQ1N0cmluZyIsIm5vdyIsIkRhdGUiLCJtaW51dGVzIiwic2V0VGltZSIsImdldFRpbWUiLCJyZW1vdmUiLCJCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyIsImluaXRpYWxpemVQYXlQYWxGYXN0bGFuZSIsImlzVGVzdE1vZGVFbmFibGVkIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInBheXBhbEZhc3RsYW5lIiwiZGVmYXVsdFN0eWxlcyIsInJvb3QiLCJiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5IiwiRmFzdGxhbmUiLCJnZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3ciLCJsb29rdXBDdXN0b21lck9yVGhyb3ciLCJpZGVudGl0eSIsImxvb2t1cEN1c3RvbWVyQnlFbWFpbCIsInRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiY3VzdG9tZXJDb250ZXh0SWQiLCJ0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93IiwidXBkYXRlU3RvcmFnZVNlc3Npb25JZCIsInNldERhdGUiLCJnZXREYXRlIiwiY29va2llc09wdGlvbiIsInJlbW92ZVN0b3JhZ2VTZXNzaW9uSWQiLCJnZXRTdG9yYWdlU2Vzc2lvbklkIiwibWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YSIsImF1dGhlbnRpY2F0aW9uUmVzdWx0IiwiYXV0aGVudGljYXRpb25TdGF0ZSIsInByb2ZpbGVEYXRhIiwicGF5cGFsQmlsbGluZ0FkZHJlc3MiLCJjYXJkIiwicGF5bWVudFNvdXJjZSIsImJpbGxpbmdBZGRyZXNzIiwicGF5cGFsU2hpcHBpbmdBZGRyZXNzIiwic2hpcHBpbmdBZGRyZXNzIiwicGF5cGFsUHJvZmlsZU5hbWUiLCJwYXlwYWxJbnN0cnVtZW50IiwibWFwUGF5UGFsVG9CY0FkZHJlc3MiLCJwaG9uZU51bWJlciIsIm1hcFBheVBhbFRvQmNJbnN0cnVtZW50IiwiYWRkcmVzc2VzIiwiZmlsdGVyQWRkcmVzc2VzIiwiVU5SRUNPR05JWkVEIiwiYnJhbmQiLCJleHBpcnkiLCJsYXN0RGlnaXRzIiwiZXhwaXJ5WWVhciIsImV4cGlyeU1vbnRoIiwiZGVmYXVsdEluc3RydW1lbnQiLCJpaW4iLCJsYXN0NCIsIm1ldGhvZCIsInVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvbk1vZGUiLCJQQU4iLCJtYXBCY1RvUGF5UGFsQWRkcmVzcyIsImFkZHJlc3NMaW5lMSIsImFkZHJlc3NMaW5lMiIsImFkbWluQXJlYTEiLCJhZG1pbkFyZWEyIiwicHJvZmlsZU5hbWUiLCJmdWxsTmFtZSIsInBob25lRGF0YSIsIm5hdGlvbmFsTnVtYmVyIiwiY291bnRyeSIsInJlZHVjZSIsImN1c3RvbWVyQWRkcmVzc2VzIiwiY3VycmVudEFkZHJlc3MiLCJzb21lIiwiY3VzdG9tZXJBZGRyZXNzIiwiaXNFcXVhbEFkZHJlc3NlcyIsImZpcnN0QWRkcmVzcyIsInNlY29uZEFkZHJlc3MiLCJpc0VxdWFsIiwibm9ybWFsaXplQWRkcmVzcyIsIm9taXQiLCJjcmVhdGVCaWdDb21tZXJjZVBheW1lbnRzRmFzdGxhbmVVdGlscyIsImlzSW52YWxpZFN0eWxlT3B0aW9uIiwic3R5bGVPcHRpb24iLCJnZXRGYXN0bGFuZVN0eWxlcyIsInN0eWxlU2V0dGluZ3MiLCJ1aVN0eWxlcyIsImZhc3RsYW5lU3R5bGVzIiwiaW5wdXQiLCJ0b2dnbGUiLCJ0ZXh0Qm9keSIsInRleHRDYXB0aW9uIiwiY2FwdGlvbiIsImJyYW5kaW5nIiwiY2xlYW5VcEZhc3RsYW5lU3R5bGVzIiwiZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJlcnJvckNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIiwiZm9udEZhbWlseSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseSIsImZvbnRTaXplQmFzZSIsImZhc3RsYW5lUm9vdFNldHRpbmdzRm9udFNpemUiLCJwYWRkaW5nIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nIiwicHJpbWFyeUNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJSYWRpdXMiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJDb2xvciIsImZvY3VzQm9yZGVyQ29sb3IiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NGb2N1c0JvcmRlckJhc2UiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJXaWR0aCIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoIiwidGV4dENvbG9yQmFzZSIsImZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2UiLCJjb2xvclByaW1hcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JQcmltYXJ5IiwiY29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRvZ2dsZVNldHRpbmdzQ29sb3JTZWNvbmRhcnkiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NDb2xvciIsImZvbnRTaXplIiwiZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIiwiZmFzdGxhbmVCcmFuZGluZ1NldHRpbmdzIiwibWVyZ2VGYXN0bGFuZVN0eWxlcyIsImlzUGF5UGFsRmFzdGxhbmVDdXN0b21lciIsImN1c3RvbWVyIiwiaXNFeHBlcmltZW50RW5hYmxlZCIsImZlYXR1cmVzIiwiZXhwZXJpbWVudE5hbWUiLCJmYWxsYmFja1ZhbHVlIiwiQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IiwiYmlnQ29tbWVyY2VQYXltZW50c1NkayIsImJpZ0NvbW1lcmNlUGF5bWVudHNGYXN0bGFuZVV0aWxzIiwiYmlnY29tbWVyY2VfcGF5bWVudHNfZmFzdGxhbmUiLCJvbkNoYW5nZSIsImlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCIsInRocmVlRFNWZXJpZmljYXRpb25NZXRob2QiLCJzaG91bGRSdW5BdXRoZW50aWNhdGlvbkZsb3ciLCJydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93IiwiaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQiLCJyZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50IiwiaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZSIsIm9yZGVyUmVxdWVzdCIsImlzVmF1bHRlZEZsb3ciLCJpc0JpZ2NvbW1lcmNlRmFzdGxhbmVSZXF1ZXN0RXJyb3IiLCJpbnZhbGlkUmVxdWVzdEVycm9yIiwidHJhbnNsYXRpb25LZXkiLCJnZXRDdXN0b21lck9yVGhyb3ciLCJwYXltZW50UHJvdmlkZXJDdXN0b21lciIsImdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwicGF5cGFsRmFzdGxhbmVDdXN0b21lciIsInBheXBhbEZhc3RsYW5lU2Vzc2lvbklkIiwiaXNHdWVzdCIsIkNBTkNFTEVEIiwiZ2V0Q3VzdG9tZXIiLCJnZXRCaWxsaW5nQWRkcmVzcyIsImN1c3RvbWVyRW1haWwiLCJ1cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lciIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsInRyaW0iLCJjYXJkQ29tcG9uZW50T3B0aW9ucyIsImZpZWxkcyIsImNhcmRob2xkZXJOYW1lIiwicHJlZmlsbCIsImVuYWJsZWQiLCJwYXlwYWxDb21wb25lbnRNZXRob2RzIiwiRmFzdGxhbmVDYXJkQ29tcG9uZW50IiwiZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3ciLCJub25jZSIsImlzQmlnY29tbWVyY2VQYXltZW50c0Zhc3RsYW5lVGhyZWVEU0F2YWlsYWJsZSIsImlzM2RzRW5hYmxlZCIsImdldDNEU05vbmNlIiwicGF5cGFsX2Zhc3RsYW5lX3Rva2VuIiwiZ2V0UGF5bWVudFRva2VuIiwiaXMzRFNFbmFibGVkIiwiZmFzdGxhbmVUb2tlbiIsImdldE9yZGVyT3JUaHJvdyIsImNoZWNrb3V0VXJsIiwiZ2V0U3RvcmVDb25maWdPclRocm93IiwibGlua3MiLCJjaGVja291dExpbmsiLCJ0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCIsIlRocmVlRG9tYWluU2VjdXJlQ2xpZW50IiwidGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzIiwib3JkZXJBbW91bnQiLCJ0b0ZpeGVkIiwidGhyZWVEU1JlcXVlc3RlZCIsIkFsd2F5cyIsInRyYW5zYWN0aW9uQ29udGV4dCIsImV4cGVyaWVuY2VfY29udGV4dCIsImxvY2FsZSIsInJldHVybl91cmwiLCJjYW5jZWxfdXJsIiwiaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlIiwibGlhYmlsaXR5U2hpZnQiLCJ0aHJlZURTTm9uY2UiLCJObyIsIlVua25vd24iLCJFcnJvcmVkIiwiQ2FuY2VsbGVkIiwiU3VjY2VlZGVkIiwiWWVzIiwiUG9zc2libGUiLCJwYXlwYWxBeG9TZGsiLCJzZWxlY3Rpb25DaGFuZ2VkIiwic2VsZWN0ZWRDYXJkIiwicHJvZmlsZSIsInNob3dDYXJkU2VsZWN0b3IiLCJzZWxlY3RlZEluc3RydW1lbnQiLCJjaGVja291dFNldHRpbmdzIiwiTm90SW1wbGVtZW50ZWRFcnJvciIsIkJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlclBheW1lbnRTdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX3BheWxhdGVyIiwiYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbnMiLCJiaWdDb21tZXJjZVNkayIsImZ1bmRpbmdTb3VyY2VzIiwiUEFZTEFURVIiLCJDUkVESVQiLCJoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uIiwiVGltZW91dEVycm9yIiwiQmlnQ29tbWVyY2VQYXltZW50c1JhdGVQYXlQYXltZW50U3RyYXRlZ3kiLCJwb2xsaW5nSW50ZXJ2YWwiLCJtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lIiwicG9sbGluZ1RpbWVyIiwic3RvcFBvbGxpbmciLCJub29wIiwiYmlnY29tbWVyY2VfcGF5bWVudHNfcmF0ZXBheSIsImxlZ2FsVGV4dENvbnRhaW5lciIsImxvYWRpbmdDb250YWluZXJJZCIsImNyZWF0ZUZyYXVkTmV0U2NyaXB0IiwibG9hZEZyYXVkbmV0Q29uZmlnIiwicmVuZGVyTGVnYWxUZXh0IiwibWV0YWRhdGFJZCIsImd1aWQiLCJyYXRlcGF5QmlydGhEYXRlIiwicmF0ZXBheVBob25lTnVtYmVyIiwicmF0ZXBheVBob25lQ291bnRyeUNvZGUiLCJyYXRlX3BheSIsImJpcnRoX2RhdGUiLCJub3JtYWxpemVEYXRlIiwiaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJmcmF1ZE5ldFNjcmlwdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmcmF1ZE5ldENvbmZpZyIsImRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20iLCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50IiwiZGF0ZSIsImZvcm1hdHRlZERhdGUiLCJmb3JtYXREYXRlIiwiZm9ybWF0dGVkTW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudElkIiwibGVnYWxUZXh0Q29udGFpbmVySWQiLCJidXR0b25Db250YWluZXJJZCIsImJ1dHRvbkNvbnRhaW5lciIsImJ1dHRvbkNvbnRhaW5lclBhcmVudCIsInBhcmVudE5vZGUiLCJtYXJnaW5Cb3R0b20iLCJzZXRBdHRyaWJ1dGUiLCJwcmVwZW5kIiwicmF0ZVBheUJ1dHRvbiIsIkxlZ2FsIiwiUEFZX1VQT05fSU5WT0lDRSIsInJlc2V0UG9sbGluZ01lY2hhbmlzbSIsInRlc3RNb2RlIiwic2NyaXB0RWxlbWVudCIsImdlbmVyYXRlR1VJRCIsImYiLCJzIiwic2FuZGJveCIsImlubmVySFRNTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJpIiwiTWF0aCIsImZsb29yIiwiY2hhcmFjdGVycyIsInJhbmRvbSIsInNjcmlwdCIsInNyYyIsInJlaW5pdGlhbGl6ZVN0cmF0ZWd5IiwicmVzb2x2ZVByb21pc2UiLCJyZWplY3RQcm9taXNlIiwidGltZW91dCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJvcmRlclN0YXR1cyIsInBhcmFtcyIsInVzZU1ldGFkYXRhIiwiaXNPcmRlckFwcHJvdmVkIiwiUG9sbGluZ1N0b3AiLCJpc1BvbGxpbmdFcnJvciIsIlBvbGxpbmdFcnJvciIsImdhdGV3YXkiLCJIb3N0ZWRGaWVsZFR5cGUiLCJpc0NyZWRpdENhcmRGb3JtRmllbGRzIiwiQ2FyZE51bWJlciIsIkNhcmROYW1lIiwiQ2FyZEV4cGlyeSIsImlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzIiwiQ2FyZE51bWJlclZlcmlmaWNhdGlvbiIsIkNhcmRDb2RlVmVyaWZpY2F0aW9uIiwiQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiIsIlBheW1lbnRNZXRob2RGYWlsZWRFcnJvciIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsIlBheW1lbnRJbnZhbGlkRm9ybUVycm9yIiwiZGV0YWlscyIsIkJpZ0NvbW1lcmNlUGF5bWVudHNDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSIsImJpZ2NvbW1lcmNlX3BheW1lbnRzX2NyZWRpdGNhcmRzIiwiYmlnQ29tbWVyY2VQYXltZW50c0luaXRpYWxpemF0aW9uT3B0aW9ucyIsImZvcm0iLCJvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciIsIm9uTG9hZENvbXBsZXRlIiwiaG9zdGVkRm9ybU9wdGlvbnMiLCJpc0NyZWRpdENhcmRGb3JtIiwiaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0iLCJoYXNVbmRlZmluZWRWYWx1ZXMiLCJpbml0aWFsaXplRmllbGRzIiwic2hvdWxkSW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lIiwiaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyIsImV4ZWN1dGlvblBheW1lbnREYXRhIiwidmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdyIsInN1Ym1pdEhvc3RlZEZvcm0iLCJnZXRJbnN0cnVtZW50UGFyYW1zIiwicmV0dXJuZWRPcmRlcklkIiwic3VibWl0UGF5bWVudFBheWxvYWQiLCJyZXR1cm5lZFZhdWx0ZWRUb2tlbiIsImN2dkZpZWxkIiwiZXhwaXJ5RmllbGQiLCJudW1iZXJGaWVsZCIsIm5hbWVGaWVsZCIsInZlcmlmaWNhdGlvbl9ub25jZSIsImNhcmRfd2l0aF9vcmRlciIsImZvcm1PcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwiZ2V0RXhlY3V0ZUNhbGxiYWNrIiwiY2FyZEZpZWxkc0NvbmZpZyIsImdldElucHV0U3R5bGVzIiwidmF1bHRTZXR1cFRva2VuIiwiaW5wdXRFdmVudHMiLCJldmVudCIsIm9uQ2hhbmdlSGFuZGxlciIsIm9uRm9jdXMiLCJvbkZvY3VzSGFuZGxlciIsIm9uQmx1ciIsIm9uQmx1ckhhbmRsZXIiLCJvbklucHV0U3VibWl0UmVxdWVzdCIsImNhcmRGaWVsZHMiLCJDYXJkRmllbGRzIiwic3R5bGl6ZUlucHV0Q29udGFpbmVycyIsInJlbmRlckZpZWxkcyIsInJlbmRlclZhdWx0ZWRGaWVsZHMiLCJjcmVhdGVWYXVsdFNldHVwVG9rZW5DYWxsYmFjayIsImNyZWF0ZU9yZGVyQ2FsbGJhY2siLCJjcmVhdGVWYXVsdFNldHVwVG9rZW4iLCJmaWVsZHNPcHRpb25zIiwiZ2V0Q2FyZEZpZWxkc09yVGhyb3ciLCJjYXJkQ29kZSIsImNvbnRhaW5lcklkIiwiQ1ZWRmllbGQiLCJwbGFjZWhvbGRlciIsImNhcmRFeHBpcnkiLCJFeHBpcnlGaWVsZCIsImNhcmROYW1lIiwiTmFtZUZpZWxkIiwiY2FyZE51bWJlciIsIk51bWJlckZpZWxkIiwiY2FyZENvZGVWZXJpZmljYXRpb24iLCJjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIiwiY2FyZE51bWJlclZlcmlmaWNhdGlvbiIsImdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkIiwiZW1pdHRlZEJ5IiwiZmllbGRUeXBlIiwibWFwRmllbGRUeXBlIiwic3VibWl0Q29uZmlnIiwic3VibWl0IiwiY2FyZEZpZWxkc1N0YXRlIiwidGhlbiIsInZhbGlkYXRpb25EYXRhIiwiZ2V0VmFsaWRpdHlEYXRhIiwiaXNWYWxpZCIsIm1hcFZhbGlkYXRpb25FcnJvcnMiLCJ1cGRhdGVkRmllbGRzIiwiY2FyZE5hbWVGaWVsZCIsImZpZWxkc0tleXMiLCJldmVyeSIsImZpZWxkc0Vycm9ycyIsImdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlIiwiQ2FyZENvZGUiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tbW9uU3R5bGVzIiwiZGVmYXVsdCIsImZvbnRXZWlnaHQiLCJvdXRsaW5lIiwidmFsdWVzIiwiYm94U2hhZG93IiwiYmFja2dyb3VuZCIsIm1hcmdpbkxlZnQiLCJvbkVudGVyIiwiYmlnQ29tbWVyY2VQYXltZW50c1BheW1lbnRQcm92aWRlckN1c3RvbWVyIiwiaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZCIsImlzQmlnQ29tbWVyY2VQYXltZW50c0FuYWx5dGljc1YyRW5hYmxlZCIsImNvbm5lY3RDbGllbnRUb2tlbiIsInBheVBhbEZhc3RsYW5lU2RrIiwiQmlnQ29tbWVyY2VQYXltZW50c0FsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSIsImJpZ0NvbW1lcmNlUGF5bWVudHNTZGtIZWxwZXIiLCJpc1BvbGxpbmdFbmFibGVkIiwiYmlnY29tbWVyY2VfcGF5bWVudHNfYXBtcyIsImJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHMiLCJzaG91bGRSZW5kZXJGaWVsZHMiLCJpc05vbkluc3RhbnRQYXltZW50TWV0aG9kIiwiYmlnQ29tbWVyY2VQYXltZW50c0J1dHRvbiIsIkFwcHJvdmVkIiwiZGVJbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsInBheXBhbEFtcHNTZGsiLCJnZXRQYXlwYWxBbXBzU2RrT3JUaHJvdyIsImJ1dHRvblN0eWxlIiwib25Jbml0QnV0dG9uIiwib25DcmVhdGVPcmRlciIsImhhbmRsZUZhaWx1cmUiLCJ1c2VTdG9yZUNyZWRpdCIsImFwbUZpZWxkc0NvbnRhaW5lciIsImFwbUZpZWxkc1N0eWxlcyIsImZpZWxkQ29udGFpbmVyRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJQYXltZW50RmllbGRzIiwidG9VcHBlckNhc2UiLCJCaWdDb21tZXJjZVBheW1lbnRzUmVkaXJlY3RBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kiLCJhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCIsInJlZGlyZWN0X3VybCIsImlzUmVkaXJlY3RFcnJvciIsInJlZGlyZWN0VXJsIiwibG9jYXRpb24iLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9QYXltZW50U3RyYXRlZ3kiLCJiaWdjb21tZXJjZV9wYXltZW50c192ZW5tbyIsIlZFTk1PIiwiQmlnQ29tbWVyY2VQYXltZW50c0N1c3RvbWVyU3RyYXRlZ3kiLCJnZXRQYXltZW50TWV0aG9kIiwic2lnbkluIiwiY3JlZGVudGlhbHMiLCJzaWduSW5DdXN0b21lciIsInNpZ25PdXQiLCJzaWduT3V0Q3VzdG9tZXIiLCJleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0IiwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayIsIm9uQ29tcGxldGUiLCJjaGVja291dFRvcEJ1dHRvblN0eWxlcyIsImRlZmF1bHRDYWxsYmFja3MiLCJob3N0ZWRDaGVja291dENhbGxiYWNrcyIsIm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlIiwib25TaGlwcGluZ09wdGlvbnNDaGFuZ2UiLCJvbkhvc3RlZENoZWNrb3V0QXBwcm92ZSIsImJ1dHRvblJlbmRlck9wdGlvbnMiLCJ1cGRhdGVCaWxsaW5nQWRkcmVzcyIsImxpbmVJdGVtcyIsInBoeXNpY2FsSXRlbXMiLCJ1cGRhdGVTaGlwcGluZ0FkZHJlc3MiLCJzaGlwcGluZ09wdGlvbiIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiQmlnQ29tbWVyY2VQYXltZW50c0Zhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneSIsImNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkIiwiaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCIsInVwZGF0ZUN1c3RvbWVyRGF0YVN0YXRlIiwidXBkYXRlZFN0YXRlIiwiaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQiLCJjb25zaWdubWVudHMiLCJnZXRDb25zaWdubWVudHMiLCJmaXJzdFNoaXBwaW5nT3B0aW9uIiwic2hpcHBpbmdPcHRpb25JZCIsIkJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckN1c3RvbWVyU3RyYXRlZ3kiLCJiaWdDb21tZXJjZVBheW1lbnRzUGF5TGF0ZXIiLCJCaWdDb21tZXJjZVBheW1lbnRzVmVubW9DdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsQnV0dG9uUmVuZGVyIiwiQmlnQ29tbWVyY2VQYXltZW50c0J1dHRvblN0cmF0ZWd5IiwiaXNCdXlOb3dGbG93IiwibG9hZERlZmF1bHRDaGVja291dCIsIm9uRWxpZ2liaWxpdHlGYWlsdXJlIiwiaXNBcHBTd2l0Y2hFbmFibGVkIiwiaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQiLCJhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlIiwiYnV5Tm93Rmxvd0NhbGxiYWNrcyIsImhhc1JldHVybmVkIiwicmVzdW1lIiwiYnV5Tm93Q2FydCIsImxvYWRDaGVja291dCIsIkJpZ0NvbW1lcmNlUGF5bWVudHNQYXlMYXRlckJ1dHRvblN0cmF0ZWd5IiwicGF5UGFsU2RrSGVscGVyIiwibWVzc2FnaW5nQ29udGFpbmVySWQiLCJtZXNzYWdpbmdDb250YWluZXIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXlwYWxNZXNzYWdlc1NkayIsIkJpZ0NvbW1lcmNlUGF5bWVudHNBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSIsIkJpZ0NvbW1lcmNlUGF5bWVudHNWZW5tb0J1dHRvblN0cmF0ZWd5IiwiZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyIsInZhbGlkQnV0dG9uU3R5bGUiLCJnb2xkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/bigcommerce-payments.js\n\n}");

/***/ })

}]);