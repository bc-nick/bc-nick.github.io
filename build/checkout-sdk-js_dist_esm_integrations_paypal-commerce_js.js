"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_paypal-commerce_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js":
/*!*******************************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPayPalCommerceAlternativeMethodsButtonStrategy: () => (/* binding */ Ct),\n/* harmony export */   createPayPalCommerceAlternativeMethodsPaymentStrategy: () => (/* binding */ Ee),\n/* harmony export */   createPayPalCommerceButtonStrategy: () => (/* binding */ yt),\n/* harmony export */   createPayPalCommerceCreditButtonStrategy: () => (/* binding */ ft),\n/* harmony export */   createPayPalCommerceCreditCardsPaymentStrategy: () => (/* binding */ qe),\n/* harmony export */   createPayPalCommerceCreditCustomerStrategy: () => (/* binding */ at),\n/* harmony export */   createPayPalCommerceCreditPaymentStrategy: () => (/* binding */ ne),\n/* harmony export */   createPayPalCommerceCustomerStrategy: () => (/* binding */ it),\n/* harmony export */   createPayPalCommerceFastlaneCustomerStrategy: () => (/* binding */ pt),\n/* harmony export */   createPayPalCommerceFastlanePaymentStrategy: () => (/* binding */ Qe),\n/* harmony export */   createPayPalCommercePaymentStrategy: () => (/* binding */ Q),\n/* harmony export */   createPayPalCommerceRatePayPaymentStrategy: () => (/* binding */ Ye),\n/* harmony export */   createPayPalCommerceVenmoButtonStrategy: () => (/* binding */ wt),\n/* harmony export */   createPayPalCommerceVenmoCustomerStrategy: () => (/* binding */ dt),\n/* harmony export */   createPayPalCommerceVenmoPaymentStrategy: () => (/* binding */ re)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var _bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @bigcommerce/form-poster */ \"../checkout-sdk-js/node_modules/@bigcommerce/form-poster/lib/index.js\");\n/* harmony import */ var _bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @bigcommerce/request-sender */ \"../checkout-sdk-js/node_modules/@bigcommerce/request-sender/esm/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\nvar l,c={};function p(e,t){return Object.assign(e,{resolveIds:t})}c.d=(e,t)=>{for(var i in t)c.o(t,i)&&!c.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class u extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class h extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(l||(l={}));class y extends u{constructor(e){super(function(e){switch(e){case l.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case l.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case l.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case l.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case l.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case l.MissingCheckoutConfig:case l.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case l.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case l.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case l.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case l.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case l.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case l.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}var m=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class g{constructor(e){this.scriptLoader=e,this.window=window}getPayPalFastlaneSdk(e,t,i){return m(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return m(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return m(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return m(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return m(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":r,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:a},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":r,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:a},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:a,buyerCountry:r,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":a,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":r}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:a,isDeveloperModeApplicable:r,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},r&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":a}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const v={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},f=\"embedded-checkout-loading-indicator-rotation\";class S{constructor(e){this.styles=Object.assign(Object.assign({},v),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${f} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(f))return;const t=document.createElement(\"style\");t.id=f,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${f} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}class I extends u{constructor(e){super(e||\"An unexpected error has occurred during buy now cart creation process. Please try again later.\"),this.name=\"BuyNowCartCreationError\",this.type=\"buy_now_cart_creation_error\"}}const w={body:{},headers:{},status:0};class b extends u{constructor(e,{message:t,errors:i}={}){const{body:n,headers:o,status:a}=e||w;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=o,this.status=a,this.errors=i||[]}}var P,C,O,k,A,E,T,z;!function(e){e.BuyNow=\"BUY_NOW\"}(P||(P={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(C||(C={})),function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(O||(O={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(k||(k={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(A||(A={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(E||(E={})),function(e){e.OXXO=\"oxxo\"}(T||(T={})),function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(z||(z={}));var F=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class B{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalCommerceRequestSender=i,this.paypalCommerceScriptLoader=n}loadPayPalSdk(e,t,i,n){return F(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),a=t||o.getCartOrThrow().currency.code,r=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalCommerceScriptLoader.getPayPalSDK(r,a,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return F(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new I}})}createOrder(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return F(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalCommerceRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(){return F(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getConsignmentsOrThrow()[0];try{yield this.paypalCommerceRequestSender.updateOrder({availableShippingOptions:i.availableShippingOptions,cartId:t.id,selectedShippingOption:i.selectedShippingOption})}catch(e){throw new b}})}getOrderStatus(e,t){return F(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalCommerceRequestSender.getOrderStatus(e,t);return i}catch(e){throw new b}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===P.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return F(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{var i;return e.id===(null===(i=t.selectedShippingOption)||void 0===i?void 0:i.id)}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[a,...r]=o.split(\" \");return this.getAddress({firstName:a,lastName:r.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e){const{color:t,height:i,label:n,shape:o}=e||{},r={color:t&&A[t]?t:void 0,height:this.getValidHeight(i),label:n&&k[n]?n:void 0,shape:o&&E[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(r,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}const M=\"This API endpoint is for internal use only and may change in the future\";var D;!function(e){e.Json=\"application/json\",e.JsonV1=\"application/vnd.bc.v1+json\"}(D||(D={}));const x=D,N={\"X-Checkout-SDK-Version\":\"1.867.0\"};var _=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class j{constructor(e){this.requestSender=e}createOrder(e,t){return _(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e){return _(this,void 0,void 0,function*(){const t=e,i=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.put(\"/api/storefront/initialization/paypalcommerce\",{headers:i,body:t})).body})}getOrderStatus(e=\"paypalcommerce\",t){return _(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}var U=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class V{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return U(this,void 0,void 0,function*(){const o=this.getPayPalSdkScriptConfigOrThrow(e,t,i);return this.loadPayPalSDK(o,n)})}loadPayPalSDK(e,t=!1){return U(this,void 0,void 0,function*(){if(!this.window.paypal||t){const t=this.transformConfig(e.options),i=this.transformConfig(e.attributes),n=`https://www.paypal.com/sdk/js?${new URLSearchParams(t).toString()}`;yield this.scriptLoader.loadScript(n,{async:!0,attributes:i})}if(!this.window.paypal)throw new h;return this.window.paypal})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:a}=e;if(!(null==a?void 0:a.clientId))throw new y(l.MissingPaymentMethod);const{intent:r,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:m,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=a,I=h||i,w=\"paypalcommercecreditcards\"===n,b=w?[\"card\"]:[],P=m?[\"credit\",\"paylater\"]:[],C=u?[\"venmo\"]:[],O=S?[\"googlepay\"]:[],k=i?[\"card-fields\"]:[],A=[...w?[]:[\"card\"],...m?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...v.filter(e=>!f.includes(e))],E=[...b,...P,...C,...f];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":E.length>0?E:void 0,\"disable-funding\":A.length>0?A:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...O,...k],currency:t,intent:r},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}const R=e=>{const{getHost:o}=e.getState();return new B((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__.createFormPoster)(),e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:o()})),new V((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()))},L={\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"};class $ extends u{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class q extends ${constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}class G extends b{constructor(e){super(e,{message:\"There is a problem processing your payment. Please try again later.\"}),this.name=\"PaymentMethodInvalidError\",this.type=\"payment_method_invalid\"}}class H extends u{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}function Y(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function W(e){return Boolean(e.instrumentId)}const K=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};function X(e){return\"object\"==typeof e&&null!==e&&\"bigpayToken\"in e&&\"defaultInstrument\"in e&&\"provider\"in e&&\"trustedShippingAddress\"in e&&\"method\"in e&&\"type\"in e}var J=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Z{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalCommerceSdk=i,this.loadingIndicator=n}initialize(e){var t;return J(this,void 0,void 0,function*(){const{methodId:i,paypalcommerce:n}=e||{};if(this.paypalcommerce=n,!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(i);const o=this.paymentIntegrationService.getState(),a=o.getPaymentMethodOrThrow(i),{container:r,bannerContainerId:s}=n,{orderId:d,paypalBNPLConfiguration:l=[],isPayPalCreditAvailable:c}=a.initializationData||{};if(void 0!==s){if(!document.getElementById(s))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=null==l?void 0:l.find(({id:e})=>\"checkout\"===e);if(c||!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(a,o.getCartOrThrow().currency.code);return t&&\"function\"==typeof(null==t?void 0:t.Messages)?this.renderMessages(t,s,e):void console.error(\"[BC PayPalCommerce PayLater]: banner could not be rendered, due to issues with loading PayPal SDK\")}d?this.orderId=null===(t=a.initializationData)||void 0===t?void 0:t.orderId:(this.loadingIndicatorContainer=null==r?void 0:r.split(\"#\")[1],yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),n.onInit&&\"function\"==typeof n.onInit&&n.onInit(()=>this.renderButton(i,n)),(void 0===n.shouldRenderPayPalButtonOnInitialization||n.shouldRenderPayPalButtonOnInitialization)&&this.renderButton(i,n))})}execute(e,t){var i,n;return J(this,void 0,void 0,function*(){const{payment:o}=e,a=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{onError:r}=this.paypalcommerce||{};if(!o)throw new q([\"payment\"]);const{methodId:s,paymentData:d}=o;if(this.isPayPalVaultedInstrumentPaymentData(d)&&!this.orderId&&(this.orderId=yield this.createOrder()),!this.orderId)throw new G;const l=this.isPayPalVaultedInstrumentPaymentData(d)?this.prepareVaultedInstrumentPaymentPayload(s,this.orderId,d):this.preparePaymentPayload(s,this.orderId,d);try{yield this.paymentIntegrationService.submitOrder(a,t),yield this.paymentIntegrationService.submitPayment(l)}catch(e){if(function(e){var t;return(e=>\"object\"==typeof e&&null!==e&&\"body\"in e)(e)&&\"offsite_redirect\"===(null===(t=e.body.additional_action_required)||void 0===t?void 0:t.type)}(e)){const t=null===(n=null===(i=e.body.additional_action_required)||void 0===i?void 0:i.data)||void 0===n?void 0:n.redirect_url;return new Promise(()=>window.location.replace(t))}return this.isProviderError(e)&&(yield this.paypalCommerceIntegrationService.loadPayPalSdk(o.methodId),yield new Promise((e,t)=>{var i;this.paypalcommerce&&(null===(i=this.paypalButton)||void 0===i||i.close(),this.renderButton(o.methodId,this.paypalcommerce),this.handleError(new Error(\"INSTRUMENT_DECLINED\"),r)),t()})),this.handleError(e,r),Promise.reject()}})}finalize(){return Promise.reject(new H)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}prepareVaultedInstrumentPaymentPayload(e,t,i){const{instrumentId:n,shouldSetAsDefaultInstrument:o}=i,a=!this.isTrustedVaultingFlow(i);return a?{methodId:e,paymentData:{shouldSaveInstrument:a,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}:{methodId:e,paymentData:{instrumentId:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t},bigpay_token:{token:n}}}}}preparePaymentPayload(e,t,i){const{shouldSaveInstrument:n=!1,shouldSetAsDefaultInstrument:o=!1}=Y(i)?i:{};return{methodId:e,paymentData:{shouldSaveInstrument:n,shouldSetAsDefaultInstrument:o,formattedPayload:{paypal_account:{order_id:t}}}}}renderButton(e,t){var i,n,o,a;const r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:d}=s.initializationData||{},{checkoutPaymentButtonStyles:l}=d||{},{container:c,onError:p,onRenderButton:u,onValidate:h,submitForm:y}=t;if(!c)throw new $('Unable to initialize payment because \"container\" argument is not provided.');const m=Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{fundingSource:r.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(l),createOrder:()=>this.createOrder(),onClick:(e,t)=>this.handleClick(t,h),onApprove:e=>this.handleApprove(e,y),onError:e=>this.handleError(e,p),onCancel:()=>this.toggleLoadingIndicator(!1)});this.paypalButton=r.Buttons(m),this.paypalButton.isEligible()&&(u&&\"function\"==typeof u&&u(),(null===(n=(i=this.paypalButton).hasReturned)||void 0===n?void 0:n.call(i))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(a=(o=this.paypalButton).resume)||void 0===a||a.call(o):this.paypalButton.render(c))}handleClick(e,t){return J(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return null==t?void 0:t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,null==t||t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createOrder(){return J(this,void 0,void 0,function*(){const e=this.getFieldsValues();return this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecheckout\",{shouldSaveInstrument:(null==e?void 0:e.shouldSaveInstrument)||!1})})}getFieldsValues(){const{getFieldsValues:e}=this.paypalcommerce||{};return\"function\"==typeof e?e():void 0}isTrustedVaultingFlow(e){if(e&&W(e)){const t=this.paymentIntegrationService.getState().getInstruments(),i=null==t?void 0:t.find(t=>X(t)&&t.bigpayToken===e.instrumentId);return!(X(i)&&!i.trustedShippingAddress)}return!1}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isPayPalVaultedInstrumentPaymentData(e){return!!e&&W(e)&&Y(e)}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:K(i)};e.Messages(n).render(`#${t}`)}isProviderError(e){var t,i,n;return!!function(e){return\"object\"==typeof e&&null!==e&&\"errors\"in e}(e)&&\"INSTRUMENT_DECLINED\"===(null===(n=null===(i=((null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.filter(e=>e.provider_error))||[])[0])||void 0===i?void 0:i.provider_error)||void 0===n?void 0:n.code)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const Q=p(e=>new Z(e,R(e),new g((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),new S({containerStyles:L})),[{id:\"paypalcommerce\"}]);class ee extends u{constructor(e){super(e||\"Not implemented.\"),this.name=\"NotImplementedError\",this.type=\"not_implemented\"}}var te=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ie{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.paypalCommerceSdk=n}initialize(e){return te(this,void 0,void 0,function*(){const{methodId:t,paypalcommerce:i,paypalcommercecredit:n}=e||{},o=n||i;if(!t)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(t);const a=this.paymentIntegrationService.getState(),r=a.getPaymentMethodOrThrow(t),{paypalBNPLConfiguration:s=[],orderId:d}=r.initializationData||{},{bannerContainerId:l,container:c}=o;if(void 0!==l){if(!document.getElementById(l))return void console.error(\"Unable to create banner without valid banner container ID.\");const e=s&&s.find(({id:e})=>\"checkout\"===e);if(!(null==e?void 0:e.status))return;const t=yield this.paypalCommerceSdk.getPayPalMessages(r,a.getCartOrThrow().currency.code);return this.renderMessages(t,l,e)}d?this.orderId=d:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(t),this.loadingIndicatorContainer=null==c?void 0:c.split(\"#\")[1],this.renderButton(t,o))})}execute(e,t){return te(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);if(!this.orderId)throw new G;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new H)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){if(!(null==t?void 0:t.container))throw new $('Unable to initialize payment because \"container\" argument is not provided.');const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:a}=o||{},{container:r,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p=[i.FUNDING.PAYLATER,i.FUNDING.CREDIT];let u=!1;p.forEach(e=>{if(u)return;const t={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecreditcheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(t),this.paypalButton.isEligible()||e!==i.FUNDING.PAYLATER){if(!this.paypalButton.isEligible()&&e===i.FUNDING.CREDIT)throw new ee(`PayPal ${e} is not available for your region. Please use PayPal Checkout instead.`);d&&\"function\"==typeof d&&d(),this.paypalButton.render(r),u=!0}})}handleClick(e,t){return te(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;if(t&&\"function\"==typeof t)return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t&&\"function\"==typeof t&&t()}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"payment\",style:K(i)};e.Messages(n).render(`#${t}`)}}const ne=p(t=>new ie(t,R(t),new S({containerStyles:L}),new g((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.createScriptLoader)())),[{id:\"paypalcommercecredit\"}]);var oe=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ae{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i}initialize(e){var t,i;return oe(this,void 0,void 0,function*(){const{methodId:n,paypalcommerce:o,paypalcommercevenmo:a}=e||{},r=a||o;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!r)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');yield this.paymentIntegrationService.loadPaymentMethod(n);const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(n);(null===(t=s.initializationData)||void 0===t?void 0:t.orderId)?this.orderId=null===(i=s.initializationData)||void 0===i?void 0:i.orderId:(yield this.paypalCommerceIntegrationService.loadPayPalSdk(n),this.loadingIndicatorContainer=r.container.split(\"#\")[1],this.renderButton(n,r))})}execute(e,t){return oe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);if(!this.orderId)throw new G;yield this.paymentIntegrationService.submitOrder(n,t),yield this.paypalCommerceIntegrationService.submitPayment(i.methodId,this.orderId)})}finalize(){return Promise.reject(new H)}deinitialize(){var e;return this.orderId=void 0,null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}renderButton(e,t){const i=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:o}=n.initializationData||{},{checkoutPaymentButtonStyles:a}=o||{},{container:r,onError:s,onRenderButton:d,onValidate:l,submitForm:c}=t,p={fundingSource:i.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmocheckout\"),onClick:(e,t)=>this.handleClick(t,l),onApprove:e=>this.handleApprove(e,c),onCancel:()=>this.toggleLoadingIndicator(!1),onError:e=>this.handleError(e,s)};if(this.paypalButton=i.Buttons(p),!this.paypalButton.isEligible())throw new ee(\"PayPal Venmo is not available for your region. Please use PayPal Checkout instead.\");d&&\"function\"==typeof d&&d(),this.paypalButton.render(r)}handleClick(e,t){return oe(this,void 0,void 0,function*(){const{resolve:i,reject:n}=e;return t(()=>(this.toggleLoadingIndicator(!0),i()),n)})}handleApprove({orderID:e},t){this.orderId=e,t(),this.toggleLoadingIndicator(!1)}handleError(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const re=p(e=>new ae(e,R(e),new S({styles:{backgroundColor:\"black\"}})),[{id:\"paypalcommercevenmo\"}]);var se,de,le,ce,pe,ue,he,ye,me,ge,ve=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e){this.scriptLoader=e,this.window=window}getPayPalSDK(e,t,i,n){return ve(this,void 0,void 0,function*(){if(!this.window.paypal||n){const n=this.getPayPalSdkScriptConfigOrThrow(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypal)throw new h}return this.window.paypal})}getPayPalFastlaneSdk(e,t,i){return ve(this,void 0,void 0,function*(){if(!this.window.paypalFastlaneSdk){const n=this.getPayPalFastlaneSdkConfiguration(e,t,i);if(yield this.loadPayPalSdk(n),!this.window.paypalFastlaneSdk)throw new h}return this.window.paypalFastlaneSdk})}getPayPalGooglePaySdk(e,t,i,n){return ve(this,void 0,void 0,function*(){if(!this.window.paypalGooglePay||n){const n=this.getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i);yield this.loadPayPalSdk(n)}if(!this.window.paypalGooglePay)throw new h;return this.window.paypalGooglePay})}getPayPalApmsSdk(e,t){return ve(this,void 0,void 0,function*(){if(!this.window.paypalApms){const i=this.getPayPalApmSdkConfiguration(e,t);if(yield this.loadPayPalSdk(i),!this.window.paypalApms)throw new h}return this.window.paypalApms})}getPayPalMessages(e,t){return ve(this,void 0,void 0,function*(){if(!this.window.paypalMessages){const i=this.getPayPalSdkMessagesConfiguration(e,t);yield this.loadPayPalSdk(i)}if(!this.window.paypalMessages)throw new h;return this.window.paypalMessages})}loadPayPalSdk({options:e,attributes:t}){return ve(this,void 0,void 0,function*(){const i=this.transformConfig(e),n=this.transformConfig(t),o=`https://www.paypal.com/sdk/js?${new URLSearchParams(i).toString()}`;yield this.scriptLoader.loadScript(o,{async:!0,attributes:n})})}getPayPalSdkScriptConfigOrThrow(e,t,i=!0){const{id:n,clientToken:o,initializationData:a}=e;if(!a||!a.clientId)throw new y(l.MissingPaymentMethod);const{intent:r,clientId:s,merchantId:d,buyerCountry:c,attributionId:p,isVenmoEnabled:u,isHostedCheckoutEnabled:h,isPayPalCreditAvailable:m,isDeveloperModeApplicable:g,availableAlternativePaymentMethods:v=[],enabledAlternativePaymentMethods:f=[],isGooglePayEnabled:S}=a,I=h||i,w=\"paypalcommercecreditcards\"===n||\"bigcommerce_payments_creditcards\"===n,b=w?[\"card\"]:[],P=m?[\"credit\",\"paylater\"]:[],C=u?[\"venmo\"]:[],O=S?[\"googlepay\"]:[],k=i?[\"card-fields\"]:[],A=[...w?[]:[\"card\"],...m?[]:[\"credit\",\"paylater\"],...u?[]:[\"venmo\"],...v.filter(e=>!f.includes(e))],E=[...b,...P,...C,...f];return{options:Object.assign({\"client-id\":s,\"merchant-id\":d,\"enable-funding\":E.length>0?E:void 0,\"disable-funding\":A.length>0?A:void 0,commit:I,components:[\"buttons\",\"hosted-fields\",\"payment-fields\",\"legal\",...O,...k],currency:t,intent:r},g&&{\"buyer-country\":c}),attributes:{\"data-partner-attribution-id\":p,\"data-client-token\":o}}}getPayPalFastlaneSdkConfiguration(e,t,i){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,attributionId:d}=o;return{options:{\"client-id\":r,\"merchant-id\":s,commit:!0,components:[\"fastlane\",\"buttons\",\"payment-fields\",\"hosted-fields\",\"three-domain-secure\"],currency:t,intent:a},attributes:{\"data-client-metadata-id\":i.replace(/-/g,\"\"),\"data-namespace\":\"paypalFastlaneSdk\",\"data-partner-attribution-id\":d,\"data-sdk-client-token\":n}}}getPayPalGooglePaySdkScriptConfigOrThrow(e,t,i=!0){const{clientToken:n,initializationData:o}=e;if(!o||!o.clientId)throw new y(l.MissingPaymentMethod);const{intent:a,clientId:r,merchantId:s,buyerCountry:d,attributionId:c,isHostedCheckoutEnabled:p,isDeveloperModeApplicable:u}=o,h=p||i;return{options:Object.assign({\"client-id\":r,\"merchant-id\":s,commit:h,components:[\"googlepay\"],currency:t,intent:a},u&&{\"buyer-country\":d}),attributes:{\"data-partner-attribution-id\":c,\"data-client-token\":n,\"data-namespace\":\"paypalGooglePay\"}}}getPayPalApmSdkConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{intent:n,clientId:o,merchantId:a,buyerCountry:r,attributionId:s,isDeveloperModeApplicable:d,availableAlternativePaymentMethods:c=[],enabledAlternativePaymentMethods:p=[]}=i,u=p,h=c.filter(e=>!p.includes(e));return{options:Object.assign({\"client-id\":o,\"merchant-id\":a,\"enable-funding\":u.length>0?u:void 0,\"disable-funding\":h.length>0?h:void 0,commit:!0,components:[\"buttons\",\"payment-fields\"],currency:t,intent:n},d&&{\"buyer-country\":r}),attributes:{\"data-partner-attribution-id\":s,\"data-namespace\":\"paypalApms\"}}}getPayPalSdkMessagesConfiguration(e,t){const{initializationData:i}=e;if(!i||!i.clientId)throw new y(l.MissingPaymentMethod);const{clientId:n,merchantId:o,attributionId:a,isDeveloperModeApplicable:r,buyerCountry:s}=i;return{options:Object.assign({\"client-id\":n,\"merchant-id\":o,components:[\"messages\"],currency:t},r&&{\"buyer-country\":s}),attributes:{\"data-namespace\":\"paypalMessages\",\"data-partner-attribution-id\":a}}}transformConfig(e){let t={};return Object.keys(e).forEach(i=>{const n=e[i];null==n||\"\"===n||Array.isArray(n)&&0===n.length||(t=Object.assign(Object.assign({},t),{[i]:Array.isArray(n)?n.join(\",\"):n}))}),t}}function Se(){return new fe((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.createScriptLoader)())}!function(e){e.AUTHORIZE=\"authorize\",e.CAPTURE=\"capture\"}(se||(se={})),function(e){e.Always=\"SCA_ALWAYS\"}(de||(de={})),function(e){e.Succeeded=\"succeeded\",e.Cancelled=\"cancelled\",e.Errored=\"errored\"}(le||(le={})),function(e){e.Possible=\"POSSIBLE\",e.No=\"NO\",e.Unknown=\"UNKNOWN\",e.Yes=\"YES\"}(ce||(ce={})),function(e){e.paypal=\"paypal\",e.checkout=\"checkout\",e.buynow=\"buynow\",e.pay=\"pay\",e.installment=\"installment\"}(pe||(pe={})),function(e){e.gold=\"gold\",e.blue=\"blue\",e.silver=\"silver\",e.black=\"black\",e.white=\"white\"}(ue||(ue={})),function(e){e.pill=\"pill\",e.rect=\"rect\"}(he||(he={})),function(e){e.SUCCEEDED=\"succeeded\",e.FAILED=\"failed\",e.CANCELED=\"canceled\",e.UNRECOGNIZED=\"unrecognized\"}(ye||(ye={})),(me||(me={})).OXXO=\"oxxo\",function(e){e.Approved=\"APPROVED\",e.Created=\"CREATED\",e.PayerActionRequired=\"PAYER_ACTION_REQUIRED\",e.PollingStop=\"POLLING_STOP\",e.PollingError=\"POLLING_ERROR\"}(ge||(ge={}));var Ie=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class we{constructor(e,t,i,n){this.formPoster=e,this.paymentIntegrationService=t,this.paypalRequestSender=i,this.paypalSdkLoader=n}loadPayPalSdk(e,t,i,n){return Ie(this,void 0,void 0,function*(){const o=this.paymentIntegrationService.getState(),a=t||o.getCartOrThrow().currency.code,r=o.getPaymentMethodOrThrow(e);return this.paypalSdk=yield this.paypalSdkLoader.getPayPalSDK(r,a,i,n),this.paypalSdk})}getPayPalSdkOrThrow(){if(!this.paypalSdk)throw new h;return this.paypalSdk}createBuyNowCartOrThrow(e){return Ie(this,void 0,void 0,function*(){const t=e.getBuyNowCartRequestBody();if(!t)throw new y(l.MissingCart);try{return yield this.paymentIntegrationService.createBuyNowCart(t)}catch(e){throw new I}})}createOrder(e,t){return Ie(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n}=yield this.paypalRequestSender.createOrder(e,Object.assign({cartId:i},t));return n})}createOrderCardFields(e,t){return Ie(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState().getCartOrThrow().id,{orderId:n,setupToken:o}=yield this.paypalRequestSender.createOrder(e,Object.assign({cartId:i},t));return Object.assign({orderId:n},o?{setupToken:o}:{})})}updateOrder(e){return Ie(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getConsignmentsOrThrow()[0];try{yield this.paypalRequestSender.updateOrder(e,{availableShippingOptions:n.availableShippingOptions,cartId:i.id,selectedShippingOption:n.selectedShippingOption})}catch(e){throw new b}})}getOrderStatus(e,t){return Ie(this,void 0,void 0,function*(){try{const{status:i}=yield this.paypalRequestSender.getOrderStatus(e,t);return i}catch(e){throw new b}})}tokenizePayment(e,t){const i=this.paymentIntegrationService.getState().getCartOrThrow();if(!t)throw new y(l.MissingOrderId);return this.formPoster.postForm(\"/checkout.php\",Object.assign({payment_type:\"paypal\",action:\"set_external_checkout\",provider:e,order_id:t},i.source===P.BuyNow&&{cart_id:i.id}))}submitPayment(e,t,i){return Ie(this,void 0,void 0,function*(){const n={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:e,paypal_account:{order_id:t}}};yield this.paymentIntegrationService.submitPayment(Object.assign({methodId:e,paymentData:n},i?{gatewayId:i}:{}))})}getShippingOptionOrThrow(e){const t=this.paymentIntegrationService.getState().getConsignmentsOrThrow()[0],i=t.availableShippingOptions||[],n=i.find(e=>e.isRecommended),o=(e?i.find(t=>t.id===e):i.find(e=>{if(t.selectedShippingOption){const i=t.selectedShippingOption.id;return e.id===i}return!1}))||n||i[0];if(!o)throw new Error(\"Your order can't be shipped to this address\");return o}getAddress(e){return{firstName:(null==e?void 0:e.firstName)||\"\",lastName:(null==e?void 0:e.lastName)||\"\",email:(null==e?void 0:e.email)||\"\",phone:(null==e?void 0:e.phone)||\"\",company:\"\",address1:(null==e?void 0:e.address1)||\"\",address2:(null==e?void 0:e.address2)||\"\",city:(null==e?void 0:e.city)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",stateOrProvince:\"\",stateOrProvinceCode:(null==e?void 0:e.stateOrProvinceCode)||\"\",customFields:[]}}getBillingAddressFromOrderDetails({payer:e}){var t,i;return this.getAddress({firstName:e.name.given_name,lastName:e.name.surname,email:e.email_address,address1:e.address.address_line_1,address2:e.address.address_line_2,city:e.address.admin_area_2,countryCode:e.address.country_code,postalCode:e.address.postal_code,stateOrProvinceCode:e.address.admin_area_1,phone:null===(i=null===(t=e.phone)||void 0===t?void 0:t.phone_number)||void 0===i?void 0:i.national_number})}getShippingAddressFromOrderDetails(e){const{payer:t,purchase_units:i}=e,{address:n,name:{full_name:o}}=i[0].shipping,[a,...r]=o.split(\" \");return this.getAddress({firstName:a,lastName:r.join(\" \"),email:t.email_address,address1:n.address_line_1,address2:n.address_line_2,city:n.admin_area_2,countryCode:n.country_code,postalCode:n.postal_code,stateOrProvinceCode:n.admin_area_1})}getValidButtonStyle(e={}){const{color:t,height:i,label:n,shape:o}=e,r={color:t&&ue[t]?t:void 0,height:this.getValidHeight(i),label:n&&pe[n]?n:void 0,shape:o&&he[o]?o:void 0};return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(r,lodash__WEBPACK_IMPORTED_MODULE_3__.isNil)}getValidHeight(e){return e&&\"number\"==typeof e?e>55?55:e<25?25:e:40}removeElement(e){const t=e&&document.getElementById(e);t&&(t.style.display=\"none\")}}var be=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Pe{constructor(e){this.requestSender=e}createOrder(e,t){return be(this,void 0,void 0,function*(){const i=`/api/storefront/payment/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.post(i,{headers:o,body:n})).body})}updateOrder(e,t){return be(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=t,o=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.put(i,{headers:o,body:n})).body})}getOrderStatus(e,t){return be(this,void 0,void 0,function*(){const i=`/api/storefront/initialization/${e}`,n=Object.assign({\"X-API-INTERNAL\":M,\"Content-Type\":x.Json},N);return(yield this.requestSender.get(i,Object.assign({headers:n},t))).body})}}const Ce=e=>{const{getHost:t}=e.getState();return new we((0,_bigcommerce_form_poster__WEBPACK_IMPORTED_MODULE_1__.createFormPoster)(),e,new Pe((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),Se())};class Oe extends b{constructor(e){super(e,{message:\"The request has timed out or aborted.\"}),this.name=\"TimeoutError\",this.type=\"timeout\"}}var ke=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Ae{constructor(e,t,i,n,o=3e3,a=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.paypalSdkScriptLoader=i,this.loadingIndicator=n,this.pollingInterval=o,this.maxPollingIntervalTime=a,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.isPollingEnabled=!1}initialize(e){return ke(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerce:n,paypalcommercealternativemethods:o}=e,a=o||n;if(this.paypalcommercealternativemethods=o,!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!a)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');const r=this.paymentIntegrationService.getState(),s=r.getPaymentMethodOrThrow(i,t),{orderId:d,shouldRenderFields:l}=s.initializationData||{},c=r.getStoreConfigOrThrow().checkoutSettings.features;this.isPollingEnabled=function(e,t,i=!0){var n;return null!==(n=e[\"PAYPAL-5192.paypal_commerce_ideal_polling\"])&&void 0!==n?n:i}(c),d?this.orderId=d:(this.paypalApms=yield this.paypalSdkScriptLoader.getPayPalApmsSdk(s,r.getCartOrThrow().currency.code),this.loadingIndicatorContainer=a.container.split(\"#\")[1],this.renderButton(i,t,a),l&&this.renderFields(i,a))})}execute(e,t){return ke(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);const{methodId:o,gatewayId:a}=i;if(!this.orderId)throw new G;this.isPollingEnabled&&\"ideal\"===o&&(yield new Promise((e,t)=>{this.initializePollingMechanism(o,e,t,a)})),this.isNonInstantPaymentMethod(o)||(yield this.paymentIntegrationService.submitOrder(n,t)),yield this.paypalCommerceIntegrationService.submitPayment(o,this.orderId,a)})}finalize(){return Promise.reject(new H)}deinitialize(){var e;return this.orderId=void 0,this.isPollingEnabled&&this.resetPollingMechanism(),null===(e=this.paypalButton)||void 0===e||e.close(),Promise.resolve()}initializePollingMechanism(e,t,i,n){return ke(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(null!=n?n:\"paypalcommerce\"),a=o===z.Approved,r=o===z.PollingError;if(a)return this.deinitializePollingMechanism(),t();if(r)return i();if(!a&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommercealternativemethods:this.paypalcommercealternativemethods}),this.handleError(new Oe)}catch(e){i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}reinitializeStrategy(e){return ke(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}handleError(e){const{onError:t}=this.paypalcommercealternativemethods||{};this.isPollingEnabled&&this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderButton(e,t,i){const n=this.getPaypalAmpsSdkOrThrow(),o=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e,t),{buttonStyle:a}=o.initializationData||{},{container:r,onError:s,onRenderButton:d,submitForm:l}=i,c={fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(a),onInit:(e,t)=>i.onInitButton(t),createOrder:()=>this.onCreateOrder(e,t,i),onApprove:e=>this.handleApprove(e,l),onCancel:()=>{this.toggleLoadingIndicator(!1),this.deinitializePollingMechanism()},onError:e=>{this.deinitializePollingMechanism(),this.handleFailure(e,s)},onClick:(e,t)=>ke(this,void 0,void 0,function*(){return i.onValidate(t.resolve,t.reject)})};this.paypalButton=n.Buttons(c),this.paypalButton.isEligible()&&(d&&\"function\"==typeof d&&d(),this.paypalButton.render(r))}onCreateOrder(e,t,i){return ke(this,void 0,void 0,function*(){const{onValidate:n}=i;yield n(()=>(this.toggleLoadingIndicator(!0),()=>Promise.resolve()),lodash__WEBPACK_IMPORTED_MODULE_3__.noop);const o=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\");if(this.isNonInstantPaymentMethod(e)){const i={useStoreCredit:!1},n={params:{methodId:e,gatewayId:t}};yield this.paymentIntegrationService.submitOrder(i,n),yield this.paypalCommerceIntegrationService.submitPayment(e,o,t)}return o})}handleApprove({orderID:e},t){this.orderId=e,t()}handleFailure(e,t){this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}renderFields(e,t){const i=this.getPaypalAmpsSdkOrThrow(),n=this.paymentIntegrationService.getState(),{firstName:o,lastName:a,email:r}=n.getBillingAddressOrThrow(),{apmFieldsContainer:s,apmFieldsStyles:d}=t;if(!s)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument should contain \"apmFieldsContainer\".');const l=document.querySelector(s);l&&(l.innerHTML=\"\");const c={fundingSource:e,style:d||{},fields:{name:{value:`${o} ${a}`},email:{value:r}}};i.PaymentFields(c).render(s)}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}isNonInstantPaymentMethod(e){return e.toUpperCase()in T}getPaypalAmpsSdkOrThrow(){if(!this.paypalApms)throw new h;return this.paypalApms}}const Ee=p(e=>new Ae(e,Ce(e),Se(),new S({containerStyles:L})),[{gateway:\"paypalcommercealternativemethods\"}]);var Te;!function(e){e.CVV=\"cvv\",e.PAN=\"pan\"}(Te||(Te={}));class ze{static get(e){const t=`${encodeURIComponent(`${e}`)}=`,i=document.cookie;let n=null;const o=i.indexOf(t);if(o>-1){let e=i.indexOf(\";\",o);-1===e&&(e=i.length),n=decodeURIComponent(i.substring(o+t.length,e))}return n}static set(e,t,i={secure:!0}){let n=`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;const{expires:o,path:a,domain:r,secure:s}=i;if(o)n+=`; expires=${o.toUTCString()}`;else{const e=new Date,t=60;e.setTime(e.getTime()+60*t*1e3),n+=`; expires=${e.toUTCString()}`}a&&(n+=`; path=${a}`),r&&(n+=`; domain=${r}`),s&&(n+=\"; secure\"),document.cookie=n}static remove(e,t){ze.set(e,\"\",Object.assign({expires:new Date(0)},t))}}var Fe,Be=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Me{constructor(){this.window=window}initializePayPalFastlane(e,t,i){return Be(this,void 0,void 0,function*(){if(t&&(window.localStorage.setItem(\"fastlaneEnv\",\"sandbox\"),window.localStorage.setItem(\"axoEnv\",\"sandbox\")),!this.window.paypalFastlane){const t={root:{backgroundColorPrimary:\"transparent\"}};this.window.paypalFastlane=yield e.Fastlane({styles:i||t})}return this.window.paypalFastlane})}getPayPalFastlaneOrThrow(){if(!this.window.paypalFastlane)throw new h;return this.window.paypalFastlane}lookupCustomerOrThrow(e){return Be(this,void 0,void 0,function*(){return this.getPayPalFastlaneOrThrow().identity.lookupCustomerByEmail(e)})}triggerAuthenticationFlowOrThrow(e){return Be(this,void 0,void 0,function*(){return e?this.getPayPalFastlaneOrThrow().identity.triggerAuthenticationFlow(e):{}})}updateStorageSessionId(e){const t=new Date;t.setDate(t.getDate()+14);const i={expires:t,secure:!0};ze.set(\"bc-fastlane-sessionId\",e,i)}removeStorageSessionId(){ze.remove(\"bc-fastlane-sessionId\")}getStorageSessionId(){return ze.get(\"bc-fastlane-sessionId\")||\"\"}mapPayPalFastlaneProfileToBcCustomerData(e,t){var i,n,o;const{authenticationState:a,profileData:r}=t,s=null===(o=null===(n=null===(i=null==r?void 0:r.card)||void 0===i?void 0:i.paymentSource)||void 0===n?void 0:n.card)||void 0===o?void 0:o.billingAddress,d=null==r?void 0:r.shippingAddress,l=null==r?void 0:r.name,c=null==r?void 0:r.card,p=d?this.mapPayPalToBcAddress(d.address,d.name,d.phoneNumber):void 0,u=s&&l?this.mapPayPalToBcAddress(s,l,null==d?void 0:d.phoneNumber):void 0,h=c?this.mapPayPalToBcInstrument(e,c):[],y=this.filterAddresses([p,u]);return{authenticationState:a||ye.UNRECOGNIZED,addresses:y,billingAddress:u,shippingAddress:p,instruments:h}}mapPayPalToBcInstrument(e,t){const{id:i,paymentSource:n}=t,{brand:o,expiry:a,lastDigits:r}=n.card,[s,d]=a.split(\"-\");return[{bigpayToken:i,brand:o,defaultInstrument:!1,expiryMonth:d,expiryYear:s,iin:\"\",last4:r,method:e,provider:e,trustedShippingAddress:!1,untrustedShippingCardVerificationMode:Te.PAN,type:\"card\"}]}mapBcToPayPalAddress(e){return{company:(null==e?void 0:e.company)||\"\",addressLine1:(null==e?void 0:e.address1)||\"\",addressLine2:(null==e?void 0:e.address2)||\"\",adminArea1:(null==e?void 0:e.stateOrProvinceCode)||(null==e?void 0:e.stateOrProvince)||\"\",adminArea2:(null==e?void 0:e.city)||\"\",postalCode:(null==e?void 0:e.postalCode)||\"\",countryCode:(null==e?void 0:e.countryCode)||\"\"}}mapPayPalToBcAddress(e,t,i,n){const[o,a]=t.fullName.split(\" \"),r=(null==i?void 0:i.nationalNumber)||\"\",s=(null==i?void 0:i.countryCode)||\"\";return{id:Date.now(),type:\"paypal-address\",firstName:t.firstName||o||\"\",lastName:t.lastName||a||\"\",company:e.company||\"\",address1:e.addressLine1,address2:e.addressLine2||\"\",city:e.adminArea2,stateOrProvince:e.adminArea1,stateOrProvinceCode:e.adminArea1,country:e.countryCode||\"\",countryCode:e.countryCode||\"\",postalCode:e.postalCode,phone:s+r,customFields:n||[]}}filterAddresses(e){return e.reduce((e,t)=>t?e.some(e=>this.isEqualAddresses(e,t))?e:[...e,t]:e,[])}isEqualAddresses(e,t){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(this.normalizeAddress(e),this.normalizeAddress(t))}normalizeAddress(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_3__.omit)(e,[\"id\",\"phone\"])}}function De(){return new Me}!function(e){e.CardCode=\"cardCode\",e.CardCodeVerification=\"cardCodeVerification\",e.CardExpiry=\"cardExpiry\",e.CardName=\"cardName\",e.CardNumber=\"cardNumber\",e.CardNumberVerification=\"cardNumberVerification\",e.CardExpiryVerification=\"cardExpiryVerification\"}(Fe||(Fe={}));const xe=Fe;function Ne(e){return xe.CardNumber in e&&xe.CardName in e&&xe.CardExpiry in e}function _e(e){return xe.CardNumberVerification in e&&xe.CardCodeVerification in e&&xe.CardExpiryVerification in e}class je extends u{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var Ue;!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(Ue||(Ue={}));class Ve extends u{constructor(e){super(function(e){switch(e){case Ue.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case Ue.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case Ue.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case Ue.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}class Re extends u{constructor(e,t){super(t||\"Unable to proceed because the payment form contains invalid data.\"),this.details=e,this.name=\"PaymentInvalidFormError\",this.type=\"payment_invalid_form\"}}var Le=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class $e{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalIntegrationService=t,this.paypalSdkScriptLoader=i,this.paypalFastlaneUtils=n}initialize(e){return Le(this,void 0,void 0,function*(){const{methodId:t,paypalcommercecreditcards:i,paypalcommerce:n}=e,o=i||n,{form:a,onCreditCardFieldsRenderingError:r,onLoadComplete:s}=o||{};if(!t)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!a)throw new $('Unable to proceed because \"options.paypalcommercecreditcards.form\" argument is not provided.');this.hostedFormOptions=a,this.isCreditCardForm=Ne(a.fields),this.isCreditCardVaultedForm=_e(a.fields)&&!this.hasUndefinedValues(),yield this.paymentIntegrationService.loadPaymentMethod(t),yield this.paypalIntegrationService.loadPayPalSdk(t,void 0,!0,!0),(this.isCreditCardForm||this.isCreditCardVaultedForm)&&(yield this.initializeFields(a,r)),null==s||s(),this.shouldInitializePayPalFastlane(t)&&(yield this.initializePayPalFastlaneOrThrow(t))})}execute(e,t){return Le(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{methodId:o,paymentData:a}=i||{};if(!i||!o)throw new q([\"payment\"]);if(this.executionPaymentData=a,this.isCreditCardForm||this.isCreditCardVaultedForm)yield this.validateHostedFormOrThrow(),yield this.submitHostedForm();else{const{orderId:e}=yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams());this.returnedOrderId=e}const r=this.preparePaymentPayload(o,a,this.returnedOrderId,this.returnedVaultedToken);yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment(r)})}finalize(){return Promise.reject(new H)}deinitialize(){var e,t,i,n;return Le(this,void 0,void 0,function*(){return yield null===(e=this.cvvField)||void 0===e?void 0:e.close(),yield null===(t=this.expiryField)||void 0===t?void 0:t.close(),yield null===(i=this.numberField)||void 0===i?void 0:i.close(),yield null===(n=this.nameField)||void 0===n?void 0:n.close(),Promise.resolve()})}preparePaymentPayload(e,t,i,n){const{shouldSaveInstrument:o=!1,shouldSetAsDefaultInstrument:r=!1}=Y(t)?t:{},s=t&&W(t)?t.instrumentId:void 0,l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)({verification_nonce:n,token:s},lodash__WEBPACK_IMPORTED_MODULE_3__.isNil);return{methodId:e,paymentData:{shouldSaveInstrument:o,shouldSetAsDefaultInstrument:r,instrumentId:s,formattedPayload:Object.assign(Object.assign({},n||s?{bigpay_token:l}:{}),i?{card_with_order:{order_id:i}}:{})}}}initializeFields(e,t){return Le(this,void 0,void 0,function*(){const{fields:i,styles:n}=e,o=this.paypalIntegrationService.getPayPalSdkOrThrow(),a=this.getExecuteCallback(i),r=Object.assign({style:this.getInputStyles(n),onApprove:({orderID:e,vaultSetupToken:t,liabilityShift:i})=>{if(i===C.No||i===C.Unknown)throw new Error;return this.handleApprove({orderID:e,vaultSetupToken:t})},onError:()=>{throw new je},inputEvents:{onChange:t=>this.onChangeHandler(e,t),onFocus:t=>this.onFocusHandler(e,t),onBlur:t=>this.onBlurHandler(e,t),onInputSubmitRequest:t=>this.onInputSubmitRequest(e,t)}},a);if(this.cardFields=yield o.CardFields(r),!this.cardFields.isEligible())throw new Ve(Ue.PaymentNotInitialized);try{this.stylizeInputContainers(i),Ne(i)&&(yield this.renderFields(i)),_e(i)&&(yield this.renderVaultedFields(i))}catch(e){\"function\"==typeof t&&t(e)}})}getExecuteCallback(e){return _e(e)?this.createVaultSetupTokenCallback():this.createOrderCallback()}createVaultSetupTokenCallback(){return{createVaultSetupToken:()=>Le(this,void 0,void 0,function*(){const{setupToken:e}=(yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",Object.assign(Object.assign({},this.getInstrumentParams()),{setupToken:!0})))||{};return e})}}createOrderCallback(){return{createOrder:()=>Le(this,void 0,void 0,function*(){const{orderId:e}=(yield this.paypalIntegrationService.createOrderCardFields(\"paypalcommercecreditcardscheckout\",this.getInstrumentParams()))||{};return e})}}handleApprove({orderID:e,vaultSetupToken:t}){e&&(this.returnedOrderId=e),t&&(this.returnedVaultedToken=t)}renderFields(e){var t,i,n,o;return Le(this,void 0,void 0,function*(){const a=this.getCardFieldsOrThrow();(null===(t=e.cardCode)||void 0===t?void 0:t.containerId)&&(this.cvvField=a.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCode.containerId}`)),(null===(i=e.cardExpiry)||void 0===i?void 0:i.containerId)&&(this.expiryField=a.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiry.containerId}`)),(null===(n=e.cardName)||void 0===n?void 0:n.containerId)&&(this.nameField=a.NameField({placeholder:\"\"}),yield this.nameField.render(`#${e.cardName.containerId}`)),(null===(o=e.cardNumber)||void 0===o?void 0:o.containerId)&&(this.numberField=a.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumber.containerId}`))})}renderVaultedFields(e){var t,i,n;return Le(this,void 0,void 0,function*(){const o=this.getCardFieldsOrThrow();(null===(t=e.cardCodeVerification)||void 0===t?void 0:t.containerId)&&(this.cvvField=o.CVVField({placeholder:\"\"}),yield this.cvvField.render(`#${e.cardCodeVerification.containerId}`)),(null===(i=e.cardExpiryVerification)||void 0===i?void 0:i.containerId)&&(this.expiryField=o.ExpiryField(),yield this.expiryField.render(`#${e.cardExpiryVerification.containerId}`)),(null===(n=e.cardNumberVerification)||void 0===n?void 0:n.containerId)&&(this.numberField=o.NumberField({placeholder:\"\"}),yield this.numberField.render(`#${e.cardNumberVerification.containerId}`))})}getInstrumentParams(){if(!this.executionPaymentData)return{};if(Y(this.executionPaymentData)){const{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}=this.executionPaymentData;return{shouldSaveInstrument:e,shouldSetAsDefaultInstrument:t}}if(W(this.executionPaymentData)){const{instrumentId:e}=this.executionPaymentData;return{instrumentId:e}}return{}}getFieldTypeByEmittedField({emittedBy:e}){return{fieldType:this.mapFieldType(e)}}submitHostedForm(){return Le(this,void 0,void 0,function*(){const e=this.getCardFieldsOrThrow(),t=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),i={billingAddress:{company:t.company,addressLine1:t.address1,addressLine2:t.address2,adminArea1:t.stateOrProvinceCode,adminArea2:t.city,postalCode:t.postalCode,countryCode:t.countryCode}};try{this.isCreditCardVaultedForm?yield e.submit():yield e.submit(i)}catch(e){throw new je(\"Failed authentication. Please try to authorize again.\")}})}validateHostedFormOrThrow(){var e,t;return Le(this,void 0,void 0,function*(){const i=this.getCardFieldsOrThrow(),n=yield i.getState().then(e=>e),o=this.getValidityData(n);if(!o.isValid)throw null===(t=null===(e=this.hostedFormOptions)||void 0===e?void 0:e.onValidate)||void 0===t||t.call(e,o),new Re(this.mapValidationErrors(o.errors))})}getValidityData({fields:e}){const t=Object.assign({},e);delete t.cardNameField;const i=Object.keys(t);return{isValid:i.every(e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.isValid}),errors:i.reduce((e,i)=>{var n;const o=this.mapFieldType(i);return Object.assign(Object.assign({},e),{[o]:(null===(n=t[i])||void 0===n?void 0:n.isValid)?void 0:[this.getInvalidErrorByFieldType(o)]})},{})}}getInvalidErrorByFieldType(e){switch(e){case xe.CardCode:case xe.CardCodeVerification:return{fieldType:e,message:\"Invalid card code\",type:\"invalid_card_code\"};case xe.CardNumber:case xe.CardNumberVerification:return{fieldType:e,message:\"Invalid card number\",type:\"invalid_card_number\"};case xe.CardExpiry:case xe.CardExpiryVerification:return{fieldType:e,message:\"Invalid card expiry\",type:\"invalid_card_expiry\"};default:return{fieldType:e,message:\"Invalid field\",type:\"invalid\"}}}mapValidationErrors(e={}){const t={};return Object.keys(e).forEach(i=>{var n,o;t[i]=[{message:(null===(o=null===(n=e[i])||void 0===n?void 0:n[0])||void 0===o?void 0:o.message)||\"\",type:i}]}),t}mapFieldType(e){switch(e){case\"name\":return xe.CardName;case\"cardNumberField\":case\"number\":return this.isCreditCardForm?xe.CardNumber:xe.CardNumberVerification;case\"cardExpiryField\":case\"expiry\":return this.isCreditCardForm?xe.CardExpiry:xe.CardExpiryVerification;case\"cardCvvField\":case\"cvv\":return this.isCreditCardForm?xe.CardCode:xe.CardCodeVerification;default:throw new Error(\"Unexpected field type\")}}getCardFieldsOrThrow(){if(!this.cardFields)throw new Ve(Ue.PaymentNotInitialized);return this.cardFields}getInputStyles(e){var t,i,n;const o={\"font-size\":(null===(t=null==e?void 0:e.default)||void 0===t?void 0:t.fontSize)||\"1rem\",\"font-family\":(null===(i=null==e?void 0:e.default)||void 0===i?void 0:i.fontFamily)||\"Montserrat, Arial, Helvetica, sans-serif\",\"font-weight\":(null===(n=null==e?void 0:e.default)||void 0===n?void 0:n.fontWeight)||\"400\",outline:\"none\",padding:\"9px 13px\"},a=Object.assign(Object.assign({},o),{color:\"#333333\"});return{input:a,\".invalid\":Object.assign(Object.assign({},o),{color:\"red\"}),\".valid\":a,\":focus\":a}}stylizeInputContainers(e){Object.values(e||{}).forEach(e=>{const t=document.getElementById(`${(null==e?void 0:e.containerId)||\"\"}`);t&&(t.style.padding=\"0px\",t.style.boxShadow=\"none\",t.style.border=\"none\",t.style.background=\"transparent\",t.style.marginBottom=\"10px\",t.style.marginLeft=\"-5px\")})}hasUndefinedValues(){return!this.hostedFormOptions||Object.values(this.hostedFormOptions.fields).some(e=>void 0===e)}onChangeHandler(e,t){var i;null===(i=null==e?void 0:e.onValidate)||void 0===i||i.call(e,this.getValidityData(t))}onFocusHandler(e,t){var i;null===(i=null==e?void 0:e.onFocus)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onBlurHandler(e,t){var i;null===(i=null==e?void 0:e.onBlur)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}onInputSubmitRequest(e,t){var i;null===(i=null==e?void 0:e.onEnter)||void 0===i||i.call(e,this.getFieldTypeByEmittedField(t))}shouldInitializePayPalFastlane(e){var t,i;const n=this.paymentIntegrationService.getState(),o=n.getPaymentMethodOrThrow(e),a=n.getPaymentProviderCustomer(),r=(s=a)&&(\"authenticationState\"in s||\"addresses\"in s||\"instruments\"in s)?a:{};var s;return(null===(t=null==o?void 0:o.initializationData)||void 0===t?void 0:t.isAcceleratedCheckoutEnabled)&&(null===(i=null==o?void 0:o.initializationData)||void 0===i?void 0:i.isPayPalCommerceAnalyticsV2Enabled)&&!(null==r?void 0:r.authenticationState)}initializePayPalFastlaneOrThrow(e){return Le(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getPaymentMethodOrThrow(e),{initializationData:o}=n;if(!(null==o?void 0:o.connectClientToken))return;const a=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(n,i.currency.code,i.id);yield this.paypalFastlaneUtils.initializePayPalFastlane(a,!!(null==o?void 0:o.isDeveloperModeApplicable))}catch(e){}})}}const qe=p(e=>new $e(e,Ce(e),Se(),De()),[{id:\"paypalcommercecreditcards\"}]);var Ge=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class He{constructor(e,t,i,n=3e3,o=3e5){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.loadingIndicator=i,this.pollingInterval=n,this.maxPollingIntervalTime=o,this.pollingTimer=0,this.stopPolling=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return Ge(this,void 0,void 0,function*(){const{gatewayId:t,methodId:i,paypalcommerceratepay:n}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.gatewayId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.paypalcommerceratepay\" argument is not provided.');const{legalTextContainer:o,container:a,loadingContainerId:r}=n;if(!a)throw new $('Unable to initialize payment because \"options.container\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.legalTextContainer\" argument is not provided.');if(!r)throw new $('Unable to initialize payment because \"options.loadingContainerId\" argument is not provided.');this.loadingIndicatorContainer=r;const s=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t),{merchantId:d}=s.initializationData||{};if(!d)throw new $(\"Unable to initialize payment because merchantId argument is not provided.\");this.paypalcommerceratepay=n,yield this.paypalCommerceIntegrationService.loadPayPalSdk(i),this.createFraudNetScript(d,i,t),this.loadFraudnetConfig(),this.renderLegalText(o,a)})}execute(e,t){return Ge(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]),{getFieldsValues:o}=this.paypalcommerceratepay||{};if(!i)throw new q([\"payment\"]);if(!o||\"function\"!=typeof o)throw new $('Unable to initialize payment because \"options.getFieldsValues\" argument is not provided.');this.toggleLoadingIndicator(!0);try{const e=yield this.paypalCommerceIntegrationService.createOrder(\"paypalcommercealternativemethodscheckout\",{metadataId:this.guid}),{ratepayBirthDate:a,ratepayPhoneNumber:r,ratepayPhoneCountryCode:s}=o(),d={formattedPayload:{vault_payment_instrument:null,set_as_default_stored_instrument:null,device_info:null,method_id:i.methodId,rate_pay:{birth_date:this.normalizeDate(a),phone:{national_number:r,country_code:s.split(\"+\")[1]}},paypal_account:{order_id:e}}};return yield this.paymentIntegrationService.submitOrder(n,t),yield this.paymentIntegrationService.submitPayment({methodId:i.methodId,paymentData:d}),yield new Promise((e,t)=>{this.initializePollingMechanism(i.methodId,e,t,i.gatewayId)})}catch(e){return this.handleError(e),new Promise((e,t)=>t())}})}finalize(){return Promise.reject(new H)}deinitialize(){const{legalTextContainer:e}=this.paypalcommerceratepay||{},t=document.querySelectorAll('[data-id=\"fraudnetScript\"]')[0],i=document.querySelectorAll('[data-id=\"fraudnetConfig\"]')[0];if(this.deinitializePollingMechanism(),t.remove(),i.remove(),e){const t=document.getElementById(e);null==t||t.remove()}return Promise.resolve()}normalizeDate(e){const t=this.formatDate(e.getDate()),i=this.formatDate(e.getMonth()+1);return`${e.getFullYear()}-${i}-${t}`}formatDate(e){return`${e<10?0:\"\"}${e}`}renderLegalText(e,t){const i=e,n=t.split(\"#\")[1],o=document.getElementById(n),a=null==o?void 0:o.parentNode,r=document.createElement(\"div\");r.style.marginBottom=\"20px\",r.setAttribute(\"id\",i),null==a||a.prepend(r);const s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=s.Legal({fundingSource:s.Legal.FUNDING.PAY_UPON_INVOICE});if(!document.getElementById(i))throw new $('Unable to initialize payment because \"legalTextContainerElement\" argument is not found.');d.render(`#${i}`)}handleError(e){const{onError:t}=this.paypalcommerceratepay||{};this.resetPollingMechanism(),this.toggleLoadingIndicator(!1),t&&\"function\"==typeof t&&t(e)}createFraudNetScript(e,t,i){const n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t,i),{testMode:o}=n.config,a=document.createElement(\"script\");a.setAttribute(\"type\",\"application/json\"),a.setAttribute(\"fncls\",\"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99\"),a.setAttribute(\"data-id\",\"fraudnetScript\"),this.guid=this.generateGUID();const r={f:this.guid,s:`${e}_checkout-page`,sandbox:o};a.innerHTML=JSON.stringify(r),document.body.appendChild(a)}generateGUID(){let e=\"\";for(let t=0;t<32;t+=1)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"[Math.floor(62*Math.random())];return e}loadFraudnetConfig(){const e=document.createElement(\"script\");e.setAttribute(\"data-id\",\"fraudnetConfig\"),e.src=\"https://c.paypal.com/da/r/fb.js\",document.body.appendChild(e)}reinitializeStrategy(e){return Ge(this,void 0,void 0,function*(){yield this.deinitialize(),yield this.initialize(e)})}initializePollingMechanism(e,t,i,n){return Ge(this,void 0,void 0,function*(){yield new Promise((e,t)=>{const i=setTimeout(e,this.pollingInterval);this.stopPolling=()=>(clearTimeout(i),this.toggleLoadingIndicator(!1),t())});try{this.pollingTimer+=this.pollingInterval;const o=yield this.paypalCommerceIntegrationService.getOrderStatus(\"paypalcommercealternativemethods\",{params:{useMetadata:!0}}),a=o===z.PollingStop,r=o===z.PollingError;if(a)return this.deinitializePollingMechanism(),t();if(r)return i();if(!a&&this.pollingTimer<this.maxPollingIntervalTime)return yield this.initializePollingMechanism(e,t,i,n);yield this.reinitializeStrategy({methodId:e,gatewayId:n,paypalcommerceratepay:this.paypalcommerceratepay}),this.handleError(new Oe)}catch(e){this.handleError(e),i()}})}deinitializePollingMechanism(){this.stopPolling(),this.pollingTimer=0}resetPollingMechanism(){this.deinitializePollingMechanism()}toggleLoadingIndicator(e){e&&this.loadingIndicatorContainer?this.loadingIndicator.show(this.loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ye=p(e=>new He(e,R(e),new S({containerStyles:Object.assign(Object.assign({},L),{position:\"fixed\"})})),[{gateway:\"paypalcommercealternativemethods\",id:\"ratepay\"}]);function We(e){return\"string\"!=typeof e}function Ke(e,t){if(t||e)return function(e){var t,i;const n={},o=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.root,We),a=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.input,We),r=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(e.toggle,We),s=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(t=e.text)||void 0===t?void 0:t.body,We),l=(0,lodash__WEBPACK_IMPORTED_MODULE_3__.omitBy)(null===(i=e.text)||void 0===i?void 0:i.caption,We),c=e.branding;return Object.keys(o).length&&(n.root=o),Object.keys(a).length&&(n.input=a),Object.keys(r).length&&(n.toggle=r),Object.keys(s).length&&(n.text={},n.text.body=s),Object.keys(l).length&&(n.text=Object.assign({},n.text),n.text.caption=l),c&&(n.branding=c),n}(function(e,t){var i,n,o,a,r,s,d,l,c,p,u,h,y,m,g,v,f,S,I,w,b,P;return{root:{backgroundColorPrimary:(null==e?void 0:e.fastlaneRootSettingsBackgroundColor)||(null===(i=null==t?void 0:t.root)||void 0===i?void 0:i.backgroundColorPrimary),errorColor:(null==e?void 0:e.fastlaneRootSettingsErrorColor)||(null===(n=null==t?void 0:t.root)||void 0===n?void 0:n.errorColor),fontFamily:(null==e?void 0:e.fastlaneRootSettingsFontFamily)||(null===(o=null==t?void 0:t.root)||void 0===o?void 0:o.fontFamily),fontSizeBase:(null==e?void 0:e.fastlaneRootSettingsFontSize)||(null===(a=null==t?void 0:t.root)||void 0===a?void 0:a.fontSizeBase),padding:(null==e?void 0:e.fastlaneRootSettingsPadding)||(null===(r=null==t?void 0:t.root)||void 0===r?void 0:r.padding),primaryColor:(null==e?void 0:e.fastlaneRootSettingsPrimaryColor)||(null===(s=null==t?void 0:t.root)||void 0===s?void 0:s.primaryColor)},input:{borderRadius:(null==e?void 0:e.fastlaneInputSettingsBorderRadius)||(null===(d=null==t?void 0:t.input)||void 0===d?void 0:d.borderRadius),borderColor:(null==e?void 0:e.fastlaneInputSettingsBorderColor)||(null===(l=null==t?void 0:t.input)||void 0===l?void 0:l.borderColor),focusBorderColor:(null==e?void 0:e.fastlaneInputSettingsFocusBorderBase)||(null===(c=null==t?void 0:t.input)||void 0===c?void 0:c.focusBorderColor),backgroundColor:(null==e?void 0:e.fastlaneInputSettingsBackgroundColor)||(null===(p=null==t?void 0:t.input)||void 0===p?void 0:p.backgroundColor),borderWidth:(null==e?void 0:e.fastlaneInputSettingsBorderWidth)||(null===(u=null==t?void 0:t.input)||void 0===u?void 0:u.borderWidth),textColorBase:(null==e?void 0:e.fastlaneInputSettingsTextColorBase)||(null===(h=null==t?void 0:t.input)||void 0===h?void 0:h.textColorBase)},toggle:{colorPrimary:(null==e?void 0:e.fastlaneToggleSettingsColorPrimary)||(null===(y=null==t?void 0:t.toggle)||void 0===y?void 0:y.colorPrimary),colorSecondary:(null==e?void 0:e.fastlaneToggleSettingsColorSecondary)||(null===(m=null==t?void 0:t.toggle)||void 0===m?void 0:m.colorSecondary)},text:{body:{color:(null==e?void 0:e.fastlaneTextBodySettingsColor)||(null===(v=null===(g=null==t?void 0:t.text)||void 0===g?void 0:g.body)||void 0===v?void 0:v.color),fontSize:(null==e?void 0:e.fastlaneTextBodySettingsFontSize)||(null===(S=null===(f=null==t?void 0:t.text)||void 0===f?void 0:f.body)||void 0===S?void 0:S.fontSize)},caption:{color:(null==e?void 0:e.fastlaneTextCaptionSettingsColor)||(null===(w=null===(I=null==t?void 0:t.text)||void 0===I?void 0:I.caption)||void 0===w?void 0:w.color),fontSize:(null==e?void 0:e.fastlaneTextCaptionSettingsFontSize)||(null===(P=null===(b=null==t?void 0:t.text)||void 0===b?void 0:b.caption)||void 0===P?void 0:P.fontSize)}},branding:(null==e?void 0:e.fastlaneBrandingSettings)||(null==t?void 0:t.branding)}}(e,t))}function Xe(e){return!!e&&(\"authenticationState\"in e||\"addresses\"in e||\"instruments\"in e)}var Je=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Ze{constructor(e,t,i,n){this.paymentIntegrationService=e,this.paypalCommerceRequestSender=t,this.paypalSdkScriptLoader=i,this.paypalFastlaneUtils=n}initialize(e){var t,i;return Je(this,void 0,void 0,function*(){const{methodId:n,paypalcommercefastlane:o}=e;if(this.methodId=n,this.paypalcommercefastlane=o,!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane\" argument is not provided.');if(!o.onInit||\"function\"!=typeof o.onInit)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane.onInit\" argument is not provided or it is not a function.');if(!o.onChange||\"function\"!=typeof o.onChange)throw new $('Unable to initialize payment because \"options.paypalcommercefastlane.onChange\" argument is not provided or it is not a function.');yield this.paymentIntegrationService.loadPaymentMethod(n);const a=this.paymentIntegrationService.getState(),r=a.getCartOrThrow(),s=a.getPaymentMethodOrThrow(n),{isDeveloperModeApplicable:d,isFastlaneStylingEnabled:l}=s.initializationData||{};this.threeDSVerificationMethod=null===(t=s.initializationData)||void 0===t?void 0:t.threeDSVerificationMethod,this.paypalFastlaneSdk=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(s,r.currency.code,r.id);const c=Ke(l?null===(i=null==s?void 0:s.initializationData)||void 0===i?void 0:i.fastlaneStyles:{},null==o?void 0:o.styles);yield this.paypalFastlaneUtils.initializePayPalFastlane(this.paypalFastlaneSdk,!!d,c),this.shouldRunAuthenticationFlow()&&(yield this.runPayPalAuthenticationFlowOrThrow(n)),yield this.initializePayPalPaymentComponent(),o.onInit(e=>this.renderPayPalPaymentComponent(e)),o.onChange(()=>this.handlePayPalStoredInstrumentChange(n))})}execute(e,t){return Je(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i}(e,[\"payment\"]);if(!i)throw new q([\"payment\"]);const{paymentData:o,methodId:a}=i,r=o&&W(o);try{yield this.paymentIntegrationService.submitOrder(n,t);const e=r?yield this.prepareVaultedInstrumentPaymentPayload(a,o):yield this.preparePaymentPayload(a,o);yield this.paymentIntegrationService.submitPayment(e),this.paypalFastlaneUtils.removeStorageSessionId()}catch(e){if(function(e){return\"object\"==typeof e&&null!==e&&\"message\"in e&&\"response\"in e&&\"body\"in e.response&&\"name\"in e.response.body}(e)&&\"INVALID_REQUEST\"===e.response.body.name){const e={translationKey:\"payment.errors.invalid_request_error\"};return this.handleError(e),Promise.reject()}if(e instanceof Error&&\"FastlaneError\"!==e.name)throw e;return Promise.reject()}})}finalize(){return Promise.reject(new H)}deinitialize(){return Je(this,void 0,void 0,function*(){return Promise.resolve()})}shouldRunAuthenticationFlow(){const e=this.paymentIntegrationService.getState(),t=e.getCartOrThrow(),i=e.getCustomerOrThrow(),n=e.getPaymentProviderCustomer(),o=Xe(n)?n:{},a=this.paypalFastlaneUtils.getStorageSessionId();return!(!i.isGuest||(null==o?void 0:o.authenticationState)===ye.CANCELED||(null==o?void 0:o.authenticationState)||a!==t.id)}runPayPalAuthenticationFlowOrThrow(e){return Je(this,void 0,void 0,function*(){try{const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow(),n=t.getCustomer(),o=t.getBillingAddress(),a=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:r}=yield this.paypalFastlaneUtils.lookupCustomerOrThrow(a),s=yield this.paypalFastlaneUtils.triggerAuthenticationFlowOrThrow(r),{authenticationState:d,addresses:l,instruments:c}=this.paypalFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,s);yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:d,addresses:l,instruments:c}),s.authenticationState===ye.CANCELED?this.paypalFastlaneUtils.removeStorageSessionId():this.paypalFastlaneUtils.updateStorageSessionId(i.id)}catch(e){}})}initializePayPalPaymentComponent(){return Je(this,void 0,void 0,function*(){const e=this.paymentIntegrationService.getState().getBillingAddressOrThrow(),t=e.phone,i=`${e.firstName} ${e.lastName}`.trim(),n=this.paypalFastlaneUtils.getPayPalFastlaneOrThrow(),o={fields:Object.assign({cardholderName:{prefill:i,enabled:!0}},t&&{phoneNumber:{prefill:t}})};this.paypalComponentMethods=yield n.FastlaneCardComponent(o)})}renderPayPalPaymentComponent(e){const t=this.getPayPalComponentMethodsOrThrow();if(!e)throw new $('Unable to render card component because \"container\" argument is not provided.');t.render(e)}getPayPalComponentMethodsOrThrow(){if(!this.paypalComponentMethods)throw new h;return this.paypalComponentMethods}prepareVaultedInstrumentPaymentPayload(e,t){return Je(this,void 0,void 0,function*(){const{instrumentId:i}=t,n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).config.is3dsEnabled?yield this.get3DSNonce(i):i;return yield this.createOrder(n),{methodId:e,paymentData:{formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:n}}}}})}preparePaymentPayload(e,t){return Je(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getBillingAddressOrThrow(),o=i.getPaymentMethodOrThrow(e),a=`${n.firstName} ${n.lastName}`.trim(),{getPaymentToken:r}=this.getPayPalComponentMethodsOrThrow(),{id:s}=yield r({name:{fullName:a},billingAddress:this.paypalFastlaneUtils.mapBcToPayPalAddress(n)}),d=o.config.is3dsEnabled?yield this.get3DSNonce(s):s;yield this.createOrder(d);const{shouldSaveInstrument:l=!1,shouldSetAsDefaultInstrument:c=!1}=Y(t)?t:{};return{methodId:e,paymentData:Object.assign(Object.assign({},t),{shouldSaveInstrument:l,shouldSetAsDefaultInstrument:c,formattedPayload:{paypal_fastlane_token:{order_id:this.orderId,token:d}}})}})}createOrder(e){return Je(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getCartOrThrow().id;if(this.methodId){const{orderId:i}=yield this.paypalCommerceRequestSender.createOrder(this.methodId,{cartId:t,fastlaneToken:e});this.orderId=i}})}get3DSNonce(e){var t;return Je(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getCartOrThrow(),o=i.getOrderOrThrow(),a=i.getStoreConfigOrThrow().links.checkoutLink,r=null===(t=this.paypalFastlaneSdk)||void 0===t?void 0:t.ThreeDomainSecureClient;if(!r)throw new h;const s={amount:o.orderAmount.toFixed(2),currency:n.currency.code,nonce:e,threeDSRequested:this.threeDSVerificationMethod===de.Always,transactionContext:{experience_context:{locale:\"en-US\",return_url:a,cancel_url:a}}},d=yield r.isEligible(s);if(this.threeDSVerificationMethod===de.Always&&!d)throw new G;if(d){const{liabilityShift:e,authenticationState:t,nonce:i}=yield r.show();if(e===C.No||e===C.Unknown||t===le.Errored||t===le.Cancelled)throw new G;if(t===le.Succeeded&&[C.Yes,C.Possible].includes(e))return i}return e})}handlePayPalStoredInstrumentChange(e){return Je(this,void 0,void 0,function*(){const t=this.paypalFastlaneUtils.getPayPalFastlaneOrThrow(),{selectionChanged:i,selectedCard:n}=yield t.profile.showCardSelector();if(i){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomer(),i=Xe(t)?t:{},o=this.paypalFastlaneUtils.mapPayPalToBcInstrument(e,n)[0];return yield this.paymentIntegrationService.updatePaymentProviderCustomer(Object.assign(Object.assign({},i),{instruments:[o]})),o}})}handleError(e){var t;(null===(t=this.paypalcommercefastlane)||void 0===t?void 0:t.onError)&&\"function\"==typeof this.paypalcommercefastlane.onError&&this.paypalcommercefastlane.onError(e)}}const Qe=p(e=>{const{getHost:t}=e.getState();return new Ze(e,new j((0,_bigcommerce_request_sender__WEBPACK_IMPORTED_MODULE_2__.createRequestSender)({host:t()})),Se(),De())},[{id:\"paypalcommerceacceleratedcheckout\"}]);var et=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class tt{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return et(this,void 0,void 0,function*(){const{paypalcommerce:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommerce.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommerce.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return et(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()})}signOut(e){return et(this,void 0,void 0,function*(){return yield this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){var i,n;const{container:o,onClick:a,onComplete:r}=t,s=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:l,paymentButtonStyles:c,isAppSwitchEnabled:p}=d.initializationData||{},{checkoutTopButtonStyles:u}=c||{},h=Object.assign(Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(e)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)}),a&&{onClick:()=>a()}),y=Object.assign(Object.assign({},!p&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,r)}),m=Object.assign(Object.assign({fundingSource:s.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},u),{height:40}))},h),l&&y),g=s.Buttons(m);g.isEligible()?(null===(i=g.hasReturned)||void 0===i?void 0:i.call(g))&&this.isPaypalCommerceAppSwitchEnabled(e)?null===(n=g.resume)||void 0===n||n.call(g):g.render(`#${o}`):this.paypalCommerceIntegrationService.removeElement(o)}onHostedCheckoutApprove(e,t,i,n){return et(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return et(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return et(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const it=p(e=>new tt(e,R(e)),[{id:\"paypalcommerce\"}]);var nt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ot{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t,this.onError=lodash__WEBPACK_IMPORTED_MODULE_3__.noop}initialize(e){return nt(this,void 0,void 0,function*(){const{paypalcommercecredit:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.onClick\" argument is not a function.');this.onError=t.onError||lodash__WEBPACK_IMPORTED_MODULE_3__.noop,this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return nt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return nt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onComplete:n,onClick:o}=t,a=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{isHostedCheckoutEnabled:s,paymentButtonStyles:d,isAppSwitchEnabled:l}=r.initializationData||{},{checkoutTopButtonStyles:c}=d||{},p=Object.assign({createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},o&&{onClick:()=>o()}),u=Object.assign(Object.assign({},!l&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(t,i)=>this.onHostedCheckoutApprove(t,i,e,n)}),h=[a.FUNDING.PAYLATER,a.FUNDING.CREDIT];let y=!1;h.forEach(e=>{if(!y){const t=Object.assign(Object.assign({fundingSource:e,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},c),{height:40}))},p),s&&u),n=a.Buttons(t);n.isEligible()&&(n.render(`#${i}`),y=!0)}}),y||this.paypalCommerceIntegrationService.removeElement(i)}onHostedCheckoutApprove(e,t,i,n){return nt(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n()}catch(e){this.handleError(e)}})}onShippingAddressChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}onShippingOptionsChange(e){return nt(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){this.handleError(e)}})}handleError(e){if(\"function\"!=typeof this.onError)throw e;this.onError(e)}}const at=p(e=>new ot(e,R(e)),[{id:\"paypalcommercecredit\"}]);var rt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class st{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return rt(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,methodId:i}=e;if(!i)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(!t.container)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.container\" argument is not provided.');if(t.onClick&&\"function\"!=typeof t.onClick)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.onClick\" argument is not a function.');this.paymentIntegrationService.getState().getPaymentMethod(i)||(yield this.paymentIntegrationService.loadPaymentMethod(i));const n=yield this.paypalCommerceIntegrationService.loadPayPalSdk(i);n&&n.Buttons&&\"function\"==typeof n.Buttons?this.renderButton(i,t):console.error(\"[BC PayPal]: PayPal Button could not be rendered, due to issues with loading PayPal SDK\")})}deinitialize(){return Promise.resolve()}signIn(e,t){return rt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return rt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}renderButton(e,t){const{container:i,onClick:n}=t,o=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),a=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{paymentButtonStyles:r}=a.initializationData||{},{checkoutTopButtonStyles:s}=r||{},d=Object.assign({fundingSource:o.FUNDING.VENMO,style:this.paypalCommerceIntegrationService.getValidButtonStyle(Object.assign(Object.assign({},s),{height:40})),createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:t})=>this.paypalCommerceIntegrationService.tokenizePayment(e,t)},n&&{onClick:()=>n()}),l=o.Buttons(d);l.isEligible()?l.render(`#${i}`):this.paypalCommerceIntegrationService.removeElement(i)}}const dt=p(e=>new st(e,R(e)),[{id:\"paypalcommercevenmo\"}]);var lt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ct{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalSdkScriptLoader=t,this.paypalFastlaneUtils=i}initialize(e){var t;return lt(this,void 0,void 0,function*(){const{methodId:i,paypalcommercefastlane:n}=e;if(!i)throw new $('Unable to proceed because \"methodId\" argument is not provided.');try{yield this.paymentIntegrationService.loadPaymentMethod(i);const e=this.paymentIntegrationService.getState(),o=e.getCartOrThrow(),a=e.getPaymentMethodOrThrow(i),r=!!(null===(t=a.initializationData)||void 0===t?void 0:t.isDeveloperModeApplicable),s=yield this.paypalSdkScriptLoader.getPayPalFastlaneSdk(a,o.currency.code,o.id);yield this.paypalFastlaneUtils.initializePayPalFastlane(s,r,this.getFastlaneStyles(i,n))}catch(e){}return Promise.resolve()})}deinitialize(){return lt(this,void 0,void 0,function*(){return Promise.resolve()})}signIn(e,t){return lt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signInCustomer(e,t)})}signOut(e){return lt(this,void 0,void 0,function*(){yield this.paymentIntegrationService.signOutCustomer(e)})}executePaymentMethodCheckout(e){return lt(this,void 0,void 0,function*(){const{checkoutPaymentMethodExecuted:t,continueWithCheckoutCallback:i,methodId:n}=e||{};if(!n)throw new $('Unable to proceed because \"methodId\" argument is not provided.');if(\"function\"!=typeof i)throw new $('Unable to proceed because \"continueWithCheckoutCallback\" argument is not provided and it must be a function.');if(this.paymentIntegrationService.getState().getCustomerOrThrow().isGuest){t&&\"function\"==typeof t&&t();try{yield this.runPayPalAuthenticationFlowOrThrow(n)}catch(e){}}i()})}runPayPalAuthenticationFlowOrThrow(e){return lt(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState(),i=t.getCartOrThrow().id,n=t.getCustomer(),o=t.getBillingAddress(),a=(null==n?void 0:n.email)||(null==o?void 0:o.email)||\"\",{customerContextId:r}=yield this.paypalFastlaneUtils.lookupCustomerOrThrow(a),s=yield this.paypalFastlaneUtils.triggerAuthenticationFlowOrThrow(r),d=s.authenticationState===ye.CANCELED;yield this.updateCustomerDataState(e,s),d?this.paypalFastlaneUtils.removeStorageSessionId():this.paypalFastlaneUtils.updateStorageSessionId(i)})}updateCustomerDataState(e,t){var i;return lt(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getCartOrThrow(),{authenticationState:o,addresses:a,billingAddress:r,shippingAddress:s,instruments:d}=this.paypalFastlaneUtils.mapPayPalFastlaneProfileToBcCustomerData(e,t);if(yield this.paymentIntegrationService.updatePaymentProviderCustomer({authenticationState:o,addresses:a,instruments:d}),r&&(yield this.paymentIntegrationService.updateBillingAddress(r)),s&&n.lineItems.physicalItems.length>0){const t=yield this.paymentIntegrationService.updateShippingAddress(s),n=t.getPaymentMethodOrThrow(e),{isFastlaneShippingOptionAutoSelectEnabled:o}=n.initializationData||{},a=t.getConsignments()||[],r=(null===(i=a[0])||void 0===i?void 0:i.availableShippingOptions)||[],d=r[0],l=r.find(e=>e.isRecommended);if((l||d)&&o){const e=(null==l?void 0:l.id)||d.id;yield this.paymentIntegrationService.selectShippingOption(e)}}})}getFastlaneStyles(e,t){const i=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e),{fastlaneStyles:n,isFastlaneStylingEnabled:o}=i.initializationData||{};return Ke(o?n:{},null==t?void 0:t.styles)}}const pt=p(e=>new ct(e,Se(),De()),[{id:\"paypalcommerceacceleratedcheckout\"},{id:\"paypalcommercecreditcards\"}]);var ut=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class ht{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){var t;return ut(this,void 0,void 0,function*(){const{paypalcommerce:i,containerId:n,methodId:o}=e,a=Boolean(null==i?void 0:i.buyNowInitializeOptions);if(!o)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.paypalcommerce\" argument is not provided.');if(a&&!i.currencyCode)throw new $('Unable to initialize payment because \"options.paypalcommerce.currencyCode\" argument is not provided.');if(a&&\"function\"!=typeof(null===(t=i.buyNowInitializeOptions)||void 0===t?void 0:t.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommerce.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');a||(yield this.paymentIntegrationService.loadDefaultCheckout());const r=a?i.currencyCode:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(o,r,!1),this.renderButton(n,o,i)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){var n,o;const{buyNowInitializeOptions:a,style:r,onComplete:s,onEligibilityFailure:d}=i,l=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),c=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:p,isAppSwitchEnabled:u}=c.initializationData||{},h=Object.assign(Object.assign({},this.isPaypalCommerceAppSwitchEnabled(t)&&{appSwitchWhenAvailable:!0}),{createOrder:()=>ut(this,void 0,void 0,function*(){if(a){const e=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(a);yield this.paymentIntegrationService.loadCheckout(e.id)}return this.paypalCommerceIntegrationService.createOrder(\"paypalcommerce\")}),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)}),y={onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},m=Object.assign(Object.assign({},!u&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,s)}),g=Object.assign(Object.assign(Object.assign({fundingSource:l.FUNDING.PAYPAL,style:this.paypalCommerceIntegrationService.getValidButtonStyle(r)},h),a&&y),p&&m),v=l.Buttons(g);v.isEligible()?(null===(n=v.hasReturned)||void 0===n?void 0:n.call(v))&&this.isPaypalCommerceAppSwitchEnabled(t)?null===(o=v.resume)||void 0===o||o.call(v):v.render(`#${e}`):d&&\"function\"==typeof d?d():this.paypalCommerceIntegrationService.removeElement(e)}onHostedCheckoutApprove(e,t,i,n){return ut(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalCommerceIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalCommerceIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalCommerceIntegrationService.updateOrder()}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalCommerceIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return ut(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalCommerceIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return ut(this,void 0,void 0,function*(){const t=this.paypalCommerceIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalCommerceIntegrationService.updateOrder()}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}isPaypalCommerceAppSwitchEnabled(e){var t;return(null===(t=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(e).initializationData)||void 0===t?void 0:t.isAppSwitchEnabled)||!1}}const yt=p(e=>new ht(e,R(e)),[{id:\"paypalcommerce\"}]),mt=function({styles:e}){const t={};return e.color&&(t.color=e.color),e.layout&&(t.layout=e.layout),(e[\"logo-type\"]||e[\"logo-position\"])&&(t.logo={},e[\"logo-type\"]&&(t.logo.type=e[\"logo-type\"]),e[\"logo-position\"]&&(t.logo.position=e[\"logo-position\"])),e.ratio&&(t.ratio=e.ratio),(e[\"text-color\"]||e[\"text-size\"])&&(t.text={},e[\"text-color\"]&&(t.text.color=e[\"text-color\"]),e[\"text-size\"]&&(t.text.size=+e[\"text-size\"])),t};var gt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class vt{constructor(e,t,i){this.paymentIntegrationService=e,this.paypalIntegrationService=t,this.paypalCommerceSdk=i}initialize(e){var t;return gt(this,void 0,void 0,function*(){const{paypalcommercecredit:i,containerId:n,methodId:o}=e,{buyNowInitializeOptions:a,currencyCode:r,messagingContainerId:s}=i||{},d=!!a;if(!o)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!n)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.paypalcommercecredit\" argument is not provided.');if(d&&!r)throw new $('Unable to initialize payment because \"options.paypalcommercecredit.currencyCode\" argument is not provided.');if(d&&\"function\"!=typeof(null==a?void 0:a.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercecredit.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');d||(yield this.paymentIntegrationService.loadDefaultCheckout());const l=this.paymentIntegrationService.getState(),c=d?r:l.getCartOrThrow().currency.code;yield this.paypalIntegrationService.loadPayPalSdk(o,c,!1),this.renderButton(n,o,i);const p=l.getStoreConfigOrThrow().checkoutSettings.features;if(null!==(t=p[\"PAYPAL-5557.Hide_ppc_banner_implementation\"])&&void 0!==t&&t)return;const u=s&&document.getElementById(s);if(c&&u){const e=l.getPaymentMethodOrThrow(o),{paypalBNPLConfiguration:t=[]}=e.initializationData||{},i=t&&t.find(({id:e})=>\"cart\"===e);if(!(null==i?void 0:i.status))return;u.removeAttribute(\"data-pp-style-logo-type\"),u.removeAttribute(\"data-pp-style-logo-position\"),u.removeAttribute(\"data-pp-style-text-color\"),u.removeAttribute(\"data-pp-style-text-size\");const n=yield this.paypalCommerceSdk.getPayPalMessages(e,c);this.renderMessages(n,s,i)}})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onComplete:a,onEligibilityFailure:r}=i,s=this.paypalIntegrationService.getPayPalSdkOrThrow(),d=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(t),{isHostedCheckoutEnabled:l,isAppSwitchEnabled:c}=d.initializationData||{},p={createOrder:()=>this.paypalIntegrationService.createOrder(\"paypalcommercecredit\"),onApprove:({orderID:e})=>this.paypalIntegrationService.tokenizePayment(t,e)},u={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},h=Object.assign(Object.assign({},!c&&{onShippingAddressChange:e=>this.onShippingAddressChange(e),onShippingOptionsChange:e=>this.onShippingOptionsChange(e)}),{onApprove:(e,i)=>this.onHostedCheckoutApprove(e,i,t,a)}),y=[s.FUNDING.PAYLATER,s.FUNDING.CREDIT];let m=!1;y.forEach(t=>{if(!m){const i=Object.assign(Object.assign(Object.assign({fundingSource:t,style:this.paypalIntegrationService.getValidButtonStyle(o)},p),n&&u),l&&h),a=s.Buttons(i);a.isEligible()?(a.render(`#${e}`),m=!0):r&&\"function\"==typeof r&&r()}}),m||this.paypalIntegrationService.removeElement(e)}handleClick(e){return gt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}onHostedCheckoutApprove(e,t,i,n){return gt(this,void 0,void 0,function*(){if(!e.orderID)throw new y(l.MissingOrderId);const o=this.paymentIntegrationService.getState().getCartOrThrow(),a=yield t.order.get();try{const t=this.paypalIntegrationService.getBillingAddressFromOrderDetails(a);if(yield this.paymentIntegrationService.updateBillingAddress(t),o.lineItems.physicalItems.length>0){const e=this.paypalIntegrationService.getShippingAddressFromOrderDetails(a);yield this.paymentIntegrationService.updateShippingAddress(e),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}return yield this.paymentIntegrationService.submitOrder({},{params:{methodId:i}}),yield this.paypalIntegrationService.submitPayment(i,e.orderID),n&&\"function\"==typeof n&&n(),!0}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingAddressChange(e){return gt(this,void 0,void 0,function*(){const t=this.paypalIntegrationService.getAddress({city:e.shippingAddress.city,countryCode:e.shippingAddress.countryCode,postalCode:e.shippingAddress.postalCode,stateOrProvinceCode:e.shippingAddress.state});try{yield this.paymentIntegrationService.updateBillingAddress(t),yield this.paymentIntegrationService.updateShippingAddress(t);const e=this.paypalIntegrationService.getShippingOptionOrThrow();yield this.paymentIntegrationService.selectShippingOption(e.id),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}onShippingOptionsChange(e){return gt(this,void 0,void 0,function*(){const t=this.paypalIntegrationService.getShippingOptionOrThrow(e.selectedShippingOption.id);try{yield this.paymentIntegrationService.selectShippingOption(t.id),yield this.paypalIntegrationService.updateOrder(\"paypalcommerce\")}catch(e){if(\"string\"==typeof e)throw new Error(e);throw e}})}renderMessages(e,t,i){const n={amount:this.paymentIntegrationService.getState().getCheckoutOrThrow().outstandingBalance,placement:\"cart\",style:mt(i)};e.Messages(n).render(`#${t}`)}}const ft=p(e=>new vt(e,Ce(e),Se()),[{id:\"paypalcommercecredit\"}]);var St=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class It{constructor(e,t){this.paymentIntegrationService=e,this.paypalCommerceIntegrationService=t}initialize(e){return St(this,void 0,void 0,function*(){const{paypalcommercevenmo:t,containerId:i,methodId:n}=e,{buyNowInitializeOptions:o,currencyCode:a}=t||{},r=!!o;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo\" argument is not provided.');if(r&&!a)throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.currencyCode\" argument is not provided.');if(r&&\"function\"!=typeof(null==o?void 0:o.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercevenmo.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');r||(yield this.paymentIntegrationService.loadDefaultCheckout());const s=r?a:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalCommerceIntegrationService.loadPayPalSdk(n,s,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{buyNowInitializeOptions:n,style:o,onEligibilityFailure:a}=i,r=this.paypalCommerceIntegrationService.getPayPalSdkOrThrow(),s=r.FUNDING.VENMO,d={createOrder:()=>this.paypalCommerceIntegrationService.createOrder(\"paypalcommercevenmo\"),onApprove:({orderID:e})=>this.paypalCommerceIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(n),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:s,style:this.getValidVenmoButtonStyles(o)},d),n&&l),p=r.Buttons(c);p.isEligible()?p.render(`#${e}`):a&&\"function\"==typeof a?a():this.paypalCommerceIntegrationService.removeElement(e)}getValidVenmoButtonStyles(e){const t=this.paypalCommerceIntegrationService.getValidButtonStyle(e);return t.color===A.gold?Object.assign(Object.assign({},t),{color:void 0}):t}handleClick(e){return St(this,void 0,void 0,function*(){if(e){const t=yield this.paypalCommerceIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const wt=p(e=>new It(e,R(e)),[{id:\"paypalcommercevenmo\"}]);var bt=function(e,t,i,n){return new(i||(i=Promise))(function(o,a){function r(e){try{d(n.next(e))}catch(e){a(e)}}function s(e){try{d(n.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,s)}d((n=n.apply(e,t||[])).next())})};class Pt{constructor(e,t){this.paymentIntegrationService=e,this.paypalIntegrationService=t}initialize(e){return bt(this,void 0,void 0,function*(){const{paypalcommercealternativemethods:t,containerId:i,methodId:n}=e,{apm:o,buyNowInitializeOptions:a,currencyCode:r}=t||{},s=!!a;if(!n)throw new $('Unable to initialize payment because \"options.methodId\" argument is not provided.');if(!i)throw new $('Unable to initialize payment because \"options.containerId\" argument is not provided.');if(!t)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods\" argument is not provided.');if(!o)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.apm\" argument is not provided.');if(s&&!r)throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.currencyCode\" argument is not provided.');if(s&&\"function\"!=typeof(null==a?void 0:a.getBuyNowCartRequestBody))throw new $('Unable to initialize payment because \"options.paypalcommercealternativemethods.buyNowInitializeOptions.getBuyNowCartRequestBody\" argument is not provided or it is not a function.');s||(yield this.paymentIntegrationService.loadDefaultCheckout());const d=s?r:this.paymentIntegrationService.getState().getCartOrThrow().currency.code;yield this.paypalIntegrationService.loadPayPalSdk(n,d,!1),this.renderButton(i,n,t)})}deinitialize(){return Promise.resolve()}renderButton(e,t,i){const{apm:n,buyNowInitializeOptions:o,style:a,onEligibilityFailure:r}=i,s=this.paypalIntegrationService.getPayPalSdkOrThrow();if(!Object.values(s.FUNDING).includes(n))throw new $('Unable to initialize PayPal button because \"options.paypalcommercealternativemethods.apm\" argument is not valid funding source.');const d={createOrder:()=>this.paypalIntegrationService.createOrder(\"paypalcommercealternativemethod\"),onApprove:({orderID:e})=>this.paypalIntegrationService.tokenizePayment(t,e)},l={onClick:()=>this.handleClick(o),onCancel:()=>this.paymentIntegrationService.loadDefaultCheckout()},c=Object.assign(Object.assign({fundingSource:n,style:this.paypalIntegrationService.getValidButtonStyle(a)},d),o&&l),p=s.Buttons(c);p.isEligible()?p.render(`#${e}`):r&&\"function\"==typeof r?r():this.paypalIntegrationService.removeElement(e)}handleClick(e){return bt(this,void 0,void 0,function*(){if(e){const t=yield this.paypalIntegrationService.createBuyNowCartOrThrow(e);yield this.paymentIntegrationService.loadCheckout(t.id)}})}}const Ct=p(e=>new Pt(e,Ce(e)),[{id:\"paypalcommercealternativemethods\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9wYXlwYWwtY29tbWVyY2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxJQ0NZQSxFRERSQyxFQUFzQixDQUFDLEVFQ1osU0FBU0MsRUFDcEJDLEVBQ0FDLEdBRUEsT0FBT0MsT0FBT0MsT0FBT0gsRUFBUSxDQUFFQyxjQUNuQyxDQ05BSCxFQUFvQk0sRUFBSSxDQUFDQyxFQUFTQyxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRUgsRUFBU0UsSUFDNUVMLE9BQU9PLGVBQWVKLEVBQVNFLEVBQUssQ0FBRUcsWUFBWSxFQUFNQyxJQUFLTCxFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ksRUFBS0MsSUFBVVgsT0FBT1ksVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NPbkUsTUFBZUksVUFBc0JDLE1BSWhELFdBQUFDLENBQVlDLEdDWEQsSUFBcUNOLEVEWTVDTyxNQUFNRCxHQUFXLHFDQUpyQixLQUFBRSxLQUFPLGdCQUNQLEtBQUFDLEtBQU8sV0NUeUNULGFEY1pBLFVDYmhDWixPQUFPc0IsZUFDUHRCLE9BQU9zQixlRFlRQyxLQ1plWCxHRFlmVyxLQ1ZSQyxVQUFZWixFRFlvQixtQkFBNUJJLE1BQU1TLGtCQUNiVCxNQUFNUyxrQkFBa0JGLGlCQUV4QkEsS0FBS0csTUFBUSxJQUFJVixNQUFNTyxLQUFLTCxTQUFTUSxLQUU3QyxFRWZXLE1BQU1DLFVBQTRDWixFQUM3RCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLHVHQUdSSyxLQUFLSCxLQUFPLHNDQUNaRyxLQUFLRixLQUFPLG1DQUNoQixHTmJKLFNBQVkxQixHQUNSLHFEQUNBLGlDQUNBLHlDQUNBLGlEQUNBLHlDQUNBLHFEQUNBLG1DQUNBLCtDQUNBLHVDQUNBLHVDQUNBLDRDQUNBLDREQUNBLG9EQUNBLDhEQUNBLG9EQUNBLGtEQUNBLHVEQUNILENBbEJELENBQVlBLElBQUFBLEVBQW9CLEtBeUJqQixNQUFNaUMsVUFBeUJiLEVBQzFDLFdBQUFFLENBQW1CWSxHQUNmVixNQU9SLFNBQXlCRSxHQUNyQixPQUFRQSxHQUNKLEtBQUsxQixFQUFxQm1DLHNCQUN0QixNQUFPLGlFQUVYLEtBQUtuQyxFQUFxQm9DLFlBQ3RCLE1BQU8sc0RBRVgsS0FBS3BDLEVBQXFCcUMsb0JBQ3RCLE1BQU8sOERBRVgsS0FBS3JDLEVBQXFCc0MsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3RDLEVBQXFCdUMsZ0JBQ3RCLE1BQU8sMERBRVgsS0FBS3ZDLEVBQXFCd0Msc0JBQzFCLEtBQUt4QyxFQUFxQnlDLG1CQUN0QixNQUFPLCtEQUVYLEtBQUt6QyxFQUFxQjBDLGFBQ3RCLE1BQU8sdURBRVgsS0FBSzFDLEVBQXFCMkMsZUFDdEIsTUFBTywwRUFFWCxLQUFLM0MsRUFBcUI0QyxlQUN0QixNQUFPLHlEQUVYLEtBQUs1QyxFQUFxQjZDLG9CQUN0QixNQUFPLCtFQUVYLEtBQUs3QyxFQUFxQjhDLHFCQUN0QixNQUFPLDJGQUVYLEtBQUs5QyxFQUFxQitDLHVCQUN0QixNQUFPLGtFQUVYLFFBQ0ksTUFBTyw4REFFbkIsQ0FqRGNDLENBQWdCZCxJQURQLEtBQUFBLFFBQUFBLEVBR2ZOLEtBQUtILEtBQU8sbUJBQ1pHLEtBQUtGLEtBQU8sY0FDaEIsRSxzU09mVyxNQUFNdUIsRUFHakIsV0FBQTNCLENBQW9CNEIsR0FBQSxLQUFBQSxhQUFBQSxFQUNoQnRCLEtBQUt1QixPQUFTQSxNQUNsQixDQUVNLG9CQUFBQyxDQUNGQyxFQUNBQyxFQUNBQyxHLHdDQUVBLElBQUszQixLQUFLdUIsT0FBT0ssa0JBQW1CLENBQ2hDLE1BQU1DLEVBQVM3QixLQUFLOEIsa0NBQ2hCTCxFQUNBQyxFQUNBQyxHQUtKLFNBRk0zQixLQUFLK0IsY0FBY0YsSUFFcEI3QixLQUFLdUIsT0FBT0ssa0JBQ2IsTUFBTSxJQUFJeEIsQyxDQUlsQixPQUFPSixLQUFLdUIsT0FBT0ssaUJBQ3ZCLEUsQ0FFTSxxQkFBQUksQ0FDRlAsRUFDQUMsRUFDQU8sRUFDQUMsRyx3Q0FFQSxJQUFLbEMsS0FBS3VCLE9BQU9ZLGlCQUFtQkQsRUFBVyxDQUMzQyxNQUFNRSxFQUF3QnBDLEtBQUtxQyx5Q0FDL0JaLEVBQ0FDLEVBQ0FPLFNBR0VqQyxLQUFLK0IsY0FBY0ssRSxDQUc3QixJQUFLcEMsS0FBS3VCLE9BQU9ZLGdCQUNiLE1BQU0sSUFBSS9CLEVBR2QsT0FBT0osS0FBS3VCLE9BQU9ZLGVBQ3ZCLEUsQ0FFTSxnQkFBQUcsQ0FDRmIsRUFDQUMsRyx3Q0FFQSxJQUFLMUIsS0FBS3VCLE9BQU9nQixXQUFZLENBQ3pCLE1BQU1WLEVBQVM3QixLQUFLd0MsNkJBQTZCZixFQUFlQyxHQUloRSxTQUZNMUIsS0FBSytCLGNBQWNGLElBRXBCN0IsS0FBS3VCLE9BQU9nQixXQUNiLE1BQU0sSUFBSW5DLEMsQ0FJbEIsT0FBT0osS0FBS3VCLE9BQU9nQixVQUN2QixFLENBRU0saUJBQUFFLENBQ0ZoQixFQUNBQyxHLHdDQUVBLElBQUsxQixLQUFLdUIsT0FBT21CLGVBQWdCLENBQzdCLE1BQU1DLEVBQTBCM0MsS0FBSzRDLGtDQUNqQ25CLEVBQ0FDLFNBR0UxQixLQUFLK0IsY0FBY1ksRSxDQUc3QixJQUFLM0MsS0FBS3VCLE9BQU9tQixlQUNiLE1BQU0sSUFBSXRDLEVBR2QsT0FBT0osS0FBS3VCLE9BQU9tQixjQUN2QixFLENBUWMsYUFBQVgsRUFBYyxRQUFFYyxFQUFPLFdBQUVDLEksd0NBQ25DLE1BQU1DLEVBQWdCL0MsS0FBS2dELGdCQUE0Q0gsR0FDakVJLEVBQW1CakQsS0FBS2dELGdCQUErQ0YsR0FJdkVJLEVBQVksaUNBREUsSUFBSUMsZ0JBQWdCSixHQUFlSyxtQkFHakRwRCxLQUFLc0IsYUFBYStCLFdBQVdILEVBQVcsQ0FDMUNJLE9BQU8sRUFDUFIsV0FBWUcsR0FFcEIsRSxDQU9RLGlDQUFBbkIsQ0FDSkwsRUFDQUMsRUFDQUMsR0FFQSxNQUFNLFlBQUU0QixFQUFXLG1CQUFFQyxHQUF1Qi9CLEVBRTVDLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUFFd0MsRUFBTSxTQUFFRCxFQUFRLFdBQUVFLEVBQVUsY0FBRUMsR0FBa0JKLEVBRXhELE1BQU8sQ0FDSFgsUUFBUyxDQUNMLFlBQWFZLEVBQ2IsY0FBZUUsRUFDZkUsUUFBUSxFQUNSQyxXQUFZLENBQ1IsV0FDQSxVQUNBLGlCQUNBLGdCQUNBLHVCQUVKQyxTQUFVckMsRUFDVmdDLFVBRUpaLFdBQVksQ0FDUiwwQkFBMkJuQixFQUFVcUMsUUFBUSxLQUFNLElBQ25ELGlCQUFrQixvQkFDbEIsOEJBQStCSixFQUMvQix3QkFBeUJMLEdBR3JDLENBRVEsd0NBQUFsQixDQUNKWixFQUNBQyxFQUNBTyxHQUE0QixHQUU1QixNQUFNLFlBQUVzQixFQUFXLG1CQUFFQyxHQUF1Qi9CLEVBRTVDLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUNGd0MsRUFBTSxTQUNORCxFQUFRLFdBQ1JFLEVBQVUsYUFDVk0sRUFBWSxjQUNaTCxFQUFhLHdCQUNiTSxFQUF1QiwwQkFDdkJDLEdBQ0FYLEVBRUVLLEVBQVNLLEdBQTJCakMsRUFFMUMsTUFBTyxDQUNIWSxRQUFTLE9BQUYsUUFDSCxZQUFhWSxFQUNiLGNBQWVFLEVBQ2ZFLFNBQ0FDLFdBQVksQ0FBQyxhQUNiQyxTQUFVckMsRUFDVmdDLFVBQ0lTLEdBQTZCLENBQUUsZ0JBQWlCRixJQUV4RG5CLFdBQVksQ0FDUiw4QkFBK0JjLEVBQy9CLG9CQUFxQkwsRUFDckIsaUJBQWtCLG1CQUc5QixDQUVRLDRCQUFBZixDQUNKZixFQUNBQyxHQUVBLE1BQU0sbUJBQUU4QixHQUF1Qi9CLEVBRS9CLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUNGd0MsRUFBTSxTQUNORCxFQUFRLFdBQ1JFLEVBQVUsYUFDVk0sRUFBWSxjQUNaTCxFQUFhLDBCQUNiTyxFQUF5QixtQ0FDekJDLEVBQXFDLEdBQUUsaUNBQ3ZDQyxFQUFtQyxJQUNuQ2IsRUFFRWMsRUFBb0JELEVBQ3BCRSxFQUFxQkgsRUFBbUNJLE9BQ3pEQyxJQUFpQkosRUFBaUNLLFNBQVNELElBR2hFLE1BQU8sQ0FDSDVCLFFBQVMsT0FBRixRQUNILFlBQWFZLEVBQ2IsY0FBZUUsRUFDZixpQkFBa0JXLEVBQWtCSyxPQUFTLEVBQUlMLE9BQW9CTSxFQUNyRSxrQkFBbUJMLEVBQW1CSSxPQUFTLEVBQUlKLE9BQXFCSyxFQUN4RWYsUUFBUSxFQUNSQyxXQUFZLENBQUMsVUFBVyxrQkFDeEJDLFNBQVVyQyxFQUNWZ0MsVUFDSVMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLDhCQUErQmMsRUFDL0IsaUJBQWtCLGNBRzlCLENBRVEsaUNBQUFoQixDQUNKbkIsRUFDQUMsR0FFQSxNQUFNLG1CQUFFOEIsR0FBdUIvQixFQUUvQixJQUFLK0IsSUFBdUJBLEVBQW1CQyxTQUMzQyxNQUFNLElBQUlwRCxFQUFpQmpDLEVBQXFCOEMsc0JBR3BELE1BQU0sU0FBRXVDLEVBQVEsV0FBRUUsRUFBVSxjQUFFQyxFQUFhLDBCQUFFTyxFQUF5QixhQUFFRixHQUNwRVQsRUFFSixNQUFPLENBQ0hYLFFBQVMsT0FBRixRQUNILFlBQWFZLEVBQ2IsY0FBZUUsRUFDZkcsV0FBWSxDQUFDLFlBQ2JDLFNBQVVyQyxHQUNOeUMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLGlCQUFrQixpQkFDbEIsOEJBQStCYyxHQUczQyxDQU9RLGVBQUFaLENBQW1EbkIsR0FDdkQsSUFBSWdELEVBQW9CLENBQUMsRUFzQnpCLE9BcEJhcEcsT0FBT3FHLEtBQUtqRCxHQUVwQmtELFFBQVNqRyxJQUNWLE1BQU1rRyxFQUFRbkQsRUFBTy9DLEdBR2pCa0csU0FFVSxLQUFWQSxHQUNDQyxNQUFNQyxRQUFRRixJQUEyQixJQUFqQkEsRUFBTUwsU0FLbkNFLEVBQW9CLE9BQUgsd0JBQ1ZBLEdBQWlCLENBQ3BCLENBQUMvRixHQUFNbUcsTUFBTUMsUUFBUUYsR0FBU0EsRUFBTUcsS0FBSyxLQUFPSCxPQUlqREgsQ0FDWCxFQ25USixNQUFNTyxFQUF5QyxDQUMzQ0MsS0FBTSxHQUNOQyxNQUFPLFVBQ1BDLGdCQUFpQixXQVNmQyxFQUFxQiwrQ0FPWixNQUFNQyxFQU1qQixXQUFBL0YsQ0FBWW1ELEdBQ1I3QyxLQUFLMEYsT0FBUyxPQUFILHdCQUFRTixHQUFvQnZDLEdBQVdBLEVBQVE2QyxRQUMxRDFGLEtBQUsyRixnQkFBa0IsT0FBSCxVQUFTOUMsR0FBV0EsRUFBUThDLGlCQUVoRDNGLEtBQUs0RixrQkFFTDVGLEtBQUs2RixVQUFZN0YsS0FBSzhGLGlCQUN0QjlGLEtBQUsrRixVQUFZL0YsS0FBS2dHLGlCQUV0QmhHLEtBQUs2RixVQUFVSSxZQUFZakcsS0FBSytGLFVBQ3BDLENBRUEsSUFBQUcsQ0FBS0MsR0FDRCxHQUFJQSxFQUFVLENBQ1YsTUFBTUMsRUFBU0MsU0FBU0MsZUFBZUgsR0FFdkMsSUFBS0MsRUFDRCxNQUFNLElBQUkzRyxNQUNOLDhFQUlSMkcsRUFBT0gsWUFBWWpHLEtBQUs2RixVLENBRzVCN0YsS0FBSzZGLFVBQVVVLE1BQU1DLFdBQWEsVUFDbEN4RyxLQUFLNkYsVUFBVVUsTUFBTUUsUUFBVSxHQUNuQyxDQUVBLElBQUFDLEdBQ0ksTUFBTUMsRUFBc0IsS0FDeEIzRyxLQUFLNkYsVUFBVVUsTUFBTUMsV0FBYSxTQUVsQ3hHLEtBQUs2RixVQUFVZSxvQkFBb0IsZ0JBQWlCRCxJQUd4RDNHLEtBQUs2RixVQUFVZ0IsaUJBQWlCLGdCQUFpQkYsR0FFakQzRyxLQUFLNkYsVUFBVVUsTUFBTUUsUUFBVSxHQUNuQyxDQUVRLGNBQUFYLEdBQ0osTUFBTUQsRUFBWVEsU0FBU1MsY0FBYyxPQWV6QyxPQWJBakIsRUFBVVUsTUFBTVEsUUFBVSxRQUMxQmxCLEVBQVVVLE1BQU1TLE9BQVMsSUFDekJuQixFQUFVVSxNQUFNVSxLQUFPLElBQ3ZCcEIsRUFBVVUsTUFBTVcsT0FBUyxPQUN6QnJCLEVBQVVVLE1BQU1ZLE1BQVEsT0FDeEJ0QixFQUFVVSxNQUFNYSxTQUFXLFdBQzNCdkIsRUFBVVUsTUFBTWMsTUFBUSxJQUN4QnhCLEVBQVVVLE1BQU1lLElBQU0sSUFDdEJ6QixFQUFVVSxNQUFNZ0IsV0FBYSxxQkFDN0IxQixFQUFVVSxNQUFNRSxRQUFVLElBRTFCekcsS0FBS3dILGtCQUFrQjNCLEVBQVc3RixLQUFLMkYsaUJBRWhDRSxDQUNYLENBRVEsY0FBQUcsR0FDSixNQUFNRCxFQUFZTSxTQUFTUyxjQUFjLE9BaUJ6QyxPQWZBZixFQUFVUSxNQUFNUSxRQUFVLFFBQzFCaEIsRUFBVVEsTUFBTVksTUFBUSxHQUFHbkgsS0FBSzBGLE9BQU9MLFNBQ3ZDVSxFQUFVUSxNQUFNVyxPQUFTLEdBQUdsSCxLQUFLMEYsT0FBT0wsU0FDeENVLEVBQVVRLE1BQU1rQixhQUFlLEdBQUd6SCxLQUFLMEYsT0FBT0wsU0FDOUNVLEVBQVVRLE1BQU1tQixPQUFTLFlBQ3pCM0IsRUFBVVEsTUFBTW9CLFlBQWMsR0FBRzNILEtBQUswRixPQUFPSCxtQkFBbUJ2RixLQUFLMEYsT0FBT0gsbUJBQW1CdkYsS0FBSzBGLE9BQU9KLFNBQVN0RixLQUFLMEYsT0FBT0osUUFDaElTLEVBQVVRLE1BQU1xQixPQUFTLFNBQ3pCN0IsRUFBVVEsTUFBTWEsU0FBVyxXQUMzQnJCLEVBQVVRLE1BQU1VLEtBQU8sSUFDdkJsQixFQUFVUSxNQUFNYyxNQUFRLElBQ3hCdEIsRUFBVVEsTUFBTWUsSUFBTSxNQUN0QnZCLEVBQVVRLE1BQU1zQixVQUFZLGdDQUM1QjlCLEVBQVVRLE1BQU11QixlQUFpQixjQUNqQy9CLEVBQVVRLE1BQU13QixVQUFZLEdBQUd2Qyx3REFFeEJPLENBQ1gsQ0FFUSxpQkFBQXlCLENBQWtCUSxFQUFzQkMsR0FDNUN4SixPQUFPcUcsS0FBS21ELEdBQU9sRCxRQUFTbUQsSUFDeEJGLEVBQVF6QixNQUFNNEIsWUFBWUQsRUFBR0QsRUFBTUMsS0FFM0MsQ0FFUSxlQUFBdEMsRyxNQUdKLEdBQUlTLFNBQVNDLGVBQWVkLEdBQ3hCLE9BR0osTUFBTWUsRUFBUUYsU0FBU1MsY0FBYyxTQUVyQ1AsRUFBTTZCLEdBQUs1QyxFQUdFLFFBQWIsRUFBQWEsU0FBU2dDLFlBQUksU0FBRXBDLFlBQVlNLEdBRXZCQSxFQUFNK0IsaUJBQWlCQyxlQUd2QmhDLEVBQU0rQixNQUFNRSxXQUNSLGdDQUNhaEQsdUxBS2IsRUFHWixFQzFJVyxNQUFNaUQsVUFBZ0NqSixFQUNqRCxXQUFBRSxDQUFZQyxHQUNSQyxNQUNJRCxHQUNJLGtHQUdSSyxLQUFLSCxLQUFPLDBCQUNaRyxLQUFLRixLQUFPLDZCQUNoQixFQ1hKLE1BQU00SSxFQUFtQixDQUNyQkMsS0FBTSxDQUFDLEVBQ1BDLFFBQVMsQ0FBQyxFQUNWQyxPQUFRLEdBT0csTUFBTUMsVUFBa0N0SixFQU1uRCxXQUFBRSxDQUNJcUosR0FDQSxRQUNJcEosRUFBTyxPQUNQcUosR0FJQSxDQUFDLEdBRUwsTUFBTSxLQUFFTCxFQUFJLFFBQUVDLEVBQU8sT0FBRUMsR0FBV0UsR0FBWUwsRUFFOUM5SSxNQUFNRCxHQUFXLHFDQUVqQkssS0FBS0gsS0FBTyxlQUNaRyxLQUFLRixLQUFPLFVBQ1pFLEtBQUsySSxLQUFPQSxFQUNaM0ksS0FBSzRJLFFBQVVBLEVBQ2Y1SSxLQUFLNkksT0FBU0EsRUFDZDdJLEtBQUtnSixPQUFTQSxHQUFVLEVBQzVCLEVDeENKLElBQVlDLEVDbURBQyxFQW1LQUMsRUFnUkFDLEVBUUFDLEVBUUFDLEVBb0ZBQyxFQTRCQUMsR0R0bUJaLFNBQVlQLEdBQ1Isa0JBQ0gsQ0FGRCxDQUFZQSxJQUFBQSxFQUFVLEtDbUR0QixTQUFZQyxHQUNSLHNCQUNBLFVBQ0Esb0JBQ0EsV0FDSCxDQUxELENBQVlBLElBQUFBLEVBQWtCLEtBbUs5QixTQUFZQyxHQUNSLHdCQUNBLG1CQUNILENBSEQsQ0FBWUEsSUFBQUEsRUFBb0IsS0FnUmhDLFNBQVlDLEdBQ1Isa0JBQ0Esc0JBQ0Esa0JBQ0EsWUFDQSwyQkFDSCxDQU5ELENBQVlBLElBQUFBLEVBQWdCLEtBUTVCLFNBQVlDLEdBQ1IsY0FDQSxjQUNBLGtCQUNBLGdCQUNBLGVBQ0gsQ0FORCxDQUFZQSxJQUFBQSxFQUFnQixLQVE1QixTQUFZQyxHQUNSLGNBQ0EsYUFDSCxDQUhELENBQVlBLElBQUFBLEVBQWdCLEtBb0Y1QixTQUFZQyxHQUNSLGFBQ0gsQ0FGRCxDQUFZQSxJQUFBQSxFQUFtQyxLQTRCL0MsU0FBWUMsR0FDUixzQkFDQSxvQkFDQSw4Q0FDQSw2QkFDQSw4QkFDSCxDQU5ELENBQVlBLElBQUFBLEVBQWlCLEssc1NDcmtCZCxNQUFNQyxFQUdqQixXQUFBL0osQ0FDWWdLLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBSEEsS0FBQUgsV0FBQUEsRUFDQSxLQUFBQywwQkFBQUEsRUFDQSxLQUFBQyw0QkFBQUEsRUFDQSxLQUFBQywyQkFBQUEsQ0FDVCxDQU9HLGFBQUE5SCxDQUNGK0gsRUFDQUMsRUFDQTlILEVBQ0FDLEcsd0NBRUEsTUFBTThILEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3ZJLEVBQWVxSSxHQUF3QkMsRUFBTUUsaUJBQWlCbkcsU0FBU29HLEtBQ3ZFMUksRUFDRnVJLEVBQU1JLHdCQUEwRE4sR0FTcEUsT0FQQTlKLEtBQUtxSyxnQkFBa0JySyxLQUFLNkosMkJBQTJCUyxhQUNuRDdJLEVBQ0FDLEVBQ0FPLEVBQ0FDLEdBR0dsQyxLQUFLcUssU0FDaEIsRSxDQUVBLG1CQUFBRSxHQUNJLElBQUt2SyxLQUFLcUssVUFDTixNQUFNLElBQUlqSyxFQUdkLE9BQU9KLEtBQUtxSyxTQUNoQixDQU9NLHVCQUFBRyxDQUNGQyxHLHdDQUVBLE1BQU1DLEVBQWtCRCxFQUF3QkUsMkJBRWhELElBQUtELEVBQ0QsTUFBTSxJQUFJckssRUFBaUJqQyxFQUFxQm9DLGFBR3BELElBQ0ksYUFBYVIsS0FBSzJKLDBCQUEwQmlCLGlCQUFpQkYsRSxDQUMvRCxNQUFPRyxHQUNMLE1BQU0sSUFBSXBDLEMsQ0FFbEIsRSxDQU9NLFdBQUFxQyxDQUNGQyxFQUNBQyxHLHdDQUVBLE1BQU1DLEVBQVNqTCxLQUFLMkosMEJBQTBCTSxXQUFXQyxpQkFBaUI5QixJQUVwRSxRQUFFOEMsU0FBa0JsTCxLQUFLNEosNEJBQTRCa0IsWUFBWUMsRUFBWSxPQUFGLFFBQzdFRSxVQUNHRCxJQUdQLE9BQU9FLENBQ1gsRSxDQUVNLHFCQUFBQyxDQUNGSixFQUNBQyxHLHdDQUVBLE1BQU1DLEVBQVNqTCxLQUFLMkosMEJBQTBCTSxXQUFXQyxpQkFBaUI5QixJQUVwRSxRQUFFOEMsRUFBTyxXQUFFRSxTQUFxQnBMLEtBQUs0Siw0QkFBNEJrQixZQUNuRUMsRUFBVSxlQUVORSxVQUNHRCxJQUlYLE9BQU8sT0FBUCxRQUFTRSxXQUFhRSxFQUFhLENBQUVBLGNBQWUsQ0FBQyxFQUN6RCxFLENBRU0sV0FBQUMsRyx3Q0FDRixNQUFNckIsRUFBUWhLLEtBQUsySiwwQkFBMEJNLFdBQ3ZDcUIsRUFBT3RCLEVBQU1FLGlCQUNicUIsRUFBY3ZCLEVBQU13Qix5QkFBeUIsR0FFbkQsVUFDVXhMLEtBQUs0Siw0QkFBNEJ5QixZQUFZLENBQy9DSSx5QkFBMEJGLEVBQVlFLHlCQUN0Q1IsT0FBUUssRUFBS2xELEdBQ2JzRCx1QkFBd0JILEVBQVlHLHdCLENBRTFDLE1BQU9DLEdBQ0wsTUFBTSxJQUFJN0MsQyxDQUVsQixFLENBRU0sY0FBQThDLENBQWU5QixFQUFtQmpILEcsd0NBQ3BDLElBQ0ksTUFBTSxPQUFFZ0csU0FBaUI3SSxLQUFLNEosNEJBQTRCZ0MsZUFDdEQ5QixFQUNBakgsR0FHSixPQUFPZ0csQyxDQUNULE1BQU84QyxHQUNMLE1BQU0sSUFBSTdDLEMsQ0FFbEIsRSxDQU9BLGVBQUErQyxDQUFnQi9CLEVBQWtCb0IsR0FDOUIsTUFBTUksRUFBT3RMLEtBQUsySiwwQkFBMEJNLFdBQVdDLGlCQUV2RCxJQUFLZ0IsRUFDRCxNQUFNLElBQUk3SyxFQUFpQmpDLEVBQXFCMkMsZ0JBR3BELE9BQU9mLEtBQUswSixXQUFXb0MsU0FBUyxnQkFBaUIsT0FBRixRQUMzQ0MsYUFBYyxTQUNkQyxPQUFRLHdCQUNSQyxTQUFVbkMsRUFDVm9DLFNBQVVoQixHQUNOSSxFQUFLYSxTQUFXbEQsRUFBV21ELFFBQVUsQ0FBRUMsUUFBU2YsRUFBS2xELEtBRWpFLENBRU0sYUFBQWtFLENBQWN4QyxFQUFrQm9CLEVBQWlCcUIsRyx3Q0FDbkQsTUFBTUMsRUFBYyxDQUNoQkMsaUJBQWtCLENBQ2RDLHlCQUEwQixLQUMxQkMsaUNBQWtDLEtBQ2xDQyxZQUFhLEtBQ2JDLFVBQVcvQyxFQUNYZ0QsZUFBZ0IsQ0FDWlosU0FBVWhCLFdBS2hCbEwsS0FBSzJKLDBCQUEwQjJDLGNBQWMsT0FBRCxRQUM5Q3hDLFdBQ0EwQyxlQUNJRCxFQUFZLENBQUVBLGFBQWMsQ0FBQyxHQUV6QyxFLENBT0Esd0JBQUFRLENBQXlCQyxHQUNyQixNQUNNekIsRUFEUXZMLEtBQUsySiwwQkFBMEJNLFdBQ25CdUIseUJBQXlCLEdBRTdDQyxFQUEyQkYsRUFBWUUsMEJBQTRCLEdBRW5Fd0IsRUFBNEJ4QixFQUF5QnlCLEtBQ3REQyxHQUFXQSxFQUFPQyxlQVNqQkMsR0FOeUJMLEVBQ3pCdkIsRUFBeUJ5QixLQUFNQyxHQUFXQSxFQUFPL0UsS0FBTzRFLEdBQ3hEdkIsRUFBeUJ5QixLQUNwQkMsSUFBVSxNQUFDLE9BQUFBLEVBQU8vRSxNQUF5QyxRQUFsQyxFQUFBbUQsRUFBWUcsOEJBQXNCLGVBQUV0RCxRQUkxQzZFLEdBQTZCeEIsRUFBeUIsR0FFcEYsSUFBSzRCLEVBQ0QsTUFBTSxJQUFJNU4sTUFBTSwrQ0FHcEIsT0FBTzROLENBQ1gsQ0FPQSxVQUFBQyxDQUFXQyxHQUNQLE1BQU8sQ0FDSEMsV0FBV0QsYUFBTyxFQUFQQSxFQUFTQyxZQUFhLEdBQ2pDQyxVQUFVRixhQUFPLEVBQVBBLEVBQVNFLFdBQVksR0FDL0JDLE9BQU9ILGFBQU8sRUFBUEEsRUFBU0csUUFBUyxHQUN6QkMsT0FBT0osYUFBTyxFQUFQQSxFQUFTSSxRQUFTLEdBQ3pCQyxRQUFTLEdBQ1RDLFVBQVVOLGFBQU8sRUFBUEEsRUFBU00sV0FBWSxHQUMvQkMsVUFBVVAsYUFBTyxFQUFQQSxFQUFTTyxXQUFZLEdBQy9CQyxNQUFNUixhQUFPLEVBQVBBLEVBQVNRLE9BQVEsR0FDdkJDLGFBQWFULGFBQU8sRUFBUEEsRUFBU1MsY0FBZSxHQUNyQ0MsWUFBWVYsYUFBTyxFQUFQQSxFQUFTVSxhQUFjLEdBQ25DQyxnQkFBaUIsR0FDakJDLHFCQUFxQlosYUFBTyxFQUFQQSxFQUFTWSxzQkFBdUIsR0FDckRDLGFBQWMsR0FFdEIsQ0FFQSxpQ0FBQUMsRUFBa0MsTUFBRUMsSSxRQUNoQyxPQUFPdE8sS0FBS3NOLFdBQVcsQ0FDbkJFLFVBQVdjLEVBQU16TyxLQUFLME8sV0FDdEJkLFNBQVVhLEVBQU16TyxLQUFLMk8sUUFDckJkLE1BQU9ZLEVBQU1HLGNBQ2JaLFNBQVVTLEVBQU1mLFFBQVFtQixlQUN4QlosU0FBVVEsRUFBTWYsUUFBUW9CLGVBQ3hCWixLQUFNTyxFQUFNZixRQUFRcUIsYUFDcEJaLFlBQWFNLEVBQU1mLFFBQVFzQixhQUMzQlosV0FBWUssRUFBTWYsUUFBUXVCLFlBQzFCWCxvQkFBcUJHLEVBQU1mLFFBQVF3QixhQUNuQ3BCLE1BQWdDLFFBQXpCLEVBQVcsUUFBWCxFQUFBVyxFQUFNWCxhQUFLLGVBQUVxQixvQkFBWSxlQUFFQyxpQkFFMUMsQ0FFQSxrQ0FBQUMsQ0FDSUMsR0FFQSxNQUFNLE1BQUViLEVBQUssZUFBRWMsR0FBbUJELEdBQzVCLFFBQ0Y1QixFQUNBMU4sTUFBTSxVQUFFd1AsSUFDUkQsRUFBZSxHQUFHRSxVQUVmOUIsS0FBY0MsR0FBWTRCLEVBQVVFLE1BQU0sS0FFakQsT0FBT3ZQLEtBQUtzTixXQUFXLENBQ25CRSxZQUNBQyxTQUFVQSxFQUFTdEksS0FBSyxLQUN4QnVJLE1BQU9ZLEVBQU1HLGNBQ2JaLFNBQVVOLEVBQVFtQixlQUNsQlosU0FBVVAsRUFBUW9CLGVBQ2xCWixLQUFNUixFQUFRcUIsYUFDZFosWUFBYVQsRUFBUXNCLGFBQ3JCWixXQUFZVixFQUFRdUIsWUFDcEJYLG9CQUFxQlosRUFBUXdCLGNBRXJDLENBT0EsbUJBQUFTLENBQW9CakosR0FDaEIsTUFBTSxNQUFFakIsRUFBSyxPQUFFNEIsRUFBTSxNQUFFdUksRUFBSyxNQUFFQyxHQUFVbkosR0FBUyxDQUFDLEVBRTVDb0osRUFBYyxDQUNoQnJLLE1BQU9BLEdBQVMrRCxFQUFpQi9ELEdBQVNBLE9BQVFWLEVBQ2xEc0MsT0FBUWxILEtBQUs0UCxlQUFlMUksR0FDNUJ1SSxNQUFPQSxHQUFTckcsRUFBaUJxRyxHQUFTQSxPQUFRN0ssRUFDbEQ4SyxNQUFPQSxHQUFTcEcsRUFBaUJvRyxHQUFTQSxPQUFROUssR0FHdEQsT0FBT2lMLDhDQUFBQSxDQUFPRixFQUFhRyx5Q0FBQUEsQ0FDL0IsQ0FFQSxjQUFBRixDQUFlMUksR0FLWCxPQUFLQSxHQUE0QixpQkFBWEEsRUFJbEJBLEVBTmMsTUFVZEEsRUFYYyxNQWVYQSxFQWhCZSxFQWlCMUIsQ0FPQSxhQUFBNkksQ0FBY0MsR0FDVixNQUFNaEksRUFBVWdJLEdBQWEzSixTQUFTQyxlQUFlMEosR0FFakRoSSxJQUVBQSxFQUFRekIsTUFBTVEsUUFBVSxPQUVoQyxFQzNWRyxNQUFNa0osRUFDVCwwRUNESixJQUFLQyxHQUFMLFNBQUtBLEdBQ0QsMEJBQ0EscUNBQ0gsQ0FIRCxDQUFLQSxJQUFBQSxFQUFXLEtBS2hCLFVDTGFDLEVBQXNCLENBQUUseUJBQTBCLFcsc1NDaUJoRCxNQUFNQyxFQUNqQixXQUFBMVEsQ0FBb0IyUSxHQUFBLEtBQUFBLGNBQUFBLENBQStCLENBRTdDLFdBQUF2RixDQUNGQyxFQUNBQyxHLHdDQUVBLE1BQU1zRixFQUFNLDJCQUEyQnZGLElBQ2pDcEMsRUFBT3FDLEVBQ1BwQyxFQUFVLE9BQUgsUUFDVCxpQkFBa0JxSCxFQUNsQixlQUFnQixFQUFZTSxNQUN6QkosR0FLUCxhQUZrQm5RLEtBQUtxUSxjQUFjRyxLQUFzQkYsRUFBSyxDQUFFMUgsVUFBU0QsVUFFaEVBLElBQ2YsRSxDQUVNLFdBQUEwQyxDQUNGTCxHLHdDQUVBLE1BQ01yQyxFQUFPcUMsRUFDUHBDLEVBQVUsT0FBSCxRQUNULGlCQUFrQnFILEVBQ2xCLGVBQWdCLEVBQVlNLE1BQ3pCSixHQUtQLGFBRmtCblEsS0FBS3FRLGNBQWNJLElBUnpCLGdEQVE2RCxDQUFFN0gsVUFBU0QsVUFFekVBLElBQ2YsRSxDQUVNLGNBQUFpRCxDQUNGOUIsRUFBVyxpQkFDWGpILEcsd0NBRUEsTUFBTXlOLEVBQU0sa0NBQWtDeEcsSUFDeENsQixFQUFVLE9BQUgsUUFDVCxpQkFBa0JxSCxFQUNsQixlQUFnQixFQUFZTSxNQUN6QkosR0FRUCxhQUxrQm5RLEtBQUtxUSxjQUFjblIsSUFBMkJvUixFQUFLLE9BQUYsUUFDL0QxSCxXQUNHL0YsS0FHSThGLElBQ2YsRSx3U0NwRFcsTUFBTStILEVBR2pCLFdBQUFoUixDQUFvQjRCLEdBQUEsS0FBQUEsYUFBQUEsRUFDaEJ0QixLQUFLdUIsT0FBU0EsTUFDbEIsQ0FFTSxZQUFBK0ksQ0FDRjdJLEVBQ0FDLEVBQ0FPLEVBQ0FDLEcsd0NBRUEsTUFBTUUsRUFBd0JwQyxLQUFLMlEsZ0NBQy9CbFAsRUFDQUMsRUFDQU8sR0FHSixPQUFPakMsS0FBSzRRLGNBQWN4TyxFQUF1QkYsRUFDckQsRSxDQUVjLGFBQUEwTyxDQUNWeE8sRUFDQUYsR0FBWSxHLHdDQUVaLElBQUtsQyxLQUFLdUIsT0FBT3NQLFFBQVUzTyxFQUFXLENBQ2xDLE1BQU1XLEVBQVU3QyxLQUFLZ0QsZ0JBQ2pCWixFQUFzQlMsU0FFcEJDLEVBQWE5QyxLQUFLZ0QsZ0JBQ3BCWixFQUFzQlUsWUFLcEJJLEVBQVksaUNBREUsSUFBSUMsZ0JBQWdCTixHQUFTTyxtQkFHM0NwRCxLQUFLc0IsYUFBYStCLFdBQVdILEVBQVcsQ0FBRUksT0FBTyxFQUFNUixjLENBR2pFLElBQUs5QyxLQUFLdUIsT0FBT3NQLE9BQ2IsTUFBTSxJQUFJelEsRUFHZCxPQUFPSixLQUFLdUIsT0FBT3NQLE1BQ3ZCLEUsQ0FFUSwrQkFBQUYsQ0FDSmxQLEVBQ0FDLEVBQ0FPLEdBQTRCLEdBRTVCLE1BQU0sR0FBRW1HLEVBQUUsWUFBRTdFLEVBQVcsbUJBQUVDLEdBQXVCL0IsRUFFaEQsS0FBSytCLGFBQWtCLEVBQWxCQSxFQUFvQkMsVUFDckIsTUFBTSxJQUFJcEQsRUFBaUJqQyxFQUFxQjhDLHNCQUdwRCxNQUFNLE9BQ0Z3QyxFQUFNLFNBQ05ELEVBQVEsV0FDUkUsRUFBVSxhQUNWTSxFQUFZLGNBQ1pMLEVBQWEsZUFDYmtOLEVBQWMsd0JBQ2Q1TSxFQUF1Qix3QkFDdkI2TSxFQUF1QiwwQkFDdkI1TSxFQUF5QixtQ0FDekJDLEVBQXFDLEdBQUUsaUNBQ3ZDQyxFQUFtQyxHQUFFLG1CQUNyQzJNLEdBQ0F4TixFQUVFSyxFQUFTSyxHQUEyQmpDLEVBRXBDZ1AsRUFBMEIsOEJBQVA3SSxFQUNuQjhJLEVBQW9CRCxFQUFtQixDQUFDLFFBQVUsR0FHbERFLEVBQXNCSixFQUEwQixDQUFDLFNBQVUsWUFBYyxHQUd6RUssRUFBcUJOLEVBQWlCLENBQUMsU0FBVyxHQUtsRE8sRUFBMkNMLEVBQXFCLENBQUMsYUFBZSxHQUNoRk0sRUFBNENyUCxFQUM1QyxDQUFDLGVBQ0QsR0FDQXNQLEVBQThCLElBZFJOLEVBQThCLEdBQVgsQ0FBQyxXQUdsQkYsRUFBbUQsR0FBekIsQ0FBQyxTQUFVLGVBR3RDRCxFQUE2QixHQUFaLENBQUMsWUFDcEIxTSxFQUFtQ0ksT0FDekRDLElBQWlCSixFQUFpQ0ssU0FBU0QsS0FZMUQrTSxFQUE2QixJQUM1Qk4sS0FDQUMsS0FDQUMsS0FDQS9NLEdBR1AsTUFBTyxDQUNIeEIsUUFBUyxPQUFGLFFBQ0gsWUFBYVksRUFDYixjQUFlRSxFQUNmLGlCQUFrQjZOLEVBQWM3TSxPQUFTLEVBQUk2TSxPQUFnQjVNLEVBQzdELGtCQUFtQjJNLEVBQWU1TSxPQUFTLEVBQUk0TSxPQUFpQjNNLEVBQ2hFZixTQUNBQyxXQUFZLENBQ1IsVUFDQSxnQkFDQSxpQkFDQSxXQUNHdU4sS0FDQUMsR0FFUHZOLFNBQVVyQyxFQUNWZ0MsVUFDSVMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLDhCQUErQmMsRUFDL0Isb0JBQXFCTCxHQUdqQyxDQUVRLGVBQUFQLENBQW1EbkIsR0FDdkQsSUFBSWdELEVBQW9CLENBQUMsRUFzQnpCLE9BcEJhcEcsT0FBT3FHLEtBQUtqRCxHQUVwQmtELFFBQVNqRyxJQUNWLE1BQU1rRyxFQUFRbkQsRUFBTy9DLEdBR2pCa0csU0FFVSxLQUFWQSxHQUNDQyxNQUFNQyxRQUFRRixJQUEyQixJQUFqQkEsRUFBTUwsU0FLbkNFLEVBQW9CLE9BQUgsd0JBQ1ZBLEdBQWlCLENBQ3BCLENBQUMvRixHQUFNbUcsTUFBTUMsUUFBUUYsR0FBU0EsRUFBTUcsS0FBSyxLQUFPSCxPQUlqREgsQ0FDWCxFQ2pLSixNQWFBLEVBWkk4RSxJQUVBLE1BQU0sUUFBRThILEdBQVk5SCxFQUEwQk0sV0FFOUMsT0FBTyxJQUFJUixFQUNQaUksMEVBQUFBLEdBQ0EvSCxFQUNBLElBQUl5RyxFQUE0QnVCLGdGQUFBQSxDQUFvQixDQUFFQyxLQUFNSCxPQUM1RCxJQUFJZixFQUEyQm1CLDJFQUFBQSxNQ3JCMUJDLEVBQTJCLENBQ3BDLG1CQUFvQixxQkFDcEIsVUFBVyxRQ0tBLE1BQU1DLFVBQTZCdlMsRUFDOUMsV0FBQUUsQ0FBWUMsR0FDUkMsTUFBTUQsR0FBVyx5Q0FFakJLLEtBQUtILEtBQU8sdUJBQ1pHLEtBQUtGLEtBQU8sa0JBQ2hCLEVDTlcsTUFBTWtTLFVBQW9DRCxFQUNyRCxXQUFBclMsQ0FBWXVTLEdBQ1IsSUFBSXRTLEVBQVUseUVBRVZzUyxJQUNBdFMsRUFBVSxHQUFHQSw0REFBa0VzUyxFQUFjOU0sS0FDekYsVUFJUnZGLE1BQU1ELEdBRU5LLEtBQUtILEtBQU8sNkJBQ2hCLEVDWFcsTUFBTXFTLFVBQTJDcEosRUFDNUQsV0FBQXBKLENBQVlxSixHQUNSbkosTUFBTW1KLEVBQVUsQ0FDWnBKLFFBQVMsd0VBR2JLLEtBQUtILEtBQU8sNEJBQ1pHLEtBQUtGLEtBQU8sd0JBQ2hCLEVDWFcsTUFBTXFTLFVBQTBDM1MsRUFDM0QsV0FBQUUsR0FDSUUsTUFBTSxrRUFFTkksS0FBS0gsS0FBTyxvQ0FDWkcsS0FBS0YsS0FBTyxpQ0FDaEIsRUNWVyxTQUFTc1MsRUFDcEJDLEdBRUEsUUFDMEIsaUJBQWZBLEdBQ1EsT0FBZkEsUUFDa0UsSUFBekRBLEVBQWdDQyxzQkFDNEIsa0JBQXpERCxFQUFnQ0MsMkJBQzhCLElBQWpFRCxFQUFnQ0UsOEJBQ29DLGtCQUFqRUYsRUFBZ0NFLDZCQUVwRCxDQ0xlLFNBQVNDLEVBQ3BCSCxHQUVBLE9BQU9JLFFBQVNKLEVBQWlDSyxhQUNyRCxDQ1RBLE1DMkNBLEVBNUNBLFVBQStDLE9BQzNDaE4sSUFFQSxNQUFNaU4sRUFBdUMsQ0FBQyxFQXNDOUMsT0FwQ0lqTixFQUFPSixRQUNQcU4sRUFBZXJOLE1BQVFJLEVBQU9KLE9BRzlCSSxFQUFPa04sU0FDUEQsRUFBZUMsT0FBU2xOLEVBQU9rTixTQUcvQmxOLEVBQU8sY0FBZ0JBLEVBQU8sb0JBQzlCaU4sRUFBZUUsS0FBTyxDQUFDLEVBRW5Cbk4sRUFBTyxlQUNQaU4sRUFBZUUsS0FBSy9TLEtBQU80RixFQUFPLGNBR2xDQSxFQUFPLG1CQUNQaU4sRUFBZUUsS0FBS3pMLFNBQVcxQixFQUFPLG1CQUkxQ0EsRUFBT29OLFFBQ1BILEVBQWVHLE1BQVFwTixFQUFPb04sUUFHOUJwTixFQUFPLGVBQWlCQSxFQUFPLGdCQUMvQmlOLEVBQWVJLEtBQU8sQ0FBQyxFQUVuQnJOLEVBQU8sZ0JBQ1BpTixFQUFlSSxLQUFLek4sTUFBUUksRUFBTyxlQUduQ0EsRUFBTyxlQUNQaU4sRUFBZUksS0FBSzFOLE1BQVFLLEVBQU8sZUFJcENpTixDQUNYLEVDbkNPLFNBQVNLLEVBQWlCWCxHQUM3QixNQUEwQixpQkFBZkEsR0FBMEMsT0FBZkEsR0FLbEMsZ0JBQWlCQSxHQUNqQixzQkFBdUJBLEdBQ3ZCLGFBQWNBLEdBQ2QsMkJBQTRCQSxHQUM1QixXQUFZQSxHQUNaLFNBQVVBLENBRWxCLEMsc1NDcUJlLE1BQU1ZLEVBTWpCLFdBQUF2VCxDQUNZaUssRUFDQXVKLEVBQ0FDLEVBQ0FDLEdBSEEsS0FBQXpKLDBCQUFBQSxFQUNBLEtBQUF1SixpQ0FBQUEsRUFDQSxLQUFBQyxrQkFBQUEsRUFDQSxLQUFBQyxpQkFBQUEsQ0FDVCxDQUVHLFVBQUFDLENBQ0Z4USxHLDhDQUVBLE1BQU0sU0FBRWlILEVBQVEsZUFBRXdKLEdBQW1CelEsR0FBVyxDQUFDLEVBSWpELEdBRkE3QyxLQUFLc1QsZUFBaUJBLEdBRWpCeEosRUFDRCxNQUFNLElBQUlpSSxFQUNOLHFGQUlSLElBQUt1QixFQUNELE1BQU0sSUFBSXZCLEVBQ04saUdBSUYvUixLQUFLMkosMEJBQTBCNEosa0JBQWtCekosR0FFdkQsTUFBTUUsRUFBUWhLLEtBQUsySiwwQkFBMEJNLFdBQ3ZDeEksRUFDRnVJLEVBQU1JLHdCQUEwRE4sSUFFOUQsVUFBRWpFLEVBQVMsa0JBQUUyTixHQUFzQkYsR0FFbkMsUUFDRnBJLEVBQU8sd0JBQ1B1SSxFQUEwQixHQUFFLHdCQUM1QjFDLEdBQ0F0UCxFQUFjK0Isb0JBQXNCLENBQUMsRUFFekMsUUFBMEJvQixJQUF0QjRPLEVBQWlDLENBQ2pDLElBQUtuTixTQUFTQyxlQUFla04sR0FJekIsWUFGQUUsUUFBUTdJLE1BQU0sOERBS2xCLE1BQU04SSxFQUFzQkYsYUFBdUIsRUFBdkJBLEVBQXlCdkcsS0FDakQsRUFBRzlFLFFBQWdCLGFBQVBBLEdBR2hCLEdBQUkySSxLQUE0QjRDLGFBQW1CLEVBQW5CQSxFQUFxQjlLLFFBQ2pELE9BR0osTUFBTW5HLFFBQXVCMUMsS0FBS21ULGtCQUFrQjFRLGtCQUNoRGhCLEVBQ0F1SSxFQUFNRSxpQkFBaUJuRyxTQUFTb0csTUFHcEMsT0FBS3pILEdBQXNELG1CQUE3QkEsYUFBYyxFQUFkQSxFQUFnQmtSLFVBUXZDNVQsS0FBSzZULGVBQWVuUixFQUFnQjhRLEVBQW1CRyxRQVAxREQsUUFBUTdJLE1BQ0osb0csQ0FhUkssRUFDQWxMLEtBQUtrTCxRQUEwQyxRQUFoQyxFQUFBekosRUFBYytCLDBCQUFrQixlQUFFMEgsU0FLckRsTCxLQUFLOFQsMEJBQTRCak8sYUFBUyxFQUFUQSxFQUFXMEosTUFBTSxLQUFLLFNBRWpEdlAsS0FBS2tULGlDQUFpQ25SLGNBQWMrSCxHQUV0RHdKLEVBQWVTLFFBQTJDLG1CQUExQlQsRUFBZVMsUUFDL0NULEVBQWVTLE9BQU8sSUFBTS9ULEtBQUtnVSxhQUFhbEssRUFBVXdKLFVBSUkxTyxJQUE1RDBPLEVBQWVXLDBDQUNmWCxFQUFlVywyQ0FFZmpVLEtBQUtnVSxhQUFhbEssRUFBVXdKLEcsR0FJOUIsT0FBQVksQ0FBUUMsRUFBMkJ0UixHLGdEQUNyQyxNQUFNLFFBQUV1UixHQUFzQkQsRUFBVkUsRSx5VUFBSyxDQUFLRixFQUF4QixjQUNBLFFBQUVHLEdBQVl0VSxLQUFLc1QsZ0JBQWtCLENBQUMsRUFFNUMsSUFBS2MsRUFDRCxNQUFNLElBQUlwQyxFQUE0QixDQUFDLFlBRzNDLE1BQU0sU0FBRWxJLEVBQVEsWUFBRTBDLEdBQWdCNEgsRUFNbEMsR0FKSXBVLEtBQUt1VSxxQ0FBcUMvSCxLQUFpQnhNLEtBQUtrTCxVQUNoRWxMLEtBQUtrTCxjQUFnQmxMLEtBQUs4SyxnQkFHekI5SyxLQUFLa0wsUUFDTixNQUFNLElBQUlnSCxFQUdkLE1BQU1zQyxFQUFpQnhVLEtBQUt1VSxxQ0FBcUMvSCxHQUMzRHhNLEtBQUt5VSx1Q0FBdUMzSyxFQUFVOUosS0FBS2tMLFFBQVNzQixHQUNwRXhNLEtBQUswVSxzQkFBc0I1SyxFQUFVOUosS0FBS2tMLFFBQVNzQixHQUV6RCxVQUNVeE0sS0FBSzJKLDBCQUEwQmdMLFlBQVlOLEVBQU94UixTQUNsRDdDLEtBQUsySiwwQkFBMEIyQyxjQUFja0ksRSxDQUNyRCxNQUFPM0osR0FDTCxHQzlKRyxTQUErQkEsRyxNQUMxQyxNSmJtQixDQUFDQSxHQUNJLGlCQUFWQSxHQUFnQyxPQUFWQSxHQUFrQixTQUFVQSxFSWE1RCxDQUFlQSxJQUEwRCxzQkFBWCxRQUFyQyxFQUFBQSxFQUFNbEMsS0FBS2lNLGtDQUEwQixlQUFFOVUsS0FFeEUsQ0QwSmdCK1UsQ0FBc0JoSyxHQUFRLENBQzlCLE1BQU1pSyxFQUF5RCxRQUEzQyxFQUFxQyxRQUFyQyxFQUFBakssRUFBTWxDLEtBQUtpTSxrQ0FBMEIsZUFBRUcsWUFBSSxlQUFFQyxhQUVqRSxPQUFPLElBQUlDLFFBQVEsSUFBTTFULE9BQU8yVCxTQUFTbFIsUUFBUThRLEcsQ0FtQnJELE9BaEJJOVUsS0FBS21WLGdCQUFnQnRLLFdBQ2Y3SyxLQUFLa1QsaUNBQWlDblIsY0FBY3FTLEVBQVF0SyxnQkFFNUQsSUFBSW1MLFFBQVEsQ0FBQ0csRUFBVUMsSyxNQUNyQnJWLEtBQUtzVCxpQkFDWSxRQUFqQixFQUFBdFQsS0FBS3NWLG9CQUFZLFNBQUVDLFFBQ25CdlYsS0FBS2dVLGFBQWFJLEVBQVF0SyxTQUFVOUosS0FBS3NULGdCQUN6Q3RULEtBQUt3VixZQUFZLElBQUkvVixNQUFNLHVCQUF3QjZVLElBR3ZEZSxPQUlSclYsS0FBS3dWLFlBQVkzSyxFQUFPeUosR0FFakJXLFFBQVFJLFEsSUFJdkIsUUFBQUksR0FDSSxPQUFPUixRQUFRSSxPQUFPLElBQUlsRCxFQUM5QixDQUVBLFlBQUF1RCxHLE1BS0ksT0FKQTFWLEtBQUtrTCxhQUFVdEcsRUFFRSxRQUFqQixFQUFBNUUsS0FBS3NWLG9CQUFZLFNBQUVDLFFBRVpOLFFBQVFVLFNBQ25CLENBRVEsc0NBQUFsQixDQUNKM0ssRUFDQThMLEVBQ0FwSixHQUVBLE1BQU0sYUFBRWtHLEVBQVksNkJBQUVILEdBQWlDL0YsRUFFakRxSixHQUEyQjdWLEtBQUs4VixzQkFBc0J0SixHQUU1RCxPQUFJcUosRUFDTyxDQUNIL0wsV0FDQTBDLFlBQWEsQ0FDVDhGLHFCQUFzQnVELEVBQ3RCdEQsK0JBQ0E5RixpQkFBa0IsQ0FDZEssZUFBZ0IsQ0FDWlosU0FBVTBKLE1BT3ZCLENBQ0g5TCxXQUNBMEMsWUFBYSxDQUNUa0csZUFDQUgsK0JBQ0E5RixpQkFBa0IsQ0FDZEssZUFBZ0IsQ0FDWlosU0FBVTBKLEdBRWRHLGFBQWMsQ0FDVkMsTUFBT3RELEtBSzNCLENBRVEscUJBQUFnQyxDQUNKNUssRUFDQThMLEVBQ0FwSixHQUVBLE1BQU0scUJBQUU4RixHQUF1QixFQUFLLDZCQUFFQyxHQUErQixHQUNqRUgsRUFBdUI1RixHQUFlQSxFQUFjLENBQUMsRUFFekQsTUFBTyxDQUNIMUMsV0FDQTBDLFlBQWEsQ0FDVDhGLHVCQUNBQywrQkFDQTlGLGlCQUFrQixDQUNkSyxlQUFnQixDQUNaWixTQUFVMEosS0FLOUIsQ0FPUSxZQUFBNUIsQ0FDSmxLLEVBQ0F3SixHLFlBRUEsTUFBTWpKLEVBQVlySyxLQUFLa1QsaUNBQWlDM0ksc0JBR2xEOUksRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBRW5DRyx3QkFBMEROLElBQzlELG9CQUFFbU0sR0FBd0J4VSxFQUFjK0Isb0JBQXNCLENBQUMsR0FDL0QsNEJBQUUwUyxHQUFnQ0QsR0FBdUIsQ0FBQyxHQUMxRCxVQUFFcFEsRUFBUyxRQUFFeU8sRUFBTyxlQUFFNkIsRUFBYyxXQUFFQyxFQUFVLFdBQUVDLEdBQWUvQyxFQUV2RSxJQUFLek4sRUFDRCxNQUFNLElBQUlrTSxFQUNOLDhFQUlSLE1BQU11RSxFQUFhLCtCQUNYdFcsS0FBS3VXLGlDQUFpQ3pNLElBQWEsQ0FDbkQwTSx3QkFBd0IsSUFDMUIsQ0FDRkMsY0FBZXBNLEVBQVVxTSxRQUFRQyxPQUNqQ3BRLE1BQU92RyxLQUFLa1QsaUNBQWlDMUQsb0JBQ3pDMEcsR0FFSnBMLFlBQWEsSUFBTTlLLEtBQUs4SyxjQUN4QjhMLFFBQVMsQ0FBQ0MsRUFBR0MsSUFBWTlXLEtBQUsrVyxZQUFZRCxFQUFTVixHQUNuRFksVUFBWWpDLEdBQVMvVSxLQUFLaVgsY0FBY2xDLEVBQU1zQixHQUM5Qy9CLFFBQVV6SixHQUFVN0ssS0FBS3dWLFlBQVkzSyxFQUFPeUosR0FDNUM0QyxTQUFVLElBQU1sWCxLQUFLbVgsd0JBQXVCLEtBR2hEblgsS0FBS3NWLGFBQWVqTCxFQUFVK00sUUFBUWQsR0FFakN0VyxLQUFLc1YsYUFBYStCLGVBSW5CbEIsR0FBNEMsbUJBQW5CQSxHQUN6QkEsS0FHNkIsUUFBN0IsS0FBQW5XLEtBQUtzVixjQUFhZ0MsbUJBQVcseUJBQVF0WCxLQUFLdVcsaUNBQWlDek0sR0FDbkQsUUFBeEIsS0FBQTlKLEtBQUtzVixjQUFhaUMsY0FBTSxpQkFFeEJ2WCxLQUFLc1YsYUFBYWtDLE9BQU8zUixHQUVqQyxDQUVjLFdBQUFrUixDQUNWRCxFQUNBVixHLHdDQUVBLE1BQU0sUUFBRVQsRUFBTyxPQUFFTixHQUFXeUIsRUFRNUIsT0FBT1YsYUFBVSxFQUFWQSxFQU5vQixLQUN2QnBXLEtBQUttWCx3QkFBdUIsR0FFckJ4QixLQUc2Qk4sRUFDNUMsRSxDQUVRLGFBQUE0QixFQUNKLFFBQUVRLEdBQ0ZwQixHQUVBclcsS0FBS2tMLFFBQVV1TSxFQUVmcEIsU0FBQUEsR0FDSixDQUVRLFdBQUFiLENBQ0ozSyxFQUNBeUosR0FFQXRVLEtBQUttWCx3QkFBdUIsR0FFeEI3QyxHQUE4QixtQkFBWkEsR0FDbEJBLEVBQVF6SixFQUVoQixDQUVjLFdBQUFDLEcsd0NBQ1YsTUFBTTRNLEVBQWUxWCxLQUFLMlgsa0JBRTFCLE9BQU8zWCxLQUFLa1QsaUNBQWlDcEksWUFBWSx5QkFBMEIsQ0FDL0V3SCxzQkFBc0JvRixhQUFZLEVBQVpBLEVBQWNwRix3QkFBd0IsR0FFcEUsRSxDQU9RLGVBQUFxRixHQUNKLE1BQU0sZ0JBQUVBLEdBQW9CM1gsS0FBS3NULGdCQUFrQixDQUFDLEVBRXBELE1BQWtDLG1CQUFwQnFFLEVBQWlDQSxTQUFvQi9TLENBQ3ZFLENBRVEscUJBQUFrUixDQUFzQnRKLEdBQzFCLEdBQUlBLEdBQWVnRyxFQUFvQmhHLEdBQWMsQ0FDakQsTUFFTW9MLEVBRlE1WCxLQUFLMkosMEJBQTBCTSxXQUVuQjROLGlCQUNwQkMsRUFBaUJGLGFBQVcsRUFBWEEsRUFBYTFLLEtBQy9CbUYsR0FDR1csRUFBaUJYLElBQ2pCQSxFQUFXMEYsY0FBZ0J2TCxFQUFZa0csY0FNL0MsUUFKK0JNLEVBQWlCOEUsS0FDMUNBLEVBQWVFLHVCLENBTXpCLE9BQU8sQ0FDWCxDQU9RLHNCQUFBYixDQUF1QmMsR0FDdkJBLEdBQWFqWSxLQUFLOFQsMEJBQ2xCOVQsS0FBS29ULGlCQUFpQmxOLEtBQUtsRyxLQUFLOFQsMkJBRWhDOVQsS0FBS29ULGlCQUFpQjFNLE1BRTlCLENBT1Esb0NBQUE2TixDQUNKL0gsR0FFQSxRQUNNQSxHQUFlZ0csRUFBb0JoRyxJQUFnQjRGLEVBQXVCNUYsRUFFcEYsQ0FPUSxjQUFBcUgsQ0FDSm5SLEVBQ0E4USxFQUNBRyxHQUVBLE1BRU11RSxFQUEwQyxDQUM1Q0MsT0FIYW5ZLEtBQUsySiwwQkFBMEJNLFdBQVdtTyxxQkFHdENDLG1CQUNqQkMsVUFBVyxVQUNYL1IsTUFBTyxFQUFzQ29OLElBR2pEalIsRUFBZWtSLFNBQVNzRSxHQUF1QlYsT0FBTyxJQUFJaEUsSUFDOUQsQ0FPUSxlQUFBMkIsQ0FBZ0J0SyxHLFVBQ3BCLFFFdGJPLFNBQXVDQSxHQUNsRCxNQUF3QixpQkFBVkEsR0FBZ0MsT0FBVkEsR0FBa0IsV0FBWUEsQ0FDdEUsQ0ZvYlkwTixDQUE4QjFOLElBRzBCLHlCQUFYLFFBQXRDLEVBQXNCLFFBQXRCLElBRmtDLFFBQWIsRUFBQUEsYUFBSyxFQUFMQSxFQUFPN0IsY0FBTSxlQUFFeEUsT0FBUWdVLEdBQU1BLEVBQUVDLGtCQUFtQixJQUVuRCxVQUFFLGVBQUVBLHNCQUFjLGVBQUV0TyxLQUl2RCxDQU9RLGdDQUFBb00sQ0FBaUN6TSxHLE1BS3JDLE9BQXVDLFFBQWhDLEVBSk85SixLQUFLMkosMEJBQTBCTSxXQUVuQ0csd0JBQTBETixHQUUvQ3RHLDBCQUFrQixlQUFFa1Ysc0JBQXNCLENBQ25FLEVHL2NKLE1BWUEsRUFBZXBhLEVBWFhxTCxHQUVBLElBQUlzSixFQUNBdEosRUFDQSxFQUF1Q0EsR0FDdkMsSUFBSXRJLEVBQWtCd1EsMkVBQUFBLElBQ3RCLElBQUlwTSxFQUFpQixDQUNqQkUsZ0JBQWlCbU0sS0FJMEMsQ0FBQyxDQUFFMUosR0FBSSxvQkNwQi9ELE1BQU11USxXQUE0Qm5aLEVBQzdDLFdBQUFFLENBQVlDLEdBQ1JDLE1BQU1ELEdBQVcsb0JBRWpCSyxLQUFLSCxLQUFPLHNCQUNaRyxLQUFLRixLQUFPLGlCQUNoQixFLHVTQ3NCVyxNQUFNOFksR0FLakIsV0FBQWxaLENBQ1lpSyxFQUNBdUosRUFDQUUsRUFDQUQsR0FIQSxLQUFBeEosMEJBQUFBLEVBQ0EsS0FBQXVKLGlDQUFBQSxFQUNBLEtBQUFFLGlCQUFBQSxFQUNBLEtBQUFELGtCQUFBQSxDQUNULENBRUcsVUFBQUUsQ0FDRnhRLEcseUNBRUEsTUFBTSxTQUFFaUgsRUFBUSxlQUFFd0osRUFBYyxxQkFBRXVGLEdBQXlCaFcsR0FBVyxDQUFDLEVBRWpFaVcsRUFBZ0JELEdBQXdCdkYsRUFFOUMsSUFBS3hKLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLK0csRUFDRCxNQUFNLElBQUkvRyxFQUNOLGlHQUlGL1IsS0FBSzJKLDBCQUEwQjRKLGtCQUFrQnpKLEdBRXZELE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3hJLEVBQ0Z1SSxFQUFNSSx3QkFBMEROLElBRTlELHdCQUFFMkosRUFBMEIsR0FBRSxRQUFFdkksR0FBWXpKLEVBQWMrQixvQkFBc0IsQ0FBQyxHQUNqRixrQkFBRWdRLEVBQWlCLFVBQUUzTixHQUFjaVQsRUFFekMsUUFBMEJsVSxJQUF0QjRPLEVBQWlDLENBQ2pDLElBQUtuTixTQUFTQyxlQUFla04sR0FJekIsWUFGQUUsUUFBUTdJLE1BQU0sOERBS2xCLE1BQU04SSxFQUNGRixHQUNBQSxFQUF3QnZHLEtBQUssRUFBRzlFLFFBQWdCLGFBQVBBLEdBRTdDLEtBQUt1TCxhQUFtQixFQUFuQkEsRUFBcUI5SyxRQUN0QixPQUdKLE1BQU1uRyxRQUF1QjFDLEtBQUttVCxrQkFBa0IxUSxrQkFDaERoQixFQUNBdUksRUFBTUUsaUJBQWlCbkcsU0FBU29HLE1BR3BDLE9BQU9uSyxLQUFLNlQsZUFBZW5SLEVBQWdCOFEsRUFBbUJHLEUsQ0FPOUR6SSxFQUNBbEwsS0FBS2tMLFFBQVVBLFNBS2JsTCxLQUFLa1QsaUNBQWlDblIsY0FBYytILEdBRTFEOUosS0FBSzhULDBCQUE0QmpPLGFBQVMsRUFBVEEsRUFBVzBKLE1BQU0sS0FBSyxHQUV2RHZQLEtBQUtnVSxhQUFhbEssRUFBVWdQLEdBQ2hDLEUsQ0FFTSxPQUFBNUUsQ0FBUUMsRUFBMkJ0UixHLHlDQUNyQyxNQUFNLFFBQUV1UixHQUFzQkQsRUFBVkUsRSx5VUFBSyxDQUFLRixFQUF4QixhQUVOLElBQUtDLEVBQ0QsTUFBTSxJQUFJcEMsRUFBNEIsQ0FBQyxZQUczQyxJQUFLaFMsS0FBS2tMLFFBQ04sTUFBTSxJQUFJZ0gsUUFHUmxTLEtBQUsySiwwQkFBMEJnTCxZQUFZTixFQUFPeFIsU0FDbEQ3QyxLQUFLa1QsaUNBQWlDNUcsY0FBYzhILEVBQVF0SyxTQUFVOUosS0FBS2tMLFFBQ3JGLEUsQ0FFQSxRQUFBdUssR0FDSSxPQUFPUixRQUFRSSxPQUFPLElBQUlsRCxFQUM5QixDQUVBLFlBQUF1RCxHLE1BS0ksT0FKQTFWLEtBQUtrTCxhQUFVdEcsRUFFRSxRQUFqQixFQUFBNUUsS0FBS3NWLG9CQUFZLFNBQUVDLFFBRVpOLFFBQVFVLFNBQ25CLENBT1EsWUFBQTNCLENBQ0psSyxFQUNBZ1AsR0FFQSxLQUFLQSxhQUFhLEVBQWJBLEVBQWVqVCxXQUNoQixNQUFNLElBQUlrTSxFQUNOLDhFQUlSLE1BQU0xSCxFQUFZckssS0FBS2tULGlDQUFpQzNJLHNCQUdsRDlJLEVBRFF6QixLQUFLMkosMEJBQTBCTSxXQUVuQ0csd0JBQTBETixJQUM5RCxvQkFBRW1NLEdBQXdCeFUsRUFBYytCLG9CQUFzQixDQUFDLEdBQy9ELDRCQUFFMFMsR0FBZ0NELEdBQXVCLENBQUMsR0FFMUQsVUFBRXBRLEVBQVMsUUFBRXlPLEVBQU8sZUFBRTZCLEVBQWMsV0FBRUMsRUFBVSxXQUFFQyxHQUFleUMsRUFFakVDLEVBQWlCLENBQUMxTyxFQUFVcU0sUUFBUXNDLFNBQVUzTyxFQUFVcU0sUUFBUXVDLFFBQ3RFLElBQUlDLEdBQXlCLEVBRTdCSCxFQUFlaFUsUUFBUzBSLElBQ3BCLEdBQUl5QyxFQUNBLE9BR0osTUFBTTVDLEVBQThDLENBQ2hERyxnQkFDQWxRLE1BQU92RyxLQUFLa1QsaUNBQWlDMUQsb0JBQ3pDMEcsR0FFSnBMLFlBQWEsSUFDVDlLLEtBQUtrVCxpQ0FBaUNwSSxZQUNsQyxnQ0FFUjhMLFFBQVMsQ0FBQ0MsRUFBR0MsSUFBWTlXLEtBQUsrVyxZQUFZRCxFQUFTVixHQUNuRFksVUFBWWpDLEdBQVMvVSxLQUFLaVgsY0FBY2xDLEVBQU1zQixHQUM5Q2EsU0FBVSxJQUFNbFgsS0FBS21YLHdCQUF1QixHQUM1QzdDLFFBQVV6SixHQUFVN0ssS0FBS3dWLFlBQVkzSyxFQUFPeUosSUFLaEQsR0FGQXRVLEtBQUtzVixhQUFlakwsRUFBVStNLFFBQVFkLEdBRWpDdFcsS0FBS3NWLGFBQWErQixjQUFnQlosSUFBa0JwTSxFQUFVcU0sUUFBUXNDLFNBQTNFLENBSUEsSUFBS2haLEtBQUtzVixhQUFhK0IsY0FBZ0JaLElBQWtCcE0sRUFBVXFNLFFBQVF1QyxPQUN2RSxNQUFNLElBQUlOLEdBQ04sVUFBVWxDLDJFQUlkTixHQUE0QyxtQkFBbkJBLEdBQ3pCQSxJQUdKblcsS0FBS3NWLGFBQWFrQyxPQUFPM1IsR0FDekJxVCxHQUF5QixDLEdBRWpDLENBRWMsV0FBQW5DLENBQ1ZELEVBQ0FWLEcseUNBRUEsTUFBTSxRQUFFVCxFQUFPLE9BQUVOLEdBQVd5QixFQVE1QixHQUFJVixHQUFvQyxtQkFBZkEsRUFDckIsT0FBT0EsRUFQZ0IsS0FDdkJwVyxLQUFLbVgsd0JBQXVCLEdBRXJCeEIsS0FJK0JOLEVBRTlDLEUsQ0FFUSxhQUFBNEIsRUFDSixRQUFFUSxHQUNGcEIsR0FFQXJXLEtBQUtrTCxRQUFVdU0sRUFFWHBCLEdBQW9DLG1CQUFmQSxHQUNyQkEsR0FFUixDQUVRLFdBQUFiLENBQ0ozSyxFQUNBeUosR0FFQXRVLEtBQUttWCx3QkFBdUIsR0FFeEI3QyxHQUE4QixtQkFBWkEsR0FDbEJBLEVBQVF6SixFQUVoQixDQU9RLHNCQUFBc00sQ0FBdUJjLEdBQ3ZCQSxHQUFhalksS0FBSzhULDBCQUNsQjlULEtBQUtvVCxpQkFBaUJsTixLQUFLbEcsS0FBSzhULDJCQUVoQzlULEtBQUtvVCxpQkFBaUIxTSxNQUU5QixDQU9RLGNBQUFtTixDQUNKblIsRUFDQThRLEVBQ0FHLEdBRUEsTUFFTXVFLEVBQTBDLENBQzVDQyxPQUhhblksS0FBSzJKLDBCQUEwQk0sV0FBV21PLHFCQUd0Q0MsbUJBQ2pCQyxVQUFXLFVBQ1gvUixNQUFPLEVBQXNDb04sSUFHakRqUixFQUFla1IsU0FBU3NFLEdBQXVCVixPQUFPLElBQUloRSxJQUM5RCxFQzlRSixNQVlBLEdBQWVsVixFQVZWcUwsR0FDRCxJQUFJaVAsR0FDQWpQLEVBQ0EsRUFBdUNBLEdBQ3ZDLElBQUlsRSxFQUFpQixDQUNqQkUsZ0JBQWlCbU0sSUNkbEIsSUFBSXpRLEVBQWtCOFgsOEVBQUFBLEtEbUI0QyxDQUN6RSxDQUFFL1EsR0FBSSwwQix1U0VFSyxNQUFNZ1IsR0FLakIsV0FBQTFaLENBQ1lpSyxFQUNBdUosRUFDQUUsR0FGQSxLQUFBekosMEJBQUFBLEVBQ0EsS0FBQXVKLGlDQUFBQSxFQUNBLEtBQUFFLGlCQUFBQSxDQUNULENBRUcsVUFBQUMsQ0FDRnhRLEcsaURBRUEsTUFBTSxTQUFFaUgsRUFBUSxlQUFFd0osRUFBYyxvQkFBRStGLEdBQXdCeFcsR0FBVyxDQUFDLEVBRWhFaVcsRUFBZ0JPLEdBQXVCL0YsRUFFN0MsSUFBS3hKLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLK0csRUFDRCxNQUFNLElBQUkvRyxFQUNOLHNHQUlGL1IsS0FBSzJKLDBCQUEwQjRKLGtCQUFrQnpKLEdBRXZELE1BQ01ySSxFQURRekIsS0FBSzJKLDBCQUEwQk0sV0FFbkNHLHdCQUEwRE4sSUFNaEMsUUFBaEMsRUFBQXJJLEVBQWMrQiwwQkFBa0IsZUFBRTBILFNBQ2xDbEwsS0FBS2tMLFFBQTBDLFFBQWhDLEVBQUF6SixFQUFjK0IsMEJBQWtCLGVBQUUwSCxlQUsvQ2xMLEtBQUtrVCxpQ0FBaUNuUixjQUFjK0gsR0FFMUQ5SixLQUFLOFQsMEJBQTRCZ0YsRUFBY2pULFVBQVUwSixNQUFNLEtBQUssR0FFcEV2UCxLQUFLZ1UsYUFBYWxLLEVBQVVnUCxHLEdBRzFCLE9BQUE1RSxDQUFRQyxFQUEyQnRSLEcseUNBQ3JDLE1BQU0sUUFBRXVSLEdBQXNCRCxFQUFWRSxFLHlVQUFLLENBQUtGLEVBQXhCLGFBRU4sSUFBS0MsRUFDRCxNQUFNLElBQUlwQyxFQUE0QixDQUFDLFlBRzNDLElBQUtoUyxLQUFLa0wsUUFDTixNQUFNLElBQUlnSCxRQUdSbFMsS0FBSzJKLDBCQUEwQmdMLFlBQVlOLEVBQU94UixTQUNsRDdDLEtBQUtrVCxpQ0FBaUM1RyxjQUFjOEgsRUFBUXRLLFNBQVU5SixLQUFLa0wsUUFDckYsRSxDQUVBLFFBQUF1SyxHQUNJLE9BQU9SLFFBQVFJLE9BQU8sSUFBSWxELEVBQzlCLENBRUEsWUFBQXVELEcsTUFLSSxPQUpBMVYsS0FBS2tMLGFBQVV0RyxFQUVFLFFBQWpCLEVBQUE1RSxLQUFLc1Ysb0JBQVksU0FBRUMsUUFFWk4sUUFBUVUsU0FDbkIsQ0FPUSxZQUFBM0IsQ0FDSmxLLEVBQ0F1UCxHQUVBLE1BQU1oUCxFQUFZckssS0FBS2tULGlDQUFpQzNJLHNCQUdsRDlJLEVBRFF6QixLQUFLMkosMEJBQTBCTSxXQUVuQ0csd0JBQTBETixJQUM5RCxvQkFBRW1NLEdBQXdCeFUsRUFBYytCLG9CQUFzQixDQUFDLEdBQy9ELDRCQUFFMFMsR0FBZ0NELEdBQXVCLENBQUMsR0FFMUQsVUFBRXBRLEVBQVMsUUFBRXlPLEVBQU8sZUFBRTZCLEVBQWMsV0FBRUMsRUFBVSxXQUFFQyxHQUFlZ0QsRUFFakUvQyxFQUE4QyxDQUNoREcsY0FBZXBNLEVBQVVxTSxRQUFRNEMsTUFDakMvUyxNQUFPdkcsS0FBS2tULGlDQUFpQzFELG9CQUN6QzBHLEdBRUpwTCxZQUFhLElBQ1Q5SyxLQUFLa1QsaUNBQWlDcEksWUFBWSwrQkFDdEQ4TCxRQUFTLENBQUNDLEVBQUdDLElBQVk5VyxLQUFLK1csWUFBWUQsRUFBU1YsR0FDbkRZLFVBQVlqQyxHQUFTL1UsS0FBS2lYLGNBQWNsQyxFQUFNc0IsR0FDOUNhLFNBQVUsSUFBTWxYLEtBQUttWCx3QkFBdUIsR0FDNUM3QyxRQUFVekosR0FBVTdLLEtBQUt3VixZQUFZM0ssRUFBT3lKLElBS2hELEdBRkF0VSxLQUFLc1YsYUFBZWpMLEVBQVUrTSxRQUFRZCxJQUVqQ3RXLEtBQUtzVixhQUFhK0IsYUFDbkIsTUFBTSxJQUFJc0IsR0FDTixzRkFJSnhDLEdBQTRDLG1CQUFuQkEsR0FDekJBLElBR0puVyxLQUFLc1YsYUFBYWtDLE9BQU8zUixFQUM3QixDQUVjLFdBQUFrUixDQUNWRCxFQUNBVixHLHlDQUVBLE1BQU0sUUFBRVQsRUFBTyxPQUFFTixHQUFXeUIsRUFRNUIsT0FBT1YsRUFOb0IsS0FDdkJwVyxLQUFLbVgsd0JBQXVCLEdBRXJCeEIsS0FHMkJOLEVBQzFDLEUsQ0FFUSxhQUFBNEIsRUFDSixRQUFFUSxHQUNGcEIsR0FFQXJXLEtBQUtrTCxRQUFVdU0sRUFFZnBCLElBQ0FyVyxLQUFLbVgsd0JBQXVCLEVBQ2hDLENBRVEsV0FBQTNCLENBQ0ozSyxFQUNBeUosR0FFQXRVLEtBQUttWCx3QkFBdUIsR0FFeEI3QyxHQUE4QixtQkFBWkEsR0FDbEJBLEVBQVF6SixFQUVoQixDQU9RLHNCQUFBc00sQ0FBdUJjLEdBQ3ZCQSxHQUFhalksS0FBSzhULDBCQUNsQjlULEtBQUtvVCxpQkFBaUJsTixLQUFLbEcsS0FBSzhULDJCQUVoQzlULEtBQUtvVCxpQkFBaUIxTSxNQUU5QixFQy9MSixNQVNBLEdBQWVwSSxFQVBWcUwsR0FDRCxJQUFJeVAsR0FDQXpQLEVBQ0EsRUFBdUNBLEdBQ3ZDLElBQUlsRSxFQUFpQixDQUFFQyxPQUFRLENBQUVILGdCQUFpQixZQUdrQixDQUN4RSxDQUFFNkMsR0FBSSx5QixJQzZGRW1SLEdBZ0pBQyxHQUlBQyxHQU1BLEdBNk9BLEdBUUEsR0FRQSxHQStOQUMsR0F1TkEsR0EyQkEsRyxtU0NwOEJHLE1BQU1DLEdBR2pCLFdBQUFqYSxDQUFvQjRCLEdBQUEsS0FBQUEsYUFBQUEsRUFDaEJ0QixLQUFLdUIsT0FBU0EsTUFDbEIsQ0FFTSxZQUFBK0ksQ0FDRjdJLEVBQ0FDLEVBQ0FPLEVBQ0FDLEcseUNBRUEsSUFBS2xDLEtBQUt1QixPQUFPc1AsUUFBVTNPLEVBQVcsQ0FDbEMsTUFBTUUsRUFBd0JwQyxLQUFLMlEsZ0NBQy9CbFAsRUFDQUMsRUFDQU8sR0FLSixTQUZNakMsS0FBSytCLGNBQWNLLElBRXBCcEMsS0FBS3VCLE9BQU9zUCxPQUNiLE1BQU0sSUFBSXpRLEMsQ0FJbEIsT0FBT0osS0FBS3VCLE9BQU9zUCxNQUN2QixFLENBRU0sb0JBQUFyUCxDQUNGQyxFQUNBQyxFQUNBQyxHLHlDQUVBLElBQUszQixLQUFLdUIsT0FBT0ssa0JBQW1CLENBQ2hDLE1BQU1DLEVBQVM3QixLQUFLOEIsa0NBQ2hCTCxFQUNBQyxFQUNBQyxHQUtKLFNBRk0zQixLQUFLK0IsY0FBY0YsSUFFcEI3QixLQUFLdUIsT0FBT0ssa0JBQ2IsTUFBTSxJQUFJeEIsQyxDQUlsQixPQUFPSixLQUFLdUIsT0FBT0ssaUJBQ3ZCLEUsQ0FFTSxxQkFBQUksQ0FDRlAsRUFDQUMsRUFDQU8sRUFDQUMsRyx5Q0FFQSxJQUFLbEMsS0FBS3VCLE9BQU9ZLGlCQUFtQkQsRUFBVyxDQUMzQyxNQUFNRSxFQUF3QnBDLEtBQUtxQyx5Q0FDL0JaLEVBQ0FDLEVBQ0FPLFNBR0VqQyxLQUFLK0IsY0FBY0ssRSxDQUc3QixJQUFLcEMsS0FBS3VCLE9BQU9ZLGdCQUNiLE1BQU0sSUFBSS9CLEVBR2QsT0FBT0osS0FBS3VCLE9BQU9ZLGVBQ3ZCLEUsQ0FFTSxnQkFBQUcsQ0FDRmIsRUFDQUMsRyx5Q0FFQSxJQUFLMUIsS0FBS3VCLE9BQU9nQixXQUFZLENBQ3pCLE1BQU1WLEVBQVM3QixLQUFLd0MsNkJBQTZCZixFQUFlQyxHQUloRSxTQUZNMUIsS0FBSytCLGNBQWNGLElBRXBCN0IsS0FBS3VCLE9BQU9nQixXQUNiLE1BQU0sSUFBSW5DLEMsQ0FJbEIsT0FBT0osS0FBS3VCLE9BQU9nQixVQUN2QixFLENBRU0saUJBQUFFLENBQ0ZoQixFQUNBQyxHLHlDQUVBLElBQUsxQixLQUFLdUIsT0FBT21CLGVBQWdCLENBQzdCLE1BQU1DLEVBQTBCM0MsS0FBSzRDLGtDQUNqQ25CLEVBQ0FDLFNBR0UxQixLQUFLK0IsY0FBY1ksRSxDQUc3QixJQUFLM0MsS0FBS3VCLE9BQU9tQixlQUNiLE1BQU0sSUFBSXRDLEVBR2QsT0FBT0osS0FBS3VCLE9BQU9tQixjQUN2QixFLENBUWMsYUFBQVgsRUFBYyxRQUFFYyxFQUFPLFdBQUVDLEkseUNBQ25DLE1BQU1DLEVBQWdCL0MsS0FBS2dELGdCQUE0Q0gsR0FDakVJLEVBQW1CakQsS0FBS2dELGdCQUErQ0YsR0FJdkVJLEVBQVksaUNBREUsSUFBSUMsZ0JBQWdCSixHQUFlSyxtQkFHakRwRCxLQUFLc0IsYUFBYStCLFdBQVdILEVBQVcsQ0FDMUNJLE9BQU8sRUFDUFIsV0FBWUcsR0FFcEIsRSxDQU9RLCtCQUFBME4sQ0FDSmxQLEVBQ0FDLEVBQ0FPLEdBQTRCLEdBRTVCLE1BQU0sR0FBRW1HLEVBQUUsWUFBRTdFLEVBQVcsbUJBQUVDLEdBQXVCL0IsRUFFaEQsSUFBSytCLElBQXVCQSxFQUFtQkMsU0FDM0MsTUFBTSxJQUFJcEQsRUFBaUJqQyxFQUFxQjhDLHNCQUdwRCxNQUFNLE9BQ0Z3QyxFQUFNLFNBQ05ELEVBQVEsV0FDUkUsRUFBVSxhQUNWTSxFQUFZLGNBQ1pMLEVBQWEsZUFDYmtOLEVBQWMsd0JBQ2Q1TSxFQUF1Qix3QkFDdkI2TSxFQUF1QiwwQkFDdkI1TSxFQUF5QixtQ0FDekJDLEVBQXFDLEdBQUUsaUNBQ3ZDQyxFQUFtQyxHQUFFLG1CQUNyQzJNLEdBQ0F4TixFQUVFSyxFQUFTSyxHQUEyQmpDLEVBRXBDZ1AsRUFDSyw4QkFBUDdJLEdBQTZDLHFDQUFQQSxFQUNwQzhJLEVBQW9CRCxFQUFtQixDQUFDLFFBQVUsR0FHbERFLEVBQXNCSixFQUEwQixDQUFDLFNBQVUsWUFBYyxHQUd6RUssRUFBcUJOLEVBQWlCLENBQUMsU0FBVyxHQUtsRE8sRUFBMENMLEVBQXFCLENBQUMsYUFBZSxHQUMvRU0sRUFBMkNyUCxFQUMzQyxDQUFDLGVBQ0QsR0FDQXNQLEVBQThCLElBZFJOLEVBQThCLEdBQVgsQ0FBQyxXQUdsQkYsRUFBbUQsR0FBekIsQ0FBQyxTQUFVLGVBR3RDRCxFQUE2QixHQUFaLENBQUMsWUFDcEIxTSxFQUFtQ0ksT0FDekRDLElBQWlCSixFQUFpQ0ssU0FBU0QsS0FZMUQrTSxFQUE2QixJQUM1Qk4sS0FDQUMsS0FDQUMsS0FDQS9NLEdBR1AsTUFBTyxDQUNIeEIsUUFBUyxPQUFGLFFBQ0gsWUFBYVksRUFDYixjQUFlRSxFQUNmLGlCQUFrQjZOLEVBQWM3TSxPQUFTLEVBQUk2TSxPQUFnQjVNLEVBQzdELGtCQUFtQjJNLEVBQWU1TSxPQUFTLEVBQUk0TSxPQUFpQjNNLEVBQ2hFZixTQUNBQyxXQUFZLENBQ1IsVUFDQSxnQkFDQSxpQkFDQSxXQUNHdU4sS0FDQUMsR0FFUHZOLFNBQVVyQyxFQUNWZ0MsVUFDSVMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLDhCQUErQmMsRUFDL0Isb0JBQXFCTCxHQUdqQyxDQUVRLGlDQUFBekIsQ0FDSkwsRUFDQUMsRUFDQUMsR0FFQSxNQUFNLFlBQUU0QixFQUFXLG1CQUFFQyxHQUF1Qi9CLEVBRTVDLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUFFd0MsRUFBTSxTQUFFRCxFQUFRLFdBQUVFLEVBQVUsY0FBRUMsR0FBa0JKLEVBRXhELE1BQU8sQ0FDSFgsUUFBUyxDQUNMLFlBQWFZLEVBQ2IsY0FBZUUsRUFDZkUsUUFBUSxFQUNSQyxXQUFZLENBQ1IsV0FDQSxVQUNBLGlCQUNBLGdCQUNBLHVCQUVKQyxTQUFVckMsRUFDVmdDLFVBRUpaLFdBQVksQ0FDUiwwQkFBMkJuQixFQUFVcUMsUUFBUSxLQUFNLElBQ25ELGlCQUFrQixvQkFDbEIsOEJBQStCSixFQUMvQix3QkFBeUJMLEdBR3JDLENBRVEsd0NBQUFsQixDQUNKWixFQUNBQyxFQUNBTyxHQUE0QixHQUU1QixNQUFNLFlBQUVzQixFQUFXLG1CQUFFQyxHQUF1Qi9CLEVBRTVDLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUNGd0MsRUFBTSxTQUNORCxFQUFRLFdBQ1JFLEVBQVUsYUFDVk0sRUFBWSxjQUNaTCxFQUFhLHdCQUNiTSxFQUF1QiwwQkFDdkJDLEdBQ0FYLEVBRUVLLEVBQVNLLEdBQTJCakMsRUFFMUMsTUFBTyxDQUNIWSxRQUFTLE9BQUYsUUFDSCxZQUFhWSxFQUNiLGNBQWVFLEVBQ2ZFLFNBQ0FDLFdBQVksQ0FBQyxhQUNiQyxTQUFVckMsRUFDVmdDLFVBQ0lTLEdBQTZCLENBQUUsZ0JBQWlCRixJQUV4RG5CLFdBQVksQ0FDUiw4QkFBK0JjLEVBQy9CLG9CQUFxQkwsRUFDckIsaUJBQWtCLG1CQUc5QixDQUVRLDRCQUFBZixDQUNKZixFQUNBQyxHQUVBLE1BQU0sbUJBQUU4QixHQUF1Qi9CLEVBRS9CLElBQUsrQixJQUF1QkEsRUFBbUJDLFNBQzNDLE1BQU0sSUFBSXBELEVBQWlCakMsRUFBcUI4QyxzQkFHcEQsTUFBTSxPQUNGd0MsRUFBTSxTQUNORCxFQUFRLFdBQ1JFLEVBQVUsYUFDVk0sRUFBWSxjQUNaTCxFQUFhLDBCQUNiTyxFQUF5QixtQ0FDekJDLEVBQXFDLEdBQUUsaUNBQ3ZDQyxFQUFtQyxJQUNuQ2IsRUFFRWMsRUFBb0JELEVBQ3BCRSxFQUFxQkgsRUFBbUNJLE9BQ3pEQyxJQUFpQkosRUFBaUNLLFNBQVNELElBR2hFLE1BQU8sQ0FDSDVCLFFBQVMsT0FBRixRQUNILFlBQWFZLEVBQ2IsY0FBZUUsRUFDZixpQkFBa0JXLEVBQWtCSyxPQUFTLEVBQUlMLE9BQW9CTSxFQUNyRSxrQkFBbUJMLEVBQW1CSSxPQUFTLEVBQUlKLE9BQXFCSyxFQUN4RWYsUUFBUSxFQUNSQyxXQUFZLENBQUMsVUFBVyxrQkFDeEJDLFNBQVVyQyxFQUNWZ0MsVUFDSVMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLDhCQUErQmMsRUFDL0IsaUJBQWtCLGNBRzlCLENBRVEsaUNBQUFoQixDQUNKbkIsRUFDQUMsR0FFQSxNQUFNLG1CQUFFOEIsR0FBdUIvQixFQUUvQixJQUFLK0IsSUFBdUJBLEVBQW1CQyxTQUMzQyxNQUFNLElBQUlwRCxFQUFpQmpDLEVBQXFCOEMsc0JBR3BELE1BQU0sU0FBRXVDLEVBQVEsV0FBRUUsRUFBVSxjQUFFQyxFQUFhLDBCQUFFTyxFQUF5QixhQUFFRixHQUNwRVQsRUFFSixNQUFPLENBQ0hYLFFBQVMsT0FBRixRQUNILFlBQWFZLEVBQ2IsY0FBZUUsRUFDZkcsV0FBWSxDQUFDLFlBQ2JDLFNBQVVyQyxHQUNOeUMsR0FBNkIsQ0FBRSxnQkFBaUJGLElBRXhEbkIsV0FBWSxDQUNSLGlCQUFrQixpQkFDbEIsOEJBQStCYyxHQUczQyxDQU9RLGVBQUFaLENBQW1EbkIsR0FDdkQsSUFBSWdELEVBQW9CLENBQUMsRUFzQnpCLE9BcEJhcEcsT0FBT3FHLEtBQUtqRCxHQUVwQmtELFFBQVNqRyxJQUNWLE1BQU1rRyxFQUFRbkQsRUFBTy9DLEdBR2pCa0csU0FFVSxLQUFWQSxHQUNDQyxNQUFNQyxRQUFRRixJQUEyQixJQUFqQkEsRUFBTUwsU0FLbkNFLEVBQW9CLE9BQUgsd0JBQ1ZBLEdBQWlCLENBQ3BCLENBQUMvRixHQUFNbUcsTUFBTUMsUUFBUUYsR0FBU0EsRUFBTUcsS0FBSyxLQUFPSCxPQUlqREgsQ0FDWCxFQ2xhVyxTQUFTK1UsS0FDcEIsT0FBTyxJQUFJRCxHQUFzQlIsOEVBQUFBLEdBQ3JDLEVGMkdBLFNBQVlJLEdBQ1Isd0JBQ0EsbUJBQ0gsQ0FIRCxDQUFZQSxLQUFBQSxHQUFZLEtBZ0p4QixTQUFZQyxHQUNSLHFCQUNILENBRkQsQ0FBWUEsS0FBQUEsR0FBMEIsS0FJdEMsU0FBWUMsR0FDUix3QkFDQSx3QkFDQSxtQkFDSCxDQUpELENBQVlBLEtBQUFBLEdBQTJCLEtBTXZDLFNBQVl2USxHQUNSLHNCQUNBLFVBQ0Esb0JBQ0EsV0FDSCxDQUxELENBQVksUUFBa0IsS0E2TzlCLFNBQVlFLEdBQ1Isa0JBQ0Esc0JBQ0Esa0JBQ0EsWUFDQSwyQkFDSCxDQU5ELENBQVksUUFBZ0IsS0FRNUIsU0FBWUMsR0FDUixjQUNBLGNBQ0Esa0JBQ0EsZ0JBQ0EsZUFDSCxDQU5ELENBQVksUUFBZ0IsS0FRNUIsU0FBWUMsR0FDUixjQUNBLGFBQ0gsQ0FIRCxDQUFZLFFBQWdCLEtBK041QixTQUFZb1EsR0FDUix3QkFDQSxrQkFDQSxzQkFDQSw2QkFDSCxDQUxELENBQVlBLEtBQUFBLEdBQWlDLE1BdU5qQyxRQUFtQyxLQUMzQyxZQTBCSixTQUFZbFEsR0FDUixzQkFDQSxvQkFDQSw4Q0FDQSw2QkFDQSw4QkFDSCxDQU5ELENBQVksUUFBaUIsSyx1U0d4N0JkLE1BQU1xUSxHQUdqQixXQUFBbmEsQ0FDWWdLLEVBQ0FDLEVBQ0FtUSxFQUNBQyxHQUhBLEtBQUFyUSxXQUFBQSxFQUNBLEtBQUFDLDBCQUFBQSxFQUNBLEtBQUFtUSxvQkFBQUEsRUFDQSxLQUFBQyxnQkFBQUEsQ0FDVCxDQU9HLGFBQUFoWSxDQUNGK0gsRUFDQUMsRUFDQTlILEVBQ0FDLEcseUNBRUEsTUFBTThILEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3ZJLEVBQWVxSSxHQUF3QkMsRUFBTUUsaUJBQWlCbkcsU0FBU29HLEtBQ3ZFMUksRUFBZ0J1SSxFQUFNSSx3QkFBa0ROLEdBUzlFLE9BUEE5SixLQUFLcUssZ0JBQWtCckssS0FBSytaLGdCQUFnQnpQLGFBQ3hDN0ksRUFDQUMsRUFDQU8sRUFDQUMsR0FHR2xDLEtBQUtxSyxTQUNoQixFLENBRUEsbUJBQUFFLEdBQ0ksSUFBS3ZLLEtBQUtxSyxVQUNOLE1BQU0sSUFBSWpLLEVBR2QsT0FBT0osS0FBS3FLLFNBQ2hCLENBT00sdUJBQUFHLENBQ0ZDLEcseUNBRUEsTUFBTUMsRUFBa0JELEVBQXdCRSwyQkFFaEQsSUFBS0QsRUFDRCxNQUFNLElBQUlySyxFQUFpQmpDLEVBQXFCb0MsYUFHcEQsSUFDSSxhQUFhUixLQUFLMkosMEJBQTBCaUIsaUJBQWlCRixFLENBQy9ELE1BQU9HLEdBQ0wsTUFBTSxJQUFJcEMsQyxDQUVsQixFLENBT00sV0FBQXFDLENBQ0ZDLEVBQ0FDLEcseUNBRUEsTUFBTUMsRUFBU2pMLEtBQUsySiwwQkFBMEJNLFdBQVdDLGlCQUFpQjlCLElBRXBFLFFBQUU4QyxTQUFrQmxMLEtBQUs4WixvQkFBb0JoUCxZQUFZQyxFQUFZLE9BQUYsUUFDckVFLFVBQ0dELElBR1AsT0FBT0UsQ0FDWCxFLENBRU0scUJBQUFDLENBQ0ZKLEVBQ0FDLEcseUNBRUEsTUFBTUMsRUFBU2pMLEtBQUsySiwwQkFBMEJNLFdBQVdDLGlCQUFpQjlCLElBRXBFLFFBQUU4QyxFQUFPLFdBQUVFLFNBQXFCcEwsS0FBSzhaLG9CQUFvQmhQLFlBQVlDLEVBQVksT0FBRixRQUNqRkUsVUFDR0QsSUFHUCxPQUFPLE9BQVAsUUFBU0UsV0FBYUUsRUFBYSxDQUFFQSxjQUFlLENBQUMsRUFDekQsRSxDQUVNLFdBQUFDLENBQVl2QixHLHlDQUNkLE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3FCLEVBQU90QixFQUFNRSxpQkFDYnFCLEVBQWN2QixFQUFNd0IseUJBQXlCLEdBRW5ELFVBQ1V4TCxLQUFLOFosb0JBQW9Cek8sWUFBWXZCLEVBQVUsQ0FDakQyQix5QkFBMEJGLEVBQVlFLHlCQUN0Q1IsT0FBUUssRUFBS2xELEdBQ2JzRCx1QkFBd0JILEVBQVlHLHdCLENBRTFDLE1BQU9DLEdBQ0wsTUFBTSxJQUFJN0MsQyxDQUVsQixFLENBRU0sY0FBQThDLENBQWU5QixFQUFrQmpILEcseUNBQ25DLElBQ0ksTUFBTSxPQUFFZ0csU0FBaUI3SSxLQUFLOFosb0JBQW9CbE8sZUFBZTlCLEVBQVVqSCxHQUUzRSxPQUFPZ0csQyxDQUNULE1BQU84QyxHQUNMLE1BQU0sSUFBSTdDLEMsQ0FFbEIsRSxDQU9BLGVBQUErQyxDQUFnQi9CLEVBQWtCb0IsR0FDOUIsTUFBTUksRUFBT3RMLEtBQUsySiwwQkFBMEJNLFdBQVdDLGlCQUV2RCxJQUFLZ0IsRUFDRCxNQUFNLElBQUk3SyxFQUFpQmpDLEVBQXFCMkMsZ0JBR3BELE9BQU9mLEtBQUswSixXQUFXb0MsU0FBUyxnQkFBaUIsT0FBRixRQUMzQ0MsYUFBYyxTQUNkQyxPQUFRLHdCQUNSQyxTQUFVbkMsRUFDVm9DLFNBQVVoQixHQUNOSSxFQUFLYSxTQUFXbEQsRUFBV21ELFFBQVUsQ0FBRUMsUUFBU2YsRUFBS2xELEtBRWpFLENBRU0sYUFBQWtFLENBQWN4QyxFQUFrQm9CLEVBQWlCcUIsRyx5Q0FDbkQsTUFBTUMsRUFBYyxDQUNoQkMsaUJBQWtCLENBQ2RDLHlCQUEwQixLQUMxQkMsaUNBQWtDLEtBQ2xDQyxZQUFhLEtBQ2JDLFVBQVcvQyxFQUNYZ0QsZUFBZ0IsQ0FDWlosU0FBVWhCLFdBS2hCbEwsS0FBSzJKLDBCQUEwQjJDLGNBQWMsT0FBRCxRQUM5Q3hDLFdBQ0EwQyxlQUNJRCxFQUFZLENBQUVBLGFBQWMsQ0FBQyxHQUV6QyxFLENBT0Esd0JBQUFRLENBQXlCQyxHQUNyQixNQUNNekIsRUFEUXZMLEtBQUsySiwwQkFBMEJNLFdBQ25CdUIseUJBQXlCLEdBRTdDQyxFQUEyQkYsRUFBWUUsMEJBQTRCLEdBRW5Fd0IsRUFBNEJ4QixFQUF5QnlCLEtBQ3REQyxHQUFXQSxFQUFPQyxlQWVqQkMsR0FaeUJMLEVBQ3pCdkIsRUFBeUJ5QixLQUFNQyxHQUFXQSxFQUFPL0UsS0FBTzRFLEdBQ3hEdkIsRUFBeUJ5QixLQUFNQyxJQUMzQixHQUFJNUIsRUFBWUcsdUJBQXdCLENBQ3BDLE1BQU1zTyxFQUFtQnpPLEVBQVlHLHVCQUF1QnRELEdBRTVELE9BQU8rRSxFQUFPL0UsS0FBTzRSLEMsQ0FHekIsT0FBTyxNQUlhL00sR0FBNkJ4QixFQUF5QixHQUVwRixJQUFLNEIsRUFDRCxNQUFNLElBQUk1TixNQUFNLCtDQUdwQixPQUFPNE4sQ0FDWCxDQU9BLFVBQUFDLENBQVdDLEdBQ1AsTUFBTyxDQUNIQyxXQUFXRCxhQUFPLEVBQVBBLEVBQVNDLFlBQWEsR0FDakNDLFVBQVVGLGFBQU8sRUFBUEEsRUFBU0UsV0FBWSxHQUMvQkMsT0FBT0gsYUFBTyxFQUFQQSxFQUFTRyxRQUFTLEdBQ3pCQyxPQUFPSixhQUFPLEVBQVBBLEVBQVNJLFFBQVMsR0FDekJDLFFBQVMsR0FDVEMsVUFBVU4sYUFBTyxFQUFQQSxFQUFTTSxXQUFZLEdBQy9CQyxVQUFVUCxhQUFPLEVBQVBBLEVBQVNPLFdBQVksR0FDL0JDLE1BQU1SLGFBQU8sRUFBUEEsRUFBU1EsT0FBUSxHQUN2QkMsYUFBYVQsYUFBTyxFQUFQQSxFQUFTUyxjQUFlLEdBQ3JDQyxZQUFZVixhQUFPLEVBQVBBLEVBQVNVLGFBQWMsR0FDbkNDLGdCQUFpQixHQUNqQkMscUJBQXFCWixhQUFPLEVBQVBBLEVBQVNZLHNCQUF1QixHQUNyREMsYUFBYyxHQUV0QixDQUVBLGlDQUFBQyxFQUFrQyxNQUFFQyxJLFFBQ2hDLE9BQU90TyxLQUFLc04sV0FBVyxDQUNuQkUsVUFBV2MsRUFBTXpPLEtBQUswTyxXQUN0QmQsU0FBVWEsRUFBTXpPLEtBQUsyTyxRQUNyQmQsTUFBT1ksRUFBTUcsY0FDYlosU0FBVVMsRUFBTWYsUUFBUW1CLGVBQ3hCWixTQUFVUSxFQUFNZixRQUFRb0IsZUFDeEJaLEtBQU1PLEVBQU1mLFFBQVFxQixhQUNwQlosWUFBYU0sRUFBTWYsUUFBUXNCLGFBQzNCWixXQUFZSyxFQUFNZixRQUFRdUIsWUFDMUJYLG9CQUFxQkcsRUFBTWYsUUFBUXdCLGFBQ25DcEIsTUFBZ0MsUUFBekIsRUFBVyxRQUFYLEVBQUFXLEVBQU1YLGFBQUssZUFBRXFCLG9CQUFZLGVBQUVDLGlCQUUxQyxDQUVBLGtDQUFBQyxDQUNJQyxHQUVBLE1BQU0sTUFBRWIsRUFBSyxlQUFFYyxHQUFtQkQsR0FDNUIsUUFDRjVCLEVBQ0ExTixNQUFNLFVBQUV3UCxJQUNSRCxFQUFlLEdBQUdFLFVBRWY5QixLQUFjQyxHQUFZNEIsRUFBVUUsTUFBTSxLQUVqRCxPQUFPdlAsS0FBS3NOLFdBQVcsQ0FDbkJFLFlBQ0FDLFNBQVVBLEVBQVN0SSxLQUFLLEtBQ3hCdUksTUFBT1ksRUFBTUcsY0FDYlosU0FBVU4sRUFBUW1CLGVBQ2xCWixTQUFVUCxFQUFRb0IsZUFDbEJaLEtBQU1SLEVBQVFxQixhQUNkWixZQUFhVCxFQUFRc0IsYUFDckJaLFdBQVlWLEVBQVF1QixZQUNwQlgsb0JBQXFCWixFQUFRd0IsY0FFckMsQ0FPQSxtQkFBQVMsQ0FBb0JqSixFQUFrQyxDQUFDLEdBQ25ELE1BQU0sTUFBRWpCLEVBQUssT0FBRTRCLEVBQU0sTUFBRXVJLEVBQUssTUFBRUMsR0FBVW5KLEVBRWxDb0osRUFBYyxDQUNoQnJLLE1BQU9BLEdBQVMsR0FBaUJBLEdBQVNBLE9BQVFWLEVBQ2xEc0MsT0FBUWxILEtBQUs0UCxlQUFlMUksR0FDNUJ1SSxNQUFPQSxHQUFTLEdBQWlCQSxHQUFTQSxPQUFRN0ssRUFDbEQ4SyxNQUFPQSxHQUFTLEdBQWlCQSxHQUFTQSxPQUFROUssR0FHdEQsT0FBT2lMLDhDQUFBQSxDQUFPRixFQUFhRyx5Q0FBQUEsQ0FDL0IsQ0FFQSxjQUFBRixDQUFlMUksR0FLWCxPQUFLQSxHQUE0QixpQkFBWEEsRUFJbEJBLEVBTmMsTUFVZEEsRUFYYyxNQWVYQSxFQWhCZSxFQWlCMUIsQ0FPQSxhQUFBNkksQ0FBY0MsR0FDVixNQUFNaEksRUFBVWdJLEdBQWEzSixTQUFTQyxlQUFlMEosR0FFakRoSSxJQUVBQSxFQUFRekIsTUFBTVEsUUFBVSxPQUVoQyxFLHVTQ3pVVyxNQUFNa1QsR0FDakIsV0FBQXZhLENBQW9CMlEsR0FBQSxLQUFBQSxjQUFBQSxDQUErQixDQUU3QyxXQUFBdkYsQ0FDRkMsRUFDQUMsRyx5Q0FFQSxNQUFNc0YsRUFBTSwyQkFBMkJ2RixJQUNqQ3BDLEVBQU9xQyxFQUNQcEMsRUFBVSxPQUFILFFBQ1QsaUJBQWtCcUgsRUFDbEIsZUFBZ0IsRUFBWU0sTUFDekJKLEdBS1AsYUFGa0JuUSxLQUFLcVEsY0FBY0csS0FBc0JGLEVBQUssQ0FBRTFILFVBQVNELFVBRWhFQSxJQUNmLEUsQ0FFTSxXQUFBMEMsQ0FDRnZCLEVBQ0FrQixHLHlDQUVBLE1BQU1zRixFQUFNLGtDQUFrQ3hHLElBQ3hDbkIsRUFBT3FDLEVBQ1BwQyxFQUFVLE9BQUgsUUFDVCxpQkFBa0JxSCxFQUNsQixlQUFnQixFQUFZTSxNQUN6QkosR0FLUCxhQUZrQm5RLEtBQUtxUSxjQUFjSSxJQUErQkgsRUFBSyxDQUFFMUgsVUFBU0QsVUFFekVBLElBQ2YsRSxDQUVNLGNBQUFpRCxDQUNGOUIsRUFDQWpILEcseUNBRUEsTUFBTXlOLEVBQU0sa0NBQWtDeEcsSUFDeENsQixFQUFVLE9BQUgsUUFDVCxpQkFBa0JxSCxFQUNsQixlQUFnQixFQUFZTSxNQUN6QkosR0FRUCxhQUxrQm5RLEtBQUtxUSxjQUFjblIsSUFBMkJvUixFQUFLLE9BQUYsUUFDL0QxSCxXQUNHL0YsS0FHSThGLElBQ2YsRSxFQzlESixNQVdBLEdBWHdDZ0IsSUFDcEMsTUFBTSxRQUFFOEgsR0FBWTlILEVBQTBCTSxXQUU5QyxPQUFPLElBQUksR0FDUHlILDBFQUFBQSxHQUNBL0gsRUFDQSxJQUFJLEdBQW9CZ0ksZ0ZBQUFBLENBQW9CLENBQUVDLEtBQU1ILE9BQ3BEbUksT0NSTyxNQUFNTSxXQUE4QnBSLEVBQy9DLFdBQUFwSixDQUFZcUosR0FDUm5KLE1BQU1tSixFQUFVLENBQ1pwSixRQUFTLDBDQUdiSyxLQUFLSCxLQUFPLGVBQ1pHLEtBQUtGLEtBQU8sU0FDaEIsRSx1U0N3QlcsTUFBTXFhLEdBVWpCLFdBQUF6YSxDQUNZaUssRUFDQXVKLEVBQ0FrSCxFQUNBaEgsRUFDQWlILEVBbEJTLElBbUJUQyxFQWxCUyxLQWFULEtBQUEzUSwwQkFBQUEsRUFDQSxLQUFBdUosaUNBQUFBLEVBQ0EsS0FBQWtILHNCQUFBQSxFQUNBLEtBQUFoSCxpQkFBQUEsRUFDQSxLQUFBaUgsZ0JBQUFBLEVBQ0EsS0FBQUMsdUJBQUFBLEVBWEosS0FBQUMsYUFBZSxFQUNmLEtBQUFDLFlBQWNDLHdDQUFBQSxDQUNkLEtBQUFDLGtCQUFtQixDQVV4QixDQUVHLFVBQUFySCxDQUNGeFEsRyx5Q0FHQSxNQUFNLFVBQ0YwSixFQUFTLFNBQ1R6QyxFQUFRLGVBQ1J3SixFQUFjLGlDQUNkcUgsR0FDQTlYLEVBQ0VpVyxFQUFnQjZCLEdBQW9DckgsRUFJMUQsR0FGQXRULEtBQUsyYSxpQ0FBbUNBLEdBRW5DN1EsRUFDRCxNQUFNLElBQUlpSSxFQUNOLHFGQUlSLElBQUt4RixFQUNELE1BQU0sSUFBSXdGLEVBQ04sc0ZBSVIsSUFBSytHLEVBQ0QsTUFBTSxJQUFJL0csRUFDTiw2R0FJUixNQUFNL0gsRUFBUWhLLEtBQUsySiwwQkFBMEJNLFdBQ3ZDeEksRUFBZ0J1SSxFQUFNSSx3QkFDeEJOLEVBQ0F5QyxJQUVFLFFBQUVyQixFQUFPLG1CQUFFMFAsR0FBdUJuWixFQUFjK0Isb0JBQXNCLENBQUMsRUFDdkVxWCxFQUFXN1EsRUFBTThRLHdCQUF3QkMsaUJBQWlCRixTQUVoRTdhLEtBQUswYSxpQkMvRkUsU0FDWEcsRUFDQUcsRUFDQUMsR0FBZ0IsRyxNQUVoQixPQUErQixRQUF4QixFQUFBSixFRDRGQyxvREM1RnVCLFFBQUlJLENBQ3ZDLENEeUZnQ0MsQ0FDcEJMLEdBUUEzUCxFQUNBbEwsS0FBS2tMLFFBQVVBLEdBS25CbEwsS0FBS3VDLGlCQUFtQnZDLEtBQUtvYSxzQkFBc0I5WCxpQkFDL0NiLEVBQ0F1SSxFQUFNRSxpQkFBaUJuRyxTQUFTb0csTUFHcENuSyxLQUFLOFQsMEJBQTRCZ0YsRUFBY2pULFVBQVUwSixNQUFNLEtBQUssR0FFcEV2UCxLQUFLZ1UsYUFBYWxLLEVBQVV5QyxFQUFXdU0sR0FFbkM4QixHQUNBNWEsS0FBS21iLGFBQWFyUixFQUFVZ1AsR0FFcEMsRSxDQUVNLE9BQUE1RSxDQUFRQyxFQUEyQnRSLEcseUNBQ3JDLE1BQU0sUUFBRXVSLEdBQXNCRCxFQUFWRSxFLHlVQUFLLENBQUtGLEVBQXhCLGFBRU4sSUFBS0MsRUFDRCxNQUFNLElBQUlwQyxFQUE0QixDQUFDLFlBRzNDLE1BQU0sU0FBRWxJLEVBQVEsVUFBRXlDLEdBQWM2SCxFQUVoQyxJQUFLcFUsS0FBS2tMLFFBQ04sTUFBTSxJQUFJZ0gsRUFHVmxTLEtBQUswYSxrQkFBaUMsVUFBYjVRLFVBQ25CLElBQUltTCxRQUFRLENBQUNVLEVBQVNOLEtBQ25CclYsS0FBS29iLDJCQUEyQnRSLEVBQVU2TCxFQUFTTixFQUFROUksTUFJbkV2TSxLQUFLcWIsMEJBQTBCdlIsV0FDMUI5SixLQUFLMkosMEJBQTBCZ0wsWUFBWU4sRUFBT3hSLFVBR3REN0MsS0FBS2tULGlDQUFpQzVHLGNBQ3hDeEMsRUFDQTlKLEtBQUtrTCxRQUNMcUIsRUFFUixFLENBRUEsUUFBQWtKLEdBQ0ksT0FBT1IsUUFBUUksT0FBTyxJQUFJbEQsRUFDOUIsQ0FFQSxZQUFBdUQsRyxNQVNJLE9BUkExVixLQUFLa0wsYUFBVXRHLEVBRVg1RSxLQUFLMGEsa0JBQ0wxYSxLQUFLc2Isd0JBR1EsUUFBakIsRUFBQXRiLEtBQUtzVixvQkFBWSxTQUFFQyxRQUVaTixRQUFRVSxTQUNuQixDQVFjLDBCQUFBeUYsQ0FDVnRSLEVBQ0F5UixFQUNBQyxFQUNBalAsRywrQ0FFTSxJQUFJMEksUUFBYyxDQUFDVSxFQUFTTixLQUM5QixNQUFNb0csRUFBVUMsV0FBVy9GLEVBQVMzVixLQUFLcWEsaUJBRXpDcmEsS0FBS3dhLFlBQWMsS0FDZm1CLGFBQWFGLEdBQ2J6YixLQUFLbVgsd0JBQXVCLEdBRXJCOUIsT0FJZixJQUNJclYsS0FBS3VhLGNBQWdCdmEsS0FBS3FhLGdCQUUxQixNQUFNdUIsUUFBb0I1YixLQUFLa1QsaUNBQWlDdEgsZUFDNURXLFFBQUFBLEVBQWEsa0JBR1hzUCxFQUFrQkQsSUFBZ0JwUyxFQUFrQnNTLFNBQ3BEQyxFQUFpQkgsSUFBZ0JwUyxFQUFrQndTLGFBRXpELEdBQUlILEVBR0EsT0FGQTdiLEtBQUtpYywrQkFFRVYsSUFHWCxHQUFJUSxFQUNBLE9BQU9QLElBR1gsSUFBS0ssR0FBbUI3YixLQUFLdWEsYUFBZXZhLEtBQUtzYSx1QkFDN0MsYUFBYXRhLEtBQUtvYiwyQkFDZHRSLEVBQ0F5UixFQUNBQyxFQUNBalAsU0FJRnZNLEtBQUtrYyxxQkFBcUIsQ0FDNUJwUyxXQUNBeUMsWUFDQW9PLGlDQUFrQzNhLEtBQUsyYSxtQ0FHM0MzYSxLQUFLd1YsWUFBWSxJQUFJMEUsRyxDQUN2QixNQUFPclAsR0FDTDJRLEcsQ0FFUixFLENBRVEsNEJBQUFTLEdBQ0pqYyxLQUFLd2EsY0FDTHhhLEtBQUt1YSxhQUFlLENBQ3hCLENBRVEscUJBQUFlLEdBQ0p0YixLQUFLaWMsOEJBQ1QsQ0FFYyxvQkFBQUMsQ0FDVnJaLEcsK0NBR003QyxLQUFLMFYscUJBQ0wxVixLQUFLcVQsV0FBV3hRLEVBQzFCLEUsQ0FFUSxXQUFBMlMsQ0FBWTNLLEdBQ2hCLE1BQU0sUUFBRXlKLEdBQVl0VSxLQUFLMmEsa0NBQW9DLENBQUMsRUFFMUQzYSxLQUFLMGEsa0JBQ0wxYSxLQUFLc2Isd0JBR1R0YixLQUFLbVgsd0JBQXVCLEdBRXhCN0MsR0FBOEIsbUJBQVpBLEdBQ2xCQSxFQUFRekosRUFFaEIsQ0FPUSxZQUFBbUosQ0FDSmxLLEVBQ0F5QyxFQUNBdU0sR0FFQSxNQUFNcUQsRUFBZ0JuYyxLQUFLb2MsMEJBR3JCM2EsRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBQ2pCRyx3QkFDeEJOLEVBQ0F5QyxJQUVFLFlBQUU4UCxHQUFnQjVhLEVBQWMrQixvQkFBc0IsQ0FBQyxHQUV2RCxVQUFFcUMsRUFBUyxRQUFFeU8sRUFBTyxlQUFFNkIsRUFBYyxXQUFFRSxHQUFleUMsRUFFckR4QyxFQUE4QyxDQUNoREcsY0FBZTNNLEVBQ2Z2RCxNQUFPdkcsS0FBS2tULGlDQUFpQzFELG9CQUFvQjZNLEdBQ2pFdEksT0FBUSxDQUFDOEMsRUFBR0MsSUFBWWdDLEVBQWN3RCxhQUFheEYsR0FDbkRoTSxZQUFhLElBQU05SyxLQUFLdWMsY0FBY3pTLEVBQVV5QyxFQUFXdU0sR0FDM0Q5QixVQUFZakMsR0FBUy9VLEtBQUtpWCxjQUFjbEMsRUFBTXNCLEdBQzlDYSxTQUFVLEtBQ05sWCxLQUFLbVgsd0JBQXVCLEdBQzVCblgsS0FBS2ljLGdDQUVUM0gsUUFBVXpKLElBQ043SyxLQUFLaWMsK0JBQ0xqYyxLQUFLd2MsY0FBYzNSLEVBQU95SixJQUU5QnNDLFFBQVMsQ0FBT0MsRUFBR0MsSUFBVyxrQ0FDMUIsT0FBQWdDLEVBQWMxQyxXQUFXVSxFQUFRbkIsUUFBU21CLEVBQVF6QixPQUFPLElBR2pFclYsS0FBS3NWLGFBQWU2RyxFQUFjL0UsUUFBUWQsR0FFckN0VyxLQUFLc1YsYUFBYStCLGVBSW5CbEIsR0FBNEMsbUJBQW5CQSxHQUN6QkEsSUFHSm5XLEtBQUtzVixhQUFha0MsT0FBTzNSLEdBQzdCLENBRWMsYUFBQTBXLENBQ1Z6UyxFQUNBeUMsRUFDQXVNLEcseUNBRUEsTUFBTSxXQUFFMUMsR0FBZTBDLFFBUWpCMUMsRUFOcUIsS0FDdkJwVyxLQUFLbVgsd0JBQXVCLEdBRXJCLElBQU1sQyxRQUFRVSxXQUdZOEUsd0NBQUFBLEVBRXJDLE1BQU12UCxRQUFnQmxMLEtBQUtrVCxpQ0FBaUNwSSxZQUN4RCw0Q0FHSixHQUFJOUssS0FBS3FiLDBCQUEwQnZSLEdBQVcsQ0FDMUMsTUFBTXVLLEVBQVEsQ0FBRW9JLGdCQUFnQixHQUMxQjVaLEVBQVUsQ0FDWjZaLE9BQVEsQ0FDSjVTLFdBQ0F5QyxvQkFJRnZNLEtBQUsySiwwQkFBMEJnTCxZQUFZTixFQUFPeFIsU0FDbEQ3QyxLQUFLa1QsaUNBQWlDNUcsY0FBY3hDLEVBQVVvQixFQUFTcUIsRSxDQUdqRixPQUFPckIsQ0FDWCxFLENBRVEsYUFBQStMLEVBQ0osUUFBRVEsR0FDRnBCLEdBRUFyVyxLQUFLa0wsUUFBVXVNLEVBRWZwQixHQUNKLENBRVEsYUFBQW1HLENBQ0ozUixFQUNBeUosR0FFQXRVLEtBQUttWCx3QkFBdUIsR0FFeEI3QyxHQUE4QixtQkFBWkEsR0FDbEJBLEVBQVF6SixFQUVoQixDQU9RLFlBQUFzUSxDQUNKclIsRUFDQWdQLEdBRUEsTUFBTXFELEVBQWdCbmMsS0FBS29jLDBCQUNyQnBTLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxZQUN2QyxVQUFFdUQsRUFBUyxTQUFFQyxFQUFRLE1BQUVDLEdBQVUxRCxFQUFNMlMsNEJBRXZDLG1CQUFFQyxFQUFrQixnQkFBRUMsR0FBb0IvRCxFQUVoRCxJQUFLOEQsRUFDRCxNQUFNLElBQUk3SyxFQUNOLGlJQUlSLE1BQU0rSyxFQUF3QnpXLFNBQVMwVyxjQUFjSCxHQUVqREUsSUFDQUEsRUFBc0JFLFVBQVksSUFHdEMsTUFBTUMsRUFBZ0IsQ0FDbEJ4RyxjQUFlM00sRUFDZnZELE1BQU9zVyxHQUFtQixDQUFDLEVBQzNCSyxPQUFRLENBQ0pyZCxLQUFNLENBQ0ZtRixNQUFPLEdBQUd3SSxLQUFhQyxLQUUzQkMsTUFBTyxDQUNIMUksTUFBTzBJLEtBS1N5TyxFQUFjZ0IsY0FBY0YsR0FFcEN6RixPQUFPb0YsRUFDL0IsQ0FPUSxzQkFBQXpGLENBQXVCYyxHQUN2QkEsR0FBYWpZLEtBQUs4VCwwQkFDbEI5VCxLQUFLb1QsaUJBQWlCbE4sS0FBS2xHLEtBQUs4VCwyQkFFaEM5VCxLQUFLb1QsaUJBQWlCMU0sTUFFOUIsQ0FPUSx5QkFBQTJVLENBQTBCdlIsR0FDOUIsT0FBT0EsRUFBU3NULGdCQUFpQjdULENBQ3JDLENBRVEsdUJBQUE2UyxHQUNKLElBQUtwYyxLQUFLdUMsV0FDTixNQUFNLElBQUluQyxFQUdkLE9BQU9KLEtBQUt1QyxVQUNoQixFRW5iSixNQVlBLEdBQWVqRSxFQVZWcUwsR0FDRCxJQUFJd1EsR0FDQXhRLEVBQ0EsR0FBK0JBLEdBQy9CaVEsS0FDQSxJQUFJblUsRUFBaUIsQ0FDakJFLGdCQUFpQm1NLEtBSTRELENBQ3JGLENBQUV1TCxRQUFTLHNDQ1pmLElBQVlDLElBQVosU0FBWUEsR0FDUixZQUNBLFdBQ0gsQ0FIRCxDQUFZQSxLQUFBQSxHQUFxQyxLQ1JsQyxNQUFNQyxHQUNqQixVQUFPcmUsQ0FBSVcsR0FDUCxNQUFNMmQsRUFBWSxHQUFHQyxtQkFBbUIsR0FBRzVkLFFBQ3JDNmQsRUFBU3JYLFNBQVNxWCxPQUV4QixJQUFJMVksRUFBUSxLQUVaLE1BQU0yWSxFQUFhRCxFQUFPRSxRQUFRSixHQUVsQyxHQUFJRyxHQUFjLEVBQUcsQ0FDakIsSUFBSUUsRUFBWUgsRUFBT0UsUUFBUSxJQUFLRCxJQUVqQixJQUFmRSxJQUNBQSxFQUFZSCxFQUFPL1ksUUFHdkJLLEVBQVE4WSxtQkFBbUJKLEVBQU9LLFVBQVVKLEVBQWFILEVBQVU3WSxPQUFRa1osRyxDQUcvRSxPQUFPN1ksQ0FDWCxDQUVBLFVBQU9nWixDQUFJbmUsRUFBY21GLEVBQWVuQyxFQUF5QixDQUFFb2IsUUFBUSxJQUN2RSxJQUFJQyxFQUFhLEdBQUdULG1CQUFtQjVkLE1BQVM0ZCxtQkFBbUJ6WSxLQUVuRSxNQUFNLFFBQUVtWixFQUFPLEtBQUVDLEVBQUksT0FBRUMsRUFBTSxPQUFFSixHQUFXcGIsRUFFMUMsR0FBSXNiLEVBQ0FELEdBQWMsYUFBYUMsRUFBUUcsb0JBQ2hDLENBQ0gsTUFBTUMsRUFBTSxJQUFJQyxLQUVWQyxFQUFVLEdBRWhCRixFQUFJRyxRQUFRSCxFQUFJSSxVQUFzQixHQUFWRixFQUFlLEtBRTNDUCxHQUFjLGFBQWFLLEVBQUlELGUsQ0FHL0JGLElBQ0FGLEdBQWMsVUFBVUUsS0FHeEJDLElBQ0FILEdBQWMsWUFBWUcsS0FHMUJKLElBQ0FDLEdBQWMsWUFHbEI3WCxTQUFTcVgsT0FBU1EsQ0FDdEIsQ0FFQSxhQUFPVSxDQUFPL2UsRUFBY2dELEdBQ3hCMGEsR0FBY1MsSUFBSW5lLEVBQU0sR0FBSSxPQUFGLFFBQUlzZSxRQUFTLElBQUlLLEtBQUssSUFBTzNiLEdBQzNELEUsSUM3RENnYyxHLG1TQ3dCVSxNQUFNQyxHQUdqQixXQUFBcGYsR0FDSU0sS0FBS3VCLE9BQVNBLE1BQ2xCLENBRU0sd0JBQUF3ZCxDQUNGbmQsRUFDQW9kLEVBQ0F0WixHLHlDQU9BLEdBTElzWixJQUNBemQsT0FBTzBkLGFBQWFDLFFBQVEsY0FBZSxXQUMzQzNkLE9BQU8wZCxhQUFhQyxRQUFRLFNBQVUsYUFHckNsZixLQUFLdUIsT0FBTzRkLGVBQWdCLENBQzdCLE1BQU1DLEVBQWdCLENBQ2xCQyxLQUFNLENBQ0ZDLHVCQUF3QixnQkFJaEN0ZixLQUFLdUIsT0FBTzRkLHFCQUF1QnZkLEVBQWtCMmQsU0FBUyxDQUMxRDdaLE9BQVFBLEdBQVUwWixHLENBSTFCLE9BQU9wZixLQUFLdUIsT0FBTzRkLGNBQ3ZCLEUsQ0FFQSx3QkFBQUssR0FDSSxJQUFLeGYsS0FBS3VCLE9BQU80ZCxlQUNiLE1BQU0sSUFBSS9lLEVBR2QsT0FBT0osS0FBS3VCLE9BQU80ZCxjQUN2QixDQVFNLHFCQUFBTSxDQUFzQi9SLEcseUNBR3hCLE9BRnVCMU4sS0FBS3dmLDJCQUVORSxTQUFTQyxzQkFBc0JqUyxFQUN6RCxFLENBUU0sZ0NBQUFrUyxDQUNGQyxHLHlDQUVBLE9BQUtBLEVBSWtCN2YsS0FBS3dmLDJCQUVORSxTQUFTSSwwQkFBMEJELEdBTDlDLENBQUMsQ0FNaEIsRSxDQWFBLHNCQUFBRSxDQUF1QnBlLEdBQ25CLE1BQU13YyxFQUFVLElBQUlLLEtBRXBCTCxFQUFRNkIsUUFBUTdCLEVBQVE4QixVQUFZLElBRXBDLE1BQU1DLEVBQWdCLENBQ2xCL0IsVUFDQUYsUUFBUSxHQUdaVixHQUFjUyxJQUFJLHdCQUF5QnJjLEVBQVd1ZSxFQUMxRCxDQUVBLHNCQUFBQyxHQUNJNUMsR0FBY3FCLE9BQU8sd0JBQ3pCLENBRUEsbUJBQUF3QixHQUNJLE9BQU83QyxHQUFjcmUsSUFBSSwwQkFBNEIsRUFDekQsQ0FVQSx3Q0FBQW1oQixDQUNJdlcsRUFDQXdXLEcsVUFFQSxNQUFNLG9CQUFFQyxFQUFtQixZQUFFQyxHQUFnQkYsRUFFdkNHLEVBQTZELFFBQXRDLEVBQWdDLFFBQWhDLEVBQWlCLFFBQWpCLEVBQUFELGFBQVcsRUFBWEEsRUFBYUUsWUFBSSxlQUFFQyxxQkFBYSxlQUFFRCxZQUFJLGVBQUVFLGVBQy9EQyxFQUF3QkwsYUFBVyxFQUFYQSxFQUFhTSxnQkFDckNDLEVBQW9CUCxhQUFXLEVBQVhBLEVBQWEzZ0IsS0FDakNtaEIsRUFBbUJSLGFBQVcsRUFBWEEsRUFBYUUsS0FFaENJLEVBQWtCRCxFQUNsQjdnQixLQUFLaWhCLHFCQUNESixFQUFzQnRULFFBQ3RCc1QsRUFBc0JoaEIsS0FDdEJnaEIsRUFBc0JLLGtCQUUxQnRjLEVBQ0FnYyxFQUNGSCxHQUF3Qk0sRUFDbEIvZ0IsS0FBS2loQixxQkFDRFIsRUFDQU0sRUFDQUYsYUFBcUIsRUFBckJBLEVBQXVCSyxrQkFFM0J0YyxFQUNKZ1QsRUFBY29KLEVBQ2RoaEIsS0FBS21oQix3QkFBd0JyWCxFQUFVa1gsR0FDdkMsR0FFQUksRUFBWXBoQixLQUFLcWhCLGdCQUFnQixDQUFDUCxFQUFpQkYsSUFFekQsTUFBTyxDQUNITCxvQkFDSUEsR0FBdUI3RyxHQUFrQzRILGFBQzdERixZQUNBUixpQkFDQUUsa0JBQ0FsSixjQUVSLENBRUEsdUJBQUF1SixDQUNJclgsRUFDQXVJLEdBRUEsTUFBTSxHQUFFakssRUFBRSxjQUFFdVksR0FBa0J0TyxHQUN4QixNQUFFa1AsRUFBSyxPQUFFQyxFQUFNLFdBQUVDLEdBQWVkLEVBQWNELE1BRTdDZ0IsRUFBWUMsR0FBZUgsRUFBT2pTLE1BQU0sS0FFL0MsTUFBTyxDQUNILENBQ0l3SSxZQUFhM1AsRUFDYm1aLFFBQ0FLLG1CQUFtQixFQUNuQkQsY0FDQUQsYUFDQUcsSUFBSyxHQUNMQyxNQUFPTCxFQUNQTSxPQUFRalksRUFDUm1DLFNBQVVuQyxFQUNWa08sd0JBQXdCLEVBQ3hCZ0ssc0NBQXVDMUUsR0FBc0MyRSxJQUM3RW5pQixLQUFNLFFBR2xCLENBRUEsb0JBQUFvaUIsQ0FBcUIzVSxHQUNqQixNQUFPLENBQ0hLLFNBQVNMLGFBQU8sRUFBUEEsRUFBU0ssVUFBVyxHQUM3QnVVLGNBQWM1VSxhQUFPLEVBQVBBLEVBQVNNLFdBQVksR0FDbkN1VSxjQUFjN1UsYUFBTyxFQUFQQSxFQUFTTyxXQUFZLEdBQ25DdVUsWUFBWTlVLGFBQU8sRUFBUEEsRUFBU1ksdUJBQXVCWixhQUFPLEVBQVBBLEVBQVNXLGtCQUFtQixHQUN4RW9VLFlBQVkvVSxhQUFPLEVBQVBBLEVBQVNRLE9BQVEsR0FDN0JFLFlBQVlWLGFBQU8sRUFBUEEsRUFBU1UsYUFBYyxHQUNuQ0QsYUFBYVQsYUFBTyxFQUFQQSxFQUFTUyxjQUFlLEdBRTdDLENBRUEsb0JBQUFpVCxDQUNJMVQsRUFDQWdWLEVBQ0E1VSxFQUNBUyxHQUVBLE1BQU9aLEVBQVdDLEdBQVk4VSxFQUFZQyxTQUFTalQsTUFBTSxLQUVuRGtULEdBQ2M5VSxhQUFLLEVBQUxBLEVBQU8rVSxpQkFBa0IsR0FEdkNELEdBRVc5VSxhQUFLLEVBQUxBLEVBQU9LLGNBQWUsR0FHdkMsTUFBTyxDQUNINUYsR0FBSW9XLEtBQUtELE1BQ1R6ZSxLQUFNLGlCQUNOME4sVUFBVytVLEVBQVkvVSxXQUFhQSxHQUFhLEdBQ2pEQyxTQUFVOFUsRUFBWTlVLFVBQVlBLEdBQVksR0FDOUNHLFFBQVNMLEVBQVFLLFNBQVcsR0FDNUJDLFNBQVVOLEVBQVE0VSxhQUNsQnJVLFNBQVVQLEVBQVE2VSxjQUFnQixHQUNsQ3JVLEtBQU1SLEVBQVErVSxXQUNkcFUsZ0JBQWlCWCxFQUFROFUsV0FDekJsVSxvQkFBcUJaLEVBQVE4VSxXQUM3Qk0sUUFBU3BWLEVBQVFTLGFBQWUsR0FDaENBLFlBQWFULEVBQVFTLGFBQWUsR0FDcENDLFdBQVlWLEVBQVFVLFdBQ3BCTixNQUFPOFUsRUFBd0JBLEVBQy9CclUsYUFBY0EsR0FBZ0IsR0FFdEMsQ0FTQSxlQUFBaVQsQ0FBZ0JELEdBQ1osT0FBT0EsRUFBVXdCLE9BQ2IsQ0FBQ0MsRUFBc0NDLElBQzlCQSxFQUl5QkQsRUFBa0JFLEtBQU1DLEdBQ2xEaGpCLEtBQUtpakIsaUJBQWlCRCxFQUFpQkYsSUFJckNELEVBQ0EsSUFBSUEsRUFBbUJDLEdBVGxCRCxFQVdmLEdBRVIsQ0FFUSxnQkFBQUksQ0FDSkMsRUFDQUMsR0FFQSxPQUFPQywrQ0FBQUEsQ0FBUXBqQixLQUFLcWpCLGlCQUFpQkgsR0FBZWxqQixLQUFLcWpCLGlCQUFpQkYsR0FDOUUsQ0FFUSxnQkFBQUUsQ0FBaUI5VixHQUNyQixPQUFPK1YsNENBQUFBLENBQUsvVixFQUFTLENBQUMsS0FBTSxTQUNoQyxFQzFSVyxTQUFTZ1csS0FDcEIsT0FBTyxJQUFJekUsRUFDZixFRkZBLFNBQUtELEdBQ0Qsc0JBQ0EsOENBQ0EsMEJBQ0Esc0JBQ0EsMEJBQ0Esa0RBQ0EsaURBQ0gsQ0FSRCxDQUFLQSxLQUFBQSxHQUFlLEtBVXBCLFlHVGUsU0FBUzJFLEdBQ3BCdEcsR0FFQSxPQUNJLEdBQWdCdUcsY0FBY3ZHLEdBQzlCLEdBQWdCd0csWUFBWXhHLEdBQzVCLEdBQWdCeUcsY0FBY3pHLENBRXRDLENDUmUsU0FBUzBHLEdBQ3BCMUcsR0FFQSxPQUNJLEdBQWdCMkcsMEJBQTBCM0csR0FDMUMsR0FBZ0I0Ryx3QkFBd0I1RyxHQUN4QyxHQUFnQjZHLDBCQUEwQjdHLENBRWxELENDSmUsTUFBTThHLFdBQWlDeGtCLEVBQ2xELFdBQUFFLENBQVlDLEdBQ1JDLE1BQ0lELEdBQ0ksb0dBR1JLLEtBQUtILEtBQU8sMkJBQ1pHLEtBQUtGLEtBQU8sK0JBQ2hCLEVDZEosSUFBWW1rQixJQUFaLFNBQVlBLEdBQ1IsbUVBQ0EsdURBQ0EscURBQ0EsdURBQ0Esa0VBQ0gsQ0FORCxDQUFZQSxLQUFBQSxHQUF1QixLQWFwQixNQUFNQyxXQUE0QjFrQixFQUM3QyxXQUFBRSxDQUFtQlksR0FDZlYsTUFPUixTQUF5QkUsR0FDckIsT0FBUUEsR0FDSixLQUFLbWtCLEdBQXdCRSx1QkFDekIsTUFBTyxvRkFFWCxLQUFLRixHQUF3Qkcsc0JBQ3pCLE1BQU8sbUZBRVgsS0FBS0gsR0FBd0JJLHVCQUN6QixNQUFPLG9GQUVYLEtBQUtKLEdBQXdCSyw2QkFDekIsTUFBTyxtRkFFWCxRQUNJLE1BQU8sNkVBRW5CLENBeEJjLENBQWdCaGtCLElBRFAsS0FBQUEsUUFBQUEsRUFHZk4sS0FBS0gsS0FBTyxzQkFDWkcsS0FBS0YsS0FBTyxpQkFDaEIsRUNmVyxNQUFNeWtCLFdBQWdDL2tCLEVBQ2pELFdBQUFFLENBQW1COGtCLEVBQXlDN2tCLEdBQ3hEQyxNQUFNRCxHQUFXLHFFQURGLEtBQUE2a0IsUUFBQUEsRUFHZnhrQixLQUFLSCxLQUFPLDBCQUNaRyxLQUFLRixLQUFPLHNCQUNoQixFLHVTQytDVyxNQUFNMmtCLEdBZWpCLFdBQUEva0IsQ0FDWWlLLEVBQ0ErYSxFQUNBdEssRUFDQXVLLEdBSEEsS0FBQWhiLDBCQUFBQSxFQUNBLEtBQUErYSx5QkFBQUEsRUFDQSxLQUFBdEssc0JBQUFBLEVBQ0EsS0FBQXVLLG9CQUFBQSxDQUNULENBRUcsVUFBQXRSLENBQ0Z4USxHLHlDQUVBLE1BQU0sU0FBRWlILEVBQVEsMEJBQUU4YSxFQUF5QixlQUFFdFIsR0FBbUJ6USxFQUMxRGdpQixFQUFzQ0QsR0FBNkJ0UixHQUVuRSxLQUFFd1IsRUFBSSxpQ0FBRUMsRUFBZ0MsZUFBRUMsR0FDNUNILEdBQXVDLENBQUMsRUFFNUMsSUFBSy9hLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLK1MsRUFDRCxNQUFNLElBQUkvUyxFQUNOLGdHQUlSL1IsS0FBS2lsQixrQkFBb0JILEVBRXpCOWtCLEtBQUtrbEIsaUJBQW1CMUIsR0FBdUJzQixFQUFLNUgsUUFDcERsZCxLQUFLbWxCLHdCQUNEdkIsR0FBOEJrQixFQUFLNUgsVUFBWWxkLEtBQUtvbEIsMkJBRWxEcGxCLEtBQUsySiwwQkFBMEI0SixrQkFBa0J6SixTQUNqRDlKLEtBQUswa0IseUJBQXlCM2lCLGNBQWMrSCxPQUFVbEYsR0FBVyxHQUFNLElBRXpFNUUsS0FBS2tsQixrQkFBb0JsbEIsS0FBS21sQixpQ0FDeEJubEIsS0FBS3FsQixpQkFBaUJQLEVBQU1DLElBR3RDQyxTQUFBQSxJQUVJaGxCLEtBQUtzbEIsK0JBQStCeGIsV0FDOUI5SixLQUFLdWxCLGdDQUFnQ3piLEdBRW5ELEUsQ0FFTSxPQUFBb0ssQ0FBUUMsRUFBMkJ0UixHLHlDQUNyQyxNQUFNLFFBQUV1UixHQUFzQkQsRUFBVkUsRSx5VUFBSyxDQUFLRixFQUF4QixjQUNBLFNBQUVySyxFQUFRLFlBQUUwQyxHQUFnQjRILEdBQVcsQ0FBQyxFQUU5QyxJQUFLQSxJQUFZdEssRUFDYixNQUFNLElBQUlrSSxFQUE0QixDQUFDLFlBSzNDLEdBRkFoUyxLQUFLd2xCLHFCQUF1QmhaLEVBRXhCeE0sS0FBS2tsQixrQkFBb0JsbEIsS0FBS21sQiw4QkFDeEJubEIsS0FBS3lsQixrQ0FDTHpsQixLQUFLMGxCLHVCQUNSLENBRUgsTUFBTSxRQUFFeGEsU0FBa0JsTCxLQUFLMGtCLHlCQUF5QnZaLHNCQUNwRCxvQ0FDQW5MLEtBQUsybEIsdUJBR1QzbEIsS0FBSzRsQixnQkFBa0IxYSxDLENBRzNCLE1BQU0yYSxFQUF1QjdsQixLQUFLMFUsc0JBQzlCNUssRUFDQTBDLEVBQ0F4TSxLQUFLNGxCLGdCQUNMNWxCLEtBQUs4bEIsNEJBR0g5bEIsS0FBSzJKLDBCQUEwQmdMLFlBQVlOLEVBQU94UixTQUNsRDdDLEtBQUsySiwwQkFBMEIyQyxjQUFjdVosRUFDdkQsRSxDQUVBLFFBQUFwUSxHQUNJLE9BQU9SLFFBQVFJLE9BQU8sSUFBSWxELEVBQzlCLENBRU0sWUFBQXVELEcscURBTUYsYUFMbUIsUUFBYixFQUFBMVYsS0FBSytsQixnQkFBUSxlQUFFeFEsY0FDQyxRQUFoQixFQUFBdlYsS0FBS2dtQixtQkFBVyxlQUFFelEsY0FDRixRQUFoQixFQUFBdlYsS0FBS2ltQixtQkFBVyxlQUFFMVEsY0FDSixRQUFkLEVBQUF2VixLQUFLa21CLGlCQUFTLGVBQUUzUSxRQUVmTixRQUFRVSxTLEdBV1gscUJBQUFqQixDQUNKNUssRUFDQTBDLEVBQ0F0QixFQUNBaWIsR0FFQSxNQUFNLHFCQUFFN1QsR0FBdUIsRUFBSyw2QkFBRUMsR0FBK0IsR0FDakVILEVBQXVCNUYsR0FBZUEsRUFBYyxDQUFDLEVBRW5Ea0csRUFDRmxHLEdBQWVnRyxFQUFvQmhHLEdBQWVBLEVBQVlrRyxrQkFBZTlOLEVBRTNFbVIsRUFBZWxHLDhDQUFBQSxDQUNqQixDQUNJdVcsbUJBQW9CRCxFQUNwQm5RLE1BQU90RCxHQUVYNUMseUNBQUFBLEVBR0osTUFBTyxDQUNIaEcsV0FDQTBDLFlBQWEsQ0FDVDhGLHVCQUNBQywrQkFDQUcsZUFDQWpHLGlCQUFrQixPQUFGLHdCQUNSMFosR0FBU3pULEVBQWUsQ0FBRXFELGdCQUFpQixDQUFDLEdBQzVDN0ssRUFBVSxDQUFFbWIsZ0JBQWlCLENBQUVuYSxTQUFVaEIsSUFBYyxDQUFDLElBSTVFLENBT2MsZ0JBQUFtYSxDQUNWaUIsRUFDQXZCLEcseUNBRUEsTUFBTSxPQUFFN0gsRUFBTSxPQUFFeFgsR0FBVzRnQixFQUVyQmpjLEVBQVlySyxLQUFLMGtCLHlCQUF5Qm5hLHNCQUMxQ2djLEVBQWtCdm1CLEtBQUt3bUIsbUJBQW1CdEosR0FFMUN1SixFQUFnQixlQUNsQmxnQixNQUFPdkcsS0FBSzBtQixlQUFlaGhCLEdBQzNCc1IsVUFBVyxFQUNQUyxVQUNBa1Asa0JBQ0FDLHFCQUVBLEdBQ0lBLElBQW1CMWQsRUFBbUIyZCxJQUN0Q0QsSUFBbUIxZCxFQUFtQjRkLFFBRXRDLE1BQU0sSUFBSXJuQixNQUdkLE9BQU9PLEtBQUtpWCxjQUFjLENBQUVRLFVBQVNrUCxxQkFFekNyUyxRQUFTLEtBQ0wsTUFBTSxJQUFJMFAsSUFFZCtDLFlBQWEsQ0FDVEMsU0FBV0MsR0FBVWpuQixLQUFLa25CLGdCQUFnQlosRUFBYVcsR0FDdkRFLFFBQVVGLEdBQVVqbkIsS0FBS29uQixlQUFlZCxFQUFhVyxHQUNyREksT0FBU0osR0FBVWpuQixLQUFLc25CLGNBQWNoQixFQUFhVyxHQUNuRE0scUJBQXVCTixHQUFVam5CLEtBQUt1bkIscUJBQXFCakIsRUFBYVcsS0FFekVWLEdBS1AsR0FGQXZtQixLQUFLd25CLGlCQUFtQm5kLEVBQVVvZCxXQUFXaEIsSUFFeEN6bUIsS0FBS3duQixXQUFXblEsYUFDakIsTUFBTSxJQUFJNk0sR0FBb0JELEdBQXdCRyx1QkFHMUQsSUFDSXBrQixLQUFLMG5CLHVCQUF1QnhLLEdBRXhCc0csR0FBdUJ0RyxXQUNqQmxkLEtBQUttYixhQUFhK0IsSUFHeEIwRyxHQUE4QjFHLFdBQ3hCbGQsS0FBSzJuQixvQkFBb0J6SyxHLENBRXJDLE1BQU9yUyxHQUMyQyxtQkFBckNrYSxHQUNQQSxFQUFpQ2xhLEUsQ0FHN0MsRSxDQVVRLGtCQUFBMmIsQ0FDSnRKLEdBSUEsT0FGc0IwRyxHQUE4QjFHLEdBRTdCbGQsS0FBSzRuQixnQ0FBa0M1bkIsS0FBSzZuQixxQkFDdkUsQ0FFUSw2QkFBQUQsR0FDSixNQUFPLENBQ0hFLHNCQUF1QixJQUFZLGtDQUMvQixNQUFNLFdBQUUxYyxVQUNHcEwsS0FBSzBrQix5QkFBeUJ2WixzQkFDakMsb0NBQW1DLCtCQUU1Qm5MLEtBQUsybEIsdUJBQXFCLENBQzdCdmEsWUFBWSxPQUVkLENBQUMsRUFFWCxPQUFPQSxDQUNYLEdBRVIsQ0FFUSxtQkFBQXljLEdBQ0osTUFBTyxDQUNIL2MsWUFBYSxJQUFZLGtDQUNyQixNQUFNLFFBQUVJLFVBQ0dsTCxLQUFLMGtCLHlCQUF5QnZaLHNCQUNqQyxvQ0FDQW5MLEtBQUsybEIseUJBQ0gsQ0FBQyxFQUVYLE9BQU96YSxDQUNYLEdBRVIsQ0FXUSxhQUFBK0wsRUFBYyxRQUFFUSxFQUFPLGdCQUFFa1AsSUFDekJsUCxJQUNBelgsS0FBSzRsQixnQkFBa0JuTyxHQUd2QmtQLElBQ0EzbUIsS0FBSzhsQixxQkFBdUJhLEVBRXBDLENBT2MsWUFBQXhMLENBQWE4QixHLHFEQUN2QixNQUFNdUssRUFBYXhuQixLQUFLK25CLHdCQUVFLFFBQXRCLEVBQUE5SyxFQUFjK0ssZ0JBQVEsZUFBRUMsZUFDeEJqb0IsS0FBSytsQixTQUFXeUIsRUFBV1UsU0FBUyxDQUNoQ0MsWUFBYSxXQUVYbm9CLEtBQUsrbEIsU0FBU3ZPLE9BQU8sSUFBSXlGLEVBQWMrSyxTQUFTQyxpQkFHOUIsUUFBeEIsRUFBQWhMLEVBQWNtTCxrQkFBVSxlQUFFSCxlQUMxQmpvQixLQUFLZ21CLFlBQWN3QixFQUFXYSxvQkFDeEJyb0IsS0FBS2dtQixZQUFZeE8sT0FBTyxJQUFJeUYsRUFBY21MLFdBQVdILGlCQUdyQyxRQUF0QixFQUFBaEwsRUFBY3FMLGdCQUFRLGVBQUVMLGVBQ3hCam9CLEtBQUtrbUIsVUFBWXNCLEVBQVdlLFVBQVUsQ0FDbENKLFlBQWEsV0FFWG5vQixLQUFLa21CLFVBQVUxTyxPQUFPLElBQUl5RixFQUFjcUwsU0FBU0wsaUJBRy9CLFFBQXhCLEVBQUFoTCxFQUFjdUwsa0JBQVUsZUFBRVAsZUFDMUJqb0IsS0FBS2ltQixZQUFjdUIsRUFBV2lCLFlBQVksQ0FDdENOLFlBQWEsV0FFWG5vQixLQUFLaW1CLFlBQVl6TyxPQUFPLElBQUl5RixFQUFjdUwsV0FBV1AsZSxHQUlyRCxtQkFBQU4sQ0FBb0IxSyxHLG1EQUM5QixNQUFNdUssRUFBYXhuQixLQUFLK25CLHdCQUVjLFFBQWxDLEVBQUE5SyxFQUFjeUwsNEJBQW9CLGVBQUVULGVBQ3BDam9CLEtBQUsrbEIsU0FBV3lCLEVBQVdVLFNBQVMsQ0FDaENDLFlBQWEsV0FFWG5vQixLQUFLK2xCLFNBQVN2TyxPQUFPLElBQUl5RixFQUFjeUwscUJBQXFCVCxpQkFHOUIsUUFBcEMsRUFBQWhMLEVBQWMwTCw4QkFBc0IsZUFBRVYsZUFDdENqb0IsS0FBS2dtQixZQUFjd0IsRUFBV2Esb0JBQ3hCcm9CLEtBQUtnbUIsWUFBWXhPLE9BQU8sSUFBSXlGLEVBQWMwTCx1QkFBdUJWLGlCQUduQyxRQUFwQyxFQUFBaEwsRUFBYzJMLDhCQUFzQixlQUFFWCxlQUN0Q2pvQixLQUFLaW1CLFlBQWN1QixFQUFXaUIsWUFBWSxDQUN0Q04sWUFBYSxXQUVYbm9CLEtBQUtpbUIsWUFBWXpPLE9BQU8sSUFBSXlGLEVBQWMyTCx1QkFBdUJYLGUsR0FTdkUsbUJBQUF0QyxHQUNKLElBQUszbEIsS0FBS3dsQixxQkFDTixNQUFPLENBQUMsRUFHWixHQUFJcFQsRUFBdUJwUyxLQUFLd2xCLHNCQUF1QixDQUNuRCxNQUFNLHFCQUFFbFQsRUFBb0IsNkJBQUVDLEdBQzFCdlMsS0FBS3dsQixxQkFFVCxNQUFPLENBQ0hsVCx1QkFDQUMsK0IsQ0FJUixHQUFJQyxFQUFvQnhTLEtBQUt3bEIsc0JBQXVCLENBQ2hELE1BQU0sYUFBRTlTLEdBQWlCMVMsS0FBS3dsQixxQkFFOUIsTUFBTyxDQUNIOVMsZSxDQUlSLE1BQU8sQ0FBQyxDQUNaLENBRVEsMEJBQUFtVyxFQUEyQixVQUMvQkMsSUFLQSxNQUFPLENBQ0hDLFVBQVcvb0IsS0FBS2dwQixhQUFhRixHQUVyQyxDQU9jLGdCQUFBcEQsRyx5Q0FDVixNQUFNOEIsRUFBYXhuQixLQUFLK25CLHVCQUVsQm5ILEVBRFE1Z0IsS0FBSzJKLDBCQUEwQk0sV0FDaEIwUywyQkFFdkJzTSxFQUFlLENBQ2pCckksZUFBZ0IsQ0FDWmhULFFBQVNnVCxFQUFlaFQsUUFDeEJ1VSxhQUFjdkIsRUFBZS9TLFNBQzdCdVUsYUFBY3hCLEVBQWU5UyxTQUM3QnVVLFdBQVl6QixFQUFlelMsb0JBQzNCbVUsV0FBWTFCLEVBQWU3UyxLQUMzQkUsV0FBWTJTLEVBQWUzUyxXQUMzQkQsWUFBYTRTLEVBQWU1UyxjQUlwQyxJQUNRaE8sS0FBS21sQiw4QkFDQ3FDLEVBQVcwQixlQUVYMUIsRUFBVzBCLE9BQU9ELEUsQ0FFOUIsTUFBT3BTLEdBQ0wsTUFBTSxJQUFJbU4sR0FDTix3RCxDQUdaLEUsQ0FPYyx5QkFBQXlCLEcsaURBQ1YsTUFBTStCLEVBQWF4bkIsS0FBSytuQix1QkFDbEJvQixRQUF3QjNCLEVBQVd2ZCxXQUFXbWYsS0FBTXJVLEdBQVNBLEdBQzdEc1UsRUFBaUJycEIsS0FBS3NwQixnQkFBZ0JILEdBRTVDLElBQUlFLEVBQWVFLFFBTW5CLE1BRmtDLFFBQWxDLEVBQXNCLFFBQXRCLEVBQUF2cEIsS0FBS2lsQix5QkFBaUIsZUFBRTdPLGtCQUFVLGdCQUFHaVQsR0FFL0IsSUFBSTlFLEdBQXdCdmtCLEtBQUt3cEIsb0JBQW9CSCxFQUFlcmdCLFEsR0FHdEUsZUFBQXNnQixFQUFnQixPQUNwQnBNLElBRUEsTUFBTXVNLEVBQWdCLE9BQUgsVUFBUXZNLFVBRXBCdU0sRUFBY0MsY0FFckIsTUFBTUMsRUFBYWxyQixPQUFPcUcsS0FBSzJrQixHQWlCL0IsTUFBTyxDQUFFRixRQWJPSSxFQUFXQyxNQUFPOXFCLElBQU8sTUFBQyxPQUFrQixRQUFsQixFQUFBMnFCLEVBQWMzcUIsVUFBSSxlQUFFeXFCLFVBYTVDdmdCLE9BWEgyZ0IsRUFBVy9HLE9BQU8sQ0FBQ2lILEVBQWMvcUIsSyxNQUM1QyxNQUFNaXFCLEVBQVkvb0IsS0FBS2dwQixhQUFhbHFCLEdBRXBDLE9BQU8sT0FBUCx3QkFDTytxQixHQUFZLENBQ2YsQ0FBQ2QsSUFBOEIsUUFBbEIsRUFBQVUsRUFBYzNxQixVQUFJLGVBQUV5cUIsY0FDM0Iza0IsRUFDQSxDQUFDNUUsS0FBSzhwQiwyQkFBMkJmLE9BRTVDLENBQUMsR0FHUixDQUVRLDBCQUFBZSxDQUEyQmYsR0FDL0IsT0FBUUEsR0FDSixLQUFLLEdBQWdCZ0IsU0FDckIsS0FBSyxHQUFnQmpHLHFCQUNqQixNQUFPLENBQ0hpRixZQUNBcHBCLFFBQVMsb0JBQ1RHLEtBQU0scUJBR2QsS0FBSyxHQUFnQjJqQixXQUNyQixLQUFLLEdBQWdCSSx1QkFDakIsTUFBTyxDQUNIa0YsWUFDQXBwQixRQUFTLHNCQUNURyxLQUFNLHVCQUdkLEtBQUssR0FBZ0I2akIsV0FDckIsS0FBSyxHQUFnQkksdUJBQ2pCLE1BQU8sQ0FDSGdGLFlBQ0FwcEIsUUFBUyxzQkFDVEcsS0FBTSx1QkFHZCxRQUNJLE1BQU8sQ0FDSGlwQixZQUNBcHBCLFFBQVMsZ0JBQ1RHLEtBQU0sV0FHdEIsQ0FFUSxtQkFBQTBwQixDQUNKUSxFQUFvRCxDQUFDLEdBRXJELE1BQU1oaEIsRUFBeUMsQ0FBQyxFQWNoRCxPQWI2QnZLLE9BQU9xRyxLQUFLa2xCLEdBSXBCamxCLFFBQVNqRyxJLFFBQzFCa0ssRUFBT2xLLEdBQU8sQ0FDVixDQUNJYSxTQUFtQyxRQUExQixFQUFxQixRQUFyQixFQUFBcXFCLEVBQWlCbHJCLFVBQUksZUFBRyxVQUFFLGVBQUVhLFVBQVcsR0FDaERHLEtBQU1oQixNQUtYa0ssQ0FDWCxDQU9RLFlBQUFnZ0IsQ0FBYWxwQixHQUNqQixPQUFRQSxHQUNKLElBQUssT0FDRCxPQUFPLEdBQWdCNGpCLFNBRTNCLElBQUssa0JBQ0wsSUFBSyxTQUNELE9BQU8xakIsS0FBS2tsQixpQkFDTixHQUFnQnpCLFdBQ2hCLEdBQWdCSSx1QkFFMUIsSUFBSyxrQkFDTCxJQUFLLFNBQ0QsT0FBTzdqQixLQUFLa2xCLGlCQUNOLEdBQWdCdkIsV0FDaEIsR0FBZ0JJLHVCQUUxQixJQUFLLGVBQ0wsSUFBSyxNQUNELE9BQU8vakIsS0FBS2tsQixpQkFDTixHQUFnQjZFLFNBQ2hCLEdBQWdCakcscUJBRTFCLFFBQ0ksTUFBTSxJQUFJcmtCLE1BQU0seUJBRTVCLENBT1Esb0JBQUFzb0IsR0FDSixJQUFLL25CLEtBQUt3bkIsV0FDTixNQUFNLElBQUl0RCxHQUFvQkQsR0FBd0JHLHVCQUcxRCxPQUFPcGtCLEtBQUt3bkIsVUFDaEIsQ0FFUSxjQUFBZCxDQUNKaGhCLEcsVUFFQSxNQUFNdWtCLEVBQWUsQ0FDakIsYUFBNEIsUUFBZixFQUFBdmtCLGFBQU0sRUFBTkEsRUFBUXdrQixlQUFPLGVBQUVDLFdBQVksT0FDMUMsZUFDbUIsUUFBZixFQUFBemtCLGFBQU0sRUFBTkEsRUFBUXdrQixlQUFPLGVBQUVFLGFBQWMsMkNBQ25DLGVBQThCLFFBQWYsRUFBQTFrQixhQUFNLEVBQU5BLEVBQVF3a0IsZUFBTyxlQUFFRyxhQUFjLE1BQzlDQyxRQUFTLE9BQ1RDLFFBQVMsWUFHUG5MLEVBQWdCLE9BQUgsd0JBQVE2SyxHQUFZLENBQUUza0IsTUFBTyxZQUdoRCxNQUFPLENBQ0hrbEIsTUFBT3BMLEVBQ1AsV0FKZ0IsT0FBSCx3QkFBUTZLLEdBQVksQ0FBRTNrQixNQUFPLFFBSzFDLFNBQVU4WixFQUNWLFNBQVVBLEVBRWxCLENBRVEsc0JBQUFzSSxDQUNKeEssR0FFQXplLE9BQU9nc0IsT0FBT3ZOLEdBQVUsQ0FBQyxHQUFHblksUUFBU3FELElBQ2pDLE1BQU1KLEVBQVUzQixTQUFTQyxlQUFlLElBQUc4QixhQUFFLEVBQUZBLEVBQUk2ZixjQUFlLE1BRTFEamdCLElBQ0FBLEVBQVF6QixNQUFNZ2tCLFFBQVUsTUFDeEJ2aUIsRUFBUXpCLE1BQU1ta0IsVUFBWSxPQUMxQjFpQixFQUFRekIsTUFBTW1CLE9BQVMsT0FDdkJNLEVBQVF6QixNQUFNb2tCLFdBQWEsY0FDM0IzaUIsRUFBUXpCLE1BQU1xa0IsYUFBZSxPQUM3QjVpQixFQUFRekIsTUFBTXNrQixXQUFhLFNBR3ZDLENBRVEsa0JBQUF6RixHQUNKLE9BQUlwbEIsS0FBS2lsQixtQkFDRXhtQixPQUFPZ3NCLE9BQU96cUIsS0FBS2lsQixrQkFBa0IvSCxRQUFRNkYsS0FDL0MvZCxRQUFvQkosSUFBVkksRUFLdkIsQ0FPUSxlQUFBa2lCLENBQ0paLEVBQ0FXLEcsTUFFdUIsUUFBdkIsRUFBQVgsYUFBVyxFQUFYQSxFQUFhbFEsa0JBQVUsZ0JBQUdwVyxLQUFLc3BCLGdCQUFnQnJDLEdBQ25ELENBRVEsY0FBQUcsQ0FDSmQsRUFDQVcsRyxNQUVvQixRQUFwQixFQUFBWCxhQUFXLEVBQVhBLEVBQWFhLGVBQU8sZ0JBQUdubkIsS0FBSzZvQiwyQkFBMkI1QixHQUMzRCxDQUVRLGFBQUFLLENBQ0poQixFQUNBVyxHLE1BRW1CLFFBQW5CLEVBQUFYLGFBQVcsRUFBWEEsRUFBYWUsY0FBTSxnQkFBR3JuQixLQUFLNm9CLDJCQUEyQjVCLEdBQzFELENBRVEsb0JBQUFNLENBQ0pqQixFQUNBVyxHLE1BRW9CLFFBQXBCLEVBQUFYLGFBQVcsRUFBWEEsRUFBYXdFLGVBQU8sZ0JBQUc5cUIsS0FBSzZvQiwyQkFBMkI1QixHQUMzRCxDQVFRLDhCQUFBM0IsQ0FBK0J4YixHLFFBQ25DLE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3hJLEVBQWdCdUksRUFBTUksd0JBQWtETixHQUN4RWloQixFQUEwQi9nQixFQUFNZ2hCLDZCQUNoQ0MsR0N2c0JWQyxFRHdzQlFILEtDanNCSix3QkFBeUJHLEdBQVksY0FBZUEsR0FBWSxnQkFBaUJBLEdEbXNCM0VILEVBQ0EsQ0FBQyxFQzVzQkEsSUFDWEcsRUQ2c0JJLE9BQ3FDLFFBQWpDLEVBQUF6cEIsYUFBYSxFQUFiQSxFQUFlK0IsMEJBQWtCLGVBQUUybkIsZ0NBQ0YsUUFBakMsRUFBQTFwQixhQUFhLEVBQWJBLEVBQWUrQiwwQkFBa0IsZUFBRTRuQix1Q0FDbENILGFBQXFDLEVBQXJDQSxFQUF1QzFLLG9CQUVoRCxDQUdjLCtCQUFBZ0YsQ0FBZ0N6YixHLHlDQUMxQyxJQUNJLE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3FCLEVBQU90QixFQUFNRSxpQkFDYnpJLEVBQWdCdUksRUFBTUksd0JBQWtETixJQUN4RSxtQkFBRXRHLEdBQXVCL0IsRUFFL0IsS0FBSytCLGFBQWtCLEVBQWxCQSxFQUFvQjZuQixvQkFDckIsT0FHSixNQUFNQyxRQUEwQnRyQixLQUFLb2Esc0JBQXNCNVkscUJBQ3ZEQyxFQUNBNkosRUFBS3ZILFNBQVNvRyxLQUNkbUIsRUFBS2xELFVBR0hwSSxLQUFLMmtCLG9CQUFvQjVGLHlCQUMzQnVNLEtBQ0U5bkIsYUFBa0IsRUFBbEJBLEVBQW9CVywyQixDQUU1QixNQUFPMFMsRyxDQUliLEUsRUV4dUJKLE1BVUEsR0FBZXZZLEVBUlZxTCxHQUNELElBQUk4YSxHQUNBOWEsRUFDQSxHQUErQkEsR0FDL0JpUSxLQUNBLE1BRzBFLENBQzlFLENBQUV4UixHQUFJLCtCLHVTQ09LLE1BQU1takIsR0FPakIsV0FBQTdyQixDQUNZaUssRUFDQXVKLEVBQ0FFLEVBQ0FpSCxFQWRTLElBZVRDLEVBZFMsS0FVVCxLQUFBM1EsMEJBQUFBLEVBQ0EsS0FBQXVKLGlDQUFBQSxFQUNBLEtBQUFFLGlCQUFBQSxFQUNBLEtBQUFpSCxnQkFBQUEsRUFDQSxLQUFBQyx1QkFBQUEsRUFSSixLQUFBQyxhQUFlLEVBQ2YsS0FBQUMsWUFBY0Msd0NBUW5CLENBRUcsVUFBQXBILENBQ0Z4USxHLHlDQUVBLE1BQU0sVUFBRTBKLEVBQVMsU0FBRXpDLEVBQVEsc0JBQUUwaEIsR0FBMEIzb0IsRUFFdkQsSUFBS2lILEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLeEYsRUFDRCxNQUFNLElBQUl3RixFQUNOLHNGQUlSLElBQUt5WixFQUNELE1BQU0sSUFBSXpaLEVBQ04sa0dBSVIsTUFBTSxtQkFBRTBaLEVBQWtCLFVBQUU1bEIsRUFBUyxtQkFBRTZsQixHQUF1QkYsRUFFOUQsSUFBSzNsQixFQUNELE1BQU0sSUFBSWtNLEVBQ04sc0ZBSVIsSUFBSzBaLEVBQ0QsTUFBTSxJQUFJMVosRUFDTiwrRkFJUixJQUFLMlosRUFDRCxNQUFNLElBQUkzWixFQUNOLCtGQUlSL1IsS0FBSzhULDBCQUE0QjRYLEVBRWpDLE1BQ01qcUIsRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBQ2pCRyx3QkFDeEJOLEVBQ0F5QyxJQUVFLFdBQUU1SSxHQUFlbEMsRUFBYytCLG9CQUFzQixDQUFDLEVBRTVELElBQUtHLEVBQ0QsTUFBTSxJQUFJb08sRUFDTiw2RUFJUi9SLEtBQUt3ckIsc0JBQXdCQSxRQUV2QnhyQixLQUFLa1QsaUNBQWlDblIsY0FBYytILEdBRTFEOUosS0FBSzJyQixxQkFBcUJob0IsRUFBWW1HLEVBQVV5QyxHQUVoRHZNLEtBQUs0ckIscUJBRUw1ckIsS0FBSzZyQixnQkFBZ0JKLEVBQW9CNWxCLEVBQzdDLEUsQ0FFTSxPQUFBcU8sQ0FBUUMsRUFBMkJ0UixHLHlDQUNyQyxNQUFNLFFBQUV1UixHQUFzQkQsRUFBVkUsRSx5VUFBSyxDQUFLRixFQUF4QixjQUVBLGdCQUFFd0QsR0FBb0IzWCxLQUFLd3JCLHVCQUF5QixDQUFDLEVBRTNELElBQUtwWCxFQUNELE1BQU0sSUFBSXBDLEVBQTRCLENBQUMsWUFHM0MsSUFBSzJGLEdBQThDLG1CQUFwQkEsRUFDM0IsTUFBTSxJQUFJNUYsRUFDTiw0RkFJUi9SLEtBQUttWCx3QkFBdUIsR0FFNUIsSUFDSSxNQUFNak0sUUFBZ0JsTCxLQUFLa1QsaUNBQWlDcEksWUFDeEQsMkNBQ0EsQ0FBRWdoQixXQUFZOXJCLEtBQUsrckIsUUFHakIsaUJBQUVDLEVBQWdCLG1CQUFFQyxFQUFrQix3QkFBRUMsR0FDMUN2VSxJQUVFbkwsRUFBYyxDQUNoQkMsaUJBQWtCLENBQ2RDLHlCQUEwQixLQUMxQkMsaUNBQWtDLEtBQ2xDQyxZQUFhLEtBQ2JDLFVBQVd1SCxFQUFRdEssU0FDbkJxaUIsU0FBVSxDQUNOQyxXQUFZcHNCLEtBQUtxc0IsY0FBY0wsR0FDL0JyZSxNQUFPLENBQ0hzQixnQkFBaUJnZCxFQUNqQnBkLGFBQWNxZCxFQUF3QjNjLE1BQU0sS0FBSyxLQUd6RHpDLGVBQWdCLENBQ1paLFNBQVVoQixLQVd0QixhQU5NbEwsS0FBSzJKLDBCQUEwQmdMLFlBQVlOLEVBQU94UixTQUNsRDdDLEtBQUsySiwwQkFBMEIyQyxjQUFjLENBQy9DeEMsU0FBVXNLLEVBQVF0SyxTQUNsQjBDLHNCQUdTLElBQUl5SSxRQUFRLENBQUNVLEVBQVNOLEtBQy9CclYsS0FBS29iLDJCQUNEaEgsRUFBUXRLLFNBQ1I2TCxFQUNBTixFQUNBakIsRUFBUTdILFksQ0FHbEIsTUFBTzFCLEdBR0wsT0FGQTdLLEtBQUt3VixZQUFZM0ssR0FFVixJQUFJb0ssUUFBUSxDQUFDRyxFQUFVQyxJQUFXQSxJLENBRWpELEUsQ0FFQSxRQUFBSSxHQUNJLE9BQU9SLFFBQVFJLE9BQU8sSUFBSWxELEVBQzlCLENBRUEsWUFBQXVELEdBQ0ksTUFBTSxtQkFBRStWLEdBQXVCenJCLEtBQUt3ckIsdUJBQXlCLENBQUMsRUFDeERjLEVBQWlCam1CLFNBQVNrbUIsaUJBQWlCLDhCQUE4QixHQUN6RUMsRUFBaUJubUIsU0FBU2ttQixpQkFBaUIsOEJBQThCLEdBTy9FLEdBTEF2c0IsS0FBS2ljLCtCQUVMcVEsRUFBZTFOLFNBQ2Y0TixFQUFlNU4sU0FFWDZNLEVBQW9CLENBQ3BCLE1BQU1nQixFQUE0QnBtQixTQUFTQyxlQUFlbWxCLEdBRTFEZ0IsU0FBQUEsRUFBMkI3TixRLENBRy9CLE9BQU8zSixRQUFRVSxTQUNuQixDQUVRLGFBQUEwVyxDQUFjSyxHQUNsQixNQUFNQyxFQUFnQjNzQixLQUFLNHNCLFdBQVdGLEVBQUt6TSxXQUNyQzRNLEVBQWlCN3NCLEtBQUs0c0IsV0FBV0YsRUFBS0ksV0FBYSxHQUV6RCxNQUFPLEdBQUdKLEVBQUtLLGlCQUFpQkYsS0FBa0JGLEdBQ3RELENBRVEsVUFBQUMsQ0FBV0YsR0FDZixNQUFPLEdBQUdBLEVBQU8sR0FBSyxFQUFJLEtBQUtBLEdBQ25DLENBRVEsZUFBQWIsQ0FBZ0JtQixFQUFxQ25uQixHQUN6RCxNQUFNb25CLEVBQXVCRCxFQUN2QkUsRUFBb0JybkIsRUFBVTBKLE1BQU0sS0FBSyxHQUN6QzRkLEVBQWtCOW1CLFNBQVNDLGVBQWU0bUIsR0FDMUNFLEVBQXdCRCxhQUFlLEVBQWZBLEVBQWlCRSxXQUN6QzVCLEVBQXFCcGxCLFNBQVNTLGNBQWMsT0FFbEQya0IsRUFBbUJsbEIsTUFBTXFrQixhQUFlLE9BQ3hDYSxFQUFtQjZCLGFBQWEsS0FBTUwsR0FDdENHLFNBQUFBLEVBQXVCRyxRQUFROUIsR0FFL0IsTUFBTXBoQixFQUFZckssS0FBS2tULGlDQUFpQzNJLHNCQUNsRGlqQixFQUFnQm5qQixFQUFVb2pCLE1BQU0sQ0FDbENoWCxjQUFlcE0sRUFBVW9qQixNQUFNL1csUUFBUWdYLG1CQUkzQyxJQUZrQ3JuQixTQUFTQyxlQUFlMm1CLEdBS3RELE1BQU0sSUFBSWxiLEVBQ04sMkZBSEp5YixFQUFjaFcsT0FBTyxJQUFJeVYsSUFNakMsQ0FFUSxXQUFBelgsQ0FBWTNLLEdBQ2hCLE1BQU0sUUFBRXlKLEdBQVl0VSxLQUFLd3JCLHVCQUF5QixDQUFDLEVBRW5EeHJCLEtBQUtzYix3QkFDTHRiLEtBQUttWCx3QkFBdUIsR0FFeEI3QyxHQUE4QixtQkFBWkEsR0FDbEJBLEVBQVF6SixFQUVoQixDQUVRLG9CQUFBOGdCLENBQXFCaG9CLEVBQW9CbUcsRUFBa0J5QyxHQUMvRCxNQUNNOUssRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBQ2pCRyx3QkFBd0JOLEVBQVV5QyxJQUN4RCxTQUFFb2hCLEdBQWFsc0IsRUFBY0ksT0FDN0IrckIsRUFBZ0J2bkIsU0FBU1MsY0FBYyxVQUU3QzhtQixFQUFjTixhQUFhLE9BQVEsb0JBQ25DTSxFQUFjTixhQUFhLFFBQVMsaURBQ3BDTSxFQUFjTixhQUFhLFVBQVcsa0JBQ3RDdHRCLEtBQUsrckIsS0FBTy9yQixLQUFLNnRCLGVBRWpCLE1BQU1yQixFQUFpQixDQUNuQnNCLEVBQUc5dEIsS0FBSytyQixLQUNSZ0MsRUFBRyxHQUFHcHFCLGtCQUNOcXFCLFFBQVNMLEdBR2JDLEVBQWM1USxVQUFZaVIsS0FBS0MsVUFBVTFCLEdBQ3pDbm1CLFNBQVNzQyxLQUFLMUMsWUFBWTJuQixFQUM5QixDQUVRLFlBQUFDLEdBQ0osSUFBSTlCLEVBQU8sR0FHWCxJQUFLLElBQUlvQyxFQUFJLEVBQUdBLEVBQUksR0FBSUEsR0FBSyxFQUd6QnBDLEdBTGUsaUVBR0txQyxLQUFLQyxNQUFzQkMsR0FBaEJGLEtBQUtHLFdBS3hDLE9BQU94QyxDQUNYLENBRVEsa0JBQUFILEdBQ0osTUFBTTRDLEVBQVNub0IsU0FBU1MsY0FBYyxVQUV0QzBuQixFQUFPbEIsYUFBYSxVQUFXLGtCQUMvQmtCLEVBQU9DLElBQU0sa0NBQ2Jwb0IsU0FBU3NDLEtBQUsxQyxZQUFZdW9CLEVBQzlCLENBRWMsb0JBQUF0UyxDQUNWclosRywrQ0FFTTdDLEtBQUswVixxQkFDTDFWLEtBQUtxVCxXQUFXeFEsRUFDMUIsRSxDQVFjLDBCQUFBdVksQ0FDVnRSLEVBQ0F5UixFQUNBQyxFQUNBalAsRywrQ0FFTSxJQUFJMEksUUFBYyxDQUFDVSxFQUFTTixLQUM5QixNQUFNb0csRUFBVUMsV0FBVy9GLEVBQVMzVixLQUFLcWEsaUJBRXpDcmEsS0FBS3dhLFlBQWMsS0FDZm1CLGFBQWFGLEdBQ2J6YixLQUFLbVgsd0JBQXVCLEdBRXJCOUIsT0FJZixJQUNJclYsS0FBS3VhLGNBQWdCdmEsS0FBS3FhLGdCQUUxQixNQUFNdUIsUUFBb0I1YixLQUFLa1QsaUNBQWlDdEgsZUFDNUQsbUNBQ0EsQ0FDSThRLE9BQVEsQ0FDSmdTLGFBQWEsS0FLbkI3UyxFQUFrQkQsSUFBZ0JwUyxFQUFrQm1sQixZQUNwRDVTLEVBQWlCSCxJQUFnQnBTLEVBQWtCd1MsYUFFekQsR0FBSUgsRUFHQSxPQUZBN2IsS0FBS2ljLCtCQUVFVixJQUdYLEdBQUlRLEVBQ0EsT0FBT1AsSUFHWCxJQUFLSyxHQUFtQjdiLEtBQUt1YSxhQUFldmEsS0FBS3NhLHVCQUM3QyxhQUFhdGEsS0FBS29iLDJCQUNkdFIsRUFDQXlSLEVBQ0FDLEVBQ0FqUCxTQUlGdk0sS0FBS2tjLHFCQUFxQixDQUM1QnBTLFdBQ0F5QyxZQUNBaWYsc0JBQXVCeHJCLEtBQUt3ckIsd0JBR2hDeHJCLEtBQUt3VixZQUFZLElBQUkwRSxHLENBQ3ZCLE1BQU9yUCxHQUNMN0ssS0FBS3dWLFlBQVkzSyxHQUNqQjJRLEcsQ0FFUixFLENBRVEsNEJBQUFTLEdBQ0pqYyxLQUFLd2EsY0FDTHhhLEtBQUt1YSxhQUFlLENBQ3hCLENBRVEscUJBQUFlLEdBQ0p0YixLQUFLaWMsOEJBQ1QsQ0FPUSxzQkFBQTlFLENBQXVCYyxHQUN2QkEsR0FBYWpZLEtBQUs4VCwwQkFDbEI5VCxLQUFLb1QsaUJBQWlCbE4sS0FBS2xHLEtBQUs4VCwyQkFFaEM5VCxLQUFLb1QsaUJBQWlCMU0sTUFFOUIsRUMzWEosTUFXQSxHQUFlcEksRUFUVnFMLEdBQ0QsSUFBSTRoQixHQUNBNWhCLEVBQ0EsRUFBdUNBLEdBQ3ZDLElBQUlsRSxFQUFpQixDQUNqQkUsZ0JBQWlCLE9BQUYsd0JBQU9tTSxHQUF3QixDQUFFMUssU0FBVSxhQUlRLENBQzFFLENBQUVpVyxRQUFTLG1DQUFvQ2pWLEdBQUksYUNuQnZELFNBQVN3bUIsR0FBcUJDLEdBQzFCLE1BQThCLGlCQUFoQkEsQ0FDbEIsQ0FFZSxTQUFTQyxHQUNwQkMsRUFDQUMsR0FFQSxHQUFLQSxHQUFhRCxFQUlsQixPQStESixTQUErQnJwQixHLFFBQzNCLE1BQU11cEIsRUFBNkMsQ0FBQyxFQUU5QzVQLEVBQU94UCw4Q0FBQUEsQ0FBT25LLEVBQU8yWixLQUFNdVAsSUFDM0JwRSxFQUFRM2EsOENBQUFBLENBQU9uSyxFQUFPOGtCLE1BQU9vRSxJQUM3Qk0sRUFBU3JmLDhDQUFBQSxDQUFPbkssRUFBT3dwQixPQUFRTixJQUMvQk8sRUFBV3RmLDhDQUFBQSxDQUFrQixRQUFYLEVBQUFuSyxFQUFPcU4sWUFBSSxlQUFFcEssS0FBTWltQixJQUNyQ1EsRUFBY3ZmLDhDQUFBQSxDQUFrQixRQUFYLEVBQUFuSyxFQUFPcU4sWUFBSSxlQUFFc2MsUUFBU1QsSUFDM0NVLEVBQVc1cEIsRUFBTzRwQixTQThCeEIsT0E1Qkk3d0IsT0FBT3FHLEtBQUt1YSxHQUFNMWEsU0FDbEJzcUIsRUFBZTVQLEtBQU9BLEdBR3RCNWdCLE9BQU9xRyxLQUFLMGxCLEdBQU83bEIsU0FDbkJzcUIsRUFBZXpFLE1BQVFBLEdBR3ZCL3JCLE9BQU9xRyxLQUFLb3FCLEdBQVF2cUIsU0FDcEJzcUIsRUFBZUMsT0FBU0EsR0FHeEJ6d0IsT0FBT3FHLEtBQUtxcUIsR0FBVXhxQixTQUN0QnNxQixFQUFlbGMsS0FBTyxDQUFDLEVBQ3ZCa2MsRUFBZWxjLEtBQUtwSyxLQUFPd21CLEdBRzNCMXdCLE9BQU9xRyxLQUFLc3FCLEdBQWF6cUIsU0FDekJzcUIsRUFBZWxjLEtBQU8sT0FBSCxVQUNaa2MsRUFBZWxjLE1BRXRCa2MsRUFBZWxjLEtBQUtzYyxRQUFVRCxHQUc5QkUsSUFDQUwsRUFBZUssU0FBV0EsR0FHdkJMLENBQ1gsQ0F0R1dNLENBR1gsU0FDSVIsRUFDQUMsRyxnREFFQSxNQUFPLENBQ0gzUCxLQUFNLENBQ0ZDLHdCQUNJeVAsYUFBYSxFQUFiQSxFQUFlUyx1Q0FDRCxRQUFkLEVBQUFSLGFBQVEsRUFBUkEsRUFBVTNQLFlBQUksZUFBRUMsd0JBQ3BCbVEsWUFBWVYsYUFBYSxFQUFiQSxFQUFlVyxrQ0FBZ0QsUUFBZCxFQUFBVixhQUFRLEVBQVJBLEVBQVUzUCxZQUFJLGVBQUVvUSxZQUM3RXJGLFlBQVkyRSxhQUFhLEVBQWJBLEVBQWVZLGtDQUFnRCxRQUFkLEVBQUFYLGFBQVEsRUFBUkEsRUFBVTNQLFlBQUksZUFBRStLLFlBQzdFd0YsY0FDSWIsYUFBYSxFQUFiQSxFQUFlYyxnQ0FBOEMsUUFBZCxFQUFBYixhQUFRLEVBQVJBLEVBQVUzUCxZQUFJLGVBQUV1USxjQUNuRXJGLFNBQVN3RSxhQUFhLEVBQWJBLEVBQWVlLCtCQUE2QyxRQUFkLEVBQUFkLGFBQVEsRUFBUkEsRUFBVTNQLFlBQUksZUFBRWtMLFNBQ3ZFd0YsY0FDSWhCLGFBQWEsRUFBYkEsRUFBZWlCLG9DQUFrRCxRQUFkLEVBQUFoQixhQUFRLEVBQVJBLEVBQVUzUCxZQUFJLGVBQUUwUSxlQUUzRXZGLE1BQU8sQ0FDSC9pQixjQUNJc25CLGFBQWEsRUFBYkEsRUFBZWtCLHFDQUFvRCxRQUFmLEVBQUFqQixhQUFRLEVBQVJBLEVBQVV4RSxhQUFLLGVBQUUvaUIsY0FDekVFLGFBQ0lvbkIsYUFBYSxFQUFiQSxFQUFlbUIsb0NBQW1ELFFBQWYsRUFBQWxCLGFBQVEsRUFBUkEsRUFBVXhFLGFBQUssZUFBRTdpQixhQUN4RXdvQixrQkFDSXBCLGFBQWEsRUFBYkEsRUFBZXFCLHdDQUNBLFFBQWYsRUFBQXBCLGFBQVEsRUFBUkEsRUFBVXhFLGFBQUssZUFBRTJGLGtCQUNyQjVxQixpQkFDSXdwQixhQUFhLEVBQWJBLEVBQWVzQix3Q0FDQSxRQUFmLEVBQUFyQixhQUFRLEVBQVJBLEVBQVV4RSxhQUFLLGVBQUVqbEIsaUJBQ3JCK3FCLGFBQ0l2QixhQUFhLEVBQWJBLEVBQWV3QixvQ0FBbUQsUUFBZixFQUFBdkIsYUFBUSxFQUFSQSxFQUFVeEUsYUFBSyxlQUFFOEYsYUFDeEVFLGVBQ0l6QixhQUFhLEVBQWJBLEVBQWUwQixzQ0FBcUQsUUFBZixFQUFBekIsYUFBUSxFQUFSQSxFQUFVeEUsYUFBSyxlQUFFZ0csZ0JBRTlFdEIsT0FBUSxDQUNKd0IsY0FDSTNCLGFBQWEsRUFBYkEsRUFBZTRCLHNDQUFzRCxRQUFoQixFQUFBM0IsYUFBUSxFQUFSQSxFQUFVRSxjQUFNLGVBQUV3QixjQUMzRUUsZ0JBQ0k3QixhQUFhLEVBQWJBLEVBQWU4Qix3Q0FDQyxRQUFoQixFQUFBN0IsYUFBUSxFQUFSQSxFQUFVRSxjQUFNLGVBQUUwQixpQkFFMUI3ZCxLQUFNLENBQ0ZwSyxLQUFNLENBQ0ZyRCxPQUFPeXBCLGFBQWEsRUFBYkEsRUFBZStCLGlDQUFxRCxRQUFwQixFQUFjLFFBQWQsRUFBQTlCLGFBQVEsRUFBUkEsRUFBVWpjLFlBQUksZUFBRXBLLFlBQUksZUFBRXJELE9BQzdFNmtCLFVBQ0k0RSxhQUFhLEVBQWJBLEVBQWVnQyxvQ0FDSyxRQUFwQixFQUFjLFFBQWQsRUFBQS9CLGFBQVEsRUFBUkEsRUFBVWpjLFlBQUksZUFBRXBLLFlBQUksZUFBRXdoQixXQUU5QmtGLFFBQVMsQ0FDTC9wQixPQUNJeXBCLGFBQWEsRUFBYkEsRUFBZWlDLG9DQUNRLFFBQXZCLEVBQWMsUUFBZCxFQUFBaEMsYUFBUSxFQUFSQSxFQUFVamMsWUFBSSxlQUFFc2MsZUFBTyxlQUFFL3BCLE9BQzdCNmtCLFVBQ0k0RSxhQUFhLEVBQWJBLEVBQWVrQyx1Q0FDUSxRQUF2QixFQUFjLFFBQWQsRUFBQWpDLGFBQVEsRUFBUkEsRUFBVWpjLFlBQUksZUFBRXNjLGVBQU8sZUFBRWxGLFlBR3JDbUYsVUFBVVAsYUFBYSxFQUFiQSxFQUFlbUMsNEJBQTRCbEMsYUFBUSxFQUFSQSxFQUFVTSxVQUV2RSxDQTdEaUM2QixDQUFvQnBDLEVBQWVDLEdBQ3BFLENDWGUsU0FBU29DLEdBQ3BCbEcsR0FFQSxRQUFLQSxJQUtELHdCQUF5QkEsR0FBWSxjQUFlQSxHQUFZLGdCQUFpQkEsRUFFekYsQyx1U0N5QmUsTUFBTW1HLEdBUWpCLFdBQUEzeEIsQ0FDWWlLLEVBQ0FDLEVBQ0F3USxFQUNBdUssR0FIQSxLQUFBaGIsMEJBQUFBLEVBQ0EsS0FBQUMsNEJBQUFBLEVBQ0EsS0FBQXdRLHNCQUFBQSxFQUNBLEtBQUF1SyxvQkFBQUEsQ0FDVCxDQU9HLFVBQUF0UixDQUNGeFEsRyxpREFFQSxNQUFNLFNBQUVpSCxFQUFRLHVCQUFFd25CLEdBQTJCenVCLEVBTTdDLEdBSkE3QyxLQUFLOEosU0FBV0EsRUFFaEI5SixLQUFLc3hCLHVCQUF5QkEsR0FFekJ4bkIsRUFDRCxNQUFNLElBQUlpSSxFQUNOLHFGQUlSLElBQUt1ZixFQUNELE1BQU0sSUFBSXZmLEVBQ04sbUdBSVIsSUFBS3VmLEVBQXVCdmQsUUFBbUQsbUJBQWxDdWQsRUFBdUJ2ZCxPQUNoRSxNQUFNLElBQUloQyxFQUNOLGtJQUlSLElBQ0t1ZixFQUF1QnRLLFVBQ21CLG1CQUFwQ3NLLEVBQXVCdEssU0FFOUIsTUFBTSxJQUFJalYsRUFDTiwwSUFJRi9SLEtBQUsySiwwQkFBMEI0SixrQkFBa0J6SixHQUV2RCxNQUFNRSxFQUFRaEssS0FBSzJKLDBCQUEwQk0sV0FDdkNxQixFQUFPdEIsRUFBTUUsaUJBQ2J6SSxFQUFnQnVJLEVBQU1JLHdCQUFrRE4sSUFDeEUsMEJBQUUzRixFQUF5Qix5QkFBRW90QixHQUMvQjl2QixFQUFjK0Isb0JBQXNCLENBQUMsRUFFekN4RCxLQUFLd3hCLDBCQUMrQixRQUFoQyxFQUFBL3ZCLEVBQWMrQiwwQkFBa0IsZUFBRWd1QiwwQkFFdEN4eEIsS0FBSzRCLHdCQUEwQjVCLEtBQUtvYSxzQkFBc0I1WSxxQkFDdERDLEVBQ0E2SixFQUFLdkgsU0FBU29HLEtBQ2RtQixFQUFLbEQsSUFHVCxNQUlNNm1CLEVBQWlCSCxHQUpPeUMsRUFDUyxRQUFqQyxFQUFBOXZCLGFBQWEsRUFBYkEsRUFBZStCLDBCQUFrQixlQUFFeXJCLGVBQ25DLENBQUMsRUFJSHFDLGFBQXNCLEVBQXRCQSxFQUF3QjVyQixjQUd0QjFGLEtBQUsya0Isb0JBQW9CNUYseUJBQzNCL2UsS0FBSzRCLG9CQUNIdUMsRUFDRjhxQixHQUdBanZCLEtBQUt5eEIsc0NBQ0N6eEIsS0FBSzB4QixtQ0FBbUM1bkIsVUFHNUM5SixLQUFLMnhCLG1DQUVYTCxFQUF1QnZkLE9BQVFsTyxHQUMzQjdGLEtBQUs0eEIsNkJBQTZCL3JCLElBRXRDeXJCLEVBQXVCdEssU0FBUyxJQUFNaG5CLEtBQUs2eEIsbUNBQW1DL25CLEcsR0FHNUUsT0FBQW9LLENBQVE0ZCxFQUFnQ2p2QixHLHlDQUMxQyxNQUFNLFFBQUV1UixHQUFzQjBkLEVBQVZ6ZCxFLHlVQUFLLENBQUt5ZCxFQUF4QixhQUVOLElBQUsxZCxFQUNELE1BQU0sSUFBSXBDLEVBQTRCLENBQUMsWUFHM0MsTUFBTSxZQUFFeEYsRUFBVyxTQUFFMUMsR0FBYXNLLEVBRTVCMmQsRUFBZ0J2bEIsR0FBZWdHLEVBQW9CaEcsR0FFekQsVUFDVXhNLEtBQUsySiwwQkFBMEJnTCxZQUFZTixFQUFPeFIsR0FFeEQsTUFBTTJSLEVBQWlCdWQsUUFDWC94QixLQUFLeVUsdUNBQXVDM0ssRUFBVTBDLFNBQ3REeE0sS0FBSzBVLHNCQUFzQjVLLEVBQVUwQyxTQUUzQ3hNLEtBQUsySiwwQkFBMEIyQyxjQUNqQ2tJLEdBR0p4VSxLQUFLMmtCLG9CQUFvQnhFLHdCLENBQzNCLE1BQU90VixHQUNMLEdDM0pHLFNBQ1hBLEdBRUEsTUFDcUIsaUJBQVZBLEdBQ0csT0FBVkEsR0FDQSxZQUFhQSxHQUNiLGFBQWNBLEdBQ2QsU0FBV0EsRUFBcUM5QixVQUNoRCxTQUFXOEIsRUFBcUM5QixTQUFTSixJQUVqRSxDRGlKZ0JxcEIsQ0FBNkJubkIsSUFDQSxvQkFBN0JBLEVBQU05QixTQUFTSixLQUFLOUksS0FDdEIsQ0FDRSxNQUFNb3lCLEVBQXNCLENBQ3hCQyxlQUFnQix3Q0FLcEIsT0FGQWx5QixLQUFLd1YsWUFBWXljLEdBRVZoZCxRQUFRSSxRLENBR25CLEdBQUl4SyxhQUFpQnBMLE9BQXdCLGtCQUFmb0wsRUFBTWhMLEtBQ2hDLE1BQU1nTCxFQUdWLE9BQU9vSyxRQUFRSSxRLENBRXZCLEUsQ0FFQSxRQUFBSSxHQUNJLE9BQU9SLFFBQVFJLE9BQU8sSUFBSWxELEVBQzlCLENBRU0sWUFBQXVELEcseUNBQ0YsT0FBT1QsUUFBUVUsU0FDbkIsRSxDQU9RLDJCQUFBOGIsR0FDSixNQUFNem5CLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3FCLEVBQU90QixFQUFNRSxpQkFDYmdoQixFQUFXbGhCLEVBQU1tb0IscUJBQ2pCcEgsRUFBMEIvZ0IsRUFBTWdoQiw2QkFDaENvSCxFQUF5QmhCLEdBQXlCckcsR0FDbERBLEVBQ0EsQ0FBQyxFQUVEc0gsRUFBMEJyeUIsS0FBSzJrQixvQkFBb0J2RSxzQkFFekQsU0FDSzhLLEVBQVNvSCxVQUNWRixhQUFzQixFQUF0QkEsRUFBd0I3Uix1QkFDcEI3RyxHQUFrQzZZLFdBS2xDSCxhQUFzQixFQUF0QkEsRUFBd0I3UixzQkFBdUI4UixJQUE0Qi9tQixFQUFLbEQsR0FDNUYsQ0FFYyxrQ0FBQXNwQixDQUFtQzVuQixHLHlDQUM3QyxJQUNJLE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3FCLEVBQU90QixFQUFNRSxpQkFDYmdoQixFQUFXbGhCLEVBQU13b0IsY0FDakI1UixFQUFpQjVXLEVBQU15b0Isb0JBQ3ZCQyxHQUFnQnhILGFBQVEsRUFBUkEsRUFBVXhkLFNBQVNrVCxhQUFjLEVBQWRBLEVBQWdCbFQsUUFBUyxJQUU1RCxrQkFBRW1TLFNBQTRCN2YsS0FBSzJrQixvQkFBb0JsRixzQkFDekRpVCxHQUdFcFMsUUFDSXRnQixLQUFLMmtCLG9CQUFvQi9FLGlDQUFpQ0MsSUFFOUQsb0JBQUVVLEVBQW1CLFVBQUVhLEVBQVMsWUFBRXhKLEdBQ3BDNVgsS0FBSzJrQixvQkFBb0J0RSx5Q0FDckJ2VyxFQUNBd1csU0FHRnRnQixLQUFLMkosMEJBQTBCZ3BCLDhCQUE4QixDQUMvRHBTLHNCQUNBYSxZQUNBeEosZ0JBSUEwSSxFQUFxQkMsc0JBQ3JCN0csR0FBa0M2WSxTQUdsQ3Z5QixLQUFLMmtCLG9CQUFvQnhFLHlCQUV6Qm5nQixLQUFLMmtCLG9CQUFvQjVFLHVCQUF1QnpVLEVBQUtsRCxHLENBRTNELE1BQU95QyxHLENBR2IsRSxDQU9jLGdDQUFBOG1CLEcseUNBQ1YsTUFDTS9RLEVBRFE1Z0IsS0FBSzJKLDBCQUEwQk0sV0FDaEIwUywyQkFDdkJoUCxFQUFRaVQsRUFBZWpULE1BQ3ZCNlUsRUFBVyxHQUFHNUIsRUFBZXBULGFBQWFvVCxFQUFlblQsV0FBV21sQixPQUVwRXpULEVBQWlCbmYsS0FBSzJrQixvQkFBb0JuRiwyQkFFMUNxVCxFQUEyRCxDQUM3RDNWLE9BQVEsT0FBRixRQUNGNFYsZUFBZ0IsQ0FDWkMsUUFBU3ZRLEVBQ1R3USxTQUFTLElBRVRybEIsR0FBUyxDQUNUdVQsWUFBYSxDQUNUNlIsUUFBU3BsQixNQU16QjNOLEtBQUtpekIsNkJBQStCOVQsRUFBZStULHNCQUMvQ0wsRUFFUixFLENBRVEsNEJBQUFqQixDQUE2Qi9yQixHQUNqQyxNQUFNb3RCLEVBQXlCanpCLEtBQUttekIsbUNBRXBDLElBQUt0dEIsRUFDRCxNQUFNLElBQUlrTSxFQUNOLGlGQUlSa2hCLEVBQXVCemIsT0FBTzNSLEVBQ2xDLENBRVEsZ0NBQUFzdEIsR0FDSixJQUFLbnpCLEtBQUtpekIsdUJBQ04sTUFBTSxJQUFJN3lCLEVBR2QsT0FBT0osS0FBS2l6QixzQkFDaEIsQ0FPYyxzQ0FBQXhlLENBQ1YzSyxFQUNBMEMsRyx5Q0FFQSxNQUFNLGFBQUVrRyxHQUFpQmxHLEVBS25CMlosRUFKUW5tQixLQUFLMkosMEJBQTBCTSxXQUNqQkcsd0JBQWtETixHQUMzQ2pJLE9BQU91eEIsbUJBRVBwekIsS0FBS3F6QixZQUFZM2dCLEdBQWdCQSxFQUlwRSxhQUZNMVMsS0FBSzhLLFlBQVlxYixHQUVoQixDQUNIcmMsV0FDQTBDLFlBQWEsQ0FDVEMsaUJBQWtCLENBQ2Q2bUIsc0JBQXVCLENBQ25CcG5CLFNBQVVsTSxLQUFLa0wsUUFDZjhLLE1BQU9tUSxLQUszQixFLENBRWMscUJBQUF6UixDQUNWNUssRUFDQTBDLEcseUNBRUEsTUFBTXhDLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2QzJXLEVBQWlCNVcsRUFBTTJTLDJCQUN2QmxiLEVBQWdCdUksRUFBTUksd0JBQWtETixHQUV4RTBZLEVBQVcsR0FBRzVCLEVBQWVwVCxhQUFhb1QsRUFBZW5ULFdBQVdtbEIsUUFFcEUsZ0JBQUVXLEdBQW9CdnpCLEtBQUttekIsb0NBRTNCLEdBQUUvcUIsU0FBYW1yQixFQUFnQixDQUNqQzF6QixLQUFNLENBQUUyaUIsWUFDUjVCLGVBQWdCNWdCLEtBQUsya0Isb0JBQW9CekMscUJBQXFCdEIsS0FLNUR1RixFQUZlMWtCLEVBQWNJLE9BQU91eEIsbUJBRVBwekIsS0FBS3F6QixZQUFZanJCLEdBQU1BLFFBRXBEcEksS0FBSzhLLFlBQVlxYixHQUV2QixNQUFNLHFCQUFFN1QsR0FBdUIsRUFBSyw2QkFBRUMsR0FBK0IsR0FDakVILEVBQXVCNUYsR0FBZUEsRUFBYyxDQUFDLEVBRXpELE1BQU8sQ0FDSDFDLFdBQ0EwQyxZQUFhLE9BQUYsd0JBQ0pBLEdBQVcsQ0FDZDhGLHVCQUNBQywrQkFDQTlGLGlCQUFrQixDQUNkNm1CLHNCQUF1QixDQUNuQnBuQixTQUFVbE0sS0FBS2tMLFFBQ2Y4SyxNQUFPbVEsTUFLM0IsRSxDQUVjLFdBQUFyYixDQUFZMUMsRyx5Q0FDdEIsTUFDTTZDLEVBRFFqTCxLQUFLMkosMEJBQTBCTSxXQUN4QkMsaUJBQWlCOUIsR0FFdEMsR0FBSXBJLEtBQUs4SixTQUFVLENBQ2YsTUFBTSxRQUFFb0IsU0FBa0JsTCxLQUFLNEosNEJBQTRCa0IsWUFBWTlLLEtBQUs4SixTQUFVLENBQ2xGbUIsU0FDQXVvQixjQUFlcHJCLElBR25CcEksS0FBS2tMLFFBQVVBLEMsQ0FFdkIsRSxDQU9jLFdBQUFtb0IsQ0FBWWxOLEcsK0NBQ3RCLE1BQU1uYyxFQUFRaEssS0FBSzJKLDBCQUEwQk0sV0FDdkNxQixFQUFPdEIsRUFBTUUsaUJBQ2JtSyxFQUFRckssRUFBTXlwQixrQkFDZEMsRUFBYzFwQixFQUFNOFEsd0JBQXdCNlksTUFBTUMsYUFFbERDLEVBQW1ELFFBQXRCLEVBQUE3ekIsS0FBSzRCLHlCQUFpQixlQUFFa3lCLHdCQUUzRCxJQUFLRCxFQUNELE1BQU0sSUFBSXp6QixFQUdkLE1BQU0yekIsRUFBOEIsQ0FDaEM1YixPQUFROUQsRUFBTTJmLFlBQVlDLFFBQVEsR0FDbENsd0IsU0FBVXVILEVBQUt2SCxTQUFTb0csS0FDeEJnYyxRQUNBK04saUJBQWtCbDBCLEtBQUt3eEIsNEJBQThCaFksR0FBMkIyYSxPQUNoRkMsbUJBQW9CLENBQ2hCQyxtQkFBb0IsQ0FDaEJDLE9BQVEsUUFDUkMsV0FBWWIsRUFDWmMsV0FBWWQsS0FLbEJlLFFBQW9DWixFQUEyQnhjLFdBQ2pFMGMsR0FHSixHQUNJL3pCLEtBQUt3eEIsNEJBQThCaFksR0FBMkIyYSxTQUM3RE0sRUFFRCxNQUFNLElBQUl2aUIsRUFHZCxHQUFJdWlCLEVBQTZCLENBQzdCLE1BQU0sZUFDRjdOLEVBQWMsb0JBQ2RyRyxFQUNBNEYsTUFBT3VPLFNBQ0RiLEVBQTJCM3RCLE9BRXJDLEdBQ0kwZ0IsSUFBbUIxZCxFQUFtQjJkLElBQ3RDRCxJQUFtQjFkLEVBQW1CNGQsU0FDdEN2RyxJQUF3QjlHLEdBQTRCa2IsU0FDcERwVSxJQUF3QjlHLEdBQTRCbWIsVUFFcEQsTUFBTSxJQUFJMWlCLEVBR2QsR0FDSXFPLElBQXdCOUcsR0FBNEJvYixXQUNwRCxDQUFDM3JCLEVBQW1CNHJCLElBQUs1ckIsRUFBbUI2ckIsVUFBVXJ3QixTQUFTa2lCLEdBRS9ELE9BQU84TixDLENBSWYsT0FBT3ZPLEMsR0FRRyxrQ0FBQTBMLENBQ1YvbkIsRyx5Q0FFQSxNQUFNa3JCLEVBQWVoMUIsS0FBSzJrQixvQkFBb0JuRiw0QkFFeEMsaUJBQUV5VixFQUFnQixhQUFFQyxTQUF1QkYsRUFBYUcsUUFBUUMsbUJBRXRFLEdBQUlILEVBQWtCLENBQ2xCLE1BQ01sSyxFQURRL3FCLEtBQUsySiwwQkFBMEJNLFdBQ1ArZ0IsNkJBQ2hDb0gsRUFBeUJoQixHQUF5QnJHLEdBQ2xEQSxFQUNBLENBQUMsRUFFRHNLLEVBQXFCcjFCLEtBQUsya0Isb0JBQW9CeEQsd0JBQ2hEclgsRUFDQW9yQixHQUNGLEdBT0YsYUFMTWwxQixLQUFLMkosMEJBQTBCZ3BCLDhCQUE4QixPQUFELHdCQUMzRFAsR0FBc0IsQ0FDekJ4YSxZQUFhLENBQUN5ZCxNQUdYQSxDLENBSWYsRSxDQUVRLFdBQUE3ZixDQUFZM0ssRyxPQUVlLFFBQTNCLEVBQUE3SyxLQUFLc3hCLDhCQUFzQixlQUFFaGQsVUFDa0IsbUJBQXhDdFUsS0FBS3N4Qix1QkFBdUJoZCxTQUVuQ3RVLEtBQUtzeEIsdUJBQXVCaGQsUUFBUXpKLEVBRTVDLEVFamZKLE1BYUEsR0FBZXZNLEVBWFZxTCxJQUNELE1BQU0sUUFBRThILEdBQVk5SCxFQUEwQk0sV0FFOUMsT0FBTyxJQUFJLEdBQ1BOLEVBQ0EsSUFBSXlHLEVBQTRCdUIsZ0ZBQUFBLENBQW9CLENBQUVDLEtBQU1ILE9BQzVEbUksS0FDQSxPQUl1RSxDQUMzRSxDQUFFeFIsR0FBSSx1Qyx1U0NBSyxNQUFNa3RCLEdBR2pCLFdBQUE1MUIsQ0FDWWlLLEVBQ0F1SixHQURBLEtBQUF2SiwwQkFBQUEsRUFDQSxLQUFBdUosaUNBQUFBLEVBSkosS0FBQW9CLFFBQVVtRyx3Q0FLZixDQUVHLFVBQUFwSCxDQUNGeFEsRyx5Q0FFQSxNQUFNLGVBQUV5USxFQUFjLFNBQUV4SixHQUFhakgsRUFFckMsSUFBS2lILEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLdUIsRUFDRCxNQUFNLElBQUl2QixFQUNOLDJGQUlSLElBQUt1QixFQUFlek4sVUFDaEIsTUFBTSxJQUFJa00sRUFDTixxR0FJUixHQUFJdUIsRUFBZXNELFNBQTZDLG1CQUEzQnRELEVBQWVzRCxRQUNoRCxNQUFNLElBQUk3RSxFQUNOLHFHQUlSL1IsS0FBS3NVLFFBQVVoQixFQUFlZ0IsU0FBV21HLHdDQUFBQSxDQUUzQnphLEtBQUsySiwwQkFBMEJNLFdBQ2pCc3JCLGlCQUFpQnpyQixXQUduQzlKLEtBQUsySiwwQkFBMEI0SixrQkFBa0J6SixJQUczRCxNQUFNTyxRQUFrQnJLLEtBQUtrVCxpQ0FBaUNuUixjQUFjK0gsR0FFdkVPLEdBQWNBLEVBQVUrTSxTQUF3QyxtQkFBdEIvTSxFQUFVK00sUUFRekRwWCxLQUFLZ1UsYUFBYWxLLEVBQVV3SixHQVB4QkksUUFBUTdJLE1BQ0osMEZBT1osRSxDQUVBLFlBQUE2SyxHQUNJLE9BQU9ULFFBQVFVLFNBQ25CLENBRU0sTUFBQTZmLENBQU9DLEVBQWtDNXlCLEcseUNBRzNDLGFBRk03QyxLQUFLMkosMEJBQTBCK3JCLGVBQWVELEVBQWE1eUIsR0FFMURvUyxRQUFRVSxTQUNuQixFLENBRU0sT0FBQWdnQixDQUFROXlCLEcseUNBR1YsYUFGTTdDLEtBQUsySiwwQkFBMEJpc0IsZ0JBQWdCL3lCLEdBRTlDb1MsUUFBUVUsU0FDbkIsRSxDQUVBLDRCQUFBa2dCLENBQTZCaHpCLEcsTUFHekIsT0FGcUMsUUFBckMsRUFBQUEsYUFBTyxFQUFQQSxFQUFTaXpCLG9DQUE0QixpQkFFOUI3Z0IsUUFBUVUsU0FDbkIsQ0FFUSxZQUFBM0IsQ0FDSmxLLEVBQ0F3SixHLFFBRUEsTUFBTSxVQUFFek4sRUFBUyxRQUFFK1EsRUFBTyxXQUFFbWYsR0FBZXppQixFQUVyQ2pKLEVBQVlySyxLQUFLa1QsaUNBQWlDM0ksc0JBRWxEOUksRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBRW5DRyx3QkFBMEROLElBQzlELHdCQUFFNUYsRUFBdUIsb0JBQUUrUixFQUFtQixtQkFBRXlDLEdBQ2xEalgsRUFBYytCLG9CQUFzQixDQUFDLEdBQ25DLHdCQUFFd3lCLEdBQTRCL2YsR0FBdUIsQ0FBQyxFQUV0RGdnQixFQUFtQixPQUFILHNDQUNkajJCLEtBQUt1VyxpQ0FBaUN6TSxJQUFhLENBQ25EME0sd0JBQXdCLElBQzFCLENBQ0YxTCxZQUFhLElBQU05SyxLQUFLa1QsaUNBQWlDcEksWUFBWSxrQkFDckVrTSxVQUFXLEVBQUdTLGFBQ1Z6WCxLQUFLa1QsaUNBQWlDckgsZ0JBQWdCL0IsRUFBVTJOLEtBQ2hFYixHQUFXLENBQUVBLFFBQVMsSUFBTUEsTUFHOUJzZixFQUEwQixPQUFILHlCQUNwQnhkLEdBQXNCLENBQ3ZCeWQsd0JBQTBCcGhCLEdBQ3RCL1UsS0FBS20yQix3QkFBd0JwaEIsR0FDakNxaEIsd0JBQTBCcmhCLEdBQ3RCL1UsS0FBS28yQix3QkFBd0JyaEIsS0FDbkMsQ0FDRmlDLFVBQVcsQ0FBQ2pDLEVBQThCK0IsSUFDdEM5VyxLQUFLcTJCLHdCQUF3QnRoQixFQUFNK0IsRUFBU2hOLEVBQVVpc0IsS0FHeERPLEVBQW1CLDZCQUNyQjdmLGNBQWVwTSxFQUFVcU0sUUFBUUMsT0FDakNwUSxNQUFPdkcsS0FBS2tULGlDQUFpQzFELG9CQUFvQixPQUFELHdCQUN6RHdtQixHQUF1QixDQUMxQjl1QixPQ3JKb0IsT0R1SnJCK3VCLEdBQ0MveEIsR0FBMkJneUIsR0FHN0I1Z0IsRUFBZWpMLEVBQVUrTSxRQUFRa2YsR0FFbkNoaEIsRUFBYStCLGNBQ2UsUUFBeEIsRUFBQS9CLEVBQWFnQyxtQkFBVyx5QkFBUXRYLEtBQUt1VyxpQ0FBaUN6TSxHQUNuRCxRQUFuQixFQUFBd0wsRUFBYWlDLGNBQU0saUJBRW5CakMsRUFBYWtDLE9BQU8sSUFBSTNSLEtBRzVCN0YsS0FBS2tULGlDQUFpQ25ELGNBQWNsSyxFQUU1RCxDQUVjLHVCQUFBd3dCLENBQ1Z0aEIsRUFDQStCLEVBQ0FoTixFQUNBaXNCLEcseUNBRUEsSUFBS2hoQixFQUFLMEMsUUFDTixNQUFNLElBQUlwWCxFQUFpQmpDLEVBQXFCMkMsZ0JBR3BELE1BQU11SyxFQUFPdEwsS0FBSzJKLDBCQUEwQk0sV0FBV0MsaUJBQ2pEaUYsUUFBcUIySCxFQUFRekMsTUFBTW5WLE1BRXpDLElBQ0ksTUFBTTBoQixFQUNGNWdCLEtBQUtrVCxpQ0FBaUM3RSxrQ0FDbENjLEdBS1IsU0FGTW5QLEtBQUsySiwwQkFBMEI0c0IscUJBQXFCM1YsR0FFdER0VixFQUFLa3JCLFVBQVVDLGNBQWM5eEIsT0FBUyxFQUFHLENBQ3pDLE1BQU1tYyxFQUNGOWdCLEtBQUtrVCxpQ0FBaUNoRSxtQ0FDbENDLFNBR0ZuUCxLQUFLMkosMEJBQTBCK3NCLHNCQUFzQjVWLFNBQ3JEOWdCLEtBQUtrVCxpQ0FBaUM3SCxhLE9BRzFDckwsS0FBSzJKLDBCQUEwQmdMLFlBQVksQ0FBQyxFQUFHLENBQUUrSCxPQUFRLENBQUU1UyxvQkFDM0Q5SixLQUFLa1QsaUNBQWlDNUcsY0FBY3hDLEVBQVVpTCxFQUFLMEMsU0FFckVzZSxHQUFvQyxtQkFBZkEsR0FDckJBLEcsQ0FFTixNQUFPbHJCLEdBQ0w3SyxLQUFLd1YsWUFBWTNLLEUsQ0FFekIsRSxDQUVjLHVCQUFBc3JCLENBQ1ZwaEIsRyx5Q0FFQSxNQUFNeEgsRUFBVXZOLEtBQUtrVCxpQ0FBaUM1RixXQUFXLENBQzdEUyxLQUFNZ0gsRUFBSytMLGdCQUFnQi9TLEtBQzNCQyxZQUFhK0csRUFBSytMLGdCQUFnQjlTLFlBQ2xDQyxXQUFZOEcsRUFBSytMLGdCQUFnQjdTLFdBQ2pDRSxvQkFBcUI0RyxFQUFLK0wsZ0JBQWdCOVcsUUFHOUMsVUFHVWhLLEtBQUsySiwwQkFBMEI0c0IscUJBQXFCaHBCLFNBQ3BEdk4sS0FBSzJKLDBCQUEwQitzQixzQkFBc0JucEIsR0FFM0QsTUFBTW9wQixFQUFpQjMyQixLQUFLa1QsaUNBQWlDbkcsaUNBRXZEL00sS0FBSzJKLDBCQUEwQml0QixxQkFBcUJELEVBQWV2dUIsVUFDbkVwSSxLQUFLa1QsaUNBQWlDN0gsYSxDQUM5QyxNQUFPUixHQUNMN0ssS0FBS3dWLFlBQVkzSyxFLENBRXpCLEUsQ0FFYyx1QkFBQXVyQixDQUNWcmhCLEcseUNBRUEsTUFBTTRoQixFQUFpQjMyQixLQUFLa1QsaUNBQWlDbkcseUJBQ3pEZ0ksRUFBS3JKLHVCQUF1QnRELElBR2hDLFVBQ1VwSSxLQUFLMkosMEJBQTBCaXRCLHFCQUFxQkQsRUFBZXZ1QixVQUNuRXBJLEtBQUtrVCxpQ0FBaUM3SCxhLENBQzlDLE1BQU9SLEdBQ0w3SyxLQUFLd1YsWUFBWTNLLEUsQ0FFekIsRSxDQUVRLFdBQUEySyxDQUFZM0ssR0FDaEIsR0FBNEIsbUJBQWpCN0ssS0FBS3NVLFFBR1osTUFBTXpKLEVBRk43SyxLQUFLc1UsUUFBUXpKLEVBSXJCLENBT1EsZ0NBQUEwTCxDQUFpQ3pNLEcsTUFLckMsT0FBdUMsUUFBaEMsRUFKTzlKLEtBQUsySiwwQkFBMEJNLFdBRW5DRyx3QkFBMEROLEdBRS9DdEcsMEJBQWtCLGVBQUVrVixzQkFBc0IsQ0FDbkUsRUVwUUosTUFRQSxHQUFlcGEsRUFOVnFMLEdBQ0QsSUFBSTJyQixHQUNBM3JCLEVBQ0EsRUFBdUNBLElBR3lCLENBQUMsQ0FBRXZCLEdBQUksb0IsdVNDWWhFLE1BQU15dUIsR0FHakIsV0FBQW4zQixDQUNZaUssRUFDQXVKLEdBREEsS0FBQXZKLDBCQUFBQSxFQUNBLEtBQUF1SixpQ0FBQUEsRUFKSixLQUFBb0IsUUFBVW1HLHdDQUtmLENBRUcsVUFBQXBILENBQ0Z4USxHLHlDQUVBLE1BQU0scUJBQUVnVyxFQUFvQixTQUFFL08sR0FBYWpILEVBRTNDLElBQUtpSCxFQUNELE1BQU0sSUFBSWlJLEVBQ04scUZBSVIsSUFBSzhHLEVBQ0QsTUFBTSxJQUFJOUcsRUFDTixpR0FJUixJQUFLOEcsRUFBcUJoVCxVQUN0QixNQUFNLElBQUlrTSxFQUNOLDJHQUlSLEdBQUk4RyxFQUFxQmpDLFNBQW1ELG1CQUFqQ2lDLEVBQXFCakMsUUFDNUQsTUFBTSxJQUFJN0UsRUFDTiwyR0FJUi9SLEtBQUtzVSxRQUFVdUUsRUFBcUJ2RSxTQUFXbUcsd0NBQUFBLENBRWpDemEsS0FBSzJKLDBCQUEwQk0sV0FDakJzckIsaUJBQWlCenJCLFdBR25DOUosS0FBSzJKLDBCQUEwQjRKLGtCQUFrQnpKLElBRzNELE1BQU1PLFFBQWtCckssS0FBS2tULGlDQUFpQ25SLGNBQWMrSCxHQUV2RU8sR0FBY0EsRUFBVStNLFNBQXdDLG1CQUF0Qi9NLEVBQVUrTSxRQVF6RHBYLEtBQUtnVSxhQUFhbEssRUFBVStPLEdBUHhCbkYsUUFBUTdJLE1BQ0osMEZBT1osRSxDQUVBLFlBQUE2SyxHQUNJLE9BQU9ULFFBQVFVLFNBQ25CLENBRU0sTUFBQTZmLENBQU9DLEVBQWtDNXlCLEcsK0NBQ3JDN0MsS0FBSzJKLDBCQUEwQityQixlQUFlRCxFQUFhNXlCLEVBQ3JFLEUsQ0FFTSxPQUFBOHlCLENBQVE5eUIsRywrQ0FDSjdDLEtBQUsySiwwQkFBMEJpc0IsZ0JBQWdCL3lCLEVBQ3pELEUsQ0FFQSw0QkFBQWd6QixDQUE2Qmh6QixHLE1BR3pCLE9BRnFDLFFBQXJDLEVBQUFBLGFBQU8sRUFBUEEsRUFBU2l6QixvQ0FBNEIsaUJBRTlCN2dCLFFBQVFVLFNBQ25CLENBRVEsWUFBQTNCLENBQ0psSyxFQUNBZ3RCLEdBRUEsTUFBTSxVQUFFanhCLEVBQVMsV0FBRWt3QixFQUFVLFFBQUVuZixHQUFZa2dCLEVBRXJDenNCLEVBQVlySyxLQUFLa1QsaUNBQWlDM0ksc0JBRWxEOUksRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBRW5DRyx3QkFBMEROLElBQzlELHdCQUFFNUYsRUFBdUIsb0JBQUUrUixFQUFtQixtQkFBRXlDLEdBQ2xEalgsRUFBYytCLG9CQUFzQixDQUFDLEdBQ25DLHdCQUFFd3lCLEdBQTRCL2YsR0FBdUIsQ0FBQyxFQUV0RGdnQixFQUFtQixPQUFILFFBQ2xCbnJCLFlBQWEsSUFDVDlLLEtBQUtrVCxpQ0FBaUNwSSxZQUFZLHdCQUN0RGtNLFVBQVcsRUFBR1MsYUFDVnpYLEtBQUtrVCxpQ0FBaUNySCxnQkFBZ0IvQixFQUFVMk4sSUFDaEViLEdBQVcsQ0FBRUEsUUFBUyxJQUFNQSxNQUc5QnNmLEVBQTBCLE9BQUgseUJBQ3BCeGQsR0FBc0IsQ0FDdkJ5ZCx3QkFBMEJwaEIsR0FDdEIvVSxLQUFLbTJCLHdCQUF3QnBoQixHQUNqQ3FoQix3QkFBMEJyaEIsR0FDdEIvVSxLQUFLbzJCLHdCQUF3QnJoQixLQUNuQyxDQUNGaUMsVUFBVyxDQUFDakMsRUFBOEIrQixJQUN0QzlXLEtBQUtxMkIsd0JBQXdCdGhCLEVBQU0rQixFQUFTaE4sRUFBVWlzQixLQUd4RGhkLEVBQWlCLENBQUMxTyxFQUFVcU0sUUFBUXNDLFNBQVUzTyxFQUFVcU0sUUFBUXVDLFFBQ3RFLElBQUlDLEdBQXlCLEVBRTdCSCxFQUFlaFUsUUFBUzBSLElBQ3BCLElBQUt5QyxFQUF3QixDQUN6QixNQUFNb2QsRUFBbUIsNkJBQ3JCN2YsZ0JBQ0FsUSxNQUFPdkcsS0FBS2tULGlDQUFpQzFELG9CQUFvQixPQUFELHdCQUN6RHdtQixHQUF1QixDQUMxQjl1QixPRnBKWSxPRXNKYit1QixHQUNDL3hCLEdBQTJCZ3lCLEdBRzdCNWdCLEVBQWVqTCxFQUFVK00sUUFBUWtmLEdBRW5DaGhCLEVBQWErQixlQUNiL0IsRUFBYWtDLE9BQU8sSUFBSTNSLEtBQ3hCcVQsR0FBeUIsRSxJQUtoQ0EsR0FDRGxaLEtBQUtrVCxpQ0FBaUNuRCxjQUFjbEssRUFFNUQsQ0FFYyx1QkFBQXd3QixDQUNWdGhCLEVBQ0ErQixFQUNBaE4sRUFDQWlzQixHLHlDQUVBLElBQUtoaEIsRUFBSzBDLFFBQ04sTUFBTSxJQUFJcFgsRUFBaUJqQyxFQUFxQjJDLGdCQUdwRCxNQUFNdUssRUFBT3RMLEtBQUsySiwwQkFBMEJNLFdBQVdDLGlCQUNqRGlGLFFBQXFCMkgsRUFBUXpDLE1BQU1uVixNQUV6QyxJQUNJLE1BQU0waEIsRUFDRjVnQixLQUFLa1QsaUNBQWlDN0Usa0NBQ2xDYyxHQUtSLFNBRk1uUCxLQUFLMkosMEJBQTBCNHNCLHFCQUFxQjNWLEdBRXREdFYsRUFBS2tyQixVQUFVQyxjQUFjOXhCLE9BQVMsRUFBRyxDQUN6QyxNQUFNbWMsRUFDRjlnQixLQUFLa1QsaUNBQWlDaEUsbUNBQ2xDQyxTQUdGblAsS0FBSzJKLDBCQUEwQitzQixzQkFBc0I1VixTQUNyRDlnQixLQUFLa1QsaUNBQWlDN0gsYSxPQUcxQ3JMLEtBQUsySiwwQkFBMEJnTCxZQUFZLENBQUMsRUFBRyxDQUFFK0gsT0FBUSxDQUFFNVMsb0JBQzNEOUosS0FBS2tULGlDQUFpQzVHLGNBQWN4QyxFQUFVaUwsRUFBSzBDLFNBRXJFc2UsR0FBb0MsbUJBQWZBLEdBQ3JCQSxHLENBRU4sTUFBT2xyQixHQUNMN0ssS0FBS3dWLFlBQVkzSyxFLENBRXpCLEUsQ0FFYyx1QkFBQXNyQixDQUNWcGhCLEcseUNBRUEsTUFBTXhILEVBQVV2TixLQUFLa1QsaUNBQWlDNUYsV0FBVyxDQUM3RFMsS0FBTWdILEVBQUsrTCxnQkFBZ0IvUyxLQUMzQkMsWUFBYStHLEVBQUsrTCxnQkFBZ0I5UyxZQUNsQ0MsV0FBWThHLEVBQUsrTCxnQkFBZ0I3UyxXQUNqQ0Usb0JBQXFCNEcsRUFBSytMLGdCQUFnQjlXLFFBRzlDLFVBR1VoSyxLQUFLMkosMEJBQTBCNHNCLHFCQUFxQmhwQixTQUNwRHZOLEtBQUsySiwwQkFBMEIrc0Isc0JBQXNCbnBCLEdBRTNELE1BQU1vcEIsRUFBaUIzMkIsS0FBS2tULGlDQUFpQ25HLGlDQUV2RC9NLEtBQUsySiwwQkFBMEJpdEIscUJBQXFCRCxFQUFldnVCLFVBQ25FcEksS0FBS2tULGlDQUFpQzdILGEsQ0FDOUMsTUFBT1IsR0FDTDdLLEtBQUt3VixZQUFZM0ssRSxDQUV6QixFLENBRWMsdUJBQUF1ckIsQ0FDVnJoQixHLHlDQUVBLE1BQU00aEIsRUFBaUIzMkIsS0FBS2tULGlDQUFpQ25HLHlCQUN6RGdJLEVBQUtySix1QkFBdUJ0RCxJQUdoQyxVQUNVcEksS0FBSzJKLDBCQUEwQml0QixxQkFBcUJELEVBQWV2dUIsVUFDbkVwSSxLQUFLa1QsaUNBQWlDN0gsYSxDQUM5QyxNQUFPUixHQUNMN0ssS0FBS3dWLFlBQVkzSyxFLENBRXpCLEUsQ0FFUSxXQUFBMkssQ0FBWTNLLEdBQ2hCLEdBQTRCLG1CQUFqQjdLLEtBQUtzVSxRQUdaLE1BQU16SixFQUZON0ssS0FBS3NVLFFBQVF6SixFQUlyQixFQ3ZQSixNQVFBLEdBQWV2TSxFQU5WcUwsR0FDRCxJQUFJa3RCLEdBQ0FsdEIsRUFDQSxFQUF1Q0EsSUFHK0IsQ0FDMUUsQ0FBRXZCLEdBQUksMEIsdVNDSUssTUFBTTJ1QixHQUNqQixXQUFBcjNCLENBQ1lpSyxFQUNBdUosR0FEQSxLQUFBdkosMEJBQUFBLEVBQ0EsS0FBQXVKLGlDQUFBQSxDQUNULENBRUcsVUFBQUcsQ0FDRnhRLEcseUNBRUEsTUFBTSxvQkFBRXdXLEVBQW1CLFNBQUV2UCxHQUFhakgsRUFFMUMsSUFBS2lILEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLc0gsRUFDRCxNQUFNLElBQUl0SCxFQUNOLGdHQUlSLElBQUtzSCxFQUFvQnhULFVBQ3JCLE1BQU0sSUFBSWtNLEVBQ04sMEdBSVIsR0FBSXNILEVBQW9CekMsU0FBa0QsbUJBQWhDeUMsRUFBb0J6QyxRQUMxRCxNQUFNLElBQUk3RSxFQUNOLDBHQUlNL1IsS0FBSzJKLDBCQUEwQk0sV0FDakJzckIsaUJBQWlCenJCLFdBR25DOUosS0FBSzJKLDBCQUEwQjRKLGtCQUFrQnpKLElBRzNELE1BQU1PLFFBQWtCckssS0FBS2tULGlDQUFpQ25SLGNBQWMrSCxHQUV2RU8sR0FBY0EsRUFBVStNLFNBQXdDLG1CQUF0Qi9NLEVBQVUrTSxRQVF6RHBYLEtBQUtnVSxhQUFhbEssRUFBVXVQLEdBUHhCM0YsUUFBUTdJLE1BQ0osMEZBT1osRSxDQUVBLFlBQUE2SyxHQUNJLE9BQU9ULFFBQVFVLFNBQ25CLENBRU0sTUFBQTZmLENBQU9DLEVBQWtDNXlCLEcsK0NBQ3JDN0MsS0FBSzJKLDBCQUEwQityQixlQUFlRCxFQUFhNXlCLEVBQ3JFLEUsQ0FFTSxPQUFBOHlCLENBQVE5eUIsRywrQ0FDSjdDLEtBQUsySiwwQkFBMEJpc0IsZ0JBQWdCL3lCLEVBQ3pELEUsQ0FFQSw0QkFBQWd6QixDQUE2Qmh6QixHLE1BR3pCLE9BRnFDLFFBQXJDLEVBQUFBLGFBQU8sRUFBUEEsRUFBU2l6QixvQ0FBNEIsaUJBRTlCN2dCLFFBQVFVLFNBQ25CLENBRVEsWUFBQTNCLENBQ0psSyxFQUNBdVAsR0FFQSxNQUFNLFVBQUV4VCxFQUFTLFFBQUUrUSxHQUFZeUMsRUFFekJoUCxFQUFZckssS0FBS2tULGlDQUFpQzNJLHNCQUVsRDlJLEVBRFF6QixLQUFLMkosMEJBQTBCTSxXQUVuQ0csd0JBQTBETixJQUM5RCxvQkFBRW1NLEdBQXdCeFUsRUFBYytCLG9CQUFzQixDQUFDLEdBQy9ELHdCQUFFd3lCLEdBQTRCL2YsR0FBdUIsQ0FBQyxFQUV0RHFnQixFQUFtQixlQUNyQjdmLGNBQWVwTSxFQUFVcU0sUUFBUTRDLE1BQ2pDL1MsTUFBT3ZHLEtBQUtrVCxpQ0FBaUMxRCxvQkFBb0IsT0FBRCx3QkFDekR3bUIsR0FBdUIsQ0FDMUI5dUIsT0poSG9CLE1Ja0h4QjRELFlBQWEsSUFDVDlLLEtBQUtrVCxpQ0FBaUNwSSxZQUFZLHVCQUN0RGtNLFVBQVcsRUFBR1MsYUFDVnpYLEtBQUtrVCxpQ0FBaUNySCxnQkFBZ0IvQixFQUFVMk4sSUFDaEViLEdBQVcsQ0FBRUEsUUFBUyxJQUFNQSxNQUc5Qm9nQixFQUFxQjNzQixFQUFVK00sUUFBUWtmLEdBRXpDVSxFQUFtQjNmLGFBQ25CMmYsRUFBbUJ4ZixPQUFPLElBQUkzUixLQUU5QjdGLEtBQUtrVCxpQ0FBaUNuRCxjQUFjbEssRUFFNUQsRUN2SEosTUFRQSxHQUFldkgsRUFOVnFMLEdBQ0QsSUFBSW90QixHQUNBcHRCLEVBQ0EsRUFBdUNBLElBRzhCLENBQ3pFLENBQUV2QixHQUFJLHlCLHVTQ0tLLE1BQU02dUIsR0FDakIsV0FBQXYzQixDQUNZaUssRUFDQXlRLEVBQ0F1SyxHQUZBLEtBQUFoYiwwQkFBQUEsRUFDQSxLQUFBeVEsc0JBQUFBLEVBQ0EsS0FBQXVLLG9CQUFBQSxDQUNULENBRUcsVUFBQXRSLENBQ0Z4USxHLCtDQUVBLE1BQU0sU0FBRWlILEVBQVEsdUJBQUV3bkIsR0FBMkJ6dUIsRUFFN0MsSUFBS2lILEVBQ0QsTUFBTSxJQUFJaUksRUFDTixrRUFJUixVQUNVL1IsS0FBSzJKLDBCQUEwQjRKLGtCQUFrQnpKLEdBRXZELE1BQU1FLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUN2Q3FCLEVBQU90QixFQUFNRSxpQkFDYnpJLEVBQWdCdUksRUFBTUksd0JBQWtETixHQUV4RWtWLEtBQXNELFFBQWhDLEVBQUF2ZCxFQUFjK0IsMEJBQWtCLGVBQUVXLDJCQUV4RHZDLFFBQTBCNUIsS0FBS29hLHNCQUFzQjVZLHFCQUN2REMsRUFDQTZKLEVBQUt2SCxTQUFTb0csS0FDZG1CLEVBQUtsRCxVQUdIcEksS0FBSzJrQixvQkFBb0I1Rix5QkFDM0JuZCxFQUNBb2QsRUFDQWhmLEtBQUs4dUIsa0JBQWtCaGxCLEVBQVV3bkIsRyxDQUV2QyxNQUFPemEsRyxDQUtULE9BQU81QixRQUFRVSxTLEdBR2IsWUFBQUQsRyx5Q0FDRixPQUFPVCxRQUFRVSxTQUNuQixFLENBRU0sTUFBQTZmLENBQU9DLEVBQWtDNXlCLEcsK0NBQ3JDN0MsS0FBSzJKLDBCQUEwQityQixlQUFlRCxFQUFhNXlCLEVBQ3JFLEUsQ0FFTSxPQUFBOHlCLENBQVE5eUIsRywrQ0FDSjdDLEtBQUsySiwwQkFBMEJpc0IsZ0JBQWdCL3lCLEVBQ3pELEUsQ0FFTSw0QkFBQWd6QixDQUNGaHpCLEcseUNBRUEsTUFBTSw4QkFBRXEwQixFQUE2Qiw2QkFBRXBCLEVBQTRCLFNBQUVoc0IsR0FDakVqSCxHQUFXLENBQUMsRUFFaEIsSUFBS2lILEVBQ0QsTUFBTSxJQUFJaUksRUFDTixrRUFJUixHQUE0QyxtQkFBakMrakIsRUFDUCxNQUFNLElBQUkvakIsRUFDTixnSEFPUixHQUhjL1IsS0FBSzJKLDBCQUEwQk0sV0FDdEJrb0IscUJBRVZHLFFBQVMsQ0FFZDRFLEdBQ3lDLG1CQUFsQ0EsR0FFUEEsSUFHSixVQUNVbDNCLEtBQUsweEIsbUNBQW1DNW5CLEUsQ0FDaEQsTUFBTytNLEcsRUFNYmlmLEdBQ0osRSxDQU9jLGtDQUFBcEUsQ0FBbUM1bkIsRyx5Q0FDN0MsTUFBTUUsRUFBUWhLLEtBQUsySiwwQkFBMEJNLFdBQ3ZDZ0IsRUFBU2pCLEVBQU1FLGlCQUFpQjlCLEdBQ2hDOGlCLEVBQVdsaEIsRUFBTXdvQixjQUNqQjVSLEVBQWlCNVcsRUFBTXlvQixvQkFDdkJDLEdBQWdCeEgsYUFBUSxFQUFSQSxFQUFVeGQsU0FBU2tULGFBQWMsRUFBZEEsRUFBZ0JsVCxRQUFTLElBRTVELGtCQUFFbVMsU0FBNEI3ZixLQUFLMmtCLG9CQUFvQmxGLHNCQUN6RGlULEdBR0VwUyxRQUNJdGdCLEtBQUsya0Isb0JBQW9CL0UsaUNBQWlDQyxHQUU5RHNYLEVBQ0Y3VyxFQUFxQkMsc0JBQXdCN0csR0FBa0M2WSxlQUU3RXZ5QixLQUFLbzNCLHdCQUF3QnR0QixFQUFVd1csR0FFekM2VyxFQUNBbjNCLEtBQUsya0Isb0JBQW9CeEUseUJBRXpCbmdCLEtBQUsya0Isb0JBQW9CNUUsdUJBQXVCOVUsRUFFeEQsRSxDQUVjLHVCQUFBbXNCLENBQ1Z0dEIsRUFDQXdXLEcsK0NBRUEsTUFDTWhWLEVBRFF0TCxLQUFLMkosMEJBQTBCTSxXQUMxQkMsa0JBRWIsb0JBQUVxVyxFQUFtQixVQUFFYSxFQUFTLGVBQUVSLEVBQWMsZ0JBQUVFLEVBQWUsWUFBRWxKLEdBQ3JFNVgsS0FBSzJrQixvQkFBb0J0RSx5Q0FDckJ2VyxFQUNBd1csR0FhUixTQVZNdGdCLEtBQUsySiwwQkFBMEJncEIsOEJBQThCLENBQy9EcFMsc0JBQ0FhLFlBQ0F4SixnQkFHQWdKLFVBQ001Z0IsS0FBSzJKLDBCQUEwQjRzQixxQkFBcUIzVixJQUcxREUsR0FBbUJ4VixFQUFLa3JCLFVBQVVDLGNBQWM5eEIsT0FBUyxFQUFHLENBQzVELE1BQU0weUIsUUFBcUJyM0IsS0FBSzJKLDBCQUEwQitzQixzQkFDdEQ1VixHQUdFcmYsRUFDRjQxQixFQUFhanRCLHdCQUFrRE4sSUFDN0QsMENBQUV3dEIsR0FDSjcxQixFQUFjK0Isb0JBQXNCLENBQUMsRUFDbkMrekIsRUFBZUYsRUFBYUcsbUJBQXFCLEdBQ2pEL3JCLEdBQTBDLFFBQWYsRUFBQThyQixFQUFhLFVBQUUsZUFBRTlyQiwyQkFBNEIsR0FDeEVnc0IsRUFBc0Joc0IsRUFBeUIsR0FDL0N3QixFQUE0QnhCLEVBQXlCeUIsS0FDdERDLEdBQVdBLEVBQU9DLGVBR3ZCLElBQ0tILEdBQTZCd3FCLElBQzlCSCxFQUNGLENBQ0UsTUFBTXRkLEdBQW1CL00sYUFBeUIsRUFBekJBLEVBQTJCN0UsS0FBTXF2QixFQUFvQnJ2QixTQUV4RXBJLEtBQUsySiwwQkFBMEJpdEIscUJBQXFCNWMsRSxLQVU5RCxpQkFBQThVLENBQ0pobEIsRUFDQXduQixHQUVBLE1BQ003dkIsRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBQ2pCRyx3QkFBa0ROLElBRXhFLGVBQUVtbEIsRUFBYyx5QkFBRXNDLEdBQTZCOXZCLEVBQWMrQixvQkFBc0IsQ0FBQyxFQUUxRixPQUFPc3JCLEdBQ0h5QyxFQUEyQnRDLEVBQWlCLENBQUMsRUFDN0NxQyxhQUFzQixFQUF0QkEsRUFBd0I1ckIsT0FFaEMsRUNqTkosTUFTQSxHQUFlcEgsRUFQVnFMLEdBQ0QsSUFBSXN0QixHQUNBdHRCLEVBQ0FpUSxLQUNBLE1BR3dFLENBQzVFLENBQUV4UixHQUFJLHFDQUNOLENBQUVBLEdBQUksK0IsdVNDQ0ssTUFBTXN2QixHQUNqQixXQUFBaDRCLENBQ1lpSyxFQUNBdUosR0FEQSxLQUFBdkosMEJBQUFBLEVBQ0EsS0FBQXVKLGlDQUFBQSxDQUNULENBRUcsVUFBQUcsQ0FDRnhRLEcsK0NBRUEsTUFBTSxlQUFFeVEsRUFBYyxZQUFFMlUsRUFBVyxTQUFFbmUsR0FBYWpILEVBRTVDODBCLEVBQWVsbEIsUUFBUWEsYUFBYyxFQUFkQSxFQUFnQjdJLHlCQUU3QyxJQUFLWCxFQUNELE1BQU0sSUFBSWlJLEVBQ04scUZBSVIsSUFBS2tXLEVBQ0QsTUFBTSxJQUFJbFcsRUFDTix3RkFJUixJQUFLdUIsRUFDRCxNQUFNLElBQUl2QixFQUNOLDJGQUlSLEdBQUk0bEIsSUFBaUJya0IsRUFBZTVSLGFBQ2hDLE1BQU0sSUFBSXFRLEVBQ04sd0dBSVIsR0FDSTRsQixHQUM0RSxtQkFBL0IsUUFBdEMsRUFBQXJrQixFQUFlN0ksK0JBQXVCLGVBQUVFLDBCQUUvQyxNQUFNLElBQUlvSCxFQUNOLG9LQUlINGxCLFVBR0szM0IsS0FBSzJKLDBCQUEwQml1Qix1QkFNekMsTUFBTWwyQixFQUFlaTJCLEVBQ2Zya0IsRUFBZTVSLGFBQ2YxQixLQUFLMkosMEJBQTBCTSxXQUFXQyxpQkFBaUJuRyxTQUFTb0csV0FFcEVuSyxLQUFLa1QsaUNBQWlDblIsY0FBYytILEVBQVVwSSxHQUFjLEdBRWxGMUIsS0FBS2dVLGFBQWFpVSxFQUFhbmUsRUFBVXdKLEUsR0FHN0MsWUFBQW9DLEdBQ0ksT0FBT1QsUUFBUVUsU0FDbkIsQ0FFUSxZQUFBM0IsQ0FDSmlVLEVBQ0FuZSxFQUNBd0osRyxRQUVBLE1BQU0sd0JBQUU3SSxFQUF1QixNQUFFbEUsRUFBSyxXQUFFd3ZCLEVBQVUscUJBQUU4QixHQUF5QnZrQixFQUV2RWpKLEVBQVlySyxLQUFLa1QsaUNBQWlDM0ksc0JBRWxEOUksRUFEUXpCLEtBQUsySiwwQkFBMEJNLFdBRW5DRyx3QkFBMEROLElBQzlELHdCQUFFNUYsRUFBdUIsbUJBQUV3VSxHQUM3QmpYLEVBQWMrQixvQkFBc0IsQ0FBQyxFQUVuQ3l5QixFQUFtQixPQUFILHdCQUNkajJCLEtBQUt1VyxpQ0FBaUN6TSxJQUFhLENBQ25EME0sd0JBQXdCLElBQzFCLENBQ0YxTCxZQUFhLElBQVksa0NBQ3JCLEdBQUlMLEVBQXlCLENBQ3pCLE1BQU1xdEIsUUFDSTkzQixLQUFLa1QsaUNBQWlDMUksd0JBQ3hDQyxTQUdGekssS0FBSzJKLDBCQUEwQm91QixhQUFhRCxFQUFXMXZCLEcsQ0FHakUsT0FBT3BJLEtBQUtrVCxpQ0FBaUNwSSxZQUFZLGlCQUM3RCxHQUNBa00sVUFBVyxFQUFHUyxhQUNWelgsS0FBS2tULGlDQUFpQ3JILGdCQUFnQi9CLEVBQVUyTixLQUdsRXVnQixFQUFzQixDQUN4QjlnQixTQUFVLElBQU1sWCxLQUFLMkosMEJBQTBCaXVCLHVCQUc3QzFCLEVBQTBCLE9BQUgseUJBQ3BCeGQsR0FBc0IsQ0FDdkJ5ZCx3QkFBMEJwaEIsR0FDdEIvVSxLQUFLbTJCLHdCQUF3QnBoQixHQUNqQ3FoQix3QkFBMEJyaEIsR0FDdEIvVSxLQUFLbzJCLHdCQUF3QnJoQixLQUNuQyxDQUNGaUMsVUFBVyxDQUFDakMsRUFBOEIrQixJQUN0QzlXLEtBQUtxMkIsd0JBQXdCdGhCLEVBQU0rQixFQUFTaE4sRUFBVWlzQixLQUd4RE8sRUFBbUIsMkNBQ3JCN2YsY0FBZXBNLEVBQVVxTSxRQUFRQyxPQUNqQ3BRLE1BQU92RyxLQUFLa1QsaUNBQWlDMUQsb0JBQW9CakosSUFDOUQwdkIsR0FDQ3hyQixHQUEyQnV0QixHQUMzQjl6QixHQUEyQmd5QixHQUc3QjVnQixFQUFlakwsRUFBVStNLFFBQVFrZixHQUVuQ2hoQixFQUFhK0IsY0FDZSxRQUF4QixFQUFBL0IsRUFBYWdDLG1CQUFXLHlCQUFRdFgsS0FBS3VXLGlDQUFpQ3pNLEdBQ25ELFFBQW5CLEVBQUF3TCxFQUFhaUMsY0FBTSxpQkFFbkJqQyxFQUFha0MsT0FBTyxJQUFJeVEsS0FFckI0UCxHQUF3RCxtQkFBekJBLEVBQ3RDQSxJQUVBNzNCLEtBQUtrVCxpQ0FBaUNuRCxjQUFja1ksRUFFNUQsQ0FFYyx1QkFBQW9PLENBQ1Z0aEIsRUFDQStCLEVBQ0FoTixFQUNBaXNCLEcseUNBRUEsSUFBS2hoQixFQUFLMEMsUUFDTixNQUFNLElBQUlwWCxFQUFpQmpDLEVBQXFCMkMsZ0JBR3BELE1BQ011SyxFQURRdEwsS0FBSzJKLDBCQUEwQk0sV0FDMUJDLGlCQUNiaUYsUUFBcUIySCxFQUFRekMsTUFBTW5WLE1BRXpDLElBQ0ksTUFBTTBoQixFQUNGNWdCLEtBQUtrVCxpQ0FBaUM3RSxrQ0FDbENjLEdBS1IsU0FGTW5QLEtBQUsySiwwQkFBMEI0c0IscUJBQXFCM1YsR0FFdER0VixFQUFLa3JCLFVBQVVDLGNBQWM5eEIsT0FBUyxFQUFHLENBQ3pDLE1BQU1tYyxFQUNGOWdCLEtBQUtrVCxpQ0FBaUNoRSxtQ0FDbENDLFNBR0ZuUCxLQUFLMkosMEJBQTBCK3NCLHNCQUFzQjVWLFNBQ3JEOWdCLEtBQUtrVCxpQ0FBaUM3SCxhLENBVWhELGFBUE1yTCxLQUFLMkosMEJBQTBCZ0wsWUFBWSxDQUFDLEVBQUcsQ0FBRStILE9BQVEsQ0FBRTVTLG9CQUMzRDlKLEtBQUtrVCxpQ0FBaUM1RyxjQUFjeEMsRUFBVWlMLEVBQUswQyxTQUVyRXNlLEdBQW9DLG1CQUFmQSxHQUNyQkEsS0FHRyxDLENBQ1QsTUFBT2xyQixHQUNMLEdBQXFCLGlCQUFWQSxFQUNQLE1BQU0sSUFBSXBMLE1BQU1vTCxHQUdwQixNQUFNQSxDLENBRWQsRSxDQUVjLHVCQUFBc3JCLENBQ1ZwaEIsRyx5Q0FFQSxNQUFNeEgsRUFBVXZOLEtBQUtrVCxpQ0FBaUM1RixXQUFXLENBQzdEUyxLQUFNZ0gsRUFBSytMLGdCQUFnQi9TLEtBQzNCQyxZQUFhK0csRUFBSytMLGdCQUFnQjlTLFlBQ2xDQyxXQUFZOEcsRUFBSytMLGdCQUFnQjdTLFdBQ2pDRSxvQkFBcUI0RyxFQUFLK0wsZ0JBQWdCOVcsUUFHOUMsVUFHVWhLLEtBQUsySiwwQkFBMEI0c0IscUJBQXFCaHBCLFNBQ3BEdk4sS0FBSzJKLDBCQUEwQitzQixzQkFBc0JucEIsR0FFM0QsTUFBTW9wQixFQUFpQjMyQixLQUFLa1QsaUNBQWlDbkcsaUNBRXZEL00sS0FBSzJKLDBCQUEwQml0QixxQkFBcUJELEVBQWV2dUIsVUFDbkVwSSxLQUFLa1QsaUNBQWlDN0gsYSxDQUM5QyxNQUFPUixHQUNMLEdBQXFCLGlCQUFWQSxFQUNQLE1BQU0sSUFBSXBMLE1BQU1vTCxHQUdwQixNQUFNQSxDLENBRWQsRSxDQUVjLHVCQUFBdXJCLENBQ1ZyaEIsRyx5Q0FFQSxNQUFNNGhCLEVBQWlCMzJCLEtBQUtrVCxpQ0FBaUNuRyx5QkFDekRnSSxFQUFLckosdUJBQXVCdEQsSUFHaEMsVUFDVXBJLEtBQUsySiwwQkFBMEJpdEIscUJBQXFCRCxFQUFldnVCLFVBQ25FcEksS0FBS2tULGlDQUFpQzdILGEsQ0FDOUMsTUFBT1IsR0FDTCxHQUFxQixpQkFBVkEsRUFDUCxNQUFNLElBQUlwTCxNQUFNb0wsR0FHcEIsTUFBTUEsQyxDQUVkLEUsQ0FPUSxnQ0FBQTBMLENBQWlDek0sRyxNQUtyQyxPQUF1QyxRQUFoQyxFQUpPOUosS0FBSzJKLDBCQUEwQk0sV0FFbkNHLHdCQUEwRE4sR0FFL0N0RywwQkFBa0IsZUFBRWtWLHNCQUFzQixDQUNuRSxFQ3RRSixNQVFBLEdBQWVwYSxFQU5WcUwsR0FDRCxJQUFJK3RCLEdBQ0EvdEIsRUFDQSxFQUF1Q0EsSUFHdUIsQ0FBQyxDQUFFdkIsR0FBSSxvQkM2QjdFLEdBNUNBLFVBQStDLE9BQzNDMUMsSUFFQSxNQUFNaU4sRUFBdUMsQ0FBQyxFQXNDOUMsT0FwQ0lqTixFQUFPSixRQUNQcU4sRUFBZXJOLE1BQVFJLEVBQU9KLE9BRzlCSSxFQUFPa04sU0FDUEQsRUFBZUMsT0FBU2xOLEVBQU9rTixTQUcvQmxOLEVBQU8sY0FBZ0JBLEVBQU8sb0JBQzlCaU4sRUFBZUUsS0FBTyxDQUFDLEVBRW5Cbk4sRUFBTyxlQUNQaU4sRUFBZUUsS0FBSy9TLEtBQU80RixFQUFPLGNBR2xDQSxFQUFPLG1CQUNQaU4sRUFBZUUsS0FBS3pMLFNBQVcxQixFQUFPLG1CQUkxQ0EsRUFBT29OLFFBQ1BILEVBQWVHLE1BQVFwTixFQUFPb04sUUFHOUJwTixFQUFPLGVBQWlCQSxFQUFPLGdCQUMvQmlOLEVBQWVJLEtBQU8sQ0FBQyxFQUVuQnJOLEVBQU8sZ0JBQ1BpTixFQUFlSSxLQUFLek4sTUFBUUksRUFBTyxlQUduQ0EsRUFBTyxlQUNQaU4sRUFBZUksS0FBSzFOLE1BQVFLLEVBQU8sZUFJcENpTixDQUNYLEUsdVNDaEJlLE1BQU1zbEIsR0FDakIsV0FBQXY0QixDQUNZaUssRUFDQSthLEVBQ0F2UixHQUZBLEtBQUF4SiwwQkFBQUEsRUFDQSxLQUFBK2EseUJBQUFBLEVBQ0EsS0FBQXZSLGtCQUFBQSxDQUNULENBRUcsVUFBQUUsQ0FDRnhRLEcsK0NBRUEsTUFBTSxxQkFBRWdXLEVBQW9CLFlBQUVvUCxFQUFXLFNBQUVuZSxHQUFhakgsR0FDbEQsd0JBQ0Y0SCxFQUNBL0ksYUFBY3FJLEVBQW9CLHFCQUNsQ211QixHQUNBcmYsR0FBd0IsQ0FBQyxFQUV2QjhlLElBQWlCbHRCLEVBRXZCLElBQUtYLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLa1csRUFDRCxNQUFNLElBQUlsVyxFQUNOLHdGQUlSLElBQUs4RyxFQUNELE1BQU0sSUFBSTlHLEVBQ04saUdBSVIsR0FBSTRsQixJQUFpQjV0QixFQUNqQixNQUFNLElBQUlnSSxFQUNOLDhHQUlSLEdBQ0k0bEIsR0FDNkQsbUJBQXREbHRCLGFBQXVCLEVBQXZCQSxFQUF5QkUsMEJBRWhDLE1BQU0sSUFBSW9ILEVBQ04sMEtBSUg0bEIsVUFHSzMzQixLQUFLMkosMEJBQTBCaXVCLHVCQUd6QyxNQUFNNXRCLEVBQVFoSyxLQUFLMkosMEJBQTBCTSxXQUt2Q3ZJLEVBQWVpMkIsRUFDZjV0QixFQUNBQyxFQUFNRSxpQkFBaUJuRyxTQUFTb0csV0FFaENuSyxLQUFLMGtCLHlCQUF5QjNpQixjQUFjK0gsRUFBVXBJLEdBQWMsR0FFMUUxQixLQUFLZ1UsYUFBYWlVLEVBQWFuZSxFQUFVK08sR0FHekMsTUFBTWdDLEVBQVc3USxFQUFNOFEsd0JBQXdCQyxpQkFBaUJGLFNBSWhFLEdBRjBELFFBQXRELEVBQUFBLEVBQVMscURBQTZDLFNBR3RELE9BR0osTUFBTXNkLEVBQ0ZELEdBQXdCN3hCLFNBQVNDLGVBQWU0eEIsR0FFcEQsR0FBSXgyQixHQUFnQnkyQixFQUFvQixDQUNwQyxNQUFNMTJCLEVBQWdCdUksRUFBTUksd0JBQWtETixJQUV4RSx3QkFBRTJKLEVBQTBCLElBQU9oUyxFQUFjK0Isb0JBQXNCLENBQUMsRUFDeEVtUSxFQUNGRixHQUEyQkEsRUFBd0J2RyxLQUFLLEVBQUc5RSxRQUFnQixTQUFQQSxHQUV4RSxLQUFLdUwsYUFBbUIsRUFBbkJBLEVBQXFCOUssUUFDdEIsT0FJSnN2QixFQUFtQkMsZ0JBQWdCLDJCQUNuQ0QsRUFBbUJDLGdCQUFnQiwrQkFDbkNELEVBQW1CQyxnQkFBZ0IsNEJBQ25DRCxFQUFtQkMsZ0JBQWdCLDJCQUVuQyxNQUFNL3RCLFFBQWtCckssS0FBS21ULGtCQUFrQjFRLGtCQUMzQ2hCLEVBQ0FDLEdBR0oxQixLQUFLNlQsZUFBZXhKLEVBQVc2dEIsRUFBc0J2a0IsRSxJQUk3RCxZQUFBK0IsR0FDSSxPQUFPVCxRQUFRVSxTQUNuQixDQUVRLFlBQUEzQixDQUNKaVUsRUFDQW5lLEVBQ0ErTyxHQUVBLE1BQU0sd0JBQUVwTyxFQUF1QixNQUFFbEUsRUFBSyxXQUFFd3ZCLEVBQVUscUJBQUU4QixHQUNoRGhmLEVBRUV4TyxFQUFZckssS0FBSzBrQix5QkFBeUJuYSxzQkFFMUM5SSxFQURRekIsS0FBSzJKLDBCQUEwQk0sV0FDakJHLHdCQUFrRE4sSUFDeEUsd0JBQUU1RixFQUF1QixtQkFBRXdVLEdBQzdCalgsRUFBYytCLG9CQUFzQixDQUFDLEVBRW5DeXlCLEVBQW1CLENBQ3JCbnJCLFlBQWEsSUFBTTlLLEtBQUswa0IseUJBQXlCNVosWUFBWSx3QkFDN0RrTSxVQUFXLEVBQUdTLGFBQ1Z6WCxLQUFLMGtCLHlCQUF5QjdZLGdCQUFnQi9CLEVBQVUyTixJQUcxRHVnQixFQUFzQixDQUN4QnBoQixRQUFTLElBQU01VyxLQUFLK1csWUFBWXRNLEdBQ2hDeU0sU0FBVSxJQUFNbFgsS0FBSzJKLDBCQUEwQml1Qix1QkFHN0MxQixFQUEwQixPQUFILHlCQUNwQnhkLEdBQXNCLENBQ3ZCeWQsd0JBQTBCcGhCLEdBQ3RCL1UsS0FBS20yQix3QkFBd0JwaEIsR0FDakNxaEIsd0JBQTBCcmhCLEdBQ3RCL1UsS0FBS28yQix3QkFBd0JyaEIsS0FDbkMsQ0FDRmlDLFVBQVcsQ0FBQ2pDLEVBQThCK0IsSUFDdEM5VyxLQUFLcTJCLHdCQUF3QnRoQixFQUFNK0IsRUFBU2hOLEVBQVVpc0IsS0FHeERoZCxFQUFpQixDQUFDMU8sRUFBVXFNLFFBQVFzQyxTQUFVM08sRUFBVXFNLFFBQVF1QyxRQUN0RSxJQUFJQyxHQUF5QixFQUU3QkgsRUFBZWhVLFFBQVMwUixJQUNwQixJQUFLeUMsRUFBd0IsQ0FDekIsTUFBTW9kLEVBQW1CLDJDQUNyQjdmLGdCQUNBbFEsTUFBT3ZHLEtBQUswa0IseUJBQXlCbFYsb0JBQW9CakosSUFDdEQwdkIsR0FDQ3hyQixHQUEyQnV0QixHQUMzQjl6QixHQUEyQmd5QixHQUc3QjVnQixFQUFlakwsRUFBVStNLFFBQVFrZixHQUVuQ2hoQixFQUFhK0IsY0FDYi9CLEVBQWFrQyxPQUFPLElBQUl5USxLQUN4Qi9PLEdBQXlCLEdBQ2xCMmUsR0FBd0QsbUJBQXpCQSxHQUN0Q0EsRyxJQUtQM2UsR0FDRGxaLEtBQUswa0IseUJBQXlCM1UsY0FBY2tZLEVBRXBELENBRWMsV0FBQWxSLENBQ1Z0TSxHLHlDQUVBLEdBQUlBLEVBQXlCLENBQ3pCLE1BQU1xdEIsUUFBbUI5M0IsS0FBSzBrQix5QkFBeUJsYSx3QkFDbkRDLFNBR0V6SyxLQUFLMkosMEJBQTBCb3VCLGFBQWFELEVBQVcxdkIsRyxDQUVyRSxFLENBRWMsdUJBQUFpdUIsQ0FDVnRoQixFQUNBK0IsRUFDQWhOLEVBQ0Fpc0IsRyx5Q0FFQSxJQUFLaGhCLEVBQUswQyxRQUNOLE1BQU0sSUFBSXBYLEVBQWlCakMsRUFBcUIyQyxnQkFHcEQsTUFDTXVLLEVBRFF0TCxLQUFLMkosMEJBQTBCTSxXQUMxQkMsaUJBQ2JpRixRQUFxQjJILEVBQVF6QyxNQUFNblYsTUFFekMsSUFDSSxNQUFNMGhCLEVBQ0Y1Z0IsS0FBSzBrQix5QkFBeUJyVyxrQ0FBa0NjLEdBSXBFLFNBRk1uUCxLQUFLMkosMEJBQTBCNHNCLHFCQUFxQjNWLEdBRXREdFYsRUFBS2tyQixVQUFVQyxjQUFjOXhCLE9BQVMsRUFBRyxDQUN6QyxNQUFNbWMsRUFDRjlnQixLQUFLMGtCLHlCQUF5QnhWLG1DQUFtQ0MsU0FFL0RuUCxLQUFLMkosMEJBQTBCK3NCLHNCQUFzQjVWLFNBQ3JEOWdCLEtBQUswa0IseUJBQXlCclosWUFBWSxpQixDQVVwRCxhQVBNckwsS0FBSzJKLDBCQUEwQmdMLFlBQVksQ0FBQyxFQUFHLENBQUUrSCxPQUFRLENBQUU1UyxvQkFDM0Q5SixLQUFLMGtCLHlCQUF5QnBZLGNBQWN4QyxFQUFVaUwsRUFBSzBDLFNBRTdEc2UsR0FBb0MsbUJBQWZBLEdBQ3JCQSxLQUdHLEMsQ0FDVCxNQUFPbHJCLEdBQ0wsR0FBcUIsaUJBQVZBLEVBQ1AsTUFBTSxJQUFJcEwsTUFBTW9MLEdBR3BCLE1BQU1BLEMsQ0FFZCxFLENBRWMsdUJBQUFzckIsQ0FDVnBoQixHLHlDQUVBLE1BQU14SCxFQUFVdk4sS0FBSzBrQix5QkFBeUJwWCxXQUFXLENBQ3JEUyxLQUFNZ0gsRUFBSytMLGdCQUFnQi9TLEtBQzNCQyxZQUFhK0csRUFBSytMLGdCQUFnQjlTLFlBQ2xDQyxXQUFZOEcsRUFBSytMLGdCQUFnQjdTLFdBQ2pDRSxvQkFBcUI0RyxFQUFLK0wsZ0JBQWdCOVcsUUFHOUMsVUFHVWhLLEtBQUsySiwwQkFBMEI0c0IscUJBQXFCaHBCLFNBQ3BEdk4sS0FBSzJKLDBCQUEwQitzQixzQkFBc0JucEIsR0FFM0QsTUFBTW9wQixFQUFpQjMyQixLQUFLMGtCLHlCQUF5QjNYLGlDQUUvQy9NLEtBQUsySiwwQkFBMEJpdEIscUJBQXFCRCxFQUFldnVCLFVBQ25FcEksS0FBSzBrQix5QkFBeUJyWixZQUFZLGlCLENBQ2xELE1BQU9SLEdBQ0wsR0FBcUIsaUJBQVZBLEVBQ1AsTUFBTSxJQUFJcEwsTUFBTW9MLEdBR3BCLE1BQU1BLEMsQ0FFZCxFLENBRWMsdUJBQUF1ckIsQ0FDVnJoQixHLHlDQUVBLE1BQU00aEIsRUFBaUIzMkIsS0FBSzBrQix5QkFBeUIzWCx5QkFDakRnSSxFQUFLckosdUJBQXVCdEQsSUFHaEMsVUFDVXBJLEtBQUsySiwwQkFBMEJpdEIscUJBQXFCRCxFQUFldnVCLFVBQ25FcEksS0FBSzBrQix5QkFBeUJyWixZQUFZLGlCLENBQ2xELE1BQU9SLEdBQ0wsR0FBcUIsaUJBQVZBLEVBQ1AsTUFBTSxJQUFJcEwsTUFBTW9MLEdBR3BCLE1BQU1BLEMsQ0FFZCxFLENBRVEsY0FBQWdKLENBQ0p3a0IsRUFDQUgsRUFDQXZrQixHQUVBLE1BRU11RSxFQUEwQyxDQUM1Q0MsT0FIYW5ZLEtBQUsySiwwQkFBMEJNLFdBQVdtTyxxQkFHdENDLG1CQUNqQkMsVUFBVyxPQUNYL1IsTUFBTyxHQUFzQ29OLElBRzFCMGtCLEVBQWtCemtCLFNBQVNzRSxHQUVuQ1YsT0FBTyxJQUFJMGdCLElBQzlCLEVDNVRKLE1BU0EsR0FBZTU1QixFQVBWcUwsR0FDRCxJQUFJc3VCLEdBQ0F0dUIsRUFDQSxHQUErQkEsR0FDL0JpUSxNQUdvRSxDQUN4RSxDQUFFeFIsR0FBSSwwQix1U0NESyxNQUFNa3dCLEdBQ2pCLFdBQUE1NEIsQ0FDWWlLLEVBQ0F1SixHQURBLEtBQUF2SiwwQkFBQUEsRUFDQSxLQUFBdUosaUNBQUFBLENBQ1QsQ0FFRyxVQUFBRyxDQUNGeFEsRyx5Q0FFQSxNQUFNLG9CQUFFd1csRUFBbUIsWUFBRTRPLEVBQVcsU0FBRW5lLEdBQWFqSCxHQUNqRCx3QkFBRTRILEVBQXlCL0ksYUFBY3FJLEdBQzNDc1AsR0FBdUIsQ0FBQyxFQUV0QnNlLElBQWlCbHRCLEVBRXZCLElBQUtYLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLa1csRUFDRCxNQUFNLElBQUlsVyxFQUNOLHdGQUlSLElBQUtzSCxFQUNELE1BQU0sSUFBSXRILEVBQ04sZ0dBSVIsR0FBSTRsQixJQUFpQjV0QixFQUNqQixNQUFNLElBQUlnSSxFQUNOLDZHQUlSLEdBQ0k0bEIsR0FDNkQsbUJBQXREbHRCLGFBQXVCLEVBQXZCQSxFQUF5QkUsMEJBRWhDLE1BQU0sSUFBSW9ILEVBQ04seUtBSUg0bEIsVUFHSzMzQixLQUFLMkosMEJBQTBCaXVCLHVCQU16QyxNQUFNbDJCLEVBQWVpMkIsRUFDZjV0QixFQUNBL0osS0FBSzJKLDBCQUEwQk0sV0FBV0MsaUJBQWlCbkcsU0FBU29HLFdBRXBFbkssS0FBS2tULGlDQUFpQ25SLGNBQWMrSCxFQUFVcEksR0FBYyxHQUVsRjFCLEtBQUtnVSxhQUFhaVUsRUFBYW5lLEVBQVV1UCxFQUM3QyxFLENBRUEsWUFBQTNELEdBQ0ksT0FBT1QsUUFBUVUsU0FDbkIsQ0FFUSxZQUFBM0IsQ0FDSmlVLEVBQ0FuZSxFQUNBdVAsR0FFQSxNQUFNLHdCQUFFNU8sRUFBdUIsTUFBRWxFLEVBQUsscUJBQUVzeEIsR0FBeUJ4ZSxFQUUzRGhQLEVBQVlySyxLQUFLa1QsaUNBQWlDM0ksc0JBQ2xEa00sRUFBZ0JwTSxFQUFVcU0sUUFBUTRDLE1BRWxDMmMsRUFBbUIsQ0FDckJuckIsWUFBYSxJQUNUOUssS0FBS2tULGlDQUFpQ3BJLFlBQVksdUJBQ3REa00sVUFBVyxFQUFHUyxhQUNWelgsS0FBS2tULGlDQUFpQ3JILGdCQUFnQi9CLEVBQVUyTixJQUdsRXVnQixFQUFzQixDQUN4QnBoQixRQUFTLElBQU01VyxLQUFLK1csWUFBWXRNLEdBQ2hDeU0sU0FBVSxJQUFNbFgsS0FBSzJKLDBCQUEwQml1Qix1QkFHN0N0QixFQUFtQiw2QkFDckI3ZixnQkFDQWxRLE1BQU92RyxLQUFLdTRCLDBCQUEwQmh5QixJQUNuQzB2QixHQUNDeHJCLEdBQTJCdXRCLEdBRzdCaEIsRUFBcUIzc0IsRUFBVStNLFFBQVFrZixHQUV6Q1UsRUFBbUIzZixhQUNuQjJmLEVBQW1CeGYsT0FBTyxJQUFJeVEsS0FDdkI0UCxHQUF3RCxtQkFBekJBLEVBQ3RDQSxJQUVBNzNCLEtBQUtrVCxpQ0FBaUNuRCxjQUFja1ksRUFFNUQsQ0FFUSx5QkFBQXNRLENBQTBCaHlCLEdBQzlCLE1BQU1peUIsRUFBbUJ4NEIsS0FBS2tULGlDQUFpQzFELG9CQUFvQmpKLEdBRW5GLE9BQUlpeUIsRUFBaUJsekIsUUFBVStELEVBQWlCb3ZCLEtBQ3JDLE9BQVAsd0JBQ09ELEdBQWdCLENBQ25CbHpCLFdBQU9WLElBSVI0ekIsQ0FDWCxDQUVjLFdBQUF6aEIsQ0FDVnRNLEcseUNBRUEsR0FBSUEsRUFBeUIsQ0FDekIsTUFBTXF0QixRQUFtQjkzQixLQUFLa1QsaUNBQWlDMUksd0JBQzNEQyxTQUdFekssS0FBSzJKLDBCQUEwQm91QixhQUFhRCxFQUFXMXZCLEcsQ0FFckUsRSxFQ2hKSixNQVFBLEdBQWU5SixFQU5WcUwsR0FDRCxJQUFJMnVCLEdBQ0EzdUIsRUFDQSxFQUF1Q0EsSUFHNEIsQ0FDdkUsQ0FBRXZCLEdBQUkseUIsdVNDQUssTUFBTXN3QixHQUdqQixXQUFBaDVCLENBQ1lpSyxFQUNBK2EsR0FEQSxLQUFBL2EsMEJBQUFBLEVBQ0EsS0FBQSthLHlCQUFBQSxDQUNULENBRUcsVUFBQXJSLENBQ0Z4USxHLHlDQUdBLE1BQU0saUNBQUU4WCxFQUFnQyxZQUFFc04sRUFBVyxTQUFFbmUsR0FBYWpILEdBQzlELElBQ0Y0QixFQUFHLHdCQUNIZ0csRUFDQS9JLGFBQWNxSSxHQUNkNFEsR0FBb0MsQ0FBQyxFQUVuQ2dkLElBQWlCbHRCLEVBRXZCLElBQUtYLEVBQ0QsTUFBTSxJQUFJaUksRUFDTixxRkFJUixJQUFLa1csRUFDRCxNQUFNLElBQUlsVyxFQUNOLHdGQUlSLElBQUs0SSxFQUNELE1BQU0sSUFBSTVJLEVBQ04sNkdBSVIsSUFBS3ROLEVBQ0QsTUFBTSxJQUFJc04sRUFDTixpSEFJUixHQUFJNGxCLElBQWlCNXRCLEVBQ2pCLE1BQU0sSUFBSWdJLEVBQ04sMEhBSVIsR0FDSTRsQixHQUM2RCxtQkFBdERsdEIsYUFBdUIsRUFBdkJBLEVBQXlCRSwwQkFFaEMsTUFBTSxJQUFJb0gsRUFDTixzTEFJSDRsQixVQUdLMzNCLEtBQUsySiwwQkFBMEJpdUIsdUJBTXpDLE1BQU1sMkIsRUFBZWkyQixFQUNmNXRCLEVBQ0EvSixLQUFLMkosMEJBQTBCTSxXQUFXQyxpQkFBaUJuRyxTQUFTb0csV0FFcEVuSyxLQUFLMGtCLHlCQUF5QjNpQixjQUFjK0gsRUFBVXBJLEdBQWMsR0FFMUUxQixLQUFLZ1UsYUFBYWlVLEVBQWFuZSxFQUFVNlEsRUFDN0MsRSxDQUVBLFlBQUFqRixHQUNJLE9BQU9ULFFBQVFVLFNBQ25CLENBRVEsWUFBQTNCLENBQ0ppVSxFQUNBbmUsRUFDQTZRLEdBRUEsTUFBTSxJQUFFbFcsRUFBRyx3QkFBRWdHLEVBQXVCLE1BQUVsRSxFQUFLLHFCQUFFc3hCLEdBQ3pDbGQsRUFFRXRRLEVBQVlySyxLQUFLMGtCLHlCQUF5Qm5hLHNCQUdoRCxJQUZpQzlMLE9BQU9nc0IsT0FBT3BnQixFQUFVcU0sU0FBU2hTLFNBQVNELEdBR3ZFLE1BQU0sSUFBSXNOLEVBQ04sbUlBSVIsTUFBTWtrQixFQUFtQixDQUNyQm5yQixZQUFhLElBQ1Q5SyxLQUFLMGtCLHlCQUF5QjVaLFlBQVksbUNBQzlDa00sVUFBVyxFQUFHUyxhQUNWelgsS0FBSzBrQix5QkFBeUI3WSxnQkFBZ0IvQixFQUFVMk4sSUFHMUR1Z0IsRUFBc0IsQ0FDeEJwaEIsUUFBUyxJQUFNNVcsS0FBSytXLFlBQVl0TSxHQUNoQ3lNLFNBQVUsSUFBTWxYLEtBQUsySiwwQkFBMEJpdUIsdUJBRzdDdEIsRUFBbUIsNkJBQ3JCN2YsY0FBZWhTLEVBQ2Y4QixNQUFPdkcsS0FBSzBrQix5QkFBeUJsVixvQkFBb0JqSixJQUN0RDB2QixHQUNDeHJCLEdBQTJCdXRCLEdBRzdCaEIsRUFBcUIzc0IsRUFBVStNLFFBQVFrZixHQUV6Q1UsRUFBbUIzZixhQUNuQjJmLEVBQW1CeGYsT0FBTyxJQUFJeVEsS0FDdkI0UCxHQUF3RCxtQkFBekJBLEVBQ3RDQSxJQUVBNzNCLEtBQUswa0IseUJBQXlCM1UsY0FBY2tZLEVBRXBELENBRWMsV0FBQWxSLENBQ1Z0TSxHLHlDQUVBLEdBQUlBLEVBQXlCLENBQ3pCLE1BQU1xdEIsUUFBbUI5M0IsS0FBSzBrQix5QkFBeUJsYSx3QkFDbkRDLFNBR0V6SyxLQUFLMkosMEJBQTBCb3VCLGFBQWFELEVBQVcxdkIsRyxDQUVyRSxFLEVDcEpKLE1BUUEsR0FBZTlKLEVBTlZxTCxHQUNELElBQUkrdUIsR0FDQS91QixFQUNBLEdBQStCQSxJQUdpRCxDQUNwRixDQUFFdkIsR0FBSSxzQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ib290c3RyYXA/ZmZjYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9taXNzaW5nLWRhdGEtZXJyb3IudHM/YjdkYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3RvLXJlc29sdmFibGUtbW9kdWxlLnRzP2Q1MjAiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnM/OTk0YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQ/OWVhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zdGFuZGFyZC1lcnJvci50cz84YTAzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3NldC1wcm90b3R5cGUtb2YudHM/ODQ1YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLXV0aWxzL3NyYy9wYXlwYWwtY29tbWVyY2Utc2RrLnRzP2ZjZTgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3VpL3NyYy9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci50cz9iMDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2J1eS1ub3ctY2FydC1jcmVhdGlvbi1lcnJvci50cz9kNjA0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3JlcXVlc3QtZXJyb3IudHM/Yzg0MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NhcnQvY2FydC1zb3VyY2UudHM/Mzg4YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdHlwZXMudHM/MzU2MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZS50cz82MzVjIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9pbnRlcm5hbC1hcGktaGVhZGVycy50cz80MTExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL2h0dHAtcmVxdWVzdC9jb250ZW50LXR5cGUudHM/NTA0ZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2NvbW1vbi9odHRwLXJlcXVlc3Qvc2RrLXZlcnNpb24taGVhZGVycy50cz83YmYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1yZXF1ZXN0LXNlbmRlci50cz9kN2E5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1zY3JpcHQtbG9hZGVyLnRzPzY0ZTgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzNmOTgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cy50cz83ZDQ5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2ludmFsaWQtYXJndW1lbnQtZXJyb3IudHM/MzkyMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LWFyZ3VtZW50LWludmFsaWQtZXJyb3IudHM/YTUwMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1pbnZhbGlkLWVycm9yLnRzPzNhZGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaXMtcmVxdWVzdC1lcnJvci50cz9iNDNkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2dldC1wYXlwYWwtbWVzc2FnZXMtc3R5bGVzLWZyb20tYm5wbC1jb25maWcudHM/MDUwOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvdXRpbGl0eS9zcmMvaXMtYmFzZS1pbnN0cnVtZW50L2lzLWJhc2UtaW5zdHJ1bWVudC50cz9lOTJmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneS50cz8xZjJiIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXJlZGlyZWN0LWFjdGlvbi1lcnJvci50cz81NTIzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL3V0aWxzL2lzLXBheXBhbC1jb21tZXJjZS1wcm92aWRlci1lcnJvci50cz9jNzRkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXBheW1lbnQtc3RyYXRlZ3kudHM/Mjc2YiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9ub3QtaW1wbGVtZW50ZWQtZXJyb3IudHM/M2EzNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0L3BheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1zdHJhdGVneS50cz83YWY0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtcGF5bWVudC1zdHJhdGVneS50cz84OTZhIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2Utc2RrLnRzPzFkNTYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL3BheXBhbC1jb21tZXJjZS12ZW5tby1wYXltZW50LXN0cmF0ZWd5LnRzPzg4ZmUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtdmVubW8tcGF5bWVudC1zdHJhdGVneS50cz83ODk3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC10eXBlcy50cz8xMzdmIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC1zZGstc2NyaXB0LWxvYWRlci50cz9lMTU3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtc2RrLXNjcmlwdC1sb2FkZXIudHM/ZmNiZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy9wYXlwYWwtaW50ZWdyYXRpb24tc2VydmljZS50cz82MmU4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC1yZXF1ZXN0LXNlbmRlci50cz83Zjk1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtaW50ZWdyYXRpb24tc2VydmljZS50cz9jNzYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3RpbWVvdXQtZXJyb3IudHM/MDgwZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1wYXltZW50LXN0cmF0ZWd5LnRzP2Q3MzciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3V0aWxpdHkvc3JjL2lzLWV4cGVyaW1lbnQtZW5hYmxlZC9pcy1leHBlcmltZW50LWVuYWJsZWQudHM/YzlhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1zdHJhdGVneS50cz9lYWQ5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pbnN0cnVtZW50LnRzP2YyYjYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0b3JhZ2Uvc3JjL2Nvb2tpZS1zdG9yYWdlLnRzPzE1M2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9ob3N0ZWQtZmllbGQtdHlwZS50cz82NWQ4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3BheXBhbC1mYXN0bGFuZS11dGlscy50cz8yMjkwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL2NyZWF0ZS1wYXlwYWwtZmFzdGxhbmUtdXRpbHMudHM/N2E4YyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2hvc3RlZC1mb3JtL2lzLWNyZWRpdC1jYXJkLWZvcm0tZmllbGRzLnRzPzBmYWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9ob3N0ZWQtZm9ybS9pcy1jcmVkaXQtY2FyZC12YXVsdGVkLWZvcm0tZmllbGRzLnRzP2YzYjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1tZXRob2QtZmFpbGVkLWVycm9yLnRzPzA3ZGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcGF5bWVudC1pbnZhbGlkLWZvcm0tZXJyb3IudHM/YzBmYiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWNhcmQvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5LnRzPzEwZTYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWNvbW1lcmNlLWFjY2VsZXJhdGVkLWNoZWNrb3V0LWN1c3RvbWVyLnRzPzczZjMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWNhcmRzLXBheW1lbnQtc3RyYXRlZ3kudHM/NjdlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS9wYXlwYWwtY29tbWVyY2UtcmF0ZXBheS1wYXltZW50LXN0cmF0ZWd5LnRzPzIyMDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXkvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3kudHM/NzA0ZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLXV0aWxzL3NyYy91dGlscy9nZXQtZmFzdGxhbmUtc3R5bGVzLnRzP2QwZDciLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLWN1c3RvbWVyLnRzPzU5OTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzP2QxNWYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC11dGlscy9zcmMvdXRpbHMvaXMtcGF5cGFsLWZhc3RsYW5lLXJlcXVlc3QtZXJyb3IudHM/YmU4YiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5LnRzPzQwMGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlL3BheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz80ZTUzIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY2hlY2tvdXQtYnV0dG9ucy9kZWZhdWx0LWNoZWNrb3V0LWJ1dHRvbi1oZWlnaHQudHM/ZDQyNSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jdXN0b21lci1zdHJhdGVneS50cz8zMDgwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jdXN0b21lci1zdHJhdGVneS50cz80ZDYwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1jcmVkaXQvY3JlYXRlLXBheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3kudHM/MzVhZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWN1c3RvbWVyLXN0cmF0ZWd5LnRzP2NkYmYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLXZlbm1vL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItc3RyYXRlZ3kudHM/NmFkOCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzk5NmUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3kudHM/MmZhNCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UvcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1zdHJhdGVneS50cz80YzlkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1zdHJhdGVneS50cz9hZjVkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtdXRpbHMvc3JjL3V0aWxzL2dldC1wYXlwYWwtbWVzc2FnZXMtc3R5bGVzLWZyb20tYm5wbC1jb25maWcudHM/ZjZmMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtY3JlZGl0L3BheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLXN0cmF0ZWd5LnRzPzE4Y2UiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi9zcmMvcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24tc3RyYXRlZ3kudHM/NmVlMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uL3NyYy9wYXlwYWwtY29tbWVyY2UtdmVubW8vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1zdHJhdGVneS50cz9mZTIyIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS12ZW5tby9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLXZlbm1vLWJ1dHRvbi1zdHJhdGVneS50cz8xMzEwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneS50cz81ZjI3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24vc3JjL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtYWx0ZXJuYXRpdmUtbWV0aG9kcy1idXR0b24tc3RyYXRlZ3kudHM/ZjJmMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBlbnVtIE1pc3NpbmdEYXRhRXJyb3JUeXBlIHtcbiAgICBNaXNzaW5nQmlsbGluZ0FkZHJlc3MsXG4gICAgTWlzc2luZ0NhcnQsXG4gICAgTWlzc2luZ0NoZWNrb3V0LFxuICAgIE1pc3NpbmdDb25zaWdubWVudHMsXG4gICAgTWlzc2luZ0N1c3RvbWVyLFxuICAgIE1pc3NpbmdDaGVja291dENvbmZpZyxcbiAgICBNaXNzaW5nT3JkZXIsXG4gICAgTWlzc2luZ09yZGVyQ29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcklkLFxuICAgIE1pc3NpbmdQYXltZW50LFxuICAgIE1pc3NpbmdQYXltZW50SWQsXG4gICAgTWlzc2luZ1BheW1lbnRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdQYXltZW50TWV0aG9kLFxuICAgIE1pc3NpbmdQYXltZW50UmVkaXJlY3RVcmwsXG4gICAgTWlzc2luZ1BheW1lbnRTdGF0dXMsXG4gICAgTWlzc2luZ1BheW1lbnRUb2tlbixcbiAgICBNaXNzaW5nU2hpcHBpbmdBZGRyZXNzLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3Igd2hlbiBkYXRhIHRoYXQgaXMgZXhwZWN0ZWQgdG8gZXhpc3QgaXMgbWlzc2luZy4gVXN1YWxseSBpdFxuICogaXMgZHVlIHRvIHRoZSBmYWN0IHRoYXQgY2VydGFpbiBkYXRhIGhhcyBub3QgYmVlbiByZXRyaWV2ZWQgZnJvbSBvciBzYXZlZCB0b1xuICogdGhlIHNlcnZlciB5ZXQuIEFuZCBzdWNoIGRhdGEgaXMgcmVxdWlyZWQgdG8gcGVyZm9ybSBjZXJ0YWluIGFjdGlvbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3NpbmdEYXRhRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3VidHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpIHtcbiAgICAgICAgc3VwZXIoZ2V0RXJyb3JNZXNzYWdlKHN1YnR5cGUpKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnTWlzc2luZ0RhdGFFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdtaXNzaW5nX2RhdGEnO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKHR5cGU6IE1pc3NpbmdEYXRhRXJyb3JUeXBlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3M6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgYmlsbGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDYXJ0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNhcnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NvbnNpZ25tZW50czpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjb25zaWdubWVudHMgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NoZWNrb3V0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNoZWNrb3V0IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBjdXN0b21lciBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWc6XG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyQ29uZmlnOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIG9yZGVyIElEIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBnZW5lcmF0ZWQgeWV0Lic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW46XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHRva2VuIHJlcXVpcmVkIHRvIHN1Ym1pdCBhIHBheW1lbnQgaXMgbWlzc2luZy4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2Q6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgcGF5bWVudCBtZXRob2QgZGF0YSBpcyB1bmF2YWlsYWJsZSBvciBub3QgcHJvcGVybHkgY29uZmlndXJlZC4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1NoaXBwaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBzaGlwcGluZyBhZGRyZXNzIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRNZXRob2QsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSG9zdFdpbmRvdyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxGYXN0bGFuZVNkayxcbiAgICBQYXlQYWxHb29nbGVQYXlTZGssXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrQ29uZmlnLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlU2RrIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhjb25maWcpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEZhc3RsYW5lU2RrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGs7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsR29vZ2xlUGF5U2RrKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsR29vZ2xlUGF5U2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5IHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbEFwbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsQXBtU2RrQ29uZmlndXJhdGlvbihwYXltZW50TWV0aG9kLCBjdXJyZW5jeUNvZGUpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsoY29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsQXBtcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsTWVzc2FnZXNTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcykge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrTWVzc2FnZXNDb25maWcgPSB0aGlzLmdldFBheVBhbFNka01lc3NhZ2VzQ29uZmlndXJhdGlvbihcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFBheVBhbFNkayhwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxNZXNzYWdlcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICBsb2FkUGF5UGFsU2RrIGlzIGEgcGF5cGFsIHNkayBzY3JpcHQgbG9hZGVyXG4gICAgICogIHdoaWNoIGxvYWRzIHBheXBhbCBzZGsgYmFzZWQgb24gcHJvdmlkZWQgY29uZmlndXJhdGlvblxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU2RrKHsgb3B0aW9ucywgYXR0cmlidXRlcyB9OiBQYXlQYWxTZGtDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2NyaXB0T3B0aW9ucyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snb3B0aW9ucyddPihvcHRpb25zKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0QXR0cmlidXRlcyA9IHRoaXMudHJhbnNmb3JtQ29uZmlnPFBheVBhbFNka0NvbmZpZ1snYXR0cmlidXRlcyddPihhdHRyaWJ1dGVzKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICBjb25zdCBzY3JpcHRRdWVyeSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2NyaXB0T3B0aW9ucykudG9TdHJpbmcoKTtcbiAgICAgICAgY29uc3Qgc2NyaXB0U3JjID0gYCR7cGF5cGFsU2RrVXJsfT8ke3NjcmlwdFF1ZXJ5fWA7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHtcbiAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgYXR0cmlidXRlczogc2NyaXB0QXR0cmlidXRlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25maWd1cmF0aW9ucyBzZWN0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldFBheVBhbEZhc3RsYW5lU2RrQ29uZmlndXJhdGlvbihcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbnRlbnQsIGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnZmFzdGxhbmUnLFxuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdwYXltZW50LWZpZWxkcycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RocmVlLWRvbWFpbi1zZWN1cmUnLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLWNsaWVudC1tZXRhZGF0YS1pZCc6IHNlc3Npb25JZC5yZXBsYWNlKC8tL2csICcnKSxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsRmFzdGxhbmVTZGsnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLXNkay1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydnb29nbGVwYXknXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsR29vZ2xlUGF5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGEgfHwgIWluaXRpYWxpemF0aW9uRGF0YS5jbGllbnRJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgY2xpZW50SWQsXG4gICAgICAgICAgICBtZXJjaGFudElkLFxuICAgICAgICAgICAgYnV5ZXJDb3VudHJ5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsXG4gICAgICAgICAgICBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUFQTXNGdW5kaW5nID0gZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM7XG4gICAgICAgIGNvbnN0IGRpc2FibGVBUE1zRnVuZGluZyA9IGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuZmlsdGVyKFxuICAgICAgICAgICAgKGFwbTogc3RyaW5nKSA9PiAhZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMuaW5jbHVkZXMoYXBtKSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBlbmFibGVBUE1zRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJzogZGlzYWJsZUFQTXNGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tbWl0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnYnV0dG9ucycsICdwYXltZW50LWZpZWxkcyddLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgaW50ZW50LFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxBcG1zJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxTZGtNZXNzYWdlc0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApOiBQYXlQYWxTZGtDb25maWcge1xuICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudElkLCBtZXJjaGFudElkLCBhdHRyaWJ1dGlvbklkLCBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLCBidXllckNvdW50cnkgfSA9XG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ21lc3NhZ2VzJ10sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsTWVzc2FnZXMnLFxuICAgICAgICAgICAgICAgICdkYXRhLXBhcnRuZXItYXR0cmlidXRpb24taWQnOiBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzLFxuICAgIExvYWRpbmdJbmRpY2F0b3JTdHlsZXMsXG59IGZyb20gJy4vbG9hZGluZy1pbmRpY2F0b3Itc3R5bGVzJztcblxuY29uc3QgREVGQVVMVF9TVFlMRVM6IExvYWRpbmdJbmRpY2F0b3JTdHlsZXMgPSB7XG4gICAgc2l6ZTogNzAsXG4gICAgY29sb3I6ICcjZDlkOWQ5JyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZmZmZmZmJyxcbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMgPSB7XG4gICAgcG9zaXRpb246ICdmaXhlZCcsXG4gICAgJ2JhY2tncm91bmQtY29sb3InOiAncmdiYSgwLCAwLCAwLCAwLjQpJyxcbiAgICAnei1pbmRleCc6ICcxMDAwJyxcbn07XG5cbmNvbnN0IFJPVEFUSU9OX0FOSU1BVElPTiA9ICdlbWJlZGRlZC1jaGVja291dC1sb2FkaW5nLWluZGljYXRvci1yb3RhdGlvbic7XG5cbmludGVyZmFjZSBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucyB7XG4gICAgc3R5bGVzPzogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBjb250YWluZXJTdHlsZXM/OiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2FkaW5nSW5kaWNhdG9yIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBpbmRpY2F0b3I6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzO1xuICAgIHByaXZhdGUgY29udGFpbmVyU3R5bGVzOiBMb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyU3R5bGVzO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExvYWRpbmdJbmRpY2F0b3JPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc3R5bGVzID0geyAuLi5ERUZBVUxUX1NUWUxFUywgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5zdHlsZXMpIH07XG4gICAgICAgIHRoaXMuY29udGFpbmVyU3R5bGVzID0geyAuLi4ob3B0aW9ucyAmJiBvcHRpb25zLmNvbnRhaW5lclN0eWxlcykgfTtcblxuICAgICAgICB0aGlzLmRlZmluZUFuaW1hdGlvbigpO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5idWlsZENvbnRhaW5lcigpO1xuICAgICAgICB0aGlzLmluZGljYXRvciA9IHRoaXMuYnVpbGRJbmRpY2F0b3IoKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmluZGljYXRvcik7XG4gICAgfVxuXG4gICAgc2hvdyhwYXJlbnRJZD86IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAocGFyZW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBhcmVudElkKTtcblxuICAgICAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gYXR0YWNoIHRoZSBsb2FkaW5nIGluZGljYXRvciBiZWNhdXNlIHRoZSBwYXJlbnQgSUQgaXMgbm90IHZhbGlkLicsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuXG4gICAgaGlkZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlVHJhbnNpdGlvbkVuZCA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGhhbmRsZVRyYW5zaXRpb25FbmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSAnYWxsIDI1MG1zIGVhc2Utb3V0JztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAgICAgdGhpcy5zZXRTdHlsZUF0dHJpYnV0ZShjb250YWluZXIsIHRoaXMuY29udGFpbmVyU3R5bGVzKTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRJbmRpY2F0b3IoKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS53aWR0aCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlciA9ICdzb2xpZCAxcHgnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyQ29sb3IgPSBgJHt0aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ29sb3J9ICR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfSAke3RoaXMuc3R5bGVzLmNvbG9yfWA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5tYXJnaW4gPSAnMCBhdXRvJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5yaWdodCA9ICcwJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRvcCA9ICc1MCUnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybVN0eWxlID0gJ3ByZXNlcnZlLTNkJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmFuaW1hdGlvbiA9IGAke1JPVEFUSU9OX0FOSU1BVElPTn0gNTAwbXMgaW5maW5pdGUgY3ViaWMtYmV6aWVyKDAuNjksIDAuMzEsIDAuNTYsIDAuODMpYDtcblxuICAgICAgICByZXR1cm4gaW5kaWNhdG9yO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0U3R5bGVBdHRyaWJ1dGUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGF0dHJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9KTogdm9pZCB7XG4gICAgICAgIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGssIGF0dHJzW2tdKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWZpbmVBbmltYXRpb24oKTogdm9pZCB7XG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGRlZmluZSBDU1MgYW5pbWF0aW9uLCB3ZSBuZWVkIHRvIGluc2VydCBhIHN0eWxlc2hlZXQgaW50byB0aGUgaG9zdCBmcmFtZS5cbiAgICAgICAgLy8gV2Ugb25seSBoYXZlIHRvIGRvIGl0IG9uY2UuXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChST1RBVElPTl9BTklNQVRJT04pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG5cbiAgICAgICAgc3R5bGUuaWQgPSBST1RBVElPTl9BTklNQVRJT047XG5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgZG9jdW1lbnQuaGVhZD8uYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgICAgIGlmIChzdHlsZS5zaGVldCBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gcHJvdmlkZSB0aGUgMm5kIHBhcmFtZXRlciBmb3IgSUUxMSwgZXZlbiB0aG91Z2ggaXQgaXNcbiAgICAgICAgICAgIC8vIDAgYnkgZGVmYXVsdCBmb3IgYWxsIG90aGVyIGJyb3dzZXJzLlxuICAgICAgICAgICAgc3R5bGUuc2hlZXQuaW5zZXJ0UnVsZShcbiAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyAke1JPVEFUSU9OX0FOSU1BVElPTn0ge1xuICAgICAgICAgICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSByb3RhdGUoMzYwZGVnKTsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHNob3BwZXIgdHJpZXMgdG8gc2lnbiBpbiBhcyBhIGd1ZXN0IGJ1dFxuICogdGhleSBhcmUgYWxyZWFkeSBzaWduZWQgaW4gYXMgYSByZWdpc3RlcmVkIGN1c3RvbWVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoXG4gICAgICAgICAgICBtZXNzYWdlIHx8XG4gICAgICAgICAgICAgICAgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkIGR1cmluZyBidXkgbm93IGNhcnQgY3JlYXRpb24gcHJvY2Vzcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdidXlfbm93X2NhcnRfY3JlYXRpb25fZXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmNvbnN0IERFRkFVTFRfUkVTUE9OU0UgPSB7XG4gICAgYm9keToge30sXG4gICAgaGVhZGVyczoge30sXG4gICAgc3RhdHVzOiAwLFxufTtcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB1bmFibGUgdG8gbWFrZSBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlci4gSXQgd3JhcHNcbiAqIGFueSBzZXJ2ZXIgcmVzcG9uc2UgaW50byBhIEpTIGVycm9yIG9iamVjdC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVxdWVzdEVycm9yPFRCb2R5ID0gYW55PiBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGJvZHk6IFRCb2R5IHwge307XG4gICAgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcbiAgICBlcnJvcnM6IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgIHN0YXR1czogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlc3BvbnNlPzogUmVzcG9uc2U8VEJvZHkgfCB7fT4sXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICBlcnJvcnMsXG4gICAgICAgIH06IHtcbiAgICAgICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgICAgICAgICBlcnJvcnM/OiBBcnJheTx7IGNvZGU6IHN0cmluZzsgbWVzc2FnZT86IHN0cmluZyB9PjtcbiAgICAgICAgfSA9IHt9LFxuICAgICkge1xuICAgICAgICBjb25zdCB7IGJvZHksIGhlYWRlcnMsIHN0YXR1cyB9ID0gcmVzcG9uc2UgfHwgREVGQVVMVF9SRVNQT05TRTtcblxuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdBbiB1bmV4cGVjdGVkIGVycm9yIGhhcyBvY2N1cnJlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUmVxdWVzdEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3JlcXVlc3QnO1xuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgfVxufVxuIiwiZXhwb3J0IGVudW0gQ2FydFNvdXJjZSB7XG4gICAgQnV5Tm93ID0gJ0JVWV9OT1cnLFxufVxuIiwiaW1wb3J0IHtcbiAgICBCdXlOb3dDYXJ0UmVxdWVzdEJvZHksXG4gICAgSG9zdGVkSW5zdHJ1bWVudCxcbiAgICBTaGlwcGluZ09wdGlvbixcbiAgICBWYXVsdGVkSW5zdHJ1bWVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBGdW5kaW5nIHNvdXJjZXNcbiAqXG4gKi9cbmV4cG9ydCB0eXBlIEZ1bmRpbmdUeXBlID0gc3RyaW5nW107XG5leHBvcnQgdHlwZSBFbmFibGVGdW5kaW5nVHlwZSA9IEZ1bmRpbmdUeXBlIHwgc3RyaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlU0RLRnVuZGluZyB7XG4gICAgQ0FSRDogc3RyaW5nO1xuICAgIFBBWVBBTDogc3RyaW5nO1xuICAgIENSRURJVDogc3RyaW5nO1xuICAgIFBBWUxBVEVSOiBzdHJpbmc7XG4gICAgT1hYTzogc3RyaW5nO1xuICAgIFNFUEE6IHN0cmluZztcbiAgICBWRU5NTzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgQ29tbWVyY2UgU0RLXG4gKlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnIHtcbiAgICBpbnB1dEV2ZW50czoge1xuICAgICAgICBvbkNoYW5nZShkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgICAgIG9uRm9jdXMoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkJsdXIoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdChkYXRhOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IHZvaWQ7XG4gICAgfTtcbiAgICBjcmVhdGVWYXVsdFNldHVwVG9rZW4/OiAoZGF0YTogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUpID0+IHZvaWQ7XG4gICAgY3JlYXRlT3JkZXI/OiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gICAgc3R5bGU6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzUmVuZGVyT3B0aW9uc1snc3R5bGVzJ107XG4gICAgb25BcHByb3ZlKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEpOiB2b2lkO1xuICAgIG9uRXJyb3IoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhIHtcbiAgICB2YXVsdFNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgb3JkZXJJRDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogTGlhYmlsaXR5U2hpZnRFbnVtO1xufVxuXG5leHBvcnQgZW51bSBMaWFiaWxpdHlTaGlmdEVudW0ge1xuICAgIFBvc3NpYmxlID0gJ1BPU1NJQkxFJyxcbiAgICBObyA9ICdOTycsXG4gICAgVW5rbm93biA9ICdVTktOT1dOJyxcbiAgICBZZXMgPSAnWUVTJyxcbn1cblxuaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG59XG5cbnR5cGUgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ2FyZCA9IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZDtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NhcmRbXTtcbiAgICBlbWl0dGVkQnk6IHN0cmluZztcbiAgICBpc0Zvcm1WYWxpZDogYm9vbGVhbjtcbiAgICBlcnJvcnM6IHN0cmluZ1tdO1xuICAgIGZpZWxkczoge1xuICAgICAgICBjYXJkQ3Z2RmllbGQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE51bWJlckZpZWxkOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmROYW1lRmllbGQ/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGNhcmRFeHBpcnlGaWVsZDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHMge1xuICAgIHJlbmRlcihjb250YWluZXI6IEhUTUxFbGVtZW50IHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbGVhcigpOiB2b2lkO1xuICAgIHJlbW92ZUNsYXNzKGNsYXNzTmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcyB7XG4gICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgIENWVkZpZWxkKGNvbmZpZz86IFBheVBhbENvbW1lcmNlRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgRXhwaXJ5RmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogUGF5UGFsQ29tbWVyY2VGaWVsZHNJbml0aWFsaXphdGlvbkRhdGEpOiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBOdW1iZXJGaWVsZChjb25maWc/OiBQYXlQYWxDb21tZXJjZUZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHN1Ym1pdChjb25maWc/OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdWJtaXRDb25maWcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGdldFN0YXRlKCk6IFByb21pc2U8UGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyB7XG4gICAgYmlsbGluZ0FkZHJlc3M6IHtcbiAgICAgICAgY29tcGFueT86IHN0cmluZztcbiAgICAgICAgYWRkcmVzc0xpbmUxOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICAgICAgYWRtaW5BcmVhMTogc3RyaW5nOyAvLyBTdGF0ZVxuICAgICAgICBhZG1pbkFyZWEyOiBzdHJpbmc7IC8vIENpdHlcbiAgICAgICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgICAgICBjb3VudHJ5Q29kZT86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNESyB7XG4gICAgQ2FyZEZpZWxkczogKGRhdGE6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZykgPT4gUHJvbWlzZTxQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHM+O1xuICAgIEdvb2dsZXBheTogKCkgPT4ge1xuICAgICAgICBjb25maWc6ICgpID0+IFByb21pc2U8R29vZ2xlUGF5Q29uZmlnPjtcbiAgICAgICAgY29uZmlybU9yZGVyOiAoYXJnMDoge1xuICAgICAgICAgICAgb3JkZXJJZDogc3RyaW5nO1xuICAgICAgICAgICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG4gICAgICAgIH0pID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICAgICAgaW5pdGlhdGVQYXllckFjdGlvbjogKCkgPT4gdm9pZDtcbiAgICB9O1xuICAgIEZVTkRJTkc6IFBheVBhbENvbW1lcmNlU0RLRnVuZGluZztcbiAgICBIb3N0ZWRGaWVsZHM6IHtcbiAgICAgICAgaXNFbGlnaWJsZSgpOiBib29sZWFuO1xuICAgICAgICByZW5kZXIoZGF0YTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zKTogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIFBheW1lbnRGaWVsZHMob3B0aW9uczogUGF5UGFsQ29tbWVyY2VQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlUGF5bWVudEZpZWxkcztcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBQYXlQYWxDb21tZXJjZU1lc3NhZ2VzT3B0aW9ucyk6IFBheVBhbENvbW1lcmNlTWVzc2FnZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU9yZGVyRGF0YSB7XG4gICAgdG9rZW5pemF0aW9uRGF0YToge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbmZvOiB7XG4gICAgICAgIGNhcmROZXR3b3JrOiBzdHJpbmc7XG4gICAgICAgIGNhcmREZXRhaWxzOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR29vZ2xlUGF5Q29uZmlnIHtcbiAgICBhbGxvd2VkUGF5bWVudE1ldGhvZHM6IEFsbG93ZWRQYXltZW50TWV0aG9kc1tdO1xuICAgIGFwaVZlcnNpb246IG51bWJlcjtcbiAgICBhcGlWZXJzaW9uTWlub3I6IG51bWJlcjtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIGlzRWxpZ2libGU6IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJbmZvOiB7XG4gICAgICAgIG1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgbWVyY2hhbnRPcmlnaW46IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFsbG93ZWRQYXltZW50TWV0aG9kcyB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgYWxsb3dlZEF1dGhNZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgICAgYWxsb3dlZENhcmROZXR3b3Jrczogc3RyaW5nW107XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGFzc3VyYW5jZURldGFpbHNSZXF1aXJlZDogYm9vbGVhbjtcbiAgICAgICAgYmlsbGluZ0FkZHJlc3NQYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHRva2VuaXphdGlvblNwZWNpZmljYXRpb246IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICBnYXRld2F5OiBzdHJpbmc7XG4gICAgICAgICAgICBnYXRld2F5TWVyY2hhbnRJZDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCB0eXBlIFBheVBhbExlZ2FsID0gKHBhcmFtczogeyBmdW5kaW5nU291cmNlOiBzdHJpbmcgfSkgPT4ge1xuICAgIHJlbmRlcihjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIExlZ2FsRnVuZGluZyB7XG4gICAgRlVORElORzoge1xuICAgICAgICBQQVlfVVBPTl9JTlZPSUNFOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaXJ0aERhdGUge1xuICAgIGdldEZ1bGxZZWFyKCk6IG51bWJlcjtcbiAgICBnZXREYXRlKCk6IG51bWJlcjtcbiAgICBnZXRNb250aCgpOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMge1xuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgJ2NsaWVudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdtZXJjaGFudC1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdidXllci1jb3VudHJ5Jz86IHN0cmluZztcbiAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc/OiBGdW5kaW5nVHlwZTtcbiAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJz86IEVuYWJsZUZ1bmRpbmdUeXBlO1xuICAgICAgICBjdXJyZW5jeT86IHN0cmluZztcbiAgICAgICAgY29tbWl0PzogYm9vbGVhbjtcbiAgICAgICAgaW50ZW50PzogUGF5UGFsQ29tbWVyY2VJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBDb21wb25lbnRzU2NyaXB0VHlwZTtcbiAgICB9O1xuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLXVzZXItaWQtdG9rZW4nPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbENvbW1lcmNlSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBDb21wb25lbnRzU2NyaXB0VHlwZSA9IEFycmF5PFxuICAgIHwgJ2J1dHRvbnMnXG4gICAgfCAnZnVuZGluZy1lbGlnaWJpbGl0eSdcbiAgICB8ICdob3N0ZWQtZmllbGRzJ1xuICAgIHwgJ21lc3NhZ2VzJ1xuICAgIHwgJ3BheW1lbnQtZmllbGRzJ1xuICAgIHwgJ2xlZ2FsJ1xuICAgIHwgJ2dvb2dsZXBheSdcbiAgICB8ICdjb25uZWN0J1xuICAgIHwgJ2NhcmQtZmllbGRzJ1xuPjtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xuICAgIHBheXBhbD86IFBheVBhbFNESztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEluaXRpYWxpemF0aW9uIERhdGFcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIGF0dHJpYnV0aW9uSWQ/OiBzdHJpbmc7XG4gICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kczogRnVuZGluZ1R5cGU7XG4gICAgYnV0dG9uU3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgYnV5ZXJDb3VudHJ5Pzogc3RyaW5nO1xuICAgIGNsaWVudElkOiBzdHJpbmc7XG4gICAgY2xpZW50VG9rZW4/OiBzdHJpbmc7XG4gICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU/OiBib29sZWFuO1xuICAgIGludGVudD86IFBheVBhbENvbW1lcmNlSW50ZW50O1xuICAgIGlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkPzogYm9vbGVhbjtcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47XG4gICAgcGF5bWVudEJ1dHRvblN0eWxlcz86IFJlY29yZDxzdHJpbmcsIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucz47XG4gICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24/OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW1bXTtcbiAgICBpc0FwcFN3aXRjaEVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3RhdHVzOiBib29sZWFuO1xuICAgIHN0eWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1eU5vd1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk6IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keTtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEhvc3RlZCBGaWVsZHNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zIHtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb247XG4gICAgICAgIGV4cGlyYXRpb25EYXRlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHBheW1lbnRzU0RLPzogYm9vbGVhbjtcbiAgICBzdHlsZXM/OiB7XG4gICAgICAgIGlucHV0PzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy5pbnZhbGlkJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgICAgICcudmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJzpmb2N1cyc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH07XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRPcHRpb24ge1xuICAgIHNlbGVjdG9yOiBzdHJpbmc7XG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHMge1xuICAgIHN1Ym1pdChcbiAgICAgICAgb3B0aW9ucz86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzU3VibWl0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZT47XG4gICAgZ2V0U3RhdGUoKTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSkgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zIHtcbiAgICBjb250aW5nZW5jaWVzPzogQXJyYXk8JzNEX1NFQ1VSRSc+O1xuICAgIGNhcmRob2xkZXJOYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNTdGF0ZSB7XG4gICAgY2FyZHM6IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBudW1iZXI/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbk1vbnRoPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25ZZWFyPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IFBheVBhbENvbW1lcmNlSG9zdGVkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBwb3N0YWxDb2RlPzogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZUhvc3RlZEZpZWxkc0ZpZWxkRGF0YSB7XG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBpc0ZvY3VzZWQ6IGJvb2xlYW47XG4gICAgaXNFbXB0eTogYm9vbGVhbjtcbiAgICBpc1BvdGVudGlhbGx5VmFsaWQ6IGJvb2xlYW47XG4gICAgaXNWYWxpZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIENvbW1lcmNlIEJ1dHRvbnNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VCdXR0b25zIHtcbiAgICByZW5kZXIoaWQ6IHN0cmluZyk6IHZvaWQ7XG4gICAgY2xvc2UoKTogdm9pZDtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgaGFzUmV0dXJuZWQ/KCk6IGJvb2xlYW47XG4gICAgcmVzdW1lPygpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMge1xuICAgIGV4cGVyaWVuY2U/OiBzdHJpbmc7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBvbkFwcHJvdmUoXG4gICAgICAgIGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgICAgIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgKTogUHJvbWlzZTxib29sZWFuIHwgdm9pZD4gfCB2b2lkO1xuICAgIG9uSW5pdD8oZGF0YTogSW5pdENhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogSW5pdENhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD47XG4gICAgb25Db21wbGV0ZT8oZGF0YTogQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNsaWNrPyhkYXRhOiBDbGlja0NhbGxiYWNrUGF5bG9hZCwgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHwgdm9pZDtcbiAgICBvbkVycm9yPyhlcnJvcjogRXJyb3IpOiB2b2lkO1xuICAgIG9uQ2FuY2VsPygpOiB2b2lkO1xuICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlPyhkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBQYXlQYWxTZWxlY3RlZFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNoaXBwaW5nQWRkcmVzczogUGF5UGFsQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDbGlja0NhbGxiYWNrUGF5bG9hZCB7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICByZWplY3QoKTogdm9pZDtcbiAgICByZXNvbHZlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrUGF5bG9hZCB7XG4gICAgY29ycmVsYXRpb25JRDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluaXRDYWxsYmFja0FjdGlvbnMge1xuICAgIGRpc2FibGUoKTogdm9pZDtcbiAgICBlbmFibGUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxBZGRyZXNzIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gICAgc3RhdGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlwYWxBZGRyZXNzQ2FsbGJhY2tEYXRhIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb24ge1xuICAgIGFtb3VudDoge1xuICAgICAgICBjdXJyZW5jeV9jb2RlOiBzdHJpbmc7XG4gICAgICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpZDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW47XG4gICAgdHlwZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwcHJvdmVDYWxsYmFja1BheWxvYWQge1xuICAgIG9yZGVySUQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyB7XG4gICAgb3JkZXI6IHtcbiAgICAgICAgZ2V0OiAoKSA9PiBQcm9taXNlPFBheVBhbE9yZGVyRGV0YWlscz47XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckRldGFpbHMge1xuICAgIHBheWVyOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIGdpdmVuX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIHN1cm5hbWU6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgZW1haWxfYWRkcmVzczogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzOiBQYXlQYWxPcmRlckFkZHJlc3M7XG4gICAgICAgIHBob25lPzoge1xuICAgICAgICAgICAgcGhvbmVfbnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiBzdHJpbmc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH07XG4gICAgcHVyY2hhc2VfdW5pdHM6IEFycmF5PHtcbiAgICAgICAgc2hpcHBpbmc6IHtcbiAgICAgICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICBmdWxsX25hbWU6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJBZGRyZXNzIHtcbiAgICBhZGRyZXNzX2xpbmVfMTogc3RyaW5nO1xuICAgIGFkZHJlc3NfbGluZV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8yOiBzdHJpbmc7XG4gICAgYWRtaW5fYXJlYV8xPzogc3RyaW5nO1xuICAgIHBvc3RhbF9jb2RlOiBzdHJpbmc7XG4gICAgY291bnRyeV9jb2RlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGVDYWxsYmFja0RhdGFQYXlsb2FkIHtcbiAgICBpbnRlbnQ6IHN0cmluZztcbiAgICBvcmRlcklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uTGFiZWwge1xuICAgIHBheXBhbCA9ICdwYXlwYWwnLFxuICAgIGNoZWNrb3V0ID0gJ2NoZWNrb3V0JyxcbiAgICBidXlub3cgPSAnYnV5bm93JyxcbiAgICBwYXkgPSAncGF5JyxcbiAgICBpbnN0YWxsbWVudCA9ICdpbnN0YWxsbWVudCcsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uQ29sb3Ige1xuICAgIGdvbGQgPSAnZ29sZCcsXG4gICAgYmx1ZSA9ICdibHVlJyxcbiAgICBzaWx2ZXIgPSAnc2lsdmVyJyxcbiAgICBibGFjayA9ICdibGFjaycsXG4gICAgd2hpdGUgPSAnd2hpdGUnLFxufVxuXG5leHBvcnQgZW51bSBTdHlsZUJ1dHRvblNoYXBlIHtcbiAgICBwaWxsID0gJ3BpbGwnLFxuICAgIHJlY3QgPSAncmVjdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICBjb2xvcj86IFN0eWxlQnV0dG9uQ29sb3I7XG4gICAgc2hhcGU/OiBTdHlsZUJ1dHRvblNoYXBlO1xuICAgIGhlaWdodD86IG51bWJlcjtcbiAgICBsYWJlbD86IFN0eWxlQnV0dG9uTGFiZWw7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBDb21tZXJjZSBQYXltZW50IGZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVBheW1lbnRGaWVsZHNPcHRpb25zIHtcbiAgICBzdHlsZT86IFBheVBhbENvbW1lcmNlRmllbGRzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U6IHN0cmluZztcbiAgICBmaWVsZHM6IHtcbiAgICAgICAgbmFtZT86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbD86IHtcbiAgICAgICAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWxDb21tZXJjZSBNZXNzYWdlc1xuICovXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlPzogc3RyaW5nO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ29tbWVyY2VNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgbGF5b3V0Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBPdGhlclxuICpcbiAqL1xuZXhwb3J0IGVudW0gTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMge1xuICAgIE9YWE8gPSAnb3h4bycsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJEYXRhIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbiAgICBhcHByb3ZlVXJsOiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5IHtcbiAgICBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM/OiBTaGlwcGluZ09wdGlvbltdO1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb24/OiBTaGlwcGluZ09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlIHtcbiAgICBzdGF0dXNDb2RlOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSBleHRlbmRzIEhvc3RlZEluc3RydW1lbnQsIFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICBjYXJ0SWQ6IHN0cmluZztcbiAgICBtZXRhZGF0YUlkPzogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBib29sZWFuO1xuICAgIGZhc3RsYW5lVG9rZW4/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbE9yZGVyU3RhdHVzIHtcbiAgICBBcHByb3ZlZCA9ICdBUFBST1ZFRCcsXG4gICAgQ3JlYXRlZCA9ICdDUkVBVEVEJyxcbiAgICBQYXllckFjdGlvblJlcXVpcmVkID0gJ1BBWUVSX0FDVElPTl9SRVFVSVJFRCcsXG4gICAgUG9sbGluZ1N0b3AgPSAnUE9MTElOR19TVE9QJyxcbiAgICBQb2xsaW5nRXJyb3IgPSAnUE9MTElOR19FUlJPUicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsT3JkZXJTdGF0dXNEYXRhIHtcbiAgICBzdGF0dXM6IFBheVBhbE9yZGVyU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IHN0cmluZztcbn1cbiIsImltcG9ydCB7IEZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgaXNOaWwsIG9taXRCeSB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSxcbiAgICBCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvcixcbiAgICBDYXJ0LFxuICAgIENhcnRTb3VyY2UsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxuICAgIFJlcXVlc3RFcnJvcixcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbiAgICBTaGlwcGluZ09wdGlvbixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyIGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXNjcmlwdC1sb2FkZXInO1xuaW1wb3J0IHtcbiAgICBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMsXG4gICAgUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2UsXG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG4gICAgUGF5UGFsU0RLLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG4gICAgU3R5bGVCdXR0b25MYWJlbCxcbiAgICBTdHlsZUJ1dHRvblNoYXBlLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIHBheXBhbFNkaz86IFBheVBhbFNESztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZvcm1Qb3N0ZXI6IEZvcm1Qb3N0ZXIsXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXI6IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcixcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlcjogUGF5UGFsQ29tbWVyY2VTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWxTREsgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgbG9hZFBheVBhbFNkayhcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcHJvdmlkZWRDdXJyZW5jeUNvZGU/OiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLIHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHByb3ZpZGVkQ3VycmVuY3lDb2RlIHx8IHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMucGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlci5nZXRQYXlQYWxTREsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSxcbiAgICAgICAgICAgIGZvcmNlTG9hZCxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wYXlwYWxTZGs7XG4gICAgfVxuXG4gICAgZ2V0UGF5UGFsU2RrT3JUaHJvdygpOiBQYXlQYWxTREsge1xuICAgICAgICBpZiAoIXRoaXMucGF5cGFsU2RrKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1eSBOb3cgY2FydCBjcmVhdGlvbiBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM6IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8Q2FydD4ge1xuICAgICAgICBjb25zdCBjYXJ0UmVxdWVzdEJvZHkgPSBidXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkoKTtcblxuICAgICAgICBpZiAoIWNhcnRSZXF1ZXN0Qm9keSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydChjYXJ0UmVxdWVzdEJvZHkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEJ1eU5vd0NhcnRDcmVhdGlvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIE9yZGVyIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZU9yZGVyKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5PzogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIocHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2V0dXBUb2tlbiB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICBwcm92aWRlcklkLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHsgb3JkZXJJZCwgLi4uKHNldHVwVG9rZW4gPyB7IHNldHVwVG9rZW4gfSA6IHt9KSB9O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyLnVwZGF0ZU9yZGVyKHtcbiAgICAgICAgICAgICAgICBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM6IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBjYXJ0SWQ6IGNhcnQuaWQsXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbjogY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKG1ldGhvZElkPzogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPFBheVBhbE9yZGVyU3RhdHVzPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHN0YXR1cyB9ID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIuZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IHN1Ym1pdHRpbmcgYW5kIHRva2VuaXppbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgdG9rZW5pemVQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFvcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgcGF5bWVudF90eXBlOiAncGF5cGFsJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgIC4uLihjYXJ0LnNvdXJjZSA9PT0gQ2FydFNvdXJjZS5CdXlOb3cgJiYgeyBjYXJ0X2lkOiBjYXJ0LmlkIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzdWJtaXRQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ6IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICAuLi4oZ2F0ZXdheUlkID8geyBnYXRld2F5SWQgfSA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTaGlwcGluZyBvcHRpb25zIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQ/OiBzdHJpbmcpOiBTaGlwcGluZ09wdGlvbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdO1xuXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXTtcblxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkXG4gICAgICAgICAgICA/IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkKVxuICAgICAgICAgICAgOiBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAgIChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj8uaWQsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCA9XG4gICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIHx8IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gfHwgYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zWzBdO1xuXG4gICAgICAgIGlmICghc2hpcHBpbmdPcHRpb25Ub1NlbGVjdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91ciBvcmRlciBjYW4ndCBiZSBzaGlwcGVkIHRvIHRoaXMgYWRkcmVzc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGlwcGluZ09wdGlvblRvU2VsZWN0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWRkcmVzcyB0cmFuc2Zvcm1pbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgZ2V0QWRkcmVzcyhhZGRyZXNzPzogUGFydGlhbDxCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5Pik6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBhZGRyZXNzPy5maXJzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBsYXN0TmFtZTogYWRkcmVzcz8ubGFzdE5hbWUgfHwgJycsXG4gICAgICAgICAgICBlbWFpbDogYWRkcmVzcz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICBwaG9uZTogYWRkcmVzcz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzPy5hZGRyZXNzMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGNpdHk6IGFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzPy5wb3N0YWxDb2RlIHx8ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldEJpbGxpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyh7IHBheWVyIH06IFBheVBhbE9yZGVyRGV0YWlscyk6IEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZTogcGF5ZXIubmFtZS5naXZlbl9uYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHBheWVyLm5hbWUuc3VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBwYXllci5lbWFpbF9hZGRyZXNzLFxuICAgICAgICAgICAgYWRkcmVzczE6IHBheWVyLmFkZHJlc3MuYWRkcmVzc19saW5lXzEsXG4gICAgICAgICAgICBhZGRyZXNzMjogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMixcbiAgICAgICAgICAgIGNpdHk6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8yLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBheWVyLmFkZHJlc3MuY291bnRyeV9jb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogcGF5ZXIuYWRkcmVzcy5wb3N0YWxfY29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHBheWVyLmFkZHJlc3MuYWRtaW5fYXJlYV8xLFxuICAgICAgICAgICAgcGhvbmU6IHBheWVyLnBob25lPy5waG9uZV9udW1iZXI/Lm5hdGlvbmFsX251bWJlcixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgb3JkZXJEZXRhaWxzOiBQYXlQYWxPcmRlckRldGFpbHMsXG4gICAgKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIGNvbnN0IHsgcGF5ZXIsIHB1cmNoYXNlX3VuaXRzIH0gPSBvcmRlckRldGFpbHM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICBuYW1lOiB7IGZ1bGxfbmFtZSB9LFxuICAgICAgICB9ID0gcHVyY2hhc2VfdW5pdHNbMF0uc2hpcHBpbmc7XG5cbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgLi4ubGFzdE5hbWVdID0gZnVsbF9uYW1lLnNwbGl0KCcgJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogbGFzdE5hbWUuam9pbignICcpLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9ucyBzdHlsZSBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zKTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICAgICAgY29uc3QgeyBjb2xvciwgaGVpZ2h0LCBsYWJlbCwgc2hhcGUgfSA9IHN0eWxlIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHZhbGlkU3R5bGVzID0ge1xuICAgICAgICAgICAgY29sb3I6IGNvbG9yICYmIFN0eWxlQnV0dG9uQ29sb3JbY29sb3JdID8gY29sb3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0VmFsaWRIZWlnaHQoaGVpZ2h0KSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCAmJiBTdHlsZUJ1dHRvbkxhYmVsW2xhYmVsXSA/IGxhYmVsIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hhcGU6IHNoYXBlICYmIFN0eWxlQnV0dG9uU2hhcGVbc2hhcGVdID8gc2hhcGUgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9taXRCeSh2YWxpZFN0eWxlcywgaXNOaWwpO1xuICAgIH1cblxuICAgIGdldFZhbGlkSGVpZ2h0KGhlaWdodD86IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MDtcbiAgICAgICAgY29uc3QgbWluSGVpZ2h0ID0gMjU7XG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IDU1O1xuXG4gICAgICAgIGlmICghaGVpZ2h0IHx8IHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0IDwgbWluSGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gRm9yIG5vdyB0aGlzIGlzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uLCBmdXJ0aGVyIHJlbW92ZUVsZW1lbnQgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IElOVEVSTkFMX1VTRV9PTkxZID1cbiAgICAnVGhpcyBBUEkgZW5kcG9pbnQgaXMgZm9yIGludGVybmFsIHVzZSBvbmx5IGFuZCBtYXkgY2hhbmdlIGluIHRoZSBmdXR1cmUnO1xuIiwiZW51bSBDb250ZW50VHlwZSB7XG4gICAgSnNvbiA9ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICBKc29uVjEgPSAnYXBwbGljYXRpb24vdm5kLmJjLnYxK2pzb24nLFxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZW50VHlwZTtcbiIsImV4cG9ydCBjb25zdCBTREtfVkVSU0lPTl9IRUFERVJTID0geyAnWC1DaGVja291dC1TREstVmVyc2lvbic6IExJQlJBUllfVkVSU0lPTiB9O1xuIiwiaW1wb3J0IHsgUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgQ29udGVudFR5cGUsXG4gICAgSU5URVJOQUxfVVNFX09OTFksXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU0RLX1ZFUlNJT05fSEVBREVSUyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXNEYXRhLFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZSxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVxdWVzdFNlbmRlcjogUmVxdWVzdFNlbmRlcikge31cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyKFxuICAgICAgICBwcm92aWRlcklkOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RCb2R5OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8UGF5UGFsT3JkZXJEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvcGF5bWVudC8ke3Byb3ZpZGVySWR9YDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RCb2R5O1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLnBvc3Q8UGF5UGFsT3JkZXJEYXRhPih1cmwsIHsgaGVhZGVycywgYm9keSB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlT3JkZXIoXG4gICAgICAgIHJlcXVlc3RCb2R5OiBQYXlQYWxVcGRhdGVPcmRlclJlcXVlc3RCb2R5LFxuICAgICk6IFByb21pc2U8UGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L2luaXRpYWxpemF0aW9uL3BheXBhbGNvbW1lcmNlYDtcbiAgICAgICAgY29uc3QgYm9keSA9IHJlcXVlc3RCb2R5O1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLnB1dDxQYXlQYWxVcGRhdGVPcmRlclJlc3BvbnNlPih1cmwsIHsgaGVhZGVycywgYm9keSB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmJvZHk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMoXG4gICAgICAgIG1ldGhvZElkID0gJ3BheXBhbGNvbW1lcmNlJyxcbiAgICAgICAgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsT3JkZXJTdGF0dXNEYXRhPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL3N0b3JlZnJvbnQvaW5pdGlhbGl6YXRpb24vJHttZXRob2RJZH1gO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgJ1gtQVBJLUlOVEVSTkFMJzogSU5URVJOQUxfVVNFX09OTFksXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogQ29udGVudFR5cGUuSnNvbixcbiAgICAgICAgICAgIC4uLlNES19WRVJTSU9OX0hFQURFUlMsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXF1ZXN0U2VuZGVyLmdldDxQYXlQYWxPcmRlclN0YXR1c0RhdGE+KHVybCwge1xuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXMuYm9keTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBDb21wb25lbnRzU2NyaXB0VHlwZSxcbiAgICBGdW5kaW5nVHlwZSxcbiAgICBQYXlQYWxDb21tZXJjZUhvc3RXaW5kb3csXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXMsXG4gICAgUGF5UGFsU0RLLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyIHtcbiAgICBwcml2YXRlIHdpbmRvdzogUGF5UGFsQ29tbWVyY2VIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxTREsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZT86IGJvb2xlYW4sXG4gICAgICAgIGZvcmNlTG9hZD86IGJvb2xlYW4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxTREs+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubG9hZFBheVBhbFNESyhwYXlwYWxTZGtTY3JpcHRDb25maWcsIGZvcmNlTG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkUGF5UGFsU0RLKFxuICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWc6IFBheVBhbENvbW1lcmNlU2NyaXB0UGFyYW1zLFxuICAgICAgICBmb3JjZUxvYWQgPSBmYWxzZSxcbiAgICApOiBQcm9taXNlPFBheVBhbFNESz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCB8fCBmb3JjZUxvYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnRyYW5zZm9ybUNvbmZpZzxQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtc1snb3B0aW9ucyddPihcbiAgICAgICAgICAgICAgICBwYXlwYWxTZGtTY3JpcHRDb25maWcub3B0aW9ucyxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsQ29tbWVyY2VTY3JpcHRQYXJhbXNbJ2F0dHJpYnV0ZXMnXT4oXG4gICAgICAgICAgICAgICAgcGF5cGFsU2RrU2NyaXB0Q29uZmlnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtVcmwgPSAnaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9zZGsvanMnO1xuICAgICAgICAgICAgY29uc3Qgc2NyaXB0UXVlcnkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKG9wdGlvbnMpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIubG9hZFNjcmlwdChzY3JpcHRTcmMsIHsgYXN5bmM6IHRydWUsIGF0dHJpYnV0ZXMgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlID0gdHJ1ZSxcbiAgICApOiBQYXlQYWxDb21tZXJjZVNjcmlwdFBhcmFtcyB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG5cbiAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGE/LmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNWZW5tb0VuYWJsZWQsXG4gICAgICAgICAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCxcbiAgICAgICAgICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBpc0dvb2dsZVBheUVuYWJsZWQsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgY29tbWl0ID0gaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfHwgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZTtcblxuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVDYXJkID0gaWQgPT09ICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzJztcbiAgICAgICAgY29uc3QgZW5hYmxlQ2FyZEZ1bmRpbmcgPSBzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNhcmRGdW5kaW5nID0gIXNob3VsZEVuYWJsZUNhcmQgPyBbJ2NhcmQnXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZUNyZWRpdEZ1bmRpbmcgPSBpc1BheVBhbENyZWRpdEF2YWlsYWJsZSA/IFsnY3JlZGl0JywgJ3BheWxhdGVyJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUNyZWRpdEZ1bmRpbmcgPSAhaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG5cbiAgICAgICAgY29uc3QgZW5hYmxlVmVubW9GdW5kaW5nID0gaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZVZlbm1vRnVuZGluZyA9ICFpc1Zlbm1vRW5hYmxlZCA/IFsndmVubW8nXSA6IFtdO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmZpbHRlcihcbiAgICAgICAgICAgIChhcG06IHN0cmluZykgPT4gIWVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmluY2x1ZGVzKGFwbSksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGdvb2dsZVBheUNvbXBvbmVudDogQ29tcG9uZW50c1NjcmlwdFR5cGUgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IENvbXBvbmVudHNTY3JpcHRUeXBlID0gaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZVxuICAgICAgICAgICAgPyBbJ2NhcmQtZmllbGRzJ11cbiAgICAgICAgICAgIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVGdW5kaW5nOiBGdW5kaW5nVHlwZSA9IFtcbiAgICAgICAgICAgIC4uLmRpc2FibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVDcmVkaXRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZGlzYWJsZVZlbm1vRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmRpc2FibGVBUE1zRnVuZGluZyxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgZW5hYmxlRnVuZGluZzogRnVuZGluZ1R5cGUgPSBbXG4gICAgICAgICAgICAuLi5lbmFibGVDYXJkRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVWZW5tb0Z1bmRpbmcsXG4gICAgICAgICAgICAuLi5lbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICAgICAgXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgICdlbmFibGUtZnVuZGluZyc6IGVuYWJsZUZ1bmRpbmcubGVuZ3RoID4gMCA/IGVuYWJsZUZ1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc6IGRpc2FibGVGdW5kaW5nLmxlbmd0aCA+IDAgPyBkaXNhYmxlRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICAnYnV0dG9ucycsXG4gICAgICAgICAgICAgICAgICAgICdob3N0ZWQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2xlZ2FsJyxcbiAgICAgICAgICAgICAgICAgICAgLi4uZ29vZ2xlUGF5Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAuLi5jYXJkRmllbGRzQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICAgICAgLi4uKGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUgJiYgeyAnYnV5ZXItY291bnRyeSc6IGJ1eWVyQ291bnRyeSB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LXRva2VuJzogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNmb3JtQ29uZmlnPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oY29uZmlnOiBUKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgICAgIGxldCB0cmFuc2Zvcm1lZENvbmZpZyA9IHt9O1xuXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpIGFzIEFycmF5PGtleW9mIFQ+O1xuXG4gICAgICAgIGtleXMuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgICAgICAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09ICcnIHx8XG4gICAgICAgICAgICAgICAgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJhbnNmb3JtZWRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4udHJhbnNmb3JtZWRDb25maWcsXG4gICAgICAgICAgICAgICAgW2tleV06IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUuam9pbignLCcpIDogdmFsdWUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZWRDb25maWc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlRm9ybVBvc3RlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9mb3JtLXBvc3Rlcic7XG5pbXBvcnQgeyBjcmVhdGVSZXF1ZXN0U2VuZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcbmltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudEludGVncmF0aW9uU2VydmljZSB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQge1xuICAgIFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcixcbiAgICBQYXlQYWxDb21tZXJjZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnLi9pbmRleCc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UoXG4gICAgICAgIGNyZWF0ZUZvcm1Qb3N0ZXIoKSxcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U7XG4iLCJleHBvcnQgY29uc3QgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTID0ge1xuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBtZXRob2QgaXMgdW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGVcbiAqIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgYXJndW1lbnRzIGFjY29yZGluZyB0byB0aGVpciByZXF1aXJlbWVudHMsXG4gKiBpLmUuOiBpZiBhbiBhcmd1bWVudCBpcyBtaXNzaW5nIG9yIGl0IGlzIG5vdCB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnSW52YWxpZCBhcmd1bWVudHMgaGF2ZSBiZWVuIHByb3ZpZGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdJbnZhbGlkQXJndW1lbnRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdpbnZhbGlkX2FyZ3VtZW50JztcbiAgICB9XG59XG4iLCJpbXBvcnQgSW52YWxpZEFyZ3VtZW50RXJyb3IgZnJvbSAnLi9pbnZhbGlkLWFyZ3VtZW50LWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiB3ZSBhcmUgdW5hYmxlIHRvIHN1Ym1pdCBhIHBheW1lbnQgYmVjYXVzZVxuICogdGhlIGNhbGxlciBoYXMgbm90IHByb3ZpZGVkIGFsbCB0aGUgcmVxdWlyZWQgZmllbGRzLCBpLmUuOiBpZiBhbiBhcmd1bWVudCBpc1xuICogbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yIGV4dGVuZHMgSW52YWxpZEFyZ3VtZW50RXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGludmFsaWRGaWVsZHM/OiBzdHJpbmdbXSkge1xuICAgICAgICBsZXQgbWVzc2FnZSA9ICdVbmFibGUgdG8gc3VibWl0IHBheW1lbnQgZm9yIHRoZSBvcmRlciBiZWNhdXNlIHRoZSBwYXlsb2FkIGlzIGludmFsaWQuJztcblxuICAgICAgICBpZiAoaW52YWxpZEZpZWxkcykge1xuICAgICAgICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE1ha2Ugc3VyZSB0aGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcHJvdmlkZWQgY29ycmVjdGx5OiAke2ludmFsaWRGaWVsZHMuam9pbihcbiAgICAgICAgICAgICAgICAnLCAnLFxuICAgICAgICAgICAgKX0uYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3InO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3JlcXVlc3Qtc2VuZGVyJztcblxuaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBzdWNjZXNzZnVsbHkgc3VibWl0IGEgc2VydmVyIHJlcXVlc3RcbiAqIHVzaW5nIGEgcGF5bWVudCBtZXRob2QgYmVjYXVzZSB0aGUgbWV0aG9kIGhhcyBpbnZhbGlkIGNvbmZpZ3VyYXRpb24gb3IgaXMgaW5cbiAqIGFuIGludmFsaWQgc3RhdGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGVyZSBpcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHBheW1lbnQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1BheW1lbnRNZXRob2RJbnZhbGlkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfaW52YWxpZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiB3ZSBhcmUgdHJ5aW5nIHRvIG1ha2UgYW4gb3JkZXIgZmluYWxpemF0aW9uIHJlcXVlc3QgZm9yIGFcbiAqIHBheW1lbnQgbWV0aG9kIHRoYXQgZG9lcyBub3QgcmVxdWlyZSBzdWNoIHByb2NlZHVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCdUaGUgY3VycmVudCBvcmRlciBkb2VzIG5vdCBuZWVkIHRvIGJlIGZpbmFsaXplZCBhdCB0aGlzIHN0YWdlLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3JkZXJfZmluYWxpemF0aW9uX25vdF9yZXF1aXJlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgSG9zdGVkSW5zdHJ1bWVudCB9IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UoXG4gICAgaW5zdHJ1bWVudDogdW5rbm93bixcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGluc3RydW1lbnQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGluc3RydW1lbnQgIT09IG51bGwgJiZcbiAgICAgICAgKHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTYXZlSW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKSAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICB0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ2Jvb2xlYW4nKVxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEZvcm1hdHRlZFBheWxvYWQsXG4gICAgRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQsXG4gICAgUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICcuL3BheW1lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1ZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiBCb29sZWFuKChpbnN0cnVtZW50IGFzIFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudChcbiAgICBpbnN0cnVtZW50OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4pOiBpbnN0cnVtZW50IGlzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICBCb29sZWFuKChpbnN0cnVtZW50IGFzIEhvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KS5pbnN0cnVtZW50SWQpICYmXG4gICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaW5zdHJ1bWVudCwgJ2NjTnVtYmVyJykgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NDdnYnKVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Zvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgRm9ybWF0dGVkUGF5bG9hZDxGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudD4ge1xuICAgIGNvbnN0IGZvcm1hdHRlZEluc3RydW1lbnQgPSAoaW5zdHJ1bWVudCBhcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PilcbiAgICAgICAgLmZvcm1hdHRlZFBheWxvYWQ7XG5cbiAgICBpZiAoIWZvcm1hdHRlZEluc3RydW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgQm9vbGVhbihmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbiAmJiBmb3JtYXR0ZWRJbnN0cnVtZW50LmJpZ3BheV90b2tlbi50b2tlbilcbiAgICApO1xufVxuIiwiaW1wb3J0IFJlcXVlc3RFcnJvciBmcm9tICcuL3JlcXVlc3QtZXJyb3InO1xuXG4vLyBIYXZlIHRvIHVzZSBgYXNgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzczOTg3MDQ0L3R5cGVndWFyZGluZy1hbi11bmtub3duLW5lc3RlZC1vYmplY3Qgc2hvdWxkIGJlIGZpeGVkIGluIDQuOCtcbmNvbnN0IGlzUmVxdWVzdEVycm9yID0gKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVxdWVzdEVycm9yID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvciAhPT0gbnVsbCAmJiAnYm9keScgaW4gZXJyb3I7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlcXVlc3RFcnJvcjtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICBzdHlsZXMsXG59OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0pOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICBpZiAoc3R5bGVzLmNvbG9yKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmNvbG9yID0gc3R5bGVzLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXMubGF5b3V0KSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxheW91dCA9IHN0eWxlcy5sYXlvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10gfHwgc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nbyA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnR5cGUgPSBzdHlsZXNbJ2xvZ28tdHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnBvc2l0aW9uID0gc3R5bGVzWydsb2dvLXBvc2l0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLnJhdGlvKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnJhdGlvID0gc3R5bGVzLnJhdGlvO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSB8fCBzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQgPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuY29sb3IgPSBzdHlsZXNbJ3RleHQtY29sb3InXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LnNpemUgPSArc3R5bGVzWyd0ZXh0LXNpemUnXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlc1N0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZztcbiIsImV4cG9ydCBpbnRlcmZhY2UgQmFzZUluc3RydW1lbnQge1xuICAgIGJpZ3BheVRva2VuOiBzdHJpbmc7XG4gICAgZGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW47XG4gICAgcHJvdmlkZXI6IHN0cmluZztcbiAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBib29sZWFuO1xuICAgIG1ldGhvZDogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZUluc3RydW1lbnQoaW5zdHJ1bWVudDogdW5rbm93bik6IGluc3RydW1lbnQgaXMgQmFzZUluc3RydW1lbnQge1xuICAgIGlmICh0eXBlb2YgaW5zdHJ1bWVudCAhPT0gJ29iamVjdCcgfHwgaW5zdHJ1bWVudCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ2JpZ3BheVRva2VuJyBpbiBpbnN0cnVtZW50ICYmXG4gICAgICAgICdkZWZhdWx0SW5zdHJ1bWVudCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAncHJvdmlkZXInIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ3RydXN0ZWRTaGlwcGluZ0FkZHJlc3MnIGluIGluc3RydW1lbnQgJiZcbiAgICAgICAgJ21ldGhvZCcgaW4gaW5zdHJ1bWVudCAmJlxuICAgICAgICAndHlwZScgaW4gaW5zdHJ1bWVudFxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnQsXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIGlzUGF5cGFsQ29tbWVyY2VQcm92aWRlckVycm9yLFxuICAgIGlzUmVkaXJlY3RBY3Rpb25FcnJvcixcbiAgICBNZXNzYWdpbmdPcHRpb25zLFxuICAgIFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICBQYXlQYWxDb21tZXJjZVNkayxcbiAgICBQYXlQYWxNZXNzYWdlc1Nkayxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNCYXNlSW5zdHJ1bWVudCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcbiAgICBwcml2YXRlIHBheXBhbGNvbW1lcmNlPzogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZVNkazogUGF5UGFsQ29tbWVyY2VTZGssXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICB0aGlzLnBheXBhbGNvbW1lcmNlID0gcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIGJhbm5lckNvbnRhaW5lcklkIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBvcmRlcklkLFxuICAgICAgICAgICAgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSxcbiAgICAgICAgICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlLFxuICAgICAgICB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgaWYgKGJhbm5lckNvbnRhaW5lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYmFubmVyQ29udGFpbmVySWQpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY3JlYXRlIGJhbm5lciB3aXRob3V0IHZhbGlkIGJhbm5lciBjb250YWluZXIgSUQuJyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGJhbm5lckNvbmZpZ3VyYXRpb24gPSBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbj8uZmluZChcbiAgICAgICAgICAgICAgICAoeyBpZCB9KSA9PiBpZCA9PT0gJ2NoZWNrb3V0JyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChpc1BheVBhbENyZWRpdEF2YWlsYWJsZSB8fCAhYmFubmVyQ29uZmlndXJhdGlvbj8uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlcyA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VTZGsuZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoIXBheXBhbE1lc3NhZ2VzIHx8IHR5cGVvZiBwYXlwYWxNZXNzYWdlcz8uTWVzc2FnZXMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnW0JDIFBheVBhbENvbW1lcmNlIFBheUxhdGVyXTogYmFubmVyIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gY29udGFpbmVyPy5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKHBheXBhbGNvbW1lcmNlLm9uSW5pdCAmJiB0eXBlb2YgcGF5cGFsY29tbWVyY2Uub25Jbml0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZS5vbkluaXQoKCkgPT4gdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZS5zaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLnNob3VsZFJlbmRlclBheVBhbEJ1dHRvbk9uSW5pdGlhbGl6YXRpb25cbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHsgb25FcnJvciB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhKHBheW1lbnREYXRhKSAmJiAhdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBhd2FpdCB0aGlzLmNyZWF0ZU9yZGVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMub3JkZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5pc1BheVBhbFZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudERhdGEocGF5bWVudERhdGEpXG4gICAgICAgICAgICA/IHRoaXMucHJlcGFyZVZhdWx0ZWRJbnN0cnVtZW50UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHRoaXMub3JkZXJJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICA6IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCB0aGlzLm9yZGVySWQsIHBheW1lbnREYXRhKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIGlmIChpc1JlZGlyZWN0QWN0aW9uRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkPy5kYXRhPy5yZWRpcmVjdF91cmw7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4gd2luZG93LmxvY2F0aW9uLnJlcGxhY2UocmVkaXJlY3RVcmwpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm92aWRlckVycm9yKGVycm9yKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhwYXltZW50Lm1ldGhvZElkKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBheXBhbGNvbW1lcmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbj8uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKHBheW1lbnQubWV0aG9kSWQsIHRoaXMucGF5cGFsY29tbWVyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgRXJyb3IoJ0lOU1RSVU1FTlRfREVDTElORUQnKSwgb25FcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvcik7XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHByZXBhcmVWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcmRlcklkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBWYXVsdGVkSW5zdHJ1bWVudCAmIEhvc3RlZEluc3RydW1lbnQsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkLCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBwYXltZW50RGF0YTtcblxuICAgICAgICBjb25zdCBzaG91bGRDb25maXJtSW5zdHJ1bWVudCA9ICF0aGlzLmlzVHJ1c3RlZFZhdWx0aW5nRmxvdyhwYXltZW50RGF0YSk7XG5cbiAgICAgICAgaWYgKHNob3VsZENvbmZpcm1JbnN0cnVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50OiBzaG91bGRDb25maXJtSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcl9pZDogcGF5cGFsT3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBwYXlwYWxPcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9yZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5WydwYXltZW50RGF0YSddLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfYWNjb3VudDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHBheXBhbE9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IHBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5jcmVhdGVPcmRlcigpLFxuICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhKSA9PiB0aGlzLmhhbmRsZUFwcHJvdmUoZGF0YSwgc3VibWl0Rm9ybSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25PcHRpb25zKTtcblxuICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9uUmVuZGVyQnV0dG9uICYmIHR5cGVvZiBvblJlbmRlckJ1dHRvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25SZW5kZXJCdXR0b24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBheXBhbEJ1dHRvbi5oYXNSZXR1cm5lZD8uKCkgJiYgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsQnV0dG9uLnJlc3VtZT8uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGFjdGlvbnM6IENsaWNrQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBvblZhbGlkYXRlOiBQYXlQYWxDb21tZXJjZVBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25WYWxpZGF0ZSddLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHJlc29sdmUsIHJlamVjdCB9ID0gYWN0aW9ucztcblxuICAgICAgICBjb25zdCBvblZhbGlkYXRpb25QYXNzZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9uVmFsaWRhdGU/LihvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N1Ym1pdEZvcm0nXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gb3JkZXJJRDtcblxuICAgICAgICBzdWJtaXRGb3JtPy4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uRXJyb3InXSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcblxuICAgICAgICBpZiAob25FcnJvciAmJiB0eXBlb2Ygb25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZGVyKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGZpZWxkc1ZhbHVlcyA9IHRoaXMuZ2V0RmllbGRzVmFsdWVzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlY2hlY2tvdXQnLCB7XG4gICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudDogZmllbGRzVmFsdWVzPy5zaG91bGRTYXZlSW5zdHJ1bWVudCB8fCBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBWYXVsdGluZyBmbG93IG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBnZXRGaWVsZHNWYWx1ZXMoKTogSG9zdGVkSW5zdHJ1bWVudCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHsgZ2V0RmllbGRzVmFsdWVzIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiB0eXBlb2YgZ2V0RmllbGRzVmFsdWVzID09PSAnZnVuY3Rpb24nID8gZ2V0RmllbGRzVmFsdWVzKCkgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1RydXN0ZWRWYXVsdGluZ0Zsb3cocGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHBheW1lbnREYXRhICYmIGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHN0YXRlLmdldEluc3RydW1lbnRzKCk7XG4gICAgICAgICAgICBjb25zdCBmaW5kSW5zdHJ1bWVudCA9IGluc3RydW1lbnRzPy5maW5kKFxuICAgICAgICAgICAgICAgIChpbnN0cnVtZW50KSA9PlxuICAgICAgICAgICAgICAgICAgICBpc0Jhc2VJbnN0cnVtZW50KGluc3RydW1lbnQpICYmXG4gICAgICAgICAgICAgICAgICAgIGluc3RydW1lbnQuYmlncGF5VG9rZW4gPT09IHBheW1lbnREYXRhLmluc3RydW1lbnRJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzID0gaXNCYXNlSW5zdHJ1bWVudChmaW5kSW5zdHJ1bWVudClcbiAgICAgICAgICAgICAgICA/IGZpbmRJbnN0cnVtZW50LnRydXN0ZWRTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgICAgICByZXR1cm4gISF0cnVzdGVkU2hpcHBpbmdBZGRyZXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogR3VhcmRzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5UGFsVmF1bHRlZEluc3RydW1lbnRQYXltZW50RGF0YShcbiAgICAgICAgcGF5bWVudERhdGE/OiBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgKTogcGF5bWVudERhdGEgaXMgVmF1bHRlZEluc3RydW1lbnQgJiBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICEhcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgJiYgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFJlbmRlciBQYXkgTGF0ZXIgTWVzc2FnZXNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhcbiAgICAgICAgcGF5cGFsTWVzc2FnZXM6IFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgICAgICBiYW5uZXJDb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBiYW5uZXJDb25maWd1cmF0aW9uOiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2hlY2tvdXRPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXNPcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zID0ge1xuICAgICAgICAgICAgYW1vdW50OiBjaGVja291dC5vdXRzdGFuZGluZ0JhbGFuY2UsXG4gICAgICAgICAgICBwbGFjZW1lbnQ6ICdwYXltZW50JyxcbiAgICAgICAgICAgIHN0eWxlOiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKGJhbm5lckNvbmZpZ3VyYXRpb24pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLk1lc3NhZ2VzKHBheXBhbE1lc3NhZ2VzT3B0aW9ucykucmVuZGVyKGAjJHtiYW5uZXJDb250YWluZXJJZH1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEVycm9yIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoaXNQYXlwYWxDb21tZXJjZVByb3ZpZGVyRXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxQcm92aWRlckVycm9yID0gZXJyb3I/LmVycm9ycz8uZmlsdGVyKChlKSA9PiBlLnByb3ZpZGVyX2Vycm9yKSB8fCBbXTtcblxuICAgICAgICAgICAgcmV0dXJuIHBheXBhbFByb3ZpZGVyRXJyb3JbMF0/LnByb3ZpZGVyX2Vycm9yPy5jb2RlID09PSAnSU5TVFJVTUVOVF9ERUNMSU5FRCc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNBcHBTd2l0Y2hFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzUmVxdWVzdEVycm9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFByb3ZpZGVyRXJyb3IgfSBmcm9tICcuL2lzLXBheXBhbC1jb21tZXJjZS1wcm92aWRlci1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVkaXJlY3RBY3Rpb25FcnJvciBleHRlbmRzIFByb3ZpZGVyRXJyb3Ige1xuICAgIGJvZHk6IHtcbiAgICAgICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdvZmZzaXRlX3JlZGlyZWN0JztcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdF91cmw6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNSZWRpcmVjdEFjdGlvbkVycm9yKGVycm9yOiB1bmtub3duKTogZXJyb3IgaXMgUmVkaXJlY3RBY3Rpb25FcnJvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgaXNSZXF1ZXN0RXJyb3IoZXJyb3IpICYmIGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ/LnR5cGUgPT09ICdvZmZzaXRlX3JlZGlyZWN0J1xuICAgICk7XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZXJyb3JzPzogRXJyb3JFbGVtZW50W107XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICAgIHRocmVlX2RzX3Jlc3VsdD86IHtcbiAgICAgICAgYWNzX3VybDogdW5rbm93bjtcbiAgICAgICAgcGF5ZXJfYXV0aF9yZXF1ZXN0OiB1bmtub3duO1xuICAgICAgICBtZXJjaGFudF9kYXRhOiB1bmtub3duO1xuICAgICAgICBjYWxsYmFja191cmw6IHVua25vd247XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckVsZW1lbnQge1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcHJvdmlkZXJfZXJyb3I/OiB7XG4gICAgICAgIGNvZGU6IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvcihlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIFByb3ZpZGVyRXJyb3Ige1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdlcnJvcnMnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IFBheVBhbENvbW1lcmNlU2RrIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtY29tbWVyY2UtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyB9IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1jb25zdGFudHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFBheVBhbENvbW1lcmNlUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBQYXlQYWxDb21tZXJjZVNkayhnZXRTY3JpcHRMb2FkZXIoKSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTLFxuICAgICAgICB9KSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgdHJ5IHRvIGNhbGwgYSBtZXRob2QgdGhhdCBpcyBvbmx5IGEgc3R1YiBhbmQgaGFzIG5vdFxuICogYmVlbiBmdWxseSBpbXBsZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnTm90IGltcGxlbWVudGVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdOb3RJbXBsZW1lbnRlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ25vdF9pbXBsZW1lbnRlZCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBOb3RJbXBsZW1lbnRlZEVycm9yLFxuICAgIE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcixcbiAgICBPcmRlclJlcXVlc3RCb2R5LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbENvbW1lcmNlU2RrLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC1jb21tZXJjZS11dGlscyc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxCdXR0b24/OiBQYXlQYWxDb21tZXJjZUJ1dHRvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxDb21tZXJjZVNkayxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zPzogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSwgcGF5cGFsY29tbWVyY2VjcmVkaXQgfSA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgY29uc3QgcGF5cGFsT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0IHx8IHBheXBhbGNvbW1lcmNlO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiA9IFtdLCBvcmRlcklkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBiYW5uZXJDb250YWluZXJJZCwgY29udGFpbmVyIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGlmIChiYW5uZXJDb250YWluZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJhbm5lckNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBiYW5uZXIgd2l0aG91dCB2YWxpZCBiYW5uZXIgY29udGFpbmVyIElELicpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJlxuICAgICAgICAgICAgICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uLmZpbmQoKHsgaWQgfSkgPT4gaWQgPT09ICdjaGVja291dCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlU2RrLmdldFBheVBhbE1lc3NhZ2VzKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsTWVzc2FnZXMsIGJhbm5lckNvbnRhaW5lcklkLCBiYW5uZXJDb25maWd1cmF0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGNvbnRhaW5lcj8uc3BsaXQoJyMnKVsxXTtcblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsT3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShwYXlsb2FkOiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgaWYgKCFwYXltZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yKFsncGF5bWVudCddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnQubWV0aG9kSWQsIHRoaXMub3JkZXJJZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy5vcmRlcklkID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uPy5jbG9zZSgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEJ1dHRvbiBtZXRob2RzL2NhbGxiYWNrc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3B0aW9uczogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGlmICghcGF5cGFsT3B0aW9ucz8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcImNvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBwYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBvblZhbGlkYXRlLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VjcmVkaXRjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgb25DbGljazogKF8sIGFjdGlvbnMpID0+IHRoaXMuaGFuZGxlQ2xpY2soYWN0aW9ucywgb25WYWxpZGF0ZSksXG4gICAgICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpLFxuICAgICAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4gdGhpcy5oYW5kbGVFcnJvcihlcnJvciwgb25FcnJvciksXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMucGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSAmJiBmdW5kaW5nU291cmNlID09PSBwYXlwYWxTZGsuRlVORElORy5QQVlMQVRFUikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkgJiYgZnVuZGluZ1NvdXJjZSA9PT0gcGF5cGFsU2RrLkZVTkRJTkcuQ1JFRElUKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBQYXlQYWwgJHtmdW5kaW5nU291cmNlfSBpcyBub3QgYXZhaWxhYmxlIGZvciB5b3VyIHJlZ2lvbi4gUGxlYXNlIHVzZSBQYXlQYWwgQ2hlY2tvdXQgaW5zdGVhZC5gLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvblJlbmRlckJ1dHRvbiAmJiB0eXBlb2Ygb25SZW5kZXJCdXR0b24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBheXBhbEJ1dHRvbi5yZW5kZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGhhc1JlbmRlcmVkU21hcnRCdXR0b24gPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgb25WYWxpZGF0ZTogUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvblZhbGlkYXRlICYmIHR5cGVvZiBvblZhbGlkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIHJlamVjdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRJbml0aWFsaXplT3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIGlmIChzdWJtaXRGb3JtICYmIHR5cGVvZiBzdWJtaXRGb3JtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzdWJtaXRGb3JtKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVycm9yKFxuICAgICAgICBlcnJvcjogRXJyb3IsXG4gICAgICAgIG9uRXJyb3I6IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudEluaXRpYWxpemVPcHRpb25zWydvbkVycm9yJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBMb2FkaW5nIEluZGljYXRvciBtZXRob2RzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXIgUGF5IExhdGVyIE1lc3NhZ2VzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzOiBQYXlQYWxNZXNzYWdlc1NkayxcbiAgICAgICAgYmFubmVyQ29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgYmFubmVyQ29uZmlndXJhdGlvbjogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBjaGVja291dCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENoZWNrb3V0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbE1lc3NhZ2VzT3B0aW9uczogTWVzc2FnaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFtb3VudDogY2hlY2tvdXQub3V0c3RhbmRpbmdCYWxhbmNlLFxuICAgICAgICAgICAgcGxhY2VtZW50OiAncGF5bWVudCcsXG4gICAgICAgICAgICBzdHlsZTogZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZyhiYW5uZXJDb25maWd1cmF0aW9uKSxcbiAgICAgICAgfTtcblxuICAgICAgICBwYXlwYWxNZXNzYWdlcy5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpLnJlbmRlcihgIyR7YmFubmVyQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBjcmVhdGVQYXlQYWxDb21tZXJjZVNkayB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VDcmVkaXRQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgICAgICBjb250YWluZXJTdHlsZXM6IExPQURJTkdfSU5ESUNBVE9SX1NUWUxFUyxcbiAgICAgICAgfSksXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlU2RrKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0UGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBjcmVhdGVTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVNkayBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1zZGsnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQYXlQYWxDb21tZXJjZVNkaygpOiBQYXlQYWxDb21tZXJjZVNkayB7XG4gICAgcmV0dXJuIG5ldyBQYXlQYWxDb21tZXJjZVNkayhjcmVhdGVTY3JpcHRMb2FkZXIoKSk7XG59XG4iLCJpbXBvcnQge1xuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE5vdEltcGxlbWVudGVkRXJyb3IsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yLFxuICAgIFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXZlbm1vLXBheW1lbnQtaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyPzogc3RyaW5nO1xuICAgIHByaXZhdGUgb3JkZXJJZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbEJ1dHRvbj86IFBheVBhbENvbW1lcmNlQnV0dG9ucztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2U6IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9ucz86IFBheW1lbnRJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZSwgcGF5cGFsY29tbWVyY2V2ZW5tbyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBjb25zdCBwYXlwYWxPcHRpb25zID0gcGF5cGFsY29tbWVyY2V2ZW5tbyB8fCBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgLy8gSW5mbzpcbiAgICAgICAgLy8gVGhlIFBheVBhbCBidXR0b24gYW5kIGZpZWxkcyBzaG91bGQgbm90IGJlIHJlbmRlcmVkIHdoZW4gc2hvcHBlciB3YXMgcmVkaXJlY3RlZCB0byBDaGVja291dCBwYWdlXG4gICAgICAgIC8vIGFmdGVyIHVzaW5nIHNtYXJ0IHBheW1lbnQgYnV0dG9uIG9uIFBEUCBvciBDYXJ0IHBhZ2UuIEluIHRoaXMgY2FzZSBiYWNrZW5kIHJldHVybnMgb3JkZXIgaWQgaWZcbiAgICAgICAgLy8gaXQgaXMgYXZhaWxhYmxlIGluIGNoZWNrb3V0IHNlc3Npb24uIFRoZXJlZm9yZSwgaXQgaXMgbm90IG5lY2Vzc2FyeSB0byByZW5kZXIgUGF5UGFsIGJ1dHRvbi5cbiAgICAgICAgaWYgKHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhPy5vcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8ub3JkZXJJZDtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBwYXlwYWxPcHRpb25zLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBwYXlwYWxPcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudC5tZXRob2RJZCwgdGhpcy5vcmRlcklkKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV0dG9uIG1ldGhvZHMvY2FsbGJhY2tzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZXZlbm1vOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRQYXltZW50QnV0dG9uU3R5bGVzIH0gPSBwYXltZW50QnV0dG9uU3R5bGVzIHx8IHt9O1xuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkVycm9yLCBvblJlbmRlckJ1dHRvbiwgb25WYWxpZGF0ZSwgc3VibWl0Rm9ybSB9ID0gcGF5cGFsY29tbWVyY2V2ZW5tbztcblxuICAgICAgICBjb25zdCBidXR0b25PcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZTogcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU8sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKFxuICAgICAgICAgICAgICAgIGNoZWNrb3V0UGF5bWVudEJ1dHRvblN0eWxlcyxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZXZlbm1vY2hlY2tvdXQnKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChfLCBhY3Rpb25zKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGFjdGlvbnMsIG9uVmFsaWRhdGUpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSksXG4gICAgICAgICAgICBvbkVycm9yOiAoZXJyb3IpID0+IHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IsIG9uRXJyb3IpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uT3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLnBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKFxuICAgICAgICAgICAgICAgIGBQYXlQYWwgVmVubW8gaXMgbm90IGF2YWlsYWJsZSBmb3IgeW91ciByZWdpb24uIFBsZWFzZSB1c2UgUGF5UGFsIENoZWNrb3V0IGluc3RlYWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVDbGljayhcbiAgICAgICAgYWN0aW9uczogQ2xpY2tDYWxsYmFja0FjdGlvbnMsXG4gICAgICAgIG9uVmFsaWRhdGU6IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ29uVmFsaWRhdGUnXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyByZXNvbHZlLCByZWplY3QgfSA9IGFjdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBvblZhbGlkYXRlKG9uVmFsaWRhdGlvblBhc3NlZCwgcmVqZWN0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUFwcHJvdmUoXG4gICAgICAgIHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBzdWJtaXRGb3JtOiBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdWJtaXRGb3JtJ10sXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySUQ7XG5cbiAgICAgICAgc3VibWl0Rm9ybSgpO1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlRXJyb3IoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogTG9hZGluZyBJbmRpY2F0b3IgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIHRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoaXNMb2FkaW5nOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcgJiYgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVZlbm1vUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3IoeyBzdHlsZXM6IHsgYmFja2dyb3VuZENvbG9yOiAnYmxhY2snIH0gfSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9QYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBCdXlOb3dDYXJ0UmVxdWVzdEJvZHksXG4gICAgQ2FyZEluc3RydW1lbnQsXG4gICAgQ3VzdG9tZXJBZGRyZXNzLFxuICAgIEhvc3RlZEluc3RydW1lbnQsXG4gICAgU2hpcHBpbmdPcHRpb24sXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG4vKipcbiAqXG4gKiBQYXlQYWwgRnVuZGluZyBzb3VyY2VzXG4gKlxuICovXG5leHBvcnQgdHlwZSBGdW5kaW5nVHlwZSA9IHN0cmluZ1tdO1xuZXhwb3J0IHR5cGUgRW5hYmxlRnVuZGluZ1R5cGUgPSBGdW5kaW5nVHlwZSB8IHN0cmluZztcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDb21tZXJjZVNES0Z1bmRpbmcge1xuICAgIENBUkQ6IHN0cmluZztcbiAgICBQQVlQQUw6IHN0cmluZztcbiAgICBDUkVESVQ6IHN0cmluZztcbiAgICBQQVlMQVRFUjogc3RyaW5nO1xuICAgIE9YWE86IHN0cmluZztcbiAgICBTRVBBOiBzdHJpbmc7XG4gICAgVkVOTU86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIEJ1eU5vd1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyB7XG4gICAgZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5KCk6IEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keTtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIEluaXRpYWxpemF0aW9uIERhdGFcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBhdHRyaWJ1dGlvbklkPzogc3RyaW5nO1xuICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHM6IEZ1bmRpbmdUeXBlO1xuICAgIGJ1dHRvblN0eWxlPzogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zO1xuICAgIGJ1eWVyQ291bnRyeT86IHN0cmluZztcbiAgICBjbGllbnRJZDogc3RyaW5nO1xuICAgIGNsaWVudFRva2VuPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lU3R5bGVzPzogRmFzdGxhbmVTdHlsZXNTZXR0aW5ncztcbiAgICBjb25uZWN0Q2xpZW50VG9rZW4/OiBzdHJpbmc7IC8vIFRPRE86IHJlbW92ZSB3aGVuIFBQQ1AgRmFzdGxhbmUgQS9CIHRlc3Qgd2lsbCBiZSBmaW5pc2hlZFxuICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzOiBGdW5kaW5nVHlwZTtcbiAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlPzogYm9vbGVhbjtcbiAgICBpbnRlbnQ/OiBQYXlQYWxJbnRlbnQ7XG4gICAgaXNBY2NlbGVyYXRlZENoZWNrb3V0RW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNGYXN0bGFuZVNoaXBwaW5nT3B0aW9uQXV0b1NlbGVjdEVuYWJsZWQ/OiBib29sZWFuOyAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZFxuICAgIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZD86IGJvb2xlYW47XG4gICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzUGF5UGFsQW5hbHl0aWNzVjJFbmFibGVkPzogYm9vbGVhbjsgLy8gUGF5UGFsIEZhc3RsYW5lIHJlbGF0ZWRcbiAgICBpc1BheVBhbENyZWRpdEF2YWlsYWJsZT86IGJvb2xlYW47XG4gICAgaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZD86IGJvb2xlYW47IC8vIFBheVBhbCBGYXN0bGFuZSByZWxhdGVkXG4gICAgaXNWZW5tb0VuYWJsZWQ/OiBib29sZWFuO1xuICAgIGlzR29vZ2xlUGF5RW5hYmxlZD86IGJvb2xlYW47XG4gICAgbWVyY2hhbnRJZD86IHN0cmluZztcbiAgICBvcmRlcklkPzogc3RyaW5nO1xuICAgIHNob3VsZFJlbmRlckZpZWxkcz86IGJvb2xlYW47XG4gICAgc2hvdWxkUnVuQWNjZWxlcmF0ZWRDaGVja291dD86IGJvb2xlYW47IC8vIFRPRE86IHJlbW92ZSB3aGVuIFBQQ1AgRmFzdGxhbmUgQS9CIHRlc3Qgd2lsbCBiZSBmaW5pc2hlZFxuICAgIHBheW1lbnRCdXR0b25TdHlsZXM/OiBSZWNvcmQ8c3RyaW5nLCBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM+O1xuICAgIHBheXBhbEJOUExDb25maWd1cmF0aW9uPzogUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtW107XG4gICAgdGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZD86IHN0cmluZztcbiAgICBpc0FwcFN3aXRjaEVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWxIb3N0V2luZG93IGNvbnRhaW5zIGRpZmZlcmVudFxuICogUGF5UGFsIFNkayBpbnN0YW5jZXMgZm9yIGRpZmZlcmVudCBwdXJwb3Nlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxIb3N0V2luZG93IGV4dGVuZHMgV2luZG93IHtcbiAgICBwYXlwYWw/OiBQYXlQYWxTREs7XG4gICAgcGF5cGFsRmFzdGxhbmU/OiBQYXlQYWxGYXN0bGFuZTtcbiAgICBwYXlwYWxGYXN0bGFuZVNkaz86IFBheVBhbEZhc3RsYW5lU2RrO1xuICAgIHBheXBhbE1lc3NhZ2VzPzogUGF5UGFsTWVzc2FnZXNTZGs7XG4gICAgcGF5cGFsQXBtcz86IFBheVBhbEFwbVNkaztcbiAgICBwYXlwYWxHb29nbGVQYXk/OiBQYXlQYWxHb29nbGVQYXlTZGs7XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBTREsgY29uZmlnXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFNka0NvbmZpZyB7XG4gICAgb3B0aW9uczoge1xuICAgICAgICAnY2xpZW50LWlkJz86IHN0cmluZztcbiAgICAgICAgJ21lcmNoYW50LWlkJz86IHN0cmluZztcbiAgICAgICAgJ2J1eWVyLWNvdW50cnknPzogc3RyaW5nO1xuICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnPzogRW5hYmxlRnVuZGluZ1R5cGU7XG4gICAgICAgICdkaXNhYmxlLWZ1bmRpbmcnPzogRnVuZGluZ1R5cGU7XG4gICAgICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgICAgICBjb21taXQ/OiBib29sZWFuO1xuICAgICAgICBpbnRlbnQ/OiBQYXlQYWxJbnRlbnQ7XG4gICAgICAgIGNvbXBvbmVudHM/OiBQYXlQYWxTZGtDb21wb25lbnRzO1xuICAgIH07XG4gICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1jbGllbnQtbWV0YWRhdGEtaWQnPzogc3RyaW5nO1xuICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJz86IHN0cmluZztcbiAgICAgICAgJ2RhdGEtc2RrLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLW5hbWVzcGFjZSc/OiBzdHJpbmc7XG4gICAgICAgICdkYXRhLWNsaWVudC10b2tlbic/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsSW50ZW50IHtcbiAgICBBVVRIT1JJWkUgPSAnYXV0aG9yaXplJyxcbiAgICBDQVBUVVJFID0gJ2NhcHR1cmUnLFxufVxuXG5leHBvcnQgdHlwZSBQYXlQYWxTZGtDb21wb25lbnRzID0gQXJyYXk8XG4gICAgfCAnZmFzdGxhbmUnXG4gICAgfCAndGhyZWUtZG9tYWluLXNlY3VyZSdcbiAgICB8ICdidXR0b25zJ1xuICAgIHwgJ2Z1bmRpbmctZWxpZ2liaWxpdHknXG4gICAgfCAnaG9zdGVkLWZpZWxkcydcbiAgICB8ICdtZXNzYWdlcydcbiAgICB8ICdwYXltZW50LWZpZWxkcydcbiAgICB8ICdsZWdhbCdcbiAgICB8ICdnb29nbGVwYXknXG4gICAgfCAnY29ubmVjdCdcbiAgICB8ICdjYXJkLWZpZWxkcydcbj47XG5cbmV4cG9ydCB0eXBlIFBheVBhbExlZ2FsID0gKHBhcmFtczogeyBmdW5kaW5nU291cmNlOiBzdHJpbmcgfSkgPT4ge1xuICAgIHJlbmRlcihjb250YWluZXI6IHN0cmluZyk6IHZvaWQ7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIExlZ2FsRnVuZGluZyB7XG4gICAgRlVORElORzoge1xuICAgICAgICBQQVlfVVBPTl9JTlZPSUNFOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIFNkayBpbnN0YW5jZXNcbiAqXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU0RLIHtcbiAgICBDYXJkRmllbGRzOiAoZGF0YTogUGF5cGFsQ2FyZEZpZWxkc0NvbmZpZykgPT4gUHJvbWlzZTxQYXlQYWxDYXJkRmllbGRzPjtcbiAgICBHb29nbGVwYXk6ICgpID0+IHtcbiAgICAgICAgY29uZmlnOiAoKSA9PiBQcm9taXNlPEdvb2dsZVBheUNvbmZpZz47XG4gICAgICAgIGNvbmZpcm1PcmRlcjogKGFyZzA6IHtcbiAgICAgICAgICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2REYXRhOiBDb25maXJtT3JkZXJEYXRhO1xuICAgICAgICB9KSA9PiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcgfT47XG4gICAgICAgIGluaXRpYXRlUGF5ZXJBY3Rpb246ICgpID0+IHZvaWQ7XG4gICAgfTtcbiAgICBGVU5ESU5HOiBQYXlQYWxDb21tZXJjZVNES0Z1bmRpbmc7XG4gICAgSG9zdGVkRmllbGRzOiB7XG4gICAgICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbiAgICAgICAgcmVuZGVyKGRhdGE6IFBheVBhbEhvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnMpOiBQcm9taXNlPFBheVBhbEhvc3RlZEZpZWxkcz47XG4gICAgfTtcbiAgICBMZWdhbDogUGF5UGFsTGVnYWwgJiBMZWdhbEZ1bmRpbmc7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxCdXR0b25zT3B0aW9ucyk6IFBheVBhbEJ1dHRvbnM7XG4gICAgUGF5bWVudEZpZWxkcyhvcHRpb25zOiBQYXlQYWxQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbFBheW1lbnRGaWVsZHM7XG4gICAgTWVzc2FnZXMob3B0aW9uczogUGF5UGFsTWVzc2FnZXNPcHRpb25zKTogUGF5UGFsTWVzc2FnZXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsQ2FyZEZpZWxkc0NvbmZpZyB7XG4gICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgb25DaGFuZ2UoZGF0YTogUGF5UGFsQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25Gb2N1cyhkYXRhOiBQYXlQYWxDYXJkRmllbGRzU3RhdGUpOiB2b2lkO1xuICAgICAgICBvbkJsdXIoZGF0YTogUGF5UGFsQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICAgICAgb25JbnB1dFN1Ym1pdFJlcXVlc3QoZGF0YTogUGF5UGFsQ2FyZEZpZWxkc1N0YXRlKTogdm9pZDtcbiAgICB9O1xuICAgIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbj86IChkYXRhOiBQYXlQYWxDYXJkRmllbGRzU3RhdGUpID0+IHZvaWQ7XG4gICAgY3JlYXRlT3JkZXI/OiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG4gICAgc3R5bGU6IFBheVBhbEhvc3RlZEZpZWxkc1JlbmRlck9wdGlvbnNbJ3N0eWxlcyddO1xuICAgIG9uQXBwcm92ZShkYXRhOiBQYXlQYWxDYXJkRmllbGRzT25BcHByb3ZlRGF0YSk6IHZvaWQ7XG4gICAgb25FcnJvcigpOiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgUGF5UGFsRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDYXJkRmllbGRzIHtcbiAgICBpc0VsaWdpYmxlKCk6IGJvb2xlYW47XG4gICAgQ1ZWRmllbGQoY29uZmlnPzogUGF5UGFsRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsRmllbGRzO1xuICAgIEV4cGlyeUZpZWxkKGNvbmZpZz86IFBheVBhbEZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbEZpZWxkcztcbiAgICBOYW1lRmllbGQoY29uZmlnPzogUGF5UGFsRmllbGRzSW5pdGlhbGl6YXRpb25EYXRhKTogUGF5UGFsRmllbGRzO1xuICAgIE51bWJlckZpZWxkKGNvbmZpZz86IFBheVBhbEZpZWxkc0luaXRpYWxpemF0aW9uRGF0YSk6IFBheVBhbEZpZWxkcztcbiAgICBzdWJtaXQoY29uZmlnPzogUGF5UGFsQ2FyZEZpZWxkc1N1Ym1pdENvbmZpZyk6IFByb21pc2U8dm9pZD47XG4gICAgZ2V0U3RhdGUoKTogUHJvbWlzZTxQYXlQYWxDYXJkRmllbGRzU3RhdGU+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbENhcmRGaWVsZHNTdWJtaXRDb25maWcge1xuICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgIGNvbXBhbnk/OiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3NMaW5lMTogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzTGluZTI/OiBzdHJpbmc7XG4gICAgICAgIGFkbWluQXJlYTE6IHN0cmluZzsgLy8gU3RhdGVcbiAgICAgICAgYWRtaW5BcmVhMjogc3RyaW5nOyAvLyBDaXR5XG4gICAgICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICAgICAgY291bnRyeUNvZGU/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDYXJkRmllbGRzT25BcHByb3ZlRGF0YSB7XG4gICAgdmF1bHRTZXR1cFRva2VuPzogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbiAgICBsaWFiaWxpdHlTaGlmdD86IExpYWJpbGl0eVNoaWZ0RW51bTtcbn1cblxuaW50ZXJmYWNlIFBheVBhbENhcmRGaWVsZHNGaWVsZERhdGEge1xuICAgIGlzRm9jdXNlZDogYm9vbGVhbjtcbiAgICBpc0VtcHR5OiBib29sZWFuO1xuICAgIGlzVmFsaWQ6IGJvb2xlYW47XG4gICAgaXNQb3RlbnRpYWxseVZhbGlkOiBib29sZWFuO1xufVxuXG50eXBlIFBheVBhbENhcmRGaWVsZHNDYXJkID0gUGF5UGFsSG9zdGVkRmllbGRzQ2FyZDtcblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDYXJkRmllbGRzU3RhdGUge1xuICAgIGNhcmRzOiBQYXlQYWxDYXJkRmllbGRzQ2FyZFtdO1xuICAgIGVtaXR0ZWRCeTogc3RyaW5nO1xuICAgIGlzRm9ybVZhbGlkOiBib29sZWFuO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gICAgZmllbGRzOiB7XG4gICAgICAgIGNhcmRDdnZGaWVsZDogUGF5UGFsQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZE51bWJlckZpZWxkOiBQYXlQYWxDYXJkRmllbGRzRmllbGREYXRhO1xuICAgICAgICBjYXJkTmFtZUZpZWxkPzogUGF5UGFsQ2FyZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgY2FyZEV4cGlyeUZpZWxkOiBQYXlQYWxDYXJkRmllbGRzRmllbGREYXRhO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmllbGRzIHtcbiAgICByZW5kZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgY2xlYXIoKTogdm9pZDtcbiAgICByZW1vdmVDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgY2xvc2UoKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVNkayB7XG4gICAgVGhyZWVEb21haW5TZWN1cmVDbGllbnQ6IHtcbiAgICAgICAgaXNFbGlnaWJsZShwYXJhbXM6IHRocmVlRFNlY3VyZVBhcmFtZXRlcnMpOiBQcm9taXNlPGJvb2xlYW4+O1xuICAgICAgICBzaG93KCk6IFByb21pc2U8VGhyZWVEb21haW5TZWN1cmVDbGllbnRTaG93UmVzcG9uc2U+O1xuICAgIH07XG4gICAgRmFzdGxhbmUob3B0aW9ucz86IFBheVBhbEZhc3RsYW5lT3B0aW9ucyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmU+O1xufVxuXG5pbnRlcmZhY2UgVGhyZWVEb21haW5TZWN1cmVDbGllbnRTaG93UmVzcG9uc2Uge1xuICAgIGxpYWJpbGl0eVNoaWZ0OiBMaWFiaWxpdHlTaGlmdEVudW07XG4gICAgYXV0aGVudGljYXRpb25TdGF0ZTogVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlO1xuICAgIG5vbmNlOiBzdHJpbmc7IC8vIEVucmljaGVkIG5vbmNlIG9yIHRoZSBvcmlnaW5hbCBub25jZVxufVxuXG5leHBvcnQgZW51bSBURFNlY3VyZVZlcmlmaWNhdGlvbk1ldGhvZCB7XG4gICAgQWx3YXlzID0gJ1NDQV9BTFdBWVMnLFxufVxuXG5leHBvcnQgZW51bSBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUge1xuICAgIFN1Y2NlZWRlZCA9ICdzdWNjZWVkZWQnLFxuICAgIENhbmNlbGxlZCA9ICdjYW5jZWxsZWQnLFxuICAgIEVycm9yZWQgPSAnZXJyb3JlZCcsXG59XG5cbmV4cG9ydCBlbnVtIExpYWJpbGl0eVNoaWZ0RW51bSB7XG4gICAgUG9zc2libGUgPSAnUE9TU0lCTEUnLFxuICAgIE5vID0gJ05PJyxcbiAgICBVbmtub3duID0gJ1VOS05PV04nLFxuICAgIFllcyA9ICdZRVMnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIHRocmVlRFNlY3VyZVBhcmFtZXRlcnMge1xuICAgIGFtb3VudDogc3RyaW5nO1xuICAgIGN1cnJlbmN5OiBzdHJpbmc7XG4gICAgbm9uY2U6IHN0cmluZztcbiAgICB0aHJlZURTUmVxdWVzdGVkOiBib29sZWFuO1xuICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICBleHBlcmllbmNlX2NvbnRleHQ6IHtcbiAgICAgICAgICAgIGJyYW5kX25hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICBsb2NhbGU6IHN0cmluZztcbiAgICAgICAgICAgIHJldHVybl91cmw6IHN0cmluZztcbiAgICAgICAgICAgIGNhbmNlbF91cmw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE1lc3NhZ2VzU2RrIHtcbiAgICBNZXNzYWdlcyhvcHRpb25zOiBNZXNzYWdpbmdPcHRpb25zKTogTWVzc2FnaW5nUmVuZGVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFwbVNkayB7XG4gICAgQnV0dG9ucyhvcHRpb25zOiBQYXlQYWxCdXR0b25zT3B0aW9ucyk6IFBheVBhbEJ1dHRvbnM7XG4gICAgUGF5bWVudEZpZWxkcyhvcHRpb25zOiBQYXlQYWxQYXltZW50RmllbGRzT3B0aW9ucyk6IFBheVBhbFBheW1lbnRGaWVsZHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsR29vZ2xlUGF5U2RrIHtcbiAgICBHb29nbGVwYXkoKTogR29vZ2xlUGF5O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgUGF5bWVudHMgSG9zdGVkIEZpZWxkc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zIHtcbiAgICBmaWVsZHM/OiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbEhvc3RlZEZpZWxkT3B0aW9uO1xuICAgICAgICBjdnY/OiBQYXlQYWxIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxIb3N0ZWRGaWVsZE9wdGlvbjtcbiAgICB9O1xuICAgIHBheW1lbnRzU0RLPzogYm9vbGVhbjtcbiAgICBzdHlsZXM/OiB7XG4gICAgICAgIGlucHV0PzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJy5pbnZhbGlkJz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH07XG4gICAgICAgICcudmFsaWQnPzogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgICAgICAgJzpmb2N1cyc/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9O1xuICAgIH07XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkT3B0aW9uIHtcbiAgICBzZWxlY3Rvcjogc3RyaW5nO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkcyB7XG4gICAgc3VibWl0KG9wdGlvbnM/OiBQYXlQYWxIb3N0ZWRGaWVsZHNTdWJtaXRPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxIb3N0ZWRGaWVsZHNBcHByb3ZlPjtcbiAgICBnZXRTdGF0ZSgpOiBQYXlQYWxIb3N0ZWRGaWVsZHNTdGF0ZTtcbiAgICBvbihldmVudE5hbWU6IHN0cmluZywgY2FsbGJhY2s6IChldmVudDogUGF5UGFsSG9zdGVkRmllbGRzU3RhdGUpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkc1N1Ym1pdE9wdGlvbnMge1xuICAgIGNvbnRpbmdlbmNpZXM/OiBBcnJheTwnM0RfU0VDVVJFJz47XG4gICAgY2FyZGhvbGRlck5hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRzQXBwcm92ZSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIGxpYWJpbGl0eVNoaWZ0PzogJ1BPU1NJQkxFJyB8ICdOTycgfCAnVU5LTk9XTic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSG9zdGVkRmllbGRzU3RhdGUge1xuICAgIGNhcmRzOiBQYXlQYWxIb3N0ZWRGaWVsZHNDYXJkW107XG4gICAgZW1pdHRlZEJ5OiBzdHJpbmc7XG4gICAgZmllbGRzOiB7XG4gICAgICAgIG51bWJlcj86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvbkRhdGU/OiBQYXlQYWxIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGV4cGlyYXRpb25Nb250aD86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgZXhwaXJhdGlvblllYXI/OiBQYXlQYWxIb3N0ZWRGaWVsZHNGaWVsZERhdGE7XG4gICAgICAgIGN2dj86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICAgICAgcG9zdGFsQ29kZT86IFBheVBhbEhvc3RlZEZpZWxkc0ZpZWxkRGF0YTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEhvc3RlZEZpZWxkc0NhcmQge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBuaWNlVHlwZTogc3RyaW5nO1xuICAgIGNvZGU6IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBzaXplOiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxIb3N0ZWRGaWVsZHNGaWVsZERhdGEge1xuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgaXNGb2N1c2VkOiBib29sZWFuO1xuICAgIGlzRW1wdHk6IGJvb2xlYW47XG4gICAgaXNQb3RlbnRpYWxseVZhbGlkOiBib29sZWFuO1xuICAgIGlzVmFsaWQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICpcbiAqIFBheVBhbCBCdXR0b25zXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEJ1dHRvbnMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbiAgICBjbG9zZSgpOiB2b2lkO1xuICAgIGlzRWxpZ2libGUoKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25zT3B0aW9ucyB7XG4gICAgZXhwZXJpZW5jZT86IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucztcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgY3JlYXRlT3JkZXIoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIG9uQXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4gfCB2b2lkPiB8IHZvaWQ7XG4gICAgb25Jbml0PyhkYXRhOiBJbml0Q2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBJbml0Q2FsbGJhY2tBY3Rpb25zKTogUHJvbWlzZTx2b2lkPjtcbiAgICBvbkNvbXBsZXRlPyhkYXRhOiBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQpOiBQcm9taXNlPHZvaWQ+O1xuICAgIG9uQ2xpY2s/KGRhdGE6IENsaWNrQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBDbGlja0NhbGxiYWNrQWN0aW9ucyk6IFByb21pc2U8dm9pZD4gfCB2b2lkO1xuICAgIG9uRXJyb3I/KGVycm9yOiBFcnJvcik6IHZvaWQ7XG4gICAgb25DYW5jZWw/KCk6IHZvaWQ7XG4gICAgb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCk6IFByb21pc2U8dm9pZD47XG4gICAgb25TaGlwcGluZ09wdGlvbnNDaGFuZ2U/KGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb246IFBheVBhbFNlbGVjdGVkU2hpcHBpbmdPcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENsaWNrQ2FsbGJhY2tQYXlsb2FkIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpY2tDYWxsYmFja0FjdGlvbnMge1xuICAgIHJlamVjdCgpOiB2b2lkO1xuICAgIHJlc29sdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbml0Q2FsbGJhY2tQYXlsb2FkIHtcbiAgICBjb3JyZWxhdGlvbklEOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5pdENhbGxiYWNrQWN0aW9ucyB7XG4gICAgZGlzYWJsZSgpOiB2b2lkO1xuICAgIGVuYWJsZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEFkZHJlc3Mge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIHBvc3RhbENvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheXBhbEFkZHJlc3NDYWxsYmFja0RhdGEge1xuICAgIGNpdHk6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbiAgICBwb3N0YWxfY29kZTogc3RyaW5nO1xuICAgIHN0YXRlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsU2VsZWN0ZWRTaGlwcGluZ09wdGlvbiB7XG4gICAgYW1vdW50OiB7XG4gICAgICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbiAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICB9O1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBzZWxlY3RlZDogYm9vbGVhbjtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCB7XG4gICAgb3JkZXJJRD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zIHtcbiAgICBvcmRlcjoge1xuICAgICAgICBnZXQ6ICgpID0+IFByb21pc2U8UGF5UGFsT3JkZXJEZXRhaWxzPjtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGV0YWlscyB7XG4gICAgcGF5ZXI6IHtcbiAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgZ2l2ZW5fbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgc3VybmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M6IFBheVBhbE9yZGVyQWRkcmVzcztcbiAgICAgICAgcGhvbmU/OiB7XG4gICAgICAgICAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgICAgICAgICAgICBuYXRpb25hbF9udW1iZXI6IHN0cmluZztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBwdXJjaGFzZV91bml0czogQXJyYXk8e1xuICAgICAgICBzaGlwcGluZzoge1xuICAgICAgICAgICAgYWRkcmVzczogUGF5UGFsT3JkZXJBZGRyZXNzO1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICAgIGZ1bGxfbmFtZTogc3RyaW5nO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlckFkZHJlc3Mge1xuICAgIGFkZHJlc3NfbGluZV8xOiBzdHJpbmc7XG4gICAgYWRkcmVzc19saW5lXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzI6IHN0cmluZztcbiAgICBhZG1pbl9hcmVhXzE/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBjb3VudHJ5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0ZUNhbGxiYWNrRGF0YVBheWxvYWQge1xuICAgIGludGVudDogc3RyaW5nO1xuICAgIG9yZGVySUQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25MYWJlbCB7XG4gICAgcGF5cGFsID0gJ3BheXBhbCcsXG4gICAgY2hlY2tvdXQgPSAnY2hlY2tvdXQnLFxuICAgIGJ1eW5vdyA9ICdidXlub3cnLFxuICAgIHBheSA9ICdwYXknLFxuICAgIGluc3RhbGxtZW50ID0gJ2luc3RhbGxtZW50Jyxcbn1cblxuZXhwb3J0IGVudW0gU3R5bGVCdXR0b25Db2xvciB7XG4gICAgZ29sZCA9ICdnb2xkJyxcbiAgICBibHVlID0gJ2JsdWUnLFxuICAgIHNpbHZlciA9ICdzaWx2ZXInLFxuICAgIGJsYWNrID0gJ2JsYWNrJyxcbiAgICB3aGl0ZSA9ICd3aGl0ZScsXG59XG5cbmV4cG9ydCBlbnVtIFN0eWxlQnV0dG9uU2hhcGUge1xuICAgIHBpbGwgPSAncGlsbCcsXG4gICAgcmVjdCA9ICdyZWN0Jyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnMge1xuICAgIGNvbG9yPzogU3R5bGVCdXR0b25Db2xvcjtcbiAgICBzaGFwZT86IFN0eWxlQnV0dG9uU2hhcGU7XG4gICAgaGVpZ2h0PzogbnVtYmVyO1xuICAgIGxhYmVsPzogU3R5bGVCdXR0b25MYWJlbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxCdXR0b25PcHRpb25zIHtcbiAgICBmdW5kaW5nU291cmNlOiBzdHJpbmc7XG4gICAgc3R5bGU/OiBQYXlQYWxCdXR0b25TdHlsZU9wdGlvbnM7XG4gICAgb25DbGljaz86ICgpID0+IHZvaWQ7XG4gICAgb25DYW5jZWw/OiAoKSA9PiB2b2lkO1xuICAgIG9uUGF5bWVudENvbXBsZXRlPzogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKlxuICogUGF5UGFsIE1lc3NhZ2VzXG4gKi9cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxNZXNzYWdlcyB7XG4gICAgcmVuZGVyKGlkOiBzdHJpbmcpOiB2b2lkO1xufVxuXG4vLyBUT0RPOiBUaGlzIGludGVyZmFjZSBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBQYXlQYXlTREsgaW50ZXJmYWNlIGlzIHJlbW92ZWRcbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsTWVzc2FnZXNPcHRpb25zIHtcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBwbGFjZW1lbnQ6IHN0cmluZztcbiAgICBzdHlsZT86IFBheVBhbE1lc3NhZ2VzU3R5bGVPcHRpb25zO1xuICAgIGZ1bmRpbmdTb3VyY2U/OiBzdHJpbmc7XG59XG5cbi8vIFRPRE86IFRoaXMgaW50ZXJmYWNlIGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIFBheVBheVNESyBpbnRlcmZhY2UgaXMgcmVtb3ZlZFxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgbGF5b3V0Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBHb29nbGUgUGF5IHJlbGF0ZWQgdHlwZXNcbiAqXG4gKi9cblxuaW50ZXJmYWNlIEdvb2dsZVBheSB7XG4gICAgY29uZmlnOiAoKSA9PiBQcm9taXNlPEdvb2dsZVBheUNvbmZpZz47XG4gICAgY29uZmlybU9yZGVyOiAoY29uZmlybU9yZGVyQ29uZmlnOiBDb25maXJtT3JkZXJDb25maWcpID0+IFByb21pc2U8eyBzdGF0dXM6IHN0cmluZyB9PjtcbiAgICBpbml0aWF0ZVBheWVyQWN0aW9uOiAocGF5ZXJBY3Rpb25Db25maWc6IFBheWVyQWN0aW9uQ29uZmlnKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG5pbnRlcmZhY2UgQ29uZmlybU9yZGVyQ29uZmlnIHtcbiAgICBvcmRlcklkOiBzdHJpbmc7XG4gICAgcGF5bWVudE1ldGhvZERhdGE6IENvbmZpcm1PcmRlckRhdGE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlybU9yZGVyRGF0YSB7XG4gICAgdG9rZW5pemF0aW9uRGF0YToge1xuICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBpbmZvOiB7XG4gICAgICAgIGNhcmROZXR3b3JrOiBzdHJpbmc7XG4gICAgICAgIGNhcmREZXRhaWxzOiBzdHJpbmc7XG4gICAgfTtcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXllckFjdGlvbkNvbmZpZyB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdvb2dsZVBheUNvbmZpZyB7XG4gICAgYWxsb3dlZFBheW1lbnRNZXRob2RzOiBBbGxvd2VkUGF5bWVudE1ldGhvZHNbXTtcbiAgICBhcGlWZXJzaW9uOiBudW1iZXI7XG4gICAgYXBpVmVyc2lvbk1pbm9yOiBudW1iZXI7XG4gICAgY291bnRyeUNvZGU6IHN0cmluZztcbiAgICBpc0VsaWdpYmxlOiBib29sZWFuO1xuICAgIG1lcmNoYW50SW5mbzoge1xuICAgICAgICBtZXJjaGFudElkOiBzdHJpbmc7XG4gICAgICAgIG1lcmNoYW50T3JpZ2luOiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbGxvd2VkUGF5bWVudE1ldGhvZHMge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIGFsbG93ZWRBdXRoTWV0aG9kczogc3RyaW5nW107XG4gICAgICAgIGFsbG93ZWRDYXJkTmV0d29ya3M6IHN0cmluZ1tdO1xuICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiBib29sZWFuO1xuICAgICAgICBhc3N1cmFuY2VEZXRhaWxzUmVxdWlyZWQ6IGJvb2xlYW47XG4gICAgICAgIGJpbGxpbmdBZGRyZXNzUGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZm9ybWF0OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICB0b2tlbml6YXRpb25TcGVjaWZpY2F0aW9uOiB7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgZ2F0ZXdheTogc3RyaW5nO1xuICAgICAgICAgICAgZ2F0ZXdheU1lcmNoYW50SWQ6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgIFBheW1lbnQgZmllbGRzXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFBheW1lbnRGaWVsZHMge1xuICAgIHJlbmRlcihpZDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxQYXltZW50RmllbGRzT3B0aW9ucyB7XG4gICAgc3R5bGU/OiBQYXlQYWxGaWVsZHNTdHlsZU9wdGlvbnM7XG4gICAgZnVuZGluZ1NvdXJjZTogc3RyaW5nO1xuICAgIGZpZWxkczoge1xuICAgICAgICBuYW1lPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGVtYWlsPzoge1xuICAgICAgICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGaWVsZHNTdHlsZU9wdGlvbnMge1xuICAgIHZhcmlhYmxlcz86IHtcbiAgICAgICAgZm9udEZhbWlseT86IHN0cmluZztcbiAgICAgICAgZm9udFNpemVCYXNlPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZVNtPzogc3RyaW5nO1xuICAgICAgICBmb250U2l6ZU0/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplTGc/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvcj86IHN0cmluZztcbiAgICAgICAgY29sb3JUZXh0UGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gICAgICAgIGNvbG9yQmFja2dyb3VuZD86IHN0cmluZztcbiAgICAgICAgY29sb3JJbmZvPzogc3RyaW5nO1xuICAgICAgICBjb2xvckRhbmdlcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgICAgICBib3JkZXJDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIGJvcmRlckZvY3VzQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIHNwYWNpbmdVbml0Pzogc3RyaW5nO1xuICAgIH07XG4gICAgcnVsZXM/OiB7XG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgICB9O1xufVxuXG4vKipcbiAqXG4gKiBQYXlMYXRlciBNZXNzYWdlcyByZWxhdGVkIHR5cGVzXG4gKiBkb2M6IGh0dHBzOi8vZGV2ZWxvcGVyLnBheXBhbC5jb20vZG9jcy9jaGVja291dC9wYXktbGF0ZXIvdXMvaW50ZWdyYXRlL3JlZmVyZW5jZVxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2luZ1JlbmRlciB7XG4gICAgcmVuZGVyKGNvbnRhaW5lcjogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29sb3I/OiBzdHJpbmc7IC8vICdibHVlJyB8ICdibGFjaycgfCAnd2hpdGUnIHwgJ3doaXRlLW5vLWJvcmRlcicgfCAnZ3JheScgfCAnbW9ub2Nocm9tZScgfCAnZ3JheXNjYWxlJ1xuICAgIGxheW91dD86IHN0cmluZzsgLy8gJ3RleHQnIHwgJ2ZsZXgnXG4gICAgbG9nbz86IHtcbiAgICAgICAgdHlwZT86IHN0cmluZzsgLy8gJ3ByaW1hcnknIHwgJ2FsdGVybmF0aXZlJyB8ICdpbmxpbmUnIHwgJ25vbmUnXG4gICAgICAgIHBvc2l0aW9uPzogc3RyaW5nOyAvLyAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCdcbiAgICB9O1xuICAgIHJhdGlvPzogc3RyaW5nOyAvLyAnMXgxJyB8ICcxeDQnIHwgJzh4MScgfCAnMjB4MSdcbiAgICB0ZXh0Pzoge1xuICAgICAgICBhbGlnbj86IHN0cmluZzsgLy8gJ2xlZnQnIHwgJ3JpZ2h0JyB8ICdjZW50ZXInXG4gICAgICAgIGNvbG9yPzogc3RyaW5nOyAvLyAnYmxhY2snIHwgJ3doaXRlJyB8ICdtb25vY2hyb21lJyB8ICdncmF5c2NhbGUnXG4gICAgICAgIHNpemU/OiBudW1iZXI7IC8vIGZyb20gMTAgdG8gMTZcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2luZ09wdGlvbnMge1xuICAgIGFtb3VudDogbnVtYmVyO1xuICAgIHBsYWNlbWVudDogc3RyaW5nO1xuICAgIHN0eWxlPzogTWVzc2FnZXNTdHlsZU9wdGlvbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBzdGF0dXM6IGJvb2xlYW47XG4gICAgc3R5bGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG4vKipcbiAqXG4gKiBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlZCB0eXBlc1xuICpcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZSB7XG4gICAgaWRlbnRpdHk6IFBheVBhbEZhc3RsYW5lSWRlbnRpdHk7XG4gICAgZXZlbnRzOiBQYXlQYWxGYXN0bGFuZUV2ZW50cztcbiAgICBwcm9maWxlOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGU7XG4gICAgRmFzdGxhbmVDYXJkQ29tcG9uZW50KFxuICAgICAgICBvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVPcHRpb25zIHtcbiAgICBzdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUlkZW50aXR5IHtcbiAgICBsb29rdXBDdXN0b21lckJ5RW1haWwoZW1haWw6IHN0cmluZyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQ+O1xuICAgIHRyaWdnZXJBdXRoZW50aWNhdGlvbkZsb3coXG4gICAgICAgIGN1c3RvbWVyQ29udGV4dElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUxvb2t1cEN1c3RvbWVyQnlFbWFpbFJlc3VsdCB7XG4gICAgY3VzdG9tZXJDb250ZXh0SWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCB7XG4gICAgYXV0aGVudGljYXRpb25TdGF0ZT86IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZTtcbiAgICBwcm9maWxlRGF0YT86IFBheVBhbEZhc3RsYW5lUHJvZmlsZURhdGE7XG59XG5cbmV4cG9ydCBlbnVtIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZSB7XG4gICAgU1VDQ0VFREVEID0gJ3N1Y2NlZWRlZCcsXG4gICAgRkFJTEVEID0gJ2ZhaWxlZCcsXG4gICAgQ0FOQ0VMRUQgPSAnY2FuY2VsZWQnLFxuICAgIFVOUkVDT0dOSVpFRCA9ICd1bnJlY29nbml6ZWQnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZURhdGEge1xuICAgIG5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgc2hpcHBpbmdBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZVNoaXBwaW5nQWRkcmVzcztcbiAgICBjYXJkOiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUge1xuICAgIGZ1bGxOYW1lOiBzdHJpbmc7XG4gICAgZmlyc3ROYW1lPzogc3RyaW5nO1xuICAgIGxhc3ROYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lIHtcbiAgICBjb3VudHJ5Q29kZTogc3RyaW5nO1xuICAgIG5hdGlvbmFsTnVtYmVyOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3Mge1xuICAgIG5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWU7XG4gICAgcGhvbmVOdW1iZXI6IFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lO1xuICAgIGFkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkIHtcbiAgICBpZDogc3RyaW5nOyAvLyBub25jZSAvIHRva2VuXG4gICAgcGF5bWVudFNvdXJjZTogUGF5UGFsRmFzdGxhbmVQYXltZW50U291cmNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUGF5bWVudFNvdXJjZSB7XG4gICAgY2FyZDogUGF5UGFsRmFzdGxhbmVDYXJkU291cmNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZFNvdXJjZSB7XG4gICAgYnJhbmQ6IHN0cmluZztcbiAgICBleHBpcnk6IHN0cmluZzsgLy8gXCJZWVlZLU1NXCJcbiAgICBsYXN0RGlnaXRzOiBzdHJpbmc7IC8vIFwiMTExMVwiXG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGJpbGxpbmdBZGRyZXNzOiBQYXlQYWxGYXN0bGFuZUFkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBZGRyZXNzIHtcbiAgICBjb21wYW55Pzogc3RyaW5nO1xuICAgIGFkZHJlc3NMaW5lMTogc3RyaW5nO1xuICAgIGFkZHJlc3NMaW5lMj86IHN0cmluZztcbiAgICBhZG1pbkFyZWExOiBzdHJpbmc7IC8vIFN0YXRlXG4gICAgYWRtaW5BcmVhMjogc3RyaW5nOyAvLyBDaXR5XG4gICAgcG9zdGFsQ29kZTogc3RyaW5nO1xuICAgIGNvdW50cnlDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0IHtcbiAgICBhdXRoZW50aWNhdGlvblN0YXRlOiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGU7XG4gICAgYWRkcmVzc2VzOiBDdXN0b21lckFkZHJlc3NbXTtcbiAgICBiaWxsaW5nQWRkcmVzcz86IEN1c3RvbWVyQWRkcmVzcztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBDdXN0b21lckFkZHJlc3M7XG4gICAgaW5zdHJ1bWVudHM6IENhcmRJbnN0cnVtZW50W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24ge1xuICAgIHJvb3Q/OiB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvclByaW1hcnk/OiBzdHJpbmc7XG4gICAgICAgIGVycm9yQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRGYW1pbHk/OiBzdHJpbmc7XG4gICAgICAgIGZvbnRTaXplQmFzZT86IHN0cmluZztcbiAgICAgICAgcGFkZGluZz86IHN0cmluZztcbiAgICAgICAgcHJpbWFyeUNvbG9yPzogc3RyaW5nO1xuICAgIH07XG4gICAgaW5wdXQ/OiB7XG4gICAgICAgIGJvcmRlclJhZGl1cz86IHN0cmluZztcbiAgICAgICAgYm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGZvY3VzQm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICAgICAgYm9yZGVyV2lkdGg/OiBzdHJpbmc7XG4gICAgICAgIHRleHRDb2xvckJhc2U/OiBzdHJpbmc7XG4gICAgfTtcbiAgICB0b2dnbGU/OiB7XG4gICAgICAgIGNvbG9yUHJpbWFyeT86IHN0cmluZztcbiAgICAgICAgY29sb3JTZWNvbmRhcnk/OiBzdHJpbmc7XG4gICAgfTtcbiAgICB0ZXh0Pzoge1xuICAgICAgICBib2R5Pzoge1xuICAgICAgICAgICAgY29sb3I/OiBzdHJpbmc7XG4gICAgICAgICAgICBmb250U2l6ZT86IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgY2FwdGlvbj86IHtcbiAgICAgICAgICAgIGNvbG9yPzogc3RyaW5nO1xuICAgICAgICAgICAgZm9udFNpemU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBicmFuZGluZz86IHN0cmluZzsgLy8gJ2xpZ2h0JyB8ICdkYXJrJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lUHJvZmlsZSB7XG4gICAgc2hvd0NhcmRTZWxlY3RvcigpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lQ2FyZFNlbGVjdG9yUmVzcG9uc2U+O1xuICAgIHNob3dTaGlwcGluZ0FkZHJlc3NTZWxlY3RvcigpOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lU2hpcHBpbmdBZGRyZXNzU2VsZWN0b3JSZXNwb25zZT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3NTZWxlY3RvclJlc3BvbnNlIHtcbiAgICBzZWxlY3Rpb25DaGFuZ2VkOiBib29sZWFuO1xuICAgIHNlbGVjdGVkQWRkcmVzczogUGF5UGFsRmFzdGxhbmVTaGlwcGluZ0FkZHJlc3M7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkU2VsZWN0b3JSZXNwb25zZSB7XG4gICAgc2VsZWN0aW9uQ2hhbmdlZDogYm9vbGVhbjtcbiAgICBzZWxlY3RlZENhcmQ6IFBheVBhbEZhc3RsYW5lUHJvZmlsZUNhcmQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyB7XG4gICAgZ2V0UGF5bWVudFRva2VuKFxuICAgICAgICBvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUdldFBheW1lbnRUb2tlbk9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkPjtcbiAgICByZW5kZXIoZWxlbWVudDogc3RyaW5nKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUdldFBheW1lbnRUb2tlbk9wdGlvbnMge1xuICAgIG5hbWU/OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lO1xuICAgIGJpbGxpbmdBZGRyZXNzPzogUGF5UGFsRmFzdGxhbmVBZGRyZXNzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE9wdGlvbnMge1xuICAgIGZpZWxkcz86IFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudEZpZWxkcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRGaWVsZHMge1xuICAgIGNhcmRob2xkZXJOYW1lPzoge1xuICAgICAgICBlbmFibGVkPzogYm9vbGVhbjtcbiAgICAgICAgcHJlZmlsbD86IHN0cmluZztcbiAgICB9O1xuICAgIHBob25lTnVtYmVyPzoge1xuICAgICAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgICAgICAgcHJlZmlsbD86IHN0cmluZztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbEZhc3RsYW5lRXZlbnRzIHtcbiAgICBhcG1TZWxlY3RlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lQXBtU2VsZWN0ZWRFdmVudE9wdGlvbnMpID0+IHZvaWQ7XG4gICAgZW1haWxTdWJtaXR0ZWQ6IChvcHRpb25zOiBQYXlQYWxGYXN0bGFuZUVtYWlsRW50ZXJlZEV2ZW50T3B0aW9ucykgPT4gdm9pZDtcbiAgICBvcmRlclBsYWNlZDogKG9wdGlvbnM6IFBheVBhbEZhc3RsYW5lT3JkZXJQbGFjZWRFdmVudE9wdGlvbnMpID0+IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVFdmVudENvbW1vbk9wdGlvbnMge1xuICAgIGNvbnRleHRfdHlwZTogJ2NzX2lkJztcbiAgICBjb250ZXh0X2lkOiBzdHJpbmc7IC8vIGNoZWNrb3V0IHNlc3Npb24gaWRcbiAgICBwYWdlX3R5cGU6ICdjaGVja291dF9wYWdlJztcbiAgICBwYWdlX25hbWU6IHN0cmluZzsgLy8gdGl0bGUgb2YgdGhlIGNoZWNrb3V0IGluaXRpYXRpb24gcGFnZVxuICAgIHBhcnRuZXJfbmFtZTogJ2JpZ2MnO1xuICAgIHVzZXJfdHlwZTogJ3N0b3JlX21lbWJlcicgfCAnc3RvcmVfZ3Vlc3QnOyAvLyB0eXBlIG9mIHRoZSB1c2VyIG9uIHRoZSBtZXJjaGFudCBzaXRlXG4gICAgc3RvcmVfaWQ6IHN0cmluZztcbiAgICBtZXJjaGFudF9uYW1lOiBzdHJpbmc7XG4gICAgZXhwZXJpbWVudDogc3RyaW5nOyAvLyBzdHJpbmdpZnkgSlNPTiBvYmplY3QgXCJbeyB0cmVhdG1lbnRfZ3JvdXA6ICd0ZXN0JyB8ICdjb250cm9sJyB9XVwiXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVBcG1TZWxlY3RlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBhcG1fc2hvd246ICcwJyB8ICcxJzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gdGhlIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fbGlzdDogc3RyaW5nOyAvLyBsaXN0IG9mIGFsdGVybmF0ZSBwYXltZW50IHNob3duIG9uIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fc2VsZWN0ZWQ6IHN0cmluZzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgbWV0aG9kIHNlbGVjdGVkIC8gbWV0aG9kSWRcbiAgICBhcG1fbG9jYXRpb246ICdwcmUtZW1haWwgc2VjdGlvbicgfCAncGF5bWVudCBzZWN0aW9uJzsgLy8gcGxhY2VtZW50IG9mIEFQTSwgd2hldGhlciBpdCBiZSBhYm92ZSB0aGUgZW1haWwgZW50cnkgb3IgaW4gdGhlIHJhZGlvIGJ1dHRvbnNcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZUVtYWlsRW50ZXJlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICB1c2VyX2VtYWlsX3NhdmVkOiBib29sZWFuOyAvLyBzaG93cyB3aGV0aGVyIGNoZWNrb3V0IHdhcyBsb2FkZWQgd2l0aCBvciB3aXRob3V0IGEgc2F2ZWQgZW1haWxcbiAgICBhcG1fc2hvd246ICcwJyB8ICcxJzsgLy8gYWx0ZXJuYXRlIHBheW1lbnQgc2hvd24gb24gdGhlIGNoZWNrb3V0IHBhZ2VcbiAgICBhcG1fbGlzdDogc3RyaW5nOyAvLyBsaXN0IG9mIGFsdGVybmF0ZSBwYXltZW50IHNob3duIG9uIGNoZWNrb3V0IHBhZ2UgJ2FwcGxlcGF5LGdvb2dsZXBheSxwYXlwYWwnXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsRmFzdGxhbmVPcmRlclBsYWNlZEV2ZW50T3B0aW9ucyBleHRlbmRzIFBheVBhbEZhc3RsYW5lRXZlbnRDb21tb25PcHRpb25zIHtcbiAgICBzZWxlY3RlZF9wYXltZW50X21ldGhvZDogc3RyaW5nO1xuICAgIGN1cnJlbmN5X2NvZGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkIHtcbiAgICBwYXlwYWxfY29ubmVjdF90b2tlbj86IHtcbiAgICAgICAgb3JkZXJfaWQ/OiBzdHJpbmc7XG4gICAgICAgIHRva2VuOiBzdHJpbmc7XG4gICAgfTtcbiAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW4/OiB7XG4gICAgICAgIG9yZGVyX2lkPzogc3RyaW5nO1xuICAgICAgICB0b2tlbjogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmFzdGxhbmVTdHlsZXNTZXR0aW5ncyB7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lUm9vdFNldHRpbmdzRm9udEZhbWlseT86IHN0cmluZztcbiAgICBmYXN0bGFuZVJvb3RTZXR0aW5nc1BhZGRpbmc/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NQcmltYXJ5Q29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZT86IHN0cmluZztcbiAgICBmYXN0bGFuZUlucHV0U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc0JvcmRlcldpZHRoPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lSW5wdXRTZXR0aW5nc1RleHRDb2xvckJhc2U/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3I/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnk/OiBzdHJpbmc7XG4gICAgZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5Pzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dEJvZHlTZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yPzogc3RyaW5nO1xuICAgIGZhc3RsYW5lQnJhbmRpbmdTZXR0aW5ncz86IHN0cmluZztcbn1cblxuLyoqXG4gKlxuICogT3RoZXJcbiAqXG4gKi9cbmV4cG9ydCBlbnVtIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzIHtcbiAgICBPWFhPID0gJ294eG8nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbE9yZGVyRGF0YSB7XG4gICAgb3JkZXJJZDogc3RyaW5nO1xuICAgIHNldHVwVG9rZW4/OiBzdHJpbmc7XG4gICAgYXBwcm92ZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHkge1xuICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucz86IFNoaXBwaW5nT3B0aW9uW107XG4gICAgY2FydElkOiBzdHJpbmc7XG4gICAgc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj86IFNoaXBwaW5nT3B0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2Uge1xuICAgIHN0YXR1c0NvZGU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5IGV4dGVuZHMgSG9zdGVkSW5zdHJ1bWVudCwgVmF1bHRlZEluc3RydW1lbnQge1xuICAgIGNhcnRJZDogc3RyaW5nO1xuICAgIG1ldGFkYXRhSWQ/OiBzdHJpbmc7XG4gICAgc2V0dXBUb2tlbj86IGJvb2xlYW47XG4gICAgZmFzdGxhbmVUb2tlbj86IHN0cmluZztcbn1cblxuZXhwb3J0IGVudW0gUGF5UGFsT3JkZXJTdGF0dXMge1xuICAgIEFwcHJvdmVkID0gJ0FQUFJPVkVEJyxcbiAgICBDcmVhdGVkID0gJ0NSRUFURUQnLFxuICAgIFBheWVyQWN0aW9uUmVxdWlyZWQgPSAnUEFZRVJfQUNUSU9OX1JFUVVJUkVEJyxcbiAgICBQb2xsaW5nU3RvcCA9ICdQT0xMSU5HX1NUT1AnLFxuICAgIFBvbGxpbmdFcnJvciA9ICdQT0xMSU5HX0VSUk9SJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXlQYWxPcmRlclN0YXR1c0RhdGEge1xuICAgIHN0YXR1czogUGF5UGFsT3JkZXJTdGF0dXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsQ3JlYXRlT3JkZXJDYXJkRmllbGRzUmVzcG9uc2Uge1xuICAgIG9yZGVySWQ6IHN0cmluZztcbiAgICBzZXR1cFRva2VuPzogc3RyaW5nO1xufVxuIiwiaW1wb3J0IHsgU2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudE1ldGhvZCxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgRnVuZGluZ1R5cGUsXG4gICAgUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgUGF5UGFsR29vZ2xlUGF5U2RrLFxuICAgIFBheVBhbEhvc3RXaW5kb3csXG4gICAgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbE1lc3NhZ2VzU2RrLFxuICAgIFBheVBhbFNESyxcbiAgICBQYXlQYWxTZGtDb21wb25lbnRzLFxuICAgIFBheVBhbFNka0NvbmZpZyxcbn0gZnJvbSAnLi9wYXlwYWwtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxTZGtTY3JpcHRMb2FkZXIge1xuICAgIHByaXZhdGUgd2luZG93OiBQYXlQYWxIb3N0V2luZG93O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFNjcmlwdExvYWRlcikge1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxTREsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsU0RLPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsIHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWw7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVTZGs+IHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaykge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmVTZGspIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZVNkaztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXlQYWxHb29nbGVQYXlTZGsoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2U/OiBib29sZWFuLFxuICAgICAgICBmb3JjZUxvYWQ/OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5UGFsR29vZ2xlUGF5U2RrPiB7XG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5IHx8IGZvcmNlTG9hZCkge1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrU2NyaXB0Q29uZmlnID0gdGhpcy5nZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRQYXlQYWxTZGsocGF5cGFsU2RrU2NyaXB0Q29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsR29vZ2xlUGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvdy5wYXlwYWxHb29nbGVQYXk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsQXBtc1NkayhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmdldFBheVBhbEFwbVNka0NvbmZpZ3VyYXRpb24ocGF5bWVudE1ldGhvZCwgY3VycmVuY3lDb2RlKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKGNvbmZpZyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsQXBtcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbEFwbXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGF5UGFsTWVzc2FnZXMoXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxNZXNzYWdlc1Nkaz4ge1xuICAgICAgICBpZiAoIXRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXlwYWxTZGtNZXNzYWdlc0NvbmZpZyA9IHRoaXMuZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkUGF5UGFsU2RrKHBheXBhbFNka01lc3NhZ2VzQ29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsTWVzc2FnZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LnBheXBhbE1lc3NhZ2VzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogIGxvYWRQYXlQYWxTZGsgaXMgYSBwYXlwYWwgc2RrIHNjcmlwdCBsb2FkZXJcbiAgICAgKiAgd2hpY2ggbG9hZHMgcGF5cGFsIHNkayBiYXNlZCBvbiBwcm92aWRlZCBjb25maWd1cmF0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRQYXlQYWxTZGsoeyBvcHRpb25zLCBhdHRyaWJ1dGVzIH06IFBheVBhbFNka0NvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzY3JpcHRPcHRpb25zID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydvcHRpb25zJ10+KG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBzY3JpcHRBdHRyaWJ1dGVzID0gdGhpcy50cmFuc2Zvcm1Db25maWc8UGF5UGFsU2RrQ29uZmlnWydhdHRyaWJ1dGVzJ10+KGF0dHJpYnV0ZXMpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNka1VybCA9ICdodHRwczovL3d3dy5wYXlwYWwuY29tL3Nkay9qcyc7XG4gICAgICAgIGNvbnN0IHNjcmlwdFF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzY3JpcHRPcHRpb25zKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBzY3JpcHRTcmMgPSBgJHtwYXlwYWxTZGtVcmx9PyR7c2NyaXB0UXVlcnl9YDtcblxuICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHNjcmlwdFNyYywge1xuICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBzY3JpcHRBdHRyaWJ1dGVzLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENvbmZpZ3VyYXRpb25zIHNlY3Rpb25cbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyhcbiAgICAgICAgcGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZDxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+LFxuICAgICAgICBjdXJyZW5jeUNvZGU6IHN0cmluZyxcbiAgICAgICAgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZSA9IHRydWUsXG4gICAgKTogUGF5UGFsU2RrQ29uZmlnIHtcbiAgICAgICAgY29uc3QgeyBpZCwgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNWZW5tb0VuYWJsZWQsXG4gICAgICAgICAgICBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCxcbiAgICAgICAgICAgIGlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlLFxuICAgICAgICAgICAgaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgIGF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgICAgIGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzID0gW10sXG4gICAgICAgICAgICBpc0dvb2dsZVBheUVuYWJsZWQsXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgY29tbWl0ID0gaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgfHwgaW5pdGlhbGl6ZXNPbkNoZWNrb3V0UGFnZTtcblxuICAgICAgICBjb25zdCBzaG91bGRFbmFibGVDYXJkID1cbiAgICAgICAgICAgIGlkID09PSAncGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcycgfHwgaWQgPT09ICdiaWdjb21tZXJjZV9wYXltZW50c19jcmVkaXRjYXJkcyc7XG4gICAgICAgIGNvbnN0IGVuYWJsZUNhcmRGdW5kaW5nID0gc2hvdWxkRW5hYmxlQ2FyZCA/IFsnY2FyZCddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVDYXJkRnVuZGluZyA9ICFzaG91bGRFbmFibGVDYXJkID8gWydjYXJkJ10gOiBbXTtcblxuICAgICAgICBjb25zdCBlbmFibGVDcmVkaXRGdW5kaW5nID0gaXNQYXlQYWxDcmVkaXRBdmFpbGFibGUgPyBbJ2NyZWRpdCcsICdwYXlsYXRlciddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVDcmVkaXRGdW5kaW5nID0gIWlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlID8gWydjcmVkaXQnLCAncGF5bGF0ZXInXSA6IFtdO1xuXG4gICAgICAgIGNvbnN0IGVuYWJsZVZlbm1vRnVuZGluZyA9IGlzVmVubW9FbmFibGVkID8gWyd2ZW5tbyddIDogW107XG4gICAgICAgIGNvbnN0IGRpc2FibGVWZW5tb0Z1bmRpbmcgPSAhaXNWZW5tb0VuYWJsZWQgPyBbJ3Zlbm1vJ10gOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUFQTXNGdW5kaW5nID0gYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5maWx0ZXIoXG4gICAgICAgICAgICAoYXBtOiBzdHJpbmcpID0+ICFlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcy5pbmNsdWRlcyhhcG0pLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBnb29nbGVQYXlDb21wb25lbnQ6IFBheVBhbFNka0NvbXBvbmVudHMgPSBpc0dvb2dsZVBheUVuYWJsZWQgPyBbJ2dvb2dsZXBheSddIDogW107XG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb21wb25lbnQ6IFBheVBhbFNka0NvbXBvbmVudHMgPSBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlXG4gICAgICAgICAgICA/IFsnY2FyZC1maWVsZHMnXVxuICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgY29uc3QgZGlzYWJsZUZ1bmRpbmc6IEZ1bmRpbmdUeXBlID0gW1xuICAgICAgICAgICAgLi4uZGlzYWJsZUNhcmRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZGlzYWJsZUNyZWRpdEZ1bmRpbmcsXG4gICAgICAgICAgICAuLi5kaXNhYmxlVmVubW9GdW5kaW5nLFxuICAgICAgICAgICAgLi4uZGlzYWJsZUFQTXNGdW5kaW5nLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBlbmFibGVGdW5kaW5nOiBGdW5kaW5nVHlwZSA9IFtcbiAgICAgICAgICAgIC4uLmVuYWJsZUNhcmRGdW5kaW5nLFxuICAgICAgICAgICAgLi4uZW5hYmxlQ3JlZGl0RnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZVZlbm1vRnVuZGluZyxcbiAgICAgICAgICAgIC4uLmVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLFxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgJ2NsaWVudC1pZCc6IGNsaWVudElkLFxuICAgICAgICAgICAgICAgICdtZXJjaGFudC1pZCc6IG1lcmNoYW50SWQsXG4gICAgICAgICAgICAgICAgJ2VuYWJsZS1mdW5kaW5nJzogZW5hYmxlRnVuZGluZy5sZW5ndGggPiAwID8gZW5hYmxlRnVuZGluZyA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAnZGlzYWJsZS1mdW5kaW5nJzogZGlzYWJsZUZ1bmRpbmcubGVuZ3RoID4gMCA/IGRpc2FibGVGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNvbW1pdCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgICdidXR0b25zJyxcbiAgICAgICAgICAgICAgICAgICAgJ2hvc3RlZC1maWVsZHMnLFxuICAgICAgICAgICAgICAgICAgICAncGF5bWVudC1maWVsZHMnLFxuICAgICAgICAgICAgICAgICAgICAnbGVnYWwnLFxuICAgICAgICAgICAgICAgICAgICAuLi5nb29nbGVQYXlDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIC4uLmNhcmRGaWVsZHNDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxGYXN0bGFuZVNka0NvbmZpZ3VyYXRpb24oXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGludGVudCwgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgICdmYXN0bGFuZScsXG4gICAgICAgICAgICAgICAgICAgICdidXR0b25zJyxcbiAgICAgICAgICAgICAgICAgICAgJ3BheW1lbnQtZmllbGRzJyxcbiAgICAgICAgICAgICAgICAgICAgJ2hvc3RlZC1maWVsZHMnLFxuICAgICAgICAgICAgICAgICAgICAndGhyZWUtZG9tYWluLXNlY3VyZScsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtY2xpZW50LW1ldGFkYXRhLWlkJzogc2Vzc2lvbklkLnJlcGxhY2UoLy0vZywgJycpLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxGYXN0bGFuZVNkaycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICAgICAgJ2RhdGEtc2RrLWNsaWVudC10b2tlbic6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFBheVBhbEdvb2dsZVBheVNka1NjcmlwdENvbmZpZ09yVGhyb3coXG4gICAgICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2Q8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPixcbiAgICAgICAgY3VycmVuY3lDb2RlOiBzdHJpbmcsXG4gICAgICAgIGluaXRpYWxpemVzT25DaGVja291dFBhZ2UgPSB0cnVlLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWluaXRpYWxpemF0aW9uRGF0YSB8fCAhaW5pdGlhbGl6YXRpb25EYXRhLmNsaWVudElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbnRlbnQsXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIG1lcmNoYW50SWQsXG4gICAgICAgICAgICBidXllckNvdW50cnksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbklkLFxuICAgICAgICAgICAgaXNIb3N0ZWRDaGVja291dEVuYWJsZWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IGNvbW1pdCA9IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIHx8IGluaXRpYWxpemVzT25DaGVja291dFBhZ2U7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICBjb21taXQsXG4gICAgICAgICAgICAgICAgY29tcG9uZW50czogWydnb29nbGVwYXknXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1jbGllbnQtdG9rZW4nOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsR29vZ2xlUGF5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgIGNsaWVudElkLFxuICAgICAgICAgICAgbWVyY2hhbnRJZCxcbiAgICAgICAgICAgIGJ1eWVyQ291bnRyeSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICBpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgYXZhaWxhYmxlQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyA9IFtdLFxuICAgICAgICAgICAgZW5hYmxlZEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMgPSBbXSxcbiAgICAgICAgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCBlbmFibGVBUE1zRnVuZGluZyA9IGVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgICAgICBjb25zdCBkaXNhYmxlQVBNc0Z1bmRpbmcgPSBhdmFpbGFibGVBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmZpbHRlcihcbiAgICAgICAgICAgIChhcG06IHN0cmluZykgPT4gIWVuYWJsZWRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzLmluY2x1ZGVzKGFwbSksXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAnY2xpZW50LWlkJzogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgJ21lcmNoYW50LWlkJzogbWVyY2hhbnRJZCxcbiAgICAgICAgICAgICAgICAnZW5hYmxlLWZ1bmRpbmcnOiBlbmFibGVBUE1zRnVuZGluZy5sZW5ndGggPiAwID8gZW5hYmxlQVBNc0Z1bmRpbmcgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgJ2Rpc2FibGUtZnVuZGluZyc6IGRpc2FibGVBUE1zRnVuZGluZy5sZW5ndGggPiAwID8gZGlzYWJsZUFQTXNGdW5kaW5nIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNvbW1pdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBbJ2J1dHRvbnMnLCAncGF5bWVudC1maWVsZHMnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIGludGVudCxcbiAgICAgICAgICAgICAgICAuLi4oaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSAmJiB7ICdidXllci1jb3VudHJ5JzogYnV5ZXJDb3VudHJ5IH0pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS1wYXJ0bmVyLWF0dHJpYnV0aW9uLWlkJzogYXR0cmlidXRpb25JZCxcbiAgICAgICAgICAgICAgICAnZGF0YS1uYW1lc3BhY2UnOiAncGF5cGFsQXBtcycsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uKFxuICAgICAgICBwYXltZW50TWV0aG9kOiBQYXltZW50TWV0aG9kPFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4sXG4gICAgICAgIGN1cnJlbmN5Q29kZTogc3RyaW5nLFxuICAgICk6IFBheVBhbFNka0NvbmZpZyB7XG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaW5pdGlhbGl6YXRpb25EYXRhIHx8ICFpbml0aWFsaXphdGlvbkRhdGEuY2xpZW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50SWQsIG1lcmNoYW50SWQsIGF0dHJpYnV0aW9uSWQsIGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsIGJ1eWVyQ291bnRyeSB9ID1cbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICdjbGllbnQtaWQnOiBjbGllbnRJZCxcbiAgICAgICAgICAgICAgICAnbWVyY2hhbnQtaWQnOiBtZXJjaGFudElkLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IFsnbWVzc2FnZXMnXSxcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogY3VycmVuY3lDb2RlLFxuICAgICAgICAgICAgICAgIC4uLihpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlICYmIHsgJ2J1eWVyLWNvdW50cnknOiBidXllckNvdW50cnkgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICdkYXRhLW5hbWVzcGFjZSc6ICdwYXlwYWxNZXNzYWdlcycsXG4gICAgICAgICAgICAgICAgJ2RhdGEtcGFydG5lci1hdHRyaWJ1dGlvbi1pZCc6IGF0dHJpYnV0aW9uSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Db25maWc8VCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihjb25maWc6IFQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICAgICAgbGV0IHRyYW5zZm9ybWVkQ29uZmlnID0ge307XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNvbmZpZykgYXMgQXJyYXk8a2V5b2YgVD47XG5cbiAgICAgICAga2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgdmFsdWUgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9PT0gJycgfHxcbiAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAuLi50cmFuc2Zvcm1lZENvbmZpZyxcbiAgICAgICAgICAgICAgICBba2V5XTogQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5qb2luKCcsJykgOiB2YWx1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZENvbmZpZztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCBQYXlQYWxTZGtTY3JpcHRMb2FkZXIgZnJvbSAnLi9wYXlwYWwtc2RrLXNjcmlwdC1sb2FkZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIoKTogUGF5UGFsU2RrU2NyaXB0TG9hZGVyIHtcbiAgICByZXR1cm4gbmV3IFBheVBhbFNka1NjcmlwdExvYWRlcihjcmVhdGVTY3JpcHRMb2FkZXIoKSk7XG59XG4iLCJpbXBvcnQgeyBGb3JtUG9zdGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2Zvcm0tcG9zdGVyJztcbmltcG9ydCB7IGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHksXG4gICAgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IsXG4gICAgQ2FydCxcbiAgICBDYXJ0U291cmNlLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcixcbiAgICBSZXF1ZXN0RXJyb3IsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU2hpcHBpbmdPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsUmVxdWVzdFNlbmRlciBmcm9tICcuL3BheXBhbC1yZXF1ZXN0LXNlbmRlcic7XG5pbXBvcnQgUGF5UGFsU2RrU2NyaXB0TG9hZGVyIGZyb20gJy4vcGF5cGFsLXNkay1zY3JpcHQtbG9hZGVyJztcbmltcG9ydCB7XG4gICAgUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyQ2FyZEZpZWxkc1Jlc3BvbnNlLFxuICAgIFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbE9yZGVyRGV0YWlscyxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbiAgICBQYXlQYWxTREssXG4gICAgU3R5bGVCdXR0b25Db2xvcixcbiAgICBTdHlsZUJ1dHRvbkxhYmVsLFxuICAgIFN0eWxlQnV0dG9uU2hhcGUsXG59IGZyb20gJy4vcGF5cGFsLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIHBheXBhbFNkaz86IFBheVBhbFNESztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGZvcm1Qb3N0ZXI6IEZvcm1Qb3N0ZXIsXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxSZXF1ZXN0U2VuZGVyOiBQYXlQYWxSZXF1ZXN0U2VuZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka0xvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsU0RLIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGxvYWRQYXlQYWxTZGsoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHByb3ZpZGVkQ3VycmVuY3lDb2RlPzogc3RyaW5nLFxuICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlPzogYm9vbGVhbixcbiAgICAgICAgZm9yY2VMb2FkPzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPFBheVBhbFNESyB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBwcm92aWRlZEN1cnJlbmN5Q29kZSB8fCBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLnBheXBhbFNkayA9IGF3YWl0IHRoaXMucGF5cGFsU2RrTG9hZGVyLmdldFBheVBhbFNESyhcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICBpbml0aWFsaXplc09uQ2hlY2tvdXRQYWdlLFxuICAgICAgICAgICAgZm9yY2VMb2FkLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbFNkaztcbiAgICB9XG5cbiAgICBnZXRQYXlQYWxTZGtPclRocm93KCk6IFBheVBhbFNESyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxTZGspIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsU2RrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQnV5IE5vdyBjYXJ0IGNyZWF0aW9uIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIGNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9uczogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxDYXJ0PiB7XG4gICAgICAgIGNvbnN0IGNhcnRSZXF1ZXN0Qm9keSA9IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSgpO1xuXG4gICAgICAgIGlmICghY2FydFJlcXVlc3RCb2R5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2FydCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0KGNhcnRSZXF1ZXN0Qm9keSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQnV5Tm93Q2FydENyZWF0aW9uRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT3JkZXIgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlT3JkZXIoXG4gICAgICAgIHByb3ZpZGVySWQ6IHN0cmluZyxcbiAgICAgICAgcmVxdWVzdEJvZHk/OiBQYXJ0aWFsPFBheVBhbENyZWF0ZU9yZGVyUmVxdWVzdEJvZHk+LFxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuaWQ7XG5cbiAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbFJlcXVlc3RTZW5kZXIuY3JlYXRlT3JkZXIocHJvdmlkZXJJZCwge1xuICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgLi4ucmVxdWVzdEJvZHksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBvcmRlcklkO1xuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyhcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keT86IFBhcnRpYWw8UGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keT4sXG4gICAgKTogUHJvbWlzZTxQYXlQYWxDcmVhdGVPcmRlckNhcmRGaWVsZHNSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmlkO1xuXG4gICAgICAgIGNvbnN0IHsgb3JkZXJJZCwgc2V0dXBUb2tlbiB9ID0gYXdhaXQgdGhpcy5wYXlwYWxSZXF1ZXN0U2VuZGVyLmNyZWF0ZU9yZGVyKHByb3ZpZGVySWQsIHtcbiAgICAgICAgICAgIGNhcnRJZCxcbiAgICAgICAgICAgIC4uLnJlcXVlc3RCb2R5LFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4geyBvcmRlcklkLCAuLi4oc2V0dXBUb2tlbiA/IHsgc2V0dXBUb2tlbiB9IDoge30pIH07XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlT3JkZXIobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBzdGF0ZS5nZXRDb25zaWdubWVudHNPclRocm93KClbMF07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsUmVxdWVzdFNlbmRlci51cGRhdGVPcmRlcihtZXRob2RJZCwge1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uczogY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLFxuICAgICAgICAgICAgICAgIGNhcnRJZDogY2FydC5pZCxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uOiBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JkZXJTdGF0dXMobWV0aG9kSWQ6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1cz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IGF3YWl0IHRoaXMucGF5cGFsUmVxdWVzdFNlbmRlci5nZXRPcmRlclN0YXR1cyhtZXRob2RJZCwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVlc3RFcnJvcigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IHN1Ym1pdHRpbmcgYW5kIHRva2VuaXppbmcgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgdG9rZW5pemVQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FydCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgaWYgKCFvcmRlcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtUG9zdGVyLnBvc3RGb3JtKCcvY2hlY2tvdXQucGhwJywge1xuICAgICAgICAgICAgcGF5bWVudF90eXBlOiAncGF5cGFsJyxcbiAgICAgICAgICAgIGFjdGlvbjogJ3NldF9leHRlcm5hbF9jaGVja291dCcsXG4gICAgICAgICAgICBwcm92aWRlcjogbWV0aG9kSWQsXG4gICAgICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgICAgIC4uLihjYXJ0LnNvdXJjZSA9PT0gQ2FydFNvdXJjZS5CdXlOb3cgJiYgeyBjYXJ0X2lkOiBjYXJ0LmlkIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBzdWJtaXRQYXltZW50KG1ldGhvZElkOiBzdHJpbmcsIG9yZGVySWQ6IHN0cmluZywgZ2F0ZXdheUlkPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgIHZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICBkZXZpY2VfaW5mbzogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXRob2RfaWQ6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheXBhbF9hY2NvdW50OiB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgICAgICAuLi4oZ2F0ZXdheUlkID8geyBnYXRld2F5SWQgfSA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTaGlwcGluZyBvcHRpb25zIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhzZWxlY3RlZFNoaXBwaW5nT3B0aW9uSWQ/OiBzdHJpbmcpOiBTaGlwcGluZ09wdGlvbiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnNpZ25tZW50ID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzT3JUaHJvdygpWzBdO1xuXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50LmF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyB8fCBbXTtcblxuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zLmZpbmQoXG4gICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBzZWxlY3RlZFNoaXBwaW5nT3B0aW9uID0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkXG4gICAgICAgICAgICA/IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucy5maW5kKChvcHRpb24pID0+IG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRTaGlwcGluZ09wdGlvbklkKVxuICAgICAgICAgICAgOiBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZCgob3B0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAoY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uSWQgPSBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uLmlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5pZCA9PT0gc2hpcHBpbmdPcHRpb25JZDtcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvblRvU2VsZWN0ID1cbiAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdPcHRpb24gfHwgcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnNbMF07XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ09wdGlvblRvU2VsZWN0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3VyIG9yZGVyIGNhbid0IGJlIHNoaXBwZWQgdG8gdGhpcyBhZGRyZXNzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNoaXBwaW5nT3B0aW9uVG9TZWxlY3Q7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBZGRyZXNzIHRyYW5zZm9ybWluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBnZXRBZGRyZXNzKGFkZHJlc3M/OiBQYXJ0aWFsPEJpbGxpbmdBZGRyZXNzUmVxdWVzdEJvZHk+KTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6IGFkZHJlc3M/LmZpcnN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBhZGRyZXNzPy5sYXN0TmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGVtYWlsOiBhZGRyZXNzPy5lbWFpbCB8fCAnJyxcbiAgICAgICAgICAgIHBob25lOiBhZGRyZXNzPy5waG9uZSB8fCAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3M/LmFkZHJlc3MxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3M/LmFkZHJlc3MyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3M/LnBvc3RhbENvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlQ29kZSB8fCAnJyxcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkczogW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKHsgcGF5ZXIgfTogUGF5UGFsT3JkZXJEZXRhaWxzKTogQmlsbGluZ0FkZHJlc3NSZXF1ZXN0Qm9keSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgZmlyc3ROYW1lOiBwYXllci5uYW1lLmdpdmVuX25hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZTogcGF5ZXIubmFtZS5zdXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IHBheWVyLmVtYWlsX2FkZHJlc3MsXG4gICAgICAgICAgICBhZGRyZXNzMTogcGF5ZXIuYWRkcmVzcy5hZGRyZXNzX2xpbmVfMSxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBwYXllci5hZGRyZXNzLmFkZHJlc3NfbGluZV8yLFxuICAgICAgICAgICAgY2l0eTogcGF5ZXIuYWRkcmVzcy5hZG1pbl9hcmVhXzIsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogcGF5ZXIuYWRkcmVzcy5jb3VudHJ5X2NvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBwYXllci5hZGRyZXNzLnBvc3RhbF9jb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogcGF5ZXIuYWRkcmVzcy5hZG1pbl9hcmVhXzEsXG4gICAgICAgICAgICBwaG9uZTogcGF5ZXIucGhvbmU/LnBob25lX251bWJlcj8ubmF0aW9uYWxfbnVtYmVyLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICBvcmRlckRldGFpbHM6IFBheVBhbE9yZGVyRGV0YWlscyxcbiAgICApOiBCaWxsaW5nQWRkcmVzc1JlcXVlc3RCb2R5IHtcbiAgICAgICAgY29uc3QgeyBwYXllciwgcHVyY2hhc2VfdW5pdHMgfSA9IG9yZGVyRGV0YWlscztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYWRkcmVzcyxcbiAgICAgICAgICAgIG5hbWU6IHsgZnVsbF9uYW1lIH0sXG4gICAgICAgIH0gPSBwdXJjaGFzZV91bml0c1swXS5zaGlwcGluZztcblxuICAgICAgICBjb25zdCBbZmlyc3ROYW1lLCAuLi5sYXN0TmFtZV0gPSBmdWxsX25hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICAgIGxhc3ROYW1lOiBsYXN0TmFtZS5qb2luKCcgJyksXG4gICAgICAgICAgICBlbWFpbDogcGF5ZXIuZW1haWxfYWRkcmVzcyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBhZGRyZXNzLmFkZHJlc3NfbGluZV8xLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3MuYWRkcmVzc19saW5lXzIsXG4gICAgICAgICAgICBjaXR5OiBhZGRyZXNzLmFkbWluX2FyZWFfMixcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBhZGRyZXNzLmNvdW50cnlfY29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3MucG9zdGFsX2NvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzLmFkbWluX2FyZWFfMSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b25zIHN0eWxlIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIGdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGU6IFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyA9IHt9KTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHtcbiAgICAgICAgY29uc3QgeyBjb2xvciwgaGVpZ2h0LCBsYWJlbCwgc2hhcGUgfSA9IHN0eWxlO1xuXG4gICAgICAgIGNvbnN0IHZhbGlkU3R5bGVzID0ge1xuICAgICAgICAgICAgY29sb3I6IGNvbG9yICYmIFN0eWxlQnV0dG9uQ29sb3JbY29sb3JdID8gY29sb3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZ2V0VmFsaWRIZWlnaHQoaGVpZ2h0KSxcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCAmJiBTdHlsZUJ1dHRvbkxhYmVsW2xhYmVsXSA/IGxhYmVsIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2hhcGU6IHNoYXBlICYmIFN0eWxlQnV0dG9uU2hhcGVbc2hhcGVdID8gc2hhcGUgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG9taXRCeSh2YWxpZFN0eWxlcywgaXNOaWwpO1xuICAgIH1cblxuICAgIGdldFZhbGlkSGVpZ2h0KGhlaWdodD86IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MDtcbiAgICAgICAgY29uc3QgbWluSGVpZ2h0ID0gMjU7XG4gICAgICAgIGNvbnN0IG1heEhlaWdodCA9IDU1O1xuXG4gICAgICAgIGlmICghaGVpZ2h0IHx8IHR5cGVvZiBoZWlnaHQgIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChoZWlnaHQgPiBtYXhIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXhIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVpZ2h0IDwgbWluSGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluSGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqL1xuICAgIHJlbW92ZUVsZW1lbnQoZWxlbWVudElkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50SWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKTtcblxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gRm9yIG5vdyB0aGlzIGlzIGEgdGVtcG9yYXJ5IHNvbHV0aW9uLCBmdXJ0aGVyIHJlbW92ZUVsZW1lbnQgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZFxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7XG4gICAgQ29udGVudFR5cGUsXG4gICAgSU5URVJOQUxfVVNFX09OTFksXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgU0RLX1ZFUlNJT05fSEVBREVSUyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7XG4gICAgUGF5UGFsQ3JlYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXlQYWxPcmRlckRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXNEYXRhLFxuICAgIFBheVBhbFVwZGF0ZU9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZSxcbn0gZnJvbSAnLi9wYXlwYWwtdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxSZXF1ZXN0U2VuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlcXVlc3RTZW5kZXI6IFJlcXVlc3RTZW5kZXIpIHt9XG5cbiAgICBhc3luYyBjcmVhdGVPcmRlcihcbiAgICAgICAgcHJvdmlkZXJJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keTogUGFydGlhbDxQYXlQYWxDcmVhdGVPcmRlclJlcXVlc3RCb2R5PixcbiAgICApOiBQcm9taXNlPFBheVBhbE9yZGVyRGF0YT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBgL2FwaS9zdG9yZWZyb250L3BheW1lbnQvJHtwcm92aWRlcklkfWA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wb3N0PFBheVBhbE9yZGVyRGF0YT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZU9yZGVyKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXF1ZXN0Qm9keTogUGF5UGFsVXBkYXRlT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICApOiBQcm9taXNlPFBheVBhbFVwZGF0ZU9yZGVyUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke21ldGhvZElkfWA7XG4gICAgICAgIGNvbnN0IGJvZHkgPSByZXF1ZXN0Qm9keTtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAgICdYLUFQSS1JTlRFUk5BTCc6IElOVEVSTkFMX1VTRV9PTkxZLFxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IENvbnRlbnRUeXBlLkpzb24sXG4gICAgICAgICAgICAuLi5TREtfVkVSU0lPTl9IRUFERVJTLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucmVxdWVzdFNlbmRlci5wdXQ8UGF5UGFsVXBkYXRlT3JkZXJSZXNwb25zZT4odXJsLCB7IGhlYWRlcnMsIGJvZHkgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cblxuICAgIGFzeW5jIGdldE9yZGVyU3RhdHVzKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxPcmRlclN0YXR1c0RhdGE+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC9hcGkvc3RvcmVmcm9udC9pbml0aWFsaXphdGlvbi8ke21ldGhvZElkfWA7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnWC1BUEktSU5URVJOQUwnOiBJTlRFUk5BTF9VU0VfT05MWSxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiBDb250ZW50VHlwZS5Kc29uLFxuICAgICAgICAgICAgLi4uU0RLX1ZFUlNJT05fSEVBREVSUyxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnJlcXVlc3RTZW5kZXIuZ2V0PFBheVBhbE9yZGVyU3RhdHVzRGF0YT4odXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcy5ib2R5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZUZvcm1Qb3N0ZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvZm9ybS1wb3N0ZXInO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWVzdFNlbmRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9yZXF1ZXN0LXNlbmRlcic7XG5cbmltcG9ydCB7IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbFNka1NjcmlwdExvYWRlciBmcm9tICcuL2NyZWF0ZS1wYXlwYWwtc2RrLXNjcmlwdC1sb2FkZXInO1xuaW1wb3J0IFBheXBhbEludGVncmF0aW9uU2VydmljZSBmcm9tICcuL3BheXBhbC1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCBQYXlwYWxSZXF1ZXN0U2VuZGVyIGZyb20gJy4vcGF5cGFsLXJlcXVlc3Qtc2VuZGVyJztcblxuY29uc3QgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgUGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlKFxuICAgICAgICBjcmVhdGVGb3JtUG9zdGVyKCksXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBQYXlwYWxSZXF1ZXN0U2VuZGVyKGNyZWF0ZVJlcXVlc3RTZW5kZXIoeyBob3N0OiBnZXRIb3N0KCkgfSkpLFxuICAgICAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlO1xuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciBpZiBhIHJlcXVlc3QgZmFpbHMgdG8gY29tcGxldGUgd2l0aGluIGl0cyByZXF1aXJlZCB0aW1lZnJhbWVcbiAqIGJlY2F1c2Ugb2YgYSBuZXR3b3JrIGlzc3VlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lb3V0RXJyb3I8VCA9IGFueT4gZXh0ZW5kcyBSZXF1ZXN0RXJyb3I8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlPzogUmVzcG9uc2U8VD4pIHtcbiAgICAgICAgc3VwZXIocmVzcG9uc2UsIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgcmVxdWVzdCBoYXMgdGltZWQgb3V0IG9yIGFib3J0ZWQuJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ1RpbWVvdXRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICd0aW1lb3V0JztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFRpbWVvdXRFcnJvcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIFBheVBhbEFwbVNkayxcbiAgICBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheVBhbFNka1NjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuaW1wb3J0IHsgaXNFeHBlcmltZW50RW5hYmxlZCB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdXRpbGl0eSc7XG5cbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBOb25JbnN0YW50QWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxPcmRlclN0YXR1cyxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5jb25zdCBQT0xMSU5HX0lOVEVSVkFMID0gMzAwMDtcbmNvbnN0IE1BWF9QT0xMSU5HX1RJTUUgPSAzMDAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcGF5cGFsQnV0dG9uPzogUGF5UGFsQ29tbWVyY2VCdXR0b25zO1xuICAgIHByaXZhdGUgcGF5cGFsQXBtcz86IFBheVBhbEFwbVNkaztcbiAgICBwcml2YXRlIHBvbGxpbmdUaW1lciA9IDA7XG4gICAgcHJpdmF0ZSBzdG9wUG9sbGluZyA9IG5vb3A7XG4gICAgcHJpdmF0ZSBpc1BvbGxpbmdFbmFibGVkID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcz86IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsU2RrU2NyaXB0TG9hZGVyOiBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlLCAvLyBGSVhNRTogdGhpcyBvcHRpb24gaXMgZGVwcmVjYXRlZFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsXG4gICAgICAgIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxPcHRpb25zID0gcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyA9IHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZ2F0ZXdheUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7IG9yZGVySWQsIHNob3VsZFJlbmRlckZpZWxkcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcblxuICAgICAgICB0aGlzLmlzUG9sbGluZ0VuYWJsZWQgPSBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgICAgICAgICAgZmVhdHVyZXMsXG4gICAgICAgICAgICAnUEFZUEFMLTUxOTIucGF5cGFsX2NvbW1lcmNlX2lkZWFsX3BvbGxpbmcnLFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIEluZm86XG4gICAgICAgIC8vIFRoZSBQYXlQYWwgYnV0dG9uIGFuZCBmaWVsZHMgc2hvdWxkIG5vdCBiZSByZW5kZXJlZCB3aGVuIHNob3BwZXIgd2FzIHJlZGlyZWN0ZWQgdG8gQ2hlY2tvdXQgcGFnZVxuICAgICAgICAvLyBhZnRlciB1c2luZyBzbWFydCBwYXltZW50IGJ1dHRvbiBvbiBQRFAgb3IgQ2FydCBwYWdlLiBJbiB0aGlzIGNhc2UgYmFja2VuZCByZXR1cm5zIG9yZGVyIGlkIGlmXG4gICAgICAgIC8vIGl0IGlzIGF2YWlsYWJsZSBpbiBjaGVja291dCBzZXNzaW9uLiBUaGVyZWZvcmUsIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8gcmVuZGVyIFBheVBhbCBidXR0b24uXG4gICAgICAgIGlmIChvcmRlcklkKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklkO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBheXBhbEFwbXMgPSBhd2FpdCB0aGlzLnBheXBhbFNka1NjcmlwdExvYWRlci5nZXRQYXlQYWxBcG1zU2RrKFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIgPSBwYXlwYWxPcHRpb25zLmNvbnRhaW5lci5zcGxpdCgnIycpWzFdO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKG1ldGhvZElkLCBnYXRld2F5SWQsIHBheXBhbE9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChzaG91bGRSZW5kZXJGaWVsZHMpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRmllbGRzKG1ldGhvZElkLCBwYXlwYWxPcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IHBheW1lbnQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLm9yZGVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kSW52YWxpZEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkICYmIG1ldGhvZElkID09PSAnaWRlYWwnKSB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdm9pZCB0aGlzLmluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKG1ldGhvZElkLCByZXNvbHZlLCByZWplY3QsIGdhdGV3YXlJZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pc05vbkluc3RhbnRQYXltZW50TWV0aG9kKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgdGhpcy5vcmRlcklkLFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMub3JkZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAodGhpcy5pc1BvbGxpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0UG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKHZhbHVlPzogdW5rbm93bikgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKHZhbHVlPzogdW5rbm93bikgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICBnYXRld2F5SWQgPz8gJ3BheXBhbGNvbW1lcmNlJyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzT3JkZXJBcHByb3ZlZCA9IG9yZGVyU3RhdHVzID09PSBQYXlQYWxPcmRlclN0YXR1cy5BcHByb3ZlZDtcbiAgICAgICAgICAgIGNvbnN0IGlzUG9sbGluZ0Vycm9yID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdFcnJvcjtcblxuICAgICAgICAgICAgaWYgKGlzT3JkZXJBcHByb3ZlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc1BvbGxpbmdFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RQcm9taXNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaXNPcmRlckFwcHJvdmVkICYmIHRoaXMucG9sbGluZ1RpbWVyIDwgdGhpcy5tYXhQb2xsaW5nSW50ZXJ2YWxUaW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0UHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVpbml0aWFsaXplU3RyYXRlZ3koe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kczogdGhpcy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKG5ldyBUaW1lb3V0RXJyb3IoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlaW5pdGlhbGl6ZVN0cmF0ZWd5KFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICkge1xuICAgICAgICBhd2FpdCB0aGlzLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwge307XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQb2xsaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBCdXR0b24gbWV0aG9kcy9jYWxsYmFja3NcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxPcHRpb25zOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBwYXlwYWxBbXBzU2RrID0gdGhpcy5nZXRQYXlwYWxBbXBzU2RrT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBidXR0b25TdHlsZSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG5cbiAgICAgICAgY29uc3QgeyBjb250YWluZXIsIG9uRXJyb3IsIG9uUmVuZGVyQnV0dG9uLCBzdWJtaXRGb3JtIH0gPSBwYXlwYWxPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbk9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBtZXRob2RJZCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoYnV0dG9uU3R5bGUpLFxuICAgICAgICAgICAgb25Jbml0OiAoXywgYWN0aW9ucykgPT4gcGF5cGFsT3B0aW9ucy5vbkluaXRCdXR0b24oYWN0aW9ucyksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5vbkNyZWF0ZU9yZGVyKG1ldGhvZElkLCBnYXRld2F5SWQsIHBheXBhbE9wdGlvbnMpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoZGF0YSkgPT4gdGhpcy5oYW5kbGVBcHByb3ZlKGRhdGEsIHN1Ym1pdEZvcm0pLFxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmFpbHVyZShlcnJvciwgb25FcnJvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbGljazogYXN5bmMgKF8sIGFjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgcGF5cGFsT3B0aW9ucy5vblZhbGlkYXRlKGFjdGlvbnMucmVzb2x2ZSwgYWN0aW9ucy5yZWplY3QpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQnV0dG9uID0gcGF5cGFsQW1wc1Nkay5CdXR0b25zKGJ1dHRvbk9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25SZW5kZXJCdXR0b24gJiYgdHlwZW9mIG9uUmVuZGVyQnV0dG9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvblJlbmRlckJ1dHRvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxCdXR0b24ucmVuZGVyKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkNyZWF0ZU9yZGVyKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsT3B0aW9uczogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB7IG9uVmFsaWRhdGUgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3Qgb25WYWxpZGF0aW9uUGFzc2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRydWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYXdhaXQgb25WYWxpZGF0ZShvblZhbGlkYXRpb25QYXNzZWQsIG5vb3ApO1xuXG4gICAgICAgIGNvbnN0IG9yZGVySWQgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKFxuICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXQnLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICh0aGlzLmlzTm9uSW5zdGFudFBheW1lbnRNZXRob2QobWV0aG9kSWQpKSB7XG4gICAgICAgICAgICBjb25zdCBvcmRlciA9IHsgdXNlU3RvcmVDcmVkaXQ6IGZhbHNlIH07XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBvcmRlcklkLCBnYXRld2F5SWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9yZGVySWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVBcHByb3ZlKFxuICAgICAgICB7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgc3VibWl0Rm9ybTogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snc3VibWl0Rm9ybSddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZGVySWQgPSBvcmRlcklEO1xuXG4gICAgICAgIHN1Ym1pdEZvcm0oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUZhaWx1cmUoXG4gICAgICAgIGVycm9yOiBFcnJvcixcbiAgICAgICAgb25FcnJvcjogUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50T3B0aW9uc1snb25FcnJvciddLFxuICAgICk6IHZvaWQge1xuICAgICAgICB0aGlzLnRvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuXG4gICAgICAgIGlmIChvbkVycm9yICYmIHR5cGVvZiBvbkVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmllbGRzIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSByZW5kZXJGaWVsZHMoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbE9wdGlvbnM6IFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzUGF5bWVudE9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHBheXBhbEFtcHNTZGsgPSB0aGlzLmdldFBheXBhbEFtcHNTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwgfSA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHsgYXBtRmllbGRzQ29udGFpbmVyLCBhcG1GaWVsZHNTdHlsZXMgfSA9IHBheXBhbE9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFhcG1GaWVsZHNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kc1wiIGFyZ3VtZW50IHNob3VsZCBjb250YWluIFwiYXBtRmllbGRzQ29udGFpbmVyXCIuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWVsZENvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFwbUZpZWxkc0NvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKGZpZWxkQ29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgZmllbGRDb250YWluZXJFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmllbGRzT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IG1ldGhvZElkLFxuICAgICAgICAgICAgc3R5bGU6IGFwbUZpZWxkc1N0eWxlcyB8fCB7fSxcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVtYWlsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFBheW1lbnRGaWVsZHMgPSBwYXlwYWxBbXBzU2RrLlBheW1lbnRGaWVsZHMoZmllbGRzT3B0aW9ucyk7XG5cbiAgICAgICAgcGF5cGFsUGF5bWVudEZpZWxkcy5yZW5kZXIoYXBtRmllbGRzQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxzXG4gICAgICpcbiAgICAgKiAqL1xuICAgIHByaXZhdGUgaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZC50b1VwcGVyQ2FzZSgpIGluIE5vbkluc3RhbnRBbHRlcm5hdGl2ZVBheW1lbnRNZXRob2RzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5cGFsQW1wc1Nka09yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxBcG1zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbEFwbXM7XG4gICAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBGZWF0dXJlcyB7XG4gICAgW2ZlYXR1cmVOYW1lOiBzdHJpbmddOiBib29sZWFuIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRFbmFibGVkKFxuICAgIGZlYXR1cmVzOiBGZWF0dXJlcyxcbiAgICBleHBlcmltZW50TmFtZTogc3RyaW5nLFxuICAgIGZhbGxiYWNrVmFsdWUgPSB0cnVlLFxuKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZlYXR1cmVzW2V4cGVyaW1lbnROYW1lXSA/PyBmYWxsYmFja1ZhbHVlO1xufVxuIiwiaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZSxcbiAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWNvbnN0YW50cyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIoKSxcbiAgICAgICAgbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzOiBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMsXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50LCBOb25jZUluc3RydW1lbnQgfSBmcm9tICcuL3BheW1lbnQnO1xuXG50eXBlIFBheW1lbnRJbnN0cnVtZW50ID0gQ2FyZEluc3RydW1lbnQgfCBBY2NvdW50SW5zdHJ1bWVudCB8IEhvc3RlZEluc3RydW1lbnQgfCBOb25jZUluc3RydW1lbnQ7XG5cbmV4cG9ydCBkZWZhdWx0IFBheW1lbnRJbnN0cnVtZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VJbnN0cnVtZW50IHtcbiAgICBiaWdwYXlUb2tlbjogc3RyaW5nO1xuICAgIGRlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuO1xuICAgIHByb3ZpZGVyOiBzdHJpbmc7XG4gICAgdHJ1c3RlZFNoaXBwaW5nQWRkcmVzczogYm9vbGVhbjtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIFVudHJ1c3RlZFNoaXBwaW5nQ2FyZFZlcmlmaWNhdGlvblR5cGUge1xuICAgIENWViA9ICdjdnYnLFxuICAgIFBBTiA9ICdwYW4nLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRJbnN0cnVtZW50IGV4dGVuZHMgQmFzZUluc3RydW1lbnQge1xuICAgIGJyYW5kOiBzdHJpbmc7XG4gICAgZXhwaXJ5TW9udGg6IHN0cmluZztcbiAgICBleHBpcnlZZWFyOiBzdHJpbmc7XG4gICAgaWluOiBzdHJpbmc7XG4gICAgbGFzdDQ6IHN0cmluZztcbiAgICB0eXBlOiAnY2FyZCc7XG4gICAgdW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uTW9kZTogVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZTtcbn1cblxuaW50ZXJmYWNlIEJhc2VBY2NvdW50SW5zdHJ1bWVudCBleHRlbmRzIEJhc2VJbnN0cnVtZW50IHtcbiAgICBtZXRob2Q6IHN0cmluZztcbiAgICB0eXBlOiAnYWNjb3VudCcgfCAnYmFuayc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5UGFsSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgZXh0ZXJuYWxJZDogc3RyaW5nO1xuICAgIG1ldGhvZDogJ3BheXBhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNoSW5zdHJ1bWVudCBleHRlbmRzIEJhc2VBY2NvdW50SW5zdHJ1bWVudCB7XG4gICAgaXNzdWVyOiBzdHJpbmc7XG4gICAgYWNjb3VudE51bWJlcjogc3RyaW5nO1xuICAgIHR5cGU6ICdiYW5rJztcbiAgICBtZXRob2Q6ICdhY2gnIHwgJ2VjcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFua0luc3RydW1lbnQgZXh0ZW5kcyBCYXNlQWNjb3VudEluc3RydW1lbnQge1xuICAgIGFjY291bnROdW1iZXI6IHN0cmluZztcbiAgICBpc3N1ZXI6IHN0cmluZztcbiAgICBpYmFuOiBzdHJpbmc7XG4gICAgbWV0aG9kOiBzdHJpbmc7XG4gICAgdHlwZTogJ2JhbmsnO1xufVxuXG5leHBvcnQgdHlwZSBBY2NvdW50SW5zdHJ1bWVudCA9IFBheVBhbEluc3RydW1lbnQgfCBCYW5rSW5zdHJ1bWVudCB8IEFjaEluc3RydW1lbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmF1bHRBY2Nlc3NUb2tlbiB7XG4gICAgdmF1bHRBY2Nlc3NUb2tlbjogc3RyaW5nO1xuICAgIHZhdWx0QWNjZXNzRXhwaXJ5OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Vzc2lvbkNvbnRleHQge1xuICAgIGN1c3RvbWVySWQ6IG51bWJlcjtcbiAgICBzdG9yZUlkOiBzdHJpbmc7XG4gICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluc3RydW1lbnRSZXF1ZXN0Q29udGV4dCBleHRlbmRzIFNlc3Npb25Db250ZXh0IHtcbiAgICBhdXRoVG9rZW46IHN0cmluZztcbn1cbiIsImludGVyZmFjZSBDb29raWVPcHRpb25zIHtcbiAgICBleHBpcmVzPzogRGF0ZTtcbiAgICBwYXRoPzogc3RyaW5nO1xuICAgIGRvbWFpbj86IHN0cmluZztcbiAgICBzZWN1cmU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb29raWVTdG9yYWdlIHtcbiAgICBzdGF0aWMgZ2V0KG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBjb29raWVLZXkgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoYCR7bmFtZX1gKX09YDtcbiAgICAgICAgY29uc3QgY29va2llID0gZG9jdW1lbnQuY29va2llO1xuXG4gICAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG5cbiAgICAgICAgY29uc3QgZmlyc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKGNvb2tpZUtleSk7XG5cbiAgICAgICAgaWYgKGZpcnN0SW5kZXggPiAtMSkge1xuICAgICAgICAgICAgbGV0IGxhc3RJbmRleCA9IGNvb2tpZS5pbmRleE9mKCc7JywgZmlyc3RJbmRleCk7XG5cbiAgICAgICAgICAgIGlmIChsYXN0SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gY29va2llLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhmaXJzdEluZGV4ICsgY29va2llS2V5Lmxlbmd0aCwgbGFzdEluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgc3RhdGljIHNldChuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMgPSB7IHNlY3VyZTogdHJ1ZSB9KSB7XG4gICAgICAgIGxldCBjb29raWVUZXh0ID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcblxuICAgICAgICBjb25zdCB7IGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChleHBpcmVzKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtleHBpcmVzLnRvVVRDU3RyaW5nKCl9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAvLyBpbmZvOiBkZWZhdWx0IGNvb2tpZSBleHBpcmF0aW9uIHRpbWUgYWZ0ZXIgc2V0dXBcbiAgICAgICAgICAgIGNvbnN0IG1pbnV0ZXMgPSA2MDtcblxuICAgICAgICAgICAgbm93LnNldFRpbWUobm93LmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuXG4gICAgICAgICAgICBjb29raWVUZXh0ICs9IGA7IGV4cGlyZXM9JHtub3cudG9VVENTdHJpbmcoKX1gO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgcGF0aD0ke3BhdGh9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGNvb2tpZVRleHQgKz0gYDsgZG9tYWluPSR7ZG9tYWlufWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlKSB7XG4gICAgICAgICAgICBjb29raWVUZXh0ICs9ICc7IHNlY3VyZSc7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWVUZXh0O1xuICAgIH1cblxuICAgIHN0YXRpYyByZW1vdmUobmFtZTogc3RyaW5nLCBvcHRpb25zPzogQ29va2llT3B0aW9ucykge1xuICAgICAgICBDb29raWVTdG9yYWdlLnNldChuYW1lLCAnJywgeyBleHBpcmVzOiBuZXcgRGF0ZSgwKSwgLi4ub3B0aW9ucyB9KTtcbiAgICB9XG59XG4iLCIvLyBjb3BpZWQgZnJvbSBwYWNrYWdlcy9jb3JlL3NyYy9ob3N0ZWQtZm9ybS9ob3N0ZWQtZmllbGQtdHlwZS50c1xuXG5lbnVtIEhvc3RlZEZpZWxkVHlwZSB7XG4gICAgQ2FyZENvZGUgPSAnY2FyZENvZGUnLFxuICAgIENhcmRDb2RlVmVyaWZpY2F0aW9uID0gJ2NhcmRDb2RlVmVyaWZpY2F0aW9uJyxcbiAgICBDYXJkRXhwaXJ5ID0gJ2NhcmRFeHBpcnknLFxuICAgIENhcmROYW1lID0gJ2NhcmROYW1lJyxcbiAgICBDYXJkTnVtYmVyID0gJ2NhcmROdW1iZXInLFxuICAgIENhcmROdW1iZXJWZXJpZmljYXRpb24gPSAnY2FyZE51bWJlclZlcmlmaWNhdGlvbicsXG4gICAgQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiA9ICdjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uJyxcbn1cblxuZXhwb3J0IGRlZmF1bHQgSG9zdGVkRmllbGRUeXBlO1xuIiwiaW1wb3J0IHsgaXNFcXVhbCwgb21pdCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQWRkcmVzcyxcbiAgICBDYXJkSW5zdHJ1bWVudCxcbiAgICBDdXN0b21lckFkZHJlc3MsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBDb29raWVTdG9yYWdlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdG9yYWdlJztcblxuaW1wb3J0IHtcbiAgICBQYXlQYWxGYXN0bGFuZSxcbiAgICBQYXlQYWxGYXN0bGFuZUFkZHJlc3MsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgUGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVQcm9maWxlQ2FyZCxcbiAgICBQYXlQYWxGYXN0bGFuZVByb2ZpbGVOYW1lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVBob25lLFxuICAgIFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0LFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgIFBheVBhbEhvc3RXaW5kb3csXG59IGZyb20gJy4vcGF5cGFsLXR5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5cGFsRmFzdGxhbmVVdGlscyB7XG4gICAgcHJpdmF0ZSB3aW5kb3c6IFBheVBhbEhvc3RXaW5kb3c7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lKFxuICAgICAgICBwYXlwYWxGYXN0bGFuZVNkazogUGF5UGFsRmFzdGxhbmVTZGssXG4gICAgICAgIGlzVGVzdE1vZGVFbmFibGVkOiBib29sZWFuLFxuICAgICAgICBzdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbiAgICApOiBQcm9taXNlPFBheVBhbEZhc3RsYW5lPiB7XG4gICAgICAgIGlmIChpc1Rlc3RNb2RlRW5hYmxlZCkge1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYXN0bGFuZUVudicsICdzYW5kYm94Jyk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2F4b0VudicsICdzYW5kYm94Jyk7IC8vIFRPRE86IHJlbW92ZSBpZiB0aGlzIGtleSBkb2VzIG5vdCB1c2Ugb24gUGF5UGFsIHNpZGVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRTdHlsZXMgPSB7XG4gICAgICAgICAgICAgICAgcm9vdDoge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5OiAndHJhbnNwYXJlbnQnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSA9IGF3YWl0IHBheXBhbEZhc3RsYW5lU2RrLkZhc3RsYW5lKHtcbiAgICAgICAgICAgICAgICBzdHlsZXM6IHN0eWxlcyB8fCBkZWZhdWx0U3R5bGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU7XG4gICAgfVxuXG4gICAgZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93KCk6IFBheVBhbEZhc3RsYW5lIHtcbiAgICAgICAgaWYgKCF0aGlzLndpbmRvdy5wYXlwYWxGYXN0bGFuZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3cucGF5cGFsRmFzdGxhbmU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBEZXRlY3RzIHRoZSBjdXN0b21lciB0byBQYXlQYWwgRmFzdGxhbmUgcmVsYXRpb24gYW5kXG4gICAgICogcmV0dXJucyBjdXN0b21lckNvbnRleHRJZCB0byB1c2UgaXQgZm9yIGF1dGhlbnRpY2F0aW9uXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBsb29rdXBDdXN0b21lck9yVGhyb3coZW1haWw6IHN0cmluZyk6IFByb21pc2U8UGF5UGFsRmFzdGxhbmVMb29rdXBDdXN0b21lckJ5RW1haWxSZXN1bHQ+IHtcbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmUgPSB0aGlzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIHJldHVybiBwYXlwYWxGYXN0bGFuZS5pZGVudGl0eS5sb29rdXBDdXN0b21lckJ5RW1haWwoZW1haWwpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVHJpZ2dlcnMgYXV0aGVudGljYXRpb24gZmxvdyAoc2hvd3MgT1RQIHBvcHVwKSBpZiB0aGUgY3VzdG9tZXIgcmVjb2duaXNlZCBhcyBQYXlQYWwgRmFzdGxhbmUgdXNlclxuICAgICAqIGFuZCByZXR1cm5zIFBheVBhbCBGYXN0bGFuZSBQcm9maWxlIGRhdGEgdG8gdXNlIGl0IGluIEJDIGNoZWNrb3V0XG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyB0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhcbiAgICAgICAgY3VzdG9tZXJDb250ZXh0SWQ/OiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0PiB7XG4gICAgICAgIGlmICghY3VzdG9tZXJDb250ZXh0SWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICByZXR1cm4gcGF5cGFsRmFzdGxhbmUuaWRlbnRpdHkudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyhjdXN0b21lckNvbnRleHRJZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiAndXBkYXRlU3RvcmFnZVNlc3Npb25JZCcgbWV0aG9kIGlzIHVzZWQgdG86XG4gICAgICogLSBzZXQgc2Vzc2lvbiBpZCBhZnRlciB1c2VyIHdhcyBhdXRoZW50aWNhdGVkIChvciB1bnJlY29nbmlzZWQpIHRvIHRyaWdnZXIgYXV0aGVudGljYXRpb24gYWZ0ZXIgcGFnZSByZWZyZXNoXG4gICAgICpcbiAgICAgKiBGbG93IGluZm86XG4gICAgICogSWYgdXNlciB1bnJlY29nbmlzZWQgdGhlbiB0aGUgbG9va3VwIG1ldGhvZCB3aWxsIGJlIHdvcmtpbmcgYnV0IHRoZSBPVFAgd2lsbCBub3QgYmUgc2hvd25cbiAgICAgKiBJZiB1c2VyIHJlY29nbmlzZWQgYW5kIG5vdCBjYW5jZWxlZCB0aGVuIHRoZSBsb29rdXAgbWV0aG9kIHdpbGwgYmUgd29ya2luZyBhbmQgdGhlIE9UUCB3aWxsIGJlIHNob3duIG9ubHkgaWYgbmVlZGVkXG4gICAgICogSWYgdXNlciBjYW5jZWxzIHRoZSBPUFQgdGhlbiBPVFAgd2lsbCBub3QgYmUgdHJpZ2dlcmVkIGFmdGVyIHBhZ2UgcmVmcmVzaFxuICAgICAqXG4gICAgICovXG4gICAgdXBkYXRlU3RvcmFnZVNlc3Npb25JZChzZXNzaW9uSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoKTtcblxuICAgICAgICBleHBpcmVzLnNldERhdGUoZXhwaXJlcy5nZXREYXRlKCkgKyAxNCk7IC8vIDIgd2Vla3MgZXhwaXJ5XG5cbiAgICAgICAgY29uc3QgY29va2llc09wdGlvbiA9IHtcbiAgICAgICAgICAgIGV4cGlyZXMsXG4gICAgICAgICAgICBzZWN1cmU6IHRydWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXQoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcsIHNlc3Npb25JZCwgY29va2llc09wdGlvbik7XG4gICAgfVxuXG4gICAgcmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpOiB2b2lkIHtcbiAgICAgICAgQ29va2llU3RvcmFnZS5yZW1vdmUoJ2JjLWZhc3RsYW5lLXNlc3Npb25JZCcpO1xuICAgIH1cblxuICAgIGdldFN0b3JhZ2VTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIENvb2tpZVN0b3JhZ2UuZ2V0KCdiYy1mYXN0bGFuZS1zZXNzaW9uSWQnKSB8fCAnJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqICdtYXBQYXlQYWxGYXN0bGFuZVByb2ZpbGVUb0JjQ3VzdG9tZXJEYXRhJyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yOlxuICAgICAqIC0gbWFwcGluZyBQYXlQYWwgRmFzdGxhbmUgUHJvZmlsZSBkYXRhIHRvIEJDIGRhdGEgc2hhcGVcbiAgICAgKiAtIHJldHVybmluZyBtYXBwZWQgZGF0YSB0byB1c2UgZm9yIHVwZGF0aW5nIFBheW1lbnRQcm92aWRlckN1c3RvbWVyIHN0YXRlIGFuZFxuICAgICAqIHVwZGF0ZSBzaGlwcGluZyBhbmQgYmlsbGluZyBhZGRyZXNzZXNcbiAgICAgKlxuICAgICAqL1xuICAgIG1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0OiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICk6IFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGFNYXBwaW5nUmVzdWx0IHtcbiAgICAgICAgY29uc3QgeyBhdXRoZW50aWNhdGlvblN0YXRlLCBwcm9maWxlRGF0YSB9ID0gYXV0aGVudGljYXRpb25SZXN1bHQ7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsQmlsbGluZ0FkZHJlc3MgPSBwcm9maWxlRGF0YT8uY2FyZD8ucGF5bWVudFNvdXJjZT8uY2FyZD8uYmlsbGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFNoaXBwaW5nQWRkcmVzcyA9IHByb2ZpbGVEYXRhPy5zaGlwcGluZ0FkZHJlc3M7XG4gICAgICAgIGNvbnN0IHBheXBhbFByb2ZpbGVOYW1lID0gcHJvZmlsZURhdGE/Lm5hbWU7XG4gICAgICAgIGNvbnN0IHBheXBhbEluc3RydW1lbnQgPSBwcm9maWxlRGF0YT8uY2FyZDtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBwYXlwYWxTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgIHBheXBhbFNoaXBwaW5nQWRkcmVzcy5hZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgcGF5cGFsU2hpcHBpbmdBZGRyZXNzLm5hbWUsXG4gICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3MucGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyAmJiBwYXlwYWxQcm9maWxlTmFtZVxuICAgICAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjQWRkcmVzcyhcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxCaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxQcm9maWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBwYXlwYWxTaGlwcGluZ0FkZHJlc3M/LnBob25lTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50cyA9IHBheXBhbEluc3RydW1lbnRcbiAgICAgICAgICAgID8gdGhpcy5tYXBQYXlQYWxUb0JjSW5zdHJ1bWVudChtZXRob2RJZCwgcGF5cGFsSW5zdHJ1bWVudClcbiAgICAgICAgICAgIDogW107XG5cbiAgICAgICAgY29uc3QgYWRkcmVzc2VzID0gdGhpcy5maWx0ZXJBZGRyZXNzZXMoW3NoaXBwaW5nQWRkcmVzcywgYmlsbGluZ0FkZHJlc3NdKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZTpcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlIHx8IFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5VTlJFQ09HTklaRUQsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIG1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBpbnN0cnVtZW50OiBQYXlQYWxGYXN0bGFuZVByb2ZpbGVDYXJkLFxuICAgICk6IENhcmRJbnN0cnVtZW50W10ge1xuICAgICAgICBjb25zdCB7IGlkLCBwYXltZW50U291cmNlIH0gPSBpbnN0cnVtZW50O1xuICAgICAgICBjb25zdCB7IGJyYW5kLCBleHBpcnksIGxhc3REaWdpdHMgfSA9IHBheW1lbnRTb3VyY2UuY2FyZDtcblxuICAgICAgICBjb25zdCBbZXhwaXJ5WWVhciwgZXhwaXJ5TW9udGhdID0gZXhwaXJ5LnNwbGl0KCctJyk7XG5cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBiaWdwYXlUb2tlbjogaWQsXG4gICAgICAgICAgICAgICAgYnJhbmQsXG4gICAgICAgICAgICAgICAgZGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGV4cGlyeU1vbnRoLFxuICAgICAgICAgICAgICAgIGV4cGlyeVllYXIsXG4gICAgICAgICAgICAgICAgaWluOiAnJyxcbiAgICAgICAgICAgICAgICBsYXN0NDogbGFzdERpZ2l0cyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6IG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0cnVzdGVkU2hpcHBpbmdBZGRyZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlOiBVbnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25UeXBlLlBBTixcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2FyZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIG1hcEJjVG9QYXlQYWxBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogUGF5UGFsRmFzdGxhbmVBZGRyZXNzIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBhbnk6IGFkZHJlc3M/LmNvbXBhbnkgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzTGluZTE6IGFkZHJlc3M/LmFkZHJlc3MxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzc0xpbmUyOiBhZGRyZXNzPy5hZGRyZXNzMiB8fCAnJyxcbiAgICAgICAgICAgIGFkbWluQXJlYTE6IGFkZHJlc3M/LnN0YXRlT3JQcm92aW5jZUNvZGUgfHwgYWRkcmVzcz8uc3RhdGVPclByb3ZpbmNlIHx8ICcnLFxuICAgICAgICAgICAgYWRtaW5BcmVhMjogYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGFkZHJlc3M/LnBvc3RhbENvZGUgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYWRkcmVzcz8uY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwUGF5UGFsVG9CY0FkZHJlc3MoXG4gICAgICAgIGFkZHJlc3M6IFBheVBhbEZhc3RsYW5lQWRkcmVzcyxcbiAgICAgICAgcHJvZmlsZU5hbWU6IFBheVBhbEZhc3RsYW5lUHJvZmlsZU5hbWUsXG4gICAgICAgIHBob25lPzogUGF5UGFsRmFzdGxhbmVQcm9maWxlUGhvbmUsXG4gICAgICAgIGN1c3RvbUZpZWxkcz86IEN1c3RvbWVyQWRkcmVzc1snY3VzdG9tRmllbGRzJ10sXG4gICAgKTogQ3VzdG9tZXJBZGRyZXNzIHtcbiAgICAgICAgY29uc3QgW2ZpcnN0TmFtZSwgbGFzdE5hbWVdID0gcHJvZmlsZU5hbWUuZnVsbE5hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICBjb25zdCBwaG9uZURhdGEgPSB7XG4gICAgICAgICAgICBuYXRpb25hbE51bWJlcjogcGhvbmU/Lm5hdGlvbmFsTnVtYmVyIHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHBob25lPy5jb3VudHJ5Q29kZSB8fCAnJyxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IERhdGUubm93KCksXG4gICAgICAgICAgICB0eXBlOiAncGF5cGFsLWFkZHJlc3MnLFxuICAgICAgICAgICAgZmlyc3ROYW1lOiBwcm9maWxlTmFtZS5maXJzdE5hbWUgfHwgZmlyc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6IHByb2ZpbGVOYW1lLmxhc3ROYW1lIHx8IGxhc3ROYW1lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogYWRkcmVzcy5jb21wYW55IHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6IGFkZHJlc3MuYWRkcmVzc0xpbmUxLFxuICAgICAgICAgICAgYWRkcmVzczI6IGFkZHJlc3MuYWRkcmVzc0xpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogYWRkcmVzcy5hZG1pbkFyZWEyLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBhZGRyZXNzLmFkbWluQXJlYTEsXG4gICAgICAgICAgICBjb3VudHJ5OiBhZGRyZXNzLmNvdW50cnlDb2RlIHx8ICcnLCAvLyBUT0RPOiB1cGRhdGUgY291bnRyeSB3aXRoIHZhbGlkIG5hbWluZ1xuICAgICAgICAgICAgY291bnRyeUNvZGU6IGFkZHJlc3MuY291bnRyeUNvZGUgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBhZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBwaG9uZTogcGhvbmVEYXRhLmNvdW50cnlDb2RlICsgcGhvbmVEYXRhLm5hdGlvbmFsTnVtYmVyLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBjdXN0b21GaWVsZHMgfHwgW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3IgZmlsdGVyaW5nIFBheVBhbCBGYXN0bGFuZSBhZGRyZXNzZXMgaWYgdGhleSBhcmUgdGhlIHNhbWVcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiBhZGRyZXNzZXMgdG8gdXNlIHRoZW0gZm9yIHNoaXBwaW5nIGFuZC9vciBiaWxsaW5nIGFkZHJlc3Mgc2VsZWN0aW9uc1xuICAgICAqIHNvIHRoZSBjdXN0b21lciB3aWxsIGJlIGFibGUgdG8gdXNlIGFkZHJlc3NlcyBmcm9tIFBheVBhbCBGYXN0bGFuZSBpbiBjaGVja291dCBmbG93XG4gICAgICpcbiAgICAgKi9cbiAgICBmaWx0ZXJBZGRyZXNzZXMoYWRkcmVzc2VzOiBBcnJheTxDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQ+KTogQ3VzdG9tZXJBZGRyZXNzW10ge1xuICAgICAgICByZXR1cm4gYWRkcmVzc2VzLnJlZHVjZShcbiAgICAgICAgICAgIChjdXN0b21lckFkZHJlc3NlczogQ3VzdG9tZXJBZGRyZXNzW10sIGN1cnJlbnRBZGRyZXNzOiBDdXN0b21lckFkZHJlc3MgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRBZGRyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lckFkZHJlc3NlcztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBzYW1lQWRkcmVzc0luVGhlQXJyYXkgPSBjdXN0b21lckFkZHJlc3Nlcy5zb21lKChjdXN0b21lckFkZHJlc3MpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFcXVhbEFkZHJlc3NlcyhjdXN0b21lckFkZHJlc3MsIGN1cnJlbnRBZGRyZXNzKSxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNhbWVBZGRyZXNzSW5UaGVBcnJheVxuICAgICAgICAgICAgICAgICAgICA/IGN1c3RvbWVyQWRkcmVzc2VzXG4gICAgICAgICAgICAgICAgICAgIDogWy4uLmN1c3RvbWVyQWRkcmVzc2VzLCBjdXJyZW50QWRkcmVzc107XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgW10sXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0VxdWFsQWRkcmVzc2VzKFxuICAgICAgICBmaXJzdEFkZHJlc3M6IEN1c3RvbWVyQWRkcmVzcyxcbiAgICAgICAgc2Vjb25kQWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzLFxuICAgICk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNFcXVhbCh0aGlzLm5vcm1hbGl6ZUFkZHJlc3MoZmlyc3RBZGRyZXNzKSwgdGhpcy5ub3JtYWxpemVBZGRyZXNzKHNlY29uZEFkZHJlc3MpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6ZUFkZHJlc3MoYWRkcmVzczogQ3VzdG9tZXJBZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiBvbWl0KGFkZHJlc3MsIFsnaWQnLCAncGhvbmUnXSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFBheXBhbEZhc3RsYW5lVXRpbHMgZnJvbSAnLi9wYXlwYWwtZmFzdGxhbmUtdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVQYXlwYWxGYXN0bGFuZVV0aWxzKCk6IFBheXBhbEZhc3RsYW5lVXRpbHMge1xuICAgIHJldHVybiBuZXcgUGF5cGFsRmFzdGxhbmVVdGlscygpO1xufVxuIiwiaW1wb3J0IEhvc3RlZEZpZWxkVHlwZSBmcm9tICcuL2hvc3RlZC1maWVsZC10eXBlJztcbmltcG9ydCB7IEhvc3RlZENhcmRGaWVsZE9wdGlvbnNNYXAsIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAgfSBmcm9tICcuL2hvc3RlZC1mb3JtLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0NyZWRpdENhcmRGb3JtRmllbGRzKFxuICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4pOiBmaWVsZHMgaXMgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXIgaW4gZmllbGRzICYmXG4gICAgICAgIEhvc3RlZEZpZWxkVHlwZS5DYXJkTmFtZSBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnkgaW4gZmllbGRzXG4gICAgKTtcbn1cbiIsImltcG9ydCBIb3N0ZWRGaWVsZFR5cGUgZnJvbSAnLi9ob3N0ZWQtZmllbGQtdHlwZSc7XG5pbXBvcnQgeyBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwLCBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIH0gZnJvbSAnLi9ob3N0ZWQtZm9ybS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoXG4gICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbik6IGZpZWxkcyBpcyBIb3N0ZWRTdG9yZWRDYXJkRmllbGRPcHRpb25zTWFwIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclZlcmlmaWNhdGlvbiBpbiBmaWVsZHMgJiZcbiAgICAgICAgSG9zdGVkRmllbGRUeXBlLkNhcmRDb2RlVmVyaWZpY2F0aW9uIGluIGZpZWxkcyAmJlxuICAgICAgICBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbiBpbiBmaWVsZHNcbiAgICApO1xufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gYSBwYXltZW50IG1ldGhvZCBleHBlcmllbmNlcyBzb21lIGtpbmQgb2ZcbiAqIGZhaWx1cmUgKGkuZS46IGl0cyBjbGllbnQgbGlicmFyeSByZXR1cm5zIGEgcmVqZWN0ZWQgcHJvbWlzZSkuIEFuZCB0aGVyZSBpc1xuICogbm8gb3RoZXIgZXJyb3IgdHlwZSB0aGF0IGlzIG1vcmUgc3BlY2lmaWMgdGhhbiB0aGlzIG9uZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihcbiAgICAgICAgICAgIG1lc3NhZ2UgfHxcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY2xpZW50IGxpYnJhcnkgb2YgYSBwYXltZW50IG1ldGhvZCBoYXMgdGhyb3duIGFuIHVuZXhwZWN0ZWQgZXJyb3IuJyxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfbWV0aG9kX2NsaWVudF9pbnZhbGlkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICBba2V5OiBzdHJpbmddOiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50SW52YWxpZEZvcm1FcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBkZXRhaWxzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsIG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBmb3JtIGNvbnRhaW5zIGludmFsaWQgZGF0YS4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEludmFsaWRGb3JtRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9pbnZhbGlkX2Zvcm0nO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGlzTmlsLCBvbWl0QnkgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEhvc3RlZENhcmRGaWVsZE9wdGlvbnMsXG4gICAgSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICBIb3N0ZWRGaWVsZEJsdXJFdmVudERhdGEsXG4gICAgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YSxcbiAgICBIb3N0ZWRGaWVsZEZvY3VzRXZlbnREYXRhLFxuICAgIEhvc3RlZEZpZWxkU3R5bGVzTWFwLFxuICAgIEhvc3RlZEZpZWxkVHlwZSxcbiAgICBIb3N0ZWRGaWVsZFZhbGlkYXRlRXZlbnREYXRhLFxuICAgIEhvc3RlZEZvcm1PcHRpb25zLFxuICAgIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEsXG4gICAgSG9zdGVkSW5wdXRWYWxpZGF0ZUVycm9yRGF0YU1hcCxcbiAgICBIb3N0ZWRJbnN0cnVtZW50LFxuICAgIEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyxcbiAgICBpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyxcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvcixcbiAgICBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLWNvbW1lcmNlLXV0aWxzJztcbmltcG9ydCB7XG4gICAgUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBQYXlQYWxJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheVBhbFNka1NjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQge1xuICAgIExpYWJpbGl0eVNoaWZ0RW51bSxcbiAgICBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzQ29uZmlnLFxuICAgIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc09uQXBwcm92ZURhdGEsXG4gICAgUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VGaWVsZHMsXG4gICAgUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY2FyZHMtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIGV4ZWN1dGlvblBheW1lbnREYXRhPzogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ107XG4gICAgcHJpdmF0ZSBpc0NyZWRpdENhcmRGb3JtPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtPzogYm9vbGVhbjtcblxuICAgIHByaXZhdGUgY2FyZEZpZWxkcz86IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkcztcbiAgICBwcml2YXRlIGN2dkZpZWxkPzogUGF5UGFsQ29tbWVyY2VGaWVsZHM7XG4gICAgcHJpdmF0ZSBleHBpcnlGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuICAgIHByaXZhdGUgbnVtYmVyRmllbGQ/OiBQYXlQYWxDb21tZXJjZUZpZWxkcztcbiAgICBwcml2YXRlIG5hbWVGaWVsZD86IFBheVBhbENvbW1lcmNlRmllbGRzO1xuXG4gICAgcHJpdmF0ZSBob3N0ZWRGb3JtT3B0aW9ucz86IEhvc3RlZEZvcm1PcHRpb25zO1xuICAgIHByaXZhdGUgcmV0dXJuZWRPcmRlcklkPzogc3RyaW5nO1xuICAgIHByaXZhdGUgcmV0dXJuZWRWYXVsdGVkVG9rZW4/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbFNka1NjcmlwdExvYWRlcjogUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHBheXBhbEZhc3RsYW5lVXRpbHM6IFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMsIHBheXBhbGNvbW1lcmNlIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyA9IHBheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMgfHwgcGF5cGFsY29tbWVyY2U7XG5cbiAgICAgICAgY29uc3QgeyBmb3JtLCBvbkNyZWRpdENhcmRGaWVsZHNSZW5kZXJpbmdFcnJvciwgb25Mb2FkQ29tcGxldGUgfSA9XG4gICAgICAgICAgICBwYXlwYWxDb21tZXJjZUluaXRpYWxpemF0aW9uT3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWZvcm0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRjYXJkcy5mb3JtXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ob3N0ZWRGb3JtT3B0aW9ucyA9IGZvcm07XG5cbiAgICAgICAgdGhpcy5pc0NyZWRpdENhcmRGb3JtID0gaXNDcmVkaXRDYXJkRm9ybUZpZWxkcyhmb3JtLmZpZWxkcyk7XG4gICAgICAgIHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0gPVxuICAgICAgICAgICAgaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMoZm9ybS5maWVsZHMpICYmICF0aGlzLmhhc1VuZGVmaW5lZFZhbHVlcygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIHVuZGVmaW5lZCwgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVGaWVsZHMoZm9ybSwgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgb25Mb2FkQ29tcGxldGU/LigpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKHBheWxvYWQ6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5bWVudERhdGEgfSA9IHBheW1lbnQgfHwge307XG5cbiAgICAgICAgaWYgKCFwYXltZW50IHx8ICFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhID0gcGF5bWVudERhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkRm9ybSB8fCB0aGlzLmlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3coKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VibWl0SG9zdGVkRm9ybSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhpcyBjb25kaXRpb24gaXMgdHJpZ2dlcmVkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50IGFuZCBzaGlwcGluZyBhZGRyZXNzIGlzIHRydXN0ZVxuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlckNhcmRGaWVsZHMoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJtaXRQYXltZW50UGF5bG9hZCA9IHRoaXMucHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YSxcbiAgICAgICAgICAgIHRoaXMucmV0dXJuZWRPcmRlcklkLFxuICAgICAgICAgICAgdGhpcy5yZXR1cm5lZFZhdWx0ZWRUb2tlbixcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChzdWJtaXRQYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5leHBpcnlGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZD8uY2xvc2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQ/LmNsb3NlKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU3VibWl0IFBheW1lbnQgUGF5bG9hZCBwcmVwYXJpbmcgbWV0aG9kXG4gICAgICpcbiAgICAgKiBgdmF1bHRlZFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh3aXRoIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqIGBzZXR1cFRva2VuYCBpcyB1c2VkIHdoZW4gd2UgcGF5IHdpdGggdmF1bHRlZCBpbnN0cnVtZW50ICh1bnRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcylcbiAgICAgKiBgb3JkZXJJZGAgaXMgdXNlZCBpbiBldmVyeSBjYXNlIChiYXNpYyBjYXJkIHBheW1lbnQsIHRydXN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBhbmQgdW50cnVzdGVkKVxuICAgICAqL1xuICAgIHByaXZhdGUgcHJlcGFyZVBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50RGF0YTogT3JkZXJQYXltZW50UmVxdWVzdEJvZHlbJ3BheW1lbnREYXRhJ10sXG4gICAgICAgIG9yZGVySWQ/OiBzdHJpbmcsXG4gICAgICAgIG5vbmNlPzogc3RyaW5nLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcblxuICAgICAgICBjb25zdCBpbnN0cnVtZW50SWQgPVxuICAgICAgICAgICAgcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YS5pbnN0cnVtZW50SWQgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgY29uc3QgYmlncGF5X3Rva2VuID0gb21pdEJ5KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZlcmlmaWNhdGlvbl9ub25jZTogbm9uY2UsXG4gICAgICAgICAgICAgICAgdG9rZW46IGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc05pbCxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG5vbmNlIHx8IGluc3RydW1lbnRJZCA/IHsgYmlncGF5X3Rva2VuIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihvcmRlcklkID8geyBjYXJkX3dpdGhfb3JkZXI6IHsgb3JkZXJfaWQ6IG9yZGVySWQgfSB9IDoge30pLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2FyZCBmaWVsZHMgaW5pdGlhbGl6ZVxuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplRmllbGRzKFxuICAgICAgICBmb3JtT3B0aW9uczogSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgICAgIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yPzogUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRJbml0aWFsaXplT3B0aW9uc1snb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3InXSxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBmaWVsZHMsIHN0eWxlcyB9ID0gZm9ybU9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBleGVjdXRlQ2FsbGJhY2sgPSB0aGlzLmdldEV4ZWN1dGVDYWxsYmFjayhmaWVsZHMpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRGaWVsZHNDb25maWc6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldElucHV0U3R5bGVzKHN0eWxlcyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7XG4gICAgICAgICAgICAgICAgb3JkZXJJRCxcbiAgICAgICAgICAgICAgICB2YXVsdFNldHVwVG9rZW4sXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQsXG4gICAgICAgICAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCA9PT0gTGlhYmlsaXR5U2hpZnRFbnVtLk5vIHx8XG4gICAgICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93blxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBcHByb3ZlKHsgb3JkZXJJRCwgdmF1bHRTZXR1cFRva2VuIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRXJyb3I6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5wdXRFdmVudHM6IHtcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogKGV2ZW50KSA9PiB0aGlzLm9uQ2hhbmdlSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uRm9jdXM6IChldmVudCkgPT4gdGhpcy5vbkZvY3VzSGFuZGxlcihmb3JtT3B0aW9ucywgZXZlbnQpLFxuICAgICAgICAgICAgICAgIG9uQmx1cjogKGV2ZW50KSA9PiB0aGlzLm9uQmx1ckhhbmRsZXIoZm9ybU9wdGlvbnMsIGV2ZW50KSxcbiAgICAgICAgICAgICAgICBvbklucHV0U3VibWl0UmVxdWVzdDogKGV2ZW50KSA9PiB0aGlzLm9uSW5wdXRTdWJtaXRSZXF1ZXN0KGZvcm1PcHRpb25zLCBldmVudCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLi4uZXhlY3V0ZUNhbGxiYWNrLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2FyZEZpZWxkcyA9IGF3YWl0IHBheXBhbFNkay5DYXJkRmllbGRzKGNhcmRGaWVsZHNDb25maWcpO1xuXG4gICAgICAgIGlmICghdGhpcy5jYXJkRmllbGRzLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxpemVJbnB1dENvbnRhaW5lcnMoZmllbGRzKTtcblxuICAgICAgICAgICAgaWYgKGlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMoZmllbGRzKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0NyZWRpdENhcmRWYXVsdGVkRm9ybUZpZWxkcyhmaWVsZHMpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJWYXVsdGVkRmllbGRzKGZpZWxkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uQ3JlZGl0Q2FyZEZpZWxkc1JlbmRlcmluZ0Vycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgZXhlY3V0ZSBjYWxsYmFjayBtZXRob2RcbiAgICAgKiBEZXBlbmRzIG9uIHNoaXBwaW5nIGFkZHJlc3MgaXMgdHJ1c3RlZCBvciBub3Qgd2Ugc2hvdWxkIHBhc3MgdG8gUFBcbiAgICAgKiBgY3JlYXRlVmF1bHRTZXR1cFRva2VuYCBjYWxsYmFjayBpZiBhZGRyZXNzIGlzIHVudHJ1c3RlZCBvclxuICAgICAqIGBjcmVhdGVPcmRlcmAgaWYgYWRkcmVzcyBpcyB0cnVzdGVkXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEV4ZWN1dGVDYWxsYmFjayhcbiAgICAgICAgZmllbGRzOiBIb3N0ZWRDYXJkRmllbGRPcHRpb25zTWFwIHwgSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCxcbiAgICApIHtcbiAgICAgICAgY29uc3QgaXNWYXVsdGVkRm9ybSA9IGlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtRmllbGRzKGZpZWxkcyk7XG5cbiAgICAgICAgcmV0dXJuIGlzVmF1bHRlZEZvcm0gPyB0aGlzLmNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkgOiB0aGlzLmNyZWF0ZU9yZGVyQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVZhdWx0U2V0dXBUb2tlbkNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3JlYXRlVmF1bHRTZXR1cFRva2VuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzZXR1cFRva2VuIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5nZXRJbnN0cnVtZW50UGFyYW1zKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBUb2tlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICkpIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwVG9rZW47XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3JkZXJDYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPVxuICAgICAgICAgICAgICAgICAgICAoYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXJDYXJkRmllbGRzKFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHNjaGVja291dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEluc3RydW1lbnRQYXJhbXMoKSxcbiAgICAgICAgICAgICAgICAgICAgKSkgfHwge307XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JkZXJJZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBvbkFwcHJvdmUgbWV0aG9kXG4gICAgICogV2hlbiBzdWJtaXR0aW5nIGEgZm9ybSB3aXRoIGEgYHN1Ym1pdEhvc3RlZEZvcm1gIG1ldGhvZCBpZiB0aGVyZSBpcyBubyBlcnJvclxuICAgICAqIHRoZW4gb25BcHByb3ZlIGNhbGxiYWNrIGlzIHRyaWdnZXJlZCBhbmQgZGVwZW5kcyBvbiB0aGUgZmxvd1xuICAgICAqIHdlIHdpbGwgcmVjZWl2ZSBhbiBgb3JkZXJJRGAgaWYgaXQncyBiYXNpYyBwYXlpbmcgYW5kIGB2YXVsdFNldHVwVG9rZW5gIGlmIHdlIGFyZSBwYXlpbmdcbiAgICAgKiB3aXRoIHZhdWx0ZWQgaW5zdHJ1bWVudCBhbmQgc2hpcHBpbmcgYWRkcmVzcyBpcyB1bnRydXN0ZWRcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgaGFuZGxlQXBwcm92ZSh7IG9yZGVySUQsIHZhdWx0U2V0dXBUb2tlbiB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNPbkFwcHJvdmVEYXRhKSB7XG4gICAgICAgIGlmIChvcmRlcklEKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkT3JkZXJJZCA9IG9yZGVySUQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmF1bHRTZXR1cFRva2VuKSB7XG4gICAgICAgICAgICB0aGlzLnJldHVybmVkVmF1bHRlZFRva2VuID0gdmF1bHRTZXR1cFRva2VuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBSZW5kZXJpbmcgQ2FyZCBGaWVsZHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyByZW5kZXJGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGUuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5Py5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnkuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTmFtZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZUZpZWxkID0gY2FyZEZpZWxkcy5OYW1lRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5uYW1lRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROYW1lLmNvbnRhaW5lcklkfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZpZWxkc09wdGlvbnMuY2FyZE51bWJlcj8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyRmllbGQgPSBjYXJkRmllbGRzLk51bWJlckZpZWxkKHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubnVtYmVyRmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmROdW1iZXIuY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJlbmRlclZhdWx0ZWRGaWVsZHMoZmllbGRzT3B0aW9uczogSG9zdGVkU3RvcmVkQ2FyZEZpZWxkT3B0aW9uc01hcCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuXG4gICAgICAgIGlmIChmaWVsZHNPcHRpb25zLmNhcmRDb2RlVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5jdnZGaWVsZCA9IGNhcmRGaWVsZHMuQ1ZWRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdnZGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZENvZGVWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkRXhwaXJ5VmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5leHBpcnlGaWVsZCA9IGNhcmRGaWVsZHMuRXhwaXJ5RmllbGQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXhwaXJ5RmllbGQucmVuZGVyKGAjJHtmaWVsZHNPcHRpb25zLmNhcmRFeHBpcnlWZXJpZmljYXRpb24uY29udGFpbmVySWR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGRzT3B0aW9ucy5jYXJkTnVtYmVyVmVyaWZpY2F0aW9uPy5jb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhpcy5udW1iZXJGaWVsZCA9IGNhcmRGaWVsZHMuTnVtYmVyRmllbGQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5udW1iZXJGaWVsZC5yZW5kZXIoYCMke2ZpZWxkc09wdGlvbnMuY2FyZE51bWJlclZlcmlmaWNhdGlvbi5jb250YWluZXJJZH1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogSW5zdHJ1bWVudCBwYXJhbXMgbWV0aG9kXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEluc3RydW1lbnRQYXJhbXMoKTogSG9zdGVkSW5zdHJ1bWVudCB8IFZhdWx0ZWRJbnN0cnVtZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSh0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgeyBzaG91bGRTYXZlSW5zdHJ1bWVudCwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCB9ID1cbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVmF1bHRlZEluc3RydW1lbnQodGhpcy5leGVjdXRpb25QYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSB0aGlzLmV4ZWN1dGlvblBheW1lbnREYXRhO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluc3RydW1lbnRJZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZCh7XG4gICAgICAgIGVtaXR0ZWRCeSxcbiAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6XG4gICAgICAgIHwgSG9zdGVkRmllbGRCbHVyRXZlbnREYXRhXG4gICAgICAgIHwgSG9zdGVkRmllbGRFbnRlckV2ZW50RGF0YVxuICAgICAgICB8IEhvc3RlZEZpZWxkRm9jdXNFdmVudERhdGEge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRUeXBlOiB0aGlzLm1hcEZpZWxkVHlwZShlbWl0dGVkQnkpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRm9ybSBzdWJtaXQgbWV0aG9kXG4gICAgICogVHJpZ2dlcnMgYSBmb3JtIHN1Ym1pdFxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBzdWJtaXRIb3N0ZWRGb3JtKCkge1xuICAgICAgICBjb25zdCBjYXJkRmllbGRzID0gdGhpcy5nZXRDYXJkRmllbGRzT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IHN1Ym1pdENvbmZpZyA9IHtcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB7XG4gICAgICAgICAgICAgICAgY29tcGFueTogYmlsbGluZ0FkZHJlc3MuY29tcGFueSxcbiAgICAgICAgICAgICAgICBhZGRyZXNzTGluZTE6IGJpbGxpbmdBZGRyZXNzLmFkZHJlc3MxLFxuICAgICAgICAgICAgICAgIGFkZHJlc3NMaW5lMjogYmlsbGluZ0FkZHJlc3MuYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgYWRtaW5BcmVhMTogYmlsbGluZ0FkZHJlc3Muc3RhdGVPclByb3ZpbmNlQ29kZSxcbiAgICAgICAgICAgICAgICBhZG1pbkFyZWEyOiBiaWxsaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IGJpbGxpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGJpbGxpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm0pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjYXJkRmllbGRzLnN1Ym1pdChzdWJtaXRDb25maWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKFxuICAgICAgICAgICAgICAgICdGYWlsZWQgYXV0aGVudGljYXRpb24uIFBsZWFzZSB0cnkgdG8gYXV0aG9yaXplIGFnYWluLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBWYWxpZGF0aW9uIGFuZCBlcnJvcnNcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgdmFsaWRhdGVIb3N0ZWRGb3JtT3JUaHJvdygpIHtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkcyA9IHRoaXMuZ2V0Q2FyZEZpZWxkc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgY2FyZEZpZWxkc1N0YXRlID0gYXdhaXQgY2FyZEZpZWxkcy5nZXRTdGF0ZSgpLnRoZW4oKGRhdGEpID0+IGRhdGEpO1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uRGF0YSA9IHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGNhcmRGaWVsZHNTdGF0ZSk7XG5cbiAgICAgICAgaWYgKHZhbGlkYXRpb25EYXRhLmlzVmFsaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaG9zdGVkRm9ybU9wdGlvbnM/Lm9uVmFsaWRhdGU/Lih2YWxpZGF0aW9uRGF0YSk7XG5cbiAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRJbnZhbGlkRm9ybUVycm9yKHRoaXMubWFwVmFsaWRhdGlvbkVycm9ycyh2YWxpZGF0aW9uRGF0YS5lcnJvcnMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFZhbGlkaXR5RGF0YSh7XG4gICAgICAgIGZpZWxkcyxcbiAgICB9OiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHNTdGF0ZSk6IEhvc3RlZEZpZWxkVmFsaWRhdGVFdmVudERhdGEge1xuICAgICAgICBjb25zdCB1cGRhdGVkRmllbGRzID0geyAuLi5maWVsZHMgfTtcblxuICAgICAgICBkZWxldGUgdXBkYXRlZEZpZWxkcy5jYXJkTmFtZUZpZWxkO1xuXG4gICAgICAgIGNvbnN0IGZpZWxkc0tleXMgPSBPYmplY3Qua2V5cyh1cGRhdGVkRmllbGRzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlWydmaWVsZHMnXVxuICAgICAgICA+O1xuXG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBmaWVsZHNLZXlzLmV2ZXJ5KChrZXkpID0+IHVwZGF0ZWRGaWVsZHNba2V5XT8uaXNWYWxpZCk7XG5cbiAgICAgICAgY29uc3QgZXJyb3JzID0gZmllbGRzS2V5cy5yZWR1Y2UoKGZpZWxkc0Vycm9ycywga2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFR5cGUgPSB0aGlzLm1hcEZpZWxkVHlwZShrZXkpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLmZpZWxkc0Vycm9ycyxcbiAgICAgICAgICAgICAgICBbZmllbGRUeXBlXTogdXBkYXRlZEZpZWxkc1trZXldPy5pc1ZhbGlkXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogW3RoaXMuZ2V0SW52YWxpZEVycm9yQnlGaWVsZFR5cGUoZmllbGRUeXBlKV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZCwgZXJyb3JzIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnZhbGlkRXJyb3JCeUZpZWxkVHlwZShmaWVsZFR5cGU6IHN0cmluZyk6IEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGEge1xuICAgICAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZENvZGU6XG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgY29kZScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfY29kZScsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlcjpcbiAgICAgICAgICAgIGNhc2UgSG9zdGVkRmllbGRUeXBlLkNhcmROdW1iZXJWZXJpZmljYXRpb246XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBjYXJkIG51bWJlcicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkX2NhcmRfbnVtYmVyJyxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYXNlIEhvc3RlZEZpZWxkVHlwZS5DYXJkRXhwaXJ5OlxuICAgICAgICAgICAgY2FzZSBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGNhcmQgZXhwaXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ludmFsaWRfY2FyZF9leHBpcnknLFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBmaWVsZCcsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnZhbGlkJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBWYWxpZGF0aW9uRXJyb3JzKFxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzOiBIb3N0ZWRJbnB1dFZhbGlkYXRlRXJyb3JEYXRhTWFwID0ge30sXG4gICAgKTogUGF5bWVudEludmFsaWRGb3JtRXJyb3JEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgZXJyb3JzOiBQYXltZW50SW52YWxpZEZvcm1FcnJvckRldGFpbHMgPSB7fTtcbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbkVycm9yc0tleXMgPSBPYmplY3Qua2V5cyh2YWxpZGF0aW9uRXJyb3JzKSBhcyBBcnJheTxcbiAgICAgICAgICAgIGtleW9mIEhvc3RlZElucHV0VmFsaWRhdGVFcnJvckRhdGFNYXBcbiAgICAgICAgPjtcblxuICAgICAgICB2YWxpZGF0aW9uRXJyb3JzS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGVycm9yc1trZXldID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvbkVycm9yc1trZXldPy5bMF0/Lm1lc3NhZ2UgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGtleSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGVycm9ycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEZpZWxkcyBtYXBwZXJzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIG1hcEZpZWxkVHlwZSh0eXBlOiBzdHJpbmcpOiBIb3N0ZWRGaWVsZFR5cGUge1xuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ25hbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE5hbWU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2NhcmROdW1iZXJGaWVsZCc6XG4gICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQ3JlZGl0Q2FyZEZvcm1cbiAgICAgICAgICAgICAgICAgICAgPyBIb3N0ZWRGaWVsZFR5cGUuQ2FyZE51bWJlclxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkTnVtYmVyVmVyaWZpY2F0aW9uO1xuXG4gICAgICAgICAgICBjYXNlICdjYXJkRXhwaXJ5RmllbGQnOlxuICAgICAgICAgICAgY2FzZSAnZXhwaXJ5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0NyZWRpdENhcmRGb3JtXG4gICAgICAgICAgICAgICAgICAgID8gSG9zdGVkRmllbGRUeXBlLkNhcmRFeHBpcnlcbiAgICAgICAgICAgICAgICAgICAgOiBIb3N0ZWRGaWVsZFR5cGUuQ2FyZEV4cGlyeVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgY2FzZSAnY2FyZEN2dkZpZWxkJzpcbiAgICAgICAgICAgIGNhc2UgJ2N2dic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNDcmVkaXRDYXJkRm9ybVxuICAgICAgICAgICAgICAgICAgICA/IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVxuICAgICAgICAgICAgICAgICAgICA6IEhvc3RlZEZpZWxkVHlwZS5DYXJkQ29kZVZlcmlmaWNhdGlvbjtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmllbGQgdHlwZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBVdGlsc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRDYXJkRmllbGRzT3JUaHJvdygpOiBQYXlQYWxDb21tZXJjZUNhcmRGaWVsZHMge1xuICAgICAgICBpZiAoIXRoaXMuY2FyZEZpZWxkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmNhcmRGaWVsZHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJbnB1dFN0eWxlcyhcbiAgICAgICAgc3R5bGVzPzogSG9zdGVkRmllbGRTdHlsZXNNYXAsXG4gICAgKTogUGF5UGFsQ29tbWVyY2VIb3N0ZWRGaWVsZHNSZW5kZXJPcHRpb25zWydzdHlsZXMnXSB7XG4gICAgICAgIGNvbnN0IGNvbW1vblN0eWxlcyA9IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiBzdHlsZXM/LmRlZmF1bHQ/LmZvbnRTaXplIHx8ICcxcmVtJyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6XG4gICAgICAgICAgICAgICAgc3R5bGVzPy5kZWZhdWx0Py5mb250RmFtaWx5IHx8ICdNb250c2VycmF0LCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmb250LXdlaWdodCc6IHN0eWxlcz8uZGVmYXVsdD8uZm9udFdlaWdodCB8fCAnNDAwJyxcbiAgICAgICAgICAgIG91dGxpbmU6ICdub25lJyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICc5cHggMTNweCcsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdFN0eWxlcyA9IHsgLi4uY29tbW9uU3R5bGVzLCBjb2xvcjogJyMzMzMzMzMnIH07XG4gICAgICAgIGNvbnN0IGVycm9yU3R5bGVzID0geyAuLi5jb21tb25TdHlsZXMsIGNvbG9yOiAncmVkJyB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dDogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgICAgICcuaW52YWxpZCc6IGVycm9yU3R5bGVzLFxuICAgICAgICAgICAgJy52YWxpZCc6IGRlZmF1bHRTdHlsZXMsXG4gICAgICAgICAgICAnOmZvY3VzJzogZGVmYXVsdFN0eWxlcyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0eWxpemVJbnB1dENvbnRhaW5lcnMoXG4gICAgICAgIGZpZWxkczogSG9zdGVkQ2FyZEZpZWxkT3B0aW9uc01hcCB8IEhvc3RlZFN0b3JlZENhcmRGaWVsZE9wdGlvbnNNYXAsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMoZmllbGRzIHx8IHt9KS5mb3JFYWNoKChpZDogSG9zdGVkQ2FyZEZpZWxkT3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkPy5jb250YWluZXJJZCB8fCAnJ31gKTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJveFNoYWRvdyA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmQgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubWFyZ2luTGVmdCA9ICctNXB4JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYXNVbmRlZmluZWRWYWx1ZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmhvc3RlZEZvcm1PcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLmhvc3RlZEZvcm1PcHRpb25zLmZpZWxkcykuc29tZShcbiAgICAgICAgICAgICAgICAodmFsdWUpID0+IHZhbHVlID09PSB1bmRlZmluZWQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBJbnB1dCBldmVudHMgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNoYW5nZUhhbmRsZXIoXG4gICAgICAgIGZvcm1PcHRpb25zOiBIb3N0ZWRGb3JtT3B0aW9ucyxcbiAgICAgICAgZXZlbnQ6IFBheVBhbENvbW1lcmNlQ2FyZEZpZWxkc1N0YXRlLFxuICAgICk6IHZvaWQge1xuICAgICAgICBmb3JtT3B0aW9ucz8ub25WYWxpZGF0ZT8uKHRoaXMuZ2V0VmFsaWRpdHlEYXRhKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkZvY3VzSGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkZvY3VzPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25CbHVySGFuZGxlcihcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkJsdXI/Lih0aGlzLmdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkKGV2ZW50KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbklucHV0U3VibWl0UmVxdWVzdChcbiAgICAgICAgZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zLFxuICAgICAgICBldmVudDogUGF5UGFsQ29tbWVyY2VDYXJkRmllbGRzU3RhdGUsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGZvcm1PcHRpb25zPy5vbkVudGVyPy4odGhpcy5nZXRGaWVsZFR5cGVCeUVtaXR0ZWRGaWVsZChldmVudCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIENvbW1lcmNlIEFjY2VsZXJhdGVkIGNoZWNrb3V0IHJlbGF0ZWQgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgcGFydCB3aGVuIFBQQ1AgQVhPIEEvQiB0ZXN0aW5nIHdpbGwgYmUgZmluaXNoZWRcbiAgICBwcml2YXRlIHNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShtZXRob2RJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBwYXlwYWxDb21tZXJjZVBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICAgICAgICAgIHBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgICAgICApXG4gICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICA6IHt9O1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kPy5pbml0aWFsaXphdGlvbkRhdGE/LmlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQgJiZcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2Q/LmluaXRpYWxpemF0aW9uRGF0YT8uaXNQYXlQYWxDb21tZXJjZUFuYWx5dGljc1YyRW5hYmxlZCAmJlxuICAgICAgICAgICAgIXBheXBhbENvbW1lcmNlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXI/LmF1dGhlbnRpY2F0aW9uU3RhdGVcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyBwYXJ0IHdoZW4gUFBDUCBBWE8gQS9CIHRlc3Rpbmcgd2lsbCBiZSBmaW5pc2hlZFxuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbEZhc3RsYW5lT3JUaHJvdyhtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCB7IGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXphdGlvbkRhdGE/LmNvbm5lY3RDbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgcGF5UGFsRmFzdGxhbmVTZGsgPSBhd2FpdCB0aGlzLnBheXBhbFNka1NjcmlwdExvYWRlci5nZXRQYXlQYWxGYXN0bGFuZVNkayhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGNhcnQuY3VycmVuY3kuY29kZSxcbiAgICAgICAgICAgICAgICBjYXJ0LmlkLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmluaXRpYWxpemVQYXlQYWxGYXN0bGFuZShcbiAgICAgICAgICAgICAgICBwYXlQYWxGYXN0bGFuZVNkayxcbiAgICAgICAgICAgICAgICAhIWluaXRpYWxpemF0aW9uRGF0YT8uaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gY2F0Y2ggKF86IHVua25vd24pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBhdm9pZCB0aHJvd2luZyBhbnkgZXJyb3IgZnJvbSB0aGlzIGZsb3cgdG8gZG8gbm8gYnJha2UgZGVmYXVsdCBmbG93XG4gICAgICAgICAgICAvLyBUaGlzIGZsb3cgaXMgb3B0aW9uYWxcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgUGF5UGFsQ29ubmVjdEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNQYXlQYWxDb21tZXJjZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihcbiAgICBjdXN0b21lcj86IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgUGF5UGFsQ29ubmVjdEN1c3RvbWVyIHtcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgICAnYXV0aGVudGljYXRpb25TdGF0ZScgaW4gY3VzdG9tZXIgfHwgJ2FkZHJlc3NlcycgaW4gY3VzdG9tZXIgfHwgJ2luc3RydW1lbnRzJyBpbiBjdXN0b21lclxuICAgICk7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1jYXJkcy1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5cGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdENhcmRzUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0Q2FyZHNQYXltZW50U3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5cGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgaWQ6ICdwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzJyB9LFxuXSk7XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFJlcXVlc3RPcHRpb25zLFxuICAgIFBheW1lbnRTdHJhdGVneSxcbiAgICBUaW1lb3V0RXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHsgTG9hZGluZ0luZGljYXRvciB9IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvdWknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBCaXJ0aERhdGUsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgUGF5UGFsT3JkZXJTdGF0dXMsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCB7XG4gICAgUGF5cGFsQ29tbWVyY2VSYXRlUGF5LFxuICAgIFdpdGhQYXlQYWxDb21tZXJjZVJhdGVQYXlQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLXJhdGVwYXktaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuY29uc3QgUE9MTElOR19JTlRFUlZBTCA9IDMwMDA7XG5jb25zdCBNQVhfUE9MTElOR19USU1FID0gMzAwMDAwO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgZ3VpZD86IHN0cmluZztcbiAgICBwcml2YXRlIHBheXBhbGNvbW1lcmNlcmF0ZXBheT86IFBheXBhbENvbW1lcmNlUmF0ZVBheTtcbiAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwb2xsaW5nVGltZXIgPSAwO1xuICAgIHByaXZhdGUgc3RvcFBvbGxpbmcgPSBub29wO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgbG9hZGluZ0luZGljYXRvcjogTG9hZGluZ0luZGljYXRvcixcbiAgICAgICAgcHJpdmF0ZSBwb2xsaW5nSW50ZXJ2YWw6IG51bWJlciA9IFBPTExJTkdfSU5URVJWQUwsXG4gICAgICAgIHByaXZhdGUgbWF4UG9sbGluZ0ludGVydmFsVGltZTogbnVtYmVyID0gTUFYX1BPTExJTkdfVElNRSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VSYXRlUGF5UGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGdhdGV3YXlJZCwgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlcmF0ZXBheSB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdhdGV3YXlJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2VyYXRlcGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VyYXRlcGF5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBsZWdhbFRleHRDb250YWluZXIsIGNvbnRhaW5lciwgbG9hZGluZ0NvbnRhaW5lcklkIH0gPSBwYXlwYWxjb21tZXJjZXJhdGVwYXk7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmxlZ2FsVGV4dENvbnRhaW5lclwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbG9hZGluZ0NvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubG9hZGluZ0NvbnRhaW5lcklkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gbG9hZGluZ0NvbnRhaW5lcklkO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4oXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgeyBtZXJjaGFudElkIH0gPSBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBpZiAoIW1lcmNoYW50SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIG1lcmNoYW50SWQgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgPSBwYXlwYWxjb21tZXJjZXJhdGVwYXk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICB0aGlzLmNyZWF0ZUZyYXVkTmV0U2NyaXB0KG1lcmNoYW50SWQsIG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHRoaXMubG9hZEZyYXVkbmV0Q29uZmlnKCk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJMZWdhbFRleHQobGVnYWxUZXh0Q29udGFpbmVyLCBjb250YWluZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUocGF5bG9hZDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBwYXlsb2FkO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0RmllbGRzVmFsdWVzIH0gPSB0aGlzLnBheXBhbGNvbW1lcmNlcmF0ZXBheSB8fCB7fTtcblxuICAgICAgICBpZiAoIXBheW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50J10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnZXRGaWVsZHNWYWx1ZXMgfHwgdHlwZW9mIGdldEZpZWxkc1ZhbHVlcyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLmdldEZpZWxkc1ZhbHVlc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJJZCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoXG4gICAgICAgICAgICAgICAgJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzY2hlY2tvdXQnLFxuICAgICAgICAgICAgICAgIHsgbWV0YWRhdGFJZDogdGhpcy5ndWlkIH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCB7IHJhdGVwYXlCaXJ0aERhdGUsIHJhdGVwYXlQaG9uZU51bWJlciwgcmF0ZXBheVBob25lQ291bnRyeUNvZGUgfSA9XG4gICAgICAgICAgICAgICAgZ2V0RmllbGRzVmFsdWVzKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlX2luZm86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZF9pZDogcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmF0ZV9wYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpcnRoX2RhdGU6IHRoaXMubm9ybWFsaXplRGF0ZShyYXRlcGF5QmlydGhEYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF0aW9uYWxfbnVtYmVyOiByYXRlcGF5UGhvbmVOdW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRyeV9jb2RlOiByYXRlcGF5UGhvbmVDb3VudHJ5Q29kZS5zcGxpdCgnKycpWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsX2FjY291bnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIob3JkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQoe1xuICAgICAgICAgICAgICAgIG1ldGhvZElkOiBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHBheW1lbnREYXRhLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgcGF5bWVudC5tZXRob2RJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50LmdhdGV3YXlJZCxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChfcmVzb2x2ZSwgcmVqZWN0KSA9PiByZWplY3QoKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGxlZ2FsVGV4dENvbnRhaW5lciB9ID0gdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXkgfHwge307XG4gICAgICAgIGNvbnN0IGZyYXVkTmV0U2NyaXB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJmcmF1ZG5ldFNjcmlwdFwiXScpWzBdO1xuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWlkPVwiZnJhdWRuZXRDb25maWdcIl0nKVswXTtcblxuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcblxuICAgICAgICBmcmF1ZE5ldFNjcmlwdC5yZW1vdmUoKTtcbiAgICAgICAgZnJhdWROZXRDb25maWcucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKGxlZ2FsVGV4dENvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXplRGF0ZShkYXRlOiBCaXJ0aERhdGUpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IHRoaXMuZm9ybWF0RGF0ZShkYXRlLmdldERhdGUoKSk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZE1vbnRoID0gdGhpcy5mb3JtYXREYXRlKGRhdGUuZ2V0TW9udGgoKSArIDEpO1xuXG4gICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7Zm9ybWF0dGVkTW9udGh9LSR7Zm9ybWF0dGVkRGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0RGF0ZShkYXRlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7ZGF0ZSA8IDEwID8gMCA6ICcnfSR7ZGF0ZX1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyTGVnYWxUZXh0KGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDogc3RyaW5nLCBjb250YWluZXI6IHN0cmluZykge1xuICAgICAgICBjb25zdCBsZWdhbFRleHRDb250YWluZXJJZCA9IGxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZDtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVySWQgPSBjb250YWluZXIuc3BsaXQoJyMnKVsxXTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uQ29udGFpbmVySWQpO1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJQYXJlbnQgPSBidXR0b25Db250YWluZXI/LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IGxlZ2FsVGV4dENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG4gICAgICAgIGxlZ2FsVGV4dENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2lkJywgbGVnYWxUZXh0Q29udGFpbmVySWQpO1xuICAgICAgICBidXR0b25Db250YWluZXJQYXJlbnQ/LnByZXBlbmQobGVnYWxUZXh0Q29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcmF0ZVBheUJ1dHRvbiA9IHBheXBhbFNkay5MZWdhbCh7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuTGVnYWwuRlVORElORy5QQVlfVVBPTl9JTlZPSUNFLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxlZ2FsVGV4dENvbnRhaW5lcklkKTtcblxuICAgICAgICBpZiAobGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCkge1xuICAgICAgICAgICAgcmF0ZVBheUJ1dHRvbi5yZW5kZXIoYCMke2xlZ2FsVGV4dENvbnRhaW5lcklkfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJsZWdhbFRleHRDb250YWluZXJFbGVtZW50XCIgYXJndW1lbnQgaXMgbm90IGZvdW5kLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBjb25zdCB7IG9uRXJyb3IgfSA9IHRoaXMucGF5cGFsY29tbWVyY2VyYXRlcGF5IHx8IHt9O1xuXG4gICAgICAgIHRoaXMucmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IgJiYgdHlwZW9mIG9uRXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVGcmF1ZE5ldFNjcmlwdChtZXJjaGFudElkOiBzdHJpbmcsIG1ldGhvZElkOiBzdHJpbmcsIGdhdGV3YXlJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCwgZ2F0ZXdheUlkKTtcbiAgICAgICAgY29uc3QgeyB0ZXN0TW9kZSB9ID0gcGF5bWVudE1ldGhvZC5jb25maWc7XG4gICAgICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICBzY3JpcHRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHNjcmlwdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdmbmNscycsICdmbnBhcmFtcy1kZWRlN2NjNS0xNWZkLTRjNzUtYTlmNC0zNmM0MzBlZTNhOTknKTtcbiAgICAgICAgc2NyaXB0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCAnZnJhdWRuZXRTY3JpcHQnKTtcbiAgICAgICAgdGhpcy5ndWlkID0gdGhpcy5nZW5lcmF0ZUdVSUQoKTtcblxuICAgICAgICBjb25zdCBmcmF1ZE5ldENvbmZpZyA9IHtcbiAgICAgICAgICAgIGY6IHRoaXMuZ3VpZCxcbiAgICAgICAgICAgIHM6IGAke21lcmNoYW50SWR9X2NoZWNrb3V0LXBhZ2VgLFxuICAgICAgICAgICAgc2FuZGJveDogdGVzdE1vZGUsXG4gICAgICAgIH07XG5cbiAgICAgICAgc2NyaXB0RWxlbWVudC5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShmcmF1ZE5ldENvbmZpZyk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZUdVSUQoKSB7XG4gICAgICAgIGxldCBndWlkID0gJyc7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzLmxlbmd0aCk7XG5cbiAgICAgICAgICAgIGd1aWQgKz0gY2hhcmFjdGVyc1tyYW5kb21JbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ3VpZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWRGcmF1ZG5ldENvbmZpZygpIHtcbiAgICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsICdmcmF1ZG5ldENvbmZpZycpO1xuICAgICAgICBzY3JpcHQuc3JjID0gJ2h0dHBzOi8vYy5wYXlwYWwuY29tL2RhL3IvZmIuanMnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyByZWluaXRpYWxpemVTdHJhdGVneShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlUmF0ZVBheVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5kZWluaXRpYWxpemUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUG9sbGluZyBtZWNoYW5pc21cbiAgICAgKlxuICAgICAqXG4gICAgICogKi9cbiAgICBwcml2YXRlIGFzeW5jIGluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICByZXNvbHZlUHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgcmVqZWN0UHJvbWlzZTogKCkgPT4gdm9pZCxcbiAgICAgICAgZ2F0ZXdheUlkPzogc3RyaW5nLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChyZXNvbHZlLCB0aGlzLnBvbGxpbmdJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgKz0gdGhpcy5wb2xsaW5nSW50ZXJ2YWw7XG5cbiAgICAgICAgICAgIGNvbnN0IG9yZGVyU3RhdHVzID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRPcmRlclN0YXR1cyhcbiAgICAgICAgICAgICAgICAncGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VNZXRhZGF0YTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgaXNPcmRlckFwcHJvdmVkID0gb3JkZXJTdGF0dXMgPT09IFBheVBhbE9yZGVyU3RhdHVzLlBvbGxpbmdTdG9wO1xuICAgICAgICAgICAgY29uc3QgaXNQb2xsaW5nRXJyb3IgPSBvcmRlclN0YXR1cyA9PT0gUGF5UGFsT3JkZXJTdGF0dXMuUG9sbGluZ0Vycm9yO1xuXG4gICAgICAgICAgICBpZiAoaXNPcmRlckFwcHJvdmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZVByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzUG9sbGluZ0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFpc09yZGVyQXBwcm92ZWQgJiYgdGhpcy5wb2xsaW5nVGltZXIgPCB0aGlzLm1heFBvbGxpbmdJbnRlcnZhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbShcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICByZWplY3RQcm9taXNlLFxuICAgICAgICAgICAgICAgICAgICBnYXRld2F5SWQsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWluaXRpYWxpemVTdHJhdGVneSh7XG4gICAgICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlcmF0ZXBheTogdGhpcy5wYXlwYWxjb21tZXJjZXJhdGVwYXksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihuZXcgVGltZW91dEVycm9yKCkpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICByZWplY3RQcm9taXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5wb2xsaW5nVGltZXIgPSAwO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzZXRQb2xsaW5nTWVjaGFuaXNtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmRlaW5pdGlhbGl6ZVBvbGxpbmdNZWNoYW5pc20oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIExvYWRpbmcgSW5kaWNhdG9yIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSB0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMubG9hZGluZ0luZGljYXRvckNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLnNob3codGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQgeyBMT0FESU5HX0lORElDQVRPUl9TVFlMRVMgfSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtY29uc3RhbnRzJztcblxuaW1wb3J0IFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1yYXRlcGF5LXBheW1lbnQtc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5cGFsQ29tbWVyY2VSYXRlcGF5UGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheXBhbENvbW1lcmNlUmF0ZXBheVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgICAgIG5ldyBMb2FkaW5nSW5kaWNhdG9yKHtcbiAgICAgICAgICAgIGNvbnRhaW5lclN0eWxlczogeyAuLi5MT0FESU5HX0lORElDQVRPUl9TVFlMRVMsIHBvc2l0aW9uOiAnZml4ZWQnIH0sXG4gICAgICAgIH0pLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGdhdGV3YXk6ICdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcycsIGlkOiAncmF0ZXBheScgfSxcbl0pO1xuIiwiaW1wb3J0IHsgb21pdEJ5IH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgRmFzdGxhbmVTdHlsZXNTZXR0aW5ncywgUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24gfSBmcm9tICcuLi9pbmRleCc7XG5cbmZ1bmN0aW9uIGlzSW52YWxpZFN0eWxlT3B0aW9uKHN0eWxlT3B0aW9uOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzdHlsZU9wdGlvbiAhPT0gJ3N0cmluZyc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgIHN0eWxlU2V0dGluZ3M/OiBGYXN0bGFuZVN0eWxlc1NldHRpbmdzLFxuICAgIHVpU3R5bGVzPzogUGF5UGFsRmFzdGxhbmVTdHlsZXNPcHRpb24sXG4pIHtcbiAgICBpZiAoIXVpU3R5bGVzICYmICFzdHlsZVNldHRpbmdzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuVXBGYXN0bGFuZVN0eWxlcyhtZXJnZUZhc3RsYW5lU3R5bGVzKHN0eWxlU2V0dGluZ3MsIHVpU3R5bGVzKSk7XG59XG5cbmZ1bmN0aW9uIG1lcmdlRmFzdGxhbmVTdHlsZXMoXG4gICAgc3R5bGVTZXR0aW5ncz86IEZhc3RsYW5lU3R5bGVzU2V0dGluZ3MsXG4gICAgdWlTdHlsZXM/OiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbixcbik6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb290OiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JQcmltYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LnJvb3Q/LmJhY2tncm91bmRDb2xvclByaW1hcnksXG4gICAgICAgICAgICBlcnJvckNvbG9yOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0Vycm9yQ29sb3IgfHwgdWlTdHlsZXM/LnJvb3Q/LmVycm9yQ29sb3IsXG4gICAgICAgICAgICBmb250RmFtaWx5OiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVJvb3RTZXR0aW5nc0ZvbnRGYW1pbHkgfHwgdWlTdHlsZXM/LnJvb3Q/LmZvbnRGYW1pbHksXG4gICAgICAgICAgICBmb250U2l6ZUJhc2U6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZSB8fCB1aVN0eWxlcz8ucm9vdD8uZm9udFNpemVCYXNlLFxuICAgICAgICAgICAgcGFkZGluZzogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVSb290U2V0dGluZ3NQYWRkaW5nIHx8IHVpU3R5bGVzPy5yb290Py5wYWRkaW5nLFxuICAgICAgICAgICAgcHJpbWFyeUNvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lUm9vdFNldHRpbmdzUHJpbWFyeUNvbG9yIHx8IHVpU3R5bGVzPy5yb290Py5wcmltYXJ5Q29sb3IsXG4gICAgICAgIH0sXG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzIHx8IHVpU3R5bGVzPy5pbnB1dD8uYm9yZGVyUmFkaXVzLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3IgfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJDb2xvcixcbiAgICAgICAgICAgIGZvY3VzQm9yZGVyQ29sb3I6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlIHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LmlucHV0Py5mb2N1c0JvcmRlckNvbG9yLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lSW5wdXRTZXR0aW5nc0JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgIHVpU3R5bGVzPy5pbnB1dD8uYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgYm9yZGVyV2lkdGg6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyV2lkdGggfHwgdWlTdHlsZXM/LmlucHV0Py5ib3JkZXJXaWR0aCxcbiAgICAgICAgICAgIHRleHRDb2xvckJhc2U6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVJbnB1dFNldHRpbmdzVGV4dENvbG9yQmFzZSB8fCB1aVN0eWxlcz8uaW5wdXQ/LnRleHRDb2xvckJhc2UsXG4gICAgICAgIH0sXG4gICAgICAgIHRvZ2dsZToge1xuICAgICAgICAgICAgY29sb3JQcmltYXJ5OlxuICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVG9nZ2xlU2V0dGluZ3NDb2xvclByaW1hcnkgfHwgdWlTdHlsZXM/LnRvZ2dsZT8uY29sb3JQcmltYXJ5LFxuICAgICAgICAgICAgY29sb3JTZWNvbmRhcnk6XG4gICAgICAgICAgICAgICAgc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5IHx8XG4gICAgICAgICAgICAgICAgdWlTdHlsZXM/LnRvZ2dsZT8uY29sb3JTZWNvbmRhcnksXG4gICAgICAgIH0sXG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogc3R5bGVTZXR0aW5ncz8uZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3IgfHwgdWlTdHlsZXM/LnRleHQ/LmJvZHk/LmNvbG9yLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uYm9keT8uZm9udFNpemUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FwdGlvbjoge1xuICAgICAgICAgICAgICAgIGNvbG9yOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZVRleHRDYXB0aW9uU2V0dGluZ3NDb2xvciB8fFxuICAgICAgICAgICAgICAgICAgICB1aVN0eWxlcz8udGV4dD8uY2FwdGlvbj8uY29sb3IsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2V0dGluZ3M/LmZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0ZvbnRTaXplIHx8XG4gICAgICAgICAgICAgICAgICAgIHVpU3R5bGVzPy50ZXh0Py5jYXB0aW9uPy5mb250U2l6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGJyYW5kaW5nOiBzdHlsZVNldHRpbmdzPy5mYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MgfHwgdWlTdHlsZXM/LmJyYW5kaW5nLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNsZWFuVXBGYXN0bGFuZVN0eWxlcyhzdHlsZXM6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uKSB7XG4gICAgY29uc3QgZmFzdGxhbmVTdHlsZXM6IFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uID0ge307XG5cbiAgICBjb25zdCByb290ID0gb21pdEJ5KHN0eWxlcy5yb290LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgaW5wdXQgPSBvbWl0Qnkoc3R5bGVzLmlucHV0LCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgdG9nZ2xlID0gb21pdEJ5KHN0eWxlcy50b2dnbGUsIGlzSW52YWxpZFN0eWxlT3B0aW9uKTtcbiAgICBjb25zdCB0ZXh0Qm9keSA9IG9taXRCeShzdHlsZXMudGV4dD8uYm9keSwgaXNJbnZhbGlkU3R5bGVPcHRpb24pO1xuICAgIGNvbnN0IHRleHRDYXB0aW9uID0gb21pdEJ5KHN0eWxlcy50ZXh0Py5jYXB0aW9uLCBpc0ludmFsaWRTdHlsZU9wdGlvbik7XG4gICAgY29uc3QgYnJhbmRpbmcgPSBzdHlsZXMuYnJhbmRpbmc7XG5cbiAgICBpZiAoT2JqZWN0LmtleXMocm9vdCkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnJvb3QgPSByb290O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dCkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLmlucHV0ID0gaW5wdXQ7XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKHRvZ2dsZSkubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXModGV4dEJvZHkpLmxlbmd0aCkge1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0ID0ge307XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQuYm9keSA9IHRleHRCb2R5O1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyh0ZXh0Q2FwdGlvbikubGVuZ3RoKSB7XG4gICAgICAgIGZhc3RsYW5lU3R5bGVzLnRleHQgPSB7XG4gICAgICAgICAgICAuLi5mYXN0bGFuZVN0eWxlcy50ZXh0LFxuICAgICAgICB9O1xuICAgICAgICBmYXN0bGFuZVN0eWxlcy50ZXh0LmNhcHRpb24gPSB0ZXh0Q2FwdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoYnJhbmRpbmcpIHtcbiAgICAgICAgZmFzdGxhbmVTdHlsZXMuYnJhbmRpbmcgPSBicmFuZGluZztcbiAgICB9XG5cbiAgICByZXR1cm4gZmFzdGxhbmVTdHlsZXM7XG59XG4iLCJpbXBvcnQge1xuICAgIFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuICAgIFBheVBhbENvbm5lY3RDdXN0b21lcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbi8vIFRPRE86IHVwZGF0ZSBQYXlQYWxDb25uZWN0Q3VzdG9tZXIgd2l0aCBQYXlQYWxGYXN0bGFuZUN1c3RvbWVyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1BheVBhbEZhc3RsYW5lQ3VzdG9tZXIoXG4gICAgY3VzdG9tZXI/OiBQYXltZW50UHJvdmlkZXJDdXN0b21lcixcbik6IGN1c3RvbWVyIGlzIFBheVBhbENvbm5lY3RDdXN0b21lciB7XG4gICAgaWYgKCFjdXN0b21lcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgJ2F1dGhlbnRpY2F0aW9uU3RhdGUnIGluIGN1c3RvbWVyIHx8ICdhZGRyZXNzZXMnIGluIGN1c3RvbWVyIHx8ICdpbnN0cnVtZW50cycgaW4gY3VzdG9tZXJcbiAgICApO1xufVxuIiwiaW1wb3J0IHtcbiAgICBDYXJkSW5zdHJ1bWVudCxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc0hvc3RlZEluc3RydW1lbnRMaWtlLFxuICAgIGlzVmF1bHRlZEluc3RydW1lbnQsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUGF5bWVudFJlcXVlc3RCb2R5LFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZEludmFsaWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFZhdWx0ZWRJbnN0cnVtZW50LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgZ2V0RmFzdGxhbmVTdHlsZXMsXG4gICAgaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyLFxuICAgIGlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lQ2FyZENvbXBvbmVudE1ldGhvZHMsXG4gICAgUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50T3B0aW9ucyxcbiAgICBQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkLFxuICAgIFBheVBhbEZhc3RsYW5lU2RrLFxuICAgIFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbFNka1NjcmlwdExvYWRlcixcbiAgICBURFNlY3VyZUF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgVERTZWN1cmVWZXJpZmljYXRpb25NZXRob2QsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLXV0aWxzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuaW1wb3J0IHsgTGlhYmlsaXR5U2hpZnRFbnVtIH0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtcGF5bWVudC1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlwYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHBheXBhbENvbXBvbmVudE1ldGhvZHM/OiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRNZXRob2RzO1xuICAgIHByaXZhdGUgcGF5cGFsRmFzdGxhbmVTZGs/OiBQYXlQYWxGYXN0bGFuZVNkaztcbiAgICBwcml2YXRlIHRocmVlRFNWZXJpZmljYXRpb25NZXRob2Q/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBwYXlwYWxjb21tZXJjZWZhc3RsYW5lPzogUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucztcbiAgICBwcml2YXRlIG9yZGVySWQ/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBtZXRob2RJZD86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsQ29tbWVyY2VSZXF1ZXN0U2VuZGVyOiBQYXlQYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsU2RrU2NyaXB0TG9hZGVyOiBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgcGF5cGFsRmFzdGxhbmVVdGlsczogUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICApIHt9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIERlZmF1bHQgbWV0aG9kc1xuICAgICAqXG4gICAgICogKi9cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VmYXN0bGFuZSB9ID0gb3B0aW9ucztcblxuICAgICAgICB0aGlzLm1ldGhvZElkID0gbWV0aG9kSWQ7XG5cbiAgICAgICAgdGhpcy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lID0gcGF5cGFsY29tbWVyY2VmYXN0bGFuZTtcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlZmFzdGxhbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uSW5pdCB8fCB0eXBlb2YgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uSW5pdFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFwYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlIHx8XG4gICAgICAgICAgICB0eXBlb2YgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkNoYW5nZSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWZhc3RsYW5lLm9uQ2hhbmdlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGUsIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCB9ID1cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIHRoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8udGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZDtcblxuICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxTZGtTY3JpcHRMb2FkZXIuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxGYXN0bGFuZVN0eWxpbmcgPSBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWRcbiAgICAgICAgICAgID8gcGF5bWVudE1ldGhvZD8uaW5pdGlhbGl6YXRpb25EYXRhPy5mYXN0bGFuZVN0eWxlc1xuICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICBjb25zdCBmYXN0bGFuZVN0eWxlcyA9IGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTdHlsaW5nLFxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VmYXN0bGFuZT8uc3R5bGVzLFxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lU2RrLFxuICAgICAgICAgICAgISFpc0RldmVsb3Blck1vZGVBcHBsaWNhYmxlLFxuICAgICAgICAgICAgZmFzdGxhbmVTdHlsZXMsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93KCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50KCk7XG5cbiAgICAgICAgcGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkluaXQoKGNvbnRhaW5lcjogc3RyaW5nKSA9PlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQYXlQYWxQYXltZW50Q29tcG9uZW50KGNvbnRhaW5lciksXG4gICAgICAgICk7XG4gICAgICAgIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25DaGFuZ2UoKCkgPT4gdGhpcy5oYW5kbGVQYXlQYWxTdG9yZWRJbnN0cnVtZW50Q2hhbmdlKG1ldGhvZElkKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZShvcmRlclJlcXVlc3Q6IE9yZGVyUmVxdWVzdEJvZHksIG9wdGlvbnM/OiBQYXltZW50UmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXltZW50LCAuLi5vcmRlciB9ID0gb3JkZXJSZXF1ZXN0O1xuXG4gICAgICAgIGlmICghcGF5bWVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcihbJ3BheW1lbnQnXSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhLCBtZXRob2RJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBjb25zdCBpc1ZhdWx0ZWRGbG93ID0gcGF5bWVudERhdGEgJiYgaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gaXNWYXVsdGVkRmxvd1xuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5wcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLnByZXBhcmVQYXltZW50UGF5bG9hZChtZXRob2RJZCwgcGF5bWVudERhdGEpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPihcbiAgICAgICAgICAgICAgICBwYXltZW50UGF5bG9hZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvcihlcnJvcikgJiZcbiAgICAgICAgICAgICAgICBlcnJvci5yZXNwb25zZS5ib2R5Lm5hbWUgPT09ICdJTlZBTElEX1JFUVVFU1QnXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdEVycm9yID0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGlvbktleTogJ3BheW1lbnQuZXJyb3JzLmludmFsaWRfcmVxdWVzdF9lcnJvcicsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoaW52YWxpZFJlcXVlc3RFcnJvcik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSAhPT0gJ0Zhc3RsYW5lRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQXV0aGVudGljYXRpb24gZmxvdyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIHNob3VsZFJ1bkF1dGhlbnRpY2F0aW9uRmxvdygpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoKTtcbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVDdXN0b21lciA9IGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcilcbiAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgIDoge307XG5cbiAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVTZXNzaW9uSWQgPSB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMuZ2V0U3RvcmFnZVNlc3Npb25JZCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFjdXN0b21lci5pc0d1ZXN0IHx8XG4gICAgICAgICAgICBwYXlwYWxGYXN0bGFuZUN1c3RvbWVyPy5hdXRoZW50aWNhdGlvblN0YXRlID09PVxuICAgICAgICAgICAgICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25TdGF0ZS5DQU5DRUxFRFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhcGF5cGFsRmFzdGxhbmVDdXN0b21lcj8uYXV0aGVudGljYXRpb25TdGF0ZSAmJiBwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCA9PT0gY2FydC5pZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tZXJFbWFpbCA9IGN1c3RvbWVyPy5lbWFpbCB8fCBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5sb29rdXBDdXN0b21lck9yVGhyb3coXG4gICAgICAgICAgICAgICAgY3VzdG9tZXJFbWFpbCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVzdWx0ID1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMudHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3coY3VzdG9tZXJDb250ZXh0SWQpO1xuXG4gICAgICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIGFkZHJlc3NlcywgaW5zdHJ1bWVudHMgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEoXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIoe1xuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICAgICAgYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgIGluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRpb25GbG93Q2FuY2VsZWQgPVxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0LmF1dGhlbnRpY2F0aW9uU3RhdGUgPT09XG4gICAgICAgICAgICAgICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLkNBTkNFTEVEO1xuXG4gICAgICAgICAgICBpZiAoaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5yZW1vdmVTdG9yYWdlU2Vzc2lvbklkKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy51cGRhdGVTdG9yYWdlU2Vzc2lvbklkKGNhcnQuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogUGF5UGFsIEZhc3RsYW5lIENhcmQgQ29tcG9uZW50IHJlbmRlcmluZyBtZXRob2RcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVBheVBhbFBheW1lbnRDb21wb25lbnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBob25lID0gYmlsbGluZ0FkZHJlc3MucGhvbmU7XG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lID0gdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLmdldFBheVBhbEZhc3RsYW5lT3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRDb21wb25lbnRPcHRpb25zOiBQYXlQYWxGYXN0bGFuZUNhcmRDb21wb25lbnRPcHRpb25zID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgY2FyZGhvbGRlck5hbWU6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJlZmlsbDogZnVsbE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi4ocGhvbmUgJiYge1xuICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmlsbDogcGhvbmUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucGF5cGFsQ29tcG9uZW50TWV0aG9kcyA9IGF3YWl0IHBheXBhbEZhc3RsYW5lLkZhc3RsYW5lQ2FyZENvbXBvbmVudChcbiAgICAgICAgICAgIGNhcmRDb21wb25lbnRPcHRpb25zLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudChjb250YWluZXI/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcGF5cGFsQ29tcG9uZW50TWV0aG9kcyA9IHRoaXMuZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTtcblxuICAgICAgICBpZiAoIWNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcmVuZGVyIGNhcmQgY29tcG9uZW50IGJlY2F1c2UgXCJjb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBwYXlwYWxDb21wb25lbnRNZXRob2RzLnJlbmRlcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UGF5UGFsQ29tcG9uZW50TWV0aG9kc09yVGhyb3coKTogUGF5UGFsRmFzdGxhbmVDYXJkQ29tcG9uZW50TWV0aG9kcyB7XG4gICAgICAgIGlmICghdGhpcy5wYXlwYWxDb21wb25lbnRNZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBheXBhbENvbXBvbmVudE1ldGhvZHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXltZW50IFBheWxvYWQgcHJlcGFyYXRpb24gbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5bWVudERhdGE6IFZhdWx0ZWRJbnN0cnVtZW50LFxuICAgICk6IFByb21pc2U8UGF5bWVudDxQYXlQYWxGYXN0bGFuZVBheW1lbnRGb3JtYXR0ZWRQYXlsb2FkPj4ge1xuICAgICAgICBjb25zdCB7IGluc3RydW1lbnRJZCB9ID0gcGF5bWVudERhdGE7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgaXMzRFNFbmFibGVkID0gcGF5bWVudE1ldGhvZC5jb25maWcuaXMzZHNFbmFibGVkO1xuXG4gICAgICAgIGNvbnN0IG5vbmNlID0gaXMzRFNFbmFibGVkID8gYXdhaXQgdGhpcy5nZXQzRFNOb25jZShpbnN0cnVtZW50SWQpIDogaW5zdHJ1bWVudElkO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIobm9uY2UpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxfZmFzdGxhbmVfdG9rZW46IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyX2lkOiB0aGlzLm9yZGVySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogbm9uY2UsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlUGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnREYXRhOiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keVsncGF5bWVudERhdGEnXSxcbiAgICApOiBQcm9taXNlPFBheW1lbnQ8UGF5UGFsRmFzdGxhbmVQYXltZW50Rm9ybWF0dGVkUGF5bG9hZD4+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBzdGF0ZS5nZXRCaWxsaW5nQWRkcmVzc09yVGhyb3coKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIGNvbnN0IGZ1bGxOYW1lID0gYCR7YmlsbGluZ0FkZHJlc3MuZmlyc3ROYW1lfSAke2JpbGxpbmdBZGRyZXNzLmxhc3ROYW1lfWAudHJpbSgpO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0UGF5bWVudFRva2VuIH0gPSB0aGlzLmdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93KCk7XG5cbiAgICAgICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgZ2V0UGF5bWVudFRva2VuKHtcbiAgICAgICAgICAgIG5hbWU6IHsgZnVsbE5hbWUgfSxcbiAgICAgICAgICAgIGJpbGxpbmdBZGRyZXNzOiB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMubWFwQmNUb1BheVBhbEFkZHJlc3MoYmlsbGluZ0FkZHJlc3MpLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBpczNEU0VuYWJsZWQgPSBwYXltZW50TWV0aG9kLmNvbmZpZy5pczNkc0VuYWJsZWQ7XG5cbiAgICAgICAgY29uc3Qgbm9uY2UgPSBpczNEU0VuYWJsZWQgPyBhd2FpdCB0aGlzLmdldDNEU05vbmNlKGlkKSA6IGlkO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlT3JkZXIobm9uY2UpO1xuXG4gICAgICAgIGNvbnN0IHsgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSwgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlIH0gPVxuICAgICAgICAgICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShwYXltZW50RGF0YSkgPyBwYXltZW50RGF0YSA6IHt9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgLi4ucGF5bWVudERhdGEsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgIHBheXBhbF9mYXN0bGFuZV90b2tlbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJfaWQ6IHRoaXMub3JkZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiBub25jZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGNyZWF0ZU9yZGVyKGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcblxuICAgICAgICBpZiAodGhpcy5tZXRob2RJZCkge1xuICAgICAgICAgICAgY29uc3QgeyBvcmRlcklkIH0gPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlUmVxdWVzdFNlbmRlci5jcmVhdGVPcmRlcih0aGlzLm1ldGhvZElkLCB7XG4gICAgICAgICAgICAgICAgY2FydElkLFxuICAgICAgICAgICAgICAgIGZhc3RsYW5lVG9rZW46IGlkLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMub3JkZXJJZCA9IG9yZGVySWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIDNEU2VjdXJlIG1ldGhvZHNcbiAgICAgKlxuICAgICAqICovXG4gICAgcHJpdmF0ZSBhc3luYyBnZXQzRFNOb25jZShub25jZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydCA9IHN0YXRlLmdldENhcnRPclRocm93KCk7XG4gICAgICAgIGNvbnN0IG9yZGVyID0gc3RhdGUuZ2V0T3JkZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGNoZWNrb3V0VXJsID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkubGlua3MuY2hlY2tvdXRMaW5rO1xuXG4gICAgICAgIGNvbnN0IHRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50ID0gdGhpcy5wYXlwYWxGYXN0bGFuZVNkaz8uVGhyZWVEb21haW5TZWN1cmVDbGllbnQ7XG5cbiAgICAgICAgaWYgKCF0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aHJlZURvbWFpblNlY3VyZVBhcmFtZXRlcnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IG9yZGVyLm9yZGVyQW1vdW50LnRvRml4ZWQoMiksXG4gICAgICAgICAgICBjdXJyZW5jeTogY2FydC5jdXJyZW5jeS5jb2RlLFxuICAgICAgICAgICAgbm9uY2UsXG4gICAgICAgICAgICB0aHJlZURTUmVxdWVzdGVkOiB0aGlzLnRocmVlRFNWZXJpZmljYXRpb25NZXRob2QgPT09IFREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kLkFsd2F5cyxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uQ29udGV4dDoge1xuICAgICAgICAgICAgICAgIGV4cGVyaWVuY2VfY29udGV4dDoge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbGU6ICdlbi1VUycsXG4gICAgICAgICAgICAgICAgICAgIHJldHVybl91cmw6IGNoZWNrb3V0VXJsLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxfdXJsOiBjaGVja291dFVybCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGUgPSBhd2FpdCB0aHJlZURvbWFpblNlY3VyZUNvbXBvbmVudC5pc0VsaWdpYmxlKFxuICAgICAgICAgICAgdGhyZWVEb21haW5TZWN1cmVQYXJhbWV0ZXJzLFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudGhyZWVEU1ZlcmlmaWNhdGlvbk1ldGhvZCA9PT0gVERTZWN1cmVWZXJpZmljYXRpb25NZXRob2QuQWx3YXlzICYmXG4gICAgICAgICAgICAhaXNUaHJlZURvbWFpblNlY3VyZUVsaWdpYmxlXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBsaWFiaWxpdHlTaGlmdCxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblN0YXRlLFxuICAgICAgICAgICAgICAgIG5vbmNlOiB0aHJlZURTTm9uY2UsXG4gICAgICAgICAgICB9ID0gYXdhaXQgdGhyZWVEb21haW5TZWN1cmVDb21wb25lbnQuc2hvdygpO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgbGlhYmlsaXR5U2hpZnQgPT09IExpYWJpbGl0eVNoaWZ0RW51bS5ObyB8fFxuICAgICAgICAgICAgICAgIGxpYWJpbGl0eVNoaWZ0ID09PSBMaWFiaWxpdHlTaGlmdEVudW0uVW5rbm93biB8fFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZS5FcnJvcmVkIHx8XG4gICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25TdGF0ZSA9PT0gVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlLkNhbmNlbGxlZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RJbnZhbGlkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUgPT09IFREU2VjdXJlQXV0aGVudGljYXRpb25TdGF0ZS5TdWNjZWVkZWQgJiZcbiAgICAgICAgICAgICAgICBbTGlhYmlsaXR5U2hpZnRFbnVtLlllcywgTGlhYmlsaXR5U2hpZnRFbnVtLlBvc3NpYmxlXS5pbmNsdWRlcyhsaWFiaWxpdHlTaGlmdClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aHJlZURTTm9uY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9uY2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgRmFzdGxhbmUgaW5zdHJ1bWVudCBjaGFuZ2VcbiAgICAgKlxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlUGF5UGFsU3RvcmVkSW5zdHJ1bWVudENoYW5nZShcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPENhcmRJbnN0cnVtZW50IHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGNvbnN0IHBheXBhbEF4b1NkayA9IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5nZXRQYXlQYWxGYXN0bGFuZU9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IHNlbGVjdGlvbkNoYW5nZWQsIHNlbGVjdGVkQ2FyZCB9ID0gYXdhaXQgcGF5cGFsQXhvU2RrLnByb2ZpbGUuc2hvd0NhcmRTZWxlY3RvcigpO1xuXG4gICAgICAgIGlmIChzZWxlY3Rpb25DaGFuZ2VkKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIgPSBzdGF0ZS5nZXRQYXltZW50UHJvdmlkZXJDdXN0b21lcigpO1xuICAgICAgICAgICAgY29uc3QgcGF5cGFsRmFzdGxhbmVDdXN0b21lciA9IGlzUGF5UGFsRmFzdGxhbmVDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcilcbiAgICAgICAgICAgICAgICA/IHBheW1lbnRQcm92aWRlckN1c3RvbWVyXG4gICAgICAgICAgICAgICAgOiB7fTtcblxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbnN0cnVtZW50ID0gdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLm1hcFBheVBhbFRvQmNJbnN0cnVtZW50KFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ2FyZCxcbiAgICAgICAgICAgIClbMF07XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVQYXltZW50UHJvdmlkZXJDdXN0b21lcih7XG4gICAgICAgICAgICAgICAgLi4ucGF5cGFsRmFzdGxhbmVDdXN0b21lcixcbiAgICAgICAgICAgICAgICBpbnN0cnVtZW50czogW3NlbGVjdGVkSW5zdHJ1bWVudF0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSW5zdHJ1bWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bik6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmU/Lm9uRXJyb3IgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBheXBhbGNvbW1lcmNlZmFzdGxhbmUub25FcnJvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucGF5cGFsY29tbWVyY2VmYXN0bGFuZS5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3Ige1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgcmVzcG9uc2U6IHtcbiAgICAgICAgYm9keToge1xuICAgICAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzUGF5cGFsRmFzdGxhbmVSZXF1ZXN0RXJyb3IoXG4gICAgZXJyb3I6IHVua25vd24sXG4pOiBlcnJvciBpcyBQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvciB7XG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICAnbWVzc2FnZScgaW4gZXJyb3IgJiZcbiAgICAgICAgJ3Jlc3BvbnNlJyBpbiBlcnJvciAmJlxuICAgICAgICAnYm9keScgaW4gKGVycm9yIGFzIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yKS5yZXNwb25zZSAmJlxuICAgICAgICAnbmFtZScgaW4gKGVycm9yIGFzIFBheXBhbEZhc3RsYW5lUmVxdWVzdEVycm9yKS5yZXNwb25zZS5ib2R5XG4gICAgKTtcbn1cbiIsImltcG9ydCB7IGNyZWF0ZVJlcXVlc3RTZW5kZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgY3JlYXRlUGF5UGFsRmFzdGxhbmVVdGlscyxcbiAgICBjcmVhdGVQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5cGFsLXV0aWxzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1mYXN0bGFuZS1wYXltZW50LXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUZhc3RsYW5lUGF5bWVudFN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+IHtcbiAgICBjb25zdCB7IGdldEhvc3QgfSA9IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBuZXcgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlcihjcmVhdGVSZXF1ZXN0U2VuZGVyKHsgaG9zdDogZ2V0SG9zdCgpIH0pKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgICAgIGNyZWF0ZVBheVBhbEZhc3RsYW5lVXRpbHMoKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVQYXltZW50U3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VhY2NlbGVyYXRlZGNoZWNrb3V0JyB9LCAvLyBQYXlQYWwgRmFzdGxhbmUgcmVsYXRlcyB0byAncGF5cGFsY29tbWVyY2VhY2NlbGVyYXRlZGNoZWNrb3V0JyBtZXRob2QgaWRcbl0pO1xuIiwiaW1wb3J0IHsgbm9vcCB9IGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLXR5cGVzJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQ3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgb25FcnJvciA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZSwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZS5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZS5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF5cGFsY29tbWVyY2Uub25DbGljayAmJiB0eXBlb2YgcGF5cGFsY29tbWVyY2Uub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvciA9IHBheXBhbGNvbW1lcmNlLm9uRXJyb3IgfHwgbm9vcDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlOiBQYXlQYWxDb21tZXJjZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrLCBvbkNvbXBsZXRlIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBwYXltZW50QnV0dG9uU3R5bGVzLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgY29uc3QgeyBjaGVja291dFRvcEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudEJ1dHRvblN0eWxlcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogKCkgPT4gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5jcmVhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKCFpc0FwcFN3aXRjaEVuYWJsZWQgJiYge1xuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgICAgIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlOiAoZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TaGlwcGluZ09wdGlvbnNDaGFuZ2UoZGF0YSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKGRhdGE6IEFwcHJvdmVDYWxsYmFja1BheWxvYWQsIGFjdGlvbnM6IEFwcHJvdmVDYWxsYmFja0FjdGlvbnMpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5vbkhvc3RlZENoZWNrb3V0QXBwcm92ZShkYXRhLCBhY3Rpb25zLCBtZXRob2RJZCwgb25Db21wbGV0ZSksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlBBWVBBTCxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgIC4uLmNoZWNrb3V0VG9wQnV0dG9uU3R5bGVzLFxuICAgICAgICAgICAgICAgIGhlaWdodDogRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b24gPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5oYXNSZXR1cm5lZD8uKCkgJiYgdGhpcy5pc1BheXBhbENvbW1lcmNlQXBwU3dpdGNoRW5hYmxlZChtZXRob2RJZCkpIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVzdW1lPy4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBleGNlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNBcHBTd2l0Y2hFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsImNvbnN0IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCA9IDQwO1xuXG5leHBvcnQgZGVmYXVsdCBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQ7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSBmcm9tICcuLi9jcmVhdGUtcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWN1c3RvbWVyLXN0cmF0ZWd5JztcblxuY29uc3QgY3JlYXRlUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBjcmVhdGVQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICApO1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlUGF5UGFsQ29tbWVyY2VDdXN0b21lclN0cmF0ZWd5LCBbeyBpZDogJ3BheXBhbGNvbW1lcmNlJyB9XSk7XG4iLCJpbXBvcnQgeyBub29wIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lckNyZWRlbnRpYWxzLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFJlcXVlc3RPcHRpb25zLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtY3JlZGl0LWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSBpbXBsZW1lbnRzIEN1c3RvbWVyU3RyYXRlZ3kge1xuICAgIHByaXZhdGUgb25FcnJvciA9IG5vb3A7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBwYXlwYWxjb21tZXJjZWNyZWRpdCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLm1ldGhvZElkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWNyZWRpdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFwYXlwYWxjb21tZXJjZWNyZWRpdC5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWNyZWRpdC5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF5cGFsY29tbWVyY2VjcmVkaXQub25DbGljayAmJiB0eXBlb2YgcGF5cGFsY29tbWVyY2VjcmVkaXQub25DbGljayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0Lm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub25FcnJvciA9IHBheXBhbGNvbW1lcmNlY3JlZGl0Lm9uRXJyb3IgfHwgbm9vcDtcblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QobWV0aG9kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5sb2FkUGF5UGFsU2RrKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheXBhbFNkayB8fCAhcGF5cGFsU2RrLkJ1dHRvbnMgfHwgdHlwZW9mIHBheXBhbFNkay5CdXR0b25zICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdbQkMgUGF5UGFsXTogUGF5UGFsIEJ1dHRvbiBjb3VsZCBub3QgYmUgcmVuZGVyZWQsIGR1ZSB0byBpc3N1ZXMgd2l0aCBsb2FkaW5nIFBheVBhbCBTREsnLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24obWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlY3JlZGl0KTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChvcHRpb25zPzogRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgb3B0aW9ucz8uY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjaz8uKCk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxDb21tZXJjZUNyZWRpdDogUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lciwgb25Db21wbGV0ZSwgb25DbGljayB9ID0gcGF5cGFsQ29tbWVyY2VDcmVkaXQ7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRQYXlQYWxTZGtPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPVxuICAgICAgICAgICAgc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcbiAgICAgICAgY29uc3QgeyBpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCwgcGF5bWVudEJ1dHRvblN0eWxlcywgaXNBcHBTd2l0Y2hFbmFibGVkIH0gPVxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlY3JlZGl0JyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnRva2VuaXplUGF5bWVudChtZXRob2RJZCwgb3JkZXJJRCksXG4gICAgICAgICAgICAuLi4ob25DbGljayAmJiB7IG9uQ2xpY2s6ICgpID0+IG9uQ2xpY2soKSB9KSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2UsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IERlZmF1bHRDaGVja291dEJ1dHRvbkhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIC4uLihpc0hvc3RlZENoZWNrb3V0RW5hYmxlZCAmJiBob3N0ZWRDaGVja291dENhbGxiYWNrcyksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBheXBhbEJ1dHRvbi5pc0VsaWdpYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF5cGFsQnV0dG9uLnJlbmRlcihgIyR7Y29udGFpbmVyfWApO1xuICAgICAgICAgICAgICAgICAgICBoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhcnQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuXG4gICAgICAgICAgICBpZiAoY2FydC5saW5lSXRlbXMucGh5c2ljYWxJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKHt9LCB7IHBhcmFtczogeyBtZXRob2RJZCB9IH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KG1ldGhvZElkLCBkYXRhLm9yZGVySUQpO1xuXG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSAmJiB0eXBlb2Ygb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRBZGRyZXNzKHtcbiAgICAgICAgICAgIGNpdHk6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNpdHksXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY291bnRyeUNvZGUsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5wb3N0YWxDb2RlLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3Muc3RhdGUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmZvOiB3ZSB1c2UgdGhlIHNhbWUgYWRkcmVzcyB0byBmaWxsIGJpbGxpbmcgYW5kIHNoaXBwaW5nIGFkZHJlc3NlcyB0byBoYXZlIHZhbGlkIHF1b3RhIG9uIEJFIGZvciBvcmRlciB1cGRhdGluZyBwcm9jZXNzXG4gICAgICAgICAgICAvLyBvbiB0aGlzIHN0YWdlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHZhbGlkIGN1c3RvbWVyJ3MgYWRkcmVzcyBleGNlcHQgc2hpcHBpbmcgZGF0YVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGFkZHJlc3MpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhhZGRyZXNzKTtcblxuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdygpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2VsZWN0U2hpcHBpbmdPcHRpb24oc2hpcHBpbmdPcHRpb24uaWQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyhcbiAgICAgICAgICAgIGRhdGEuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbi5pZCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKHNoaXBwaW5nT3B0aW9uLmlkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93bikge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25FcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQ3JlZGl0Q3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEN1c3RvbWVyU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRGVmYXVsdENoZWNrb3V0QnV0dG9uSGVpZ2h0LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMsXG4gICAgUGF5UGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbkRhdGEsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtdmVubW8tY3VzdG9tZXItaW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlOiBQYXlQYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBDdXN0b21lckluaXRpYWxpemVPcHRpb25zICYgV2l0aFBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNldmVubW8sIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2V2ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNldmVubW8uY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2V2ZW5tby5jb250YWluZXJcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGF5cGFsY29tbWVyY2V2ZW5tby5vbkNsaWNrICYmIHR5cGVvZiBwYXlwYWxjb21tZXJjZXZlbm1vLm9uQ2xpY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLm9uQ2xpY2tcIiBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2QpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChtZXRob2RJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQpO1xuXG4gICAgICAgIGlmICghcGF5cGFsU2RrIHx8ICFwYXlwYWxTZGsuQnV0dG9ucyB8fCB0eXBlb2YgcGF5cGFsU2RrLkJ1dHRvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgJ1tCQyBQYXlQYWxdOiBQYXlQYWwgQnV0dG9uIGNvdWxkIG5vdCBiZSByZW5kZXJlZCwgZHVlIHRvIGlzc3VlcyB3aXRoIGxvYWRpbmcgUGF5UGFsIFNESycsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlckJ1dHRvbihtZXRob2RJZCwgcGF5cGFsY29tbWVyY2V2ZW5tbyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2lnbkluKGNyZWRlbnRpYWxzOiBDdXN0b21lckNyZWRlbnRpYWxzLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNpZ25JbkN1c3RvbWVyKGNyZWRlbnRpYWxzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQob3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIG9wdGlvbnM/LmNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2s/LigpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2V2ZW5tbzogUGF5UGFsQ29tbWVyY2VWZW5tb0N1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBvbkNsaWNrIH0gPSBwYXlwYWxjb21tZXJjZXZlbm1vO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID1cbiAgICAgICAgICAgIHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbENvbW1lcmNlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEJ1dHRvblN0eWxlcyB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgIGNvbnN0IHsgY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMgfSA9IHBheW1lbnRCdXR0b25TdHlsZXMgfHwge307XG5cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyT3B0aW9uczogUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZ1bmRpbmdTb3VyY2U6IHBheXBhbFNkay5GVU5ESU5HLlZFTk1PLFxuICAgICAgICAgICAgc3R5bGU6IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZSh7XG4gICAgICAgICAgICAgICAgLi4uY2hlY2tvdXRUb3BCdXR0b25TdHlsZXMsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBEZWZhdWx0Q2hlY2tvdXRCdXR0b25IZWlnaHQsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNldmVubW8nKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgICAgIC4uLihvbkNsaWNrICYmIHsgb25DbGljazogKCkgPT4gb25DbGljaygpIH0pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5OiBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlVmVubW9DdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNldmVubW8nIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ3VzdG9tZXJDcmVkZW50aWFscyxcbiAgICBDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgIEN1c3RvbWVyU3RyYXRlZ3ksXG4gICAgRXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dE9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGdldEZhc3RsYW5lU3R5bGVzLFxuICAgIFBheVBhbEZhc3RsYW5lQXV0aGVudGljYXRpb25SZXN1bHQsXG4gICAgUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlLFxuICAgIFBheVBhbEZhc3RsYW5lU3R5bGVzT3B0aW9uLFxuICAgIFBheVBhbEZhc3RsYW5lVXRpbHMsXG4gICAgUGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFBheVBhbFNka1NjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWZhc3RsYW5lLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxTZGtTY3JpcHRMb2FkZXI6IFBheVBhbFNka1NjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxGYXN0bGFuZVV0aWxzOiBQYXlQYWxGYXN0bGFuZVV0aWxzLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIHBheXBhbGNvbW1lcmNlZmFzdGxhbmUgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgICAgICBjb25zdCBpc1Rlc3RNb2RlRW5hYmxlZCA9ICEhcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGE/LmlzRGV2ZWxvcGVyTW9kZUFwcGxpY2FibGU7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheXBhbEZhc3RsYW5lU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxTZGtTY3JpcHRMb2FkZXIuZ2V0UGF5UGFsRmFzdGxhbmVTZGsoXG4gICAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZCxcbiAgICAgICAgICAgICAgICBjYXJ0LmN1cnJlbmN5LmNvZGUsXG4gICAgICAgICAgICAgICAgY2FydC5pZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5pbml0aWFsaXplUGF5UGFsRmFzdGxhbmUoXG4gICAgICAgICAgICAgICAgcGF5cGFsRmFzdGxhbmVTZGssXG4gICAgICAgICAgICAgICAgaXNUZXN0TW9kZUVuYWJsZWQsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRGYXN0bGFuZVN0eWxlcyhtZXRob2RJZCwgcGF5cGFsY29tbWVyY2VmYXN0bGFuZSksXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGNhdGNoIChfKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbG9nZ2VyIHRvIGJlIGFibGUgdG8gZGVidWcgaXNzdWVzIGlmIHRoZXJlIGFueVxuICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHNpZ25PdXQob3B0aW9ucz86IFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zaWduT3V0Q3VzdG9tZXIob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dChcbiAgICAgICAgb3B0aW9ucz86IEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IGNoZWNrb3V0UGF5bWVudE1ldGhvZEV4ZWN1dGVkLCBjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrLCBtZXRob2RJZCB9ID1cbiAgICAgICAgICAgIG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgaWYgKCFtZXRob2RJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwibWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBcImNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2tcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgYW5kIGl0IG11c3QgYmUgYSBmdW5jdGlvbi4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG5cbiAgICAgICAgaWYgKGN1c3RvbWVyLmlzR3Vlc3QpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjaGVja291dFBheW1lbnRNZXRob2RFeGVjdXRlZCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blBheVBhbEF1dGhlbnRpY2F0aW9uRmxvd09yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGFkZCBsb2dnZXIgdG8gYmUgYWJsZSB0byBkZWJ1ZyBpc3N1ZXMgaWYgdGhlcmUgYW55XG4gICAgICAgICAgICAgICAgLy8gSW5mbzogRG8gbm90IHRocm93IGFueXRoaW5nIGhlcmUgdG8gYXZvaWQgYmxvY2tpbmcgY3VzdG9tZXIgZnJvbSBwYXNzaW5nIGNoZWNrb3V0IGZsb3dcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRpbnVlV2l0aENoZWNrb3V0Q2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEF1dGhlbnRpY2F0aW9uIGZsb3cgbWV0aG9kc1xuICAgICAqXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBydW5QYXlQYWxBdXRoZW50aWNhdGlvbkZsb3dPclRocm93KG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY2FydElkID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKS5pZDtcbiAgICAgICAgY29uc3QgY3VzdG9tZXIgPSBzdGF0ZS5nZXRDdXN0b21lcigpO1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHN0YXRlLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGN1c3RvbWVyRW1haWwgPSBjdXN0b21lcj8uZW1haWwgfHwgYmlsbGluZ0FkZHJlc3M/LmVtYWlsIHx8ICcnO1xuXG4gICAgICAgIGNvbnN0IHsgY3VzdG9tZXJDb250ZXh0SWQgfSA9IGF3YWl0IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy5sb29rdXBDdXN0b21lck9yVGhyb3coXG4gICAgICAgICAgICBjdXN0b21lckVtYWlsLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IGF1dGhlbnRpY2F0aW9uUmVzdWx0ID1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsRmFzdGxhbmVVdGlscy50cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyhjdXN0b21lckNvbnRleHRJZCk7XG5cbiAgICAgICAgY29uc3QgaXNBdXRoZW50aWNhdGlvbkZsb3dDYW5jZWxlZCA9XG4gICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdC5hdXRoZW50aWNhdGlvblN0YXRlID09PSBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uU3RhdGUuQ0FOQ0VMRUQ7XG5cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVDdXN0b21lckRhdGFTdGF0ZShtZXRob2RJZCwgYXV0aGVudGljYXRpb25SZXN1bHQpO1xuXG4gICAgICAgIGlmIChpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkKSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMucmVtb3ZlU3RvcmFnZVNlc3Npb25JZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxGYXN0bGFuZVV0aWxzLnVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQoY2FydElkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uUmVzdWx0OiBQYXlQYWxGYXN0bGFuZUF1dGhlbnRpY2F0aW9uUmVzdWx0LFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCB7IGF1dGhlbnRpY2F0aW9uU3RhdGUsIGFkZHJlc3NlcywgYmlsbGluZ0FkZHJlc3MsIHNoaXBwaW5nQWRkcmVzcywgaW5zdHJ1bWVudHMgfSA9XG4gICAgICAgICAgICB0aGlzLnBheXBhbEZhc3RsYW5lVXRpbHMubWFwUGF5UGFsRmFzdGxhbmVQcm9maWxlVG9CY0N1c3RvbWVyRGF0YShcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblJlc3VsdCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uU3RhdGUsXG4gICAgICAgICAgICBhZGRyZXNzZXMsXG4gICAgICAgICAgICBpbnN0cnVtZW50cyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNoaXBwaW5nQWRkcmVzcyAmJiBjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICAgICAgdXBkYXRlZFN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICAgICAgY29uc3QgeyBpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCB9ID1cbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnNpZ25tZW50cyA9IHVwZGF0ZWRTdGF0ZS5nZXRDb25zaWdubWVudHMoKSB8fCBbXTtcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGNvbnNpZ25tZW50c1swXT8uYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RTaGlwcGluZ09wdGlvbiA9IGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9uc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMuZmluZChcbiAgICAgICAgICAgICAgICAob3B0aW9uKSA9PiBvcHRpb24uaXNSZWNvbW1lbmRlZCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAocmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbiB8fCBmaXJzdFNoaXBwaW5nT3B0aW9uKSAmJlxuICAgICAgICAgICAgICAgIGlzRmFzdGxhbmVTaGlwcGluZ09wdGlvbkF1dG9TZWxlY3RFbmFibGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbklkID0gcmVjb21tZW5kZWRTaGlwcGluZ09wdGlvbj8uaWQgfHwgZmlyc3RTaGlwcGluZ09wdGlvbi5pZDtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbklkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogRmFzdGxhbmUgc3R5bGluZyBtZXRob2RzXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEZhc3RsYW5lU3R5bGVzKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lOiBQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyB8IHVuZGVmaW5lZCxcbiAgICApOiBQYXlQYWxGYXN0bGFuZVN0eWxlc09wdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxJbml0aWFsaXphdGlvbkRhdGE+KG1ldGhvZElkKTtcblxuICAgICAgICBjb25zdCB7IGZhc3RsYW5lU3R5bGVzLCBpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQgfSA9IHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhIHx8IHt9O1xuXG4gICAgICAgIHJldHVybiBnZXRGYXN0bGFuZVN0eWxlcyhcbiAgICAgICAgICAgIGlzRmFzdGxhbmVTdHlsaW5nRW5hYmxlZCA/IGZhc3RsYW5lU3R5bGVzIDoge30sXG4gICAgICAgICAgICBwYXlwYWxjb21tZXJjZWZhc3RsYW5lPy5zdHlsZXMsXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVQYXlQYWxGYXN0bGFuZVV0aWxzLFxuICAgIGNyZWF0ZVBheVBhbFNka1NjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9wYXlwYWwtY29tbWVyY2UtZmFzdGxhbmUtY3VzdG9tZXItc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUZhc3RsYW5lQ3VzdG9tZXJTdHJhdGVneTogQ3VzdG9tZXJTdHJhdGVneUZhY3Rvcnk8XG4gICAgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VGYXN0bGFuZUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbFNka1NjcmlwdExvYWRlcigpLFxuICAgICAgICBjcmVhdGVQYXlQYWxGYXN0bGFuZVV0aWxzKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWNjZWxlcmF0ZWRjaGVja291dCcgfSwgLy8gdGhpcyBtZXRob2QgaWQgd2lsbCBiZSBwcm92aWRlZCBmb3IgdXNlcnMgZnJvbSB0ZXN0IGdyb3VwXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlY3JlZGl0Y2FyZHMnIH0sIC8vIHRoaXMgbWV0aG9kIGlkIHdpbGwgYmUgcHJvdmlkZWQgZm9yIHVzZXJzIGZyb20gY29udHJvbCBncm91cFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgIEFwcHJvdmVDYWxsYmFja1BheWxvYWQsXG4gICAgUGF5UGFsQ29tbWVyY2VCdXR0b25zT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlLCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gQm9vbGVhbihwYXlwYWxjb21tZXJjZT8uYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlLmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIHBheXBhbGNvbW1lcmNlLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2UuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5mbzogd2UgYXJlIHVzaW5nIHByb3ZpZGVkIGN1cnJlbmN5IGNvZGUgZm9yIGJ1eSBub3cgY2FydCxcbiAgICAgICAgLy8gYmVjYXVzZSBjaGVja291dCBzZXNzaW9uIGlzIG5vdCBhdmFpbGFibGUgYmVmb3JlIGJ1eSBub3cgY2FydCBjcmVhdGlvbixcbiAgICAgICAgLy8gaGVuY2UgYXBwbGljYXRpb24gd2lsbCB0aHJvdyBhbiBlcnJvciBvbiBnZXRDYXJ0T3JUaHJvdyBtZXRob2QgY2FsbFxuICAgICAgICBjb25zdCBjdXJyZW5jeUNvZGUgPSBpc0J1eU5vd0Zsb3dcbiAgICAgICAgICAgID8gcGF5cGFsY29tbWVyY2UuY3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIGN1cnJlbmN5Q29kZSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2UpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQnV0dG9uKFxuICAgICAgICBjb250YWluZXJJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXlwYWxjb21tZXJjZTogUGF5UGFsQ29tbWVyY2VCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uQ29tcGxldGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPSBwYXlwYWxjb21tZXJjZTtcblxuICAgICAgICBjb25zdCBwYXlwYWxTZGsgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuaXNQYXlwYWxDb21tZXJjZUFwcFN3aXRjaEVuYWJsZWQobWV0aG9kSWQpICYmIHtcbiAgICAgICAgICAgICAgICBhcHBTd2l0Y2hXaGVuQXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjcmVhdGVPcmRlcjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXlOb3dDYXJ0ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBwYXlwYWxTZGsuRlVORElORy5QQVlQQUwsXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRWYWxpZEJ1dHRvblN0eWxlKHN0eWxlKSxcbiAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAuLi4oYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMgJiYgYnV5Tm93Rmxvd0NhbGxiYWNrcyksXG4gICAgICAgICAgICAuLi4oaXNIb3N0ZWRDaGVja291dEVuYWJsZWQgJiYgaG9zdGVkQ2hlY2tvdXRDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvbiA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b24uaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmhhc1JldHVybmVkPy4oKSAmJiB0aGlzLmlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkKSkge1xuICAgICAgICAgICAgICAgIHBheXBhbEJ1dHRvbi5yZXN1bWU/LigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnJlbW92ZUVsZW1lbnQoY29udGFpbmVySWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvbkhvc3RlZENoZWNrb3V0QXBwcm92ZShcbiAgICAgICAgZGF0YTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICAgICAgYWN0aW9uczogQXBwcm92ZUNhbGxiYWNrQWN0aW9ucyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgb25Db21wbGV0ZT86ICgpID0+IHZvaWQsXG4gICAgKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGlmICghZGF0YS5vcmRlcklEKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjYXJ0ID0gc3RhdGUuZ2V0Q2FydE9yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgb3JkZXJEZXRhaWxzID0gYXdhaXQgYWN0aW9ucy5vcmRlci5nZXQoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKFxuICAgICAgICAgICAgICAgICAgICBvcmRlckRldGFpbHMsXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcblxuICAgICAgICAgICAgaWYgKGNhcnQubGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdBZGRyZXNzRnJvbU9yZGVyRGV0YWlscyhcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlscyxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3Moc2hpcHBpbmdBZGRyZXNzKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChtZXRob2RJZCwgZGF0YS5vcmRlcklEKTtcblxuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUgJiYgdHlwZW9mIG9uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBGSVhNRTogRG8gd2UgcmVhbGx5IG5lZWQgdG8gcmV0dXJuIHRydWUgaGVyZT9cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ0FkZHJlc3NDaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldEFkZHJlc3Moe1xuICAgICAgICAgICAgY2l0eTogZGF0YS5zaGlwcGluZ0FkZHJlc3MuY2l0eSxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnBvc3RhbENvZGUsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5zdGF0ZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluZm86IHdlIHVzZSB0aGUgc2FtZSBhZGRyZXNzIHRvIGZpbGwgYmlsbGluZyBhbmQgc2hpcHBpbmcgYWRkcmVzc2VzIHRvIGhhdmUgdmFsaWQgcXVvdGEgb24gQkUgZm9yIG9yZGVyIHVwZGF0aW5nIHByb2Nlc3NcbiAgICAgICAgICAgIC8vIG9uIHRoaXMgc3RhZ2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdmFsaWQgY3VzdG9tZXIncyBhZGRyZXNzIGFjY2VwdCBzaGlwcGluZyBkYXRhXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYWRkcmVzcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKGFkZHJlc3MpO1xuXG4gICAgICAgICAgICBjb25zdCBzaGlwcGluZ09wdGlvbiA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdPcHRpb25DaGFuZ2VDYWxsYmFja1BheWxvYWQsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZU9yZGVyKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBQYXlQYWwgQXBwU3dpdGNoIGVuYWJsaW5nIGhhbmRsaW5nXG4gICAgICpcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkKG1ldGhvZElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9XG4gICAgICAgICAgICBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxQYXlQYWxDb21tZXJjZUluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuXG4gICAgICAgIHJldHVybiBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YT8uaXNBcHBTd2l0Y2hFbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIGZyb20gJy4uL2NyZWF0ZS1wYXlwYWwtY29tbWVyY2UtaW50ZWdyYXRpb24tc2VydmljZSc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQnV0dG9uU3RyYXRlZ3ksIFt7IGlkOiAncGF5cGFsY29tbWVyY2UnIH1dKTtcbiIsImltcG9ydCB7IE1lc3NhZ2VzU3R5bGVPcHRpb25zLCBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0gfSBmcm9tICcuLi9wYXlwYWwtdHlwZXMnO1xuXG5mdW5jdGlvbiBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnKHtcbiAgICBzdHlsZXMsXG59OiBQYXlQYWxCTlBMQ29uZmlndXJhdGlvbkl0ZW0pOiBNZXNzYWdlc1N0eWxlT3B0aW9ucyB7XG4gICAgY29uc3QgbWVzc2FnZXNTdHlsZXM6IE1lc3NhZ2VzU3R5bGVPcHRpb25zID0ge307XG5cbiAgICBpZiAoc3R5bGVzLmNvbG9yKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmNvbG9yID0gc3R5bGVzLmNvbG9yO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXMubGF5b3V0KSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLmxheW91dCA9IHN0eWxlcy5sYXlvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlc1snbG9nby10eXBlJ10gfHwgc3R5bGVzWydsb2dvLXBvc2l0aW9uJ10pIHtcbiAgICAgICAgbWVzc2FnZXNTdHlsZXMubG9nbyA9IHt9O1xuXG4gICAgICAgIGlmIChzdHlsZXNbJ2xvZ28tdHlwZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnR5cGUgPSBzdHlsZXNbJ2xvZ28tdHlwZSddO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0eWxlc1snbG9nby1wb3NpdGlvbiddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy5sb2dvLnBvc2l0aW9uID0gc3R5bGVzWydsb2dvLXBvc2l0aW9uJ107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3R5bGVzLnJhdGlvKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnJhdGlvID0gc3R5bGVzLnJhdGlvO1xuICAgIH1cblxuICAgIGlmIChzdHlsZXNbJ3RleHQtY29sb3InXSB8fCBzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQgPSB7fTtcblxuICAgICAgICBpZiAoc3R5bGVzWyd0ZXh0LWNvbG9yJ10pIHtcbiAgICAgICAgICAgIG1lc3NhZ2VzU3R5bGVzLnRleHQuY29sb3IgPSBzdHlsZXNbJ3RleHQtY29sb3InXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHlsZXNbJ3RleHQtc2l6ZSddKSB7XG4gICAgICAgICAgICBtZXNzYWdlc1N0eWxlcy50ZXh0LnNpemUgPSArc3R5bGVzWyd0ZXh0LXNpemUnXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtZXNzYWdlc1N0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2V0UGF5cGFsTWVzc2FnZXNTdHlsZXNGcm9tQk5QTENvbmZpZztcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIEFwcHJvdmVDYWxsYmFja0FjdGlvbnMsXG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBnZXRQYXlwYWxNZXNzYWdlc1N0eWxlc0Zyb21CTlBMQ29uZmlnLFxuICAgIE1lc3NhZ2luZ09wdGlvbnMsXG4gICAgUGF5UGFsQk5QTENvbmZpZ3VyYXRpb25JdGVtLFxuICAgIFBheVBhbEJ1dHRvbnNPcHRpb25zLFxuICAgIFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgIFBheVBhbEluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxuICAgIFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VDcmVkaXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1jcmVkaXQtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3kgaW1wbGVtZW50cyBDaGVja291dEJ1dHRvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbENvbW1lcmNlU2RrOiBQYXlQYWxTZGtTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheXBhbGNvbW1lcmNlY3JlZGl0LCBjb250YWluZXJJZCwgbWV0aG9kSWQgfSA9IG9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBwcm92aWRlZEN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkLFxuICAgICAgICB9ID0gcGF5cGFsY29tbWVyY2VjcmVkaXQgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlY3JlZGl0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlY3JlZGl0LmN1cnJlbmN5Q29kZVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQnV5Tm93RmxvdyAmJlxuICAgICAgICAgICAgdHlwZW9mIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHkgIT09ICdmdW5jdGlvbidcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VjcmVkaXQuYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMuZ2V0QnV5Tm93Q2FydFJlcXVlc3RCb2R5XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkIG9yIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFpc0J1eU5vd0Zsb3cpIHtcbiAgICAgICAgICAgIC8vIEluZm86IGRlZmF1bHQgY2hlY2tvdXQgc2hvdWxkIG5vdCBiZSBsb2FkZWQgZm9yIEJ1eU5vdyBmbG93LFxuICAgICAgICAgICAgLy8gc2luY2UgdGhlcmUgaXMgbm8gY2hlY2tvdXQgc2Vzc2lvbiBhdmFpbGFibGUgZm9yIHRoYXQuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWNyZWRpdCk7XG5cbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIGJhbm5lciByZW5kZXJpbmcgaW1wbGVtZW50YXRpb24gaW4gdGhpcyBmaWxlIHdoZW4gUEFZUEFMLTU1NTcuSGlkZV9wcGNfYmFubmVyX2ltcGxlbWVudGF0aW9uIHdpbGwgYmUgcm9sbGVkIG91dCB0byAxMDAlXG4gICAgICAgIGNvbnN0IGZlYXR1cmVzID0gc3RhdGUuZ2V0U3RvcmVDb25maWdPclRocm93KCkuY2hlY2tvdXRTZXR0aW5ncy5mZWF0dXJlcztcbiAgICAgICAgY29uc3QgaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkID1cbiAgICAgICAgICAgIGZlYXR1cmVzWydQQVlQQUwtNTU1Ny5IaWRlX3BwY19iYW5uZXJfaW1wbGVtZW50YXRpb24nXSA/PyBmYWxzZTtcblxuICAgICAgICBpZiAoaXNCYW5uZXJJbXBsZW1lbnRhdGlvbkRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZXNzYWdpbmdDb250YWluZXIgPVxuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVySWQgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWVzc2FnaW5nQ29udGFpbmVySWQpO1xuXG4gICAgICAgIGlmIChjdXJyZW5jeUNvZGUgJiYgbWVzc2FnaW5nQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8UGF5UGFsSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHsgcGF5cGFsQk5QTENvbmZpZ3VyYXRpb24gPSBbXSB9ID0gcGF5bWVudE1ldGhvZC5pbml0aWFsaXphdGlvbkRhdGEgfHwge307XG4gICAgICAgICAgICBjb25zdCBiYW5uZXJDb25maWd1cmF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiAmJiBwYXlwYWxCTlBMQ29uZmlndXJhdGlvbi5maW5kKCh7IGlkIH0pID0+IGlkID09PSAnY2FydCcpO1xuXG4gICAgICAgICAgICBpZiAoIWJhbm5lckNvbmZpZ3VyYXRpb24/LnN0YXR1cykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMgY29kZSB3aGVuIGRhdGEgYXR0cmlidXRlcyB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYmFubmVyIGNvbnRhaW5lciBpbiBjb250ZW50IHNlcnZpY2VcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtbG9nby10eXBlJyk7XG4gICAgICAgICAgICBtZXNzYWdpbmdDb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBwLXN0eWxlLWxvZ28tcG9zaXRpb24nKTtcbiAgICAgICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcHAtc3R5bGUtdGV4dC1jb2xvcicpO1xuICAgICAgICAgICAgbWVzc2FnaW5nQ29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1wcC1zdHlsZS10ZXh0LXNpemUnKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gYXdhaXQgdGhpcy5wYXlwYWxDb21tZXJjZVNkay5nZXRQYXlQYWxNZXNzYWdlcyhcbiAgICAgICAgICAgICAgICBwYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29kZSxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHRoaXMucmVuZGVyTWVzc2FnZXMocGF5cGFsU2RrLCBtZXNzYWdpbmdDb250YWluZXJJZCwgYmFubmVyQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJ1dHRvbihcbiAgICAgICAgY29udGFpbmVySWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgcGF5cGFsY29tbWVyY2VjcmVkaXQ6IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsIHN0eWxlLCBvbkNvbXBsZXRlLCBvbkVsaWdpYmlsaXR5RmFpbHVyZSB9ID1cbiAgICAgICAgICAgIHBheXBhbGNvbW1lcmNlY3JlZGl0O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmdldFBheVBhbFNka09yVGhyb3coKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93PFBheVBhbEluaXRpYWxpemF0aW9uRGF0YT4obWV0aG9kSWQpO1xuICAgICAgICBjb25zdCB7IGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkLCBpc0FwcFN3aXRjaEVuYWJsZWQgfSA9XG4gICAgICAgICAgICBwYXltZW50TWV0aG9kLmluaXRpYWxpemF0aW9uRGF0YSB8fCB7fTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgY3JlYXRlT3JkZXI6ICgpID0+IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWNyZWRpdCcpLFxuICAgICAgICAgICAgb25BcHByb3ZlOiAoeyBvcmRlcklEIH06IEFwcHJvdmVDYWxsYmFja1BheWxvYWQpID0+XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBob3N0ZWRDaGVja291dENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIC4uLighaXNBcHBTd2l0Y2hFbmFibGVkICYmIHtcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nQWRkcmVzc0NoYW5nZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShkYXRhKSxcbiAgICAgICAgICAgICAgICBvblNoaXBwaW5nT3B0aW9uc0NoYW5nZTogKGRhdGE6IFNoaXBwaW5nT3B0aW9uQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKGRhdGEpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBvbkFwcHJvdmU6IChkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLCBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMub25Ib3N0ZWRDaGVja291dEFwcHJvdmUoZGF0YSwgYWN0aW9ucywgbWV0aG9kSWQsIG9uQ29tcGxldGUpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGZ1bmRpbmdTb3VyY2VzID0gW3BheXBhbFNkay5GVU5ESU5HLlBBWUxBVEVSLCBwYXlwYWxTZGsuRlVORElORy5DUkVESVRdO1xuICAgICAgICBsZXQgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmRpbmdTb3VyY2VzLmZvckVhY2goKGZ1bmRpbmdTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbEJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICBmdW5kaW5nU291cmNlLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRDYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkICYmIGhvc3RlZENoZWNrb3V0Q2FsbGJhY2tzKSxcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcGF5cGFsQnV0dG9uID0gcGF5cGFsU2RrLkJ1dHRvbnMoYnV0dG9uUmVuZGVyT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGF5cGFsQnV0dG9uLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYXlwYWxCdXR0b24ucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzUmVuZGVyZWRTbWFydEJ1dHRvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbGlnaWJpbGl0eUZhaWx1cmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaGFzUmVuZGVyZWRTbWFydEJ1dHRvbikge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UucmVtb3ZlRWxlbWVudChjb250YWluZXJJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUNsaWNrKFxuICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucz86IFBheVBhbEJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1eU5vd0NhcnQgPSBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5jcmVhdGVCdXlOb3dDYXJ0T3JUaHJvdyhcbiAgICAgICAgICAgICAgICBidXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoYnV5Tm93Q2FydC5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uSG9zdGVkQ2hlY2tvdXRBcHByb3ZlKFxuICAgICAgICBkYXRhOiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICAgICBhY3Rpb25zOiBBcHByb3ZlQ2FsbGJhY2tBY3Rpb25zLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBvbkNvbXBsZXRlPzogKCkgPT4gdm9pZCxcbiAgICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgaWYgKCFkYXRhLm9yZGVySUQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdPcmRlcklkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGNhcnQgPSBzdGF0ZS5nZXRDYXJ0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBvcmRlckRldGFpbHMgPSBhd2FpdCBhY3Rpb25zLm9yZGVyLmdldCgpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG9yZGVyRGV0YWlscyk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0LmxpbmVJdGVtcy5waHlzaWNhbEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NGcm9tT3JkZXJEZXRhaWxzKG9yZGVyRGV0YWlscyk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcih7fSwgeyBwYXJhbXM6IHsgbWV0aG9kSWQgfSB9KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQobWV0aG9kSWQsIGRhdGEub3JkZXJJRCk7XG5cbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlICYmIHR5cGVvZiBvbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gRklYTUU6IERvIHdlIHJlYWxseSBuZWVkIHRvIHJldHVybiB0cnVlIGhlcmU/XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBvblNoaXBwaW5nQWRkcmVzc0NoYW5nZShcbiAgICAgICAgZGF0YTogU2hpcHBpbmdBZGRyZXNzQ2hhbmdlQ2FsbGJhY2tQYXlsb2FkLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0QWRkcmVzcyh7XG4gICAgICAgICAgICBjaXR5OiBkYXRhLnNoaXBwaW5nQWRkcmVzcy5jaXR5LFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLmNvdW50cnlDb2RlLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogZGF0YS5zaGlwcGluZ0FkZHJlc3MucG9zdGFsQ29kZSxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IGRhdGEuc2hpcHBpbmdBZGRyZXNzLnN0YXRlLFxuICAgICAgICB9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSW5mbzogd2UgdXNlIHRoZSBzYW1lIGFkZHJlc3MgdG8gZmlsbCBiaWxsaW5nIGFuZCBzaGlwcGluZyBhZGRyZXNzZXMgdG8gaGF2ZSB2YWxpZCBxdW90YSBvbiBCRSBmb3Igb3JkZXIgdXBkYXRpbmcgcHJvY2Vzc1xuICAgICAgICAgICAgLy8gb24gdGhpcyBzdGFnZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB2YWxpZCBjdXN0b21lcidzIGFkZHJlc3MgYWNjZXB0IHNoaXBwaW5nIGRhdGFcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVCaWxsaW5nQWRkcmVzcyhhZGRyZXNzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MoYWRkcmVzcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nT3B0aW9uID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U2hpcHBpbmdPcHRpb25PclRocm93KCk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIG9uU2hpcHBpbmdPcHRpb25zQ2hhbmdlKFxuICAgICAgICBkYXRhOiBTaGlwcGluZ09wdGlvbkNoYW5nZUNhbGxiYWNrUGF5bG9hZCxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc2hpcHBpbmdPcHRpb24gPSB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5nZXRTaGlwcGluZ09wdGlvbk9yVGhyb3coXG4gICAgICAgICAgICBkYXRhLnNlbGVjdGVkU2hpcHBpbmdPcHRpb24uaWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihzaGlwcGluZ09wdGlvbi5pZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS51cGRhdGVPcmRlcigncGF5cGFsY29tbWVyY2UnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlck1lc3NhZ2VzKFxuICAgICAgICBwYXlwYWxNZXNzYWdlc1NkazogUGF5UGFsTWVzc2FnZXNTZGssXG4gICAgICAgIG1lc3NhZ2luZ0NvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIGJhbm5lckNvbmZpZ3VyYXRpb246IFBheVBhbEJOUExDb25maWd1cmF0aW9uSXRlbSxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tvdXQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBjb25zdCBwYXlwYWxNZXNzYWdlc09wdGlvbnM6IE1lc3NhZ2luZ09wdGlvbnMgPSB7XG4gICAgICAgICAgICBhbW91bnQ6IGNoZWNrb3V0Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2NhcnQnLFxuICAgICAgICAgICAgc3R5bGU6IGdldFBheXBhbE1lc3NhZ2VzU3R5bGVzRnJvbUJOUExDb25maWcoYmFubmVyQ29uZmlndXJhdGlvbiksXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcGF5cGFsTWVzc2FnZXMgPSBwYXlwYWxNZXNzYWdlc1Nkay5NZXNzYWdlcyhwYXlwYWxNZXNzYWdlc09wdGlvbnMpO1xuXG4gICAgICAgIHBheXBhbE1lc3NhZ2VzLnJlbmRlcihgIyR7bWVzc2FnaW5nQ29udGFpbmVySWR9YCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBjcmVhdGVQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWNyZWRpdC1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxcbiAgICBQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5XG4+ID0gKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpID0+XG4gICAgbmV3IFBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbEludGVncmF0aW9uU2VydmljZShwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSxcbiAgICAgICAgY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyKCksXG4gICAgKTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVBheVBhbENvbW1lcmNlQ3JlZGl0QnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2VjcmVkaXQnIH0sXG5dKTtcbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5LFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vcGF5cGFsLWNvbW1lcmNlLWludGVncmF0aW9uLXNlcnZpY2UnO1xuaW1wb3J0IHtcbiAgICBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkLFxuICAgIFBheVBhbEJ1dHRvblN0eWxlT3B0aW9ucyxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxuICAgIFN0eWxlQnV0dG9uQ29sb3IsXG59IGZyb20gJy4uL3BheXBhbC1jb21tZXJjZS10eXBlcyc7XG5cbmltcG9ydCBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvbkluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24taW5pdGlhbGl6ZS1vcHRpb25zJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5UGFsQ29tbWVyY2VWZW5tb0J1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZTogUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ2hlY2tvdXRCdXR0b25Jbml0aWFsaXplT3B0aW9ucyAmIFdpdGhQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2V2ZW5tbywgY29udGFpbmVySWQsIG1ldGhvZElkIH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCB7IGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLCBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2V2ZW5tbyB8fCB7fTtcblxuICAgICAgICBjb25zdCBpc0J1eU5vd0Zsb3cgPSAhIWJ1eU5vd0luaXRpYWxpemVPcHRpb25zO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5tZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5jb250YWluZXJJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcGF5cGFsY29tbWVyY2V2ZW5tbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW9cIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNCdXlOb3dGbG93ICYmICFwcm92aWRlZEN1cnJlbmN5Q29kZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNldmVubW8uY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZXZlbm1vLmJ1eU5vd0luaXRpYWxpemVPcHRpb25zLmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZCBvciBpdCBpcyBub3QgYSBmdW5jdGlvbi5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNCdXlOb3dGbG93KSB7XG4gICAgICAgICAgICAvLyBJbmZvOiBkZWZhdWx0IGNoZWNrb3V0IHNob3VsZCBub3QgYmUgbG9hZGVkIGZvciBCdXlOb3cgZmxvdyxcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXJlIGlzIG5vIGNoZWNrb3V0IHNlc3Npb24gYXZhaWxhYmxlIGZvciB0aGF0LlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluZm86IHdlIGFyZSB1c2luZyBwcm92aWRlZCBjdXJyZW5jeSBjb2RlIGZvciBidXkgbm93IGNhcnQsXG4gICAgICAgIC8vIGJlY2F1c2UgY2hlY2tvdXQgc2Vzc2lvbiBpcyBub3QgYXZhaWxhYmxlIGJlZm9yZSBidXkgbm93IGNhcnQgY3JlYXRpb24sXG4gICAgICAgIC8vIGhlbmNlIGFwcGxpY2F0aW9uIHdpbGwgdGhyb3cgYW4gZXJyb3Igb24gZ2V0Q2FydE9yVGhyb3cgbWV0aG9kIGNhbGxcbiAgICAgICAgY29uc3QgY3VycmVuY3lDb2RlID0gaXNCdXlOb3dGbG93XG4gICAgICAgICAgICA/IHByb3ZpZGVkQ3VycmVuY3lDb2RlXG4gICAgICAgICAgICA6IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnRPclRocm93KCkuY3VycmVuY3kuY29kZTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXlQYWxTZGsobWV0aG9kSWQsIGN1cnJlbmN5Q29kZSwgZmFsc2UpO1xuXG4gICAgICAgIHRoaXMucmVuZGVyQnV0dG9uKGNvbnRhaW5lcklkLCBtZXRob2RJZCwgcGF5cGFsY29tbWVyY2V2ZW5tbyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNldmVubW86IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25Jbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPSBwYXlwYWxjb21tZXJjZXZlbm1vO1xuXG4gICAgICAgIGNvbnN0IHBheXBhbFNkayA9IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBmdW5kaW5nU291cmNlID0gcGF5cGFsU2RrLkZVTkRJTkcuVkVOTU87XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlT3JkZXIoJ3BheXBhbGNvbW1lcmNldmVubW8nKSxcbiAgICAgICAgICAgIG9uQXBwcm92ZTogKHsgb3JkZXJJRCB9OiBBcHByb3ZlQ2FsbGJhY2tQYXlsb2FkKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UudG9rZW5pemVQYXltZW50KG1ldGhvZElkLCBvcmRlcklEKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXlOb3dGbG93Q2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVDbGljayhidXlOb3dJbml0aWFsaXplT3B0aW9ucyksXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBidXR0b25SZW5kZXJPcHRpb25zOiBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zID0ge1xuICAgICAgICAgICAgZnVuZGluZ1NvdXJjZSxcbiAgICAgICAgICAgIHN0eWxlOiB0aGlzLmdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMoc3R5bGUpLFxuICAgICAgICAgICAgLi4uZGVmYXVsdENhbGxiYWNrcyxcbiAgICAgICAgICAgIC4uLihidXlOb3dJbml0aWFsaXplT3B0aW9ucyAmJiBidXlOb3dGbG93Q2FsbGJhY2tzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBwYXlwYWxCdXR0b25SZW5kZXIgPSBwYXlwYWxTZGsuQnV0dG9ucyhidXR0b25SZW5kZXJPcHRpb25zKTtcblxuICAgICAgICBpZiAocGF5cGFsQnV0dG9uUmVuZGVyLmlzRWxpZ2libGUoKSkge1xuICAgICAgICAgICAgcGF5cGFsQnV0dG9uUmVuZGVyLnJlbmRlcihgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAob25FbGlnaWJpbGl0eUZhaWx1cmUgJiYgdHlwZW9mIG9uRWxpZ2liaWxpdHlGYWlsdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbkVsaWdpYmlsaXR5RmFpbHVyZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VmFsaWRWZW5tb0J1dHRvblN0eWxlcyhzdHlsZTogUGF5UGFsQnV0dG9uU3R5bGVPcHRpb25zIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkQnV0dG9uU3R5bGUgPSB0aGlzLnBheXBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFZhbGlkQnV0dG9uU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgIGlmICh2YWxpZEJ1dHRvblN0eWxlLmNvbG9yID09PSBTdHlsZUJ1dHRvbkNvbG9yLmdvbGQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4udmFsaWRCdXR0b25TdHlsZSxcbiAgICAgICAgICAgICAgICBjb2xvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWxpZEJ1dHRvblN0eWxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3coXG4gICAgICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KGJ1eU5vd0NhcnQuaWQpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgY3JlYXRlUGF5UGFsQ29tbWVyY2VJbnRlZ3JhdGlvblNlcnZpY2UgZnJvbSAnLi4vY3JlYXRlLXBheXBhbC1jb21tZXJjZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlJztcblxuaW1wb3J0IFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS12ZW5tby1idXR0b24tc3RyYXRlZ3knO1xuXG5jb25zdCBjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneVxuPiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PlxuICAgIG5ldyBQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIGNyZWF0ZVBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZVZlbm1vQnV0dG9uU3RyYXRlZ3ksIFtcbiAgICB7IGlkOiAncGF5cGFsY29tbWVyY2V2ZW5tbycgfSxcbl0pO1xuIiwiaW1wb3J0IHtcbiAgICBDaGVja291dEJ1dHRvbkluaXRpYWxpemVPcHRpb25zLFxuICAgIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3ksXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBQYXlQYWxJbnRlZ3JhdGlvblNlcnZpY2UgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheXBhbC11dGlscyc7XG5cbmltcG9ydCB7XG4gICAgQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCxcbiAgICBQYXlQYWxCdXlOb3dJbml0aWFsaXplT3B0aW9ucyxcbiAgICBQYXlQYWxDb21tZXJjZUJ1dHRvbnNPcHRpb25zLFxufSBmcm9tICcuLi9wYXlwYWwtY29tbWVyY2UtdHlwZXMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25PcHRpb25zLCB7XG4gICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vcGF5cGFsLWNvbW1lcmNlLWFsdGVybmF0aXZlLW1ldGhvZHMtYnV0dG9uLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbiAgICBpbXBsZW1lbnRzIENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lcbntcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHBheXBhbEludGVncmF0aW9uU2VydmljZTogUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJlxuICAgICAgICAgICAgV2l0aFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMsIGNvbnRhaW5lcklkLCBtZXRob2RJZCB9ID0gb3B0aW9ucztcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYXBtLFxuICAgICAgICAgICAgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgICAgICBjdXJyZW5jeUNvZGU6IHByb3ZpZGVkQ3VycmVuY3lDb2RlLFxuICAgICAgICB9ID0gcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMgfHwge307XG5cbiAgICAgICAgY29uc3QgaXNCdXlOb3dGbG93ID0gISFidXlOb3dJbml0aWFsaXplT3B0aW9ucztcblxuICAgICAgICBpZiAoIW1ldGhvZElkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgJ1VuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMubWV0aG9kSWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMuY29udGFpbmVySWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHNcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFwbSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJvcHRpb25zLnBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzLmFwbVwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0J1eU5vd0Zsb3cgJiYgIXByb3ZpZGVkQ3VycmVuY3lDb2RlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIHBheW1lbnQgYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuY3VycmVuY3lDb2RlXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgaXNCdXlOb3dGbG93ICYmXG4gICAgICAgICAgICB0eXBlb2YgYnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnM/LmdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSAhPT0gJ2Z1bmN0aW9uJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICBgVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwib3B0aW9ucy5wYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcy5idXlOb3dJbml0aWFsaXplT3B0aW9ucy5nZXRCdXlOb3dDYXJ0UmVxdWVzdEJvZHlcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQgb3IgaXQgaXMgbm90IGEgZnVuY3Rpb24uYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzQnV5Tm93Rmxvdykge1xuICAgICAgICAgICAgLy8gSW5mbzogZGVmYXVsdCBjaGVja291dCBzaG91bGQgbm90IGJlIGxvYWRlZCBmb3IgQnV5Tm93IGZsb3csXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGVyZSBpcyBubyBjaGVja291dCBzZXNzaW9uIGF2YWlsYWJsZSBmb3IgdGhhdC5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkRGVmYXVsdENoZWNrb3V0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbmZvOiB3ZSBhcmUgdXNpbmcgcHJvdmlkZWQgY3VycmVuY3kgY29kZSBmb3IgYnV5IG5vdyBjYXJ0LFxuICAgICAgICAvLyBiZWNhdXNlIGNoZWNrb3V0IHNlc3Npb24gaXMgbm90IGF2YWlsYWJsZSBiZWZvcmUgYnV5IG5vdyBjYXJ0IGNyZWF0aW9uLFxuICAgICAgICAvLyBoZW5jZSBhcHBsaWNhdGlvbiB3aWxsIHRocm93IGFuIGVycm9yIG9uIGdldENhcnRPclRocm93IG1ldGhvZCBjYWxsXG4gICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IGlzQnV5Tm93Rmxvd1xuICAgICAgICAgICAgPyBwcm92aWRlZEN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgOiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5LmNvZGU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheVBhbFNkayhtZXRob2RJZCwgY3VycmVuY3lDb2RlLCBmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdXR0b24oY29udGFpbmVySWQsIG1ldGhvZElkLCBwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kcyk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJCdXR0b24oXG4gICAgICAgIGNvbnRhaW5lcklkOiBzdHJpbmcsXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzOiBQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvbk9wdGlvbnMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgYXBtLCBidXlOb3dJbml0aWFsaXplT3B0aW9ucywgc3R5bGUsIG9uRWxpZ2liaWxpdHlGYWlsdXJlIH0gPVxuICAgICAgICAgICAgcGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHM7XG5cbiAgICAgICAgY29uc3QgcGF5cGFsU2RrID0gdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0UGF5UGFsU2RrT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBpc0F2YWlsYWJsZUZ1bmRpbmdTb3VyY2UgPSBPYmplY3QudmFsdWVzKHBheXBhbFNkay5GVU5ESU5HKS5pbmNsdWRlcyhhcG0pO1xuXG4gICAgICAgIGlmICghaXNBdmFpbGFibGVGdW5kaW5nU291cmNlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgYFVuYWJsZSB0byBpbml0aWFsaXplIFBheVBhbCBidXR0b24gYmVjYXVzZSBcIm9wdGlvbnMucGF5cGFsY29tbWVyY2VhbHRlcm5hdGl2ZW1ldGhvZHMuYXBtXCIgYXJndW1lbnQgaXMgbm90IHZhbGlkIGZ1bmRpbmcgc291cmNlLmAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVmYXVsdENhbGxiYWNrcyA9IHtcbiAgICAgICAgICAgIGNyZWF0ZU9yZGVyOiAoKSA9PlxuICAgICAgICAgICAgICAgIHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZU9yZGVyKCdwYXlwYWxjb21tZXJjZWFsdGVybmF0aXZlbWV0aG9kJyksXG4gICAgICAgICAgICBvbkFwcHJvdmU6ICh7IG9yZGVySUQgfTogQXBwcm92ZUNhbGxiYWNrUGF5bG9hZCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS50b2tlbml6ZVBheW1lbnQobWV0aG9kSWQsIG9yZGVySUQpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1eU5vd0Zsb3dDYWxsYmFja3MgPSB7XG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNsaWNrKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zKSxcbiAgICAgICAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZERlZmF1bHRDaGVja291dCgpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvblJlbmRlck9wdGlvbnM6IFBheVBhbENvbW1lcmNlQnV0dG9uc09wdGlvbnMgPSB7XG4gICAgICAgICAgICBmdW5kaW5nU291cmNlOiBhcG0sXG4gICAgICAgICAgICBzdHlsZTogdGhpcy5wYXlwYWxJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0VmFsaWRCdXR0b25TdHlsZShzdHlsZSksXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q2FsbGJhY2tzLFxuICAgICAgICAgICAgLi4uKGJ1eU5vd0luaXRpYWxpemVPcHRpb25zICYmIGJ1eU5vd0Zsb3dDYWxsYmFja3MpLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBheXBhbEJ1dHRvblJlbmRlciA9IHBheXBhbFNkay5CdXR0b25zKGJ1dHRvblJlbmRlck9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChwYXlwYWxCdXR0b25SZW5kZXIuaXNFbGlnaWJsZSgpKSB7XG4gICAgICAgICAgICBwYXlwYWxCdXR0b25SZW5kZXIucmVuZGVyKGAjJHtjb250YWluZXJJZH1gKTtcbiAgICAgICAgfSBlbHNlIGlmIChvbkVsaWdpYmlsaXR5RmFpbHVyZSAmJiB0eXBlb2Ygb25FbGlnaWJpbGl0eUZhaWx1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uRWxpZ2liaWxpdHlGYWlsdXJlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBheXBhbEludGVncmF0aW9uU2VydmljZS5yZW1vdmVFbGVtZW50KGNvbnRhaW5lcklkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQ2xpY2soXG4gICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zPzogUGF5UGFsQnV5Tm93SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChidXlOb3dJbml0aWFsaXplT3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYnV5Tm93Q2FydCA9IGF3YWl0IHRoaXMucGF5cGFsSW50ZWdyYXRpb25TZXJ2aWNlLmNyZWF0ZUJ1eU5vd0NhcnRPclRocm93KFxuICAgICAgICAgICAgICAgIGJ1eU5vd0luaXRpYWxpemVPcHRpb25zLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRDaGVja291dChidXlOb3dDYXJ0LmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXlwYWwtdXRpbHMnO1xuXG5pbXBvcnQgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneSBmcm9tICcuL3BheXBhbC1jb21tZXJjZS1hbHRlcm5hdGl2ZS1tZXRob2RzLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3k6IENoZWNrb3V0QnV0dG9uU3RyYXRlZ3lGYWN0b3J5PFxuICAgIFBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3lcbj4gPSAocGF5bWVudEludGVncmF0aW9uU2VydmljZSkgPT5cbiAgICBuZXcgUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgY3JlYXRlUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UpLFxuICAgICk7XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVQYXlQYWxDb21tZXJjZUFsdGVybmF0aXZlTWV0aG9kc0J1dHRvblN0cmF0ZWd5LCBbXG4gICAgeyBpZDogJ3BheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzJyB9LFxuXSk7XG4iXSwibmFtZXMiOlsiTWlzc2luZ0RhdGFFcnJvclR5cGUiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9SZXNvbHZhYmxlTW9kdWxlIiwibW9kdWxlIiwicmVzb2x2ZUlkcyIsIk9iamVjdCIsImFzc2lnbiIsImQiLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3RhbmRhcmRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwic3VwZXIiLCJuYW1lIiwidHlwZSIsInNldFByb3RvdHlwZU9mIiwidGhpcyIsIl9fcHJvdG9fXyIsImNhcHR1cmVTdGFja1RyYWNlIiwic3RhY2siLCJQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvciIsIk1pc3NpbmdEYXRhRXJyb3IiLCJzdWJ0eXBlIiwiTWlzc2luZ0JpbGxpbmdBZGRyZXNzIiwiTWlzc2luZ0NhcnQiLCJNaXNzaW5nQ29uc2lnbm1lbnRzIiwiTWlzc2luZ0NoZWNrb3V0IiwiTWlzc2luZ0N1c3RvbWVyIiwiTWlzc2luZ0NoZWNrb3V0Q29uZmlnIiwiTWlzc2luZ09yZGVyQ29uZmlnIiwiTWlzc2luZ09yZGVyIiwiTWlzc2luZ09yZGVySWQiLCJNaXNzaW5nUGF5bWVudCIsIk1pc3NpbmdQYXltZW50VG9rZW4iLCJNaXNzaW5nUGF5bWVudE1ldGhvZCIsIk1pc3NpbmdTaGlwcGluZ0FkZHJlc3MiLCJnZXRFcnJvck1lc3NhZ2UiLCJQYXlQYWxDb21tZXJjZVNkayIsInNjcmlwdExvYWRlciIsIndpbmRvdyIsImdldFBheVBhbEZhc3RsYW5lU2RrIiwicGF5bWVudE1ldGhvZCIsImN1cnJlbmN5Q29kZSIsInNlc3Npb25JZCIsInBheXBhbEZhc3RsYW5lU2RrIiwiY29uZmlnIiwiZ2V0UGF5UGFsRmFzdGxhbmVTZGtDb25maWd1cmF0aW9uIiwibG9hZFBheVBhbFNkayIsImdldFBheVBhbEdvb2dsZVBheVNkayIsImluaXRpYWxpemVzT25DaGVja291dFBhZ2UiLCJmb3JjZUxvYWQiLCJwYXlwYWxHb29nbGVQYXkiLCJwYXlwYWxTZGtTY3JpcHRDb25maWciLCJnZXRQYXlQYWxHb29nbGVQYXlTZGtTY3JpcHRDb25maWdPclRocm93IiwiZ2V0UGF5UGFsQXBtc1NkayIsInBheXBhbEFwbXMiLCJnZXRQYXlQYWxBcG1TZGtDb25maWd1cmF0aW9uIiwiZ2V0UGF5UGFsTWVzc2FnZXMiLCJwYXlwYWxNZXNzYWdlcyIsInBheXBhbFNka01lc3NhZ2VzQ29uZmlnIiwiZ2V0UGF5UGFsU2RrTWVzc2FnZXNDb25maWd1cmF0aW9uIiwib3B0aW9ucyIsImF0dHJpYnV0ZXMiLCJzY3JpcHRPcHRpb25zIiwidHJhbnNmb3JtQ29uZmlnIiwic2NyaXB0QXR0cmlidXRlcyIsInNjcmlwdFNyYyIsIlVSTFNlYXJjaFBhcmFtcyIsInRvU3RyaW5nIiwibG9hZFNjcmlwdCIsImFzeW5jIiwiY2xpZW50VG9rZW4iLCJpbml0aWFsaXphdGlvbkRhdGEiLCJjbGllbnRJZCIsImludGVudCIsIm1lcmNoYW50SWQiLCJhdHRyaWJ1dGlvbklkIiwiY29tbWl0IiwiY29tcG9uZW50cyIsImN1cnJlbmN5IiwicmVwbGFjZSIsImJ1eWVyQ291bnRyeSIsImlzSG9zdGVkQ2hlY2tvdXRFbmFibGVkIiwiaXNEZXZlbG9wZXJNb2RlQXBwbGljYWJsZSIsImF2YWlsYWJsZUFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJlbmFibGVkQWx0ZXJuYXRpdmVQYXltZW50TWV0aG9kcyIsImVuYWJsZUFQTXNGdW5kaW5nIiwiZGlzYWJsZUFQTXNGdW5kaW5nIiwiZmlsdGVyIiwiYXBtIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1lZENvbmZpZyIsImtleXMiLCJmb3JFYWNoIiwidmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJqb2luIiwiREVGQVVMVF9TVFlMRVMiLCJzaXplIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJST1RBVElPTl9BTklNQVRJT04iLCJMb2FkaW5nSW5kaWNhdG9yIiwic3R5bGVzIiwiY29udGFpbmVyU3R5bGVzIiwiZGVmaW5lQW5pbWF0aW9uIiwiY29udGFpbmVyIiwiYnVpbGRDb250YWluZXIiLCJpbmRpY2F0b3IiLCJidWlsZEluZGljYXRvciIsImFwcGVuZENoaWxkIiwic2hvdyIsInBhcmVudElkIiwicGFyZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwidmlzaWJpbGl0eSIsIm9wYWNpdHkiLCJoaWRlIiwiaGFuZGxlVHJhbnNpdGlvbkVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlRWxlbWVudCIsImRpc3BsYXkiLCJib3R0b20iLCJsZWZ0IiwiaGVpZ2h0Iiwid2lkdGgiLCJwb3NpdGlvbiIsInJpZ2h0IiwidG9wIiwidHJhbnNpdGlvbiIsInNldFN0eWxlQXR0cmlidXRlIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyIiwiYm9yZGVyQ29sb3IiLCJtYXJnaW4iLCJ0cmFuc2Zvcm0iLCJ0cmFuc2Zvcm1TdHlsZSIsImFuaW1hdGlvbiIsImVsZW1lbnQiLCJhdHRycyIsImsiLCJzZXRQcm9wZXJ0eSIsImlkIiwiaGVhZCIsInNoZWV0IiwiQ1NTU3R5bGVTaGVldCIsImluc2VydFJ1bGUiLCJCdXlOb3dDYXJ0Q3JlYXRpb25FcnJvciIsIkRFRkFVTFRfUkVTUE9OU0UiLCJib2R5IiwiaGVhZGVycyIsInN0YXR1cyIsIlJlcXVlc3RFcnJvciIsInJlc3BvbnNlIiwiZXJyb3JzIiwiQ2FydFNvdXJjZSIsIkxpYWJpbGl0eVNoaWZ0RW51bSIsIlBheVBhbENvbW1lcmNlSW50ZW50IiwiU3R5bGVCdXR0b25MYWJlbCIsIlN0eWxlQnV0dG9uQ29sb3IiLCJTdHlsZUJ1dHRvblNoYXBlIiwiTm9uSW5zdGFudEFsdGVybmF0aXZlUGF5bWVudE1ldGhvZHMiLCJQYXlQYWxPcmRlclN0YXR1cyIsIlBheVBhbENvbW1lcmNlSW50ZWdyYXRpb25TZXJ2aWNlIiwiZm9ybVBvc3RlciIsInBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UiLCJwYXlwYWxDb21tZXJjZVJlcXVlc3RTZW5kZXIiLCJwYXlwYWxDb21tZXJjZVNjcmlwdExvYWRlciIsIm1ldGhvZElkIiwicHJvdmlkZWRDdXJyZW5jeUNvZGUiLCJzdGF0ZSIsImdldFN0YXRlIiwiZ2V0Q2FydE9yVGhyb3ciLCJjb2RlIiwiZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3ciLCJwYXlwYWxTZGsiLCJnZXRQYXlQYWxTREsiLCJnZXRQYXlQYWxTZGtPclRocm93IiwiY3JlYXRlQnV5Tm93Q2FydE9yVGhyb3ciLCJidXlOb3dJbml0aWFsaXplT3B0aW9ucyIsImNhcnRSZXF1ZXN0Qm9keSIsImdldEJ1eU5vd0NhcnRSZXF1ZXN0Qm9keSIsImNyZWF0ZUJ1eU5vd0NhcnQiLCJlcnJvciIsImNyZWF0ZU9yZGVyIiwicHJvdmlkZXJJZCIsInJlcXVlc3RCb2R5IiwiY2FydElkIiwib3JkZXJJZCIsImNyZWF0ZU9yZGVyQ2FyZEZpZWxkcyIsInNldHVwVG9rZW4iLCJ1cGRhdGVPcmRlciIsImNhcnQiLCJjb25zaWdubWVudCIsImdldENvbnNpZ25tZW50c09yVGhyb3ciLCJhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMiLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIiwiX2Vycm9yIiwiZ2V0T3JkZXJTdGF0dXMiLCJ0b2tlbml6ZVBheW1lbnQiLCJwb3N0Rm9ybSIsInBheW1lbnRfdHlwZSIsImFjdGlvbiIsInByb3ZpZGVyIiwib3JkZXJfaWQiLCJzb3VyY2UiLCJCdXlOb3ciLCJjYXJ0X2lkIiwic3VibWl0UGF5bWVudCIsImdhdGV3YXlJZCIsInBheW1lbnREYXRhIiwiZm9ybWF0dGVkUGF5bG9hZCIsInZhdWx0X3BheW1lbnRfaW5zdHJ1bWVudCIsInNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50IiwiZGV2aWNlX2luZm8iLCJtZXRob2RfaWQiLCJwYXlwYWxfYWNjb3VudCIsImdldFNoaXBwaW5nT3B0aW9uT3JUaHJvdyIsInNlbGVjdGVkU2hpcHBpbmdPcHRpb25JZCIsInJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24iLCJmaW5kIiwib3B0aW9uIiwiaXNSZWNvbW1lbmRlZCIsInNoaXBwaW5nT3B0aW9uVG9TZWxlY3QiLCJnZXRBZGRyZXNzIiwiYWRkcmVzcyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJwaG9uZSIsImNvbXBhbnkiLCJhZGRyZXNzMSIsImFkZHJlc3MyIiwiY2l0eSIsImNvdW50cnlDb2RlIiwicG9zdGFsQ29kZSIsInN0YXRlT3JQcm92aW5jZSIsInN0YXRlT3JQcm92aW5jZUNvZGUiLCJjdXN0b21GaWVsZHMiLCJnZXRCaWxsaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMiLCJwYXllciIsImdpdmVuX25hbWUiLCJzdXJuYW1lIiwiZW1haWxfYWRkcmVzcyIsImFkZHJlc3NfbGluZV8xIiwiYWRkcmVzc19saW5lXzIiLCJhZG1pbl9hcmVhXzIiLCJjb3VudHJ5X2NvZGUiLCJwb3N0YWxfY29kZSIsImFkbWluX2FyZWFfMSIsInBob25lX251bWJlciIsIm5hdGlvbmFsX251bWJlciIsImdldFNoaXBwaW5nQWRkcmVzc0Zyb21PcmRlckRldGFpbHMiLCJvcmRlckRldGFpbHMiLCJwdXJjaGFzZV91bml0cyIsImZ1bGxfbmFtZSIsInNoaXBwaW5nIiwic3BsaXQiLCJnZXRWYWxpZEJ1dHRvblN0eWxlIiwibGFiZWwiLCJzaGFwZSIsInZhbGlkU3R5bGVzIiwiZ2V0VmFsaWRIZWlnaHQiLCJvbWl0QnkiLCJpc05pbCIsInJlbW92ZUVsZW1lbnQiLCJlbGVtZW50SWQiLCJJTlRFUk5BTF9VU0VfT05MWSIsIkNvbnRlbnRUeXBlIiwiU0RLX1ZFUlNJT05fSEVBREVSUyIsIlBheVBhbENvbW1lcmNlUmVxdWVzdFNlbmRlciIsInJlcXVlc3RTZW5kZXIiLCJ1cmwiLCJKc29uIiwicG9zdCIsInB1dCIsIlBheVBhbENvbW1lcmNlU2NyaXB0TG9hZGVyIiwiZ2V0UGF5UGFsU2RrU2NyaXB0Q29uZmlnT3JUaHJvdyIsImxvYWRQYXlQYWxTREsiLCJwYXlwYWwiLCJpc1Zlbm1vRW5hYmxlZCIsImlzUGF5UGFsQ3JlZGl0QXZhaWxhYmxlIiwiaXNHb29nbGVQYXlFbmFibGVkIiwic2hvdWxkRW5hYmxlQ2FyZCIsImVuYWJsZUNhcmRGdW5kaW5nIiwiZW5hYmxlQ3JlZGl0RnVuZGluZyIsImVuYWJsZVZlbm1vRnVuZGluZyIsImdvb2dsZVBheUNvbXBvbmVudCIsImNhcmRGaWVsZHNDb21wb25lbnQiLCJkaXNhYmxlRnVuZGluZyIsImVuYWJsZUZ1bmRpbmciLCJnZXRIb3N0IiwiY3JlYXRlRm9ybVBvc3RlciIsImNyZWF0ZVJlcXVlc3RTZW5kZXIiLCJob3N0IiwiZ2V0U2NyaXB0TG9hZGVyIiwiTE9BRElOR19JTkRJQ0FUT1JfU1RZTEVTIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiUGF5bWVudE1ldGhvZEludmFsaWRFcnJvciIsIk9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvciIsImlzSG9zdGVkSW5zdHJ1bWVudExpa2UiLCJpbnN0cnVtZW50Iiwic2hvdWxkU2F2ZUluc3RydW1lbnQiLCJzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsIkJvb2xlYW4iLCJpbnN0cnVtZW50SWQiLCJtZXNzYWdlc1N0eWxlcyIsImxheW91dCIsImxvZ28iLCJyYXRpbyIsInRleHQiLCJpc0Jhc2VJbnN0cnVtZW50IiwiUGF5UGFsQ29tbWVyY2VQYXltZW50U3RyYXRlZ3kiLCJwYXlwYWxDb21tZXJjZUludGVncmF0aW9uU2VydmljZSIsInBheXBhbENvbW1lcmNlU2RrIiwibG9hZGluZ0luZGljYXRvciIsImluaXRpYWxpemUiLCJwYXlwYWxjb21tZXJjZSIsImxvYWRQYXltZW50TWV0aG9kIiwiYmFubmVyQ29udGFpbmVySWQiLCJwYXlwYWxCTlBMQ29uZmlndXJhdGlvbiIsImNvbnNvbGUiLCJiYW5uZXJDb25maWd1cmF0aW9uIiwiTWVzc2FnZXMiLCJyZW5kZXJNZXNzYWdlcyIsImxvYWRpbmdJbmRpY2F0b3JDb250YWluZXIiLCJvbkluaXQiLCJyZW5kZXJCdXR0b24iLCJzaG91bGRSZW5kZXJQYXlQYWxCdXR0b25PbkluaXRpYWxpemF0aW9uIiwiZXhlY3V0ZSIsInBheWxvYWQiLCJwYXltZW50Iiwib3JkZXIiLCJvbkVycm9yIiwiaXNQYXlQYWxWYXVsdGVkSW5zdHJ1bWVudFBheW1lbnREYXRhIiwicGF5bWVudFBheWxvYWQiLCJwcmVwYXJlVmF1bHRlZEluc3RydW1lbnRQYXltZW50UGF5bG9hZCIsInByZXBhcmVQYXltZW50UGF5bG9hZCIsInN1Ym1pdE9yZGVyIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJpc1JlZGlyZWN0QWN0aW9uRXJyb3IiLCJyZWRpcmVjdFVybCIsImRhdGEiLCJyZWRpcmVjdF91cmwiLCJQcm9taXNlIiwibG9jYXRpb24iLCJpc1Byb3ZpZGVyRXJyb3IiLCJfcmVzb2x2ZSIsInJlamVjdCIsInBheXBhbEJ1dHRvbiIsImNsb3NlIiwiaGFuZGxlRXJyb3IiLCJmaW5hbGl6ZSIsImRlaW5pdGlhbGl6ZSIsInJlc29sdmUiLCJwYXlwYWxPcmRlcklkIiwic2hvdWxkQ29uZmlybUluc3RydW1lbnQiLCJpc1RydXN0ZWRWYXVsdGluZ0Zsb3ciLCJiaWdwYXlfdG9rZW4iLCJ0b2tlbiIsInBheW1lbnRCdXR0b25TdHlsZXMiLCJjaGVja291dFBheW1lbnRCdXR0b25TdHlsZXMiLCJvblJlbmRlckJ1dHRvbiIsIm9uVmFsaWRhdGUiLCJzdWJtaXRGb3JtIiwiYnV0dG9uT3B0aW9ucyIsImlzUGF5cGFsQ29tbWVyY2VBcHBTd2l0Y2hFbmFibGVkIiwiYXBwU3dpdGNoV2hlbkF2YWlsYWJsZSIsImZ1bmRpbmdTb3VyY2UiLCJGVU5ESU5HIiwiUEFZUEFMIiwib25DbGljayIsIl8iLCJhY3Rpb25zIiwiaGFuZGxlQ2xpY2siLCJvbkFwcHJvdmUiLCJoYW5kbGVBcHByb3ZlIiwib25DYW5jZWwiLCJ0b2dnbGVMb2FkaW5nSW5kaWNhdG9yIiwiQnV0dG9ucyIsImlzRWxpZ2libGUiLCJoYXNSZXR1cm5lZCIsInJlc3VtZSIsInJlbmRlciIsIm9yZGVySUQiLCJmaWVsZHNWYWx1ZXMiLCJnZXRGaWVsZHNWYWx1ZXMiLCJpbnN0cnVtZW50cyIsImdldEluc3RydW1lbnRzIiwiZmluZEluc3RydW1lbnQiLCJiaWdwYXlUb2tlbiIsInRydXN0ZWRTaGlwcGluZ0FkZHJlc3MiLCJpc0xvYWRpbmciLCJwYXlwYWxNZXNzYWdlc09wdGlvbnMiLCJhbW91bnQiLCJnZXRDaGVja291dE9yVGhyb3ciLCJvdXRzdGFuZGluZ0JhbGFuY2UiLCJwbGFjZW1lbnQiLCJpc1BheXBhbENvbW1lcmNlUHJvdmlkZXJFcnJvciIsImUiLCJwcm92aWRlcl9lcnJvciIsImlzQXBwU3dpdGNoRW5hYmxlZCIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJQYXlQYWxDb21tZXJjZUNyZWRpdFBheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNlY3JlZGl0IiwicGF5cGFsT3B0aW9ucyIsImZ1bmRpbmdTb3VyY2VzIiwiUEFZTEFURVIiLCJDUkVESVQiLCJoYXNSZW5kZXJlZFNtYXJ0QnV0dG9uIiwiY3JlYXRlU2NyaXB0TG9hZGVyIiwiUGF5UGFsQ29tbWVyY2VWZW5tb1BheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNldmVubW8iLCJWRU5NTyIsIlBheVBhbEludGVudCIsIlREU2VjdXJlVmVyaWZpY2F0aW9uTWV0aG9kIiwiVERTZWN1cmVBdXRoZW50aWNhdGlvblN0YXRlIiwiUGF5UGFsRmFzdGxhbmVBdXRoZW50aWNhdGlvblN0YXRlIiwiUGF5UGFsU2RrU2NyaXB0TG9hZGVyIiwiY3JlYXRlUGF5UGFsU2RrU2NyaXB0TG9hZGVyIiwiUGF5UGFsSW50ZWdyYXRpb25TZXJ2aWNlIiwicGF5cGFsUmVxdWVzdFNlbmRlciIsInBheXBhbFNka0xvYWRlciIsInNoaXBwaW5nT3B0aW9uSWQiLCJQYXlQYWxSZXF1ZXN0U2VuZGVyIiwiVGltZW91dEVycm9yIiwiUGF5UGFsQ29tbWVyY2VBbHRlcm5hdGl2ZU1ldGhvZHNQYXltZW50U3RyYXRlZ3kiLCJwYXlwYWxTZGtTY3JpcHRMb2FkZXIiLCJwb2xsaW5nSW50ZXJ2YWwiLCJtYXhQb2xsaW5nSW50ZXJ2YWxUaW1lIiwicG9sbGluZ1RpbWVyIiwic3RvcFBvbGxpbmciLCJub29wIiwiaXNQb2xsaW5nRW5hYmxlZCIsInBheXBhbGNvbW1lcmNlYWx0ZXJuYXRpdmVtZXRob2RzIiwic2hvdWxkUmVuZGVyRmllbGRzIiwiZmVhdHVyZXMiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjaGVja291dFNldHRpbmdzIiwiZXhwZXJpbWVudE5hbWUiLCJmYWxsYmFja1ZhbHVlIiwiaXNFeHBlcmltZW50RW5hYmxlZCIsInJlbmRlckZpZWxkcyIsImluaXRpYWxpemVQb2xsaW5nTWVjaGFuaXNtIiwiaXNOb25JbnN0YW50UGF5bWVudE1ldGhvZCIsInJlc2V0UG9sbGluZ01lY2hhbmlzbSIsInJlc29sdmVQcm9taXNlIiwicmVqZWN0UHJvbWlzZSIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Iiwib3JkZXJTdGF0dXMiLCJpc09yZGVyQXBwcm92ZWQiLCJBcHByb3ZlZCIsImlzUG9sbGluZ0Vycm9yIiwiUG9sbGluZ0Vycm9yIiwiZGVpbml0aWFsaXplUG9sbGluZ01lY2hhbmlzbSIsInJlaW5pdGlhbGl6ZVN0cmF0ZWd5IiwicGF5cGFsQW1wc1NkayIsImdldFBheXBhbEFtcHNTZGtPclRocm93IiwiYnV0dG9uU3R5bGUiLCJvbkluaXRCdXR0b24iLCJvbkNyZWF0ZU9yZGVyIiwiaGFuZGxlRmFpbHVyZSIsInVzZVN0b3JlQ3JlZGl0IiwicGFyYW1zIiwiZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93IiwiYXBtRmllbGRzQ29udGFpbmVyIiwiYXBtRmllbGRzU3R5bGVzIiwiZmllbGRDb250YWluZXJFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsImZpZWxkc09wdGlvbnMiLCJmaWVsZHMiLCJQYXltZW50RmllbGRzIiwidG9VcHBlckNhc2UiLCJnYXRld2F5IiwiVW50cnVzdGVkU2hpcHBpbmdDYXJkVmVyaWZpY2F0aW9uVHlwZSIsIkNvb2tpZVN0b3JhZ2UiLCJjb29raWVLZXkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJmaXJzdEluZGV4IiwiaW5kZXhPZiIsImxhc3RJbmRleCIsImRlY29kZVVSSUNvbXBvbmVudCIsInN1YnN0cmluZyIsInNldCIsInNlY3VyZSIsImNvb2tpZVRleHQiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInRvVVRDU3RyaW5nIiwibm93IiwiRGF0ZSIsIm1pbnV0ZXMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInJlbW92ZSIsIkhvc3RlZEZpZWxkVHlwZSIsIlBheXBhbEZhc3RsYW5lVXRpbHMiLCJpbml0aWFsaXplUGF5UGFsRmFzdGxhbmUiLCJpc1Rlc3RNb2RlRW5hYmxlZCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJwYXlwYWxGYXN0bGFuZSIsImRlZmF1bHRTdHlsZXMiLCJyb290IiwiYmFja2dyb3VuZENvbG9yUHJpbWFyeSIsIkZhc3RsYW5lIiwiZ2V0UGF5UGFsRmFzdGxhbmVPclRocm93IiwibG9va3VwQ3VzdG9tZXJPclRocm93IiwiaWRlbnRpdHkiLCJsb29rdXBDdXN0b21lckJ5RW1haWwiLCJ0cmlnZ2VyQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyIsImN1c3RvbWVyQ29udGV4dElkIiwidHJpZ2dlckF1dGhlbnRpY2F0aW9uRmxvdyIsInVwZGF0ZVN0b3JhZ2VTZXNzaW9uSWQiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImNvb2tpZXNPcHRpb24iLCJyZW1vdmVTdG9yYWdlU2Vzc2lvbklkIiwiZ2V0U3RvcmFnZVNlc3Npb25JZCIsIm1hcFBheVBhbEZhc3RsYW5lUHJvZmlsZVRvQmNDdXN0b21lckRhdGEiLCJhdXRoZW50aWNhdGlvblJlc3VsdCIsImF1dGhlbnRpY2F0aW9uU3RhdGUiLCJwcm9maWxlRGF0YSIsInBheXBhbEJpbGxpbmdBZGRyZXNzIiwiY2FyZCIsInBheW1lbnRTb3VyY2UiLCJiaWxsaW5nQWRkcmVzcyIsInBheXBhbFNoaXBwaW5nQWRkcmVzcyIsInNoaXBwaW5nQWRkcmVzcyIsInBheXBhbFByb2ZpbGVOYW1lIiwicGF5cGFsSW5zdHJ1bWVudCIsIm1hcFBheVBhbFRvQmNBZGRyZXNzIiwicGhvbmVOdW1iZXIiLCJtYXBQYXlQYWxUb0JjSW5zdHJ1bWVudCIsImFkZHJlc3NlcyIsImZpbHRlckFkZHJlc3NlcyIsIlVOUkVDT0dOSVpFRCIsImJyYW5kIiwiZXhwaXJ5IiwibGFzdERpZ2l0cyIsImV4cGlyeVllYXIiLCJleHBpcnlNb250aCIsImRlZmF1bHRJbnN0cnVtZW50IiwiaWluIiwibGFzdDQiLCJtZXRob2QiLCJ1bnRydXN0ZWRTaGlwcGluZ0NhcmRWZXJpZmljYXRpb25Nb2RlIiwiUEFOIiwibWFwQmNUb1BheVBhbEFkZHJlc3MiLCJhZGRyZXNzTGluZTEiLCJhZGRyZXNzTGluZTIiLCJhZG1pbkFyZWExIiwiYWRtaW5BcmVhMiIsInByb2ZpbGVOYW1lIiwiZnVsbE5hbWUiLCJwaG9uZURhdGEiLCJuYXRpb25hbE51bWJlciIsImNvdW50cnkiLCJyZWR1Y2UiLCJjdXN0b21lckFkZHJlc3NlcyIsImN1cnJlbnRBZGRyZXNzIiwic29tZSIsImN1c3RvbWVyQWRkcmVzcyIsImlzRXF1YWxBZGRyZXNzZXMiLCJmaXJzdEFkZHJlc3MiLCJzZWNvbmRBZGRyZXNzIiwiaXNFcXVhbCIsIm5vcm1hbGl6ZUFkZHJlc3MiLCJvbWl0IiwiY3JlYXRlUGF5cGFsRmFzdGxhbmVVdGlscyIsImlzQ3JlZGl0Q2FyZEZvcm1GaWVsZHMiLCJDYXJkTnVtYmVyIiwiQ2FyZE5hbWUiLCJDYXJkRXhwaXJ5IiwiaXNDcmVkaXRDYXJkVmF1bHRlZEZvcm1GaWVsZHMiLCJDYXJkTnVtYmVyVmVyaWZpY2F0aW9uIiwiQ2FyZENvZGVWZXJpZmljYXRpb24iLCJDYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIiwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIiwiTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUiLCJOb3RJbml0aWFsaXplZEVycm9yIiwiQ3VzdG9tZXJOb3RJbml0aWFsaXplZCIsIlBheW1lbnROb3RJbml0aWFsaXplZCIsIlNoaXBwaW5nTm90SW5pdGlhbGl6ZWQiLCJTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkIiwiUGF5bWVudEludmFsaWRGb3JtRXJyb3IiLCJkZXRhaWxzIiwiUGF5UGFsQ29tbWVyY2VDcmVkaXRDYXJkc1BheW1lbnRTdHJhdGVneSIsInBheXBhbEludGVncmF0aW9uU2VydmljZSIsInBheXBhbEZhc3RsYW5lVXRpbHMiLCJwYXlwYWxjb21tZXJjZWNyZWRpdGNhcmRzIiwicGF5cGFsQ29tbWVyY2VJbml0aWFsaXphdGlvbk9wdGlvbnMiLCJmb3JtIiwib25DcmVkaXRDYXJkRmllbGRzUmVuZGVyaW5nRXJyb3IiLCJvbkxvYWRDb21wbGV0ZSIsImhvc3RlZEZvcm1PcHRpb25zIiwiaXNDcmVkaXRDYXJkRm9ybSIsImlzQ3JlZGl0Q2FyZFZhdWx0ZWRGb3JtIiwiaGFzVW5kZWZpbmVkVmFsdWVzIiwiaW5pdGlhbGl6ZUZpZWxkcyIsInNob3VsZEluaXRpYWxpemVQYXlQYWxGYXN0bGFuZSIsImluaXRpYWxpemVQYXlQYWxGYXN0bGFuZU9yVGhyb3ciLCJleGVjdXRpb25QYXltZW50RGF0YSIsInZhbGlkYXRlSG9zdGVkRm9ybU9yVGhyb3ciLCJzdWJtaXRIb3N0ZWRGb3JtIiwiZ2V0SW5zdHJ1bWVudFBhcmFtcyIsInJldHVybmVkT3JkZXJJZCIsInN1Ym1pdFBheW1lbnRQYXlsb2FkIiwicmV0dXJuZWRWYXVsdGVkVG9rZW4iLCJjdnZGaWVsZCIsImV4cGlyeUZpZWxkIiwibnVtYmVyRmllbGQiLCJuYW1lRmllbGQiLCJub25jZSIsInZlcmlmaWNhdGlvbl9ub25jZSIsImNhcmRfd2l0aF9vcmRlciIsImZvcm1PcHRpb25zIiwiZXhlY3V0ZUNhbGxiYWNrIiwiZ2V0RXhlY3V0ZUNhbGxiYWNrIiwiY2FyZEZpZWxkc0NvbmZpZyIsImdldElucHV0U3R5bGVzIiwidmF1bHRTZXR1cFRva2VuIiwibGlhYmlsaXR5U2hpZnQiLCJObyIsIlVua25vd24iLCJpbnB1dEV2ZW50cyIsIm9uQ2hhbmdlIiwiZXZlbnQiLCJvbkNoYW5nZUhhbmRsZXIiLCJvbkZvY3VzIiwib25Gb2N1c0hhbmRsZXIiLCJvbkJsdXIiLCJvbkJsdXJIYW5kbGVyIiwib25JbnB1dFN1Ym1pdFJlcXVlc3QiLCJjYXJkRmllbGRzIiwiQ2FyZEZpZWxkcyIsInN0eWxpemVJbnB1dENvbnRhaW5lcnMiLCJyZW5kZXJWYXVsdGVkRmllbGRzIiwiY3JlYXRlVmF1bHRTZXR1cFRva2VuQ2FsbGJhY2siLCJjcmVhdGVPcmRlckNhbGxiYWNrIiwiY3JlYXRlVmF1bHRTZXR1cFRva2VuIiwiZ2V0Q2FyZEZpZWxkc09yVGhyb3ciLCJjYXJkQ29kZSIsImNvbnRhaW5lcklkIiwiQ1ZWRmllbGQiLCJwbGFjZWhvbGRlciIsImNhcmRFeHBpcnkiLCJFeHBpcnlGaWVsZCIsImNhcmROYW1lIiwiTmFtZUZpZWxkIiwiY2FyZE51bWJlciIsIk51bWJlckZpZWxkIiwiY2FyZENvZGVWZXJpZmljYXRpb24iLCJjYXJkRXhwaXJ5VmVyaWZpY2F0aW9uIiwiY2FyZE51bWJlclZlcmlmaWNhdGlvbiIsImdldEZpZWxkVHlwZUJ5RW1pdHRlZEZpZWxkIiwiZW1pdHRlZEJ5IiwiZmllbGRUeXBlIiwibWFwRmllbGRUeXBlIiwic3VibWl0Q29uZmlnIiwic3VibWl0IiwiY2FyZEZpZWxkc1N0YXRlIiwidGhlbiIsInZhbGlkYXRpb25EYXRhIiwiZ2V0VmFsaWRpdHlEYXRhIiwiaXNWYWxpZCIsIm1hcFZhbGlkYXRpb25FcnJvcnMiLCJ1cGRhdGVkRmllbGRzIiwiY2FyZE5hbWVGaWVsZCIsImZpZWxkc0tleXMiLCJldmVyeSIsImZpZWxkc0Vycm9ycyIsImdldEludmFsaWRFcnJvckJ5RmllbGRUeXBlIiwiQ2FyZENvZGUiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiY29tbW9uU3R5bGVzIiwiZGVmYXVsdCIsImZvbnRTaXplIiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJvdXRsaW5lIiwicGFkZGluZyIsImlucHV0IiwidmFsdWVzIiwiYm94U2hhZG93IiwiYmFja2dyb3VuZCIsIm1hcmdpbkJvdHRvbSIsIm1hcmdpbkxlZnQiLCJvbkVudGVyIiwicGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lciIsInBheXBhbENvbW1lcmNlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJjdXN0b21lciIsImlzQWNjZWxlcmF0ZWRDaGVja291dEVuYWJsZWQiLCJpc1BheVBhbENvbW1lcmNlQW5hbHl0aWNzVjJFbmFibGVkIiwiY29ubmVjdENsaWVudFRva2VuIiwicGF5UGFsRmFzdGxhbmVTZGsiLCJQYXlwYWxDb21tZXJjZVJhdGVwYXlQYXltZW50U3RyYXRlZ3kiLCJwYXlwYWxjb21tZXJjZXJhdGVwYXkiLCJsZWdhbFRleHRDb250YWluZXIiLCJsb2FkaW5nQ29udGFpbmVySWQiLCJjcmVhdGVGcmF1ZE5ldFNjcmlwdCIsImxvYWRGcmF1ZG5ldENvbmZpZyIsInJlbmRlckxlZ2FsVGV4dCIsIm1ldGFkYXRhSWQiLCJndWlkIiwicmF0ZXBheUJpcnRoRGF0ZSIsInJhdGVwYXlQaG9uZU51bWJlciIsInJhdGVwYXlQaG9uZUNvdW50cnlDb2RlIiwicmF0ZV9wYXkiLCJiaXJ0aF9kYXRlIiwibm9ybWFsaXplRGF0ZSIsImZyYXVkTmV0U2NyaXB0IiwicXVlcnlTZWxlY3RvckFsbCIsImZyYXVkTmV0Q29uZmlnIiwibGVnYWxUZXh0Q29udGFpbmVyRWxlbWVudCIsImRhdGUiLCJmb3JtYXR0ZWREYXRlIiwiZm9ybWF0RGF0ZSIsImZvcm1hdHRlZE1vbnRoIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImxlZ2FsVGV4dENvbnRhaW5lckVsZW1lbnRJZCIsImxlZ2FsVGV4dENvbnRhaW5lcklkIiwiYnV0dG9uQ29udGFpbmVySWQiLCJidXR0b25Db250YWluZXIiLCJidXR0b25Db250YWluZXJQYXJlbnQiLCJwYXJlbnROb2RlIiwic2V0QXR0cmlidXRlIiwicHJlcGVuZCIsInJhdGVQYXlCdXR0b24iLCJMZWdhbCIsIlBBWV9VUE9OX0lOVk9JQ0UiLCJ0ZXN0TW9kZSIsInNjcmlwdEVsZW1lbnQiLCJnZW5lcmF0ZUdVSUQiLCJmIiwicyIsInNhbmRib3giLCJKU09OIiwic3RyaW5naWZ5IiwiaSIsIk1hdGgiLCJmbG9vciIsImNoYXJhY3RlcnMiLCJyYW5kb20iLCJzY3JpcHQiLCJzcmMiLCJ1c2VNZXRhZGF0YSIsIlBvbGxpbmdTdG9wIiwiaXNJbnZhbGlkU3R5bGVPcHRpb24iLCJzdHlsZU9wdGlvbiIsImdldEZhc3RsYW5lU3R5bGVzIiwic3R5bGVTZXR0aW5ncyIsInVpU3R5bGVzIiwiZmFzdGxhbmVTdHlsZXMiLCJ0b2dnbGUiLCJ0ZXh0Qm9keSIsInRleHRDYXB0aW9uIiwiY2FwdGlvbiIsImJyYW5kaW5nIiwiY2xlYW5VcEZhc3RsYW5lU3R5bGVzIiwiZmFzdGxhbmVSb290U2V0dGluZ3NCYWNrZ3JvdW5kQ29sb3IiLCJlcnJvckNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NFcnJvckNvbG9yIiwiZmFzdGxhbmVSb290U2V0dGluZ3NGb250RmFtaWx5IiwiZm9udFNpemVCYXNlIiwiZmFzdGxhbmVSb290U2V0dGluZ3NGb250U2l6ZSIsImZhc3RsYW5lUm9vdFNldHRpbmdzUGFkZGluZyIsInByaW1hcnlDb2xvciIsImZhc3RsYW5lUm9vdFNldHRpbmdzUHJpbWFyeUNvbG9yIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyUmFkaXVzIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQm9yZGVyQ29sb3IiLCJmb2N1c0JvcmRlckNvbG9yIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzRm9jdXNCb3JkZXJCYXNlIiwiZmFzdGxhbmVJbnB1dFNldHRpbmdzQmFja2dyb3VuZENvbG9yIiwiYm9yZGVyV2lkdGgiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NCb3JkZXJXaWR0aCIsInRleHRDb2xvckJhc2UiLCJmYXN0bGFuZUlucHV0U2V0dGluZ3NUZXh0Q29sb3JCYXNlIiwiY29sb3JQcmltYXJ5IiwiZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yUHJpbWFyeSIsImNvbG9yU2Vjb25kYXJ5IiwiZmFzdGxhbmVUb2dnbGVTZXR0aW5nc0NvbG9yU2Vjb25kYXJ5IiwiZmFzdGxhbmVUZXh0Qm9keVNldHRpbmdzQ29sb3IiLCJmYXN0bGFuZVRleHRCb2R5U2V0dGluZ3NGb250U2l6ZSIsImZhc3RsYW5lVGV4dENhcHRpb25TZXR0aW5nc0NvbG9yIiwiZmFzdGxhbmVUZXh0Q2FwdGlvblNldHRpbmdzRm9udFNpemUiLCJmYXN0bGFuZUJyYW5kaW5nU2V0dGluZ3MiLCJtZXJnZUZhc3RsYW5lU3R5bGVzIiwiaXNQYXlQYWxGYXN0bGFuZUN1c3RvbWVyIiwiUGF5cGFsQ29tbWVyY2VGYXN0bGFuZVBheW1lbnRTdHJhdGVneSIsInBheXBhbGNvbW1lcmNlZmFzdGxhbmUiLCJpc0Zhc3RsYW5lU3R5bGluZ0VuYWJsZWQiLCJ0aHJlZURTVmVyaWZpY2F0aW9uTWV0aG9kIiwic2hvdWxkUnVuQXV0aGVudGljYXRpb25GbG93IiwicnVuUGF5UGFsQXV0aGVudGljYXRpb25GbG93T3JUaHJvdyIsImluaXRpYWxpemVQYXlQYWxQYXltZW50Q29tcG9uZW50IiwicmVuZGVyUGF5UGFsUGF5bWVudENvbXBvbmVudCIsImhhbmRsZVBheVBhbFN0b3JlZEluc3RydW1lbnRDaGFuZ2UiLCJvcmRlclJlcXVlc3QiLCJpc1ZhdWx0ZWRGbG93IiwiaXNQYXlwYWxGYXN0bGFuZVJlcXVlc3RFcnJvciIsImludmFsaWRSZXF1ZXN0RXJyb3IiLCJ0cmFuc2xhdGlvbktleSIsImdldEN1c3RvbWVyT3JUaHJvdyIsInBheXBhbEZhc3RsYW5lQ3VzdG9tZXIiLCJwYXlwYWxGYXN0bGFuZVNlc3Npb25JZCIsImlzR3Vlc3QiLCJDQU5DRUxFRCIsImdldEN1c3RvbWVyIiwiZ2V0QmlsbGluZ0FkZHJlc3MiLCJjdXN0b21lckVtYWlsIiwidXBkYXRlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJ0cmltIiwiY2FyZENvbXBvbmVudE9wdGlvbnMiLCJjYXJkaG9sZGVyTmFtZSIsInByZWZpbGwiLCJlbmFibGVkIiwicGF5cGFsQ29tcG9uZW50TWV0aG9kcyIsIkZhc3RsYW5lQ2FyZENvbXBvbmVudCIsImdldFBheVBhbENvbXBvbmVudE1ldGhvZHNPclRocm93IiwiaXMzZHNFbmFibGVkIiwiZ2V0M0RTTm9uY2UiLCJwYXlwYWxfZmFzdGxhbmVfdG9rZW4iLCJnZXRQYXltZW50VG9rZW4iLCJmYXN0bGFuZVRva2VuIiwiZ2V0T3JkZXJPclRocm93IiwiY2hlY2tvdXRVcmwiLCJsaW5rcyIsImNoZWNrb3V0TGluayIsInRocmVlRG9tYWluU2VjdXJlQ29tcG9uZW50IiwiVGhyZWVEb21haW5TZWN1cmVDbGllbnQiLCJ0aHJlZURvbWFpblNlY3VyZVBhcmFtZXRlcnMiLCJvcmRlckFtb3VudCIsInRvRml4ZWQiLCJ0aHJlZURTUmVxdWVzdGVkIiwiQWx3YXlzIiwidHJhbnNhY3Rpb25Db250ZXh0IiwiZXhwZXJpZW5jZV9jb250ZXh0IiwibG9jYWxlIiwicmV0dXJuX3VybCIsImNhbmNlbF91cmwiLCJpc1RocmVlRG9tYWluU2VjdXJlRWxpZ2libGUiLCJ0aHJlZURTTm9uY2UiLCJFcnJvcmVkIiwiQ2FuY2VsbGVkIiwiU3VjY2VlZGVkIiwiWWVzIiwiUG9zc2libGUiLCJwYXlwYWxBeG9TZGsiLCJzZWxlY3Rpb25DaGFuZ2VkIiwic2VsZWN0ZWRDYXJkIiwicHJvZmlsZSIsInNob3dDYXJkU2VsZWN0b3IiLCJzZWxlY3RlZEluc3RydW1lbnQiLCJQYXlQYWxDb21tZXJjZUN1c3RvbWVyU3RyYXRlZ3kiLCJnZXRQYXltZW50TWV0aG9kIiwic2lnbkluIiwiY3JlZGVudGlhbHMiLCJzaWduSW5DdXN0b21lciIsInNpZ25PdXQiLCJzaWduT3V0Q3VzdG9tZXIiLCJleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0IiwiY29udGludWVXaXRoQ2hlY2tvdXRDYWxsYmFjayIsIm9uQ29tcGxldGUiLCJjaGVja291dFRvcEJ1dHRvblN0eWxlcyIsImRlZmF1bHRDYWxsYmFja3MiLCJob3N0ZWRDaGVja291dENhbGxiYWNrcyIsIm9uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlIiwib25TaGlwcGluZ09wdGlvbnNDaGFuZ2UiLCJvbkhvc3RlZENoZWNrb3V0QXBwcm92ZSIsImJ1dHRvblJlbmRlck9wdGlvbnMiLCJ1cGRhdGVCaWxsaW5nQWRkcmVzcyIsImxpbmVJdGVtcyIsInBoeXNpY2FsSXRlbXMiLCJ1cGRhdGVTaGlwcGluZ0FkZHJlc3MiLCJzaGlwcGluZ09wdGlvbiIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiUGF5UGFsQ29tbWVyY2VDcmVkaXRDdXN0b21lclN0cmF0ZWd5IiwicGF5cGFsQ29tbWVyY2VDcmVkaXQiLCJQYXlQYWxDb21tZXJjZVZlbm1vQ3VzdG9tZXJTdHJhdGVneSIsInBheXBhbEJ1dHRvblJlbmRlciIsIlBheVBhbENvbW1lcmNlRmFzdGxhbmVDdXN0b21lclN0cmF0ZWd5IiwiY2hlY2tvdXRQYXltZW50TWV0aG9kRXhlY3V0ZWQiLCJpc0F1dGhlbnRpY2F0aW9uRmxvd0NhbmNlbGVkIiwidXBkYXRlQ3VzdG9tZXJEYXRhU3RhdGUiLCJ1cGRhdGVkU3RhdGUiLCJpc0Zhc3RsYW5lU2hpcHBpbmdPcHRpb25BdXRvU2VsZWN0RW5hYmxlZCIsImNvbnNpZ25tZW50cyIsImdldENvbnNpZ25tZW50cyIsImZpcnN0U2hpcHBpbmdPcHRpb24iLCJQYXlQYWxDb21tZXJjZUJ1dHRvblN0cmF0ZWd5IiwiaXNCdXlOb3dGbG93IiwibG9hZERlZmF1bHRDaGVja291dCIsIm9uRWxpZ2liaWxpdHlGYWlsdXJlIiwiYnV5Tm93Q2FydCIsImxvYWRDaGVja291dCIsImJ1eU5vd0Zsb3dDYWxsYmFja3MiLCJQYXlQYWxDb21tZXJjZUNyZWRpdEJ1dHRvblN0cmF0ZWd5IiwibWVzc2FnaW5nQ29udGFpbmVySWQiLCJtZXNzYWdpbmdDb250YWluZXIiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwYXlwYWxNZXNzYWdlc1NkayIsIlBheVBhbENvbW1lcmNlVmVubW9CdXR0b25TdHJhdGVneSIsImdldFZhbGlkVmVubW9CdXR0b25TdHlsZXMiLCJ2YWxpZEJ1dHRvblN0eWxlIiwiZ29sZCIsIlBheVBhbENvbW1lcmNlQWx0ZXJuYXRpdmVNZXRob2RzQnV0dG9uU3RyYXRlZ3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/paypal-commerce.js\n\n}");

/***/ })

}]);