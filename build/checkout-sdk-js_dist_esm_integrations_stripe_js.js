"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonpCheckout"] = self["webpackJsonpCheckout"] || []).push([["checkout-sdk-js_dist_esm_integrations_stripe_js"],{

/***/ "../checkout-sdk-js/dist/esm/integrations/stripe.js":
/*!**********************************************************!*\
  !*** ../checkout-sdk-js/dist/esm/integrations/stripe.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createLinkV2ButtonStrategy: () => (/* binding */ Pe),\n/* harmony export */   createStripeCSPaymentStrategy: () => (/* binding */ ce),\n/* harmony export */   createStripeLinkV2CustomerStrategy: () => (/* binding */ Ce),\n/* harmony export */   createStripeOCSPaymentStrategy: () => (/* binding */ ae),\n/* harmony export */   createStripeUPECustomerStrategy: () => (/* binding */ he),\n/* harmony export */   createStripeUPEPaymentStrategy: () => (/* binding */ ne),\n/* harmony export */   createStripeV3PaymentStrategy: () => (/* binding */ T)\n/* harmony export */ });\n/* harmony import */ var _bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @bigcommerce/script-loader */ \"../checkout-sdk-js/node_modules/@bigcommerce/script-loader/lib/index.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash */ \"../checkout-sdk-js/node_modules/lodash/lodash.js\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_1__);\nvar s,a,d={};function l(e,t){return Object.assign(e,{resolveIds:t})}d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);class c extends Error{constructor(e){var t;super(e||\"An unexpected error has occurred.\"),this.name=\"StandardError\",this.type=\"standard\",t=new.target.prototype,Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,\"function\"==typeof Error.captureStackTrace?Error.captureStackTrace(this,new.target):this.stack=new Error(this.message).stack}}class u extends c{constructor(e){super(e||\"Invalid arguments have been provided.\"),this.name=\"InvalidArgumentError\",this.type=\"invalid_argument\"}}class h extends u{constructor(e){let t=\"Unable to submit payment for the order because the payload is invalid.\";e&&(t=`${t} Make sure the following fields are provided correctly: ${e.join(\", \")}.`),super(t),this.name=\"PaymentArgumentInvalidError\"}}function p(e){return!(\"object\"!=typeof e||null===e||void 0!==e.shouldSaveInstrument&&\"boolean\"!=typeof e.shouldSaveInstrument||void 0!==e.shouldSetAsDefaultInstrument&&\"boolean\"!=typeof e.shouldSetAsDefaultInstrument)}function m(e){return Boolean(e.instrumentId)}!function(e){e[e.MissingBillingAddress=0]=\"MissingBillingAddress\",e[e.MissingCart=1]=\"MissingCart\",e[e.MissingCheckout=2]=\"MissingCheckout\",e[e.MissingConsignments=3]=\"MissingConsignments\",e[e.MissingCustomer=4]=\"MissingCustomer\",e[e.MissingCheckoutConfig=5]=\"MissingCheckoutConfig\",e[e.MissingOrder=6]=\"MissingOrder\",e[e.MissingOrderConfig=7]=\"MissingOrderConfig\",e[e.MissingOrderId=8]=\"MissingOrderId\",e[e.MissingPayment=9]=\"MissingPayment\",e[e.MissingPaymentId=10]=\"MissingPaymentId\",e[e.MissingPaymentInstrument=11]=\"MissingPaymentInstrument\",e[e.MissingPaymentMethod=12]=\"MissingPaymentMethod\",e[e.MissingPaymentRedirectUrl=13]=\"MissingPaymentRedirectUrl\",e[e.MissingPaymentStatus=14]=\"MissingPaymentStatus\",e[e.MissingPaymentToken=15]=\"MissingPaymentToken\",e[e.MissingShippingAddress=16]=\"MissingShippingAddress\"}(s||(s={}));class y extends c{constructor(e){super(function(e){switch(e){case s.MissingBillingAddress:return\"Unable to proceed because billing address data is unavailable.\";case s.MissingCart:return\"Unable to proceed because cart data is unavailable.\";case s.MissingConsignments:return\"Unable to proceed because consignments data is unavailable.\";case s.MissingCheckout:return\"Unable to proceed because checkout data is unavailable.\";case s.MissingCustomer:return\"Unable to proceed because customer data is unavailable.\";case s.MissingCheckoutConfig:case s.MissingOrderConfig:return\"Unable to proceed because configuration data is unavailable.\";case s.MissingOrder:return\"Unable to proceed because order data is unavailable.\";case s.MissingOrderId:return\"Unable to proceed because order ID is unavailable or not generated yet.\";case s.MissingPayment:return\"Unable to proceed because payment data is unavailable.\";case s.MissingPaymentToken:return\"Unable to proceed because the token required to submit a payment is missing.\";case s.MissingPaymentMethod:return\"Unable to proceed because payment method data is unavailable or not properly configured.\";case s.MissingShippingAddress:return\"Unable to proceed because shipping address data is unavailable.\";default:return\"Unable to proceed because the required data is unavailable.\"}}(e)),this.subtype=e,this.name=\"MissingDataError\",this.type=\"missing_data\"}}class g extends c{constructor(){super(\"The current order does not need to be finalized at this stage.\"),this.name=\"OrderFinalizationNotRequiredError\",this.type=\"order_finalization_not_required\"}}!function(e){e[e.CheckoutButtonNotInitialized=0]=\"CheckoutButtonNotInitialized\",e[e.CustomerNotInitialized=1]=\"CustomerNotInitialized\",e[e.PaymentNotInitialized=2]=\"PaymentNotInitialized\",e[e.ShippingNotInitialized=3]=\"ShippingNotInitialized\",e[e.SpamProtectionNotInitialized=4]=\"SpamProtectionNotInitialized\"}(a||(a={}));class v extends c{constructor(e){super(function(e){switch(e){case a.CustomerNotInitialized:return\"Unable to proceed because the customer step of checkout has not been initialized.\";case a.PaymentNotInitialized:return\"Unable to proceed because the payment step of checkout has not been initialized.\";case a.ShippingNotInitialized:return\"Unable to proceed because the shipping step of checkout has not been initialized.\";case a.SpamProtectionNotInitialized:return\"Unable to proceed because the checkout spam protection has not been initialized.\";default:return\"Unable to proceed because the required component has not been initialized.\"}}(e)),this.subtype=e,this.name=\"NotInitializedError\",this.type=\"not_initialized\"}}const S=e=>\"object\"==typeof e&&null!==e&&\"body\"in e;class _ extends c{constructor(e){super(e||\"Payment process was cancelled.\"),this.name=\"PaymentMethodCancelledError\",this.type=\"payment_cancelled\"}}function f(e){return null!==e&&\"object\"==typeof e&&\"cardNumberElementOptions\"in e&&\"cardCvcElementOptions\"in e&&\"cardExpiryElementOptions\"in e&&void 0!==e.cardNumberElementOptions&&void 0!==e.cardCvcElementOptions&&void 0!==e.cardExpiryElementOptions}var C,E,I,P;!function(e){e.Solid=\"solid\",e.Default=\"default\"}(C||(C={})),function(e){e.Alipay=\"alipay\",e.CardCvc=\"cardCvc\",e.CardExpiry=\"cardExpiry\",e.CardNumber=\"cardNumber\",e.CreditCard=\"card\",e.IDEAL=\"idealBank\",e.Sepa=\"iban\"}(E||(E={})),function(e){e.Alipay=\"alipay\",e.CreditCard=\"card\",e.IDEAL=\"ideal\",e.Sepa=\"sepa_debit\"}(I||(I={})),function(e){e.AuthFailure=\"auth_failure\"}(P||(P={}));class b extends c{constructor(e){super(e===P.AuthFailure?\"User did not authenticate\":\"There was an error while processing your payment. Please try again or contact us.\"),this.type=\"stripev3_error\",this.subtype=e}}var w=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};const A=[E.Alipay,E.IDEAL];class O{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){return w(this,void 0,void 0,function*(){const{stripev3:t,methodId:i,gatewayId:n}=e;if(!n)throw new u('Unable to initialize payment because \"gatewayId\" argument is not provided.');this.initializeOptions=t,this.isDeinitialize=!1;const r=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i),{initializationData:{stripePublishableKey:o,stripeConnectedAccount:s,useIndividualCardFields:a,allowRedisplayForStoredInstruments:d}}=r;this._allowRedisplayForStoredInstruments=d;const l=this.getInitializeOptions().form;this.useIndividualCardFields=a,this.stripeV3Client=yield this.loadStripeJs(o,s),this.isCreditCard(i)&&this.shouldShowTSVHostedForm(i,n)&&l?this.hostedForm=yield this.mountCardVerificationFields(l):this.stripeElement=yield this.mountCardFields(i)})}execute(e,i){var n,r;return w(this,void 0,void 0,function*(){const{payment:o}=e,a=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);let d,l;if(!o||!o.paymentData)throw new h([\"payment.paymentData\"]);const{paymentData:c,gatewayId:u,methodId:g}=o,{shouldSaveInstrument:v,shouldSetAsDefaultInstrument:S}=p(c)?c:{shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1},_=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)(A,g),{isStoreCreditApplied:f}=this.paymentIntegrationService.getState().getCheckoutOrThrow();f&&(yield this.paymentIntegrationService.applyStoreCredit(f));try{_&&(yield this.paymentIntegrationService.submitOrder(a,i)),u&&(yield this.paymentIntegrationService.loadPaymentMethod(u,{params:{method:g}}));const e=this.paymentIntegrationService.getState();if(m(c)){yield this.paymentIntegrationService.submitOrder(a,i);const{instrumentId:t}=c,n=e.getPaymentMethodOrThrow(o.methodId).clientToken;if(!n)throw new y(s.MissingPaymentMethod);return yield this.executeWithVaulted(o,t,S,n)}const t=e.getPaymentMethodOrThrow(g),h=yield this.confirmStripePayment(t),{clientToken:p,method:f}=t,{id:C}=null!==(r=null!==(n=h.paymentIntent)&&void 0!==n?n:h.paymentMethod)&&void 0!==r?r:{id:\"\"};l=h.error,d={credit_card_token:{token:C},vault_payment_instrument:v,confirm:!1,set_as_default_stored_instrument:S},f===E.CreditCard&&(d.client_token=p),_||(yield this.paymentIntegrationService.submitOrder(a,i));const I=this.buildPaymentPayload(g,d,S);yield this.paymentIntegrationService.submitPayment(I)}catch(e){yield this.processAdditionalAction(this.handleEmptyPaymentIntentError(e,l),g,v,S)}})}finalize(){return Promise.reject(new g)}deinitialize(){return this.hostedForm&&this.hostedForm.detach(),this.isDeinitialize=!0,this.unmountElement(),Promise.resolve()}buildPaymentPayload(e,t,i){return{methodId:e,paymentData:i?{formattedPayload:Object.assign(Object.assign({},t),{set_as_default_stored_instrument:i})}:{formattedPayload:t}}}isCancellationError(e){var t,i;return e&&-1!==(null===(i=null===(t=e.payment_intent.last_payment_error)||void 0===t?void 0:t.message)||void 0===i?void 0:i.indexOf(\"canceled\"))}isAuthError(e){return\"payment_intent_authentication_failure\"===(null==e?void 0:e.code)}isCreditCard(e){return e===I.CreditCard}isHostedFieldAvailable(){var e;const t=this.getInitializeOptions(),r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.omitBy)(null===(e=t.form)||void 0===e?void 0:e.fields,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty);return!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(r)}isHostedPaymentFormEnabled(e,t){const{getPaymentMethodOrThrow:i}=this.paymentIntegrationService.getState(),n=i(e,t);return Boolean(n.config.isHostedFormEnabled)}confirmStripePayment(e){return w(this,void 0,void 0,function*(){const{clientToken:t,method:i,returnUrl:n}=e;if(!t)throw new y(s.MissingPaymentMethod);switch(i){case E.Alipay:return this.getStripeJs().confirmAlipayPayment(t,{return_url:n},{handleActions:!1});case E.IDEAL:{const e=this.mapStripePaymentData(I.IDEAL,n);return this.getStripeJs().confirmIdealPayment(t,e,{handleActions:!1})}case E.Sepa:{const e=this.mapStripePaymentData(I.Sepa);return this.getStripeJs().confirmSepaDebitPayment(t,e)}default:{const e=this.useIndividualCardFields?this.getStripeCardElements()[0]:this.getStripeElement(),t=this.mapStripeBillingDetails(this.paymentIntegrationService.getState().getBillingAddress(),this.paymentIntegrationService.getState().getCustomer()),i=this._allowRedisplayForStoredInstruments;return this.getStripeJs().createPaymentMethod(Object.assign({type:I.CreditCard,card:e,billing_details:t},i?{allow_redisplay:\"always\"}:{}))}}})}executeWithVaulted(e,t,i,n){var r;return w(this,void 0,void 0,function*(){const o={bigpay_token:{token:t},confirm:!0,client_token:n,set_as_default_stored_instrument:i};if(this.isHostedPaymentFormEnabled(e.methodId,e.gatewayId)&&this.hostedForm){const t=this.hostedForm;return e.paymentData&&m(e.paymentData)&&(e.paymentData=Object.assign(Object.assign({},e.paymentData),{instrumentId:JSON.stringify({token:(null===(r=e.paymentData)||void 0===r?void 0:r.instrumentId)||\"\",client_token:n})})),yield t.validate(),yield t.submit(e),this.paymentIntegrationService.loadCurrentOrder()}const s=this.buildPaymentPayload(e.methodId,o,i);return this.paymentIntegrationService.submitPayment(s)})}getInitializeOptions(){if(!this.initializeOptions)throw new v(a.PaymentNotInitialized);return this.initializeOptions}getStripeCardElements(){if(!this.stripeCardElements)throw new v(a.PaymentNotInitialized);return this.stripeCardElements}getStripeElement(){if(!this.stripeElement)throw new v(a.PaymentNotInitialized);return this.stripeElement}getStripeJs(){if(!this.stripeV3Client)throw new v(a.PaymentNotInitialized);return this.stripeV3Client}handleEmptyPaymentIntentError(e,t){return S(e)&&(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"required_field\"})&&t?new Error(t.message):e}loadStripeJs(e,t){return w(this,void 0,void 0,function*(){return this.stripeV3Client?Promise.resolve(this.stripeV3Client):this.scriptLoader.load(e,t,this.paymentIntegrationService.getState().getLocale())})}mapStripeAddress(e){if(e){const{city:t,countryCode:i,address1:n,address2:r,postalCode:o,stateOrProvinceCode:s}=e;return{city:t,country:i,line1:n,line2:r,postal_code:o,state:s}}return{line1:\"\"}}mapStripeBillingDetails(e,t){const{firstName:i,lastName:n}=e||t||{firstName:\"Guest\",lastName:\"\"},r=`${i} ${n}`.trim(),{options:o}=this.getInitializeOptions();if(this.useIndividualCardFields&&f(o)){const{zipCodeElementOptions:t}=o;if(t){const i=document.getElementById(t.containerId)?document.getElementById(t.containerId).value:\"\";i&&e&&(e=Object.assign(Object.assign({},e),{postalCode:i}))}}const s={address:this.mapStripeAddress(e)};if(t&&t.addresses[0]&&function(e){return\"object\"==typeof e&&null!==e&&\"id\"in e&&void 0!==e.id}(t.addresses[0])){const e=t.addresses[0],{email:i}=t,{phone:n}=e;return n?Object.assign(Object.assign({},s),{email:i,name:r,phone:n}):Object.assign(Object.assign({},s),{email:i,name:r})}if(e){const{email:t,phone:i}=e;return i?Object.assign(Object.assign({},s),{email:t,name:r,phone:i}):Object.assign(Object.assign({},s),{email:t,name:r})}return Object.assign(Object.assign({},s),{name:r})}mapStripePaymentData(e,t){const i=this.paymentIntegrationService.getState().getCustomer(),n=this.paymentIntegrationService.getState().getBillingAddress(),r={payment_method:{[e]:this.getStripeElement(),billing_details:this.mapStripeBillingDetails(n,i)}};return e===I.IDEAL?Object.assign(Object.assign({},r),{return_url:t}):r}mountCardFields(e){const{options:t,containerId:i}=this.getInitializeOptions();let n;return new Promise((r,o)=>{switch(this.stripeElements||(this.stripeElements=this.getStripeJs().elements()),e){case E.CreditCard:if(this.useIndividualCardFields&&f(t)){const{cardNumberElementOptions:e,cardExpiryElementOptions:i,cardCvcElementOptions:r}=t,s=this.stripeElements.getElement(E.CardNumber)||this.stripeElements.create(E.CardNumber,e),a=this.stripeElements.getElement(E.CardExpiry)||this.stripeElements.create(E.CardExpiry,i),d=this.stripeElements.getElement(E.CardCvc)||this.stripeElements.create(E.CardCvc,r);this.stripeCardElements=[s,a,d],n=this.stripeCardElements[0];try{s.mount(`#${e.containerId}`),a.mount(`#${i.containerId}`),d.mount(`#${r.containerId}`)}catch(e){this.isDeinitialize||o(new u(\"Unable to mount Stripe component without valid container ID.\"))}}else{n=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{n.mount(`#${i}`)}catch(e){this.isDeinitialize||o(new u(\"Unable to mount Stripe component without valid container ID.\"))}}break;case E.IDEAL:case E.Sepa:n=this.stripeElements.getElement(e)||this.stripeElements.create(e,t);try{n.mount(`#${i}`)}catch(e){this.isDeinitialize||o(new u(\"Unable to mount Stripe component without valid container ID.\"))}case E.Alipay:}r(n)})}mountCardVerificationFields(e){return w(this,void 0,void 0,function*(){const t=this.paymentIntegrationService.getState().getStoreConfig();if(!t)throw new y(s.MissingCheckoutConfig);const i=t.paymentSettings.bigpayBaseUrl,n=this.paymentIntegrationService.createHostedForm(i,e);return yield n.attach(),n})}processAdditionalAction(e,t,i=!1,n=!1){return w(this,void 0,void 0,function*(){if(!S(e))throw e;const r=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"additional_action_required\"}),s=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"});if(r){const t=e.body.additional_action_required;if(t&&\"redirect_to_url\"===t.type)return new Promise(()=>{t.data.redirect_url&&window.location.replace(t.data.redirect_url)})}if(s){const r=e.body.three_ds_result.token,o=!1;let s,a=!1;try{s=yield this.getStripeJs().confirmCardPayment(r)}catch(e){a=!0}if(null==s?void 0:s.error){if(this.isCancellationError(s.error))throw new _;if(this.isAuthError(s.error))throw new b(P.AuthFailure);throw new Error(s.error.message)}const d={credit_card_token:{token:this.getPaymentToken(null==s?void 0:s.paymentIntent,r,a)},vault_payment_instrument:i,confirm:o},l=this.buildPaymentPayload(t,d,n);try{return yield this.paymentIntegrationService.submitPayment(l)}catch(e){throw this.handleEmptyPaymentIntentError(e,null==s?void 0:s.error)}}throw e})}getPaymentToken(e,t,i){return!e||i?t:e.id}shouldShowTSVHostedForm(e,t){return this.isHostedFieldAvailable()&&this.isHostedPaymentFormEnabled(e,t)}unmountElement(){this.stripeElement&&(this.stripeElement.unmount(),this.stripeElement=void 0)}}class M extends c{constructor(e){super(e||\"Unable to proceed because the client library of a payment method is not loaded or ready to be used.\"),this.name=\"PaymentMethodClientUnavailableError\",this.type=\"payment_method_client_unavailable\"}}class k{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}load(e,t,i){return this.scriptLoader.loadScript(\"https://js.stripe.com/v3/\").then(()=>{if(!this.stripeWindow.Stripe)throw new M;return this.stripeWindow.Stripe(e,{stripeAccount:t,locale:i,betas:[\"payment_intent_beta_3\",\"alipay_pm_beta_1\"],apiVersion:\"2020-03-02;alipay_beta=v1\"})})}}const T=l(t=>new O(t,new k((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{gateway:\"stripev3\"}]);var N,R,D,z,L,U,V,x,j,B;!function(e){e.SHIPPING=\"shipping\",e.BILLING=\"billing\"}(N||(N={})),function(e){e.SPLIT=\"split\",e.FULL=\"full\",e.ORGANIZATION=\"organization\"}(R||(R={})),function(e){e.SUCCESS=\"success\",e.ERROR=\"error\"}(D||(D={})),function(e){e.CreditCard=\"card\",e.Link=\"link\",e.EPS=\"eps\",e.GRABPAY=\"grabpay\",e.BANCONTACT=\"bancontact\",e.IDEAL=\"ideal\",e.ALIPAY=\"alipay\",e.KLARNA=\"klarna\",e.OCS=\"optimized_checkout\"}(z||(z={})),function(e){e.NEVER=\"never\",e.AUTO=\"auto\",e.ALWAYS=\"always\",e.PAYMENT=\"payment\",e.IF_REQUIRED=\"if_required\"}(L||(L={})),function(e){e.V3=\"v3\",e.ACACIA=\"acacia\",e.BASIL=\"basil\",e.CLOVER=\"clover\"}(U||(U={})),function(e){e.PAYMENT=\"payment\",e.AUTHENTICATION=\"linkAuthentication\",e.SHIPPING=\"address\",e.EXPRESS_CHECKOUT=\"expressCheckout\"}(V||(V={})),function(e){e.REQUIRES_PAYMENT_METHOD=\"requires_payment_method\",e.REQUIRES_CONFIRMATION=\"requires_confirmation\",e.REQUIRES_ACTION=\"requires_action\",e.PROCESSING=\"processing\",e.SUCCEEDED=\"succeeded\",e.CANCELED=\"canceled\"}(x||(x={})),function(e){e.CLICK=\"click\",e.CHANGE=\"change\",e.READY=\"ready\",e.SHIPPING_ADDRESS_CHANGE=\"shippingaddresschange\",e.SHIPPING_RATE_CHANGE=\"shippingratechange\",e.CONFIRM=\"confirm\",e.CANCEL=\"cancel\",e.LOADER_START=\"loaderstart\"}(j||(j={})),function(e){e.ON_SESSION=\"on_session\",e.OFF_SESSION=\"off_session\"}(B||(B={}));var F=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class G{constructor(e,t=window){this.scriptLoader=e,this.stripeWindow=t}getStripeClient(e,t,i,n,r){return F(this,void 0,void 0,function*(){if(this.stripeWindow.bcStripeClient)return this.stripeWindow.bcStripeClient;const o=yield this.load(i),{stripePublishableKey:s,stripeConnectedAccount:a}=e,d=o(s,Object.assign(Object.assign(Object.assign(Object.assign({},a?{stripeAccount:a}:{}),t?{locale:t}:{}),n?{betas:n}:{}),r?{apiVersion:r}:{}));return Object.assign(this.stripeWindow,{bcStripeClient:d}),d})}getElements(e,t){return F(this,void 0,void 0,function*(){let i=this.stripeWindow.bcStripeElements;return i?yield this.updateStripeElements(t):(i=e.elements(t),Object.assign(this.stripeWindow,{bcStripeElements:i})),i})}updateStripeElements(e){return F(this,void 0,void 0,function*(){const t=this.stripeWindow.bcStripeElements;t&&(t.update(e),yield t.fetchUpdates())})}getCheckoutSession(e,t){return F(this,void 0,void 0,function*(){let i=this.stripeWindow.bcStripeCheckoutSession;return i||(i=yield e.initCheckout(t),Object.assign(this.stripeWindow,{bcStripeCheckoutSession:i})),i})}load(e){return F(this,void 0,void 0,function*(){if(!this.stripeWindow.Stripe&&(yield this.scriptLoader.loadScript(this.getScriptUrl(e)),!this.stripeWindow.Stripe))throw new M;return this.stripeWindow.Stripe})}getScriptUrl(e){return e&&e!==U.V3?`https://js.stripe.com/${e}/stripe.js`:\"https://js.stripe.com/v3/\"}}class H extends c{constructor(e){super(e||\"Unable to proceed because the client library of a payment method has thrown an unexpected error.\"),this.name=\"PaymentMethodFailedError\",this.type=\"payment_method_client_invalid\"}}var q=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class W{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t,this.isMounted=!1}deinitialize(){var e;null===(e=this.checkoutEventsUnsubscribe)||void 0===e||e.call(this),this.isMounted=!1}initCheckoutEventsSubscription(e,t,i,n){this.checkoutEventsUnsubscribe=this.paymentIntegrationService.subscribe(()=>q(this,void 0,void 0,function*(){var r;const o=null==n?void 0:n.getElement(V.PAYMENT);if(o){try{yield this.updateStripePaymentIntent(e,t)}catch(e){return this.isMounted&&(o.unmount(),this.isMounted=!1),void(e instanceof Error&&(null===(r=i.onError)||void 0===r||r.call(i,e)))}this.isMounted||(yield null==n?void 0:n.fetchUpdates(),this.mountElement(o,i.containerId))}}),e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.outstandingBalance},e=>{var t;return null===(t=e.getCheckout())||void 0===t?void 0:t.coupons})}mountElement(e,t){document.getElementById(t)&&(e.mount(`#${t}`),this.isMounted=!0)}mapAppearanceVariables(e){return{colorPrimary:e.fieldInnerShadow,colorBackground:e.fieldBackground,colorText:e.labelText,colorDanger:e.fieldErrorText,colorTextSecondary:e.labelText,colorTextPlaceholder:e.fieldPlaceholderText,colorIcon:e.fieldPlaceholderText}}mapInputAppearanceRules(e){return{borderColor:e.fieldBorder,color:e.fieldText,boxShadow:e.fieldInnerShadow}}throwStripeError(e){if(\"object\"==typeof(t=e)&&null!==t&&\"type\"in t&&(this.throwDisplayableStripeError(e),this.isCancellationError(e)))throw new _;var t;throw new H}throwDisplayableStripeError(e){if((0,lodash__WEBPACK_IMPORTED_MODULE_1__.includes)([\"card_error\",\"invalid_request_error\",\"validation_error\"],e.type))throw new Error(e.message)}isCancellationError(e){var t;const i=null===(t=null==e?void 0:e.payment_intent.last_payment_error)||void 0===t?void 0:t.message;return!!i&&-1!==i.indexOf(\"canceled\")}throwPaymentConfirmationProceedMessage(){throw new H(\"We've received your order and are processing your payment. Once the payment is verified, your order will be completed. We will send you an email when it's completed. Please note, this process may take a few minutes depending on the processing times of your chosen method.\")}isPaymentCompleted(e,t){return q(this,void 0,void 0,function*(){const i=this.paymentIntegrationService.getState(),n=i.getPaymentMethodOrThrow(e),{features:r}=i.getStoreConfigOrThrow().checkoutSettings;if(!n.clientToken||!t||!r[\"PI-626.Block_unnecessary_payment_confirmation_for_StripeUPE\"])return!1;const{paymentIntent:o}=yield t.retrievePaymentIntent(n.clientToken);return(null==o?void 0:o.status)===x.SUCCEEDED})}mapStripePaymentData(e,t,i=!1){const n=this.paymentIntegrationService.getState().getBillingAddress(),{firstName:r=\"\",lastName:o=\"\",email:d=\"\"}=n||{},l=this._mapStripeAddress(n);if(!e)throw new v(a.PaymentNotInitialized);if(!(d&&l&&l.city&&l.country&&r&&o))throw new y(s.MissingBillingAddress);return{elements:e,redirect:L.IF_REQUIRED,confirmParams:Object.assign({payment_method_data:Object.assign(Object.assign({},i?{allow_redisplay:\"always\"}:{}),{billing_details:{email:d,address:l,name:`${r} ${o}`}})},t&&{return_url:t})}}isAdditionalActionError(e){return (0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e,{code:\"additional_action_required\"})}isRedirectAction(e){const{type:t,data:{redirect_url:i}}=e;return\"redirect_to_url\"===t&&!!i}isOnPageAdditionalAction(e){const{type:t,data:{token:i}}=e;return\"additional_action_requires_payment_method\"===t&&!!i}updateStripePaymentIntent(e,t){return q(this,void 0,void 0,function*(){const i=yield this.paymentIntegrationService.loadPaymentMethod(e,{params:{method:t}}),{clientToken:n}=i.getPaymentMethodOrThrow(t);n&&this.scriptLoader.updateStripeElements({clientSecret:n})})}getStripeJsVersion(e){return e.useNewStripeJsVersion?U.CLOVER:U.V3}_mapStripeAddress(e){if(e){const{city:t,address1:i,address2:n,countryCode:r,postalCode:o,stateOrProvinceCode:s}=e;return Object.assign({city:t,country:r,postal_code:o,line1:i,line2:n},s?{state:s}:{})}throw new y(s.MissingBillingAddress)}}const Y={body:{},headers:{},status:0};class $ extends c{constructor(e,{message:t,errors:i}={}){const{body:n,headers:r,status:o}=e||Y;super(t||\"An unexpected error has occurred.\"),this.name=\"RequestError\",this.type=\"request\",this.body=n,this.headers=r,this.status=o,this.errors=i||[]}}function J(e){return\"object\"==typeof e&&null!==e&&\"initializationData\"in e&&void 0!==e.initializationData&&null!==e.initializationData&&\"object\"==typeof e.initializationData&&\"stripePublishableKey\"in e.initializationData&&\"stripeConnectedAccount\"in e.initializationData&&\"shopperLanguage\"in e.initializationData&&void 0!==e.initializationData.stripePublishableKey&&void 0!==e.initializationData.stripeConnectedAccount&&void 0!==e.initializationData.shopperLanguage}const K={ar:[\"ar\"],bg:[\"bg\"],cs:[\"cs\"],da:[\"da\"],de:[\"de\"],el:[\"el\"],en:[\"en\",\"en-GB\"],es:[\"es\",\"es-419\"],et:[\"et\"],fi:[\"fi\"],fil:[\"fil\"],fr:[\"fr\",\"fr-CA\"],he:[\"he\"],hr:[\"hr\"],hu:[\"hu\"],id:[\"id\"],it:[\"it\"],ja:[\"ja\"],ko:[\"ko\"],lt:[\"lt\"],lv:[\"lv\"],ms:[\"ms\"],mt:[\"mt\"],nb:[\"nb\"],nl:[\"nl\"],pl:[\"pl\"],pt:[\"pt\",\"pt-BR\"],ro:[\"ro\"],ru:[\"ru\"],sk:[\"sk\"],sl:[\"sl\"],sv:[\"sv\"],th:[\"th\"],tr:[\"tr\"],vi:[\"vi\"],zh:[\"zh\",\"zh-HK\",\"zh-TW\"]};function Z(e){const[t,i]=e.replace(/_/g,\"-\").toLowerCase().split(\"-\"),n=K[t];if(!n)return\"auto\";const r=i?`${t}-${i.toUpperCase()}`:t;return n.indexOf(r)>-1?r:n[0]}const Q=[\"payment_element_beta_2\",\"alipay_pm_beta_1\",\"link_default_integration_beta_1\",\"shipping_address_element_beta_1\",\"address_element_beta_1\"],X=\"2020-03-02;alipay_beta=v1;link_beta=v1\";function ee(e){return\"stripeLinkAuthenticationState\"in e}var te=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class ie{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){return te(this,void 0,void 0,function*(){const{stripeupe:t,methodId:i,gatewayId:n}=e;if(!(null==t?void 0:t.containerId))throw new v(a.PaymentNotInitialized);if(!n)throw new u('Unable to initialize payment because \"gatewayId\" argument is not provided.');return this._loadStripeElement(t,n,i).catch(e=>{var i;return null===(i=t.onError)||void 0===i?void 0:i.call(t,e)}),this.stripeIntegrationService.initCheckoutEventsSubscription(n,i,t,this._stripeElements),Promise.resolve()})}execute(e,t){return te(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]);if(!i||!i.paymentData)throw new h([\"payment.paymentData\"]);if(!this._stripeUPEClient)throw new v(a.PaymentNotInitialized);const{paymentData:r,methodId:o,gatewayId:s}=i,{shouldSaveInstrument:d=!1,shouldSetAsDefaultInstrument:l=!1}=p(r)?r:{},c=this.paymentIntegrationService.getState(),{isStoreCreditApplied:u}=c.getCheckoutOrThrow(),y=c.getPaymentProviderCustomerOrThrow(),g=(ee(y)?y:{}).stripeLinkAuthenticationState;if(u&&(yield this.paymentIntegrationService.applyStoreCredit(u)),s){yield this.stripeIntegrationService.updateStripePaymentIntent(s,o);const{email:e}=c.getCustomerOrThrow();if(void 0!==g&&!e){const e=c.getBillingAddressOrThrow();yield this.paymentIntegrationService.updateBillingAddress(e)}}if(yield this.paymentIntegrationService.submitOrder(n,t),m(r)){const{instrumentId:e}=r;return void(yield this._executeWithVaulted(i.methodId,e,l))}yield this._executeWithStripeConfirmation(i.methodId,!g&&d,l)})}finalize(){return Promise.reject(new g)}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(V.PAYMENT))||void 0===t||t.unmount(),this.stripeIntegrationService.deinitialize(),this._stripeElements=void 0,this._stripeUPEClient=void 0,Promise.resolve()}_executeWithStripeConfirmation(e,t,i){return te(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState(),{clientToken:r}=n.getPaymentMethodOrThrow(e),o=this._getPaymentPayload(e,r||\"\",t,i);try{yield this.paymentIntegrationService.submitPayment(o)}catch(n){yield this._processAdditionalActionWithStripeConfirmation(n,e,t,i)}})}_executeWithVaulted(e,t,i){var n;return te(this,void 0,void 0,function*(){const r=this.paymentIntegrationService.getState(),o=r.getPaymentMethodOrThrow(e),s=null===(n=r.getCart())||void 0===n?void 0:n.id;try{const n={methodId:e,paymentData:{formattedPayload:{cart_id:s,bigpay_token:{token:t},confirm:!1,client_token:o.clientToken,set_as_default_stored_instrument:i}}};return yield this.paymentIntegrationService.submitPayment(n)}catch(t){return this._processVaultedAdditionalAction(t,e,i)}})}_loadStripeElement(e,t,i){return te(this,void 0,void 0,function*(){const{containerId:n,style:r,render:o,initStripeElementUpdateTrigger:a}=e,d=yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}}),l=d.getPaymentMethodOrThrow(i);if(!J(l))throw new y(s.MissingPaymentMethod);const{clientToken:c,initializationData:u}=l,{shopperLanguage:h,allowRedisplayForStoredInstruments:p=!1,enableLink:m}=u;if(this._allowRedisplayForStoredInstruments=p,!c)throw new y(s.MissingPaymentMethod);let g;if(this._stripeUPEClient=yield this._loadStripeJs(u),this._isStripeElementUpdateEnabled=\"function\"==typeof a,r){const e=r;g={variables:this.stripeIntegrationService.mapAppearanceVariables(r),rules:{\".Input\":this.stripeIntegrationService.mapInputAppearanceRules(e)}}}this._stripeElements=yield this.scriptLoader.getElements(this._stripeUPEClient,{clientSecret:c,locale:Z(h),appearance:g});const{getBillingAddress:v,getShippingAddress:S}=d,{postalCode:_}=S()||v()||{},f=this._stripeElements.getElement(V.PAYMENT)||this._stripeElements.create(V.PAYMENT,Object.assign({fields:{billingDetails:{email:L.NEVER,address:{country:L.NEVER,city:L.NEVER,postalCode:_?L.NEVER:L.AUTO}}},wallets:{applePay:L.NEVER,googlePay:L.NEVER,link:m?L.AUTO:L.NEVER}},this._getStripeElementTerms()));this.stripeIntegrationService.mountElement(f,n),f.on(j.READY,()=>{o()}),f.on(j.CHANGE,e=>{(null==e?void 0:e.value)&&\"type\"in e.value&&this._updateStripeLinkStateByElementType(e.value.type)}),this._isStripeElementUpdateEnabled&&(null==a||a(this._updateStripeElement.bind(this)))})}_processAdditionalActionWithStripeConfirmation(e,t,i=!1,n=!1){return te(this,void 0,void 0,function*(){if(!S(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new v(a.PaymentNotInitialized);const{data:r}=e.body.additional_action_required,{token:o}=r,{paymentIntent:s}=yield this._confirmStripePaymentOrThrow(t,r),d=this._getPaymentPayload(t,(null==s?void 0:s.id)||o,i,n);try{yield this.paymentIntegrationService.submitPayment(d)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var i,n;return te(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,s=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,o,!!this._allowRedisplayForStoredInstruments);let a;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this._stripeUPEClient))?yield null===(n=this._stripeUPEClient)||void 0===n?void 0:n.retrievePaymentIntent(r||\"\"):yield null===(i=this._stripeUPEClient)||void 0===i?void 0:i.confirmPayment(s);if(a=null==t?void 0:t.error,a||!(null==t?void 0:t.paymentIntent))throw new H;return t}catch(e){this.stripeIntegrationService.throwStripeError(a)}})}_processVaultedAdditionalAction(e,t,i=!1){var n;return te(this,void 0,void 0,function*(){if(!t||!S(e)||!(0,lodash__WEBPACK_IMPORTED_MODULE_1__.some)(e.body.errors,{code:\"three_d_secure_required\"}))throw e;if(!this._stripeUPEClient||!this._stripeElements)throw new v(a.PaymentNotInitialized);const r=e.body.three_ds_result.token;let s,d=!1;try{s=yield this._stripeUPEClient.confirmCardPayment(r)}catch(e){try{s=yield this._stripeUPEClient.retrievePaymentIntent(r)}catch(e){d=!0}}if((null==s?void 0:s.error)&&this.stripeIntegrationService.throwStripeError(s.error),!(null==s?void 0:s.paymentIntent)&&!d)throw new $;const l=this._getPaymentPayload(t,d?r:null===(n=null==s?void 0:s.paymentIntent)||void 0===n?void 0:n.id,!1,i);return this.paymentIntegrationService.submitPayment(l)})}_loadStripeJs(e){return te(this,void 0,void 0,function*(){if(this._stripeUPEClient)return this._stripeUPEClient;const t=this.paymentIntegrationService.getState();return this.scriptLoader.getStripeClient(e,t.getCartLocale(),U.V3,Q,X)})}_getPaymentPayload(e,t,i=!1,n=!1){var r;return{methodId:e,paymentData:{formattedPayload:{cart_id:(null===(r=this.paymentIntegrationService.getState().getCart())||void 0===r?void 0:r.id)||\"\",credit_card_token:{token:t},confirm:!1,vault_payment_instrument:i,set_as_default_stored_instrument:n}}}}_updateStripeElement({shouldShowTerms:e}){var t;const i=null===(t=this._stripeElements)||void 0===t?void 0:t.getElement(V.PAYMENT);null==i||i.update(Object.assign({},this._getStripeElementTerms(e)))}_getStripeElementTerms(e){let t=L.AUTO;return this._isStripeElementUpdateEnabled&&(t=e?L.AUTO:L.NEVER),{terms:{card:t}}}_updateStripeLinkStateByElementType(e){const t=this.paymentIntegrationService.getState().getPaymentProviderCustomerOrThrow(),i=e===z.Link;!ee(t)&&i&&this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:i})}}const ne=l(t=>{const i=new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new ie(t,i,new W(t,i))},[{gateway:\"stripeupe\"},{gateway:\"stripeupe\",id:\"klarna\"}]),re=e=>\"object\"==typeof e&&null!==e&&\"value\"in e&&\"collapsed\"in e;var oe=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class se{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){var t;return oe(this,void 0,void 0,function*(){const{stripeocs:i,methodId:n,gatewayId:r}=e;if(!(null==i?void 0:i.containerId))throw new v(a.PaymentNotInitialized);if(!r)throw new u('Unable to initialize payment because \"gatewayId\" argument is not provided.');try{yield this._initializeStripeElement(i,r,n)}catch(e){e instanceof Error&&(null===(t=i.onError)||void 0===t||t.call(i,e))}this.stripeIntegrationService.initCheckoutEventsSubscription(r,n,i,this.stripeElements)})}execute(e,t){return oe(this,void 0,void 0,function*(){const{payment:i}=e,n=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i}(e,[\"payment\"]),{methodId:r,gatewayId:o}=i||{};if(!this.stripeClient)throw new v(a.PaymentNotInitialized);if(!o||!r)throw new u('Unable to initialize payment because \"gatewayId\" or \"methodId\" argument is not provided.');const{isStoreCreditApplied:s}=this.paymentIntegrationService.getState().getCheckoutOrThrow();s&&(yield this.paymentIntegrationService.applyStoreCredit(s)),yield this.stripeIntegrationService.updateStripePaymentIntent(o,r),yield this.paymentIntegrationService.submitOrder(n,t);const{clientToken:d}=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(r,o),l=this._getPaymentPayload(r,d||\"\");try{yield this.paymentIntegrationService.submitPayment(l)}catch(e){yield this._processAdditionalAction(e,r)}})}finalize(){return Promise.reject(new g)}deinitialize(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(V.PAYMENT);return null==t||t.unmount(),null==t||t.destroy(),this.stripeIntegrationService.deinitialize(),this.stripeElements=void 0,this.stripeClient=void 0,Promise.resolve()}_initializeStripeElement(e,t,i){return oe(this,void 0,void 0,function*(){let n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t);if((null==n?void 0:n.clientToken)||(n=(yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}})).getPaymentMethodOrThrow(i,t)),!J(n))throw new y(s.MissingPaymentMethod);const{clientToken:r,initializationData:o}=n,{shopperLanguage:a,customerSessionToken:d,enableLink:l}=o;if(!r)throw new y(s.MissingPaymentMethod);this.stripeClient=yield this._loadStripeJs(o);const{appearance:c,containerId:u,fonts:h,layout:p,render:m,paymentMethodSelect:g,handleClosePaymentMethod:v,togglePreloader:S}=e;this.stripeElements=yield this.scriptLoader.getElements(this.stripeClient,{clientSecret:r,customerSessionClientSecret:d,locale:Z(a),appearance:c,fonts:h});const{getBillingAddress:_,getShippingAddress:f}=this.paymentIntegrationService.getState(),C=_(),{postalCode:E}=f()||C||{},I=this.stripeElements.getElement(V.PAYMENT)||this.stripeElements.create(V.PAYMENT,{fields:{billingDetails:{email:L.NEVER,address:{country:L.NEVER,city:L.NEVER,postalCode:E?L.NEVER:L.AUTO}}},wallets:{applePay:L.NEVER,googlePay:L.NEVER,link:l?L.AUTO:L.NEVER},layout:p,savePaymentMethod:{maxVisiblePaymentMethods:20},defaultValues:{billingDetails:{email:(null==C?void 0:C.email)||\"\"}}});this.stripeIntegrationService.mountElement(I,u),I.on(j.LOADER_START,()=>{null==S||S(!1)}),I.on(j.READY,()=>{m()}),I.on(j.CHANGE,e=>{this._onStripeElementChange(e,t,i,g)}),null==v||v(this._collapseStripeElement.bind(this))})}_loadStripeJs(e){return oe(this,void 0,void 0,function*(){if(this.stripeClient)return this.stripeClient;const t=this.paymentIntegrationService.getState(),i=this.stripeIntegrationService.getStripeJsVersion(e);return this.scriptLoader.getStripeClient(e,t.getCartLocale(),i)})}_collapseStripeElement(){var e;const t=null===(e=this.stripeElements)||void 0===e?void 0:e.getElement(V.PAYMENT);null==t||t.collapse()}_getPaymentPayload(e,t,i){var n;const r=(null===(n=this.paymentIntegrationService.getState().getCart())||void 0===n?void 0:n.id)||\"\",{card:o,us_bank_account:s}=i||{},a=this._shouldSaveInstrument(o)||this._shouldSaveInstrument(s),d=this._getTokenizedOptions(t,i);return{methodId:e,paymentData:{formattedPayload:Object.assign({cart_id:r,confirm:!1,method:this.selectedMethodId,vault_payment_instrument:a},d)}}}_processAdditionalAction(e,t){return oe(this,void 0,void 0,function*(){if(!S(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this.stripeClient||!this.stripeElements)throw new v(a.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(t,i),{client_secret:o,payment_method_options:s}=r||{},d=this._getPaymentPayload(t,o||n,s);try{return yield this.paymentIntegrationService.submitPayment(d)}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}})}_confirmStripePaymentOrThrow(e,t){var i,n;return oe(this,void 0,void 0,function*(){const{token:r,redirect_url:o}=t,s=this.stripeIntegrationService.mapStripePaymentData(this.stripeElements,o);let a;try{const t=(yield this.stripeIntegrationService.isPaymentCompleted(e,this.stripeClient))?yield null===(n=this.stripeClient)||void 0===n?void 0:n.retrievePaymentIntent(r||\"\"):yield null===(i=this.stripeClient)||void 0===i?void 0:i.confirmPayment(s);if(a=null==t?void 0:t.error,a||!(null==t?void 0:t.paymentIntent))throw new H;return t}catch(e){return this.stripeIntegrationService.throwStripeError(a)}})}_onStripeElementChange(e,t,i,n){re(e)&&!e.collapsed&&(this.selectedMethodId=e.value.type,null==n||n(`${t}-${i}`))}_shouldSaveInstrument(e){const t=null==e?void 0:e.setup_future_usage;return t===B.ON_SESSION||t===B.OFF_SESSION}_getTokenizedOptions(e,t){return this._shouldSaveInstrument(null==t?void 0:t.us_bank_account)?{tokenized_ach:{token:e}}:{credit_card_token:{token:e}}}}const ae=l(t=>{const i=new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new se(t,i,new W(t,i))},[{gateway:\"stripeocs\",id:\"optimized_checkout\"}]);var de=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class le{constructor(e,t,i){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i}initialize(e){var t;return de(this,void 0,void 0,function*(){const{stripeocs:i,methodId:n,gatewayId:r}=e;if(!(null==i?void 0:i.containerId)||!r)throw new v(a.PaymentNotInitialized);try{yield this._initializeStripeElement(i,r,n)}catch(e){e instanceof Error&&(null===(t=i.onError)||void 0===t||t.call(i,e))}})}execute(){return de(this,void 0,void 0,function*(){return Promise.resolve()})}finalize(){return Promise.reject(new g)}deinitialize(){var e;const t=null===(e=this.stripeCheckoutSession)||void 0===e?void 0:e.getPaymentElement();return null==t||t.unmount(),null==t||t.destroy(),this.stripeIntegrationService.deinitialize(),this.stripeCheckoutSession=void 0,this.stripeClient=void 0,Promise.resolve()}_initializeStripeElement(e,t,i){return de(this,void 0,void 0,function*(){let n=this.paymentIntegrationService.getState().getPaymentMethodOrThrow(i,t);if((null==n?void 0:n.clientToken)||(n=(yield this.paymentIntegrationService.loadPaymentMethod(t,{params:{method:i}})).getPaymentMethodOrThrow(i,t)),!J(n))throw new y(s.MissingPaymentMethod);const{clientToken:r,initializationData:o}=n;if(!r)throw new y(s.MissingPaymentMethod);this.stripeClient=yield this._loadStripeJs(o);const{enableLink:d}=o,{appearance:l,containerId:c,fonts:u,layout:h,render:p,paymentMethodSelect:m,handleClosePaymentMethod:g,togglePreloader:S}=e,{getBillingAddress:_,getShippingAddress:f}=this.paymentIntegrationService.getState(),C=_(),{postalCode:E}=f()||C||{};this.stripeCheckoutSession=yield this.scriptLoader.getCheckoutSession(this.stripeClient,{clientSecret:r,elementsOptions:{appearance:l,fonts:u},adaptivePricing:{allowed:!1},defaultValues:{email:(null==C?void 0:C.email)||\"\"}});const I=this._createStripeElement({fields:{billingDetails:{email:L.NEVER,address:{country:L.NEVER,city:L.NEVER,postalCode:E?L.NEVER:L.AUTO}}},wallets:{applePay:L.NEVER,googlePay:L.NEVER,link:d?L.AUTO:L.NEVER},layout:h});if(!I)throw new v(a.PaymentNotInitialized);this.stripeIntegrationService.mountElement(I,c),I.on(j.LOADER_START,()=>{null==S||S(!1)}),I.on(j.READY,()=>{p()}),I.on(j.CHANGE,e=>{this._onStripeElementChange(e,t,i,m)}),null==g||g(this._collapseStripeElement.bind(this))})}_loadStripeJs(e){return de(this,void 0,void 0,function*(){if(this.stripeClient)return this.stripeClient;const t=this.paymentIntegrationService.getState();return this.scriptLoader.getStripeClient(e,t.getCartLocale(),U.CLOVER)})}_createStripeElement(e){var t,i;return(null===(t=this.stripeCheckoutSession)||void 0===t?void 0:t.getPaymentElement())||(null===(i=this.stripeCheckoutSession)||void 0===i?void 0:i.createPaymentElement(e))}_onStripeElementChange(e,t,i,n){re(e)&&!e.collapsed&&(null==n||n(`${t}-${i}`))}_collapseStripeElement(){var e;const t=null===(e=this.stripeCheckoutSession)||void 0===e?void 0:e.getPaymentElement();null==t||t.collapse()}}const ce=l(t=>{const i=new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)());return new le(t,i,new W(t,i))},[{gateway:\"stripeocs\",id:\"checkout_session\"}]);class ue{constructor(e,t){this.paymentIntegrationService=e,this.scriptLoader=t}initialize(e){var t,i,n,r,o;return i=this,n=void 0,o=function*(){let i;if(!e.stripeupe)throw new u('Unable to proceed because \"options\" argument is not provided.');const{container:n,gatewayId:r,methodId:o,onEmailChange:a,getStyles:d,isLoading:l}=e.stripeupe;Object.entries(e.stripeupe).forEach(([e,t])=>{if(!t)throw new u(`Unable to proceed because \"${e}\" argument is not provided.`)}),yield this.paymentIntegrationService.loadPaymentMethod(r,{params:{method:o}});const c=this.paymentIntegrationService.getState(),h=c.getPaymentMethodOrThrow(o,r),{clientToken:p}=h;if(!J(h)||!p)throw new y(s.MissingPaymentToken);const{email:m}=c.getCustomerOrThrow(),g=c.getPaymentProviderCustomerOrThrow(),v=(ee(g)?g:{}).stripeLinkAuthenticationState;if(!m){let e;const r=\"function\"==typeof d&&d();e=r?{variables:{colorPrimary:r.fieldInnerShadow,colorBackground:r.fieldBackground,colorText:r.labelText,colorDanger:r.fieldErrorText,colorTextSecondary:r.labelText,colorTextPlaceholder:r.fieldPlaceholderText},rules:{\".Input\":{borderColor:r.fieldBorder,color:r.fieldText,boxShadow:r.fieldInnerShadow}}}:{},i=yield this.scriptLoader.getStripeClient(h.initializationData,c.getCartLocale(),U.V3,Q,X),this._stripeElements=yield this.scriptLoader.getElements(i,{clientSecret:p,appearance:e});const{getBillingAddress:o,getConsignments:u}=this.paymentIntegrationService.getState(),m=u(),g=null===(t=null==m?void 0:m[0])||void 0===t?void 0:t.id,{email:S}=o()||{},_=S?{defaultValues:{mode:N.SHIPPING,email:S}}:{},f=this._stripeElements.getElement(V.AUTHENTICATION)||this._stripeElements.create(V.AUTHENTICATION,_);f.on(j.CHANGE,e=>{if(!(\"authenticated\"in e))throw new y(s.MissingCustomer);this.paymentIntegrationService.updatePaymentProviderCustomer({stripeLinkAuthenticationState:e.authenticated}),e.complete?a(e.authenticated,e.value.email):a(!1,\"\"),l&&l(!1),void 0===v&&e.authenticated&&g&&this.paymentIntegrationService.deleteConsignment(g)}),f.mount(`#${n}`)}},new((r=void 0)||(r=Promise))(function(e,t){function s(e){try{d(o.next(e))}catch(e){t(e)}}function a(e){try{d(o.throw(e))}catch(e){t(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r(function(e){e(i)})).then(s,a)}d((o=o.apply(i,n||[])).next())})}deinitialize(){var e,t;return null===(t=null===(e=this._stripeElements)||void 0===e?void 0:e.getElement(V.AUTHENTICATION))||void 0===t||t.unmount(),Promise.resolve()}signIn(e,t){return this.paymentIntegrationService.signInCustomer(e,t),Promise.resolve()}signOut(e){return this.paymentIntegrationService.signOutCustomer(e),Promise.resolve()}executePaymentMethodCheckout(e){var t;return null===(t=null==e?void 0:e.continueWithCheckoutCallback)||void 0===t||t.call(e),Promise.resolve()}}const he=l(t=>new ue(t,new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)())),[{id:\"stripeupe\"}]),pe={size:70,color:\"#d9d9d9\",backgroundColor:\"#ffffff\"},me={position:\"fixed\",\"background-color\":\"rgba(0, 0, 0, 0.4)\",\"z-index\":\"1000\"},ye=\"embedded-checkout-loading-indicator-rotation\";class ge{constructor(e){this.styles=Object.assign(Object.assign({},pe),e&&e.styles),this.containerStyles=Object.assign({},e&&e.containerStyles),this.defineAnimation(),this.container=this.buildContainer(),this.indicator=this.buildIndicator(),this.container.appendChild(this.indicator)}show(e){if(e){const t=document.getElementById(e);if(!t)throw new Error(\"Unable to attach the loading indicator because the parent ID is not valid.\");t.appendChild(this.container)}this.container.style.visibility=\"visible\",this.container.style.opacity=\"1\"}hide(){const e=()=>{this.container.style.visibility=\"hidden\",this.container.removeEventListener(\"transitionend\",e)};this.container.addEventListener(\"transitionend\",e),this.container.style.opacity=\"0\"}buildContainer(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.bottom=\"0\",e.style.left=\"0\",e.style.height=\"100%\",e.style.width=\"100%\",e.style.position=\"absolute\",e.style.right=\"0\",e.style.top=\"0\",e.style.transition=\"all 250ms ease-out\",e.style.opacity=\"0\",this.setStyleAttribute(e,this.containerStyles),e}buildIndicator(){const e=document.createElement(\"div\");return e.style.display=\"block\",e.style.width=`${this.styles.size}px`,e.style.height=`${this.styles.size}px`,e.style.borderRadius=`${this.styles.size}px`,e.style.border=\"solid 1px\",e.style.borderColor=`${this.styles.backgroundColor} ${this.styles.backgroundColor} ${this.styles.color} ${this.styles.color}`,e.style.margin=\"0 auto\",e.style.position=\"absolute\",e.style.left=\"0\",e.style.right=\"0\",e.style.top=\"50%\",e.style.transform=\"translateY(-50%) rotate(0deg)\",e.style.transformStyle=\"preserve-3d\",e.style.animation=`${ye} 500ms infinite cubic-bezier(0.69, 0.31, 0.56, 0.83)`,e}setStyleAttribute(e,t){Object.keys(t).forEach(i=>{e.style.setProperty(i,t[i])})}defineAnimation(){var e;if(document.getElementById(ye))return;const t=document.createElement(\"style\");t.id=ye,null===(e=document.head)||void 0===e||e.appendChild(t),t.sheet instanceof CSSStyleSheet&&t.sheet.insertRule(`\\n                @keyframes ${ye} {\\n                    0% { transform: translateY(-50%) rotate(0deg); }\\n                    100% { transform: translateY(-50%) rotate(360deg); }\\n                }\\n            `,0)}}class ve{constructor(e){this._decimalPlaces=e}toInteger(e){return Math.round(e*Math.pow(10,this._decimalPlaces))}}const Se=[\"AC\",\"AD\",\"AE\",\"AF\",\"AG\",\"AI\",\"AL\",\"AM\",\"AO\",\"AQ\",\"AR\",\"AT\",\"AU\",\"AW\",\"AX\",\"AZ\",\"BA\",\"BB\",\"BD\",\"BE\",\"BF\",\"BG\",\"BH\",\"BI\",\"BJ\",\"BL\",\"BM\",\"BN\",\"BO\",\"BQ\",\"BR\",\"BS\",\"BT\",\"BV\",\"BW\",\"BY\",\"BZ\",\"CA\",\"CD\",\"CF\",\"CG\",\"CH\",\"CI\",\"CK\",\"CL\",\"CM\",\"CN\",\"CO\",\"CR\",\"CV\",\"CW\",\"CY\",\"CZ\",\"DE\",\"DJ\",\"DK\",\"DM\",\"DO\",\"DZ\",\"EC\",\"EE\",\"EG\",\"EH\",\"ER\",\"ES\",\"ET\",\"FI\",\"FJ\",\"FK\",\"FO\",\"FR\",\"GA\",\"GB\",\"GD\",\"GE\",\"GF\",\"GG\",\"GH\",\"GI\",\"GL\",\"GM\",\"GN\",\"GP\",\"GQ\",\"GR\",\"GS\",\"GT\",\"GU\",\"GW\",\"GY\",\"HK\",\"HN\",\"HR\",\"HT\",\"HU\",\"ID\",\"IE\",\"IL\",\"IM\",\"IN\",\"IO\",\"IQ\",\"IS\",\"IT\",\"JE\",\"JM\",\"JO\",\"JP\",\"KE\",\"KG\",\"KH\",\"KI\",\"KM\",\"KN\",\"KR\",\"KW\",\"KY\",\"KZ\",\"LA\",\"LB\",\"LC\",\"LI\",\"LK\",\"LR\",\"LS\",\"LT\",\"LU\",\"LV\",\"LY\",\"MA\",\"MC\",\"MD\",\"ME\",\"MF\",\"MG\",\"MK\",\"ML\",\"MM\",\"MN\",\"MO\",\"MQ\",\"MR\",\"MS\",\"MT\",\"MU\",\"MV\",\"MW\",\"MX\",\"MY\",\"MZ\",\"NA\",\"NC\",\"NE\",\"NG\",\"NI\",\"NL\",\"NO\",\"NP\",\"NR\",\"NU\",\"NZ\",\"OM\",\"PA\",\"PE\",\"PF\",\"PG\",\"PH\",\"PK\",\"PL\",\"PM\",\"PN\",\"PR\",\"PS\",\"PT\",\"PY\",\"QA\",\"RE\",\"RO\",\"RS\",\"RU\",\"RW\",\"SA\",\"SB\",\"SC\",\"SD\",\"SE\",\"SG\",\"SH\",\"SI\",\"SJ\",\"SK\",\"SL\",\"SM\",\"SN\",\"SO\",\"SR\",\"SS\",\"ST\",\"SV\",\"SX\",\"SZ\",\"TA\",\"TC\",\"TD\",\"TF\",\"TG\",\"TH\",\"TJ\",\"TK\",\"TL\",\"TM\",\"TN\",\"TO\",\"TR\",\"TT\",\"TV\",\"TW\",\"TZ\",\"UA\",\"UG\",\"US\",\"UY\",\"UZ\",\"VA\",\"VC\",\"VE\",\"VG\",\"VN\",\"VU\",\"WF\",\"WS\",\"XK\",\"YE\",\"YT\",\"ZA\",\"ZM\",\"ZW\",\"ZZ\"];var _e=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class fe{constructor(e,t,i,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i,this.loadingIndicator=n}initialize(e){return _e(this,void 0,void 0,function*(){const{stripeocs:t}=e||{};if(!t)throw new u('Unable to proceed because \"options\" argument is not provided.');const{methodId:i,gatewayId:n,container:r}=t;if(!r||!i||!n)throw new v(a.PaymentNotInitialized);const o=yield this.paymentIntegrationService.loadPaymentMethod(n,{params:{method:i}}),d=o.getPaymentMethodOrThrow(i,n),{loadingContainerId:l,buttonHeight:c,onComplete:h}=t;if(this._loadingIndicatorContainer=l,this._onComplete=h,!J(d))throw new y(s.MissingPaymentMethod);const{initializationData:p}=d,{captureMethod:m}=p,g=this.stripeIntegrationService.getStripeJsVersion(p);this._captureMethod=m,this._stripeClient=yield this.scriptLoader.getStripeClient(p,o.getCartLocale(),g),yield this._mountExpressCheckoutElement(r,this._stripeClient,c),this._initializeEvents(i)})}signIn(){return Promise.resolve()}signOut(){return Promise.resolve()}executePaymentMethodCheckout(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_mountExpressCheckoutElement(e,t,i=40){return _e(this,void 0,void 0,function*(){const n=this._shouldRequireShippingAddress(),r=Object.assign(Object.assign(Object.assign({shippingAddressRequired:n},n?{allowedShippingCountries:yield this._getAvailableCountries()}:{}),n?{shippingRates:[{id:\"_\",amount:0,displayName:\"Pending rates\"}]}:{}),{billingAddressRequired:!0,emailRequired:!0,phoneNumberRequired:!0,paymentMethods:{link:L.AUTO,applePay:L.NEVER,googlePay:L.NEVER,amazonPay:L.NEVER,paypal:L.NEVER,klarna:L.NEVER},buttonHeight:i}),{cartAmount:o}=this.paymentIntegrationService.getState().getCartOrThrow(),s=Object.assign({mode:\"payment\",amount:this._toCents(o),currency:this._getCurrency()},this._captureMethod?{captureMethod:this._captureMethod}:{});return this._stripeElements=t.elements(s),this._linkV2Element=this._stripeElements.create(V.EXPRESS_CHECKOUT,r),this._linkV2Element.mount(`#${e}`),this._linkV2Element})}_initializeEvents(e){this._linkV2Element&&(this._shouldRequireShippingAddress()&&(this._linkV2Element.on(j.SHIPPING_ADDRESS_CHANGE,e=>_e(this,void 0,void 0,function*(){return this._onShippingAddressChange(e)})),this._linkV2Element.on(j.SHIPPING_RATE_CHANGE,e=>_e(this,void 0,void 0,function*(){return this._onShippingRateChange(e)}))),this._linkV2Element.on(j.CONFIRM,t=>_e(this,void 0,void 0,function*(){return this._onConfirm(t,e)})),this._linkV2Element.on(j.CANCEL,this._onCancel))}_onShippingAddressChange(e){return _e(this,void 0,void 0,function*(){if(!(\"address\"in e))return;const t=e.address,i={firstName:\"\",lastName:\"\",phone:\"\",company:\"\",address1:\"\",address2:\"\",city:(null==t?void 0:t.city)||\"\",countryCode:(null==t?void 0:t.country)||\"\",postalCode:(null==t?void 0:t.postal_code)||\"\",stateOrProvince:(null==t?void 0:t.state)||\"\",stateOrProvinceCode:(null==t?void 0:t.state)||\"\",customFields:[]};yield this.paymentIntegrationService.updateShippingAddress(i);const n=yield this._getAvailableShippingOptions();yield this._updateDisplayedPrice(),(null==n?void 0:n.length)?e.resolve({shippingRates:n}):e.reject()})}_onCancel(){throw new _}_onShippingRateChange(e){return _e(this,void 0,void 0,function*(){if(\"shippingRate\"in e){const{shippingRate:t}=e;yield this._handleShippingOptionChange(null==t?void 0:t.id),yield this._updateDisplayedPrice(),e.resolve({})}})}_onConfirm(e,t){return _e(this,void 0,void 0,function*(){if(\"billingDetails\"in e&&\"shippingAddress\"in e&&this._stripeClient&&this._stripeElements){yield this._updateShippingAndBillingAddress(e),yield this.paymentIntegrationService.submitOrder();const i=this._getPaymentPayload(t);try{yield this.paymentIntegrationService.submitPayment(i)}catch(e){yield this._processAdditionalAction(e,t)}}return Promise.resolve()})}_updateShippingAndBillingAddress(e){var t,i,n,r,o,s,a,d;return _e(this,void 0,void 0,function*(){const l=this._shouldRequireShippingAddress(),c=(null===(i=null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||void 0===i?void 0:i.split(\" \")[0])||(null===(r=null===(n=e.billingDetails)||void 0===n?void 0:n.name)||void 0===r?void 0:r.split(\" \")[0])||\"\",u=(null===(s=null===(o=e.shippingAddress)||void 0===o?void 0:o.name)||void 0===s?void 0:s.split(\" \")[1])||(null===(d=null===(a=e.billingDetails)||void 0===a?void 0:a.name)||void 0===d?void 0:d.split(\" \")[1])||\"\";if(l){const t=this._mapShippingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateShippingAddress(t)}const h=this._mapBillingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateBillingAddress(h)})}_mapShippingAddress(e,t,i,n){var r,o,s,a,d,l,c;return{firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.line1)||\"\",address2:(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.line2)||\"\",city:(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.city)||\"\",countryCode:(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.country)||\"\",postalCode:(null===(d=null==e?void 0:e.address)||void 0===d?void 0:d.postal_code)||\"\",stateOrProvince:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",stateOrProvinceCode:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",customFields:[]}}_mapBillingAddress(e,t,i,n){var r,o,s,a,d,l;return{email:(null==t?void 0:t.email)||\"\",firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==t?void 0:t.address)||void 0===r?void 0:r.line1)||\"\",address2:\"\",city:(null===(o=null==t?void 0:t.address)||void 0===o?void 0:o.city)||\"\",countryCode:(null===(s=null==t?void 0:t.address)||void 0===s?void 0:s.country)||\"\",postalCode:(null===(a=null==t?void 0:t.address)||void 0===a?void 0:a.postal_code)||\"\",stateOrProvince:(null===(d=null==t?void 0:t.address)||void 0===d?void 0:d.state)||\"\",stateOrProvinceCode:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",customFields:[]}}_processAdditionalAction(e,t){return _e(this,void 0,void 0,function*(){if(!S(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeClient||!this._stripeElements)throw new v(a.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(i,t),o=this._getPaymentPayload(t,(null==r?void 0:r.id)||n);try{this._toggleLoadingIndicator(!0),yield this.paymentIntegrationService.submitPayment(o),yield this._completeCheckoutFlow()}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}finally{this._toggleLoadingIndicator(!1)}})}_confirmStripePaymentOrThrow(e,t){var i,n,r;return _e(this,void 0,void 0,function*(){const{token:o,redirect_url:s}=e,a=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,s);let d;try{const e=(yield this.stripeIntegrationService.isPaymentCompleted(t,this._stripeClient))?yield null===(r=this._stripeClient)||void 0===r?void 0:r.retrievePaymentIntent(o||\"\"):yield null===(i=this._stripeClient)||void 0===i?void 0:i.confirmPayment({elements:a.elements,clientSecret:o,redirect:L.IF_REQUIRED,confirmParams:{return_url:null===(n=a.confirmParams)||void 0===n?void 0:n.return_url}});if(d=null==e?void 0:e.error,d||!(null==e?void 0:e.paymentIntent))throw new H;return e}catch(e){return this.stripeIntegrationService.throwStripeError(d)}})}_completeCheckoutFlow(){return _e(this,void 0,void 0,function*(){return\"function\"==typeof this._onComplete?this._onComplete():(window.location.replace(\"/order-confirmation\"),Promise.resolve())})}_getPaymentPayload(e,t){var i;const n=(null===(i=this.paymentIntegrationService.getState().getCart())||void 0===i?void 0:i.id)||\"\";return{methodId:e,paymentData:{formattedPayload:Object.assign(Object.assign({cart_id:n},t?{credit_card_token:{token:t}}:{}),{confirm:!1,method:z.Link})}}}_shouldRequireShippingAddress(){const{getCartOrThrow:e}=this.paymentIntegrationService.getState(),{lineItems:t}=e();return!!t.physicalItems.length}_updateDisplayedPrice(){return _e(this,void 0,void 0,function*(){this._stripeElements&&this._stripeElements.update({currency:this._getCurrency(),mode:\"payment\",amount:yield this._getTotalPrice()})})}_getCurrency(){if(!this._currencyCode){const{code:e}=this.paymentIntegrationService.getState().getCartOrThrow().currency;this._currencyCode=e.toLowerCase()}return this._currencyCode}_getTotalPrice(){return _e(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:e,getCartOrThrow:t}=this.paymentIntegrationService.getState(),{decimalPlaces:i}=t().currency,n=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.round)(e().outstandingBalance,i).toFixed(i);return this._toCents(+n)})}_getAvailableCountries(){var e;return _e(this,void 0,void 0,function*(){const t=yield this.paymentIntegrationService.loadShippingCountries();return((null===(e=t.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code))||[]).filter(e=>Se.includes(e))})}_getAvailableShippingOptions(){var e,t,i;return _e(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getConsignments();if(!(null==n?void 0:n[0]))return;const r=n[0],o=(r.availableShippingOptions||[]).map(this._getStripeShippingOption.bind(this)),s=null===(e=r.availableShippingOptions)||void 0===e?void 0:e.find(e=>e.isRecommended),a=null===(t=r.selectedShippingOption)||void 0===t?void 0:t.id,d=null==s?void 0:s.id;return a?o.sort(e=>e.id===a?-1:0):d?(o.sort(e=>e.id===d?-1:0),yield this._handleShippingOptionChange(d)):yield this._handleShippingOptionChange(null===(i=o[0])||void 0===i?void 0:i.id),o})}_getStripeShippingOption({id:e,cost:t,description:i}){return{id:e,displayName:i,amount:this._toCents(t)}}_handleShippingOptionChange(e){return _e(this,void 0,void 0,function*(){if(e&&\"shipping_option_unselected\"!==e)return this.paymentIntegrationService.selectShippingOption(e)})}_getAmountTransformer(){if(this._amountTransformer)return this._amountTransformer;const{getCart:e}=this.paymentIntegrationService.getState(),{currency:t}=e()||{};return t?new ve(t.decimalPlaces):void 0}_toCents(e){const t=Math.round(100*e),i=this._getAmountTransformer();return i?i.toInteger(e):t}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this.loadingIndicator.show(this._loadingIndicatorContainer):this.loadingIndicator.hide()}}const Ce=l(t=>{const i=new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),n=new ge({containerStyles:me});return new fe(t,i,new W(t,i),n)},[{id:\"stripeocs\"}]);var Ee=function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}d((n=n.apply(e,t||[])).next())})};class Ie{constructor(e,t,i,n){this.paymentIntegrationService=e,this.scriptLoader=t,this.stripeIntegrationService=i,this.loadingIndicator=n}initialize(e){return Ee(this,void 0,void 0,function*(){const{stripeocs:t,containerId:i}=e||{};if(!t||!i)throw new v(a.PaymentNotInitialized);const{methodId:n,gatewayId:r}=t;if(!n||!r)throw new y(s.MissingPaymentMethod);const o=yield this.paymentIntegrationService.loadPaymentMethod(r,{params:{method:n}}),d=o.getPaymentMethodOrThrow(n,r),{loadingContainerId:l,buttonHeight:c,onComplete:u}=t;if(this._loadingIndicatorContainer=l,this._onComplete=u,!J(d))throw new y(s.MissingPaymentMethod);const{initializationData:h}=d,{captureMethod:p}=h,m=this.stripeIntegrationService.getStripeJsVersion(h);this._captureMethod=p,this._stripeClient=yield this.scriptLoader.getStripeClient(h,o.getCartLocale(),m),yield this.paymentIntegrationService.loadDefaultCheckout(),yield this._mountExpressCheckoutElement(i,this._stripeClient,c),this._initializeEvents(n)})}signIn(){return Promise.resolve()}signOut(){return Promise.resolve()}executePaymentMethodCheckout(){return Promise.resolve()}deinitialize(){return Promise.resolve()}_mountExpressCheckoutElement(e,t,i=40){return Ee(this,void 0,void 0,function*(){const n=this._shouldRequireShippingAddress(),r=Object.assign(Object.assign(Object.assign({shippingAddressRequired:n},n?{allowedShippingCountries:yield this._getAvailableCountries()}:{}),n?{shippingRates:[{id:\"_\",amount:0,displayName:\"Pending rates\"}]}:{}),{billingAddressRequired:!0,emailRequired:!0,phoneNumberRequired:!0,paymentMethods:{link:L.AUTO,applePay:L.NEVER,googlePay:L.NEVER,amazonPay:L.NEVER,paypal:L.NEVER,klarna:L.NEVER},buttonHeight:i}),{cartAmount:o=1}=this.paymentIntegrationService.getState().getCart()||{},s=Object.assign({mode:\"payment\",amount:this._toCents(o),currency:this._getCurrency()},this._captureMethod?{captureMethod:this._captureMethod}:{});this._stripeElements=t.elements(s),this._linkV2Element=this._stripeElements.create(V.EXPRESS_CHECKOUT,r),this._linkV2Element.mount(`#${e}`)})}_initializeEvents(e){this._linkV2Element&&(this._shouldRequireShippingAddress()&&(this._linkV2Element.on(j.SHIPPING_ADDRESS_CHANGE,e=>Ee(this,void 0,void 0,function*(){return this._onShippingAddressChange(e)})),this._linkV2Element.on(j.SHIPPING_RATE_CHANGE,e=>Ee(this,void 0,void 0,function*(){return this._onShippingRateChange(e)}))),this._linkV2Element.on(j.CONFIRM,t=>Ee(this,void 0,void 0,function*(){return this._onConfirm(t,e)})),this._linkV2Element.on(j.CANCEL,this._onCancel))}_onShippingAddressChange(e){return Ee(this,void 0,void 0,function*(){if(!(\"address\"in e))return;const t=e.address,i={firstName:\"\",lastName:\"\",phone:\"\",company:\"\",address1:\"\",address2:\"\",city:(null==t?void 0:t.city)||\"\",countryCode:(null==t?void 0:t.country)||\"\",postalCode:(null==t?void 0:t.postal_code)||\"\",stateOrProvince:(null==t?void 0:t.state)||\"\",stateOrProvinceCode:(null==t?void 0:t.state)||\"\",customFields:[]};yield this.paymentIntegrationService.updateShippingAddress(i);const n=yield this._getAvailableShippingOptions();yield this._updateDisplayedPrice(),(null==n?void 0:n.length)?e.resolve({shippingRates:n}):e.reject()})}_onCancel(){throw new _}_onShippingRateChange(e){return Ee(this,void 0,void 0,function*(){if(\"shippingRate\"in e){const{shippingRate:t}=e;yield this._handleShippingOptionChange(null==t?void 0:t.id),yield this._updateDisplayedPrice(),e.resolve({})}})}_onConfirm(e,t){return Ee(this,void 0,void 0,function*(){if(\"billingDetails\"in e&&\"shippingAddress\"in e&&this._stripeClient&&this._stripeElements){yield this._updateShippingAndBillingAddress(e),yield this.paymentIntegrationService.submitOrder();const i=this._getPaymentPayload(t);try{yield this.paymentIntegrationService.submitPayment(i)}catch(e){yield this._processAdditionalAction(e,t)}}return Promise.resolve()})}_updateShippingAndBillingAddress(e){var t,i,n,r,o,s,a,d;return Ee(this,void 0,void 0,function*(){const l=this._shouldRequireShippingAddress(),c=(null===(i=null===(t=e.shippingAddress)||void 0===t?void 0:t.name)||void 0===i?void 0:i.split(\" \")[0])||(null===(r=null===(n=e.billingDetails)||void 0===n?void 0:n.name)||void 0===r?void 0:r.split(\" \")[0])||\"\",u=(null===(s=null===(o=e.shippingAddress)||void 0===o?void 0:o.name)||void 0===s?void 0:s.split(\" \")[1])||(null===(d=null===(a=e.billingDetails)||void 0===a?void 0:a.name)||void 0===d?void 0:d.split(\" \")[1])||\"\";if(l){const t=this._mapShippingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateShippingAddress(t)}const h=this._mapBillingAddress(e.shippingAddress,e.billingDetails,c,u);yield this.paymentIntegrationService.updateBillingAddress(h)})}_mapShippingAddress(e,t,i,n){var r,o,s,a,d,l,c;return{firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==e?void 0:e.address)||void 0===r?void 0:r.line1)||\"\",address2:(null===(o=null==e?void 0:e.address)||void 0===o?void 0:o.line2)||\"\",city:(null===(s=null==e?void 0:e.address)||void 0===s?void 0:s.city)||\"\",countryCode:(null===(a=null==e?void 0:e.address)||void 0===a?void 0:a.country)||\"\",postalCode:(null===(d=null==e?void 0:e.address)||void 0===d?void 0:d.postal_code)||\"\",stateOrProvince:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",stateOrProvinceCode:(null===(c=null==e?void 0:e.address)||void 0===c?void 0:c.state)||\"\",customFields:[]}}_mapBillingAddress(e,t,i,n){var r,o,s,a,d,l;return{email:(null==t?void 0:t.email)||\"\",firstName:i,lastName:n,phone:(null==t?void 0:t.phone)||\"\",company:\"\",address1:(null===(r=null==t?void 0:t.address)||void 0===r?void 0:r.line1)||\"\",address2:\"\",city:(null===(o=null==t?void 0:t.address)||void 0===o?void 0:o.city)||\"\",countryCode:(null===(s=null==t?void 0:t.address)||void 0===s?void 0:s.country)||\"\",postalCode:(null===(a=null==t?void 0:t.address)||void 0===a?void 0:a.postal_code)||\"\",stateOrProvince:(null===(d=null==t?void 0:t.address)||void 0===d?void 0:d.state)||\"\",stateOrProvinceCode:(null===(l=null==e?void 0:e.address)||void 0===l?void 0:l.state)||\"\",customFields:[]}}_processAdditionalAction(e,t){return Ee(this,void 0,void 0,function*(){if(!S(e)||!this.stripeIntegrationService.isAdditionalActionError(e.body.errors))throw e;if(!this._stripeClient||!this._stripeElements)throw new v(a.PaymentNotInitialized);const{data:i}=e.body.additional_action_required,{token:n}=i,{paymentIntent:r}=yield this._confirmStripePaymentOrThrow(i,t),o=this._getPaymentPayload(t,(null==r?void 0:r.id)||n);try{this._toggleLoadingIndicator(!0),yield this.paymentIntegrationService.submitPayment(o),yield this._completeCheckoutFlow()}catch(e){this.stripeIntegrationService.throwPaymentConfirmationProceedMessage()}finally{this._toggleLoadingIndicator(!1)}})}_confirmStripePaymentOrThrow(e,t){var i,n,r;return Ee(this,void 0,void 0,function*(){const{token:o,redirect_url:s}=e,a=this.stripeIntegrationService.mapStripePaymentData(this._stripeElements,s);let d;try{const e=(yield this.stripeIntegrationService.isPaymentCompleted(t,this._stripeClient))?yield null===(r=this._stripeClient)||void 0===r?void 0:r.retrievePaymentIntent(o||\"\"):yield null===(i=this._stripeClient)||void 0===i?void 0:i.confirmPayment({elements:a.elements,clientSecret:o,redirect:L.IF_REQUIRED,confirmParams:{return_url:null===(n=a.confirmParams)||void 0===n?void 0:n.return_url}});if(d=null==e?void 0:e.error,d||!(null==e?void 0:e.paymentIntent))throw new H;return e}catch(e){return this.stripeIntegrationService.throwStripeError(d)}})}_completeCheckoutFlow(){return Ee(this,void 0,void 0,function*(){return\"function\"==typeof this._onComplete?this._onComplete():(window.location.replace(\"/checkout/order-confirmation\"),Promise.resolve())})}_getPaymentPayload(e,t){var i;const n=(null===(i=this.paymentIntegrationService.getState().getCart())||void 0===i?void 0:i.id)||\"\";return{methodId:e,paymentData:{formattedPayload:Object.assign(Object.assign({cart_id:n},t?{credit_card_token:{token:t}}:{}),{confirm:!1,method:z.Link})}}}_shouldRequireShippingAddress(){const{getCart:e}=this.paymentIntegrationService.getState(),{lineItems:t}=e()||{};return!!(null==t?void 0:t.physicalItems.length)}_updateDisplayedPrice(){return Ee(this,void 0,void 0,function*(){this._stripeElements&&this._stripeElements.update({currency:this._getCurrency(),mode:\"payment\",amount:yield this._getTotalPrice()})})}_getCurrency(){var e;if(!this._currencyCode){const t=null===(e=this.paymentIntegrationService.getState().getCart())||void 0===e?void 0:e.currency;t&&(this._currencyCode=t.code.toLowerCase())}return this._currencyCode}_getTotalPrice(){var e;return Ee(this,void 0,void 0,function*(){yield this.paymentIntegrationService.loadCheckout();const{getCheckoutOrThrow:t,getCart:i}=this.paymentIntegrationService.getState(),{decimalPlaces:n}=(null===(e=i())||void 0===e?void 0:e.currency)||{},o=(0,lodash__WEBPACK_IMPORTED_MODULE_1__.round)(t().outstandingBalance,n).toFixed(n);return this._toCents(+o)})}_getAvailableCountries(){var e;return Ee(this,void 0,void 0,function*(){const t=yield this.paymentIntegrationService.loadShippingCountries();return((null===(e=t.getShippingCountries())||void 0===e?void 0:e.map(e=>e.code))||[]).filter(e=>Se.includes(e))})}_getAvailableShippingOptions(){var e,t,i;return Ee(this,void 0,void 0,function*(){const n=this.paymentIntegrationService.getState().getConsignments();if(!(null==n?void 0:n[0]))return;const r=n[0],o=(r.availableShippingOptions||[]).map(this._getStripeShippingOption.bind(this)),s=null===(e=r.availableShippingOptions)||void 0===e?void 0:e.find(e=>e.isRecommended),a=null===(t=r.selectedShippingOption)||void 0===t?void 0:t.id,d=null==s?void 0:s.id;return a?o.sort(e=>e.id===a?-1:0):d?(o.sort(e=>e.id===d?-1:0),yield this._handleShippingOptionChange(d)):yield this._handleShippingOptionChange(null===(i=o[0])||void 0===i?void 0:i.id),o})}_getStripeShippingOption({id:e,cost:t,description:i}){return{id:e,displayName:i,amount:this._toCents(t)}}_handleShippingOptionChange(e){return Ee(this,void 0,void 0,function*(){if(e&&\"shipping_option_unselected\"!==e)return this.paymentIntegrationService.selectShippingOption(e)})}_getAmountTransformer(){if(this._amountTransformer)return this._amountTransformer;const{getCart:e}=this.paymentIntegrationService.getState(),{currency:t}=e()||{};return t?new ve(t.decimalPlaces):void 0}_toCents(e){const t=Math.round(100*e),i=this._getAmountTransformer();return i?i.toInteger(e):t}_toggleLoadingIndicator(e){e&&this._loadingIndicatorContainer?this.loadingIndicator.show(this._loadingIndicatorContainer):this.loadingIndicator.hide()}}const Pe=l(t=>{const i=new G((0,_bigcommerce_script_loader__WEBPACK_IMPORTED_MODULE_0__.getScriptLoader)()),n=new ge({containerStyles:me});return new Ie(t,i,new W(t,i),n)},[{id:\"stripeocs\"}]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY2hlY2tvdXQtc2RrLWpzL2Rpc3QvZXNtL2ludGVncmF0aW9ucy9zdHJpcGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNBLElDQ1lBLEVDQUFDLEVGRFJDLEVBQXNCLENBQUMsRUdDWixTQUFTQyxFQUNwQkMsRUFDQUMsR0FFQSxPQUFPQyxPQUFPQyxPQUFPSCxFQUFRLENBQUVDLGNBQ25DLENDTkFILEVBQW9CTSxFQUFJLENBQUNDLEVBQVNDLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFSCxFQUFTRSxJQUM1RUwsT0FBT08sZUFBZUosRUFBU0UsRUFBSyxDQUFFRyxZQUFZLEVBQU1DLElBQUtMLEVBQVdDLE1DSjNFVCxFQUFvQlUsRUFBSSxDQUFDSSxFQUFLQyxJQUFVWCxPQUFPWSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ09uRSxNQUFlSSxVQUFzQkMsTUFJaEQsV0FBQUMsQ0FBWUMsR0NYRCxJQUFxQ04sRURZNUNPLE1BQU1ELEdBQVcscUNBSnJCLEtBQUFFLEtBQU8sZ0JBQ1AsS0FBQUMsS0FBTyxXQ1R5Q1QsYURjWkEsVUNiaENaLE9BQU9zQixlQUNQdEIsT0FBT3NCLGVEWVFDLEtDWmVYLEdEWWZXLEtDVlJDLFVBQVlaLEVEWW9CLG1CQUE1QkksTUFBTVMsa0JBQ2JULE1BQU1TLGtCQUFrQkYsaUJBRXhCQSxLQUFLRyxNQUFRLElBQUlWLE1BQU1PLEtBQUtMLFNBQVNRLEtBRTdDLEVFZFcsTUFBTUMsVUFBNkJaLEVBQzlDLFdBQUFFLENBQVlDLEdBQ1JDLE1BQU1ELEdBQVcseUNBRWpCSyxLQUFLSCxLQUFPLHVCQUNaRyxLQUFLRixLQUFPLGtCQUNoQixFQ05XLE1BQU1PLFVBQW9DRCxFQUNyRCxXQUFBVixDQUFZWSxHQUNSLElBQUlYLEVBQVUseUVBRVZXLElBQ0FYLEVBQVUsR0FBR0EsNERBQWtFVyxFQUFjQyxLQUN6RixVQUlSWCxNQUFNRCxHQUVOSyxL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QSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxNLHVTQ25NVyxNQUFN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YnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3dlYnBhY2svYm9vdHN0cmFwP2ZmY2MiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbWlzc2luZy1kYXRhLWVycm9yLnRzP2I3ZGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvbm90LWluaXRpYWxpemVkLWVycm9yLnRzPzhiNGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy90by1yZXNvbHZhYmxlLW1vZHVsZS50cz9kNTIwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzPzk5NGMiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kPzllYTQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvc3RhbmRhcmQtZXJyb3IudHM/OGEwMyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9zZXQtcHJvdG90eXBlLW9mLnRzPzg0NWEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvaW52YWxpZC1hcmd1bWVudC1lcnJvci50cz8zOTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtYXJndW1lbnQtaW52YWxpZC1lcnJvci50cz9hNTAxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvcGF5bWVudC9pcy1ob3N0ZWQtaW50cnVtZW50LWxpa2UudHM/ODc2MyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL3BheW1lbnQvaXMtdmF1bHRlZC1pbnN0cnVtZW50LnRzPzE4MGYiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvb3JkZXItZmluYWxpemF0aW9uLW5vdC1yZXF1aXJlZC1lcnJvci50cz9iNWExIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL2lzLXJlcXVlc3QtZXJyb3IudHM/YjQzZCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jYW5jZWxsZWQtZXJyb3IudHM/MDg5MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGV2My9pcy1pbmRpdmlkdWFsLWNhcmQtZWxlbWVudC1vcHRpb25zLnRzPzI2MTUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBldjMvc3RyaXBldjMudHM/MGFiMSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGV2My9zdHJpcGV2My1lcnJvci50cz8xZDU5Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZXYzL3N0cmlwZXYzLXBheW1lbnQtc3RyYXRlZ3kudHM/YWEwOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2JpbGxpbmcvaXMtYmlsbGluZy1hZGRyZXNzLWxpa2UudHM/ODUzMCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGkvc3JjL2Vycm9ycy9wYXltZW50LW1ldGhvZC1jbGllbnQtdW5hdmFpbGFibGUtZXJyb3IudHM/ZjhlYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGV2My9zdHJpcGV2My1zY3JpcHQtbG9hZGVyLnRzP2M4MWUiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBldjMvY3JlYXRlLXN0cmlwZXYzLXBheW1lbnQtc3RyYXRlZ3kudHM/NmFiOSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLXV0aWxzL3NyYy9zdHJpcGUudHM/NDA5MSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLXV0aWxzL3NyYy9zdHJpcGUtc2NyaXB0LWxvYWRlci50cz9jMTIxIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvZXJyb3JzL3BheW1lbnQtbWV0aG9kLWZhaWxlZC1lcnJvci50cz8wN2RkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS1pbnRlZ3JhdGlvbi1zZXJ2aWNlLnRzPzcxNTIiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvaXMtc3RyaXBlLWVycm9yLnRzPzVlM2EiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpL3NyYy9lcnJvcnMvcmVxdWVzdC1lcnJvci50cz9jODQwIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL2lzLXN0cmlwZS1wYXltZW50LW1ldGhvZC1saWtlLnRzPzIwMTkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvc3RyaXBlLXN1cHBvcnRlZC1sb2NhbGVzLnRzP2EzYzEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvZm9ybWF0LWxvY2FsZS50cz9kYjg1Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtdXRpbHMvc3JjL3N0cmlwZS11cGUvc3RyaXBlLXVwZS1jb25zdGFudHMudHM/Yjk0MCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtdXBlL2lzLXN0cmlwZS1hY2NlbGVyYXRlZC1jaGVja291dC1jdXN0b21lci50cz9jZTY3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS11cGUvc3RyaXBlLXVwZS1wYXltZW50LXN0cmF0ZWd5LnRzPzk2MGQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLXVwZS9jcmVhdGUtc3RyaXBlLXVwZS1wYXltZW50LXN0cmF0ZWd5LnRzPzk1MDkiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS11dGlscy9zcmMvaXMtc3RyaXBlLXBheW1lbnQtZXZlbnQudHM/ZTRhZSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtb2NzL3N0cmlwZS1vY3MtcGF5bWVudC1zdHJhdGVneS50cz9kYTQ0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1vY3MvY3JlYXRlLXN0cmlwZS1vY3MtcGF5bWVudC1zdHJhdGVneS50cz8yYTQ0Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1jcy9zdHJpcGUtY3MtcGF5bWVudC1zdHJhdGVneS50cz85MjdkIiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1jcy9jcmVhdGUtc3RyaXBlLWNzLXBheW1lbnQtc3RyYXRlZ3kudHM/Mzc4YSIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtdXBlL3N0cmlwZS11cGUtY3VzdG9tZXItc3RyYXRlZ3kudHM/Y2M3NCIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtdXBlL2NyZWF0ZS1zdHJpcGUtdXBlLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzg2MDEiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3VpL3NyYy9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci50cz9iMDg3Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9wYXltZW50LWludGVncmF0aW9uLWFwaS9zcmMvY29tbW9uL3V0aWxpdHkvYW1vdW50LXRyYW5zZm9ybWVyLnRzPzFkNzgiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLW9jcy9jb25zdGFudHMudHM/ZWE3MiIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtb2NzL3N0cmlwZS1saW5rLXYyLWN1c3RvbWVyLXN0cmF0ZWd5LnRzPzU4OWQiLCJ3ZWJwYWNrOi8vY2hlY2tvdXQvQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay8uL3BhY2thZ2VzL3N0cmlwZS1pbnRlZ3JhdGlvbi9zcmMvc3RyaXBlLW9jcy9jcmVhdGUtc3RyaXBlLWxpbmstdjItY3VzdG9tZXItc3RyYXRlZ3kudHM/ZDUzYyIsIndlYnBhY2s6Ly9jaGVja291dC9AYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrLy4vcGFja2FnZXMvc3RyaXBlLWludGVncmF0aW9uL3NyYy9zdHJpcGUtb2NzL3N0cmlwZS1saW5rLXYyLWJ1dHRvbi1zdHJhdGVneS50cz8yMmU4Iiwid2VicGFjazovL2NoZWNrb3V0L0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvLi9wYWNrYWdlcy9zdHJpcGUtaW50ZWdyYXRpb24vc3JjL3N0cmlwZS1vY3MvY3JlYXRlLXN0cmlwZS1saW5rLXYyLWJ1dHRvbi1zdHJhdGVneS50cz85M2VhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTWlzc2luZ0RhdGFFcnJvclR5cGUge1xuICAgIE1pc3NpbmdCaWxsaW5nQWRkcmVzcyxcbiAgICBNaXNzaW5nQ2FydCxcbiAgICBNaXNzaW5nQ2hlY2tvdXQsXG4gICAgTWlzc2luZ0NvbnNpZ25tZW50cyxcbiAgICBNaXNzaW5nQ3VzdG9tZXIsXG4gICAgTWlzc2luZ0NoZWNrb3V0Q29uZmlnLFxuICAgIE1pc3NpbmdPcmRlcixcbiAgICBNaXNzaW5nT3JkZXJDb25maWcsXG4gICAgTWlzc2luZ09yZGVySWQsXG4gICAgTWlzc2luZ1BheW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRJZCxcbiAgICBNaXNzaW5nUGF5bWVudEluc3RydW1lbnQsXG4gICAgTWlzc2luZ1BheW1lbnRNZXRob2QsXG4gICAgTWlzc2luZ1BheW1lbnRSZWRpcmVjdFVybCxcbiAgICBNaXNzaW5nUGF5bWVudFN0YXR1cyxcbiAgICBNaXNzaW5nUGF5bWVudFRva2VuLFxuICAgIE1pc3NpbmdTaGlwcGluZ0FkZHJlc3MsXG59XG5cbi8qKlxuICogVGhyb3cgdGhpcyBlcnJvciB3aGVuIGRhdGEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCBpcyBtaXNzaW5nLiBVc3VhbGx5IGl0XG4gKiBpcyBkdWUgdG8gdGhlIGZhY3QgdGhhdCBjZXJ0YWluIGRhdGEgaGFzIG5vdCBiZWVuIHJldHJpZXZlZCBmcm9tIG9yIHNhdmVkIHRvXG4gKiB0aGUgc2VydmVyIHlldC4gQW5kIHN1Y2ggZGF0YSBpcyByZXF1aXJlZCB0byBwZXJmb3JtIGNlcnRhaW4gYWN0aW9ucy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWlzc2luZ0RhdGFFcnJvciBleHRlbmRzIFN0YW5kYXJkRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBzdWJ0eXBlOiBNaXNzaW5nRGF0YUVycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nRGF0YUVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ21pc3NpbmdfZGF0YSc7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogTWlzc2luZ0RhdGFFcnJvclR5cGUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdCaWxsaW5nQWRkcmVzczpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBiaWxsaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0NhcnQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2FydCBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ29uc2lnbm1lbnRzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGNvbnNpZ25tZW50cyBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY2hlY2tvdXQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0N1c3RvbWVyOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIGN1c3RvbWVyIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDaGVja291dENvbmZpZzpcbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXJDb25maWc6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgY29uZmlndXJhdGlvbiBkYXRhIGlzIHVuYXZhaWxhYmxlLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nT3JkZXI6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ09yZGVySWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2Ugb3JkZXIgSUQgaXMgdW5hdmFpbGFibGUgb3Igbm90IGdlbmVyYXRlZCB5ZXQuJztcblxuICAgICAgICBjYXNlIE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHBheW1lbnQgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGNhc2UgTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRUb2tlbjpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgdG9rZW4gcmVxdWlyZWQgdG8gc3VibWl0IGEgcGF5bWVudCBpcyBtaXNzaW5nLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSBwYXltZW50IG1ldGhvZCBkYXRhIGlzIHVuYXZhaWxhYmxlIG9yIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLic7XG5cbiAgICAgICAgY2FzZSBNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nU2hpcHBpbmdBZGRyZXNzOlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHNoaXBwaW5nIGFkZHJlc3MgZGF0YSBpcyB1bmF2YWlsYWJsZS4nO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIHJlcXVpcmVkIGRhdGEgaXMgdW5hdmFpbGFibGUuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuZXhwb3J0IGVudW0gTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUge1xuICAgIENoZWNrb3V0QnV0dG9uTm90SW5pdGlhbGl6ZWQsXG4gICAgQ3VzdG9tZXJOb3RJbml0aWFsaXplZCxcbiAgICBQYXltZW50Tm90SW5pdGlhbGl6ZWQsXG4gICAgU2hpcHBpbmdOb3RJbml0aWFsaXplZCxcbiAgICBTcGFtUHJvdGVjdGlvbk5vdEluaXRpYWxpemVkLFxufVxuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgYSBtZXRob2QgcmVxdWlyZXMgYSBjZXJ0YWluIGluaXRpYWxpemF0aW9uIGNhbGwgdG8gYmVcbiAqIG1hZGUgZmlyc3QuIFNvbWUgb2JqZWN0cyBjYW4gYmUgY29uc3RydWN0ZWQgYnV0IHRoZXkgY2Fubm90IGJlIHVzZWQgdW50aWwgYVxuICogc2VwYXJhdGUgaW5pdGlhbGl6YXRpb24gY2FsbCBpcyBtYWRlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOb3RJbml0aWFsaXplZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHN1YnR5cGU6IE5vdEluaXRpYWxpemVkRXJyb3JUeXBlKSB7XG4gICAgICAgIHN1cGVyKGdldEVycm9yTWVzc2FnZShzdWJ0eXBlKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ05vdEluaXRpYWxpemVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnbm90X2luaXRpYWxpemVkJztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSh0eXBlOiBOb3RJbml0aWFsaXplZEVycm9yVHlwZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuQ3VzdG9tZXJOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgY3VzdG9tZXIgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgcGF5bWVudCBzdGVwIG9mIGNoZWNrb3V0IGhhcyBub3QgYmVlbiBpbml0aWFsaXplZC4nO1xuXG4gICAgICAgIGNhc2UgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuU2hpcHBpbmdOb3RJbml0aWFsaXplZDpcbiAgICAgICAgICAgIHJldHVybiAnVW5hYmxlIHRvIHByb2NlZWQgYmVjYXVzZSB0aGUgc2hpcHBpbmcgc3RlcCBvZiBjaGVja291dCBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBjYXNlIE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlNwYW1Qcm90ZWN0aW9uTm90SW5pdGlhbGl6ZWQ6XG4gICAgICAgICAgICByZXR1cm4gJ1VuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlIGNoZWNrb3V0IHNwYW0gcHJvdGVjdGlvbiBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQuJztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSByZXF1aXJlZCBjb21wb25lbnQgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkLic7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJlc29sdmFibGVNb2R1bGUgZnJvbSAnLi9yZXNvbHZhYmxlLW1vZHVsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvUmVzb2x2YWJsZU1vZHVsZTxUTW9kdWxlLCBUSWRlbnRpZmllcj4oXG4gICAgbW9kdWxlOiBUTW9kdWxlLFxuICAgIHJlc29sdmVJZHM6IFRJZGVudGlmaWVyW10sXG4pOiBSZXNvbHZhYmxlTW9kdWxlPFRNb2R1bGUsIFRJZGVudGlmaWVyPiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obW9kdWxlLCB7IHJlc29sdmVJZHMgfSk7XG59XG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IEN1c3RvbUVycm9yIGZyb20gJy4vY3VzdG9tLWVycm9yJztcbmltcG9ydCBzZXRQcm90b3R5cGVPZiBmcm9tICcuL3NldC1wcm90b3R5cGUtb2YnO1xuXG4vKipcbiAqIFRoaXMgZXJyb3IgdHlwZSBzaG91bGQgbm90IGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5LiBJdCBpcyBhIGJhc2UgY2xhc3MgZm9yXG4gKiBhbGwgY3VzdG9tIGVycm9ycyB0aHJvd24gaW4gdGhpcyBsaWJyYXJ5LlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBTdGFuZGFyZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBDdXN0b21FcnJvciB7XG4gICAgbmFtZSA9ICdTdGFuZGFyZEVycm9yJztcbiAgICB0eXBlID0gJ3N0YW5kYXJkJztcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBlcnJvciBoYXMgb2NjdXJyZWQuJyk7XG5cbiAgICAgICAgc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIG5ldy50YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFjayA9IG5ldyBFcnJvcih0aGlzLm1lc3NhZ2UpLnN0YWNrO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0UHJvdG90eXBlT2Yob2JqZWN0OiBhbnksIHByb3RvdHlwZTogb2JqZWN0KSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2Yob2JqZWN0LCBwcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdC5fX3Byb3RvX18gPSBwcm90b3R5cGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIGEgbWV0aG9kIGlzIHVuYWJsZSB0byBwcm9jZWVkIGJlY2F1c2UgdGhlXG4gKiBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIGFyZ3VtZW50cyBhY2NvcmRpbmcgdG8gdGhlaXIgcmVxdWlyZW1lbnRzLFxuICogaS5lLjogaWYgYW4gYXJndW1lbnQgaXMgbWlzc2luZyBvciBpdCBpcyBub3QgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0ludmFsaWQgYXJndW1lbnRzIGhhdmUgYmVlbiBwcm92aWRlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEFyZ3VtZW50RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW52YWxpZF9hcmd1bWVudCc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEludmFsaWRBcmd1bWVudEVycm9yIGZyb20gJy4vaW52YWxpZC1hcmd1bWVudC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gd2UgYXJlIHVuYWJsZSB0byBzdWJtaXQgYSBwYXltZW50IGJlY2F1c2VcbiAqIHRoZSBjYWxsZXIgaGFzIG5vdCBwcm92aWRlZCBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkcywgaS5lLjogaWYgYW4gYXJndW1lbnQgaXNcbiAqIG1pc3Npbmcgb3IgaXQgaXMgbm90IHRoZSBleHBlY3RlZCBkYXRhIHR5cGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvciBleHRlbmRzIEludmFsaWRBcmd1bWVudEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihpbnZhbGlkRmllbGRzPzogc3RyaW5nW10pIHtcbiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnVW5hYmxlIHRvIHN1Ym1pdCBwYXltZW50IGZvciB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgcGF5bG9hZCBpcyBpbnZhbGlkLic7XG5cbiAgICAgICAgaWYgKGludmFsaWRGaWVsZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBNYWtlIHN1cmUgdGhlIGZvbGxvd2luZyBmaWVsZHMgYXJlIHByb3ZpZGVkIGNvcnJlY3RseTogJHtpbnZhbGlkRmllbGRzLmpvaW4oXG4gICAgICAgICAgICAgICAgJywgJyxcbiAgICAgICAgICAgICl9LmA7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudEFyZ3VtZW50SW52YWxpZEVycm9yJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBIb3N0ZWRJbnN0cnVtZW50IH0gZnJvbSAnLi9wYXltZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNIb3N0ZWRJbnN0cnVtZW50TGlrZShcbiAgICBpbnN0cnVtZW50OiB1bmtub3duLFxuKTogaW5zdHJ1bWVudCBpcyBIb3N0ZWRJbnN0cnVtZW50IHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgaW5zdHJ1bWVudCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5zdHJ1bWVudCAhPT0gbnVsbCAmJlxuICAgICAgICAodHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgdHlwZW9mIChpbnN0cnVtZW50IGFzIEhvc3RlZEluc3RydW1lbnQpLnNob3VsZFNhdmVJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpICYmXG4gICAgICAgICh0eXBlb2YgKGluc3RydW1lbnQgYXMgSG9zdGVkSW5zdHJ1bWVudCkuc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoaW5zdHJ1bWVudCBhcyBIb3N0ZWRJbnN0cnVtZW50KS5zaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID09PSAnYm9vbGVhbicpXG4gICAgKTtcbn1cbiIsImltcG9ydCB7XG4gICAgRm9ybWF0dGVkUGF5bG9hZCxcbiAgICBGb3JtYXR0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBIb3N0ZWRWYXVsdGVkSW5zdHJ1bWVudCxcbiAgICBQYXltZW50SW5zdHJ1bWVudFBheWxvYWQsXG4gICAgVmF1bHRlZEluc3RydW1lbnQsXG59IGZyb20gJy4vcGF5bWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBWYXVsdGVkSW5zdHJ1bWVudCB7XG4gICAgcmV0dXJuIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3RlZFZhdWx0ZWRJbnN0cnVtZW50KFxuICAgIGluc3RydW1lbnQ6IFBheW1lbnRJbnN0cnVtZW50UGF5bG9hZCxcbik6IGluc3RydW1lbnQgaXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICAgIEJvb2xlYW4oKGluc3RydW1lbnQgYXMgSG9zdGVkVmF1bHRlZEluc3RydW1lbnQpLmluc3RydW1lbnRJZCkgJiZcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0cnVtZW50LCAnY2NOdW1iZXInKSAmJlxuICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGluc3RydW1lbnQsICdjY0N2dicpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQoXG4gICAgaW5zdHJ1bWVudDogUGF5bWVudEluc3RydW1lbnRQYXlsb2FkLFxuKTogaW5zdHJ1bWVudCBpcyBGb3JtYXR0ZWRQYXlsb2FkPEZvcm1hdHRlZFZhdWx0ZWRJbnN0cnVtZW50PiB7XG4gICAgY29uc3QgZm9ybWF0dGVkSW5zdHJ1bWVudCA9IChpbnN0cnVtZW50IGFzIEZvcm1hdHRlZFBheWxvYWQ8Rm9ybWF0dGVkVmF1bHRlZEluc3RydW1lbnQ+KVxuICAgICAgICAuZm9ybWF0dGVkUGF5bG9hZDtcblxuICAgIGlmICghZm9ybWF0dGVkSW5zdHJ1bWVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgICAgdHlwZW9mIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuID09PSAnc3RyaW5nJyB8fFxuICAgICAgICBCb29sZWFuKGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuICYmIGZvcm1hdHRlZEluc3RydW1lbnQuYmlncGF5X3Rva2VuLnRva2VuKVxuICAgICk7XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaHJvdyB0aGlzIGVycm9yIGlmIHdlIGFyZSB0cnlpbmcgdG8gbWFrZSBhbiBvcmRlciBmaW5hbGl6YXRpb24gcmVxdWVzdCBmb3IgYVxuICogcGF5bWVudCBtZXRob2QgdGhhdCBkb2VzIG5vdCByZXF1aXJlIHN1Y2ggcHJvY2VkdXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoJ1RoZSBjdXJyZW50IG9yZGVyIGRvZXMgbm90IG5lZWQgdG8gYmUgZmluYWxpemVkIGF0IHRoaXMgc3RhZ2UuJyk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gJ09yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdvcmRlcl9maW5hbGl6YXRpb25fbm90X3JlcXVpcmVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgUmVxdWVzdEVycm9yIGZyb20gJy4vcmVxdWVzdC1lcnJvcic7XG5cbi8vIEhhdmUgdG8gdXNlIGBhc2AgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzM5ODcwNDQvdHlwZWd1YXJkaW5nLWFuLXVua25vd24tbmVzdGVkLW9iamVjdCBzaG91bGQgYmUgZml4ZWQgaW4gNC44K1xuY29uc3QgaXNSZXF1ZXN0RXJyb3IgPSAoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBSZXF1ZXN0RXJyb3IgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yICE9PSBudWxsICYmICdib2R5JyBpbiBlcnJvcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzUmVxdWVzdEVycm9yO1xuIiwiaW1wb3J0IFN0YW5kYXJkRXJyb3IgZnJvbSAnLi9zdGFuZGFyZC1lcnJvcic7XG5cbi8qKlxuICogVGhpcyBlcnJvciBzaG91bGQgYmUgdGhyb3duIHdoZW4gdGhlIHBheW1lbnQgZmxvdyBpcyBjYW5jZWxsZWQuIEl0IGNvdWxkIGJlXG4gKiBkdWUgdG8gYSBkZWxpYmVyYXRlIHVzZXIgaW50ZXJhY3Rpb24sIGkuZS46IHRoZSB1c2VyIGNsaWNrcyBvbiBhIGNhbmNlbFxuICogYnV0dG9uIHdoaWNoIGRpc21pc3NlcyB0aGUgcGF5bWVudCBtb2RhbC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yIGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlIHx8ICdQYXltZW50IHByb2Nlc3Mgd2FzIGNhbmNlbGxlZC4nKTtcblxuICAgICAgICB0aGlzLm5hbWUgPSAnUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yJztcbiAgICAgICAgdGhpcy50eXBlID0gJ3BheW1lbnRfY2FuY2VsbGVkJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGV2Myc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzSW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyhcbiAgICBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zOiBhbnksXG4pOiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIGlzIEluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMge1xuICAgIHJldHVybiAoXG4gICAgICAgIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgIT09IG51bGwgJiZcbiAgICAgICAgdHlwZW9mIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgPT09ICdvYmplY3QnICYmXG4gICAgICAgICdjYXJkTnVtYmVyRWxlbWVudE9wdGlvbnMnIGluIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgJiZcbiAgICAgICAgJ2NhcmRDdmNFbGVtZW50T3B0aW9ucycgaW4gaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyAmJlxuICAgICAgICAnY2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zJyBpbiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zICYmXG4gICAgICAgIHR5cGVvZiBpbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zLmNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIGluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMuY2FyZEN2Y0VsZW1lbnRPcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucy5jYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnMgIT09ICd1bmRlZmluZWQnXG4gICAgKTtcbn1cbiIsImludGVyZmFjZSBCYXNlRWxlbWVudE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIEN1c3RvbWl6ZSB0aGUgYXBwZWFyYW5jZSBvZiBhbiBlbGVtZW50IHVzaW5nIENTUyBwcm9wZXJ0aWVzIHBhc3NlZCBpbiBhIFtTdHlsZV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvYXBwZW5kaXgvc3R5bGUpIG9iamVjdCxcbiAgICAgKiB3aGljaCBjb25zaXN0cyBvZiBDU1MgcHJvcGVydGllcyBuZXN0ZWQgdW5kZXIgb2JqZWN0cyBmb3IgZWFjaCB2YXJpYW50LlxuICAgICAqL1xuICAgIHN0eWxlPzogU3RyaXBlRWxlbWVudFN0eWxlO1xuXG4gICAgLyoqXG4gICAgICogU2V0IGN1c3RvbSBjbGFzcyBuYW1lcyBvbiB0aGUgY29udGFpbmVyIERPTSBlbGVtZW50IHdoZW4gdGhlIFN0cmlwZSBlbGVtZW50IGlzIGluIGEgcGFydGljdWxhciBzdGF0ZS5cbiAgICAgKi9cbiAgICBjbGFzc2VzPzogU3RyaXBlRWxlbWVudENsYXNzZXM7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgZGlzYWJsZWQgc3RhdGUgdG8gdGhlIEVsZW1lbnQgc3VjaCB0aGF0IHVzZXIgaW5wdXQgaXMgbm90IGFjY2VwdGVkLiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqL1xuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVQYXltZW50TWV0aG9kQ2FyZERhdGEgZXh0ZW5kcyBQYXltZW50TWV0aG9kQ3JlYXRlUGFyYW1zIHtcbiAgICBjYXJkPzogU3RyaXBlRWxlbWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVQYXltZW50TWV0aG9kSWRlYWxEYXRhIGV4dGVuZHMgUGF5bWVudE1ldGhvZENyZWF0ZVBhcmFtcyB7XG4gICAgaWRlYWw/OiBTdHJpcGVFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZVBheW1lbnRNZXRob2RTZXBhRGF0YSBleHRlbmRzIFBheW1lbnRNZXRob2RDcmVhdGVQYXJhbXMge1xuICAgIHNlcGFfZGViaXQ/OiBTdHJpcGVFbGVtZW50O1xufVxuXG4vKipcbiAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQYXltZW50SW50ZW50IHtcbiAgICAvKipcbiAgICAgKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIG9iamVjdC5cbiAgICAgKi9cbiAgICBpZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogU3RhdHVzIG9mIHRoaXMgUGF5bWVudEludGVudC4gUmVhZCBtb3JlIGFib3V0IGVhY2ggUGF5bWVudEludGVudCBbc3RhdHVzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9pbnRlbnRzI2ludGVudC1zdGF0dXNlcykuXG4gICAgICovXG4gICAgc3RhdHVzOiAnc3VjY2VlZGVkJyB8IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXltZW50IGVycm9yIGVuY291bnRlcmVkIGluIHRoZSBwcmV2aW91cyBQYXltZW50SW50ZW50IGNvbmZpcm1hdGlvbi4gSXQgd2lsbCBiZSBjbGVhcmVkIGlmIHRoZSBQYXltZW50SW50ZW50IGlzIGxhdGVyIHVwZGF0ZWQgZm9yIGFueSByZWFzb24uXG4gICAgICovXG4gICAgbGFzdF9wYXltZW50X2Vycm9yOiBMYXN0UGF5bWVudEVycm9yIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGUgcGF5bWVudCBlcnJvciBlbmNvdW50ZXJlZCBpbiB0aGUgcHJldmlvdXMgUGF5bWVudEludGVudCBjb25maXJtYXRpb24uIEl0IHdpbGwgYmUgY2xlYXJlZCBpZiB0aGUgUGF5bWVudEludGVudCBpcyBsYXRlciB1cGRhdGVkIGZvciBhbnkgcmVhc29uLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIExhc3RQYXltZW50RXJyb3Ige1xuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgbWVzc2FnZSBwcm92aWRpbmcgbW9yZSBkZXRhaWxzIGFib3V0IHRoZSBlcnJvci4gRm9yIGNhcmQgZXJyb3JzLCB0aGVzZSBtZXNzYWdlcyBjYW4gYmUgc2hvd24gdG8geW91ciB1c2Vycy5cbiAgICAgKi9cbiAgICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBQYXltZW50TWV0aG9kIG9iamVjdFxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2Qge1xuICAgIC8qKlxuICAgICAqIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgb2JqZWN0LlxuICAgICAqL1xuICAgIGlkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiB0aGUgUGF5bWVudE1ldGhvZC4gQW4gYWRkaXRpb25hbCBoYXNoIGlzIGluY2x1ZGVkIG9uIHRoZSBQYXltZW50TWV0aG9kIHdpdGggYSBuYW1lIG1hdGNoaW5nIHRoaXMgdmFsdWUuXG4gICAgICogSXQgY29udGFpbnMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBzcGVjaWZpYyB0byB0aGUgUGF5bWVudE1ldGhvZCB0eXBlLlxuICAgICAqL1xuICAgIHR5cGU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXltZW50TWV0aG9kQ3JlYXRlUGFyYW1zIHtcbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIGluZm9ybWF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgUGF5bWVudE1ldGhvZCB0aGF0IG1heSBiZSB1c2VkIG9yIHJlcXVpcmVkIGJ5IHBhcnRpY3VsYXIgdHlwZXMgb2YgcGF5bWVudCBtZXRob2RzLlxuICAgICAqL1xuICAgIGJpbGxpbmdfZGV0YWlscz86IFN0cmlwZUJpbGxpbmdEZXRhaWxzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVycm9yIHtcbiAgICAvKipcbiAgICAgKiBBIGh1bWFuLXJlYWRhYmxlIG1lc3NhZ2UgcHJvdmlkaW5nIG1vcmUgZGV0YWlscyBhYm91dCB0aGUgZXJyb3IuIEZvciBjYXJkIGVycm9ycywgdGhlc2UgbWVzc2FnZXMgY2FuIGJlIHNob3duIHRvIHlvdXIgdXNlcnMuXG4gICAgICovXG4gICAgbWVzc2FnZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAgICAgKi9cbiAgICBwYXltZW50X2ludGVudDogUGF5bWVudEludGVudDtcblxuICAgIC8qKlxuICAgICAqIEEgaHVtYW4tcmVhZGFibGUgY29kZSBmb3IgdGhlIGVycm9yIG9idGFpbmVkXG4gICAgICovXG4gICAgY29kZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDU1MgcHJvcGVydGllcyBzdXBwb3J0ZWQgYnkgU3RyaXBlLmpzLlxuICovXG5pbnRlcmZhY2UgU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBbYmFja2dyb3VuZC1jb2xvcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2JhY2tncm91bmQtY29sb3IpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgcHJvcGVydHkgd29ya3MgYmVzdCB3aXRoIHRoZSBgOjpzZWxlY3Rpb25gIHBzZXVkby1jbGFzcy5cbiAgICAgKiBJbiBvdGhlciBjYXNlcywgY29uc2lkZXIgc2V0dGluZyB0aGUgYmFja2dyb3VuZCBjb2xvciBvbiB0aGUgZWxlbWVudCdzIGNvbnRhaW5lciBpbnN0YWVkLlxuICAgICAqL1xuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbY29sb3JdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9jb2xvcikgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGNvbG9yPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtmb250LWZhbWlseV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2ZvbnQtZmFtaWx5KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udEZhbWlseT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbZm9udC1zaXplXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zaXplKSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udFNpemU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2ZvbnQtc21vb3RoaW5nXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zbW9vdGhpbmcpIENTUyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBmb250U21vb3RoaW5nPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtmb250LXN0eWxlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC1zdHlsZSkgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGZvbnRTdHlsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbZm9udC12YXJpYW50XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC12YXJpYW50KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgZm9udFZhcmlhbnQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2ZvbnQtd2VpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQpIENTUyBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBmb250V2VpZ2h0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gcHJvcGVydHksIHVzZWQgdG8gc2V0IHRoZSBjb2xvciBvZiB0aGUgaWNvbnMgdGhhdCBhcmUgcmVuZGVyZWQgaW4gYW4gZWxlbWVudC5cbiAgICAgKi9cbiAgICBpY29uQ29sb3I/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW2xpbmUtaGVpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvbGluZS1oZWlnaHQpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRvIGF2b2lkIGN1cnNvcnMgYmVpbmcgcmVuZGVyZWQgaW5jb25zaXN0ZW50bHkgYWNyb3NzIGJyb3dzZXJzLCBjb25zaWRlciB1c2luZyBhIHBhZGRpbmcgb24gdGhlIGVsZW1lbnQncyBjb250YWluZXIgaW5zdGVhZC5cbiAgICAgKi9cbiAgICBsaW5lSGVpZ2h0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFtsZXR0ZXItc3BhY2luZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2xldHRlci1zcGFjaW5nKSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgbGV0dGVyU3BhY2luZz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbdGV4dC1hbGlnbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtYWxpZ24pIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEF2YWlsYWJsZSBmb3IgdGhlIGBjYXJkTnVtYmVyYCwgYGNhcmRFeHBpcnlgLCBhbmQgYGNhcmRDdmNgIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIHRleHRBbGlnbj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbcGFkZGluZ10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcpIENTUyBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEF2YWlsYWJsZSBmb3IgdGhlIGBpZGVhbEJhbmtgIGVsZW1lbnQuXG4gICAgICogQWNjZXB0cyBpbnRlZ2VyIGBweGAgdmFsdWVzLlxuICAgICAqL1xuICAgIHBhZGRpbmc/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgW3RleHQtZGVjb3JhdGlvbl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtZGVjb3JhdGlvbikgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHRleHREZWNvcmF0aW9uPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIFt0ZXh0LXNoYWRvd10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3RleHQtc2hhZG93KSBDU1MgcHJvcGVydHkuXG4gICAgICovXG4gICAgdGV4dFNoYWRvdz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBbdGV4dC10cmFuc2Zvcm1dKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy90ZXh0LXRyYW5zZm9ybSkgQ1NTIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHRleHRUcmFuc2Zvcm0/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdHJpcGVFbGVtZW50U3R5bGVWYXJpYW50IGV4dGVuZHMgU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMge1xuICAgICc6aG92ZXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOmZvY3VzJz86IFN0cmlwZUVsZW1lbnRDU1NQcm9wZXJ0aWVzO1xuXG4gICAgJzo6cGxhY2Vob2xkZXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOjpzZWxlY3Rpb24nPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAnOi13ZWJraXQtYXV0b2ZpbGwnPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBBdmFpbGFibGUgZm9yIGFsbCBlbGVtZW50cyBleGNlcHQgdGhlIGBwYXltZW50UmVxdWVzdEJ1dHRvbmAgZWxlbWVudFxuICAgICAqL1xuICAgICc6ZGlzYWJsZWQnPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXM7XG5cbiAgICAvKipcbiAgICAgKiBBdmFpbGFibGUgZm9yIHRoZSBgY2FyZE51bWJlcmAsIGBjYXJkRXhwaXJ5YCwgYW5kIGBjYXJkQ3ZjYCBlbGVtZW50cy5cbiAgICAgKi9cbiAgICAnOjotbXMtY2xlYXInPzogU3RyaXBlRWxlbWVudENTU1Byb3BlcnRpZXMgJiB7IGRpc3BsYXk6IHN0cmluZyB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VFbGVtZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQSBwcmUtZmlsbGVkIHNldCBvZiB2YWx1ZXMgdG8gaW5jbHVkZSBpbiB0aGUgaW5wdXQgKGUuZy4sIHtwb3N0YWxDb2RlOiAnOTQxMTAnfSkuXG4gICAgICogTm90ZSB0aGF0IHNlbnNpdGl2ZSBjYXJkIGluZm9ybWF0aW9uIChjYXJkIG51bWJlciwgQ1ZDLCBhbmQgZXhwaXJhdGlvbiBkYXRlKVxuICAgICAqIGNhbm5vdCBiZSBwcmUtZmlsbGVkXG4gICAgICovXG4gICAgdmFsdWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBIaWRlIHRoZSBwb3N0YWwgY29kZSBmaWVsZC4gRGVmYXVsdCBpcyBmYWxzZS4gSWYgeW91IGFyZSBhbHJlYWR5IGNvbGxlY3RpbmcgYVxuICAgICAqIGZ1bGwgYmlsbGluZyBhZGRyZXNzIG9yIHBvc3RhbCBjb2RlIGVsc2V3aGVyZSwgc2V0IHRoaXMgdG8gdHJ1ZS5cbiAgICAgKi9cbiAgICBoaWRlUG9zdGFsQ29kZT86IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LlxuICAgICAqL1xuICAgIGljb25TdHlsZT86IEljb25TdHlsZTtcblxuICAgIC8qXG4gICAgICogSGlkZXMgdGhlIGljb24gaW4gdGhlIEVsZW1lbnQsIERlZmF1bHQgaXMgZmFsc2VcbiAgICAgKi9cbiAgICBoaWRlSWNvbj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBCYXNlSW5kaXZpZHVhbEVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUVsZW1lbnRPcHRpb25zIHtcbiAgICBjb250YWluZXJJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmROdW1iZXJFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VJbmRpdmlkdWFsRWxlbWVudE9wdGlvbnMge1xuICAgIC8qXG4gICAgICogUGxhY2Vob2xkZXJcbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcblxuICAgIHNob3dJY29uPzogYm9vbGVhbjtcbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LiBFaXRoZXIgYHNvbGlkYCBvciBgZGVmYXVsdGBcbiAgICAgKi9cbiAgICBpY29uU3R5bGU/OiBJY29uU3R5bGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUluZGl2aWR1YWxFbGVtZW50T3B0aW9ucyB7XG4gICAgLypcbiAgICAgKiBQbGFjZWhvbGRlclxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhcmRDdmNFbGVtZW50T3B0aW9ucyBleHRlbmRzIEJhc2VJbmRpdmlkdWFsRWxlbWVudE9wdGlvbnMge1xuICAgIC8qXG4gICAgICogUGxhY2Vob2xkZXJcbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJYmFuRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBCYXNlRWxlbWVudE9wdGlvbnMge1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIGxpc3Qgb2YgY291bnRyaWVzIG9yIGNvdW50cnktZ3JvdXBzIHdob3NlIElCQU5zIHlvdSB3YW50IHRvIGFsbG93LlxuICAgICAqIE11c3QgYmUgWydTRVBBJ10uXG4gICAgICovXG4gICAgc3VwcG9ydGVkQ291bnRyaWVzPzogc3RyaW5nW107XG5cbiAgICAvKipcbiAgICAgKiBDdXN0b21pemUgdGhlIGNvdW50cnkgYW5kIGZvcm1hdCBvZiB0aGUgcGxhY2Vob2xkZXIgSUJBTi4gRGVmYXVsdCBpcyBERS5cbiAgICAgKi9cbiAgICBwbGFjZWhvbGRlckNvdW50cnk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBcHBlYXJhbmNlIG9mIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LlxuICAgICAqL1xuICAgIGljb25TdHlsZT86IEljb25TdHlsZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJZGVhbEVsZW1lbnRPcHRpb25zIGV4dGVuZHMgQmFzZUVsZW1lbnRPcHRpb25zIHtcbiAgICB2YWx1ZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEhpZGVzIHRoZSBpY29uIGluIHRoZSBFbGVtZW50LiBEZWZhdWx0IGlzIGZhbHNlLlxuICAgICAqL1xuICAgIGhpZGVJY29uPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBaaXBDb2RlRWxlbWVudE9wdGlvbnMge1xuICAgIGNvbnRhaW5lcklkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBlbnVtIEljb25TdHlsZSB7XG4gICAgU29saWQgPSAnc29saWQnLFxuICAgIERlZmF1bHQgPSAnZGVmYXVsdCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudFN0eWxlIHtcbiAgICAvKipcbiAgICAgKiBCYXNlIHZhcmlhbnTigJRhbGwgb3RoZXIgdmFyaWFudHMgaW5oZXJpdCBmcm9tIHRoZXNlIHN0eWxlcy5cbiAgICAgKi9cbiAgICBiYXNlPzogU3RyaXBlRWxlbWVudFN0eWxlVmFyaWFudDtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgdmFsaWQgaW5wdXQuXG4gICAgICovXG4gICAgY29tcGxldGU/OiBTdHJpcGVFbGVtZW50U3R5bGVWYXJpYW50O1xuXG4gICAgLyoqXG4gICAgICogQXBwbGllZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBubyBjdXN0b21lciBpbnB1dC5cbiAgICAgKi9cbiAgICBlbXB0eT86IFN0cmlwZUVsZW1lbnRTdHlsZVZhcmlhbnQ7XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGludmFsaWQgaW5wdXQuXG4gICAgICovXG4gICAgaW52YWxpZD86IFN0cmlwZUVsZW1lbnRTdHlsZVZhcmlhbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudENsYXNzZXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBiYXNlIGNsYXNzIGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lci4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC5cbiAgICAgKi9cbiAgICBiYXNlPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNsYXNzIG5hbWUgdG8gYXBwbHkgd2hlbiB0aGUgRWxlbWVudCBpcyBjb21wbGV0ZS4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC0tY29tcGxldGUuXG4gICAgICovXG4gICAgY29tcGxldGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xhc3MgbmFtZSB0byBhcHBseSB3aGVuIHRoZSBFbGVtZW50IGlzIGVtcHR5LiBEZWZhdWx0cyB0byBTdHJpcGVFbGVtZW50LS1lbXB0eS5cbiAgICAgKi9cbiAgICBlbXB0eT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzcyBuYW1lIHRvIGFwcGx5IHdoZW4gdGhlIEVsZW1lbnQgaXMgZm9jdXNlZC4gRGVmYXVsdHMgdG8gU3RyaXBlRWxlbWVudC0tZm9jdXMuXG4gICAgICovXG4gICAgZm9jdXM/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xhc3MgbmFtZSB0byBhcHBseSB3aGVuIHRoZSBFbGVtZW50IGlzIGludmFsaWQuIERlZmF1bHRzIHRvIFN0cmlwZUVsZW1lbnQtLWludmFsaWQuXG4gICAgICovXG4gICAgaW52YWxpZD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzcyBuYW1lIHRvIGFwcGx5IHdoZW4gdGhlIEVsZW1lbnQgaGFzIGl0cyB2YWx1ZSBhdXRvZmlsbGVkIGJ5IHRoZSBicm93c2VyXG4gICAgICogKG9ubHkgb24gQ2hyb21lIGFuZCBTYWZhcmkpLiBEZWZhdWx0cyB0byBTdHJpcGVFbGVtZW50LS13ZWJraXQtYXV0b2ZpbGwuXG4gICAgICovXG4gICAgd2Via2l0QXV0b0ZpbGw/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkcmVzcyB7XG4gICAgLyoqXG4gICAgICogQ2l0eSwgZGlzdHJpY3QsIHN1YnVyYiwgdG93biwgb3IgdmlsbGFnZS5cbiAgICAgKi9cbiAgICBjaXR5Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVHdvLWxldHRlciBjb3VudHJ5IGNvZGUgKFtJU08gMzE2Ni0xIGFscGhhLTJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT18zMTY2LTFfYWxwaGEtMikpLlxuICAgICAqL1xuICAgIGNvdW50cnk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBZGRyZXNzIGxpbmUgMSAoZS5nLiwgc3RyZWV0LCBQTyBCb3gsIG9yIGNvbXBhbnkgbmFtZSkuXG4gICAgICovXG4gICAgbGluZTE6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEFkZHJlc3MgbGluZSAyIChlLmcuLCBhcGFydG1lbnQsIHN1aXRlLCB1bml0LCBvciBidWlsZGluZykuXG4gICAgICovXG4gICAgbGluZTI/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBaSVAgb3IgcG9zdGFsIGNvZGUuXG4gICAgICovXG4gICAgcG9zdGFsX2NvZGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBTdGF0ZSwgY291bnR5LCBwcm92aW5jZSwgb3IgcmVnaW9uLlxuICAgICAqL1xuICAgIHN0YXRlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUJpbGxpbmdEZXRhaWxzIHtcbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIGFkZHJlc3MuXG4gICAgICovXG4gICAgYWRkcmVzcz86IFN0cmlwZUFkZHJlc3M7XG5cbiAgICAvKipcbiAgICAgKiBFbWFpbCBhZGRyZXNzLlxuICAgICAqL1xuICAgIGVtYWlsPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogRnVsbCBuYW1lLlxuICAgICAqL1xuICAgIG5hbWU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBCaWxsaW5nIHBob25lIG51bWJlciAoaW5jbHVkaW5nIGV4dGVuc2lvbikuXG4gICAgICovXG4gICAgcGhvbmU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlU2hpcHBpbmdBZGRyZXNzIHtcbiAgICAvKipcbiAgICAgKiBTaGlwcGluZyBBZGRyZXNzXG4gICAgICovXG4gICAgYWRkcmVzczogU3RyaXBlQWRkcmVzcztcblxuICAgIC8qKlxuICAgICAqIFJlY2lwaWVudCBuYW1lXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGRlbGl2ZXJ5IHNlcnZpY2UgdGhhdCBzaGlwcGVkIGEgcGh5c2ljYWwgcHJvZHVjdCwgc3VjaCBhcyBGZWRleCwgVVBTLCBVU1BTLCBldGMuXG4gICAgICovXG4gICAgY2Fycmllcj86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFJlY2lwaWVudCBwaG9uZSAoaW5jbHVkaW5nIGV4dGVuc2lvbikuXG4gICAgICovXG4gICAgcGhvbmU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhY2tpbmcgbnVtYmVyIGZvciBhIHBoeXNpY2FsIHByb2R1Y3QsIG9idGFpbmVkIGZyb20gdGhlIGRlbGl2ZXJ5IHNlcnZpY2UuXG4gICAgICogSWYgbXVsdGlwbGUgdHJhY2tpbmcgbnVtYmVycyB3ZXJlIGdlbmVyYXRlZCBmb3IgdGhpcyBwdXJjaGFzZSwgcGxlYXNlIHNlcGFyYXRlIHRoZW0gd2l0aCBjb21tYXMuXG4gICAgICovXG4gICAgdHJhY2tpbmdfbnVtYmVyPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIERhdGEgdG8gYmUgc2VudCB3aXRoIGEgYHN0cmlwZS5jb25maXJtQWxpcGF5UGF5bWVudGAgcmVxdWVzdC5cbiAqIFJlZmVyIHRvIHRoZSBbUGF5bWVudCBJbnRlbnRzIEFQSV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cy9jb25maXJtKSBmb3IgYSBmdWxsIGxpc3Qgb2YgcGFyYW1ldGVycy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDb25maXJtQWxpcGF5UGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogSWYgeW91IGFyZSBbaGFuZGxpbmcgbmV4dCBhY3Rpb25zIHlvdXJzZWxmXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9wYXltZW50LWludGVudHMvdmVyaWZ5aW5nLXN0YXR1cyNuZXh0LWFjdGlvbnMpLCBwYXNzIGluIGEgcmV0dXJuX3VybC4gSWYgdGhlIHN1YnNlcXVlbnQgYWN0aW9uXG4gICAgICogaXMgcmVkaXJlY3RfdG9fdXJsLCB0aGlzIFVSTCB3aWxsIGJlIHVzZWQgb24gdGhlIHJldHVybiBwYXRoIGZvciB0aGUgcmVkaXJlY3QuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICByZXR1cm5fdXJsPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIERhdGEgdG8gYmUgc2VudCB3aXRoIGEgYHN0cmlwZS5jb25maXJtQ2FyZFBheW1lbnRgIHJlcXVlc3QuXG4gKiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlybUNhcmRQYXltZW50RGF0YSB7XG4gICAgLypcbiAgICAgKiBFaXRoZXIgdGhlIGlkIG9mIGFuIGV4aXN0aW5nIFtQYXltZW50TWV0aG9kXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9tZXRob2RzKSwgb3IgYW4gb2JqZWN0IGNvbnRhaW5pbmcgZGF0YSB0byBjcmVhdGUgYVxuICAgICAqIFBheW1lbnRNZXRob2Qgd2l0aC4gU2VlIHRoZSB1c2UgY2FzZSBzZWN0aW9ucyBiZWxvdyBmb3IgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHBheW1lbnRfbWV0aG9kPzogQ3JlYXRlUGF5bWVudE1ldGhvZENhcmREYXRhO1xuXG4gICAgLypcbiAgICAgKiBUaGUgW3NoaXBwaW5nIGRldGFpbHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSNjb25maXJtX3BheW1lbnRfaW50ZW50LXNoaXBwaW5nKSBmb3IgdGhlIHBheW1lbnQsIGlmIGNvbGxlY3RlZC5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHNoaXBwaW5nPzogU3RyaXBlU2hpcHBpbmdBZGRyZXNzO1xuXG4gICAgLypcbiAgICAgKiBJZiB5b3UgYXJlIFtoYW5kbGluZyBuZXh0IGFjdGlvbnMgeW91cnNlbGZdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3BheW1lbnQtaW50ZW50cy92ZXJpZnlpbmctc3RhdHVzI25leHQtYWN0aW9ucyksIHBhc3MgaW4gYSByZXR1cm5fdXJsLiBJZiB0aGUgc3Vic2VxdWVudCBhY3Rpb25cbiAgICAgKiBpcyByZWRpcmVjdF90b191cmwsIHRoaXMgVVJMIHdpbGwgYmUgdXNlZCBvbiB0aGUgcmV0dXJuIHBhdGggZm9yIHRoZSByZWRpcmVjdC5cbiAgICAgKlxuICAgICAqIEByZWNvbW1lbmRlZFxuICAgICAqL1xuICAgIHJldHVybl91cmw/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB5b3UgaW50ZW5kIHRvIG1ha2UgZnV0dXJlIHBheW1lbnRzIHdpdGggdGhpcyBQYXltZW50SW50ZW50J3MgcGF5bWVudCBtZXRob2QuXG4gICAgICpcbiAgICAgKiBJZiBwcmVzZW50LCB0aGUgcGF5bWVudCBtZXRob2QgdXNlZCB3aXRoIHRoaXMgUGF5bWVudEludGVudCBjYW4gYmUgW2F0dGFjaGVkXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9tZXRob2RzL2F0dGFjaCkgdG8gYSBDdXN0b21lciwgZXZlbiBhZnRlciB0aGUgdHJhbnNhY3Rpb24gY29tcGxldGVzLlxuICAgICAqXG4gICAgICogVXNlIGBvbl9zZXNzaW9uYCBpZiB5b3UgaW50ZW5kIHRvIG9ubHkgcmV1c2UgdGhlIHBheW1lbnQgbWV0aG9kIHdoZW4geW91ciBjdXN0b21lciBpcyBwcmVzZW50IGluIHlvdXIgY2hlY2tvdXQgZmxvdy4gVXNlIGBvZmZfc2Vzc2lvbmAgaWYgeW91ciBjdXN0b21lciBtYXkgb3IgbWF5IG5vdCBiZSBpbiB5b3VyIGNoZWNrb3V0IGZsb3cuXG4gICAgICovXG4gICAgc2V0dXBfZnV0dXJlX3VzYWdlPzogJ29mZl9zZXNzaW9uJyB8ICdvbl9zZXNzaW9uJyB8IG51bGw7XG59XG5cbi8qKlxuICogRGF0YSB0byBiZSBzZW50IHdpdGggYSBgc3RyaXBlLmNvbmZpcm1JZGVhbFBheW1lbnRgIHJlcXVlc3QuXG4gKiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogRWl0aGVyIHRoZSBpZCBvZiBhbiBleGlzdGluZyBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcyksIG9yIGFuIG9iamVjdCBjb250YWluaW5nIGRhdGEgdG8gY3JlYXRlIGFcbiAgICAgKiBQYXltZW50TWV0aG9kIHdpdGguIFNlZSB0aGUgdXNlIGNhc2Ugc2VjdGlvbnMgYmVsb3cgZm9yIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICBwYXltZW50X21ldGhvZD86IENyZWF0ZVBheW1lbnRNZXRob2RJZGVhbERhdGE7XG5cbiAgICAvKlxuICAgICAqIElmIHlvdSBhcmUgW2hhbmRsaW5nIG5leHQgYWN0aW9ucyB5b3Vyc2VsZl0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvcGF5bWVudC1pbnRlbnRzL3ZlcmlmeWluZy1zdGF0dXMjbmV4dC1hY3Rpb25zKSwgcGFzcyBpbiBhIHJldHVybl91cmwuIElmIHRoZSBzdWJzZXF1ZW50IGFjdGlvblxuICAgICAqIGlzIHJlZGlyZWN0X3RvX3VybCwgdGhpcyBVUkwgd2lsbCBiZSB1c2VkIG9uIHRoZSByZXR1cm4gcGF0aCBmb3IgdGhlIHJlZGlyZWN0LlxuICAgICAqXG4gICAgICogQHJlY29tbWVuZGVkXG4gICAgICovXG4gICAgcmV0dXJuX3VybD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBEYXRhIHRvIGJlIHNlbnQgd2l0aCBhIGBzdHJpcGUuY29uZmlybVNFUEFQYXltZW50YCByZXF1ZXN0LlxuICogUmVmZXIgdG8gdGhlIFtQYXltZW50IEludGVudHMgQVBJXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm0pIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1TZXBhUGF5bWVudERhdGEge1xuICAgIC8qXG4gICAgICogRWl0aGVyIHRoZSBpZCBvZiBhbiBleGlzdGluZyBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcyksIG9yIGFuIG9iamVjdCBjb250YWluaW5nIGRhdGEgdG8gY3JlYXRlIGFcbiAgICAgKiBQYXltZW50TWV0aG9kIHdpdGguIFNlZSB0aGUgdXNlIGNhc2Ugc2VjdGlvbnMgYmVsb3cgZm9yIGRldGFpbHMuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICBwYXltZW50X21ldGhvZD86IENyZWF0ZVBheW1lbnRNZXRob2RTZXBhRGF0YTtcbn1cblxuZXhwb3J0IHR5cGUgU3RyaXBlQ29uZmlybVBheW1lbnREYXRhID1cbiAgICB8IFN0cmlwZUNvbmZpcm1BbGlwYXlQYXltZW50RGF0YVxuICAgIHwgU3RyaXBlQ29uZmlybUNhcmRQYXltZW50RGF0YVxuICAgIHwgU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGFcbiAgICB8IFN0cmlwZUNvbmZpcm1TZXBhUGF5bWVudERhdGFcbiAgICB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgU3RyaXBlRWxlbWVudE9wdGlvbnMgPVxuICAgIHwgQ2FyZEVsZW1lbnRPcHRpb25zXG4gICAgfCBDYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnNcbiAgICB8IENhcmROdW1iZXJFbGVtZW50T3B0aW9uc1xuICAgIHwgQ2FyZEN2Y0VsZW1lbnRPcHRpb25zXG4gICAgfCBJZGVhbEVsZW1lbnRPcHRpb25zXG4gICAgfCBJYmFuRWxlbWVudE9wdGlvbnNcbiAgICB8IFppcENvZGVFbGVtZW50T3B0aW9ucztcblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgYGVsZW1lbnQubW91bnRgIG1ldGhvZCBhdHRhY2hlcyB5b3VyIGVsZW1lbnQgdG8gdGhlIERPTS5cbiAgICAgKi9cbiAgICBtb3VudChkb21FbGVtZW50OiBzdHJpbmcgfCBIVE1MRWxlbWVudCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgZGVzdHJveXMgaXQuXG4gICAgICogQSBkZXN0cm95ZWQgZWxlbWVudCBjYW4gbm90IGJlIHJlLWFjdGl2YXRlZCBvciByZS1tb3VudGVkIHRvIHRoZSBET00uXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqIENhbGwgYGVsZW1lbnQubW91bnRgIHRvIHJlLWF0dGFjaCBpdCB0byB0aGUgRE9NLlxuICAgICAqL1xuICAgIHVubW91bnQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50cyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBBbGlwYXlFbGVtZW50YCB8IGBDYXJkRWxlbWVudGAgfCBgQ2FyZEN2Y0VsZW1lbnRgIHxgQ2FyZEV4cGlyeUVsZW1lbnRgIHwgYENhcmRFeHBpcnlFbGVtZW50YCB8IGBDYXJkTnVtYmVyRWxlbWVudGAgfCBgSWRlYWxCYW5rRWxlbWVudGAgfCBgSWJhbkVsZW1lbnRgLlxuICAgICAqL1xuICAgIGNyZWF0ZShlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUsIG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50T3B0aW9ucyk6IFN0cmlwZUVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIHByZXZpb3VzbHkgY3JlYXRlZCBgRWxlbWVudGAgYnkgaXRzIHR5cGUuXG4gICAgICovXG4gICAgZ2V0RWxlbWVudChlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUpOiBTdHJpcGVFbGVtZW50IHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIHBhc3MgY3VzdG9tIGZvbnRzIHdoZW4gY3JlYXRpbmcgYW4gW0VsZW1lbnRzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvY3JlYXRlKSBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3NzRm9udFNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgcG9pbnRpbmcgdG8gYSBDU1MgZmlsZSB3aXRoIFtAZm9udC1mYWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZSkgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgICAqIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zYFxuICAgICAqIE5vdGUgdGhhdCBpZiB5b3UgYXJlIHVzaW5nIGEgW2NvbnRlbnQgc2VjdXJpdHkgcG9saWN5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvQ29udGVudC1TZWN1cml0eS1Qb2xpY3kpIChDU1ApLFxuICAgICAqIFthZGRpdGlvbmFsIGRpcmVjdGl2ZXNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3NlY3VyaXR5I2NvbnRlbnQtc2VjdXJpdHktcG9saWN5KSBtYXkgYmUgbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIGNzc1NyYzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gcGFzcyBjdXN0b20gZm9udHMgd2hlbiBjcmVhdGluZyBhbiBbRWxlbWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGUpIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21Gb250U291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSB0byBnaXZlIHRoZSBmb250LlxuICAgICAqL1xuICAgIGZhbWlseTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbc3JjXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9zcmMpIHZhbHVlIHBvaW50aW5nIHRvIHlvdXJcbiAgICAgKiBjdXN0b20gZm9udCBmaWxlLiBUaGlzIGlzIHVzdWFsbHkgKHRob3VnaCBub3QgYWx3YXlzKSBhIGxpbmsgdG8gYSBmaWxlIHdpdGggYSAud29mZiAsIC5vdGYsIG9yIC5zdmcgc3VmZml4LlxuICAgICAqL1xuICAgIHNyYzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbZm9udC1kaXNwbGF5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9mb250LWRpc3BsYXkpIHZhbHVlLlxuICAgICAqL1xuICAgIGRpc3BsYXk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPbmUgb2Ygbm9ybWFsLCBpdGFsaWMsIG9ibGlxdWUuIERlZmF1bHRzIHRvIG5vcm1hbC5cbiAgICAgKi9cbiAgICBzdHlsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW3VuaWNvZGUtcmFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlL3VuaWNvZGUtcmFuZ2UpIHZhbHVlLlxuICAgICAqL1xuICAgIHVuaWNvZGVSYW5nZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW2ZvbnQtd2VpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQpLiBOb3RlIHRoYXQgdGhpcyBpcyBhIHN0cmluZywgbm90IGEgbnVtYmVyLlxuICAgICAqL1xuICAgIHdlaWdodD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgQ3VzdG9tRm9udCA9IENzc0ZvbnRTb3VyY2UgfCBDdXN0b21Gb250U291cmNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVsZW1lbnRzT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQW4gYXJyYXkgb2YgY3VzdG9tIGZvbnRzLCB3aGljaCBlbGVtZW50cyBjcmVhdGVkIGZyb20gdGhlIEVsZW1lbnRzIG9iamVjdCBjYW4gdXNlLlxuICAgICAqIEZvbnRzIGNhbiBiZSBzcGVjaWZpZWQgYXMgW0Nzc0ZvbnRTb3VyY2VdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L2Nzc19mb250X3NvdXJjZV9vYmplY3QpXG4gICAgICogb3IgW0N1c3RvbUZvbnRTb3VyY2VdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L2N1c3RvbV9mb250X3NvdXJjZV9vYmplY3QpIG9iamVjdHMuXG4gICAgICovXG4gICAgZm9udHM/OiBDdXN0b21Gb250W107XG5cbiAgICAvKipcbiAgICAgKiBBIFtsb2NhbGVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2FwcGVuZGl4L3N1cHBvcnRlZF9sb2NhbGVzKSB0byBkaXNwbGF5IHBsYWNlaG9sZGVycyBhbmRcbiAgICAgKiBlcnJvciBzdHJpbmdzIGluLiBEZWZhdWx0IGlzIGF1dG8gKFN0cmlwZSBkZXRlY3RzIHRoZSBsb2NhbGUgb2YgdGhlIGJyb3dzZXIpLlxuICAgICAqIFNldHRpbmcgdGhlIGxvY2FsZSBkb2VzIG5vdCBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHBvc3RhbCBjb2RlIHZhbGlkYXRpb27igJRhIHZhbGlkIHBvc3RhbCBjb2RlXG4gICAgICogZm9yIHRoZSBiaWxsaW5nIGNvdW50cnkgb2YgdGhlIGNhcmQgaXMgc3RpbGwgcmVxdWlyZWQuXG4gICAgICovXG4gICAgbG9jYWxlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogU2V0IHRoaXMgdG8gZmFsc2UgaWYgeW91IHdhbnQgdG8gW21hbnVhbGx5IGhhbmRsZSB0aGUgYXV0aG9yaXphdGlvbiByZWRpcmVjdF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvaWRlYWwjaGFuZGxlLXJlZGlyZWN0KS4gRGVmYXVsdCBpcyB0cnVlLlxuICAgICAqL1xuICAgIGhhbmRsZUFjdGlvbnM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVYzQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYEVsZW1lbnRzYCBpbnN0YW5jZSwgd2hpY2ggbWFuYWdlcyBhIGdyb3VwIG9mIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGVsZW1lbnRzKG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c09wdGlvbnMpOiBTdHJpcGVFbGVtZW50cztcblxuICAgIC8qXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm1fYWxpcGF5X3BheW1lbnRcbiAgICAgKlxuICAgICAqIFVzZSBgc3RyaXBlLmNvbmZpcm1BbGlwYXlQYXltZW50YCBpbiB0aGUgQWxpcGF5IHBheW1lbnQgbWV0aG9kIGNyZWF0aW9uIGZsb3cgd2hlbiB0aGUgY3VzdG9tZXIgc3VibWl0cyB5b3VyIHBheW1lbnQgZm9ybS5cbiAgICAgKiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjb25maXJtIHRoZSBbUGF5bWVudEludGVudF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cykgd2l0aCBkYXRhIHlvdSBwcm92aWRlLCBhbmQgaXQgd2lsbCBhdXRvbWF0aWNhbGx5XG4gICAgICogcmVkaXJlY3QgdGhlIGN1c3RvbWVyIHRvIHRoZSBhdXRob3JpemUgdGhlIHRyYW5zYWN0aW9uLiBPbmNlIGF1dGhvcml6YXRpb24gaXMgY29tcGxldGUsIHRoZSBjdXN0b21lciB3aWxsIGJlIHJlZGlyZWN0ZWRcbiAgICAgKiBiYWNrIHRvIHlvdXIgc3BlY2lmaWVkIGByZXR1cm5fdXJsYC4gV2hlbiB5b3UgY29uZmlybSBhIGBQYXltZW50SW50ZW50YCwgaXQgbmVlZHMgdG8gaGF2ZSBhbiBhdHRhY2hlZCBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykuXG4gICAgICogSW4gYWRkaXRpb24gdG8gY29uZmlybWluZyB0aGUgYFBheW1lbnRJbnRlbnRgLCB0aGlzIG1ldGhvZCBjYW4gYXV0b21hdGljYWxseSBjcmVhdGUgYW5kIGF0dGFjaCBhIG5ldyBgUGF5bWVudE1ldGhvZGAgZm9yIHlvdS5cbiAgICAgKiBJZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGEgYFBheW1lbnRNZXRob2RgIHlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZCB3aXRob3V0IG5lZWRpbmcgdG8gcHJvdmlkZSBhbnkgYWRkaXRpb25hbCBkYXRhLlxuICAgICAqIFRoZXNlIHVzZSBjYXNlcyBhcmUgZGV0YWlsZWQgaW4gdGhlIHNlY3Rpb25zIHRoYXQgZm9sbG93LlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKiBgc3RyaXBlLmNvbmZpcm1BbGlwYXlQYXltZW50YCBieSBkZWZhdWx0LCB3aWxsIHRyaWdnZXIgYSByZWRpcmVjdCB3aGVuIHN1Y2Nlc3NmdWwuIElmIHRoZXJlIGlzIGFuIGVycm9yLCBvciB3aGVuIGhhbmRsaW5nXG4gICAgICogYG5leHRfYWN0aW9uc2AgbWFudWFsbHkgYnkgdXNpbmcgdGhlIGBoYW5kbGVBY3Rpb25zOiBmYWxzZWAgb3B0aW9uLCBpdCB3aWxsIHJldHVybiBhIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aXRoIGEgYHJlc3VsdGAgb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGhhcyBlaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIHJlc3VsdC5wYXltZW50SW50ZW50OiB0aGUgc3VjY2Vzc2Z1bCBQYXltZW50SW50ZW50LlxuICAgICAqIC0gcmVzdWx0LmVycm9yOiBhbiBlcnJvci4gUmVmZXIgdG8gdGhlIEFQSSByZWZlcmVuY2UgZm9yIGFsbCBwb3NzaWJsZSBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHN0cmlwZS5jb25maXJtQWxpcGF5UGF5bWVudGAgbWF5IHRha2Ugc2V2ZXJhbCBzZWNvbmRzIHRvIGNvbXBsZXRlLiBEdXJpbmcgdGhhdCB0aW1lLCB5b3Ugc2hvdWxkIGRpc2FibGUgeW91clxuICAgICAqIGZvcm0gZnJvbSBiZWluZyByZXN1Ym1pdHRlZCBhbmQgc2hvdyBhIHdhaXRpbmcgaW5kaWNhdG9yIGxpa2UgYSBzcGlubmVyLiBJZiB5b3UgcmVjZWl2ZSBhbiBlcnJvciByZXN1bHQsIHlvdSBzaG91bGRcbiAgICAgKiBiZSBzdXJlIHRvIHNob3cgdGhhdCBlcnJvciB0byB0aGUgY3VzdG9tZXIsIHJlLWVuYWJsZSB0aGUgZm9ybSwgYW5kIGhpZGUgdGhlIHdhaXRpbmcgaW5kaWNhdG9yLlxuICAgICAqL1xuICAgIGNvbmZpcm1BbGlwYXlQYXltZW50KFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFtjbGllbnQgc2VjcmV0XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL29iamVjdCNwYXltZW50X2ludGVudF9vYmplY3QtY2xpZW50X3NlY3JldCkgb2YgdGhlIFBheW1lbnRJbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjbGllbnRTZWNyZXQ6IHN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGF0YSB0byBiZSBzZW50IHdpdGggdGhlIHJlcXVlc3QuIFJlZmVyIHRvIHRoZSBQYXltZW50IEludGVudHMgQVBJIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgZGF0YT86IFN0cmlwZUNvbmZpcm1BbGlwYXlQYXltZW50RGF0YSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb3B0aW9ucyBvYmplY3QgdG8gY29udHJvbCB0aGUgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QuXG4gICAgICAgICAqL1xuICAgICAgICBvcHRpb25zPzogU3RyaXBlQ29uZmlybVBheW1lbnRPcHRpb25zLFxuICAgICk6IFByb21pc2U8eyBwYXltZW50SW50ZW50PzogUGF5bWVudEludGVudDsgZXJyb3I/OiBTdHJpcGVFcnJvciB9PjtcblxuICAgIC8qXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm1fY2FyZF9wYXltZW50XG4gICAgICpcbiAgICAgKiBVc2UgYHN0cmlwZS5jb25maXJtQ2FyZFBheW1lbnRgIHdoZW4gdGhlIGN1c3RvbWVyIHN1Ym1pdHMgeW91ciBwYXltZW50IGZvcm0uXG4gICAgICogV2hlbiBjYWxsZWQsIGl0IHdpbGwgY29uZmlybSB0aGUgW1BheW1lbnRJbnRlbnRdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMpXG4gICAgICogd2l0aCBgZGF0YWAgeW91IHByb3ZpZGUgYW5kIGNhcnJ5IG91dCAzRFMgb3Igb3RoZXIgbmV4dCBhY3Rpb25zIGlmIHRoZXkgYXJlIHJlcXVpcmVkLlxuICAgICAqXG4gICAgICogSWYgeW91IGFyZSB1c2luZyBbRHluYW1pYyAzRCBTZWN1cmVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzLzNkLXNlY3VyZSN0aHJlZS1kcy1yYWRhciksIGBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50YCB3aWxsXG4gICAgICogdHJpZ2dlciB5b3VyIFJhZGFyIHJ1bGVzIHRvIGV4ZWN1dGUgYW5kIG1heSBvcGVuIGEgZGlhbG9nIGZvciB5b3VyIGN1c3RvbWVyIHRvIGF1dGhlbnRpY2F0ZSB0aGVpciBwYXltZW50LlxuICAgICAqXG4gICAgICogV2hlbiB5b3UgY29uZmlybSBhIGBQYXltZW50SW50ZW50YCwgaXQgbmVlZHMgdG8gaGF2ZSBhbiBhdHRhY2hlZCBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykuXG4gICAgICogSW4gYWRkaXRpb24gdG8gY29uZmlybWluZyB0aGUgYFBheW1lbnRJbnRlbnRgLCB0aGlzIG1ldGhvZCBjYW4gYXV0b21hdGljYWxseSBjcmVhdGUgYW5kIGF0dGFjaCBhIG5ldyBgUGF5bWVudE1ldGhvZGAgZm9yIHlvdS5cbiAgICAgKiBJdCBjYW4gYWxzbyBiZSBjYWxsZWQgd2l0aCBhbiBleGlzdGluZyBgUGF5bWVudE1ldGhvZGAsIG9yIGlmIHlvdSBoYXZlIGFscmVhZHkgYXR0YWNoZWQgYSBQYXltZW50TWV0aG9kIHlvdSBjYW4gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kIHdpdGhvdXQgbmVlZGluZyB0byBwcm92aWRlIGFueSBhZGRpdGlvbmFsIGRhdGEuIFRoZXNlIHVzZSBjYXNlcyBhcmUgZGV0YWlsZWQgaW4gdGhlIHNlY3Rpb25zIHRoYXQgZm9sbG93LlxuICAgICAqXG4gICAgICogQHJldHVybnNcbiAgICAgKiBgc3RyaXBlLmNvbmZpcm1DYXJkUGF5bWVudGAgd2lsbCByZXR1cm4gYSBQcm9taXNlIHdoaWNoIHJlc29sdmVzIHdpdGggYSByZXN1bHQgb2JqZWN0LlxuICAgICAqIFRoaXMgb2JqZWN0IGhhcyBlaXRoZXI6XG4gICAgICpcbiAgICAgKiAtIHJlc3VsdC5wYXltZW50SW50ZW50OiB0aGUgc3VjY2Vzc2Z1bCBQYXltZW50SW50ZW50LlxuICAgICAqIC0gcmVzdWx0LmVycm9yOiBhbiBlcnJvci4gUmVmZXIgdG8gdGhlIEFQSSByZWZlcmVuY2UgZm9yIGFsbCBwb3NzaWJsZSBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgc3RyaXBlLmNvbmZpcm1DYXJkUGF5bWVudCBtYXkgdGFrZSBzZXZlcmFsIHNlY29uZHMgdG8gY29tcGxldGUuIER1cmluZyB0aGF0IHRpbWUsIHlvdSBzaG91bGQgZGlzYWJsZVxuICAgICAqIHlvdXIgZm9ybSBmcm9tIGJlaW5nIHJlc3VibWl0dGVkIGFuZCBzaG93IGEgd2FpdGluZyBpbmRpY2F0b3IgbGlrZSBhIHNwaW5uZXIuIElmIHlvdSByZWNlaXZlIGFuIGVycm9yIHJlc3VsdCxcbiAgICAgKiB5b3Ugc2hvdWxkIGJlIHN1cmUgdG8gc2hvdyB0aGF0IGVycm9yIHRvIHRoZSBjdXN0b21lciwgcmUtZW5hYmxlIHRoZSBmb3JtLCBhbmQgaGlkZSB0aGUgd2FpdGluZyBpbmRpY2F0b3IuXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsbHksIGBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50IG1heSB0cmlnZ2VyYCBhIFszRCBTZWN1cmVdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzLzNkLXNlY3VyZSkgYXV0aGVudGljYXRpb25cbiAgICAgKiBjaGFsbGVuZ2UuIFRoaXMgd2lsbCBiZSBzaG93biBpbiBhIG1vZGFsIGRpYWxvZyBhbmQgbWF5IGJlIGNvbmZ1c2luZyBmb3IgY3VzdG9tZXJzIHVzaW5nIGFzc2lzdGl2ZSB0ZWNobm9sb2dpZXMgbGlrZVxuICAgICAqIHNjcmVlbiByZWFkZXJzLiBZb3Ugc2hvdWxkIG1ha2UgeW91ciBmb3JtIGFjY2Vzc2libGUgYnkgZW5zdXJpbmcgdGhhdCBzdWNjZXNzIG9yIGVycm9yIG1lc3NhZ2VzIGFyZSBjbGVhcmx5IHJlYWQgb3V0XG4gICAgICogYWZ0ZXIgdGhpcyBtZXRob2QgY29tcGxldGVzLlxuICAgICAqXG4gICAgICovXG4gICAgY29uZmlybUNhcmRQYXltZW50KFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFtjbGllbnQgc2VjcmV0XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL29iamVjdCNwYXltZW50X2ludGVudF9vYmplY3QtY2xpZW50X3NlY3JldCkgb2YgdGhlIFBheW1lbnRJbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBjbGllbnRTZWNyZXQ6IHN0cmluZyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGF0YSB0byBiZSBzZW50IHdpdGggdGhlIHJlcXVlc3QuIFJlZmVyIHRvIHRoZSBQYXltZW50IEludGVudHMgQVBJIGZvciBhIGZ1bGwgbGlzdCBvZiBwYXJhbWV0ZXJzLlxuICAgICAgICAgKi9cbiAgICAgICAgZGF0YT86IFN0cmlwZUNvbmZpcm1DYXJkUGF5bWVudERhdGEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kLlxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9ucz86IFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqIEBkb2NzIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL3BheW1lbnRfaW50ZW50cy9jb25maXJtX2lkZWFsX3BheW1lbnRcbiAgICAgKlxuICAgICAqIFVzZSBgc3RyaXBlLmNvbmZpcm1JZGVhbFBheW1lbnRgIGluIHRoZSBbaURFQUwgUGF5bWVudHMgd2l0aCBQYXltZW50IE1ldGhvZHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL2lkZWFsKVxuICAgICAqIGZsb3cgd2hlbiB0aGUgY3VzdG9tZXIgc3VibWl0cyB5b3VyIHBheW1lbnQgZm9ybS4gV2hlbiBjYWxsZWQsIGl0IHdpbGwgY29uZmlybSB0aGUgYFBheW1lbnRJbnRlbnRgIHdpdGggYGRhdGFgIHlvdVxuICAgICAqIHByb3ZpZGUsIGFuZCBpdCB3aWxsIGF1dG9tYXRpY2FsbHkgcmVkaXJlY3QgdGhlIGN1c3RvbWVyIHRvIHRoZSBhdXRob3JpemUgdGhlIHRyYW5zYWN0aW9uLlxuICAgICAqIE9uY2UgYXV0aG9yaXphdGlvbiBpcyBjb21wbGV0ZSwgdGhlIGN1c3RvbWVyIHdpbGwgYmUgcmVkaXJlY3RlZCBiYWNrIHRvIHlvdXIgc3BlY2lmaWVkIGByZXR1cm5fdXJsYC5cbiAgICAgKlxuICAgICAqIFdoZW4geW91IGNvbmZpcm0gYSBgUGF5bWVudEludGVudGAsIGl0IG5lZWRzIHRvIGhhdmUgYW4gYXR0YWNoZWQgW1BheW1lbnRNZXRob2RdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X21ldGhvZHMpLlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGNvbmZpcm1pbmcgdGhlIGBQYXltZW50SW50ZW50YCwgdGhpcyBtZXRob2QgY2FuIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFuZCBhdHRhY2ggYSBuZXcgYFBheW1lbnRNZXRob2RgIGZvciB5b3UuXG4gICAgICogSXQgY2FuIGFsc28gYmUgY2FsbGVkIHdpdGggYW4gZXhpc3RpbmcgYFBheW1lbnRNZXRob2RgLCBvciBpZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGEgUGF5bWVudE1ldGhvZCB5b3UgY2FuIGNhbGwgdGhpc1xuICAgICAqIG1ldGhvZCB3aXRob3V0IG5lZWRpbmcgdG8gcHJvdmlkZSBhbnkgYWRkaXRpb25hbCBkYXRhLiBUaGVzZSB1c2UgY2FzZXMgYXJlIGRldGFpbGVkIGluIHRoZSBzZWN0aW9ucyB0aGF0IGZvbGxvdy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zXG4gICAgICogQnkgZGVmYXVsdCwgYHN0cmlwZS5jb25maXJtSWRlYWxQYXltZW50YCB3aWxsIHRyaWdnZXIgYSByZWRpcmVjdCB3aGVuIHN1Y2Nlc3NmdWwuIElmIHRoZXJlIGlzIGFuIGVycm9yLCBvciB3aGVuIGhhbmRsaW5nXG4gICAgICogbmV4dCBhY3Rpb25zIG1hbnVhbGx5IGJ5IHVzaW5nIHRoZSBgaGFuZGxlQWN0aW9uczogZmFsc2VgIG9wdGlvbiwgaXQgd2lsbCByZXR1cm4gYSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2l0aCBhIGByZXN1bHRgXG4gICAgICogb2JqZWN0LiBUaGlzIG9iamVjdCBoYXMgZWl0aGVyOlxuICAgICAqXG4gICAgICogLSByZXN1bHQucGF5bWVudEludGVudDogdGhlIHN1Y2Nlc3NmdWwgUGF5bWVudEludGVudC5cbiAgICAgKiAtIHJlc3VsdC5lcnJvcjogYW4gZXJyb3IuIFJlZmVyIHRvIHRoZSBBUEkgcmVmZXJlbmNlIGZvciBhbGwgcG9zc2libGUgZXJyb3JzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGBzdHJpcGUuY29uZmlybUlkZWFsUGF5bWVudGAgbWF5IHRha2Ugc2V2ZXJhbCBzZWNvbmRzIHRvIGNvbXBsZXRlLiBEdXJpbmcgdGhhdCB0aW1lLCB5b3Ugc2hvdWxkIGRpc2FibGVcbiAgICAgKiB5b3VyIGZvcm0gZnJvbSBiZWluZyByZXN1Ym1pdHRlZCBhbmQgc2hvdyBhIHdhaXRpbmcgaW5kaWNhdG9yIGxpa2UgYSBzcGlubmVyLiBJZiB5b3UgcmVjZWl2ZSBhbiBlcnJvciByZXN1bHQsXG4gICAgICogeW91IHNob3VsZCBiZSBzdXJlIHRvIHNob3cgdGhhdCBlcnJvciB0byB0aGUgY3VzdG9tZXIsIHJlLWVuYWJsZSB0aGUgZm9ybSwgYW5kIGhpZGUgdGhlIHdhaXRpbmcgaW5kaWNhdG9yLlxuICAgICAqL1xuICAgIGNvbmZpcm1JZGVhbFBheW1lbnQoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgW2NsaWVudCBzZWNyZXRdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvb2JqZWN0I3BheW1lbnRfaW50ZW50X29iamVjdC1jbGllbnRfc2VjcmV0KSBvZiB0aGUgUGF5bWVudEludGVudC5cbiAgICAgICAgICovXG4gICAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRhIHRvIGJlIHNlbnQgd2l0aCB0aGUgcmVxdWVzdC4gUmVmZXIgdG8gdGhlIFBheW1lbnQgSW50ZW50cyBBUEkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gICAgICAgICAqL1xuICAgICAgICBkYXRhPzogU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbnRyb2wgdGhlIGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kLlxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9ucz86IFN0cmlwZUNvbmZpcm1QYXltZW50T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqXG4gICAgICogVXNlIGBzdHJpcGUuY29uZmlybVNlcGFEZWJpdFBheW1lbnRgIGluIHRoZSBbU0VQQSBEaXJlY3QgRGViaXQgUGF5bWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3BheW1lbnRzL3NlcGEtZGViaXQpXG4gICAgICogd2l0aCBQYXltZW50IE1ldGhvZHMgZmxvdyB3aGVuIHRoZSBjdXN0b21lciBzdWJtaXRzIHlvdXIgcGF5bWVudCBmb3JtLiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjb25maXJtIHRoZVxuICAgICAqIFtQYXltZW50SW50ZW50XShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzKSB3aXRoIGBkYXRhYCB5b3UgcHJvdmlkZS4gTm90ZSB0aGF0IHRoZXJlIGFyZSBzb21lIGFkZGl0aW9uYWxcbiAgICAgKiByZXF1aXJlbWVudHMgdG8gdGhpcyBmbG93IHRoYXQgYXJlIG5vdCBjb3ZlcmVkIGluIHRoaXMgcmVmZXJlbmNlLiBSZWZlciB0byBvdXIgW2ludGVncmF0aW9uIGd1aWRlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9zZXBhLWRlYml0XG4gICAgICogZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFdoZW4geW91IGNvbmZpcm0gYSBQYXltZW50SW50ZW50LCBpdCBuZWVkcyB0byBoYXZlIGFuIGF0dGFjaGVkIFBheW1lbnRNZXRob2QuIEluIGFkZGl0aW9uIHRvIGNvbmZpcm1pbmcgdGhlIFBheW1lbnRJbnRlbnQsXG4gICAgICogdGhpcyBtZXRob2QgY2FuIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFuZCBhdHRhY2ggYSBuZXcgUGF5bWVudE1ldGhvZCBmb3IgeW91LiBJZiB5b3UgaGF2ZSBhbHJlYWR5IGF0dGFjaGVkIGFcbiAgICAgKiBbUGF5bWVudE1ldGhvZF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfbWV0aG9kcykgeW91IGNhbiBjYWxsIHRoaXMgbWV0aG9kIHdpdGhvdXQgbmVlZGluZyB0byBwcm92aWRlIGFueSBhZGRpdGlvbmFsIGRhdGEuXG4gICAgICogVGhlc2UgdXNlIGNhc2VzIGFyZSBkZXRhaWxlZCBpbiB0aGUgc2VjdGlvbnMgdGhhdCBmb2xsb3cuXG4gICAgICpcbiAgICAgKiBAZG9jcyBodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9wYXltZW50X2ludGVudHMvY29uZmlybV9zZXBhX2RlYml0X3BheW1lbnRcbiAgICAgKi9cbiAgICBjb25maXJtU2VwYURlYml0UGF5bWVudChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBbY2xpZW50IHNlY3JldF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvYXBpL3BheW1lbnRfaW50ZW50cy9vYmplY3QjcGF5bWVudF9pbnRlbnRfb2JqZWN0LWNsaWVudF9zZWNyZXQpIG9mIHRoZSBQYXltZW50SW50ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgY2xpZW50U2VjcmV0OiBzdHJpbmcsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERhdGEgdG8gYmUgc2VudCB3aXRoIHRoZSByZXF1ZXN0LiBSZWZlciB0byB0aGUgW1BheW1lbnQgSW50ZW50cyBBUEldKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS9wYXltZW50X2ludGVudHMvY29uZmlybSkgZm9yIGEgZnVsbCBsaXN0IG9mIHBhcmFtZXRlcnMuXG4gICAgICAgICAqL1xuICAgICAgICBkYXRhPzogU3RyaXBlQ29uZmlybVNlcGFQYXltZW50RGF0YSxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG5cbiAgICAvKlxuICAgICAqIFVzZSBzdHJpcGUuY3JlYXRlUGF5bWVudE1ldGhvZCB0byBjb252ZXJ0IHBheW1lbnQgaW5mb3JtYXRpb24gY29sbGVjdGVkIGJ5IGVsZW1lbnRzIGludG8gYSBQYXltZW50TWV0aG9kXG4gICAgICogb2JqZWN0IHRoYXQgeW91IHNhZmVseSBwYXNzIHRvIHlvdXIgc2VydmVyIHRvIHVzZSBpbiBhbiBBUEkgY2FsbC5cbiAgICAgKlxuICAgICAqIEBkb2NzIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL3BheW1lbnRfbWV0aG9kcy9jcmVhdGVfcGF5bWVudF9tZXRob2RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0eXBlOiBTdHJpbmcsIFRoZSB0eXBlIG9mIHRoZSBQYXltZW50TWV0aG9kIHRvIGNyZWF0ZS4gUmVmZXIgdG8gdGhlIFBheW1lbnRNZXRob2QgQVBJIGZvciBhbGwgcG9zc2libGUgdmFsdWVzLlxuICAgICAqIEBwYXJhbSBjYXJkOiBTdHJpcGVFbGVtZW50LCBBIGNhcmQgb3IgY2FyZE51bWJlciBFbGVtZW50LlxuICAgICAqIEBwYXJhbSBiaWxsaW5nX2RldGFpbHM6IFN0cmlwZUJpbGxpbmdEZXRhaWxzLCBCaWxsaW5nIGluZm9ybWF0aW9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgUGF5bWVudE1ldGhvZCB0aGF0XG4gICAgICogbWF5IGJlIHVzZWQgb3IgcmVxdWlyZWQgYnkgcGFydGljdWxhciB0eXBlcyBvZiBwYXltZW50IG1ldGhvZHMuXG4gICAgICovXG4gICAgY3JlYXRlUGF5bWVudE1ldGhvZChcbiAgICAgICAgcGFyYW1zOiBDcmVhdGVQYXltZW50TWV0aG9kUGFyYW1zLFxuICAgICk6IFByb21pc2U8eyBwYXltZW50TWV0aG9kPzogUGF5bWVudE1ldGhvZDsgZXJyb3I/OiBTdHJpcGVFcnJvciB9PjtcblxuICAgIC8qXG4gICAgICogVXNlIHN0cmlwZS5oYW5kbGVDYXJkQWN0aW9uIGluIHRoZSBQYXltZW50IEludGVudHMgQVBJIG1hbnVhbCBjb25maXJtYXRpb24gZmxvdyB0byBoYW5kbGUgYSBQYXltZW50SW50ZW50XG4gICAgICogd2l0aCB0aGUgcmVxdWlyZXNfYWN0aW9uIHN0YXR1cy4gSXQgd2lsbCB0aHJvdyBhbiBlcnJvciBpZiB0aGUgUGF5bWVudEludGVudCBoYXMgYSBkaWZmZXJlbnQgc3RhdHVzLlxuICAgICAqXG4gICAgICogQGRvY3MgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvcGF5bWVudF9pbnRlbnRzL2hhbmRsZV9jYXJkX2FjdGlvblxuICAgICAqXG4gICAgICogQHBhcmFtIHBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQ6IFN0cmluZywgVGhlIGNsaWVudCBzZWNyZXQgb2YgdGhlIFBheW1lbnRJbnRlbnQgdG8gaGFuZGxlLlxuICAgICAqL1xuICAgIGhhbmRsZUNhcmRBY3Rpb24oXG4gICAgICAgIHBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPHsgcGF5bWVudEludGVudD86IFBheW1lbnRJbnRlbnQ7IGVycm9yPzogU3RyaXBlRXJyb3IgfT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlUGF5bWVudE1ldGhvZFBhcmFtcyB7XG4gICAgdHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGU7XG4gICAgY2FyZDogU3RyaXBlRWxlbWVudDtcbiAgICBiaWxsaW5nX2RldGFpbHM/OiBTdHJpcGVCaWxsaW5nRGV0YWlscztcbiAgICBhbGxvd19yZWRpc3BsYXk/OiAnYWx3YXlzJyB8ICdsaW1pdGVkJyB8ICd1bnNwZWNpZmllZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgU3RyaXBlPyhzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nLCBvcHRpb25zPzogU3RyaXBlQ29uZmlndXJhdGlvbk9wdGlvbnMpOiBTdHJpcGVWM0NsaWVudDtcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlRWxlbWVudFR5cGUge1xuICAgIEFsaXBheSA9ICdhbGlwYXknLFxuICAgIENhcmRDdmMgPSAnY2FyZEN2YycsXG4gICAgQ2FyZEV4cGlyeSA9ICdjYXJkRXhwaXJ5JyxcbiAgICBDYXJkTnVtYmVyID0gJ2NhcmROdW1iZXInLFxuICAgIENyZWRpdENhcmQgPSAnY2FyZCcsXG4gICAgSURFQUwgPSAnaWRlYWxCYW5rJyxcbiAgICBTZXBhID0gJ2liYW4nLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgQWxpcGF5ID0gJ2FsaXBheScsXG4gICAgQ3JlZGl0Q2FyZCA9ICdjYXJkJyxcbiAgICBJREVBTCA9ICdpZGVhbCcsXG4gICAgU2VwYSA9ICdzZXBhX2RlYml0Jyxcbn1cblxuLyoqXG4gKiBJbml0aWFsaXphdGlvbiBvcHRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpZ3VyYXRpb25PcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBGb3IgdXNhZ2Ugd2l0aCBbQ29ubmVjdF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvY29ubmVjdCkgb25seS5cbiAgICAgKiBTcGVjaWZ5aW5nIGEgY29ubmVjdGVkIGFjY291bnQgSUQgKGUuZy4sIGFjY3RfMjRCRk1wSjFzdlI1QTg5aykgYWxsb3dzIHlvdSB0byBwZXJmb3JtIGFjdGlvbnMgb24gYmVoYWxmIG9mIHRoYXQgYWNjb3VudC5cbiAgICAgKi9cbiAgICBzdHJpcGVBY2NvdW50OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB5b3VyIGFjY291bnQncyBbQVBJIHZlcnNpb25dKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2FwaS92ZXJzaW9uaW5nKVxuICAgICAqL1xuICAgIGFwaVZlcnNpb24/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBBIGxvY2FsZSB1c2VkIHRvIGdsb2JhbGx5IGNvbmZpZ3VyZSBsb2NhbGl6YXRpb24gaW4gU3RyaXBlLiBTZXR0aW5nIHRoZSBsb2NhbGUgaGVyZSB3aWxsIGxvY2FsaXplIGVycm9yIHN0cmluZ3MgZm9yIGFsbCBTdHJpcGUuanMgbWV0aG9kcy4gSXQgd2lsbCBhbHNvIGNvbmZpZ3VyZSB0aGUgbG9jYWxlIGZvciBFbGVtZW50cyBhbmQgQ2hlY2tvdXQuIERlZmF1bHQgaXMgYXV0byAoU3RyaXBlIGRldGVjdHMgdGhlIGxvY2FsZSBvZiB0aGUgYnJvd3NlcikuXG4gICAgICogTm90ZSB0aGF0IENoZWNrb3V0IHN1cHBvcnRzIGEgc2xpZ2h0bHkgZGlmZmVyZW50IHNldCBvZiBsb2NhbGVzIHRoYW4gU3RyaXBlLmpzLlxuICAgICAqL1xuICAgIGxvY2FsZT86IHN0cmluZztcblxuICAgIGJldGFzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbkRhdGEge1xuICAgIHJlZGlyZWN0X3VybD86IHN0cmluZztcbiAgICBpbnRlbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvbiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIGRhdGE6IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNhcmRFbGVtZW50cyB7XG4gICAgW2luZGV4OiBudW1iZXJdOiBTdHJpcGVFbGVtZW50O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMge1xuICAgIGNhcmRDdmNFbGVtZW50T3B0aW9uczogQ2FyZEN2Y0VsZW1lbnRPcHRpb25zO1xuICAgIGNhcmRFeHBpcnlFbGVtZW50T3B0aW9uczogQ2FyZEV4cGlyeUVsZW1lbnRPcHRpb25zO1xuICAgIGNhcmROdW1iZXJFbGVtZW50T3B0aW9uczogQ2FyZE51bWJlckVsZW1lbnRPcHRpb25zO1xuICAgIHppcENvZGVFbGVtZW50T3B0aW9ucz86IFppcENvZGVFbGVtZW50T3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVWM1BheW1lbnRNZXRob2QgZXh0ZW5kcyBQYXltZW50TWV0aG9kIHtcbiAgICBpbml0aWFsaXphdGlvbkRhdGE6IFN0cmlwZVYzSW5pdGlhbGl6YXRpb25EYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVYzSW5pdGlhbGl6YXRpb25EYXRhIHtcbiAgICBzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nO1xuICAgIHN0cmlwZUNvbm5lY3RlZEFjY291bnQ6IHN0cmluZztcbiAgICB1c2VJbmRpdmlkdWFsQ2FyZEZpZWxkczogYm9vbGVhbjtcbiAgICBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzPzogYm9vbGVhbjtcbn1cbiIsImltcG9ydCB7IFN0YW5kYXJkRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGVudW0gU3RyaXBlVjNFcnJvclR5cGUge1xuICAgIEF1dGhGYWlsdXJlID0gJ2F1dGhfZmFpbHVyZScsXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZVYzRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBzdWJ0eXBlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihzdWJ0eXBlOiBTdHJpcGVWM0Vycm9yVHlwZSkge1xuICAgICAgICBzdXBlcihnZXRFcnJvck1lc3NhZ2Uoc3VidHlwZSkpO1xuXG4gICAgICAgIHRoaXMudHlwZSA9ICdzdHJpcGV2M19lcnJvcic7XG4gICAgICAgIHRoaXMuc3VidHlwZSA9IHN1YnR5cGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UodHlwZTogU3RyaXBlVjNFcnJvclR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBTdHJpcGVWM0Vycm9yVHlwZS5BdXRoRmFpbHVyZTpcbiAgICAgICAgICAgIHJldHVybiBgVXNlciBkaWQgbm90IGF1dGhlbnRpY2F0ZWA7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAnVGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHByb2Nlc3NpbmcgeW91ciBwYXltZW50LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3QgdXMuJztcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBpbmNsdWRlcywgaXNFbXB0eSwgb21pdEJ5LCBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIEJpbGxpbmdBZGRyZXNzLFxuICAgIEN1c3RvbWVyLFxuICAgIEhvc3RlZEZvcm0sXG4gICAgSG9zdGVkRm9ybU9wdGlvbnMsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNCaWxsaW5nQWRkcmVzc0xpa2UsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJQYXltZW50UmVxdWVzdEJvZHksXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBQYXltZW50TWV0aG9kLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50UmVxdWVzdE9wdGlvbnMsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxuICAgIFN0cmlwZVYzRm9ybWF0dGVkUGF5bG9hZCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCBpc0luZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMgZnJvbSAnLi9pcy1pbmRpdmlkdWFsLWNhcmQtZWxlbWVudC1vcHRpb25zJztcbmltcG9ydCB7XG4gICAgUGF5bWVudEludGVudCxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uLFxuICAgIFN0cmlwZUFkZHJlc3MsXG4gICAgU3RyaXBlQmlsbGluZ0RldGFpbHMsXG4gICAgU3RyaXBlQ2FyZEVsZW1lbnRzLFxuICAgIFN0cmlwZUNvbmZpcm1JZGVhbFBheW1lbnREYXRhLFxuICAgIFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSxcbiAgICBTdHJpcGVDb25maXJtU2VwYVBheW1lbnREYXRhLFxuICAgIFN0cmlwZUVsZW1lbnQsXG4gICAgU3RyaXBlRWxlbWVudE9wdGlvbnMsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudFR5cGUsXG4gICAgU3RyaXBlRXJyb3IsXG4gICAgUGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kLFxuICAgIFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLFxuICAgIFN0cmlwZVYzQ2xpZW50LFxuICAgIFN0cmlwZVYzUGF5bWVudE1ldGhvZCxcbn0gZnJvbSAnLi9zdHJpcGV2Myc7XG5pbXBvcnQgU3RyaXBlVjNFcnJvciwgeyBTdHJpcGVWM0Vycm9yVHlwZSB9IGZyb20gJy4vc3RyaXBldjMtZXJyb3InO1xuaW1wb3J0IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxufSBmcm9tICcuL3N0cmlwZXYzLWluaXRpYWxpemUtb3B0aW9ucyc7XG5pbXBvcnQgU3RyaXBlVjNTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGV2My1zY3JpcHQtbG9hZGVyJztcblxuY29uc3QgQVBNX1JFRElSRUNUID0gW1N0cmlwZUVsZW1lbnRUeXBlLkFsaXBheSwgU3RyaXBlRWxlbWVudFR5cGUuSURFQUxdO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVWM1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBpbml0aWFsaXplT3B0aW9ucz86IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zO1xuICAgIHByaXZhdGUgc3RyaXBlVjNDbGllbnQ/OiBTdHJpcGVWM0NsaWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgcHJpdmF0ZSBzdHJpcGVFbGVtZW50PzogU3RyaXBlRWxlbWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUNhcmRFbGVtZW50cz86IFN0cmlwZUNhcmRFbGVtZW50cztcbiAgICBwcml2YXRlIHVzZUluZGl2aWR1YWxDYXJkRmllbGRzPzogYm9vbGVhbjtcbiAgICBwcml2YXRlIGhvc3RlZEZvcm0/OiBIb3N0ZWRGb3JtO1xuICAgIHByaXZhdGUgaXNEZWluaXRpYWxpemU/OiBib29sZWFuO1xuICAgIHByaXZhdGUgX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVYzU2NyaXB0TG9hZGVyLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUob3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHsgc3RyaXBldjMsIG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplT3B0aW9ucyA9IHN0cmlwZXYzO1xuICAgICAgICB0aGlzLmlzRGVpbml0aWFsaXplID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RyaXBlUHVibGlzaGFibGVLZXksXG4gICAgICAgICAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgICAgICAgICAgICB1c2VJbmRpdmlkdWFsQ2FyZEZpZWxkcyxcbiAgICAgICAgICAgICAgICBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSA9IHBheW1lbnRNZXRob2QgYXMgU3RyaXBlVjNQYXltZW50TWV0aG9kO1xuXG4gICAgICAgIHRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHMgPSBhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCkuZm9ybTtcblxuICAgICAgICB0aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzID0gdXNlSW5kaXZpZHVhbENhcmRGaWVsZHM7XG4gICAgICAgIHRoaXMuc3RyaXBlVjNDbGllbnQgPSBhd2FpdCB0aGlzLmxvYWRTdHJpcGVKcyhzdHJpcGVQdWJsaXNoYWJsZUtleSwgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pc0NyZWRpdENhcmQobWV0aG9kSWQpICYmXG4gICAgICAgICAgICB0aGlzLnNob3VsZFNob3dUU1ZIb3N0ZWRGb3JtKG1ldGhvZElkLCBnYXRld2F5SWQpICYmXG4gICAgICAgICAgICBmb3JtXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5ob3N0ZWRGb3JtID0gYXdhaXQgdGhpcy5tb3VudENhcmRWZXJpZmljYXRpb25GaWVsZHMoZm9ybSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnQgPSBhd2FpdCB0aGlzLm1vdW50Q2FyZEZpZWxkcyhtZXRob2RJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBleGVjdXRlKG9yZGVyUmVxdWVzdDogT3JkZXJSZXF1ZXN0Qm9keSwgb3B0aW9ucz86IFBheW1lbnRSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHBheW1lbnQsIC4uLm9yZGVyIH0gPSBvcmRlclJlcXVlc3Q7XG5cbiAgICAgICAgbGV0IGZvcm1hdHRlZFBheWxvYWQ6IFN0cmlwZVYzRm9ybWF0dGVkUGF5bG9hZDtcbiAgICAgICAgbGV0IHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnQucGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50RGF0YSwgZ2F0ZXdheUlkLCBtZXRob2RJZCB9ID0gcGF5bWVudDtcblxuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50LCBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IH0gPSBpc0hvc3RlZEluc3RydW1lbnRMaWtlKFxuICAgICAgICAgICAgcGF5bWVudERhdGEsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudERhdGFcbiAgICAgICAgICAgIDogeyBzaG91bGRTYXZlSW5zdHJ1bWVudDogZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGZhbHNlIH07XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkU3VibWl0T3JkZXJCZWZvcmVMb2FkaW5nQVBNID0gaW5jbHVkZXMoQVBNX1JFRElSRUNULCBtZXRob2RJZCk7XG5cbiAgICAgICAgY29uc3QgeyBpc1N0b3JlQ3JlZGl0QXBwbGllZDogdXNlU3RvcmVDcmVkaXQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBpZiAodXNlU3RvcmVDcmVkaXQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseVN0b3JlQ3JlZGl0KHVzZVN0b3JlQ3JlZGl0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU3VibWl0T3JkZXJCZWZvcmVMb2FkaW5nQVBNKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGdhdGV3YXlJZCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgaWYgKGlzVmF1bHRlZEluc3RydW1lbnQocGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSBwYXltZW50RGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cocGF5bWVudC5tZXRob2RJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2xpZW50VG9rZW4gPSBwYXltZW50TWV0aG9kLmNsaWVudFRva2VuO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICAgICAgICAgICAgICBwYXltZW50LFxuICAgICAgICAgICAgICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbmZpcm1TdHJpcGVQYXltZW50KHBheW1lbnRNZXRob2QpO1xuICAgICAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiwgbWV0aG9kIH0gPSBwYXltZW50TWV0aG9kO1xuICAgICAgICAgICAgY29uc3QgeyBpZDogdG9rZW4gfSA9IHJlc3VsdC5wYXltZW50SW50ZW50ID8/IHJlc3VsdC5wYXltZW50TWV0aG9kID8/IHsgaWQ6ICcnIH07XG5cbiAgICAgICAgICAgIHN0cmlwZUVycm9yID0gcmVzdWx0LmVycm9yO1xuXG4gICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFN0cmlwZUVsZW1lbnRUeXBlLkNyZWRpdENhcmQpIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLmNsaWVudF90b2tlbiA9IGNsaWVudFRva2VuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXNob3VsZFN1Ym1pdE9yZGVyQmVmb3JlTG9hZGluZ0FQTSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRPcmRlcihvcmRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5idWlsZFBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFbXB0eVBheW1lbnRJbnRlbnRFcnJvcihlcnJvciwgc3RyaXBlRXJyb3IpLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKHRoaXMuaG9zdGVkRm9ybSkge1xuICAgICAgICAgICAgdGhpcy5ob3N0ZWRGb3JtLmRldGFjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0RlaW5pdGlhbGl6ZSA9IHRydWU7XG4gICAgICAgIHRoaXMudW5tb3VudEVsZW1lbnQoKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFBheW1lbnRQYXlsb2FkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiBTdHJpcGVWM0Zvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQ6IGJvb2xlYW4gfCB1bmRlZmluZWQsXG4gICAgKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IHBheW1lbnREYXRhID0gc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICBzZXRfYXNfZGVmYXVsdF9zdG9yZWRfaW5zdHJ1bWVudDogc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogeyBmb3JtYXR0ZWRQYXlsb2FkIH07XG5cbiAgICAgICAgcmV0dXJuIHsgbWV0aG9kSWQsIHBheW1lbnREYXRhIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0NhbmNlbGxhdGlvbkVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgJiZcbiAgICAgICAgICAgIHN0cmlwZUVycm9yLnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcj8ubWVzc2FnZT8uaW5kZXhPZignY2FuY2VsZWQnKSAhPT0gLTFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQXV0aEVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gc3RyaXBlRXJyb3I/LmNvZGUgPT09ICdwYXltZW50X2ludGVudF9hdXRoZW50aWNhdGlvbl9mYWlsdXJlJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzQ3JlZGl0Q2FyZChtZXRob2RJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBtZXRob2RJZCA9PT0gU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuQ3JlZGl0Q2FyZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSG9zdGVkRmllbGRBdmFpbGFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLmdldEluaXRpYWxpemVPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IGRlZmluZWRGaWVsZHMgPSBvbWl0Qnkob3B0aW9ucy5mb3JtPy5maWVsZHMsIGlzRW1wdHkpO1xuXG4gICAgICAgIHJldHVybiAhaXNFbXB0eShkZWZpbmVkRmllbGRzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGlzSG9zdGVkUGF5bWVudEZvcm1FbmFibGVkKG1ldGhvZElkOiBzdHJpbmcsIGdhdGV3YXlJZD86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IGdldFBheW1lbnRNZXRob2RPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IGdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuXG4gICAgICAgIHJldHVybiBCb29sZWFuKHBheW1lbnRNZXRob2QuY29uZmlnLmlzSG9zdGVkRm9ybUVuYWJsZWQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgY29uZmlybVN0cmlwZVBheW1lbnQocGF5bWVudE1ldGhvZDogUGF5bWVudE1ldGhvZCk6IFByb21pc2U8e1xuICAgICAgICBwYXltZW50SW50ZW50PzogUGF5bWVudEludGVudCB8IHVuZGVmaW5lZDtcbiAgICAgICAgcGF5bWVudE1ldGhvZD86IFN0cmlwZVBheW1lbnRNZXRob2QgfCB1bmRlZmluZWQ7XG4gICAgICAgIGVycm9yPzogU3RyaXBlRXJyb3IgfCB1bmRlZmluZWQ7XG4gICAgfT4ge1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuOiBjbGllbnRTZWNyZXQsIG1ldGhvZCwgcmV0dXJuVXJsIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghY2xpZW50U2VjcmV0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5BbGlwYXk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtQWxpcGF5UGF5bWVudChcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgICAgICAgICB7IHJldHVybl91cmw6IHJldHVyblVybCB9LFxuICAgICAgICAgICAgICAgICAgICB7IGhhbmRsZUFjdGlvbnM6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5JREVBTDoge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLm1hcFN0cmlwZVBheW1lbnREYXRhKFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLklERUFMLCByZXR1cm5VcmwpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaXBlSnMoKS5jb25maXJtSWRlYWxQYXltZW50KGNsaWVudFNlY3JldCwgZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVBY3Rpb25zOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5TZXBhOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMubWFwU3RyaXBlUGF5bWVudERhdGEoU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuU2VwYSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpcGVKcygpLmNvbmZpcm1TZXBhRGViaXRQYXltZW50KGNsaWVudFNlY3JldCwgZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gdGhpcy51c2VJbmRpdmlkdWFsQ2FyZEZpZWxkc1xuICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZ2V0U3RyaXBlQ2FyZEVsZW1lbnRzKClbMF1cbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmdldFN0cmlwZUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiaWxsaW5nRGV0YWlscyA9IHRoaXMubWFwU3RyaXBlQmlsbGluZ0RldGFpbHMoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEN1c3RvbWVyKCksXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzaG91bGRBbGxvd1JlZGlzcGxheSA9IHRoaXMuX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpcGVKcygpLmNyZWF0ZVBheW1lbnRNZXRob2Qoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTdHJpcGVQYXltZW50TWV0aG9kVHlwZS5DcmVkaXRDYXJkLFxuICAgICAgICAgICAgICAgICAgICBjYXJkLFxuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nX2RldGFpbHM6IGJpbGxpbmdEZXRhaWxzLFxuICAgICAgICAgICAgICAgICAgICAuLi4oc2hvdWxkQWxsb3dSZWRpc3BsYXkgPyB7IGFsbG93X3JlZGlzcGxheTogJ2Fsd2F5cycgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICBwYXltZW50OiBPcmRlclBheW1lbnRSZXF1ZXN0Qm9keSxcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudDogYm9vbGVhbiB8IHVuZGVmaW5lZCxcbiAgICAgICAgY2xpZW50VG9rZW46IHN0cmluZyxcbiAgICApOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgYmlncGF5X3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICBjb25maXJtOiB0cnVlLFxuICAgICAgICAgICAgY2xpZW50X3Rva2VuOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQocGF5bWVudC5tZXRob2RJZCwgcGF5bWVudC5nYXRld2F5SWQpICYmXG4gICAgICAgICAgICB0aGlzLmhvc3RlZEZvcm1cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtID0gdGhpcy5ob3N0ZWRGb3JtO1xuXG4gICAgICAgICAgICBpZiAocGF5bWVudC5wYXltZW50RGF0YSAmJiBpc1ZhdWx0ZWRJbnN0cnVtZW50KHBheW1lbnQucGF5bWVudERhdGEpKSB7XG4gICAgICAgICAgICAgICAgcGF5bWVudC5wYXltZW50RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGF5bWVudC5wYXltZW50RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcGF5bWVudC5wYXltZW50RGF0YT8uaW5zdHJ1bWVudElkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50X3Rva2VuOiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgZm9ybS52YWxpZGF0ZSgpO1xuICAgICAgICAgICAgYXdhaXQgZm9ybS5zdWJtaXQocGF5bWVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZEN1cnJlbnRPcmRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLmJ1aWxkUGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBwYXltZW50Lm1ldGhvZElkLFxuICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEluaXRpYWxpemVPcHRpb25zKCk6IFN0cmlwZVYzUGF5bWVudEluaXRpYWxpemVPcHRpb25zIHtcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVPcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRTdHJpcGVDYXJkRWxlbWVudHMoKTogU3RyaXBlQ2FyZEVsZW1lbnRzIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZUNhcmRFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUNhcmRFbGVtZW50cztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN0cmlwZUVsZW1lbnQoKTogU3RyaXBlRWxlbWVudCB7XG4gICAgICAgIGlmICghdGhpcy5zdHJpcGVFbGVtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlRWxlbWVudDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFN0cmlwZUpzKCk6IFN0cmlwZVYzQ2xpZW50IHtcbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZVYzQ2xpZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlVjNDbGllbnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVFbXB0eVBheW1lbnRJbnRlbnRFcnJvcihlcnJvcjogdW5rbm93biwgc3RyaXBlRXJyb3I6IFN0cmlwZUVycm9yIHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmICghaXNSZXF1ZXN0RXJyb3IoZXJyb3IpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc29tZShlcnJvci5ib2R5LmVycm9ycywgeyBjb2RlOiAncmVxdWlyZWRfZmllbGQnIH0pICYmIHN0cmlwZUVycm9yXG4gICAgICAgICAgICA/IG5ldyBFcnJvcihzdHJpcGVFcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgOiBlcnJvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTdHJpcGVKcyhcbiAgICAgICAgc3RyaXBlUHVibGlzaGFibGVLZXk6IHN0cmluZyxcbiAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudDogc3RyaW5nLFxuICAgICk6IFByb21pc2U8U3RyaXBlVjNDbGllbnQ+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyaXBlVjNDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5zdHJpcGVWM0NsaWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIubG9hZChcbiAgICAgICAgICAgIHN0cmlwZVB1Ymxpc2hhYmxlS2V5LFxuICAgICAgICAgICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudCxcbiAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldExvY2FsZSgpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFwU3RyaXBlQWRkcmVzcyhhZGRyZXNzPzogQWRkcmVzcyk6IFN0cmlwZUFkZHJlc3Mge1xuICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgICAgICAgICAgYWRkcmVzczE6IGxpbmUxLFxuICAgICAgICAgICAgICAgIGFkZHJlc3MyOiBsaW5lMixcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHN0YXRlLFxuICAgICAgICAgICAgfSA9IGFkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7IGNpdHksIGNvdW50cnksIGxpbmUxLCBsaW5lMiwgcG9zdGFsX2NvZGU6IHBvc3RhbENvZGUsIHN0YXRlIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBsaW5lMTogJycgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKFxuICAgICAgICBiaWxsaW5nQWRkcmVzcz86IEJpbGxpbmdBZGRyZXNzLFxuICAgICAgICBjdXN0b21lcj86IEN1c3RvbWVyLFxuICAgICk6IFN0cmlwZUJpbGxpbmdEZXRhaWxzIHtcbiAgICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lIH0gPSBiaWxsaW5nQWRkcmVzcyB8fFxuICAgICAgICAgICAgY3VzdG9tZXIgfHwgeyBmaXJzdE5hbWU6ICdHdWVzdCcsIGxhc3ROYW1lOiAnJyB9O1xuICAgICAgICBjb25zdCBuYW1lID0gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAudHJpbSgpO1xuICAgICAgICBjb25zdCB7IG9wdGlvbnMgfSA9IHRoaXMuZ2V0SW5pdGlhbGl6ZU9wdGlvbnMoKTtcblxuICAgICAgICBpZiAodGhpcy51c2VJbmRpdmlkdWFsQ2FyZEZpZWxkcyAmJiBpc0luZGl2aWR1YWxDYXJkRWxlbWVudE9wdGlvbnMob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgemlwQ29kZUVsZW1lbnRPcHRpb25zIH0gPSBvcHRpb25zO1xuXG4gICAgICAgICAgICBpZiAoemlwQ29kZUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zdGFsQ29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHppcENvZGVFbGVtZW50T3B0aW9ucy5jb250YWluZXJJZClcbiAgICAgICAgICAgICAgICAgICAgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwQ29kZUVsZW1lbnRPcHRpb25zLmNvbnRhaW5lcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICApLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9zdGFsQ29kZSAmJiBiaWxsaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nQWRkcmVzcyA9IHsgLi4uYmlsbGluZ0FkZHJlc3MsIHBvc3RhbENvZGUgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhZGRyZXNzID0ge1xuICAgICAgICAgICAgYWRkcmVzczogdGhpcy5tYXBTdHJpcGVBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoY3VzdG9tZXIgJiYgY3VzdG9tZXIuYWRkcmVzc2VzWzBdICYmIGlzQmlsbGluZ0FkZHJlc3NMaWtlKGN1c3RvbWVyLmFkZHJlc3Nlc1swXSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbWVyQWRkcmVzcyA9IGN1c3RvbWVyLmFkZHJlc3Nlc1swXTtcbiAgICAgICAgICAgIGNvbnN0IHsgZW1haWwgfSA9IGN1c3RvbWVyO1xuICAgICAgICAgICAgY29uc3QgeyBwaG9uZSB9ID0gY3VzdG9tZXJBZGRyZXNzO1xuXG4gICAgICAgICAgICByZXR1cm4gcGhvbmUgPyB7IC4uLmFkZHJlc3MsIGVtYWlsLCBuYW1lLCBwaG9uZSB9IDogeyAuLi5hZGRyZXNzLCBlbWFpbCwgbmFtZSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJpbGxpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGVtYWlsLCBwaG9uZSB9ID0gYmlsbGluZ0FkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiBwaG9uZSA/IHsgLi4uYWRkcmVzcywgZW1haWwsIG5hbWUsIHBob25lIH0gOiB7IC4uLmFkZHJlc3MsIGVtYWlsLCBuYW1lIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyAuLi5hZGRyZXNzLCBuYW1lIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtYXBTdHJpcGVQYXltZW50RGF0YShcbiAgICAgICAgc3RyaXBlUGF5bWVudE1ldGhvZFR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLklERUFMLFxuICAgICAgICByZXR1cm5Vcmw/OiBzdHJpbmcsXG4gICAgKTogU3RyaXBlQ29uZmlybUlkZWFsUGF5bWVudERhdGE7XG4gICAgcHJpdmF0ZSBtYXBTdHJpcGVQYXltZW50RGF0YShcbiAgICAgICAgc3RyaXBlUGF5bWVudE1ldGhvZFR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlLlNlcGEsXG4gICAgKTogU3RyaXBlQ29uZmlybVNlcGFQYXltZW50RGF0YTtcbiAgICBwcml2YXRlIG1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICBzdHJpcGVQYXltZW50TWV0aG9kVHlwZTogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgICAgIHJldHVyblVybD86IHN0cmluZyxcbiAgICApOiBTdHJpcGVDb25maXJtUGF5bWVudERhdGEge1xuICAgICAgICBjb25zdCBjdXN0b21lciA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEN1c3RvbWVyKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0QmlsbGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBjb25zdCByZXN1bHQ6IFBhcnRpYWw8U3RyaXBlQ29uZmlybVBheW1lbnREYXRhPiA9IHtcbiAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiB7XG4gICAgICAgICAgICAgICAgW3N0cmlwZVBheW1lbnRNZXRob2RUeXBlXTogdGhpcy5nZXRTdHJpcGVFbGVtZW50KCksXG4gICAgICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB0aGlzLm1hcFN0cmlwZUJpbGxpbmdEZXRhaWxzKGJpbGxpbmdBZGRyZXNzLCBjdXN0b21lciksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChzdHJpcGVQYXltZW50TWV0aG9kVHlwZSA9PT0gU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuSURFQUwpIHtcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnJlc3VsdCwgcmV0dXJuX3VybDogcmV0dXJuVXJsIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHByaXZhdGUgbW91bnRDYXJkRmllbGRzKG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPFN0cmlwZUVsZW1lbnQ+IHtcbiAgICAgICAgY29uc3QgeyBvcHRpb25zLCBjb250YWluZXJJZCB9ID0gdGhpcy5nZXRJbml0aWFsaXplT3B0aW9ucygpO1xuXG4gICAgICAgIGxldCBzdHJpcGVFbGVtZW50OiBTdHJpcGVFbGVtZW50O1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gdGhpcy5nZXRTdHJpcGVKcygpLmVsZW1lbnRzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAobWV0aG9kSWQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFN0cmlwZUVsZW1lbnRUeXBlLkNyZWRpdENhcmQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZUluZGl2aWR1YWxDYXJkRmllbGRzICYmIGlzSW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyhvcHRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkRXhwaXJ5RWxlbWVudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEN2Y0VsZW1lbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmROdW1iZXJFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuQ2FyZE51bWJlcikgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmNyZWF0ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaXBlRWxlbWVudFR5cGUuQ2FyZE51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlckVsZW1lbnRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkRXhwaXJ5RWxlbWVudCA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLkNhcmRFeHBpcnkpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0cmlwZUVsZW1lbnRUeXBlLkNhcmRFeHBpcnksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRFeHBpcnlFbGVtZW50T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEN2Y0VsZW1lbnQgPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5DYXJkQ3ZjKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuY3JlYXRlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpcGVFbGVtZW50VHlwZS5DYXJkQ3ZjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ3ZjRWxlbWVudE9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVDYXJkRWxlbWVudHMgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZE51bWJlckVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeUVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEN2Y0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlRWxlbWVudCA9IHRoaXMuc3RyaXBlQ2FyZEVsZW1lbnRzWzBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmROdW1iZXJFbGVtZW50Lm1vdW50KGAjJHtjYXJkTnVtYmVyRWxlbWVudE9wdGlvbnMuY29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZEV4cGlyeUVsZW1lbnQubW91bnQoYCMke2NhcmRFeHBpcnlFbGVtZW50T3B0aW9ucy5jb250YWluZXJJZH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkQ3ZjRWxlbWVudC5tb3VudChgIyR7Y2FyZEN2Y0VsZW1lbnRPcHRpb25zLmNvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLmdldEVsZW1lbnQobWV0aG9kSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUobWV0aG9kSWQsIG9wdGlvbnMgYXMgU3RyaXBlRWxlbWVudE9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmlwZUVsZW1lbnQubW91bnQoYCMke2NvbnRhaW5lcklkfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RyaXBlRWxlbWVudFR5cGUuSURFQUw6XG4gICAgICAgICAgICAgICAgY2FzZSBTdHJpcGVFbGVtZW50VHlwZS5TZXBhOlxuICAgICAgICAgICAgICAgICAgICBzdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChtZXRob2RJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuY3JlYXRlKG1ldGhvZElkLCBvcHRpb25zIGFzIFN0cmlwZUVsZW1lbnRPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEZWluaXRpYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVbmFibGUgdG8gbW91bnQgU3RyaXBlIGNvbXBvbmVudCB3aXRob3V0IHZhbGlkIGNvbnRhaW5lciBJRC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgU3RyaXBlRWxlbWVudFR5cGUuQWxpcGF5OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzb2x2ZShzdHJpcGVFbGVtZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBtb3VudENhcmRWZXJpZmljYXRpb25GaWVsZHMoZm9ybU9wdGlvbnM6IEhvc3RlZEZvcm1PcHRpb25zKTogUHJvbWlzZTxIb3N0ZWRGb3JtPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHN0b3JlQ29uZmlnID0gc3RhdGUuZ2V0U3RvcmVDb25maWcoKTtcblxuICAgICAgICBpZiAoIXN0b3JlQ29uZmlnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQ2hlY2tvdXRDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlncGF5QmFzZVVybCA9IHN0b3JlQ29uZmlnLnBheW1lbnRTZXR0aW5ncy5iaWdwYXlCYXNlVXJsO1xuXG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuY3JlYXRlSG9zdGVkRm9ybShiaWdwYXlCYXNlVXJsLCBmb3JtT3B0aW9ucyk7XG5cbiAgICAgICAgYXdhaXQgZm9ybS5hdHRhY2goKTtcblxuICAgICAgICByZXR1cm4gZm9ybTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICk6IFByb21pc2U8YW55IHwgbmV2ZXI+IHtcbiAgICAgICAgaWYgKCFpc1JlcXVlc3RFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IgPSBzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7XG4gICAgICAgICAgICBjb2RlOiAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQnLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNUaHJlZURTZWN1cmVSZXF1aXJlZEVycm9yID0gc29tZShlcnJvci5ib2R5LmVycm9ycywge1xuICAgICAgICAgICAgY29kZTogJ3RocmVlX2Rfc2VjdXJlX3JlcXVpcmVkJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGlzQWRkaXRpb25hbEFjdGlvbkVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb246IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb24gPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkO1xuXG4gICAgICAgICAgICBpZiAoYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSAncmVkaXJlY3RfdG9fdXJsJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb24uZGF0YS5yZWRpcmVjdF91cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGFjdGlvbi5kYXRhLnJlZGlyZWN0X3VybCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1RocmVlRFNlY3VyZVJlcXVpcmVkRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0LnRva2VuO1xuICAgICAgICAgICAgY29uc3QgbmVlZHNDb25maXJtID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgY2F0Y2hlZENvbmZpcm1FcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHJlc3VsdDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmdldFN0cmlwZUpzKCkuY29uZmlybUNhcmRQYXltZW50KGNsaWVudFNlY3JldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNhdGNoZWRDb25maXJtRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzdWx0Py5lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGF0aW9uRXJyb3IocmVzdWx0LmVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBdXRoRXJyb3IocmVzdWx0LmVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3RyaXBlVjNFcnJvcihTdHJpcGVWM0Vycm9yVHlwZS5BdXRoRmFpbHVyZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLmdldFBheW1lbnRUb2tlbihcbiAgICAgICAgICAgICAgICByZXN1bHQ/LnBheW1lbnRJbnRlbnQsXG4gICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0LFxuICAgICAgICAgICAgICAgIGNhdGNoZWRDb25maXJtRXJyb3IsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgICAgIGNyZWRpdF9jYXJkX3Rva2VuOiB7IHRva2VuIH0sXG4gICAgICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgICAgICBjb25maXJtOiBuZWVkc0NvbmZpcm0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuYnVpbGRQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlRW1wdHlQYXltZW50SW50ZW50RXJyb3IoZXJyb3IsIHJlc3VsdD8uZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRQYXltZW50VG9rZW4oXG4gICAgICAgIHBheW1lbnRJbnRlbnQ6IFBheW1lbnRJbnRlbnQgfCB1bmRlZmluZWQsXG4gICAgICAgIGNsaWVudFNlY3JldDogc3RyaW5nLFxuICAgICAgICBjYXRjaGVkQ29uZmlybUVycm9yOiBib29sZWFuLFxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGlmICghcGF5bWVudEludGVudCB8fCBjYXRjaGVkQ29uZmlybUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50U2VjcmV0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRJbnRlbnQuaWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG91bGRTaG93VFNWSG9zdGVkRm9ybShtZXRob2RJZDogc3RyaW5nLCBnYXRld2F5SWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5pc0hvc3RlZEZpZWxkQXZhaWxhYmxlKCkgJiYgdGhpcy5pc0hvc3RlZFBheW1lbnRGb3JtRW5hYmxlZChtZXRob2RJZCwgZ2F0ZXdheUlkKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgdW5tb3VudEVsZW1lbnQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnN0cmlwZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudC51bm1vdW50KCk7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgQmlsbGluZ0FkZHJlc3MgZnJvbSAnLi9iaWxsaW5nLWFkZHJlc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0JpbGxpbmdBZGRyZXNzTGlrZShhZGRyZXNzOiBhbnkpOiBhZGRyZXNzIGlzIEJpbGxpbmdBZGRyZXNzIHtcbiAgICByZXR1cm4gKFxuICAgICAgICB0eXBlb2YgYWRkcmVzcyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgYWRkcmVzcyAhPT0gbnVsbCAmJlxuICAgICAgICAnaWQnIGluIGFkZHJlc3MgJiZcbiAgICAgICAgdHlwZW9mIGFkZHJlc3MuaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKTtcbn1cbiIsImltcG9ydCBTdGFuZGFyZEVycm9yIGZyb20gJy4vc3RhbmRhcmQtZXJyb3InO1xuXG4vKipcbiAqIFRoaXMgZXJyb3Igc2hvdWxkIGJlIHRocm93biB3aGVuIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGZhaWxzXG4gKiB0byBsb2FkLCBvciBmb3Igc29tZSByZWFzb24sIGl0IGlzIGluYWNjZXNzaWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGlzIG5vdCBsb2FkZWQgb3IgcmVhZHkgdG8gYmUgdXNlZC4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcic7XG4gICAgICAgIHRoaXMudHlwZSA9ICdwYXltZW50X21ldGhvZF9jbGllbnRfdW5hdmFpbGFibGUnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHsgU3RyaXBlSG9zdFdpbmRvdywgU3RyaXBlVjNDbGllbnQgfSBmcm9tICcuL3N0cmlwZXYzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlVjNTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZVdpbmRvdzogU3RyaXBlSG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBsb2FkKFxuICAgICAgICBzdHJpcGVQdWJsaXNoYWJsZUtleTogc3RyaW5nLFxuICAgICAgICBzdHJpcGVBY2NvdW50OiBzdHJpbmcsXG4gICAgICAgIGxvY2FsZT86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFN0cmlwZVYzQ2xpZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KCdodHRwczovL2pzLnN0cmlwZS5jb20vdjMvJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlV2luZG93LlN0cmlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlKHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCB7XG4gICAgICAgICAgICAgICAgc3RyaXBlQWNjb3VudCxcbiAgICAgICAgICAgICAgICBsb2NhbGUsXG4gICAgICAgICAgICAgICAgYmV0YXM6IFsncGF5bWVudF9pbnRlbnRfYmV0YV8zJywgJ2FsaXBheV9wbV9iZXRhXzEnXSxcbiAgICAgICAgICAgICAgICBhcGlWZXJzaW9uOiAnMjAyMC0wMy0wMjthbGlwYXlfYmV0YT12MScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IFN0cmlwZVYzUGF5bWVudFN0cmF0ZWd5IGZyb20gJy4vc3RyaXBldjMtcGF5bWVudC1zdHJhdGVneSc7XG5pbXBvcnQgU3RyaXBlVjNTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGV2My1zY3JpcHQtbG9hZGVyJztcblxuY29uc3QgY3JlYXRlU3RyaXBlVjNQYXltZW50U3RyYXRlZ3k6IFBheW1lbnRTdHJhdGVneUZhY3Rvcnk8YW55PiA9IChwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTdHJpcGVWM1BheW1lbnRTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgbmV3IFN0cmlwZVYzU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZVYzUGF5bWVudFN0cmF0ZWd5LCBbeyBnYXRld2F5OiAnc3RyaXBldjMnIH1dKTtcbiIsImltcG9ydCB7IFBheW1lbnRNZXRob2QgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuLyoqXG4gKiBJbml0aWFsaXphdGlvbiBvcHRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpZ3VyYXRpb25PcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBGb3IgdXNhZ2Ugd2l0aCBbQ29ubmVjdF0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvY29ubmVjdCkgb25seS5cbiAgICAgKiBTcGVjaWZ5aW5nIGEgY29ubmVjdGVkIGFjY291bnQgSUQgKGUuZy4sIGFjY3RfMjRCRk1wSjFzdlI1QTg5aykgYWxsb3dzIHlvdSB0byBwZXJmb3JtIGFjdGlvbnMgb24gYmVoYWxmIG9mIHRoYXQgYWNjb3VudC5cbiAgICAgKi9cbiAgICBzdHJpcGVBY2NvdW50Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgeW91ciBhY2NvdW50J3MgW0FQSSB2ZXJzaW9uXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvdmVyc2lvbmluZylcbiAgICAgKi9cbiAgICBhcGlWZXJzaW9uPzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSBsb2NhbGUgdXNlZCB0byBnbG9iYWxseSBjb25maWd1cmUgbG9jYWxpemF0aW9uIGluIFN0cmlwZS4gU2V0dGluZyB0aGUgbG9jYWxlIGhlcmUgd2lsbCBsb2NhbGl6ZSBlcnJvciBzdHJpbmdzIGZvciBhbGwgU3RyaXBlLmpzIG1ldGhvZHMuIEl0IHdpbGwgYWxzbyBjb25maWd1cmUgdGhlIGxvY2FsZSBmb3IgRWxlbWVudHMgYW5kIENoZWNrb3V0LiBEZWZhdWx0IGlzIGF1dG8gKFN0cmlwZSBkZXRlY3RzIHRoZSBsb2NhbGUgb2YgdGhlIGJyb3dzZXIpLlxuICAgICAqIE5vdGUgdGhhdCBDaGVja291dCBzdXBwb3J0cyBhIHNsaWdodGx5IGRpZmZlcmVudCBzZXQgb2YgbG9jYWxlcyB0aGFuIFN0cmlwZS5qcy5cbiAgICAgKi9cbiAgICBsb2NhbGU/OiBzdHJpbmc7XG5cbiAgICBiZXRhcz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25EYXRhIHtcbiAgICByZWRpcmVjdF91cmw/OiBzdHJpbmc7XG4gICAgaW50ZW50Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb24ge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBkYXRhOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uRGF0YTtcbn1cblxuLyoqXG4gKiBUaGUgUGF5bWVudEludGVudCBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEludGVudCB7XG4gICAgLyoqXG4gICAgICogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBvYmplY3QuXG4gICAgICovXG4gICAgaWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGllbnQgc2VjcmV0IG9mIHRoZSBQYXltZW50SW50ZW50LiBVc2VkIGZvciBjbGllbnQtc2lkZSByZXRyaWV2YWwgdXNpbmcgYSBwdWJsaXNoYWJsZSBrZXkuXG4gICAgICovXG4gICAgY2xpZW50X3NlY3JldD86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFN0YXR1cyBvZiB0aGlzIFBheW1lbnRJbnRlbnQuIFJlYWQgbW9yZSBhYm91dCBlYWNoIFBheW1lbnRJbnRlbnQgW3N0YXR1c10oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvcGF5bWVudHMvaW50ZW50cyNpbnRlbnQtc3RhdHVzZXMpLlxuICAgICAqL1xuICAgIHN0YXR1czogJ3N1Y2NlZWRlZCcgfCBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcGF5bWVudCBlcnJvciBlbmNvdW50ZXJlZCBpbiB0aGUgcHJldmlvdXMgUGF5bWVudEludGVudCBjb25maXJtYXRpb24uIEl0IHdpbGwgYmUgY2xlYXJlZCBpZiB0aGUgUGF5bWVudEludGVudCBpcyBsYXRlciB1cGRhdGVkIGZvciBhbnkgcmVhc29uLlxuICAgICAqL1xuICAgIGxhc3RfcGF5bWVudF9lcnJvcjogTGFzdFBheW1lbnRFcnJvciB8IG51bGw7XG5cbiAgICBwYXltZW50X21ldGhvZF9vcHRpb25zPzogU3RyaXBlUElQYXltZW50TWV0aG9kT3B0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVQSVBheW1lbnRNZXRob2RTYXZpbmdPcHRpb25zIHtcbiAgICBzZXR1cF9mdXR1cmVfdXNhZ2U/OiBTdHJpcGVJbnN0cnVtZW50U2V0dXBGdXR1cmVVc2FnZTtcbiAgICB2ZXJpZmljYXRpb25fbWV0aG9kPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVBJUGF5bWVudE1ldGhvZE9wdGlvbnMge1xuICAgIGNhcmQ/OiBTdHJpcGVQSVBheW1lbnRNZXRob2RTYXZpbmdPcHRpb25zO1xuICAgIHVzX2JhbmtfYWNjb3VudD86IFN0cmlwZVBJUGF5bWVudE1ldGhvZFNhdmluZ09wdGlvbnM7XG59XG5cbi8qKlxuICogVGhlIHBheW1lbnQgZXJyb3IgZW5jb3VudGVyZWQgaW4gdGhlIHByZXZpb3VzIFBheW1lbnRJbnRlbnQgY29uZmlybWF0aW9uLiBJdCB3aWxsIGJlIGNsZWFyZWQgaWYgdGhlIFBheW1lbnRJbnRlbnQgaXMgbGF0ZXIgdXBkYXRlZCBmb3IgYW55IHJlYXNvbi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMYXN0UGF5bWVudEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBBIGh1bWFuLXJlYWRhYmxlIG1lc3NhZ2UgcHJvdmlkaW5nIG1vcmUgZGV0YWlscyBhYm91dCB0aGUgZXJyb3IuIEZvciBjYXJkIGVycm9ycywgdGhlc2UgbWVzc2FnZXMgY2FuIGJlIHNob3duIHRvIHlvdXIgdXNlcnMuXG4gICAgICovXG4gICAgbWVzc2FnZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIHRvIHBhc3MgY3VzdG9tIGZvbnRzIHdoZW4gY3JlYXRpbmcgYW4gW0VsZW1lbnRzXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvY3JlYXRlKSBvYmplY3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3NzRm9udFNvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQSByZWxhdGl2ZSBvciBhYnNvbHV0ZSBVUkwgcG9pbnRpbmcgdG8gYSBDU1MgZmlsZSB3aXRoIFtAZm9udC1mYWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZSkgZGVmaW5pdGlvbnMsIGZvciBleGFtcGxlOlxuICAgICAqIGBodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9T3BlbitTYW5zYFxuICAgICAqIE5vdGUgdGhhdCBpZiB5b3UgYXJlIHVzaW5nIGEgW2NvbnRlbnQgc2VjdXJpdHkgcG9saWN5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvQ29udGVudC1TZWN1cml0eS1Qb2xpY3kpIChDU1ApLFxuICAgICAqIFthZGRpdGlvbmFsIGRpcmVjdGl2ZXNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL3NlY3VyaXR5I2NvbnRlbnQtc2VjdXJpdHktcG9saWN5KSBtYXkgYmUgbmVjZXNzYXJ5LlxuICAgICAqL1xuICAgIGNzc1NyYzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgb2JqZWN0IGlzIHVzZWQgdG8gcGFzcyBjdXN0b20gZm9udHMgd2hlbiBjcmVhdGluZyBhbiBbRWxlbWVudHNdKGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGUpIG9iamVjdC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDdXN0b21Gb250U291cmNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSB0byBnaXZlIHRoZSBmb250LlxuICAgICAqL1xuICAgIGZhbWlseTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbc3JjXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9zcmMpIHZhbHVlIHBvaW50aW5nIHRvIHlvdXJcbiAgICAgKiBjdXN0b20gZm9udCBmaWxlLiBUaGlzIGlzIHVzdWFsbHkgKHRob3VnaCBub3QgYWx3YXlzKSBhIGxpbmsgdG8gYSBmaWxlIHdpdGggYSAud29mZiAsIC5vdGYsIG9yIC5zdmcgc3VmZml4LlxuICAgICAqL1xuICAgIHNyYzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB2YWxpZCBbZm9udC1kaXNwbGF5XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvQGZvbnQtZmFjZS9mb250LWRpc3BsYXkpIHZhbHVlLlxuICAgICAqL1xuICAgIGRpc3BsYXk/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBPbmUgb2Ygbm9ybWFsLCBpdGFsaWMsIG9ibGlxdWUuIERlZmF1bHRzIHRvIG5vcm1hbC5cbiAgICAgKi9cbiAgICBzdHlsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW3VuaWNvZGUtcmFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9AZm9udC1mYWNlL3VuaWNvZGUtcmFuZ2UpIHZhbHVlLlxuICAgICAqL1xuICAgIHVuaWNvZGVSYW5nZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIEEgdmFsaWQgW2ZvbnQtd2VpZ2h0XShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9DU1MvZm9udC13ZWlnaHQpLiBOb3RlIHRoYXQgdGhpcyBpcyBhIHN0cmluZywgbm90IGEgbnVtYmVyLlxuICAgICAqL1xuICAgIHdlaWdodD86IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgU3RyaXBlQ3VzdG9tRm9udCA9IENzc0ZvbnRTb3VyY2UgfCBDdXN0b21Gb250U291cmNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVycm9yIHtcbiAgICAvKipcbiAgICAgKiB0eXBlIG9mIGVycm9yLiBXaGVuIHRoZSBlcnJvciB0eXBlIGlzIGNhcmRfZXJyb3Igb3IgdmFsaWRhdGlvbl9lcnJvciwgeW91IGNhbiBkaXNwbGF5IHRoZSBlcnJvciBtZXNzYWdlIGluIGVycm9yLm1lc3NhZ2UgZGlyZWN0bHkgdG8geW91ciB1c2VyLlxuICAgICAqL1xuICAgIHR5cGU6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBBIGh1bWFuLXJlYWRhYmxlIG1lc3NhZ2UgcHJvdmlkaW5nIG1vcmUgZGV0YWlscyBhYm91dCB0aGUgZXJyb3IuIEZvciBjYXJkIGVycm9ycywgdGhlc2UgbWVzc2FnZXMgY2FuIGJlIHNob3duIHRvIHlvdXIgdXNlcnMuXG4gICAgICovXG4gICAgbWVzc2FnZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBQYXltZW50SW50ZW50IG9iamVjdC5cbiAgICAgKi9cbiAgICBwYXltZW50X2ludGVudDogUGF5bWVudEludGVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFbGVtZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgYGVsZW1lbnQubW91bnRgIG1ldGhvZCBhdHRhY2hlcyB5b3VyIGVsZW1lbnQgdG8gdGhlIERPTS5cbiAgICAgKi9cbiAgICBtb3VudChkb21FbGVtZW50OiBzdHJpbmcgfCBIVE1MRWxlbWVudCk6IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgZGVzdHJveXMgaXQuXG4gICAgICogQSBkZXN0cm95ZWQgZWxlbWVudCBjYW4gbm90IGJlIHJlLWFjdGl2YXRlZCBvciByZS1tb3VudGVkIHRvIHRoZSBET00uXG4gICAgICovXG4gICAgZGVzdHJveSgpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVW5tb3VudHMgdGhlIGVsZW1lbnQgZnJvbSB0aGUgRE9NLlxuICAgICAqIENhbGwgYGVsZW1lbnQubW91bnRgIHRvIHJlLWF0dGFjaCBpdCB0byB0aGUgRE9NLlxuICAgICAqL1xuICAgIHVubW91bnQoKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjaGFuZ2UgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIEVsZW1lbnQncyB2YWx1ZSBjaGFuZ2VzLiBUaGUgZXZlbnQgcGF5bG9hZCBhbHdheXMgY29udGFpbnMgY2VydGFpbiBrZXlzLFxuICAgICAqIGluIGFkZGl0aW9uIHRvIHNvbWUgRWxlbWVudC1zcGVjaWZpYyBrZXlzLlxuICAgICAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnQvZXZlbnRzL29uX2NoYW5nZT90eXBlPXBheW1lbnRFbGVtZW50XG4gICAgICovXG4gICAgb24oZXZlbnQ6IFN0cmlwZUVsZW1lbnRFdmVudCwgaGFuZGxlcjogKGV2ZW50OiBTdHJpcGVFdmVudFR5cGUpID0+IHZvaWQpOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgb3B0aW9ucyB0aGUgUGF5bWVudCBFbGVtZW50IHdhcyBpbml0aWFsaXplZCB3aXRoLiBVcGRhdGVzIGFyZSBtZXJnZWQgaW50byB0aGUgZXhpc3RpbmcgY29uZmlndXJhdGlvbi5cbiAgICAgKiBodHRwczovL2RvY3Muc3RyaXBlLmNvbS9qcy9lbGVtZW50c19vYmplY3QvdXBkYXRlX3BheW1lbnRfZWxlbWVudFxuICAgICAqL1xuICAgIHVwZGF0ZShvcHRpb25zPzogU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zKTogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGNvbGxhcHNlcyB0aGUgUGF5bWVudCBFbGVtZW50IGludG8gYSByb3cgb2YgcGF5bWVudCBtZXRob2QgdGFicy5cbiAgICAgKiBodHRwczovL2RvY3Muc3RyaXBlLmNvbS9qcy9lbGVtZW50c19vYmplY3QvY29sbGFwc2VfcGF5bWVudF9lbGVtZW50XG4gICAgICovXG4gICAgY29sbGFwc2UoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVFdmVudCB7XG4gICAgY29tcGxldGU6IGJvb2xlYW47XG4gICAgZWxlbWVudFR5cGU6IHN0cmluZztcbiAgICBlbXB0eTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDdXN0b21lckV2ZW50IGV4dGVuZHMgU3RyaXBlRXZlbnQge1xuICAgIGNvbGxhcHNlZD86IGJvb2xlYW47XG4gICAgYXV0aGVudGljYXRlZDogYm9vbGVhbjtcbiAgICB2YWx1ZToge1xuICAgICAgICBlbWFpbDogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlU2hpcHBpbmdFdmVudCBleHRlbmRzIFN0cmlwZUV2ZW50IHtcbiAgICBtb2RlPzogc3RyaW5nO1xuICAgIGlzTmV3QWRkcmVzcz86IGJvb2xlYW47XG4gICAgcGhvbmVGaWVsZFJlcXVpcmVkOiBib29sZWFuO1xuICAgIHZhbHVlOiB7XG4gICAgICAgIGFkZHJlc3M6IEFkZHJlc3M7XG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICAgICAgbGFzdE5hbWU/OiBzdHJpbmc7XG4gICAgICAgIHBob25lPzogc3RyaW5nO1xuICAgIH07XG4gICAgZmllbGRzPzoge1xuICAgICAgICBwaG9uZTogc3RyaW5nO1xuICAgIH07XG4gICAgZGlzcGxheT86IHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlUGF5bWVudEV2ZW50IGV4dGVuZHMgU3RyaXBlRXZlbnQge1xuICAgIHZhbHVlOiB7XG4gICAgICAgIHR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlO1xuICAgIH07XG4gICAgY29sbGFwc2VkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBZGRyZXNzIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgY291bnRyeTogc3RyaW5nO1xuICAgIGxpbmUxOiBzdHJpbmc7XG4gICAgbGluZTI/OiBzdHJpbmc7XG4gICAgcG9zdGFsX2NvZGU6IHN0cmluZztcbiAgICBzdGF0ZTogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBTdHJpcGVFdmVudFR5cGUgPVxuICAgIHwgU3RyaXBlU2hpcHBpbmdFdmVudFxuICAgIHwgU3RyaXBlQ3VzdG9tZXJFdmVudFxuICAgIHwgU3RyaXBlUGF5bWVudEV2ZW50XG4gICAgfCBTdHJpcGVMaW5rVjJFdmVudDtcblxuLyoqXG4gKiBPYmplY3QgZGVmaW5pdGlvbiBmb3IgcGFydCBvZiB0aGUgZGF0YSBzZW50IHRvIGNvbmZpcm0gdGhlIFBheW1lbnRJbnRlbnQuXG4gKiBodHRwczovL3N0cmlwZS5jb20vZG9jcy9hcGkvcGF5bWVudF9pbnRlbnRzL2NvbmZpcm0jY29uZmlybV9wYXltZW50X2ludGVudC1zaGlwcGluZ1xuICovXG5leHBvcnQgdHlwZSBBZGRyZXNzT3B0aW9ucyA9IFBhcnRpYWw8QWRkcmVzcz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkcmVzc1ZhbHVlcyB7XG4gICAgbmFtZT86IHN0cmluZztcbiAgICBhZGRyZXNzPzogQWRkcmVzc09wdGlvbnMgJiB7IGNvdW50cnk6IHN0cmluZyB9O1xufVxuXG4vKipcbiAqIE9iamVjdCBkZWZpbml0aW9uIGZvciBwYXJ0IG9mIHRoZSBkYXRhIHNlbnQgdG8gY29uZmlybSB0aGUgUGF5bWVudEludGVudC5cbiAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGVfcGF5bWVudF9lbGVtZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQWRkcmVzc1Byb3BlcnRpZXMge1xuICAgIGNpdHk/OiBBdXRvT3JOZXZlcjtcbiAgICBjb3VudHJ5PzogQXV0b09yTmV2ZXI7XG4gICAgc3RhdGU/OiBBdXRvT3JOZXZlcjtcbiAgICBwb3N0YWxDb2RlPzogQXV0b09yTmV2ZXI7XG4gICAgbGluZTE/OiBBdXRvT3JOZXZlcjtcbiAgICBsaW5lMj86IEF1dG9Pck5ldmVyO1xufVxuXG4vKipcbiAqIE9iamVjdCBkZWZpbml0aW9uIGZvciBwYXJ0IG9mIHRoZSBkYXRhIHNlbnQgdG8gY29uZmlybSB0aGUgUGF5bWVudEludGVudC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWxsaW5nRGV0YWlsc09wdGlvbnMge1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgZW1haWw/OiBzdHJpbmc7XG4gICAgYWRkcmVzcz86IEFkZHJlc3NPcHRpb25zO1xuICAgIHBob25lPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIE9iamVjdCBkZWZpbml0aW9uIGZvciBwYXJ0IG9mIHRoZSBkYXRhIHNlbnQgdG8gY29uZmlybSB0aGUgUGF5bWVudEludGVudC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCaWxsaW5nRGV0YWlsc1Byb3BlcnRpZXMge1xuICAgIG5hbWU/OiBBdXRvT3JOZXZlcjtcbiAgICBlbWFpbD86IEF1dG9Pck5ldmVyO1xuICAgIGFkZHJlc3M/OiBBdXRvT3JOZXZlciB8IEFkZHJlc3NQcm9wZXJ0aWVzO1xuICAgIHBob25lPzogQXV0b09yTmV2ZXI7XG59XG5cbi8qKlxuICogT2JqZWN0IGRlZmluaXRpb24gZm9yIHBhcnQgb2YgdGhlIGRhdGEgc2VudCB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBheW1lbnRNZXRob2REYXRhT3B0aW9ucyB7XG4gICAgYmlsbGluZ19kZXRhaWxzOiBCaWxsaW5nRGV0YWlsc09wdGlvbnM7XG4gICAgYWxsb3dfcmVkaXNwbGF5PzogJ2Fsd2F5cycgfCAnbGltaXRlZCcgfCAndW5zcGVjaWZpZWQnO1xufVxuXG4vKipcbiAqIFBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgU3RyaXBlIEFQSSB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNvbmZpcm1QYXJhbXMge1xuICAgIC8qXG4gICAgICogSWYgeW91IGFyZSBbaGFuZGxpbmcgbmV4dCBhY3Rpb25zIHlvdXJzZWxmXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9wYXltZW50cy9wYXltZW50LWludGVudHMvdmVyaWZ5aW5nLXN0YXR1cyNuZXh0LWFjdGlvbnMpLCBwYXNzIGluIGEgcmV0dXJuX3VybC4gSWYgdGhlIHN1YnNlcXVlbnQgYWN0aW9uXG4gICAgICogaXMgcmVkaXJlY3RfdG9fdXJsLCB0aGlzIFVSTCB3aWxsIGJlIHVzZWQgb24gdGhlIHJldHVybiBwYXRoIGZvciB0aGUgcmVkaXJlY3QuXG4gICAgICpcbiAgICAgKiBAcmVjb21tZW5kZWRcbiAgICAgKi9cbiAgICByZXR1cm5fdXJsPzogc3RyaW5nO1xuICAgIHBheW1lbnRfbWV0aG9kX2RhdGE/OiBQYXltZW50TWV0aG9kRGF0YU9wdGlvbnM7XG59XG5cbi8qKlxuICogRGF0YSB0byBiZSBzZW50IHdpdGggYSBgc3RyaXBlLmNvbmZpcm1QYXltZW50YCByZXF1ZXN0LlxuICogUmVmZXIgdG8gdGhlIFtQYXltZW50IEludGVudHMgQVBJXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9wYXltZW50X2ludGVudHMvY29uZmlybV9wYXltZW50KSBmb3IgYSBmdWxsIGxpc3Qgb2YgcGFyYW1ldGVycy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDb25maXJtUGF5bWVudERhdGEge1xuICAgIC8qKlxuICAgICAqIFRoZSBFbGVtZW50cyBpbnN0YW5jZSB0aGF0IHdhcyB1c2VkIHRvIGNyZWF0ZSB0aGUgUGF5bWVudCBFbGVtZW50LlxuICAgICAqL1xuICAgIGVsZW1lbnRzOiBTdHJpcGVFbGVtZW50cztcblxuICAgIC8qKlxuICAgICAqIFBhcmFtZXRlcnMgdGhhdCB3aWxsIGJlIHBhc3NlZCBvbiB0byB0aGUgU3RyaXBlIEFQSSB0byBjb25maXJtIHRoZSBQYXltZW50SW50ZW50LlxuICAgICAqL1xuICAgIGNvbmZpcm1QYXJhbXM/OiBTdHJpcGVDb25maXJtUGFyYW1zO1xuXG4gICAgLyoqXG4gICAgICogQnkgZGVmYXVsdCwgY29uZmlybVBheW1lbnQgd2lsbCBhbHdheXMgcmVkaXJlY3QgdG8geW91ciByZXR1cm5fdXJsIGFmdGVyIGEgc3VjY2Vzc2Z1bCBjb25maXJtYXRpb24uXG4gICAgICogSWYgeW91IHNldCByZWRpcmVjdDogXCJpZl9yZXF1aXJlZFwiLCB0aGVuIGNvbmZpcm1QYXltZW50IHdpbGwgb25seSByZWRpcmVjdCBpZiB5b3VyIHVzZXIgY2hvb3NlcyBhIHJlZGlyZWN0LWJhc2VkIHBheW1lbnQgbWV0aG9kLlxuICAgICAqL1xuICAgIHJlZGlyZWN0PzogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFMV0FZUyB8IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5JRl9SRVFVSVJFRDtcblxuICAgIGNsaWVudFNlY3JldD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZHNPcHRpb25zIHtcbiAgICBiaWxsaW5nRGV0YWlscz86IEF1dG9Pck5ldmVyIHwgQmlsbGluZ0RldGFpbHNQcm9wZXJ0aWVzO1xuICAgIHBob25lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdhbGxldE9wdGlvbnMge1xuICAgIGFwcGxlUGF5PzogQXV0b09yTmV2ZXI7XG4gICAgZ29vZ2xlUGF5PzogQXV0b09yTmV2ZXI7XG4gICAgbGluaz86IEF1dG9Pck5ldmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlcm1PcHRpb25zIHtcbiAgICBjYXJkPzogQXV0b09yTmV2ZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlTGF5b3V0T3B0aW9ucyB7XG4gICAgdHlwZT86ICdhY2NvcmRpb24nIHwgJ3RhYnMnO1xuICAgIGxpbmtJbkFjY29yZGlvbj86IGJvb2xlYW47XG4gICAgZGVmYXVsdENvbGxhcHNlZD86IGJvb2xlYW47XG4gICAgcmFkaW9zPzogYm9vbGVhbjtcbiAgICBzcGFjZWRBY2NvcmRpb25JdGVtcz86IGJvb2xlYW47XG4gICAgdmlzaWJsZUFjY29yZGlvbkl0ZW1zQ291bnQ/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQWxsIGF2YWlsYWJsZSBvcHRpb25zIGFyZSBoZXJlIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9jcmVhdGVfcGF5bWVudF9lbGVtZW50XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zIHtcbiAgICBtb2RlPzogc3RyaW5nO1xuICAgIGZpZWxkcz86IEZpZWxkc09wdGlvbnM7XG4gICAgd2FsbGV0cz86IFdhbGxldE9wdGlvbnM7XG4gICAgYWxsb3dlZENvdW50cmllcz86IHN0cmluZ1tdO1xuICAgIGRlZmF1bHRWYWx1ZXM/OiBTaGlwcGluZ0RlZmF1bHRWYWx1ZXMgfCBDdXN0b21lckRlZmF1bHRWYWx1ZXMgfCBQYXltZW50RGVmYXVsdFZhbHVlcztcbiAgICB2YWxpZGF0aW9uPzogdmFsaWRhdGlvbkVsZW1lbnQ7XG4gICAgZGlzcGxheT86IHsgbmFtZTogU3RyaXBlRGlzcGxheU5hbWUgfTtcbiAgICB0ZXJtcz86IFRlcm1PcHRpb25zO1xuICAgIGxheW91dD86IFN0cmlwZUxheW91dE9wdGlvbnM7XG4gICAgcGF5bWVudE1ldGhvZE9yZGVyPzogc3RyaW5nW107XG4gICAgLy8gIExpbmsgdjIgb3B0aW9uc1xuICAgIGxpbmVJdGVtcz86IExpbmVJdGVtW107XG4gICAgYWxsb3dlZFNoaXBwaW5nQ291bnRyaWVzPzogc3RyaW5nW107XG4gICAgc2hpcHBpbmdBZGRyZXNzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHNoaXBwaW5nUmF0ZXM/OiBTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGVbXTtcbiAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBlbWFpbFJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBwaG9uZU51bWJlclJlcXVpcmVkPzogYm9vbGVhbjtcbiAgICBwYXltZW50TWV0aG9kcz86IHtcbiAgICAgICAgbGluazogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE87XG4gICAgICAgIGFwcGxlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVI7XG4gICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSO1xuICAgICAgICBhbWF6b25QYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUjtcbiAgICAgICAgcGF5cGFsOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVI7XG4gICAgICAgIGtsYXJuYTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSO1xuICAgIH07XG4gICAgYnV0dG9uSGVpZ2h0PzogbnVtYmVyO1xuICAgIHNhdmVQYXltZW50TWV0aG9kPzogU3RyaXBlU2F2ZVBheW1lbnRNZXRob2Q7XG59XG5cbmludGVyZmFjZSB2YWxpZGF0aW9uRWxlbWVudCB7XG4gICAgcGhvbmU/OiB2YWxpZGF0aW9uUmVxdWlyZWRFbGVtZW50O1xufVxuXG5pbnRlcmZhY2UgdmFsaWRhdGlvblJlcXVpcmVkRWxlbWVudCB7XG4gICAgcmVxdWlyZWQ/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBQYXltZW50RGVmYXVsdFZhbHVlcyB7XG4gICAgc2F2ZVBheW1lbnRNZXRob2Q/OiBib29sZWFuO1xuICAgIGJpbGxpbmdEZXRhaWxzPzogQmlsbGluZ0RldGFpbHNPcHRpb25zO1xufVxuXG5pbnRlcmZhY2UgU2hpcHBpbmdEZWZhdWx0VmFsdWVzIHtcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGZpcnN0TmFtZT86IHN0cmluZztcbiAgICBsYXN0TmFtZT86IHN0cmluZztcbiAgICBwaG9uZTogc3RyaW5nO1xuICAgIGFkZHJlc3M6IEFkZHJlc3M7XG59XG5cbi8qXG5EZWNpZGUgd2hpY2ggbW9kZSB5b3UgYXJlIGdvaW5nIHRvIHVzZSB0aGUgQWRkcmVzcyBFbGVtZW50XG5TaGlwcGluZzogaXMgdXNlZCB3aXRoIHRoZSBQYXltZW50IEVsZW1lbnQgYW5kIExpbmsgQXV0aGVudGljYXRpb24gRWxlbWVudCwgaXQgd2lsbCBhdXRvbWF0aWNhbGx5IHBhc3Mgc2hpcHBpbmdcbmluZm9ybWF0aW9uIHdoZW4gY29uZmlybWluZyBQYXltZW50IEludGVudCBvciBTZXR1cCBJbnRlbnQuXG5CaWxsaW5nOiBpcyB1c2VkIHdpdGggdGhlIFBheW1lbnQgRWxlbWVudCwgaXQgd2lsbCBhdXRvbWF0aWNhbGx5IHBhc3MgdGhlIGJpbGxpbmcgaW5mb3JtYXRpb24gd2hlbiBjb25maXJtaW5nXG5QYXltZW50IEludGVudCBvciBTZXR1cCBJbnRlbnQuXG4gKi9cbmV4cG9ydCBlbnVtIFN0cmlwZUZvcm1Nb2RlIHtcbiAgICBTSElQUElORyA9ICdzaGlwcGluZycsXG4gICAgQklMTElORyA9ICdiaWxsaW5nJyxcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlRGlzcGxheU5hbWUge1xuICAgIFNQTElUID0gJ3NwbGl0JyxcbiAgICBGVUxMID0gJ2Z1bGwnLFxuICAgIE9SR0FOSVpBVElPTiA9ICdvcmdhbml6YXRpb24nLFxufVxuXG5pbnRlcmZhY2UgQ3VzdG9tZXJEZWZhdWx0VmFsdWVzIHtcbiAgICBtb2RlOiBTdHJpcGVGb3JtTW9kZTtcbiAgICBlbWFpbDogc3RyaW5nO1xuICAgIGFsbG93ZWRDb3VudHJpZXM/OiBzdHJpbmdbXTtcbiAgICBkaXNwbGF5Pzoge1xuICAgICAgICBuYW1lOiBTdHJpcGVEaXNwbGF5TmFtZTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUVsZW1lbnRzIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEVsZW1lbnRzIGluc3RhbmNlLCB3aGljaCBtYW5hZ2VzIGEgZ3JvdXAgb2YgZWxlbWVudHMuXG4gICAgICogaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvZWxlbWVudHNfb2JqZWN0L2NyZWF0ZVxuICAgICAqL1xuICAgIGNyZWF0ZShlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUsIG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMpOiBTdHJpcGVFbGVtZW50O1xuXG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBwcmV2aW91c2x5IGNyZWF0ZWQgZWxlbWVudC5cbiAgICAgKiBodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvZ2V0X3BheW1lbnRfZWxlbWVudCBvclxuICAgICAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9nZXRfbGlua19hdXRoZW50aWNhdGlvbl9lbGVtZW50XG4gICAgICovXG4gICAgZ2V0RWxlbWVudChlbGVtZW50VHlwZTogU3RyaXBlRWxlbWVudFR5cGUpOiBTdHJpcGVFbGVtZW50IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgb3B0aW9ucyBvbiBhbiBleGlzdGluZyBpbnN0YW5jZSBvZiBFbGVtZW50cy5cbiAgICAgKiBodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9lbGVtZW50c19vYmplY3QvdXBkYXRlXG4gICAgICovXG4gICAgdXBkYXRlKG9wdGlvbnM/OiBTdHJpcGVVcGRhdGVFbGVtZW50c09wdGlvbnMpOiBTdHJpcGVFbGVtZW50O1xuXG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB1cGRhdGVzIGZyb20gdGhlIGFzc29jaWF0ZWQgUGF5bWVudEludGVudCBvciBTZXR1cEludGVudCBvbiBhbiBleGlzdGluZyBpbnN0YW5jZSBvZiBFbGVtZW50cyxcbiAgICAgKiBhbmQgcmVmbGVjdHMgdGhlc2UgdXBkYXRlcyBpbiB0aGUgUGF5bWVudCBFbGVtZW50LlxuICAgICAqIGh0dHBzOi8vc3RyaXBlLmNvbS9kb2NzL2pzL2VsZW1lbnRzX29iamVjdC9mZXRjaF91cGRhdGVzXG4gICAgICovXG4gICAgZmV0Y2hVcGRhdGVzKCk6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ2hlY2tvdXRTZXNzaW9uIHtcbiAgICBsb2FkQWN0aW9ucygpOiBQcm9taXNlPFN0cmlwZUxvYWRBY3Rpb25zUmVzdWx0PjtcbiAgICBjcmVhdGVQYXltZW50RWxlbWVudChvcHRpb25zPzogU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zKTogU3RyaXBlRWxlbWVudDtcbiAgICBnZXRQYXltZW50RWxlbWVudCgpOiBTdHJpcGVFbGVtZW50IHwgbnVsbDtcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlTG9hZEFjdGlvbnNSZXN1bHRUeXBlIHtcbiAgICBTVUNDRVNTID0gJ3N1Y2Nlc3MnLFxuICAgIEVSUk9SID0gJ2Vycm9yJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVMb2FkQWN0aW9uc1Jlc3VsdCB7XG4gICAgdHlwZTogU3RyaXBlTG9hZEFjdGlvbnNSZXN1bHRUeXBlO1xuICAgIGVycm9yPzogeyBtZXNzYWdlOiBzdHJpbmcgfTtcbiAgICBhY3Rpb25zPzogU3RyaXBlQ2hlY2tvdXRTZXNzaW9uQWN0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDaGVja291dFNlc3Npb25BY3Rpb25zIHtcbiAgICB1cGRhdGVFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbn1cblxuLyoqXG4gKiBBbGwgYXZhaWxhYmxlIG9wdGlvbnMgYXJlIGhlcmUgaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3Mvc3RyaXBlLWpzL2FwcGVhcmFuY2UtYXBpI3N1cHBvcnRlZC1jc3MtcHJvcGVydGllc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zIHtcbiAgICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBTdHJpcGVBcHBlYXJhbmNlVmFsdWVzPjtcblxuICAgIHJ1bGVzPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgU3RyaXBlQXBwZWFyYW5jZVZhbHVlcz4+O1xufVxuXG5leHBvcnQgdHlwZSBTdHJpcGVBcHBlYXJhbmNlVmFsdWVzID0gc3RyaW5nIHwgc3RyaW5nW10gfCBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudHNPcHRpb25zIHtcbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiBjdXN0b20gZm9udHMsIHdoaWNoIGVsZW1lbnRzIGNyZWF0ZWQgZnJvbSB0aGUgRWxlbWVudHMgb2JqZWN0IGNhbiB1c2UuXG4gICAgICogRm9udHMgY2FuIGJlIHNwZWNpZmllZCBhcyBbQ3NzRm9udFNvdXJjZV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvYXBwZW5kaXgvY3NzX2ZvbnRfc291cmNlX29iamVjdClcbiAgICAgKiBvciBbQ3VzdG9tRm9udFNvdXJjZV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvYXBwZW5kaXgvY3VzdG9tX2ZvbnRfc291cmNlX29iamVjdCkgb2JqZWN0cy5cbiAgICAgKi9cbiAgICBmb250cz86IFN0cmlwZUN1c3RvbUZvbnRbXTtcblxuICAgIC8qKlxuICAgICAqIEEgW2xvY2FsZV0oaHR0cHM6Ly9zdHJpcGUuY29tL2RvY3MvanMvYXBwZW5kaXgvc3VwcG9ydGVkX2xvY2FsZXMpIHRvIGRpc3BsYXkgcGxhY2Vob2xkZXJzIGFuZFxuICAgICAqIGVycm9yIHN0cmluZ3MgaW4uIERlZmF1bHQgaXMgYXV0byAoU3RyaXBlIGRldGVjdHMgdGhlIGxvY2FsZSBvZiB0aGUgYnJvd3NlcikuXG4gICAgICogU2V0dGluZyB0aGUgbG9jYWxlIGRvZXMgbm90IGFmZmVjdCB0aGUgYmVoYXZpb3Igb2YgcG9zdGFsIGNvZGUgdmFsaWRhdGlvbuKAlGEgdmFsaWQgcG9zdGFsIGNvZGVcbiAgICAgKiBmb3IgdGhlIGJpbGxpbmcgY291bnRyeSBvZiB0aGUgY2FyZCBpcyBzdGlsbCByZXF1aXJlZC5cbiAgICAgKi9cbiAgICBsb2NhbGU/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2xpZW50IHNlY3JldCBvZiB0aGlzIFBheW1lbnRJbnRlbnQuIFVzZWQgZm9yIGNsaWVudC1zaWRlIHJldHJpZXZhbCB1c2luZyBhIHB1Ymxpc2hhYmxlIGtleS5cbiAgICAgKiBUaGUgY2xpZW50IHNlY3JldCBjYW4gYmUgdXNlZCB0byBjb21wbGV0ZSBhIHBheW1lbnQgZnJvbSB5b3VyIGZyb250ZW5kLlxuICAgICAqIEl0IHNob3VsZCBub3QgYmUgc3RvcmVkLCBsb2dnZWQsIGVtYmVkZGVkIGluIFVSTHMsIG9yIGV4cG9zZWQgdG8gYW55b25lIG90aGVyIHRoYW4gdGhlIGN1c3RvbWVyLlxuICAgICAqIE1ha2Ugc3VyZSB0aGF0IHlvdSBoYXZlIFRMUyBlbmFibGVkIG9uIGFueSBwYWdlIHRoYXQgaW5jbHVkZXMgdGhlIGNsaWVudCBzZWNyZXQuXG4gICAgICogUmVmZXIgdG8gb3VyIGRvY3MgdG8gYWNjZXB0IGEgcGF5bWVudCBhbmQgbGVhcm4gYWJvdXQgaG93IGNsaWVudF9zZWNyZXQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gICAgICovXG4gICAgY2xpZW50U2VjcmV0Pzogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogQSB0b2tlbiB0aGF0IHJlcHJlc2VudHMgdGhlIFN0cmlwZSBjdXN0b21lciBzZXNzaW9uLlxuICAgICAqIFN0cmlwZSBkb2N1bWVudGF0aW9uOiBodHRwczovL2RvY3Muc3RyaXBlLmNvbS9hcGkvY2hlY2tvdXQvc2Vzc2lvbnNcbiAgICAgKi9cbiAgICBjdXN0b21lclNlc3Npb25DbGllbnRTZWNyZXQ/OiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaCB0aGUgZGVzaWduIG9mIHlvdXIgc2l0ZSB3aXRoIHRoZSBhcHBlYXJhbmNlIG9wdGlvbi5cbiAgICAgKiBUaGUgbGF5b3V0IG9mIGVhY2ggRWxlbWVudCBzdGF5cyBjb25zaXN0ZW50LCBidXQgeW91IGNhbiBtb2RpZnkgY29sb3JzLCBmb250cywgYm9yZGVycywgcGFkZGluZywgYW5kIG1vcmUuXG4gICAgICovXG4gICAgYXBwZWFyYW5jZT86IFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zO1xuXG4gICAgbW9kZT86IHN0cmluZztcbiAgICBhbW91bnQ/OiBudW1iZXI7XG4gICAgY3VycmVuY3k/OiBzdHJpbmc7XG4gICAgcGF5bWVudE1ldGhvZFR5cGVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlSW5pdENoZWNrb3V0T3B0aW9ucyB7XG4gICAgY2xpZW50U2VjcmV0OiBzdHJpbmc7XG4gICAgZWxlbWVudHNPcHRpb25zPzogU3RyaXBlQ2hlY2tvdXRTZXNzaW9uRWxlbWVudE9wdGlvbnM7XG4gICAgYWRhcHRpdmVQcmljaW5nPzoge1xuICAgICAgICBhbGxvd2VkOiBib29sZWFuO1xuICAgIH07XG4gICAgZGVmYXVsdFZhbHVlcz86IFN0cmlwZUNoZWNrb3V0U2Vzc2lvbkRlZmF1bHRWYWx1ZXM7XG4gICAgd2FsbGV0cz86IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVDaGVja291dFNlc3Npb25FbGVtZW50T3B0aW9ucyB7XG4gICAgYXBwZWFyYW5jZT86IFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zO1xuICAgIGxvYWRlcj86IFN0cmlwZVN0cmluZ0NvbnN0YW50cztcbiAgICBmb250cz86IFN0cmlwZUN1c3RvbUZvbnRbXTtcbiAgICBzYXZlZFBheW1lbnRNZXRob2Q/OiB7XG4gICAgICAgIGVuYWJsZVJlZGlzcGxheT86IFN0cmlwZVN0cmluZ0NvbnN0YW50cztcbiAgICAgICAgZW5hYmxlU2F2ZT86IFN0cmlwZVN0cmluZ0NvbnN0YW50cztcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUNoZWNrb3V0U2Vzc2lvbkRlZmF1bHRWYWx1ZXMge1xuICAgIGJpbGxpbmdBZGRyZXNzPzogU3RyaXBlQWRkcmVzc1ZhbHVlcztcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiBTdHJpcGVBZGRyZXNzVmFsdWVzO1xuICAgIGVtYWlsPzogc3RyaW5nO1xuICAgIHBob25lTnVtYmVyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVVwZGF0ZUVsZW1lbnRzT3B0aW9ucyB7XG4gICAgLyoqXG4gICAgICogQSBbbG9jYWxlXShodHRwczovL3N0cmlwZS5jb20vZG9jcy9qcy9hcHBlbmRpeC9zdXBwb3J0ZWRfbG9jYWxlcykgdG8gZGlzcGxheSBwbGFjZWhvbGRlcnMgYW5kXG4gICAgICogZXJyb3Igc3RyaW5ncyBpbi4gRGVmYXVsdCBpcyBhdXRvIChTdHJpcGUgZGV0ZWN0cyB0aGUgbG9jYWxlIG9mIHRoZSBicm93c2VyKS5cbiAgICAgKiBTZXR0aW5nIHRoZSBsb2NhbGUgZG9lcyBub3QgYWZmZWN0IHRoZSBiZWhhdmlvciBvZiBwb3N0YWwgY29kZSB2YWxpZGF0aW9u4oCUYSB2YWxpZCBwb3N0YWwgY29kZVxuICAgICAqIGZvciB0aGUgYmlsbGluZyBjb3VudHJ5IG9mIHRoZSBjYXJkIGlzIHN0aWxsIHJlcXVpcmVkLlxuICAgICAqL1xuICAgIGxvY2FsZT86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1hdGNoIHRoZSBkZXNpZ24gb2YgeW91ciBzaXRlIHdpdGggdGhlIGFwcGVhcmFuY2Ugb3B0aW9uLlxuICAgICAqIFRoZSBsYXlvdXQgb2YgZWFjaCBFbGVtZW50IHN0YXlzIGNvbnNpc3RlbnQsIGJ1dCB5b3UgY2FuIG1vZGlmeSBjb2xvcnMsIGZvbnRzLCBib3JkZXJzLCBwYWRkaW5nLCBhbmQgbW9yZS5cbiAgICAgKi9cbiAgICBhcHBlYXJhbmNlPzogU3RyaXBlQXBwZWFyYW5jZU9wdGlvbnM7XG4gICAgbW9kZT86IHN0cmluZztcbiAgICBhbW91bnQ/OiBudW1iZXI7XG4gICAgY3VycmVuY3k/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQ2xpZW50IHtcbiAgICAvKipcbiAgICAgKiBVc2UgY29uZmlybVBheW1lbnQgdG8gY29uZmlybSBhIFBheW1lbnRJbnRlbnQgdXNpbmcgZGF0YSBjb2xsZWN0ZWQgYnkgdGhlIFBheW1lbnQgRWxlbWVudC5cbiAgICAgKiBXaGVuIGNhbGxlZCwgY29uZmlybVBheW1lbnQgd2lsbCBhdHRlbXB0IHRvIGNvbXBsZXRlIGFueSByZXF1aXJlZCBhY3Rpb25zLFxuICAgICAqIHN1Y2ggYXMgYXV0aGVudGljYXRpbmcgeW91ciB1c2VyIGJ5IGRpc3BsYXlpbmcgYSAzRFMgZGlhbG9nIG9yIHJlZGlyZWN0aW5nIHRoZW0gdG8gYSBiYW5rIGF1dGhvcml6YXRpb24gcGFnZS5cbiAgICAgKi9cbiAgICBjb25maXJtUGF5bWVudChvcHRpb25zOiBTdHJpcGVDb25maXJtUGF5bWVudERhdGEpOiBQcm9taXNlPFN0cmlwZVJlc3VsdD47XG5cbiAgICAvKipcbiAgICAgKiBXaGVuIGNhbGxlZCwgaXQgd2lsbCBjb25maXJtIHRoZSBQYXltZW50SW50ZW50IHdpdGggZGF0YSB5b3UgcHJvdmlkZSBhbmQgY2Fycnkgb3V0IDNEUyBvciBvdGhlciBuZXh0IGFjdGlvbnMgaWYgdGhleSBhcmUgcmVxdWlyZWQuXG4gICAgICovXG4gICAgY29uZmlybUNhcmRQYXltZW50KGNsaWVudFNlY3JldDogc3RyaW5nKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQ+O1xuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgYSBQYXltZW50SW50ZW50IHVzaW5nIGl0cyBjbGllbnQgc2VjcmV0LlxuICAgICAqL1xuICAgIHJldHJpZXZlUGF5bWVudEludGVudChjbGllbnRTZWNyZXQ6IHN0cmluZyk6IFByb21pc2U8U3RyaXBlUmVzdWx0PjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBgRWxlbWVudHNgIGluc3RhbmNlLCB3aGljaCBtYW5hZ2VzIGEgZ3JvdXAgb2YgZWxlbWVudHMuXG4gICAgICovXG4gICAgZWxlbWVudHMob3B0aW9uczogU3RyaXBlRWxlbWVudHNPcHRpb25zKTogU3RyaXBlRWxlbWVudHM7XG5cbiAgICBpbml0Q2hlY2tvdXQob3B0aW9uczogU3RyaXBlSW5pdENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8U3RyaXBlQ2hlY2tvdXRTZXNzaW9uPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVSZXN1bHQge1xuICAgIHBheW1lbnRJbnRlbnQ/OiBQYXltZW50SW50ZW50O1xuICAgIGVycm9yPzogU3RyaXBlRXJyb3I7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlSG9zdFdpbmRvdyBleHRlbmRzIFdpbmRvdyB7XG4gICAgYmNTdHJpcGVDbGllbnQ/OiBTdHJpcGVDbGllbnQ7XG4gICAgYmNTdHJpcGVFbGVtZW50cz86IFN0cmlwZUVsZW1lbnRzO1xuICAgIGJjU3RyaXBlQ2hlY2tvdXRTZXNzaW9uPzogU3RyaXBlQ2hlY2tvdXRTZXNzaW9uO1xuICAgIFN0cmlwZT88VCA9IFN0cmlwZUNsaWVudD4oXG4gICAgICAgIHN0cmlwZVB1Ymxpc2hhYmxlS2V5OiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM/OiBTdHJpcGVDb25maWd1cmF0aW9uT3B0aW9ucyxcbiAgICApOiBUO1xufVxuXG5leHBvcnQgZW51bSBTdHJpcGVQYXltZW50TWV0aG9kVHlwZSB7XG4gICAgQ3JlZGl0Q2FyZCA9ICdjYXJkJyxcbiAgICBMaW5rID0gJ2xpbmsnLFxuICAgIEVQUyA9ICdlcHMnLFxuICAgIEdSQUJQQVkgPSAnZ3JhYnBheScsXG4gICAgQkFOQ09OVEFDVCA9ICdiYW5jb250YWN0JyxcbiAgICBJREVBTCA9ICdpZGVhbCcsXG4gICAgQUxJUEFZID0gJ2FsaXBheScsXG4gICAgS0xBUk5BID0gJ2tsYXJuYScsXG4gICAgT0NTID0gJ29wdGltaXplZF9jaGVja291dCcsXG59XG5cbnR5cGUgQXV0b09yTmV2ZXIgPSBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyB8IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUjtcblxuZXhwb3J0IGVudW0gU3RyaXBlU3RyaW5nQ29uc3RhbnRzIHtcbiAgICBORVZFUiA9ICduZXZlcicsXG4gICAgQVVUTyA9ICdhdXRvJyxcbiAgICBBTFdBWVMgPSAnYWx3YXlzJyxcbiAgICBQQVlNRU5UID0gJ3BheW1lbnQnLFxuICAgIElGX1JFUVVJUkVEID0gJ2lmX3JlcXVpcmVkJyxcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlSnNWZXJzaW9uIHtcbiAgICBWMyA9ICd2MycsXG4gICAgQUNBQ0lBID0gJ2FjYWNpYScsXG4gICAgQkFTSUwgPSAnYmFzaWwnLFxuICAgIENMT1ZFUiA9ICdjbG92ZXInLFxufVxuXG5leHBvcnQgZW51bSBTdHJpcGVFbGVtZW50VHlwZSB7XG4gICAgUEFZTUVOVCA9ICdwYXltZW50JyxcbiAgICBBVVRIRU5USUNBVElPTiA9ICdsaW5rQXV0aGVudGljYXRpb24nLFxuICAgIFNISVBQSU5HID0gJ2FkZHJlc3MnLFxuICAgIEVYUFJFU1NfQ0hFQ0tPVVQgPSAnZXhwcmVzc0NoZWNrb3V0Jyxcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlUGF5bWVudEludGVudFN0YXR1cyB7XG4gICAgUkVRVUlSRVNfUEFZTUVOVF9NRVRIT0QgPSAncmVxdWlyZXNfcGF5bWVudF9tZXRob2QnLFxuICAgIFJFUVVJUkVTX0NPTkZJUk1BVElPTiA9ICdyZXF1aXJlc19jb25maXJtYXRpb24nLFxuICAgIFJFUVVJUkVTX0FDVElPTiA9ICdyZXF1aXJlc19hY3Rpb24nLFxuICAgIFBST0NFU1NJTkcgPSAncHJvY2Vzc2luZycsXG4gICAgU1VDQ0VFREVEID0gJ3N1Y2NlZWRlZCcsXG4gICAgQ0FOQ0VMRUQgPSAnY2FuY2VsZWQnLFxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZVBheW1lbnRNZXRob2QgZXh0ZW5kcyBQYXltZW50TWV0aG9kIHtcbiAgICBpbml0aWFsaXphdGlvbkRhdGE6IFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEge1xuICAgIHN0cmlwZVB1Ymxpc2hhYmxlS2V5OiBzdHJpbmc7XG4gICAgc3RyaXBlQ29ubmVjdGVkQWNjb3VudDogc3RyaW5nO1xuICAgIHNob3BwZXJMYW5ndWFnZTogc3RyaW5nO1xuICAgIGN1c3RvbWVyU2Vzc2lvblRva2VuPzogc3RyaW5nO1xuICAgIGVuYWJsZUxpbms/OiBib29sZWFuO1xuICAgIGFsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM/OiBib29sZWFuO1xuICAgIGNhcHR1cmVNZXRob2Q/OiAnYXV0b21hdGljJyB8ICdtYW51YWwnO1xuICAgIHVzZU5ld1N0cmlwZUpzVmVyc2lvbj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlRWxlbWVudFVwZGF0ZU9wdGlvbnMge1xuICAgIHNob3VsZFNob3dUZXJtcz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgZGF0YToge1xuICAgICAgICB0b2tlbj86IHN0cmluZztcbiAgICAgICAgcmVkaXJlY3RfdXJsPzogc3RyaW5nO1xuICAgIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlc3BvbnNlQm9keSB7XG4gICAgYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ6IFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZDtcbiAgICB0aHJlZV9kc19yZXN1bHQ6IHtcbiAgICAgICAgdG9rZW4/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGVudW0gU3RyaXBlRWxlbWVudEV2ZW50IHtcbiAgICBDTElDSyA9ICdjbGljaycsXG4gICAgQ0hBTkdFID0gJ2NoYW5nZScsXG4gICAgUkVBRFkgPSAncmVhZHknLFxuICAgIFNISVBQSU5HX0FERFJFU1NfQ0hBTkdFID0gJ3NoaXBwaW5nYWRkcmVzc2NoYW5nZScsXG4gICAgU0hJUFBJTkdfUkFURV9DSEFOR0UgPSAnc2hpcHBpbmdyYXRlY2hhbmdlJyxcbiAgICBDT05GSVJNID0gJ2NvbmZpcm0nLFxuICAgIENBTkNFTCA9ICdjYW5jZWwnLFxuICAgIExPQURFUl9TVEFSVCA9ICdsb2FkZXJzdGFydCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGluZUl0ZW0ge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdHJpcGVTYXZlUGF5bWVudE1ldGhvZCB7XG4gICAgbWF4VmlzaWJsZVBheW1lbnRNZXRob2RzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgZW51bSBTdHJpcGVJbnN0cnVtZW50U2V0dXBGdXR1cmVVc2FnZSB7XG4gICAgT05fU0VTU0lPTiA9ICdvbl9zZXNzaW9uJyxcbiAgICBPRkZfU0VTU0lPTiA9ICdvZmZfc2Vzc2lvbicsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlTGlua1YyRXZlbnQge1xuICAgIHZhbHVlPzogbnVsbDtcbiAgICBiaWxsaW5nRGV0YWlscz86IHtcbiAgICAgICAgbmFtZT86IHN0cmluZztcbiAgICAgICAgZW1haWw/OiBzdHJpbmc7XG4gICAgICAgIHBob25lPzogc3RyaW5nO1xuICAgICAgICBhZGRyZXNzPzoge1xuICAgICAgICAgICAgbGluZTE/OiBzdHJpbmc7XG4gICAgICAgICAgICBjaXR5Pzogc3RyaW5nO1xuICAgICAgICAgICAgY291bnRyeT86IHN0cmluZztcbiAgICAgICAgICAgIHBvc3RhbF9jb2RlPzogc3RyaW5nO1xuICAgICAgICAgICAgc3RhdGU/OiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBzaGlwcGluZ0FkZHJlc3M/OiB7XG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgICAgIGFkZHJlc3M/OiB7XG4gICAgICAgICAgICBsaW5lMT86IHN0cmluZztcbiAgICAgICAgICAgIGxpbmUyPzogc3RyaW5nO1xuICAgICAgICAgICAgY2l0eT86IHN0cmluZztcbiAgICAgICAgICAgIGNvdW50cnk/OiBzdHJpbmc7XG4gICAgICAgICAgICBwb3N0YWxfY29kZT86IHN0cmluZztcbiAgICAgICAgICAgIHN0YXRlPzogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG4gICAgYWRkcmVzcz86IHtcbiAgICAgICAgbGluZTE/OiBzdHJpbmc7XG4gICAgICAgIGNpdHk/OiBzdHJpbmc7XG4gICAgICAgIGNvdW50cnk/OiBzdHJpbmc7XG4gICAgICAgIHBvc3RhbF9jb2RlPzogc3RyaW5nO1xuICAgICAgICBzdGF0ZT86IHN0cmluZztcbiAgICB9O1xuICAgIHNoaXBwaW5nUmF0ZT86IFN0cmlwZUxpbmtWMlNoaXBwaW5nUmF0ZTtcbiAgICBlbGVtZW50VHlwZTogc3RyaW5nO1xuICAgIGV4cHJlc3NQYXltZW50VHlwZTogc3RyaW5nO1xuICAgIHJlc29sdmUoZGF0YTogU3RyaXBlTGlua1YyRXZlbnRSZXNvbHZlRGF0YSk6IHZvaWQ7XG4gICAgcmVqZWN0KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RyaXBlTGlua1YyRXZlbnRSZXNvbHZlRGF0YSB7XG4gICAgbGluZUl0ZW1zPzogTGluZUl0ZW1bXTtcbiAgICBhbGxvd2VkU2hpcHBpbmdDb3VudHJpZXM/OiBzdHJpbmdbXTtcbiAgICBzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZD86IGJvb2xlYW47XG4gICAgc2hpcHBpbmdSYXRlcz86IFN0cmlwZUxpbmtWMlNoaXBwaW5nUmF0ZVtdO1xuICAgIGJpbGxpbmdBZGRyZXNzUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIGVtYWlsUmVxdWlyZWQ/OiBib29sZWFuO1xuICAgIHBob25lTnVtYmVyUmVxdWlyZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUxpbmtWMlNoaXBwaW5nUmF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBhbW91bnQ6IG51bWJlcjtcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0cmlwZUxpbmtWMk9wdGlvbnMge1xuICAgIGNsaWVudFNlY3JldD86IHN0cmluZztcbiAgICBtb2RlPzogc3RyaW5nO1xuICAgIGN1cnJlbmN5Pzogc3RyaW5nO1xuICAgIGNhcHR1cmVNZXRob2Q/OiAnYXV0b21hdGljJyB8ICdtYW51YWwnO1xuICAgIGFtb3VudD86IG51bWJlcjtcbn1cbiIsImltcG9ydCB7IFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHsgUGF5bWVudE1ldGhvZENsaWVudFVuYXZhaWxhYmxlRXJyb3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuaW1wb3J0IHtcbiAgICBTdHJpcGVDaGVja291dFNlc3Npb24sXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRzT3B0aW9ucyxcbiAgICBTdHJpcGVIb3N0V2luZG93LFxuICAgIFN0cmlwZUluaXRDaGVja291dE9wdGlvbnMsXG4gICAgU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFN0cmlwZUpzVmVyc2lvbixcbn0gZnJvbSAnLi9zdHJpcGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVTY3JpcHRMb2FkZXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZVdpbmRvdzogU3RyaXBlSG9zdFdpbmRvdyA9IHdpbmRvdyxcbiAgICApIHt9XG5cbiAgICBhc3luYyBnZXRTdHJpcGVDbGllbnQoXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICBsb2NhbGU/OiBzdHJpbmcsXG4gICAgICAgIHN0cmlwZUpzVmVyc2lvbj86IHN0cmluZyxcbiAgICAgICAgYmV0YXM/OiBzdHJpbmdbXSxcbiAgICAgICAgYXBpVmVyc2lvbj86IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFN0cmlwZUNsaWVudD4ge1xuICAgICAgICBpZiAodGhpcy5zdHJpcGVXaW5kb3cuYmNTdHJpcGVDbGllbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZVdpbmRvdy5iY1N0cmlwZUNsaWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0cmlwZSA9IGF3YWl0IHRoaXMubG9hZChzdHJpcGVKc1ZlcnNpb24pO1xuICAgICAgICBjb25zdCB7IHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCBzdHJpcGVDb25uZWN0ZWRBY2NvdW50IH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi4oc3RyaXBlQ29ubmVjdGVkQWNjb3VudCA/IHsgc3RyaXBlQWNjb3VudDogc3RyaXBlQ29ubmVjdGVkQWNjb3VudCB9IDoge30pLFxuICAgICAgICAgICAgLi4uKGxvY2FsZSA/IHsgbG9jYWxlIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oYmV0YXMgPyB7IGJldGFzIH0gOiB7fSksXG4gICAgICAgICAgICAuLi4oYXBpVmVyc2lvbiA/IHsgYXBpVmVyc2lvbiB9IDoge30pLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN0cmlwZUNsaWVudCA9IHN0cmlwZTxTdHJpcGVDbGllbnQ+KHN0cmlwZVB1Ymxpc2hhYmxlS2V5LCBvcHRpb25zKTtcblxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RyaXBlV2luZG93LCB7IGJjU3RyaXBlQ2xpZW50OiBzdHJpcGVDbGllbnQgfSk7XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUNsaWVudDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFbGVtZW50cyhcbiAgICAgICAgc3RyaXBlQ2xpZW50OiBTdHJpcGVDbGllbnQsXG4gICAgICAgIG9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFN0cmlwZUVsZW1lbnRzPiB7XG4gICAgICAgIGxldCBzdHJpcGVFbGVtZW50cyA9IHRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgc3RyaXBlRWxlbWVudHMgPSBzdHJpcGVDbGllbnQuZWxlbWVudHMob3B0aW9ucyk7XG5cbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5zdHJpcGVXaW5kb3csIHsgYmNTdHJpcGVFbGVtZW50czogc3RyaXBlRWxlbWVudHMgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVN0cmlwZUVsZW1lbnRzKG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUVsZW1lbnRzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVN0cmlwZUVsZW1lbnRzKG9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzT3B0aW9ucykge1xuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50cyA9IHRoaXMuc3RyaXBlV2luZG93LmJjU3RyaXBlRWxlbWVudHM7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudHMudXBkYXRlKG9wdGlvbnMpO1xuICAgICAgICBhd2FpdCBzdHJpcGVFbGVtZW50cy5mZXRjaFVwZGF0ZXMoKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDaGVja291dFNlc3Npb24oXG4gICAgICAgIHN0cmlwZUNsaWVudDogU3RyaXBlQ2xpZW50LFxuICAgICAgICBvcHRpb25zOiBTdHJpcGVJbml0Q2hlY2tvdXRPcHRpb25zLFxuICAgICk6IFByb21pc2U8U3RyaXBlQ2hlY2tvdXRTZXNzaW9uPiB7XG4gICAgICAgIGxldCBzdHJpcGVDaGVja291dFNlc3Npb24gPSB0aGlzLnN0cmlwZVdpbmRvdy5iY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbjtcblxuICAgICAgICBpZiAoIXN0cmlwZUNoZWNrb3V0U2Vzc2lvbikge1xuICAgICAgICAgICAgc3RyaXBlQ2hlY2tvdXRTZXNzaW9uID0gYXdhaXQgc3RyaXBlQ2xpZW50LmluaXRDaGVja291dChvcHRpb25zKTtcblxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnN0cmlwZVdpbmRvdywgeyBiY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbjogc3RyaXBlQ2hlY2tvdXRTZXNzaW9uIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN0cmlwZUNoZWNrb3V0U2Vzc2lvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWQoc3RyaXBlSnNWZXJzaW9uPzogc3RyaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5zdHJpcGVXaW5kb3cuU3RyaXBlKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5sb2FkU2NyaXB0KHRoaXMuZ2V0U2NyaXB0VXJsKHN0cmlwZUpzVmVyc2lvbikpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RyaXBlV2luZG93LlN0cmlwZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2xpZW50VW5hdmFpbGFibGVFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlV2luZG93LlN0cmlwZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNjcmlwdFVybChzdHJpcGVKc1ZlcnNpb24/OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFzdHJpcGVKc1ZlcnNpb24gfHwgc3RyaXBlSnNWZXJzaW9uID09PSBTdHJpcGVKc1ZlcnNpb24uVjMpIHtcbiAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9qcy5zdHJpcGUuY29tL3YzLyc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYGh0dHBzOi8vanMuc3RyaXBlLmNvbS8ke3N0cmlwZUpzVmVyc2lvbn0vc3RyaXBlLmpzYDtcbiAgICB9XG59XG4iLCJpbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuLyoqXG4gKiBUaGlzIGVycm9yIHNob3VsZCBiZSB0aHJvd24gd2hlbiBhIHBheW1lbnQgbWV0aG9kIGV4cGVyaWVuY2VzIHNvbWUga2luZCBvZlxuICogZmFpbHVyZSAoaS5lLjogaXRzIGNsaWVudCBsaWJyYXJ5IHJldHVybnMgYSByZWplY3RlZCBwcm9taXNlKS4gQW5kIHRoZXJlIGlzXG4gKiBubyBvdGhlciBlcnJvciB0eXBlIHRoYXQgaXMgbW9yZSBzcGVjaWZpYyB0aGFuIHRoaXMgb25lLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IgZXh0ZW5kcyBTdGFuZGFyZEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKFxuICAgICAgICAgICAgbWVzc2FnZSB8fFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIHRoZSBjbGllbnQgbGlicmFyeSBvZiBhIHBheW1lbnQgbWV0aG9kIGhhcyB0aHJvd24gYW4gdW5leHBlY3RlZCBlcnJvci4nLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdQYXltZW50TWV0aG9kRmFpbGVkRXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncGF5bWVudF9tZXRob2RfY2xpZW50X2ludmFsaWQnO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGluY2x1ZGVzLCBzb21lIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHtcbiAgICBBZGRyZXNzLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuXG5pbXBvcnQgeyBpc1N0cmlwZUVycm9yIH0gZnJvbSAnLi9pcy1zdHJpcGUtZXJyb3InO1xuaW1wb3J0IHtcbiAgICBBZGRyZXNzT3B0aW9ucyxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQsXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUNvbmZpcm1QYXltZW50RGF0YSxcbiAgICBTdHJpcGVFbGVtZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICBTdHJpcGVKc1ZlcnNpb24sXG4gICAgU3RyaXBlUGF5bWVudEludGVudFN0YXR1cyxcbiAgICBTdHJpcGVTdHJpbmdDb25zdGFudHMsXG59IGZyb20gJy4vc3RyaXBlJztcbmltcG9ydCBTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgZnJvbSAnLi9zdHJpcGUtaW5pdGlhbGl6ZS1vcHRpb25zJztcbmltcG9ydCBTdHJpcGVTY3JpcHRMb2FkZXIgZnJvbSAnLi9zdHJpcGUtc2NyaXB0LWxvYWRlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUludGVncmF0aW9uU2VydmljZSB7XG4gICAgcHJpdmF0ZSBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIGNoZWNrb3V0RXZlbnRzVW5zdWJzY3JpYmU/OiAoKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICApIHt9XG5cbiAgICBkZWluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZT8uKCk7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc3RyaXBlSW5pdGlhbGl6YXRpb25PcHRpb25zOiBTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgICAgIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHMsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bWVudEVsZW1lbnQgPSBzdHJpcGVFbGVtZW50cz8uZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5UKTtcblxuICAgICAgICAgICAgICAgIGlmICghcGF5bWVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQsIG1ldGhvZElkKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRFbGVtZW50LnVubW91bnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaXBlSW5pdGlhbGl6YXRpb25PcHRpb25zLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdHJpcGVFbGVtZW50cz8uZmV0Y2hVcGRhdGVzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW91bnRFbGVtZW50KHBheW1lbnRFbGVtZW50LCBzdHJpcGVJbml0aWFsaXphdGlvbk9wdGlvbnMuY29udGFpbmVySWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoc3RhdGUpID0+IHN0YXRlLmdldENoZWNrb3V0KCk/Lm91dHN0YW5kaW5nQmFsYW5jZSxcbiAgICAgICAgICAgIChzdGF0ZSkgPT4gc3RhdGUuZ2V0Q2hlY2tvdXQoKT8uY291cG9ucyxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBtb3VudEVsZW1lbnQoc3RyaXBlRWxlbWVudDogU3RyaXBlRWxlbWVudCwgY29udGFpbmVySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcklkKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVySWR9YCk7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXBBcHBlYXJhbmNlVmFyaWFibGVzKHN0eWxlczogTm9uTnVsbGFibGU8U3RyaXBlUGF5bWVudEluaXRpYWxpemVPcHRpb25zWydzdHlsZSddPikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29sb3JQcmltYXJ5OiBzdHlsZXMuZmllbGRJbm5lclNoYWRvdyxcbiAgICAgICAgICAgIGNvbG9yQmFja2dyb3VuZDogc3R5bGVzLmZpZWxkQmFja2dyb3VuZCxcbiAgICAgICAgICAgIGNvbG9yVGV4dDogc3R5bGVzLmxhYmVsVGV4dCxcbiAgICAgICAgICAgIGNvbG9yRGFuZ2VyOiBzdHlsZXMuZmllbGRFcnJvclRleHQsXG4gICAgICAgICAgICBjb2xvclRleHRTZWNvbmRhcnk6IHN0eWxlcy5sYWJlbFRleHQsXG4gICAgICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcjogc3R5bGVzLmZpZWxkUGxhY2Vob2xkZXJUZXh0LFxuICAgICAgICAgICAgY29sb3JJY29uOiBzdHlsZXMuZmllbGRQbGFjZWhvbGRlclRleHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgbWFwSW5wdXRBcHBlYXJhbmNlUnVsZXMoc3R5bGVzOiBOb25OdWxsYWJsZTxTdHJpcGVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnNbJ3N0eWxlJ10+KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBib3JkZXJDb2xvcjogc3R5bGVzLmZpZWxkQm9yZGVyLFxuICAgICAgICAgICAgY29sb3I6IHN0eWxlcy5maWVsZFRleHQsXG4gICAgICAgICAgICBib3hTaGFkb3c6IHN0eWxlcy5maWVsZElubmVyU2hhZG93LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHRocm93U3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3I/OiB1bmtub3duKTogbmV2ZXIge1xuICAgICAgICBpZiAoaXNTdHJpcGVFcnJvcihzdHJpcGVFcnJvcikpIHtcbiAgICAgICAgICAgIHRoaXMudGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNDYW5jZWxsYXRpb25FcnJvcihzdHJpcGVFcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgfVxuXG4gICAgdGhyb3dEaXNwbGF5YWJsZVN0cmlwZUVycm9yKHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpbmNsdWRlcyhbJ2NhcmRfZXJyb3InLCAnaW52YWxpZF9yZXF1ZXN0X2Vycm9yJywgJ3ZhbGlkYXRpb25fZXJyb3InXSwgc3RyaXBlRXJyb3IudHlwZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RyaXBlRXJyb3IubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpc0NhbmNlbGxhdGlvbkVycm9yKHN0cmlwZUVycm9yPzogU3RyaXBlRXJyb3IpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gc3RyaXBlRXJyb3I/LnBheW1lbnRfaW50ZW50Lmxhc3RfcGF5bWVudF9lcnJvcj8ubWVzc2FnZTtcblxuICAgICAgICByZXR1cm4gISFlcnJvck1lc3NhZ2UgJiYgZXJyb3JNZXNzYWdlLmluZGV4T2YoJ2NhbmNlbGVkJykgIT09IC0xO1xuICAgIH1cblxuICAgIHRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCkge1xuICAgICAgICAvLyBJTkZPOiBmb3IgY2FzZSBpZiBwYXltZW50IHdhcyBzdWNjZXNzZnVsbHkgY29uZmlybWVkIG9uIFN0cmlwZSBzaWRlIGJ1dCBvbiBCQyBzaWRlIHNvbWV0aGluZyBnbyB3cm9uZywgcmVxdWVzdCBmYWlsZWQgYW5kIG9yZGVyIHN0YXR1cyBoYXNuJ3QgY2hhbmdlZCB5ZXRcbiAgICAgICAgLy8gRm9yIHNob3BwZXIgd2UgbmVlZCB0byBzaG93IGFkZGl0aW9uYWwgbWVzc2FnZSB0aGF0IEJDIGlzIHdhaXRpbmcgZm9yIHN0cmlwZSBjb25maXJtYXRpb24sIHRvIHByZXZlbnQgYWRkaXRpb25hbCBwYXltZW50IGNyZWF0aW9uXG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoXG4gICAgICAgICAgICBcIldlJ3ZlIHJlY2VpdmVkIHlvdXIgb3JkZXIgYW5kIGFyZSBwcm9jZXNzaW5nIHlvdXIgcGF5bWVudC4gT25jZSB0aGUgcGF5bWVudCBpcyB2ZXJpZmllZCwgeW91ciBvcmRlciB3aWxsIGJlIGNvbXBsZXRlZC4gV2Ugd2lsbCBzZW5kIHlvdSBhbiBlbWFpbCB3aGVuIGl0J3MgY29tcGxldGVkLiBQbGVhc2Ugbm90ZSwgdGhpcyBwcm9jZXNzIG1heSB0YWtlIGEgZmV3IG1pbnV0ZXMgZGVwZW5kaW5nIG9uIHRoZSBwcm9jZXNzaW5nIHRpbWVzIG9mIHlvdXIgY2hvc2VuIG1ldGhvZC5cIixcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyBpc1BheW1lbnRDb21wbGV0ZWQobWV0aG9kSWQ6IHN0cmluZywgc3RyaXBlVVBFQ2xpZW50PzogU3RyaXBlQ2xpZW50KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG4gICAgICAgIGNvbnN0IHsgZmVhdHVyZXMgfSA9IHN0YXRlLmdldFN0b3JlQ29uZmlnT3JUaHJvdygpLmNoZWNrb3V0U2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4gfHxcbiAgICAgICAgICAgICFzdHJpcGVVUEVDbGllbnQgfHxcbiAgICAgICAgICAgICFmZWF0dXJlc1snUEktNjI2LkJsb2NrX3VubmVjZXNzYXJ5X3BheW1lbnRfY29uZmlybWF0aW9uX2Zvcl9TdHJpcGVVUEUnXVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgc3RyaXBlVVBFQ2xpZW50LnJldHJpZXZlUGF5bWVudEludGVudChcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QuY2xpZW50VG9rZW4sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHBheW1lbnRJbnRlbnQ/LnN0YXR1cyA9PT0gU3RyaXBlUGF5bWVudEludGVudFN0YXR1cy5TVUNDRUVERUQ7XG4gICAgfVxuXG4gICAgbWFwU3RyaXBlUGF5bWVudERhdGEoXG4gICAgICAgIHN0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHMsXG4gICAgICAgIHJldHVyblVybD86IHN0cmluZyxcbiAgICAgICAgc2hvdWxkQWxsb3dSZWRpc3BsYXkgPSBmYWxzZSxcbiAgICApOiBTdHJpcGVDb25maXJtUGF5bWVudERhdGEge1xuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldEJpbGxpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IHsgZmlyc3ROYW1lID0gJycsIGxhc3ROYW1lID0gJycsIGVtYWlsID0gJycgfSA9IGJpbGxpbmdBZGRyZXNzIHx8IHt9O1xuICAgICAgICBjb25zdCBhZGRyZXNzID0gdGhpcy5fbWFwU3RyaXBlQWRkcmVzcyhiaWxsaW5nQWRkcmVzcyk7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZW1haWwgfHwgIWFkZHJlc3MgfHwgIWFkZHJlc3MuY2l0eSB8fCAhYWRkcmVzcy5jb3VudHJ5IHx8ICFmaXJzdE5hbWUgfHwgIWxhc3ROYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nQmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVsZW1lbnRzOiBzdHJpcGVFbGVtZW50cyxcbiAgICAgICAgICAgIHJlZGlyZWN0OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuSUZfUkVRVUlSRUQsXG4gICAgICAgICAgICBjb25maXJtUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgcGF5bWVudF9tZXRob2RfZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAuLi4oc2hvdWxkQWxsb3dSZWRpc3BsYXkgPyB7IGFsbG93X3JlZGlzcGxheTogJ2Fsd2F5cycgfSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC4uLihyZXR1cm5VcmwgJiYgeyByZXR1cm5fdXJsOiByZXR1cm5VcmwgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlzQWRkaXRpb25hbEFjdGlvbkVycm9yKGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmcgfT4pOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHNvbWUoZXJyb3JzLCB7IGNvZGU6ICdhZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZCcgfSk7XG4gICAgfVxuXG4gICAgaXNSZWRpcmVjdEFjdGlvbihhZGRpdGlvbmFsQWN0aW9uOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHsgcmVkaXJlY3RfdXJsIH0sXG4gICAgICAgIH0gPSBhZGRpdGlvbmFsQWN0aW9uO1xuXG4gICAgICAgIHJldHVybiB0eXBlID09PSAncmVkaXJlY3RfdG9fdXJsJyAmJiAhIXJlZGlyZWN0X3VybDtcbiAgICB9XG5cbiAgICBpc09uUGFnZUFkZGl0aW9uYWxBY3Rpb24oYWRkaXRpb25hbEFjdGlvbjogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBkYXRhOiB7IHRva2VuIH0sXG4gICAgICAgIH0gPSBhZGRpdGlvbmFsQWN0aW9uO1xuXG4gICAgICAgIHJldHVybiB0eXBlID09PSAnYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZXNfcGF5bWVudF9tZXRob2QnICYmICEhdG9rZW47XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQ6IHN0cmluZywgbWV0aG9kSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBJTkZPOiB0byB0cmlnZ2VyIHBheW1lbnQgaW50ZW50IHVwZGF0ZSBvbiB0aGUgQkUgc2lkZSB3ZSBuZWVkIHRvIG1ha2Ugc3RyaXBlIGNvbmZpZyByZXF1ZXN0XG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4gfSA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkKTtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICAvLyBJTkZPOiBubyBuZWVkIHRvIHVwZGF0ZSBTdHJpcGUgRWxlbWVudCBpZiBjbGllbnQgdG9rZW4gaXMgbm90IHByZXNlbnRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2NyaXB0TG9hZGVyLnVwZGF0ZVN0cmlwZUVsZW1lbnRzKHsgY2xpZW50U2VjcmV0OiBjbGllbnRUb2tlbiB9KTtcbiAgICB9XG5cbiAgICBnZXRTdHJpcGVKc1ZlcnNpb24oaW5pdGlhbGl6YXRpb25EYXRhOiBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEpOiBTdHJpcGVKc1ZlcnNpb24ge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6YXRpb25EYXRhLnVzZU5ld1N0cmlwZUpzVmVyc2lvblxuICAgICAgICAgICAgPyBTdHJpcGVKc1ZlcnNpb24uQ0xPVkVSXG4gICAgICAgICAgICA6IFN0cmlwZUpzVmVyc2lvbi5WMztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBTdHJpcGVBZGRyZXNzKGFkZHJlc3M/OiBBZGRyZXNzKTogQWRkcmVzc09wdGlvbnMge1xuICAgICAgICBpZiAoYWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICAgICAgYWRkcmVzczEsXG4gICAgICAgICAgICAgICAgYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgY291bnRyeUNvZGU6IGNvdW50cnksXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZSxcbiAgICAgICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlLFxuICAgICAgICAgICAgfSA9IGFkZHJlc3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2l0eSxcbiAgICAgICAgICAgICAgICBjb3VudHJ5LFxuICAgICAgICAgICAgICAgIHBvc3RhbF9jb2RlOiBwb3N0YWxDb2RlLFxuICAgICAgICAgICAgICAgIGxpbmUxOiBhZGRyZXNzMSxcbiAgICAgICAgICAgICAgICBsaW5lMjogYWRkcmVzczIsXG4gICAgICAgICAgICAgICAgLi4uKHN0YXRlT3JQcm92aW5jZUNvZGUgPyB7IHN0YXRlOiBzdGF0ZU9yUHJvdmluY2VDb2RlIH0gOiB7fSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ0JpbGxpbmdBZGRyZXNzKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdHJpcGVFcnJvciB9IGZyb20gJy4vc3RyaXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaXBlRXJyb3IoZXJyb3I6IHVua25vd24pOiBlcnJvciBpcyBTdHJpcGVFcnJvciB7XG4gICAgcmV0dXJuIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ3R5cGUnIGluIGVycm9yO1xufVxuIiwiaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICdAYmlnY29tbWVyY2UvcmVxdWVzdC1zZW5kZXInO1xuXG5pbXBvcnQgU3RhbmRhcmRFcnJvciBmcm9tICcuL3N0YW5kYXJkLWVycm9yJztcblxuY29uc3QgREVGQVVMVF9SRVNQT05TRSA9IHtcbiAgICBib2R5OiB7fSxcbiAgICBoZWFkZXJzOiB7fSxcbiAgICBzdGF0dXM6IDAsXG59O1xuXG4vKipcbiAqIFRocm93IHRoaXMgZXJyb3IgaWYgd2UgYXJlIHVuYWJsZSB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyLiBJdCB3cmFwc1xuICogYW55IHNlcnZlciByZXNwb25zZSBpbnRvIGEgSlMgZXJyb3Igb2JqZWN0LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZXF1ZXN0RXJyb3I8VEJvZHkgPSBhbnk+IGV4dGVuZHMgU3RhbmRhcmRFcnJvciB7XG4gICAgYm9keTogVEJvZHkgfCB7fTtcbiAgICBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAgIGVycm9yczogQXJyYXk8eyBjb2RlOiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT47XG4gICAgc3RhdHVzOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcmVzcG9uc2U/OiBSZXNwb25zZTxUQm9keSB8IHt9PixcbiAgICAgICAge1xuICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgfToge1xuICAgICAgICAgICAgbWVzc2FnZT86IHN0cmluZztcbiAgICAgICAgICAgIGVycm9ycz86IEFycmF5PHsgY29kZTogc3RyaW5nOyBtZXNzYWdlPzogc3RyaW5nIH0+O1xuICAgICAgICB9ID0ge30sXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSwgaGVhZGVycywgc3RhdHVzIH0gPSByZXNwb25zZSB8fCBERUZBVUxUX1JFU1BPTlNFO1xuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgfHwgJ0FuIHVuZXhwZWN0ZWQgZXJyb3IgaGFzIG9jY3VycmVkLicpO1xuXG4gICAgICAgIHRoaXMubmFtZSA9ICdSZXF1ZXN0RXJyb3InO1xuICAgICAgICB0aGlzLnR5cGUgPSAncmVxdWVzdCc7XG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQYXltZW50TWV0aG9kIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5cbmltcG9ydCB7IFN0cmlwZVBheW1lbnRNZXRob2QgfSBmcm9tICcuL3N0cmlwZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlKFxuICAgIHBheW1lbnRNZXRob2Q6IFBheW1lbnRNZXRob2QsXG4pOiBwYXltZW50TWV0aG9kIGlzIFN0cmlwZVBheW1lbnRNZXRob2Qge1xuICAgIHJldHVybiAoXG4gICAgICAgIHR5cGVvZiBwYXltZW50TWV0aG9kID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBwYXltZW50TWV0aG9kICE9PSBudWxsICYmXG4gICAgICAgICdpbml0aWFsaXphdGlvbkRhdGEnIGluIHBheW1lbnRNZXRob2QgJiZcbiAgICAgICAgKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhICE9PSBudWxsICYmXG4gICAgICAgIHR5cGVvZiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgPT09ICdvYmplY3QnICYmXG4gICAgICAgICdzdHJpcGVQdWJsaXNoYWJsZUtleScgaW4gKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhICYmXG4gICAgICAgICdzdHJpcGVDb25uZWN0ZWRBY2NvdW50JyBpbiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEgJiZcbiAgICAgICAgJ3Nob3BwZXJMYW5ndWFnZScgaW4gKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhICYmXG4gICAgICAgIHR5cGVvZiAocGF5bWVudE1ldGhvZCBhcyBTdHJpcGVQYXltZW50TWV0aG9kKS5pbml0aWFsaXphdGlvbkRhdGEuc3RyaXBlUHVibGlzaGFibGVLZXkgIT09XG4gICAgICAgICAgICAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhLnN0cmlwZUNvbm5lY3RlZEFjY291bnQgIT09XG4gICAgICAgICAgICAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgKHBheW1lbnRNZXRob2QgYXMgU3RyaXBlUGF5bWVudE1ldGhvZCkuaW5pdGlhbGl6YXRpb25EYXRhLnNob3BwZXJMYW5ndWFnZSAhPT1cbiAgICAgICAgICAgICd1bmRlZmluZWQnXG4gICAgKTtcbn1cbiIsImV4cG9ydCBjb25zdCBzdXBwb3J0ZWRMb2NhbGVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7XG4gICAgYXI6IFsnYXInXSxcbiAgICBiZzogWydiZyddLFxuICAgIGNzOiBbJ2NzJ10sXG4gICAgZGE6IFsnZGEnXSxcbiAgICBkZTogWydkZSddLFxuICAgIGVsOiBbJ2VsJ10sXG4gICAgZW46IFsnZW4nLCAnZW4tR0InXSxcbiAgICBlczogWydlcycsICdlcy00MTknXSxcbiAgICBldDogWydldCddLFxuICAgIGZpOiBbJ2ZpJ10sXG4gICAgZmlsOiBbJ2ZpbCddLFxuICAgIGZyOiBbJ2ZyJywgJ2ZyLUNBJ10sXG4gICAgaGU6IFsnaGUnXSxcbiAgICBocjogWydociddLFxuICAgIGh1OiBbJ2h1J10sXG4gICAgaWQ6IFsnaWQnXSxcbiAgICBpdDogWydpdCddLFxuICAgIGphOiBbJ2phJ10sXG4gICAga286IFsna28nXSxcbiAgICBsdDogWydsdCddLFxuICAgIGx2OiBbJ2x2J10sXG4gICAgbXM6IFsnbXMnXSxcbiAgICBtdDogWydtdCddLFxuICAgIG5iOiBbJ25iJ10sXG4gICAgbmw6IFsnbmwnXSxcbiAgICBwbDogWydwbCddLFxuICAgIHB0OiBbJ3B0JywgJ3B0LUJSJ10sXG4gICAgcm86IFsncm8nXSxcbiAgICBydTogWydydSddLFxuICAgIHNrOiBbJ3NrJ10sXG4gICAgc2w6IFsnc2wnXSxcbiAgICBzdjogWydzdiddLFxuICAgIHRoOiBbJ3RoJ10sXG4gICAgdHI6IFsndHInXSxcbiAgICB2aTogWyd2aSddLFxuICAgIHpoOiBbJ3poJywgJ3poLUhLJywgJ3poLVRXJ10sXG59O1xuIiwiaW1wb3J0IHsgc3VwcG9ydGVkTG9jYWxlcyB9IGZyb20gJy4vc3RyaXBlLXN1cHBvcnRlZC1sb2NhbGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZm9ybWF0TG9jYWxlKGxvY2FsZUxhbmd1YWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IFtsYW5ndWFnZSwgY291bnRyeV0gPSBsb2NhbGVMYW5ndWFnZS5yZXBsYWNlKC9fL2csICctJykudG9Mb3dlckNhc2UoKS5zcGxpdCgnLScpO1xuICAgIGNvbnN0IGNvdW50cnlMb2NhbGVzID0gc3VwcG9ydGVkTG9jYWxlc1tsYW5ndWFnZV07XG5cbiAgICBpZiAoIWNvdW50cnlMb2NhbGVzKSB7XG4gICAgICAgIHJldHVybiAnYXV0byc7XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0dGVkTG9jYWxlID0gY291bnRyeSA/IGAke2xhbmd1YWdlfS0ke2NvdW50cnkudG9VcHBlckNhc2UoKX1gIDogbGFuZ3VhZ2U7XG5cbiAgICByZXR1cm4gY291bnRyeUxvY2FsZXMuaW5kZXhPZihmb3JtYXR0ZWRMb2NhbGUpID4gLTEgPyBmb3JtYXR0ZWRMb2NhbGUgOiBjb3VudHJ5TG9jYWxlc1swXTtcbn1cbiIsImV4cG9ydCBjb25zdCBTVFJJUEVfVVBFX0NMSUVOVF9CRVRBUyA9IFtcbiAgICAncGF5bWVudF9lbGVtZW50X2JldGFfMicsXG4gICAgJ2FsaXBheV9wbV9iZXRhXzEnLFxuICAgICdsaW5rX2RlZmF1bHRfaW50ZWdyYXRpb25fYmV0YV8xJyxcbiAgICAnc2hpcHBpbmdfYWRkcmVzc19lbGVtZW50X2JldGFfMScsXG4gICAgJ2FkZHJlc3NfZWxlbWVudF9iZXRhXzEnLFxuXTtcblxuZXhwb3J0IGNvbnN0IFNUUklQRV9VUEVfQ0xJRU5UX0FQSV9WRVJTSU9OID0gJzIwMjAtMDMtMDI7YWxpcGF5X2JldGE9djE7bGlua19iZXRhPXYxJztcbiIsImltcG9ydCB7XG4gICAgUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgY3VzdG9tZXI6IFBheW1lbnRQcm92aWRlckN1c3RvbWVyLFxuKTogY3VzdG9tZXIgaXMgU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyIHtcbiAgICByZXR1cm4gJ3N0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlJyBpbiBjdXN0b21lcjtcbn1cbiIsImltcG9ydCB7IHNvbWUgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEZvcm1hdHRlZEhvc3RlZEluc3RydW1lbnQsXG4gICAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gICAgaXNIb3N0ZWRJbnN0cnVtZW50TGlrZSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBpc1ZhdWx0ZWRJbnN0cnVtZW50LFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgT3JkZXJSZXF1ZXN0Qm9keSxcbiAgICBQYXltZW50LFxuICAgIFBheW1lbnRBcmd1bWVudEludmFsaWRFcnJvcixcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG4gICAgUmVxdWVzdEVycm9yLFxuICAgIFN0cmlwZVVQRUludGVudCxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGZvcm1hdFN0cmlwZUxvY2FsZSxcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFNUUklQRV9VUEVfQ0xJRU5UX0FQSV9WRVJTSU9OLFxuICAgIFNUUklQRV9VUEVfQ0xJRU5UX0JFVEFTLFxuICAgIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCxcbiAgICBTdHJpcGVBcHBlYXJhbmNlT3B0aW9ucyxcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVsZW1lbnRVcGRhdGVPcHRpb25zLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZUpzVmVyc2lvbixcbiAgICBTdHJpcGVQYXltZW50TWV0aG9kVHlwZSxcbiAgICBTdHJpcGVSZXN1bHQsXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgIFN0cmlwZVN0cmluZ0NvbnN0YW50cyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgaXNTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIgZnJvbSAnLi9pcy1zdHJpcGUtYWNjZWxlcmF0ZWQtY2hlY2tvdXQtY3VzdG9tZXInO1xuaW1wb3J0IFN0cmlwZVVQRVBheW1lbnRJbml0aWFsaXplT3B0aW9ucywge1xuICAgIFdpdGhTdHJpcGVVUEVQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vc3RyaXBlLXVwZS1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVVUEVQYXltZW50U3RyYXRlZ3kgaW1wbGVtZW50cyBQYXltZW50U3RyYXRlZ3kge1xuICAgIHByaXZhdGUgX3N0cmlwZVVQRUNsaWVudD86IFN0cmlwZUNsaWVudDtcbiAgICBwcml2YXRlIF9zdHJpcGVFbGVtZW50cz86IFN0cmlwZUVsZW1lbnRzO1xuICAgIHByaXZhdGUgX2lzU3RyaXBlRWxlbWVudFVwZGF0ZUVuYWJsZWQ/OiBib29sZWFuO1xuICAgIHByaXZhdGUgX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM/OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBzdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2U6IFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICApIHt9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKFxuICAgICAgICBvcHRpb25zOiBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoU3RyaXBlVVBFUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHN0cmlwZXVwZSwgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIXN0cmlwZXVwZT8uY29udGFpbmVySWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgICdVbmFibGUgdG8gaW5pdGlhbGl6ZSBwYXltZW50IGJlY2F1c2UgXCJnYXRld2F5SWRcIiBhcmd1bWVudCBpcyBub3QgcHJvdmlkZWQuJyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9sb2FkU3RyaXBlRWxlbWVudChzdHJpcGV1cGUsIGdhdGV3YXlJZCwgbWV0aG9kSWQpLmNhdGNoKChlcnJvcikgPT5cbiAgICAgICAgICAgIHN0cmlwZXVwZS5vbkVycm9yPy4oZXJyb3IpLFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmluaXRDaGVja291dEV2ZW50c1N1YnNjcmlwdGlvbihcbiAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgc3RyaXBldXBlLFxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcblxuICAgICAgICBpZiAoIXBheW1lbnQgfHwgIXBheW1lbnQucGF5bWVudERhdGEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IoWydwYXltZW50LnBheW1lbnREYXRhJ10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9zdHJpcGVVUEVDbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHBheW1lbnREYXRhLCBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBwYXltZW50O1xuICAgICAgICBjb25zdCB7IHNob3VsZFNhdmVJbnN0cnVtZW50ID0gZmFsc2UsIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQgPSBmYWxzZSB9ID1cbiAgICAgICAgICAgIGlzSG9zdGVkSW5zdHJ1bWVudExpa2UocGF5bWVudERhdGEpID8gcGF5bWVudERhdGEgOiB7fTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBpc1N0b3JlQ3JlZGl0QXBwbGllZDogdXNlU3RvcmVDcmVkaXQgfSA9IHN0YXRlLmdldENoZWNrb3V0T3JUaHJvdygpO1xuICAgICAgICBjb25zdCBwYXltZW50UHJvdmlkZXJDdXN0b21lciA9IHN0YXRlLmdldFBheW1lbnRQcm92aWRlckN1c3RvbWVyT3JUaHJvdygpO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50UHJvdmlkZXJDdXN0b21lciA9IGlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyKFxuICAgICAgICAgICAgcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIsXG4gICAgICAgIClcbiAgICAgICAgICAgID8gcGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJcbiAgICAgICAgICAgIDoge307XG4gICAgICAgIGNvbnN0IHN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlID1cbiAgICAgICAgICAgIHN0cmlwZVBheW1lbnRQcm92aWRlckN1c3RvbWVyLnN0cmlwZUxpbmtBdXRoZW50aWNhdGlvblN0YXRlO1xuXG4gICAgICAgIGlmICh1c2VTdG9yZUNyZWRpdCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmFwcGx5U3RvcmVDcmVkaXQodXNlU3RvcmVDcmVkaXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdhdGV3YXlJZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU3RyaXBlUGF5bWVudEludGVudChnYXRld2F5SWQsIG1ldGhvZElkKTtcblxuICAgICAgICAgICAgY29uc3QgeyBlbWFpbCB9ID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG5cbiAgICAgICAgICAgIGlmIChzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZSAhPT0gdW5kZWZpbmVkICYmICFlbWFpbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gc3RhdGUuZ2V0QmlsbGluZ0FkZHJlc3NPclRocm93KCk7XG5cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoaXNWYXVsdGVkSW5zdHJ1bWVudChwYXltZW50RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgaW5zdHJ1bWVudElkIH0gPSBwYXltZW50RGF0YTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICAgICAgaW5zdHJ1bWVudElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLl9leGVjdXRlV2l0aFN0cmlwZUNvbmZpcm1hdGlvbihcbiAgICAgICAgICAgIHBheW1lbnQubWV0aG9kSWQsXG4gICAgICAgICAgICBzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZSA/IGZhbHNlIDogc2hvdWxkU2F2ZUluc3RydW1lbnQsXG4gICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZpbmFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IE9yZGVyRmluYWxpemF0aW9uTm90UmVxdWlyZWRFcnJvcigpKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzPy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLlBBWU1FTlQpPy51bm1vdW50KCk7XG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fc3RyaXBlVVBFQ2xpZW50ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9leGVjdXRlV2l0aFN0cmlwZUNvbmZpcm1hdGlvbihcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQ/OiBib29sZWFuLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50PzogYm9vbGVhbixcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBjbGllbnRUb2tlbiB9ID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBjbGllbnRUb2tlbiB8fCAnJyxcbiAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCxcbiAgICAgICAgKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb25XaXRoU3RyaXBlQ29uZmlybWF0aW9uKFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNhdmVJbnN0cnVtZW50LFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZXhlY3V0ZVdpdGhWYXVsdGVkKFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICB0b2tlbjogc3RyaW5nLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50OiBib29sZWFuLFxuICAgICk6IFByb21pc2U8UGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzIHwgdm9pZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQpO1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSBzdGF0ZS5nZXRDYXJ0KCk/LmlkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJ0X2lkOiBjYXJ0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWdwYXlfdG9rZW46IHsgdG9rZW4gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50X3Rva2VuOiBwYXltZW50TWV0aG9kLmNsaWVudFRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQ6IHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvY2Vzc1ZhdWx0ZWRBZGRpdGlvbmFsQWN0aW9uKFxuICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfbG9hZFN0cmlwZUVsZW1lbnQoXG4gICAgICAgIHN0cmlwZXVwZTogU3RyaXBlVVBFUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJJZCwgc3R5bGUsIHJlbmRlciwgaW5pdFN0cmlwZUVsZW1lbnRVcGRhdGVUcmlnZ2VyIH0gPSBzdHJpcGV1cGU7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdyhtZXRob2RJZCk7XG5cbiAgICAgICAgaWYgKCFpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlKHBheW1lbnRNZXRob2QpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuLCBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHNob3BwZXJMYW5ndWFnZSxcbiAgICAgICAgICAgIGFsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHMgPSBmYWxzZSxcbiAgICAgICAgICAgIGVuYWJsZUxpbmssXG4gICAgICAgIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgdGhpcy5fYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cyA9IGFsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHM7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3RyaXBlVVBFQ2xpZW50ID0gYXdhaXQgdGhpcy5fbG9hZFN0cmlwZUpzKGluaXRpYWxpemF0aW9uRGF0YSk7XG4gICAgICAgIHRoaXMuX2lzU3RyaXBlRWxlbWVudFVwZGF0ZUVuYWJsZWQgPSB0eXBlb2YgaW5pdFN0cmlwZUVsZW1lbnRVcGRhdGVUcmlnZ2VyID09PSAnZnVuY3Rpb24nO1xuXG4gICAgICAgIGxldCBhcHBlYXJhbmNlOiBTdHJpcGVBcHBlYXJhbmNlT3B0aW9ucyB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlcyA9IHN0eWxlO1xuXG4gICAgICAgICAgICBhcHBlYXJhbmNlID0ge1xuICAgICAgICAgICAgICAgIHZhcmlhYmxlczogdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwQXBwZWFyYW5jZVZhcmlhYmxlcyhzdHlsZSksXG4gICAgICAgICAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgJy5JbnB1dCc6IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcElucHV0QXBwZWFyYW5jZVJ1bGVzKHN0eWxlcyksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldEVsZW1lbnRzKHRoaXMuX3N0cmlwZVVQRUNsaWVudCwge1xuICAgICAgICAgICAgY2xpZW50U2VjcmV0OiBjbGllbnRUb2tlbixcbiAgICAgICAgICAgIGxvY2FsZTogZm9ybWF0U3RyaXBlTG9jYWxlKHNob3BwZXJMYW5ndWFnZSksXG4gICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB7IGdldEJpbGxpbmdBZGRyZXNzLCBnZXRTaGlwcGluZ0FkZHJlc3MgfSA9IHN0YXRlO1xuICAgICAgICBjb25zdCB7IHBvc3RhbENvZGUgfSA9IGdldFNoaXBwaW5nQWRkcmVzcygpIHx8IGdldEJpbGxpbmdBZGRyZXNzKCkgfHwge307XG5cbiAgICAgICAgY29uc3Qgc3RyaXBlRWxlbWVudDogU3RyaXBlRWxlbWVudCA9XG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLlBBWU1FTlQpIHx8XG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCwge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHBvc3RhbENvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3YWxsZXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBlbmFibGVMaW5rID8gU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE8gOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9nZXRTdHJpcGVFbGVtZW50VGVybXMoKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1vdW50RWxlbWVudChzdHJpcGVFbGVtZW50LCBjb250YWluZXJJZCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuUkVBRFksICgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5DSEFOR0UsIChldmVudDogU3RyaXBlRXZlbnRUeXBlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWV2ZW50Py52YWx1ZSB8fCAhKCd0eXBlJyBpbiBldmVudC52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVN0cmlwZUxpbmtTdGF0ZUJ5RWxlbWVudFR5cGUoZXZlbnQudmFsdWUudHlwZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkKSB7XG4gICAgICAgICAgICBpbml0U3RyaXBlRWxlbWVudFVwZGF0ZVRyaWdnZXI/Lih0aGlzLl91cGRhdGVTdHJpcGVFbGVtZW50LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb25XaXRoU3RyaXBlQ29uZmlybWF0aW9uKFxuICAgICAgICBlcnJvcjogdW5rbm93bixcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhaXNSZXF1ZXN0RXJyb3IoZXJyb3IpIHx8XG4gICAgICAgICAgICAhdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNBZGRpdGlvbmFsQWN0aW9uRXJyb3IoZXJyb3IuYm9keS5lcnJvcnMpXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuX3N0cmlwZVVQRUNsaWVudCB8fCAhdGhpcy5fc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGRhdGE6IGFkZGl0aW9uYWxBY3Rpb25EYXRhIH0gPSBlcnJvci5ib2R5LmFkZGl0aW9uYWxfYWN0aW9uX3JlcXVpcmVkO1xuICAgICAgICBjb25zdCB7IHRva2VuIH0gPSBhZGRpdGlvbmFsQWN0aW9uRGF0YTtcblxuICAgICAgICBjb25zdCB7IHBheW1lbnRJbnRlbnQgfSA9IGF3YWl0IHRoaXMuX2NvbmZpcm1TdHJpcGVQYXltZW50T3JUaHJvdyhcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkRhdGEsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLl9nZXRQYXltZW50UGF5bG9hZChcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudEludGVudD8uaWQgfHwgdG9rZW4sXG4gICAgICAgICAgICBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgIHNob3VsZFNldEFzRGVmYXVsdEluc3RydW1lbnQsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIGFkZGl0aW9uYWxBY3Rpb25EYXRhOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWRbJ2RhdGEnXSxcbiAgICApOiBQcm9taXNlPFN0cmlwZVJlc3VsdCB8IG5ldmVyPiB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4sIHJlZGlyZWN0X3VybCB9ID0gYWRkaXRpb25hbEFjdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHN0cmlwZVBheW1lbnREYXRhID0gdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEoXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybCxcbiAgICAgICAgICAgICEhdGhpcy5fYWxsb3dSZWRpc3BsYXlGb3JTdG9yZWRJbnN0cnVtZW50cyxcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXNQYXltZW50Q29tcGxldGVkID0gYXdhaXQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNQYXltZW50Q29tcGxldGVkKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRoaXMuX3N0cmlwZVVQRUNsaWVudCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9ICFpc1BheW1lbnRDb21wbGV0ZWRcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuX3N0cmlwZVVQRUNsaWVudD8uY29uZmlybVBheW1lbnQoc3RyaXBlUGF5bWVudERhdGEpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLl9zdHJpcGVVUEVDbGllbnQ/LnJldHJpZXZlUGF5bWVudEludGVudCh0b2tlbiB8fCAnJyk7XG5cbiAgICAgICAgICAgIHN0cmlwZUVycm9yID0gY29uZmlybWF0aW9uUmVzdWx0Py5lcnJvcjtcblxuICAgICAgICAgICAgaWYgKHN0cmlwZUVycm9yIHx8ICFjb25maXJtYXRpb25SZXN1bHQ/LnBheW1lbnRJbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb25maXJtYXRpb25SZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NWYXVsdGVkQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIG1ldGhvZElkPzogc3RyaW5nLFxuICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50ID0gZmFsc2UsXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMgfCBuZXZlcj4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhbWV0aG9kSWQgfHxcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICFzb21lKGVycm9yLmJvZHkuZXJyb3JzLCB7IGNvZGU6ICd0aHJlZV9kX3NlY3VyZV9yZXF1aXJlZCcgfSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fc3RyaXBlVVBFQ2xpZW50IHx8ICF0aGlzLl9zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IGVycm9yLmJvZHkudGhyZWVfZHNfcmVzdWx0LnRva2VuO1xuICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICBsZXQgY2F0Y2hlZENvbmZpcm1FcnJvciA9IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9zdHJpcGVVUEVDbGllbnQuY29uZmlybUNhcmRQYXltZW50KGNsaWVudFNlY3JldCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3N0cmlwZVVQRUNsaWVudC5yZXRyaWV2ZVBheW1lbnRJbnRlbnQoY2xpZW50U2VjcmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2F0Y2hlZENvbmZpcm1FcnJvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzdWx0Py5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dTdHJpcGVFcnJvcihyZXN1bHQuZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyZXN1bHQ/LnBheW1lbnRJbnRlbnQgJiYgIWNhdGNoZWRDb25maXJtRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZXF1ZXN0RXJyb3IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQoXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIGNhdGNoZWRDb25maXJtRXJyb3IgPyBjbGllbnRTZWNyZXQgOiByZXN1bHQ/LnBheW1lbnRJbnRlbnQ/LmlkLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfbG9hZFN0cmlwZUpzKFxuICAgICAgICBpbml0aWFsaXphdGlvbkRhdGE6IFN0cmlwZUluaXRpYWxpemF0aW9uRGF0YSxcbiAgICApOiBQcm9taXNlPFN0cmlwZUNsaWVudD4ge1xuICAgICAgICBpZiAodGhpcy5fc3RyaXBlVVBFQ2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RyaXBlVVBFQ2xpZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydExvY2FsZSgpLFxuICAgICAgICAgICAgU3RyaXBlSnNWZXJzaW9uLlYzLFxuICAgICAgICAgICAgU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMsXG4gICAgICAgICAgICBTVFJJUEVfVVBFX0NMSUVOVF9BUElfVkVSU0lPTixcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50UGF5bG9hZChcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgc2hvdWxkU2F2ZUluc3RydW1lbnQgPSBmYWxzZSxcbiAgICAgICAgc2hvdWxkU2V0QXNEZWZhdWx0SW5zdHJ1bWVudCA9IGZhbHNlLFxuICAgICk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmlkIHx8ICcnO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkOiBTdHJpcGVVUEVJbnRlbnQgJiBGb3JtYXR0ZWRIb3N0ZWRJbnN0cnVtZW50ID0ge1xuICAgICAgICAgICAgY2FydF9pZDogY2FydElkLFxuICAgICAgICAgICAgY3JlZGl0X2NhcmRfdG9rZW46IHsgdG9rZW4gfSxcbiAgICAgICAgICAgIGNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgIHNldF9hc19kZWZhdWx0X3N0b3JlZF9pbnN0cnVtZW50OiBzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50LFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlU3RyaXBlRWxlbWVudCh7IHNob3VsZFNob3dUZXJtcyB9OiBTdHJpcGVFbGVtZW50VXBkYXRlT3B0aW9ucyk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50ID0gdGhpcy5fc3RyaXBlRWxlbWVudHM/LmdldEVsZW1lbnQoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudD8udXBkYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2dldFN0cmlwZUVsZW1lbnRUZXJtcyhzaG91bGRTaG93VGVybXMpLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRTdHJpcGVFbGVtZW50VGVybXMoXG4gICAgICAgIHNob3VsZFNob3dUZXJtcz86IGJvb2xlYW4sXG4gICAgKTogUGljazxTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMsICd0ZXJtcyc+IHtcbiAgICAgICAgbGV0IGNhcmQgPSBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTztcblxuICAgICAgICBpZiAodGhpcy5faXNTdHJpcGVFbGVtZW50VXBkYXRlRW5hYmxlZCkge1xuICAgICAgICAgICAgY2FyZCA9IHNob3VsZFNob3dUZXJtcyA/IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPIDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRlcm1zOiB7XG4gICAgICAgICAgICAgICAgY2FyZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdXBkYXRlU3RyaXBlTGlua1N0YXRlQnlFbGVtZW50VHlwZShwYXltZW50RWxlbWVudFR5cGU6IFN0cmlwZVBheW1lbnRNZXRob2RUeXBlKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IGlzU3RyaXBlTGlua0VsZW1lbnRUeXBlID0gcGF5bWVudEVsZW1lbnRUeXBlID09PSBTdHJpcGVQYXltZW50TWV0aG9kVHlwZS5MaW5rO1xuXG4gICAgICAgIC8vIElORk86IFRyaWdnZXIgYWRkaXRpb25hbCB1cGRhdGUgb25seSBpZiBTdHJpcGUgTGluayBBdXRoZW50aWNhdGlvbiB3YXMgc2tpcHBlZCBvbiB0aGUgY3VzdG9tZXIgc3RlcCwgYnV0IHRoZSBMaW5rIHBheW1lbnQgZWxlbWVudCB3YXMgcmVuZGVyZWQuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1N0cmlwZUFjY2VsZXJhdGVkQ2hlY2tvdXRDdXN0b21lcihwYXltZW50UHJvdmlkZXJDdXN0b21lcikgJiZcbiAgICAgICAgICAgIGlzU3RyaXBlTGlua0VsZW1lbnRUeXBlXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICBzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZTogaXNTdHJpcGVMaW5rRWxlbWVudFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcblxuaW1wb3J0IFN0cmlwZVVQRVBheW1lbnRTdHJhdGVneSBmcm9tICcuL3N0cmlwZS11cGUtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZVVQRVBheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxTdHJpcGVVUEVQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBzdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIG5ldyBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgc3RyaXBlU2NyaXB0TG9hZGVyKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZVVQRVBheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ3N0cmlwZXVwZScgfSxcbiAgICB7IGdhdGV3YXk6ICdzdHJpcGV1cGUnLCBpZDogJ2tsYXJuYScgfSxcbl0pO1xuIiwiaW1wb3J0IHsgU3RyaXBlUGF5bWVudEV2ZW50IH0gZnJvbSAnLi9zdHJpcGUnO1xuXG5leHBvcnQgY29uc3QgaXNTdHJpcGVQYXltZW50RXZlbnQgPSAoZXZlbnQ6IHVua25vd24pOiBldmVudCBpcyBTdHJpcGVQYXltZW50RXZlbnQgPT4ge1xuICAgIHJldHVybiB0eXBlb2YgZXZlbnQgPT09ICdvYmplY3QnICYmIGV2ZW50ICE9PSBudWxsICYmICd2YWx1ZScgaW4gZXZlbnQgJiYgJ2NvbGxhcHNlZCcgaW4gZXZlbnQ7XG59O1xuIiwiaW1wb3J0IHtcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yLFxuICAgIE9yZGVyUmVxdWVzdEJvZHksXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VsZWN0b3JzLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yLFxuICAgIFBheW1lbnRSZXF1ZXN0T3B0aW9ucyxcbiAgICBQYXltZW50U3RyYXRlZ3ksXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBmb3JtYXRTdHJpcGVMb2NhbGUsXG4gICAgaXNTdHJpcGVQYXltZW50RXZlbnQsXG4gICAgaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZSxcbiAgICBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWQsXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnQsXG4gICAgU3RyaXBlRWxlbWVudEV2ZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgU3RyaXBlSW5zdHJ1bWVudFNldHVwRnV0dXJlVXNhZ2UsXG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZVBJUGF5bWVudE1ldGhvZE9wdGlvbnMsXG4gICAgU3RyaXBlUElQYXltZW50TWV0aG9kU2F2aW5nT3B0aW9ucyxcbiAgICBTdHJpcGVSZXN1bHQsXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgIFN0cmlwZVN0cmluZ0NvbnN0YW50cyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlT0NTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLCB7XG4gICAgV2l0aFN0cmlwZU9DU1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbn0gZnJvbSAnLi9zdHJpcGUtb2NzLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZU9DU1BheW1lbnRTdHJhdGVneSBpbXBsZW1lbnRzIFBheW1lbnRTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBzdHJpcGVDbGllbnQ/OiBTdHJpcGVDbGllbnQ7XG4gICAgcHJpdmF0ZSBzdHJpcGVFbGVtZW50cz86IFN0cmlwZUVsZW1lbnRzO1xuICAgIHByaXZhdGUgc2VsZWN0ZWRNZXRob2RJZD86IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlOiBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFN0cmlwZU9DU1BheW1lbnRJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBzdHJpcGVvY3MsIG1ldGhvZElkLCBnYXRld2F5SWQgfSA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKCFzdHJpcGVvY3M/LmNvbnRhaW5lcklkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiZ2F0ZXdheUlkXCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLicsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2luaXRpYWxpemVTdHJpcGVFbGVtZW50KHN0cmlwZW9jcywgZ2F0ZXdheUlkLCBtZXRob2RJZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgIHN0cmlwZW9jcy5vbkVycm9yPy4oZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaW5pdENoZWNrb3V0RXZlbnRzU3Vic2NyaXB0aW9uKFxuICAgICAgICAgICAgZ2F0ZXdheUlkLFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBzdHJpcGVvY3MsXG4gICAgICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUob3JkZXJSZXF1ZXN0OiBPcmRlclJlcXVlc3RCb2R5LCBvcHRpb25zPzogUGF5bWVudFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHsgcGF5bWVudCwgLi4ub3JkZXIgfSA9IG9yZGVyUmVxdWVzdDtcbiAgICAgICAgY29uc3QgeyBtZXRob2RJZCwgZ2F0ZXdheUlkIH0gPSBwYXltZW50IHx8IHt9O1xuXG4gICAgICAgIGlmICghdGhpcy5zdHJpcGVDbGllbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWdhdGV3YXlJZCB8fCAhbWV0aG9kSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGluaXRpYWxpemUgcGF5bWVudCBiZWNhdXNlIFwiZ2F0ZXdheUlkXCIgb3IgXCJtZXRob2RJZFwiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC4nLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaXNTdG9yZUNyZWRpdEFwcGxpZWQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZVxuICAgICAgICAgICAgLmdldFN0YXRlKClcbiAgICAgICAgICAgIC5nZXRDaGVja291dE9yVGhyb3coKTtcblxuICAgICAgICBpZiAoaXNTdG9yZUNyZWRpdEFwcGxpZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5hcHBseVN0b3JlQ3JlZGl0KGlzU3RvcmVDcmVkaXRBcHBsaWVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVN0cmlwZVBheW1lbnRJbnRlbnQoZ2F0ZXdheUlkLCBtZXRob2RJZCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKG9yZGVyLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLl9nZXRQYXltZW50UGF5bG9hZChtZXRob2RJZCwgY2xpZW50VG9rZW4gfHwgJycpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlcnJvciwgbWV0aG9kSWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZmluYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yKCkpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcGF5bWVudEVsZW1lbnQgPSB0aGlzLnN0cmlwZUVsZW1lbnRzPy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLlBBWU1FTlQpO1xuXG4gICAgICAgIHBheW1lbnRFbGVtZW50Py51bm1vdW50KCk7XG4gICAgICAgIHBheW1lbnRFbGVtZW50Py5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnN0cmlwZUNsaWVudCA9IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfaW5pdGlhbGl6ZVN0cmlwZUVsZW1lbnQoXG4gICAgICAgIHN0cmlwZTogU3RyaXBlT0NTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgbGV0IHBheW1lbnRNZXRob2QgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG5cbiAgICAgICAgaWYgKCFwYXltZW50TWV0aG9kPy5jbGllbnRUb2tlbikge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZ2F0ZXdheUlkLCB7XG4gICAgICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcbiAgICAgICAgY29uc3QgeyBzaG9wcGVyTGFuZ3VhZ2UsIGN1c3RvbWVyU2Vzc2lvblRva2VuLCBlbmFibGVMaW5rIH0gPSBpbml0aWFsaXphdGlvbkRhdGE7XG5cbiAgICAgICAgaWYgKCFjbGllbnRUb2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdHJpcGVDbGllbnQgPSBhd2FpdCB0aGlzLl9sb2FkU3RyaXBlSnMoaW5pdGlhbGl6YXRpb25EYXRhKTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgY29udGFpbmVySWQsXG4gICAgICAgICAgICBmb250cyxcbiAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgIHJlbmRlcixcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RTZWxlY3QsXG4gICAgICAgICAgICBoYW5kbGVDbG9zZVBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICB0b2dnbGVQcmVsb2FkZXIsXG4gICAgICAgIH0gPSBzdHJpcGU7XG5cbiAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cyA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldEVsZW1lbnRzKHRoaXMuc3RyaXBlQ2xpZW50LCB7XG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgY3VzdG9tZXJTZXNzaW9uQ2xpZW50U2VjcmV0OiBjdXN0b21lclNlc3Npb25Ub2tlbixcbiAgICAgICAgICAgIGxvY2FsZTogZm9ybWF0U3RyaXBlTG9jYWxlKHNob3BwZXJMYW5ndWFnZSksXG4gICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgZm9udHMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHsgZ2V0QmlsbGluZ0FkZHJlc3MsIGdldFNoaXBwaW5nQWRkcmVzcyB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gZ2V0QmlsbGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgeyBwb3N0YWxDb2RlIH0gPSBnZXRTaGlwcGluZ0FkZHJlc3MoKSB8fCBiaWxsaW5nQWRkcmVzcyB8fCB7fTtcblxuICAgICAgICBjb25zdCBzdHJpcGVFbGVtZW50OiBTdHJpcGVFbGVtZW50ID1cbiAgICAgICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZ2V0RWxlbWVudChTdHJpcGVFbGVtZW50VHlwZS5QQVlNRU5UKSB8fFxuICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cy5jcmVhdGUoU3RyaXBlRWxlbWVudFR5cGUuUEFZTUVOVCwge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgICAgICBiaWxsaW5nRGV0YWlsczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHBvc3RhbENvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3YWxsZXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGxlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBlbmFibGVMaW5rID8gU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE8gOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYXlvdXQsXG4gICAgICAgICAgICAgICAgc2F2ZVBheW1lbnRNZXRob2Q6IHtcbiAgICAgICAgICAgICAgICAgICAgbWF4VmlzaWJsZVBheW1lbnRNZXRob2RzOiAyMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgYmlsbGluZ0RldGFpbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBiaWxsaW5nQWRkcmVzcz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1vdW50RWxlbWVudChzdHJpcGVFbGVtZW50LCBjb250YWluZXJJZCk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuTE9BREVSX1NUQVJULCAoKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGVQcmVsb2FkZXI/LihmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LlJFQURZLCAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc3RyaXBlRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ0hBTkdFLCAoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25TdHJpcGVFbGVtZW50Q2hhbmdlKGV2ZW50LCBnYXRld2F5SWQsIG1ldGhvZElkLCBwYXltZW50TWV0aG9kU2VsZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaGFuZGxlQ2xvc2VQYXltZW50TWV0aG9kPy4odGhpcy5fY29sbGFwc2VTdHJpcGVFbGVtZW50LmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2xvYWRTdHJpcGVKcyhcbiAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhOiBTdHJpcGVJbml0aWFsaXphdGlvbkRhdGEsXG4gICAgKTogUHJvbWlzZTxTdHJpcGVDbGllbnQ+IHtcbiAgICAgICAgaWYgKHRoaXMuc3RyaXBlQ2xpZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpcGVDbGllbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBzdHJpcGVKc1ZlcnNpb24gPVxuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RyaXBlSnNWZXJzaW9uKGluaXRpYWxpemF0aW9uRGF0YSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRMb2NhbGUoKSxcbiAgICAgICAgICAgIHN0cmlwZUpzVmVyc2lvbixcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jb2xsYXBzZVN0cmlwZUVsZW1lbnQoKSB7XG4gICAgICAgIGNvbnN0IHN0cmlwZUVsZW1lbnQgPSB0aGlzLnN0cmlwZUVsZW1lbnRzPy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLlBBWU1FTlQpO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQ/LmNvbGxhcHNlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0UGF5bWVudFBheWxvYWQoXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgICAgIHRva2VuOiBzdHJpbmcsXG4gICAgICAgIHBheW1lbnRNZXRob2RPcHRpb25zPzogU3RyaXBlUElQYXltZW50TWV0aG9kT3B0aW9ucyxcbiAgICApOiBQYXltZW50IHtcbiAgICAgICAgY29uc3QgY2FydElkID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCkuZ2V0Q2FydCgpPy5pZCB8fCAnJztcbiAgICAgICAgY29uc3QgeyBjYXJkLCB1c19iYW5rX2FjY291bnQgfSA9IHBheW1lbnRNZXRob2RPcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBzaG91bGRTYXZlSW5zdHJ1bWVudCA9XG4gICAgICAgICAgICB0aGlzLl9zaG91bGRTYXZlSW5zdHJ1bWVudChjYXJkKSB8fCB0aGlzLl9zaG91bGRTYXZlSW5zdHJ1bWVudCh1c19iYW5rX2FjY291bnQpO1xuICAgICAgICBjb25zdCB0b2tlbml6ZWRPcHRpb25zID0gdGhpcy5fZ2V0VG9rZW5pemVkT3B0aW9ucyh0b2tlbiwgcGF5bWVudE1ldGhvZE9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBheWxvYWQgPSB7XG4gICAgICAgICAgICBjYXJ0X2lkOiBjYXJ0SWQsXG4gICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGhvZDogdGhpcy5zZWxlY3RlZE1ldGhvZElkLFxuICAgICAgICAgICAgdmF1bHRfcGF5bWVudF9pbnN0cnVtZW50OiBzaG91bGRTYXZlSW5zdHJ1bWVudCxcbiAgICAgICAgICAgIC4uLnRva2VuaXplZE9wdGlvbnMsXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgcGF5bWVudERhdGE6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRQYXlsb2FkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihcbiAgICAgICAgZXJyb3I6IHVua25vd24sXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxQYXltZW50SW50ZWdyYXRpb25TZWxlY3RvcnMgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzQWRkaXRpb25hbEFjdGlvbkVycm9yKGVycm9yLmJvZHkuZXJyb3JzKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnN0cmlwZUNsaWVudCB8fCAhdGhpcy5zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWRkaXRpb25hbEFjdGlvbkRhdGEgfSA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2xpZW50X3NlY3JldDogcGF5bWVudEludGVudENsaWVudFNlY3JldCxcbiAgICAgICAgICAgIHBheW1lbnRfbWV0aG9kX29wdGlvbnM6IHBheW1lbnRNZXRob2RPcHRpb25zLFxuICAgICAgICB9ID0gcGF5bWVudEludGVudCB8fCB7fTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKFxuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50SW50ZW50Q2xpZW50U2VjcmV0IHx8IHRva2VuLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZE9wdGlvbnMsXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1BheW1lbnRDb25maXJtYXRpb25Qcm9jZWVkTWVzc2FnZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YTogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkWydkYXRhJ10sXG4gICAgKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQgfCBuZXZlcj4ge1xuICAgICAgICBjb25zdCB7IHRva2VuLCByZWRpcmVjdF91cmwgfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50RGF0YSA9IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cyxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybCxcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXNQYXltZW50Q29tcGxldGVkID0gYXdhaXQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNQYXltZW50Q29tcGxldGVkKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRoaXMuc3RyaXBlQ2xpZW50LFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gIWlzUGF5bWVudENvbXBsZXRlZFxuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5zdHJpcGVDbGllbnQ/LmNvbmZpcm1QYXltZW50KHN0cmlwZVBheW1lbnREYXRhKVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5zdHJpcGVDbGllbnQ/LnJldHJpZXZlUGF5bWVudEludGVudCh0b2tlbiB8fCAnJyk7XG5cbiAgICAgICAgICAgIHN0cmlwZUVycm9yID0gY29uZmlybWF0aW9uUmVzdWx0Py5lcnJvcjtcblxuICAgICAgICAgICAgaWYgKHN0cmlwZUVycm9yIHx8ICFjb25maXJtYXRpb25SZXN1bHQ/LnBheW1lbnRJbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb25maXJtYXRpb25SZXN1bHQ7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiB1bmtub3duKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dTdHJpcGVFcnJvcihzdHJpcGVFcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9vblN0cmlwZUVsZW1lbnRDaGFuZ2UoXG4gICAgICAgIGV2ZW50OiBTdHJpcGVFdmVudFR5cGUsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50TWV0aG9kU2VsZWN0PzogKGlkOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50RXZlbnQoZXZlbnQpIHx8IGV2ZW50LmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZWxlY3RlZE1ldGhvZElkID0gZXZlbnQudmFsdWUudHlwZTtcbiAgICAgICAgcGF5bWVudE1ldGhvZFNlbGVjdD8uKGAke2dhdGV3YXlJZH0tJHttZXRob2RJZH1gKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9zaG91bGRTYXZlSW5zdHJ1bWVudChwYXltZW50TWV0aG9kT3B0aW9ucz86IFN0cmlwZVBJUGF5bWVudE1ldGhvZFNhdmluZ09wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2V0dXBGdXR1cmVVc2FnZSA9IHBheW1lbnRNZXRob2RPcHRpb25zPy5zZXR1cF9mdXR1cmVfdXNhZ2U7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHNldHVwRnV0dXJlVXNhZ2UgPT09IFN0cmlwZUluc3RydW1lbnRTZXR1cEZ1dHVyZVVzYWdlLk9OX1NFU1NJT04gfHxcbiAgICAgICAgICAgIHNldHVwRnV0dXJlVXNhZ2UgPT09IFN0cmlwZUluc3RydW1lbnRTZXR1cEZ1dHVyZVVzYWdlLk9GRl9TRVNTSU9OXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0VG9rZW5pemVkT3B0aW9ucyhcbiAgICAgICAgdG9rZW46IHN0cmluZyxcbiAgICAgICAgcGF5bWVudE1ldGhvZE9wdGlvbnM/OiBTdHJpcGVQSVBheW1lbnRNZXRob2RPcHRpb25zLFxuICAgICkge1xuICAgICAgICBpZiAodGhpcy5fc2hvdWxkU2F2ZUluc3RydW1lbnQocGF5bWVudE1ldGhvZE9wdGlvbnM/LnVzX2JhbmtfYWNjb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHRva2VuaXplZF9hY2g6IHsgdG9rZW4gfSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgY3JlZGl0X2NhcmRfdG9rZW46IHsgdG9rZW4gfSB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBQYXltZW50U3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICBTdHJpcGVTY3JpcHRMb2FkZXIsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcblxuaW1wb3J0IFN0cmlwZU9DU1BheW1lbnRTdHJhdGVneSBmcm9tICcuL3N0cmlwZS1vY3MtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZU9DU1BheW1lbnRTdHJhdGVneTogUGF5bWVudFN0cmF0ZWd5RmFjdG9yeTxTdHJpcGVPQ1NQYXltZW50U3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlT0NTUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBzdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIG5ldyBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgc3RyaXBlU2NyaXB0TG9hZGVyKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZU9DU1BheW1lbnRTdHJhdGVneSwgW1xuICAgIHsgZ2F0ZXdheTogJ3N0cmlwZW9jcycsIGlkOiAnb3B0aW1pemVkX2NoZWNrb3V0JyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvcixcbiAgICBOb3RJbml0aWFsaXplZEVycm9yVHlwZSxcbiAgICBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IsXG4gICAgUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgIFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgUGF5bWVudFN0cmF0ZWd5LFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgaXNTdHJpcGVQYXltZW50RXZlbnQsXG4gICAgaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZSxcbiAgICBTdHJpcGVDaGVja291dFNlc3Npb24sXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnQsXG4gICAgU3RyaXBlRWxlbWVudEV2ZW50LFxuICAgIFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyxcbiAgICBTdHJpcGVFdmVudFR5cGUsXG4gICAgU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgIFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICBTdHJpcGVKc1ZlcnNpb24sXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgIFN0cmlwZVN0cmluZ0NvbnN0YW50cyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsIHtcbiAgICBXaXRoU3RyaXBlQ1NQYXltZW50SW5pdGlhbGl6ZU9wdGlvbnMsXG59IGZyb20gJy4vc3RyaXBlLWNzLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5IGltcGxlbWVudHMgUGF5bWVudFN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIHN0cmlwZUNsaWVudD86IFN0cmlwZUNsaWVudDtcbiAgICBwcml2YXRlIHN0cmlwZUNoZWNrb3V0U2Vzc2lvbj86IFN0cmlwZUNoZWNrb3V0U2Vzc2lvbjtcbiAgICAvLyBwcml2YXRlIHNlbGVjdGVkTWV0aG9kSWQ/OiBzdHJpbmc7IC8vIFRPRE86IHRlbXBvcmFyeSBjb21tZW50ZWQsIHdpbGwgYmUgdXNlZCBpbiB0aGUgc3RyYXRlZ3kgZXhlY3V0ZSBtZXRob2RcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2NyaXB0TG9hZGVyOiBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlOiBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogUGF5bWVudEluaXRpYWxpemVPcHRpb25zICYgV2l0aFN0cmlwZUNTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHN0cmlwZW9jcywgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gb3B0aW9ucztcblxuICAgICAgICBpZiAoIXN0cmlwZW9jcz8uY29udGFpbmVySWQgfHwgIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9pbml0aWFsaXplU3RyaXBlRWxlbWVudChzdHJpcGVvY3MsIGdhdGV3YXlJZCwgbWV0aG9kSWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzdHJpcGVvY3Mub25FcnJvcj8uKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGV4ZWN1dGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBmaW5hbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBPcmRlckZpbmFsaXphdGlvbk5vdFJlcXVpcmVkRXJyb3IoKSk7XG4gICAgfVxuXG4gICAgZGVpbml0aWFsaXplKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBwYXltZW50RWxlbWVudCA9IHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uPy5nZXRQYXltZW50RWxlbWVudCgpO1xuXG4gICAgICAgIHBheW1lbnRFbGVtZW50Py51bm1vdW50KCk7XG4gICAgICAgIHBheW1lbnRFbGVtZW50Py5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmRlaW5pdGlhbGl6ZSgpO1xuICAgICAgICB0aGlzLnN0cmlwZUNoZWNrb3V0U2Vzc2lvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5zdHJpcGVDbGllbnQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2luaXRpYWxpemVTdHJpcGVFbGVtZW50KFxuICAgICAgICBzdHJpcGU6IFN0cmlwZUNTUGF5bWVudEluaXRpYWxpemVPcHRpb25zLFxuICAgICAgICBnYXRld2F5SWQ6IHN0cmluZyxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgbGV0IHBheW1lbnRNZXRob2QgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgIC5nZXRTdGF0ZSgpXG4gICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3c8U3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhPihtZXRob2RJZCwgZ2F0ZXdheUlkKTtcblxuICAgICAgICBpZiAoIXBheW1lbnRNZXRob2Q/LmNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgICAgICBwYXJhbXM6IHsgbWV0aG9kOiBtZXRob2RJZCB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHBheW1lbnRNZXRob2QgPSBzdGF0ZS5nZXRQYXltZW50TWV0aG9kT3JUaHJvdzxTdHJpcGVJbml0aWFsaXphdGlvbkRhdGE+KFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIGdhdGV3YXlJZCxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY2xpZW50VG9rZW4sIGluaXRpYWxpemF0aW9uRGF0YSB9ID0gcGF5bWVudE1ldGhvZDtcblxuICAgICAgICBpZiAoIWNsaWVudFRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTWlzc2luZ0RhdGFFcnJvcihNaXNzaW5nRGF0YUVycm9yVHlwZS5NaXNzaW5nUGF5bWVudE1ldGhvZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0cmlwZUNsaWVudCA9IGF3YWl0IHRoaXMuX2xvYWRTdHJpcGVKcyhpbml0aWFsaXphdGlvbkRhdGEpO1xuXG4gICAgICAgIGNvbnN0IHsgZW5hYmxlTGluayB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBhcHBlYXJhbmNlLFxuICAgICAgICAgICAgY29udGFpbmVySWQsXG4gICAgICAgICAgICBmb250cyxcbiAgICAgICAgICAgIGxheW91dCxcbiAgICAgICAgICAgIHJlbmRlcixcbiAgICAgICAgICAgIHBheW1lbnRNZXRob2RTZWxlY3QsXG4gICAgICAgICAgICBoYW5kbGVDbG9zZVBheW1lbnRNZXRob2QsXG4gICAgICAgICAgICB0b2dnbGVQcmVsb2FkZXIsXG4gICAgICAgIH0gPSBzdHJpcGU7XG5cbiAgICAgICAgY29uc3QgeyBnZXRCaWxsaW5nQWRkcmVzcywgZ2V0U2hpcHBpbmdBZGRyZXNzIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSBnZXRCaWxsaW5nQWRkcmVzcygpO1xuICAgICAgICBjb25zdCB7IHBvc3RhbENvZGUgfSA9IGdldFNoaXBwaW5nQWRkcmVzcygpIHx8IGJpbGxpbmdBZGRyZXNzIHx8IHt9O1xuXG4gICAgICAgIHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uID0gYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0Q2hlY2tvdXRTZXNzaW9uKHRoaXMuc3RyaXBlQ2xpZW50LCB7XG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IGNsaWVudFRva2VuLFxuICAgICAgICAgICAgZWxlbWVudHNPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgYXBwZWFyYW5jZSxcbiAgICAgICAgICAgICAgICBmb250cyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGFwdGl2ZVByaWNpbmc6IHtcbiAgICAgICAgICAgICAgICBhbGxvd2VkOiBmYWxzZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWVzOiB7XG4gICAgICAgICAgICAgICAgZW1haWw6IGJpbGxpbmdBZGRyZXNzPy5lbWFpbCB8fCAnJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHN0cmlwZUVsZW1lbnQgPSB0aGlzLl9jcmVhdGVTdHJpcGVFbGVtZW50KHtcbiAgICAgICAgICAgIGZpZWxkczoge1xuICAgICAgICAgICAgICAgIGJpbGxpbmdEZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50cnk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNpdHk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RhbENvZGU6IHBvc3RhbENvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE8sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3YWxsZXRzOiB7XG4gICAgICAgICAgICAgICAgYXBwbGVQYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICBnb29nbGVQYXk6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5ORVZFUixcbiAgICAgICAgICAgICAgICBsaW5rOiBlbmFibGVMaW5rID8gU3RyaXBlU3RyaW5nQ29uc3RhbnRzLkFVVE8gOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGF5b3V0LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXN0cmlwZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5tb3VudEVsZW1lbnQoc3RyaXBlRWxlbWVudCwgY29udGFpbmVySWQpO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LkxPQURFUl9TVEFSVCwgKCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlUHJlbG9hZGVyPy4oZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdHJpcGVFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5SRUFEWSwgKCkgPT4ge1xuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LkNIQU5HRSwgKGV2ZW50OiBTdHJpcGVFdmVudFR5cGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX29uU3RyaXBlRWxlbWVudENoYW5nZShldmVudCwgZ2F0ZXdheUlkLCBtZXRob2RJZCwgcGF5bWVudE1ldGhvZFNlbGVjdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGhhbmRsZUNsb3NlUGF5bWVudE1ldGhvZD8uKHRoaXMuX2NvbGxhcHNlU3RyaXBlRWxlbWVudC5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9sb2FkU3RyaXBlSnMoXG4gICAgICAgIGluaXRpYWxpemF0aW9uRGF0YTogU3RyaXBlSW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICk6IFByb21pc2U8U3RyaXBlQ2xpZW50PiB7XG4gICAgICAgIGlmICh0aGlzLnN0cmlwZUNsaWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlQ2xpZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5zY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KFxuICAgICAgICAgICAgaW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICAgICAgc3RhdGUuZ2V0Q2FydExvY2FsZSgpLFxuICAgICAgICAgICAgU3RyaXBlSnNWZXJzaW9uLkNMT1ZFUixcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9jcmVhdGVTdHJpcGVFbGVtZW50KG9wdGlvbnM/OiBTdHJpcGVFbGVtZW50c0NyZWF0ZU9wdGlvbnMpOiBTdHJpcGVFbGVtZW50IHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uPy5nZXRQYXltZW50RWxlbWVudCgpIHx8XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUNoZWNrb3V0U2Vzc2lvbj8uY3JlYXRlUGF5bWVudEVsZW1lbnQob3B0aW9ucylcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9vblN0cmlwZUVsZW1lbnRDaGFuZ2UoXG4gICAgICAgIGV2ZW50OiBTdHJpcGVFdmVudFR5cGUsXG4gICAgICAgIGdhdGV3YXlJZDogc3RyaW5nLFxuICAgICAgICBtZXRob2RJZDogc3RyaW5nLFxuICAgICAgICBwYXltZW50TWV0aG9kU2VsZWN0PzogKGlkOiBzdHJpbmcpID0+IHZvaWQsXG4gICAgKSB7XG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50RXZlbnQoZXZlbnQpIHx8IGV2ZW50LmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogdGVtcG9yYXJ5IGNvbW1lbnRlZCwgd2lsbCBiZSB1c2VkIGluIHRoZSBzdHJhdGVneSBleGVjdXRlIG1ldGhvZFxuICAgICAgICAvLyB0aGlzLnNlbGVjdGVkTWV0aG9kSWQgPSBldmVudC52YWx1ZS50eXBlO1xuICAgICAgICBwYXltZW50TWV0aG9kU2VsZWN0Py4oYCR7Z2F0ZXdheUlkfS0ke21ldGhvZElkfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2NvbGxhcHNlU3RyaXBlRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3Qgc3RyaXBlRWxlbWVudCA9IHRoaXMuc3RyaXBlQ2hlY2tvdXRTZXNzaW9uPy5nZXRQYXltZW50RWxlbWVudCgpO1xuXG4gICAgICAgIHN0cmlwZUVsZW1lbnQ/LmNvbGxhcHNlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIFBheW1lbnRTdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgU3RyaXBlQ1NQYXltZW50U3RyYXRlZ3kgZnJvbSAnLi9zdHJpcGUtY3MtcGF5bWVudC1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5OiBQYXltZW50U3RyYXRlZ3lGYWN0b3J5PFN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5PiA9IChcbiAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuKSA9PiB7XG4gICAgY29uc3Qgc3RyaXBlU2NyaXB0TG9hZGVyID0gbmV3IFN0cmlwZVNjcmlwdExvYWRlcihnZXRTY3JpcHRMb2FkZXIoKSk7XG5cbiAgICByZXR1cm4gbmV3IFN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5KFxuICAgICAgICBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBzdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgICAgIG5ldyBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UocGF5bWVudEludGVncmF0aW9uU2VydmljZSwgc3RyaXBlU2NyaXB0TG9hZGVyKSxcbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdG9SZXNvbHZhYmxlTW9kdWxlKGNyZWF0ZVN0cmlwZUNTUGF5bWVudFN0cmF0ZWd5LCBbXG4gICAgeyBnYXRld2F5OiAnc3RyaXBlb2NzJywgaWQ6ICdjaGVja291dF9zZXNzaW9uJyB9LFxuXSk7XG4iLCJpbXBvcnQge1xuICAgIEN1c3RvbWVyQ3JlZGVudGlhbHMsXG4gICAgQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICBDdXN0b21lclN0cmF0ZWd5LFxuICAgIEV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXRPcHRpb25zLFxuICAgIEludmFsaWRBcmd1bWVudEVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3IsXG4gICAgTWlzc2luZ0RhdGFFcnJvclR5cGUsXG4gICAgUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICBSZXF1ZXN0T3B0aW9ucyxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQge1xuICAgIGlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UsXG4gICAgU1RSSVBFX1VQRV9DTElFTlRfQVBJX1ZFUlNJT04sXG4gICAgU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMsXG4gICAgU3RyaXBlQXBwZWFyYW5jZU9wdGlvbnMsXG4gICAgU3RyaXBlQ2xpZW50LFxuICAgIFN0cmlwZUVsZW1lbnRFdmVudCxcbiAgICBTdHJpcGVFbGVtZW50cyxcbiAgICBTdHJpcGVFbGVtZW50VHlwZSxcbiAgICBTdHJpcGVFdmVudFR5cGUsXG4gICAgU3RyaXBlRm9ybU1vZGUsXG4gICAgU3RyaXBlSnNWZXJzaW9uLFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuXG5pbXBvcnQgaXNTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIgZnJvbSAnLi9pcy1zdHJpcGUtYWNjZWxlcmF0ZWQtY2hlY2tvdXQtY3VzdG9tZXInO1xuaW1wb3J0IHsgV2l0aFN0cmlwZVVQRUN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMgfSBmcm9tICcuL3N0cmlwZXVwZS1jdXN0b21lci1pbml0aWFsaXplLW9wdGlvbnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5IGltcGxlbWVudHMgQ3VzdG9tZXJTdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfc3RyaXBlRWxlbWVudHM/OiBTdHJpcGVFbGVtZW50cztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2U6IFBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgc2NyaXB0TG9hZGVyOiBTdHJpcGVTY3JpcHRMb2FkZXIsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhTdHJpcGVVUEVDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBsZXQgc3RyaXBlVVBFQ2xpZW50OiBTdHJpcGVDbGllbnQ7XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLnN0cmlwZXVwZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9uc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBnYXRld2F5SWQsIG1ldGhvZElkLCBvbkVtYWlsQ2hhbmdlLCBnZXRTdHlsZXMsIGlzTG9hZGluZyB9ID1cbiAgICAgICAgICAgIG9wdGlvbnMuc3RyaXBldXBlO1xuXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuc3RyaXBldXBlKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwiJHtrZXl9XCIgYXJndW1lbnQgaXMgbm90IHByb3ZpZGVkLmAsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRQYXltZW50TWV0aG9kKGdhdGV3YXlJZCwge1xuICAgICAgICAgICAgcGFyYW1zOiB7IG1ldGhvZDogbWV0aG9kSWQgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuICAgICAgICBjb25zdCB7IGNsaWVudFRva2VuIH0gPSBwYXltZW50TWV0aG9kO1xuXG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZShwYXltZW50TWV0aG9kKSB8fCAhY2xpZW50VG9rZW4pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50VG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBlbWFpbCB9ID0gc3RhdGUuZ2V0Q3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gc3RhdGUuZ2V0UGF5bWVudFByb3ZpZGVyQ3VzdG9tZXJPclRocm93KCk7XG4gICAgICAgIGNvbnN0IHN0cmlwZVBheW1lbnRQcm92aWRlckN1c3RvbWVyID0gaXNTdHJpcGVBY2NlbGVyYXRlZENoZWNrb3V0Q3VzdG9tZXIoXG4gICAgICAgICAgICBwYXltZW50UHJvdmlkZXJDdXN0b21lcixcbiAgICAgICAgKVxuICAgICAgICAgICAgPyBwYXltZW50UHJvdmlkZXJDdXN0b21lclxuICAgICAgICAgICAgOiB7fTtcbiAgICAgICAgY29uc3Qgc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGUgPVxuICAgICAgICAgICAgc3RyaXBlUGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIuc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGU7XG5cbiAgICAgICAgaWYgKCFlbWFpbCkge1xuICAgICAgICAgICAgbGV0IGFwcGVhcmFuY2U6IFN0cmlwZUFwcGVhcmFuY2VPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gdHlwZW9mIGdldFN0eWxlcyA9PT0gJ2Z1bmN0aW9uJyAmJiBnZXRTdHlsZXMoKTtcblxuICAgICAgICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2UgPSB7XG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQcmltYXJ5OiBzdHlsZXMuZmllbGRJbm5lclNoYWRvdyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQmFja2dyb3VuZDogc3R5bGVzLmZpZWxkQmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yVGV4dDogc3R5bGVzLmxhYmVsVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yRGFuZ2VyOiBzdHlsZXMuZmllbGRFcnJvclRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclRleHRTZWNvbmRhcnk6IHN0eWxlcy5sYWJlbFRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclRleHRQbGFjZWhvbGRlcjogc3R5bGVzLmZpZWxkUGxhY2Vob2xkZXJUZXh0LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBydWxlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJy5JbnB1dCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogc3R5bGVzLmZpZWxkQm9yZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBzdHlsZXMuZmllbGRUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzogc3R5bGVzLmZpZWxkSW5uZXJTaGFkb3csXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2UgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3RyaXBlVVBFQ2xpZW50ID0gYXdhaXQgdGhpcy5zY3JpcHRMb2FkZXIuZ2V0U3RyaXBlQ2xpZW50KFxuICAgICAgICAgICAgICAgIHBheW1lbnRNZXRob2QuaW5pdGlhbGl6YXRpb25EYXRhLFxuICAgICAgICAgICAgICAgIHN0YXRlLmdldENhcnRMb2NhbGUoKSxcbiAgICAgICAgICAgICAgICBTdHJpcGVKc1ZlcnNpb24uVjMsXG4gICAgICAgICAgICAgICAgU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMsXG4gICAgICAgICAgICAgICAgU1RSSVBFX1VQRV9DTElFTlRfQVBJX1ZFUlNJT04sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldEVsZW1lbnRzKHN0cmlwZVVQRUNsaWVudCwge1xuICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldDogY2xpZW50VG9rZW4sXG4gICAgICAgICAgICAgICAgYXBwZWFyYW5jZSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCB7IGdldEJpbGxpbmdBZGRyZXNzLCBnZXRDb25zaWdubWVudHMgfSA9XG4gICAgICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBjb25zaWdubWVudHMgPSBnZXRDb25zaWdubWVudHMoKTtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gY29uc2lnbm1lbnRzPy5bMF0/LmlkO1xuICAgICAgICAgICAgY29uc3QgeyBlbWFpbDogYmlsbGluZ0VtYWlsIH0gPSBnZXRCaWxsaW5nQWRkcmVzcygpIHx8IHt9O1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IGJpbGxpbmdFbWFpbFxuICAgICAgICAgICAgICAgID8geyBkZWZhdWx0VmFsdWVzOiB7IG1vZGU6IFN0cmlwZUZvcm1Nb2RlLlNISVBQSU5HLCBlbWFpbDogYmlsbGluZ0VtYWlsIH0gfVxuICAgICAgICAgICAgICAgIDoge307XG4gICAgICAgICAgICBjb25zdCBsaW5rQXV0aGVudGljYXRpb25FbGVtZW50ID1cbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLkFVVEhFTlRJQ0FUSU9OKSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLmNyZWF0ZShTdHJpcGVFbGVtZW50VHlwZS5BVVRIRU5USUNBVElPTiwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGxpbmtBdXRoZW50aWNhdGlvbkVsZW1lbnQub24oU3RyaXBlRWxlbWVudEV2ZW50LkNIQU5HRSwgKGV2ZW50OiBTdHJpcGVFdmVudFR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISgnYXV0aGVudGljYXRlZCcgaW4gZXZlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdDdXN0b21lcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyKHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGU6IGV2ZW50LmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbWFpbENoYW5nZShldmVudC5hdXRoZW50aWNhdGVkLCBldmVudC52YWx1ZS5lbWFpbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb25FbWFpbENoYW5nZShmYWxzZSwgJycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RyaXBlTGlua0F1dGhlbnRpY2F0aW9uU3RhdGUgPT09IHVuZGVmaW5lZCAmJiBldmVudC5hdXRoZW50aWNhdGVkICYmIGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5kZWxldGVDb25zaWdubWVudChpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsaW5rQXV0aGVudGljYXRpb25FbGVtZW50Lm1vdW50KGAjJHtjb250YWluZXJ9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzPy5nZXRFbGVtZW50KFN0cmlwZUVsZW1lbnRUeXBlLkFVVEhFTlRJQ0FUSU9OKT8udW5tb3VudCgpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBzaWduSW4oY3JlZGVudGlhbHM6IEN1c3RvbWVyQ3JlZGVudGlhbHMsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbkluQ3VzdG9tZXIoY3JlZGVudGlhbHMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBzaWduT3V0KG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc2lnbk91dEN1c3RvbWVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBleGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0KG9wdGlvbnM/OiBFeGVjdXRlUGF5bWVudE1ldGhvZENoZWNrb3V0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBvcHRpb25zPy5jb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrPy4oKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgZ2V0U2NyaXB0TG9hZGVyIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL3NjcmlwdC1sb2FkZXInO1xuXG5pbXBvcnQge1xuICAgIEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5LFxuICAgIHRvUmVzb2x2YWJsZU1vZHVsZSxcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9wYXltZW50LWludGVncmF0aW9uLWFwaSc7XG5pbXBvcnQgeyBTdHJpcGVTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5cbmltcG9ydCBTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5IGZyb20gJy4vc3RyaXBlLXVwZS1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZVVQRUN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFN0cmlwZVVQRUN1c3RvbWVyU3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICByZXR1cm4gbmV3IFN0cmlwZVVQRUN1c3RvbWVyU3RyYXRlZ3koXG4gICAgICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgICAgIG5ldyBTdHJpcGVTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpLFxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB0b1Jlc29sdmFibGVNb2R1bGUoY3JlYXRlU3RyaXBlVVBFQ3VzdG9tZXJTdHJhdGVneSwgW3sgaWQ6ICdzdHJpcGV1cGUnIH1dKTtcbiIsImltcG9ydCB7XG4gICAgTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcyxcbiAgICBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzLFxufSBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yLXN0eWxlcyc7XG5cbmNvbnN0IERFRkFVTFRfU1RZTEVTOiBMb2FkaW5nSW5kaWNhdG9yU3R5bGVzID0ge1xuICAgIHNpemU6IDcwLFxuICAgIGNvbG9yOiAnI2Q5ZDlkOScsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicsXG59O1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT05UQUlORVJfU1RZTEVTID0ge1xuICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYmEoMCwgMCwgMCwgMC40KScsXG4gICAgJ3otaW5kZXgnOiAnMTAwMCcsXG59O1xuXG5jb25zdCBST1RBVElPTl9BTklNQVRJT04gPSAnZW1iZWRkZWQtY2hlY2tvdXQtbG9hZGluZy1pbmRpY2F0b3Itcm90YXRpb24nO1xuXG5pbnRlcmZhY2UgTG9hZGluZ0luZGljYXRvck9wdGlvbnMge1xuICAgIHN0eWxlcz86IExvYWRpbmdJbmRpY2F0b3JTdHlsZXM7XG4gICAgY29udGFpbmVyU3R5bGVzPzogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9hZGluZ0luZGljYXRvciB7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgaW5kaWNhdG9yOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHN0eWxlczogTG9hZGluZ0luZGljYXRvclN0eWxlcztcbiAgICBwcml2YXRlIGNvbnRhaW5lclN0eWxlczogTG9hZGluZ0luZGljYXRvckNvbnRhaW5lclN0eWxlcztcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMb2FkaW5nSW5kaWNhdG9yT3B0aW9ucykge1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHsgLi4uREVGQVVMVF9TVFlMRVMsIC4uLihvcHRpb25zICYmIG9wdGlvbnMuc3R5bGVzKSB9O1xuICAgICAgICB0aGlzLmNvbnRhaW5lclN0eWxlcyA9IHsgLi4uKG9wdGlvbnMgJiYgb3B0aW9ucy5jb250YWluZXJTdHlsZXMpIH07XG5cbiAgICAgICAgdGhpcy5kZWZpbmVBbmltYXRpb24oKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuYnVpbGRDb250YWluZXIoKTtcbiAgICAgICAgdGhpcy5pbmRpY2F0b3IgPSB0aGlzLmJ1aWxkSW5kaWNhdG9yKCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbmRpY2F0b3IpO1xuICAgIH1cblxuICAgIHNob3cocGFyZW50SWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHBhcmVudElkKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwYXJlbnRJZCk7XG5cbiAgICAgICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICAnVW5hYmxlIHRvIGF0dGFjaCB0aGUgbG9hZGluZyBpbmRpY2F0b3IgYmVjYXVzZSB0aGUgcGFyZW50IElEIGlzIG5vdCB2YWxpZC4nLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cblxuICAgIGhpZGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbmRsZVRyYW5zaXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBoYW5kbGVUcmFuc2l0aW9uRW5kKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgaGFuZGxlVHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkQ29udGFpbmVyKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYm90dG9tID0gJzAnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50b3AgPSAnMCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ2FsbCAyNTBtcyBlYXNlLW91dCc7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgICAgIHRoaXMuc2V0U3R5bGVBdHRyaWJ1dGUoY29udGFpbmVyLCB0aGlzLmNvbnRhaW5lclN0eWxlcyk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkSW5kaWNhdG9yKCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUud2lkdGggPSBgJHt0aGlzLnN0eWxlcy5zaXplfXB4YDtcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuc3R5bGVzLnNpemV9cHhgO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUuYm9yZGVyUmFkaXVzID0gYCR7dGhpcy5zdHlsZXMuc2l6ZX1weGA7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5ib3JkZXIgPSAnc29saWQgMXB4JztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLmJvcmRlckNvbG9yID0gYCR7dGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yfSAke3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn0gJHt0aGlzLnN0eWxlcy5jb2xvcn1gO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUubWFyZ2luID0gJzAgYXV0byc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICBpbmRpY2F0b3Iuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50b3AgPSAnNTAlJztcbiAgICAgICAgaW5kaWNhdG9yLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgwZGVnKSc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS50cmFuc2Zvcm1TdHlsZSA9ICdwcmVzZXJ2ZS0zZCc7XG4gICAgICAgIGluZGljYXRvci5zdHlsZS5hbmltYXRpb24gPSBgJHtST1RBVElPTl9BTklNQVRJT059IDUwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjY5LCAwLjMxLCAwLjU2LCAwLjgzKWA7XG5cbiAgICAgICAgcmV0dXJuIGluZGljYXRvcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFN0eWxlQXR0cmlidXRlKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBhdHRyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSk6IHZvaWQge1xuICAgICAgICBPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaCgoaykgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShrLCBhdHRyc1trXSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVmaW5lQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgICAgICAvLyBJbiBvcmRlciB0byBkZWZpbmUgQ1NTIGFuaW1hdGlvbiwgd2UgbmVlZCB0byBpbnNlcnQgYSBzdHlsZXNoZWV0IGludG8gdGhlIGhvc3QgZnJhbWUuXG4gICAgICAgIC8vIFdlIG9ubHkgaGF2ZSB0byBkbyBpdCBvbmNlLlxuICAgICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUk9UQVRJT05fQU5JTUFUSU9OKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gICAgICAgIHN0eWxlLmlkID0gUk9UQVRJT05fQU5JTUFUSU9OO1xuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIGRvY3VtZW50LmhlYWQ/LmFwcGVuZENoaWxkKHN0eWxlKTtcblxuICAgICAgICBpZiAoc3R5bGUuc2hlZXQgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHByb3ZpZGUgdGhlIDJuZCBwYXJhbWV0ZXIgZm9yIElFMTEsIGV2ZW4gdGhvdWdoIGl0IGlzXG4gICAgICAgICAgICAvLyAwIGJ5IGRlZmF1bHQgZm9yIGFsbCBvdGhlciBicm93c2Vycy5cbiAgICAgICAgICAgIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoXG4gICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgJHtST1RBVElPTl9BTklNQVRJT059IHtcbiAgICAgICAgICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgLFxuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQW1vdW50VHJhbnNmb3JtZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2RlY2ltYWxQbGFjZXM6IG51bWJlcikge31cblxuICAgIHRvSW50ZWdlcihhbW91bnQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGFtb3VudCAqIDEwICoqIHRoaXMuX2RlY2ltYWxQbGFjZXMpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjb25zdCBleHByZXNzQ2hlY2tvdXRBbGxvd2VkQ291bnRyeUNvZGVzID0gW1xuICAgICdBQycsXG4gICAgJ0FEJyxcbiAgICAnQUUnLFxuICAgICdBRicsXG4gICAgJ0FHJyxcbiAgICAnQUknLFxuICAgICdBTCcsXG4gICAgJ0FNJyxcbiAgICAnQU8nLFxuICAgICdBUScsXG4gICAgJ0FSJyxcbiAgICAnQVQnLFxuICAgICdBVScsXG4gICAgJ0FXJyxcbiAgICAnQVgnLFxuICAgICdBWicsXG4gICAgJ0JBJyxcbiAgICAnQkInLFxuICAgICdCRCcsXG4gICAgJ0JFJyxcbiAgICAnQkYnLFxuICAgICdCRycsXG4gICAgJ0JIJyxcbiAgICAnQkknLFxuICAgICdCSicsXG4gICAgJ0JMJyxcbiAgICAnQk0nLFxuICAgICdCTicsXG4gICAgJ0JPJyxcbiAgICAnQlEnLFxuICAgICdCUicsXG4gICAgJ0JTJyxcbiAgICAnQlQnLFxuICAgICdCVicsXG4gICAgJ0JXJyxcbiAgICAnQlknLFxuICAgICdCWicsXG4gICAgJ0NBJyxcbiAgICAnQ0QnLFxuICAgICdDRicsXG4gICAgJ0NHJyxcbiAgICAnQ0gnLFxuICAgICdDSScsXG4gICAgJ0NLJyxcbiAgICAnQ0wnLFxuICAgICdDTScsXG4gICAgJ0NOJyxcbiAgICAnQ08nLFxuICAgICdDUicsXG4gICAgJ0NWJyxcbiAgICAnQ1cnLFxuICAgICdDWScsXG4gICAgJ0NaJyxcbiAgICAnREUnLFxuICAgICdESicsXG4gICAgJ0RLJyxcbiAgICAnRE0nLFxuICAgICdETycsXG4gICAgJ0RaJyxcbiAgICAnRUMnLFxuICAgICdFRScsXG4gICAgJ0VHJyxcbiAgICAnRUgnLFxuICAgICdFUicsXG4gICAgJ0VTJyxcbiAgICAnRVQnLFxuICAgICdGSScsXG4gICAgJ0ZKJyxcbiAgICAnRksnLFxuICAgICdGTycsXG4gICAgJ0ZSJyxcbiAgICAnR0EnLFxuICAgICdHQicsXG4gICAgJ0dEJyxcbiAgICAnR0UnLFxuICAgICdHRicsXG4gICAgJ0dHJyxcbiAgICAnR0gnLFxuICAgICdHSScsXG4gICAgJ0dMJyxcbiAgICAnR00nLFxuICAgICdHTicsXG4gICAgJ0dQJyxcbiAgICAnR1EnLFxuICAgICdHUicsXG4gICAgJ0dTJyxcbiAgICAnR1QnLFxuICAgICdHVScsXG4gICAgJ0dXJyxcbiAgICAnR1knLFxuICAgICdISycsXG4gICAgJ0hOJyxcbiAgICAnSFInLFxuICAgICdIVCcsXG4gICAgJ0hVJyxcbiAgICAnSUQnLFxuICAgICdJRScsXG4gICAgJ0lMJyxcbiAgICAnSU0nLFxuICAgICdJTicsXG4gICAgJ0lPJyxcbiAgICAnSVEnLFxuICAgICdJUycsXG4gICAgJ0lUJyxcbiAgICAnSkUnLFxuICAgICdKTScsXG4gICAgJ0pPJyxcbiAgICAnSlAnLFxuICAgICdLRScsXG4gICAgJ0tHJyxcbiAgICAnS0gnLFxuICAgICdLSScsXG4gICAgJ0tNJyxcbiAgICAnS04nLFxuICAgICdLUicsXG4gICAgJ0tXJyxcbiAgICAnS1knLFxuICAgICdLWicsXG4gICAgJ0xBJyxcbiAgICAnTEInLFxuICAgICdMQycsXG4gICAgJ0xJJyxcbiAgICAnTEsnLFxuICAgICdMUicsXG4gICAgJ0xTJyxcbiAgICAnTFQnLFxuICAgICdMVScsXG4gICAgJ0xWJyxcbiAgICAnTFknLFxuICAgICdNQScsXG4gICAgJ01DJyxcbiAgICAnTUQnLFxuICAgICdNRScsXG4gICAgJ01GJyxcbiAgICAnTUcnLFxuICAgICdNSycsXG4gICAgJ01MJyxcbiAgICAnTU0nLFxuICAgICdNTicsXG4gICAgJ01PJyxcbiAgICAnTVEnLFxuICAgICdNUicsXG4gICAgJ01TJyxcbiAgICAnTVQnLFxuICAgICdNVScsXG4gICAgJ01WJyxcbiAgICAnTVcnLFxuICAgICdNWCcsXG4gICAgJ01ZJyxcbiAgICAnTVonLFxuICAgICdOQScsXG4gICAgJ05DJyxcbiAgICAnTkUnLFxuICAgICdORycsXG4gICAgJ05JJyxcbiAgICAnTkwnLFxuICAgICdOTycsXG4gICAgJ05QJyxcbiAgICAnTlInLFxuICAgICdOVScsXG4gICAgJ05aJyxcbiAgICAnT00nLFxuICAgICdQQScsXG4gICAgJ1BFJyxcbiAgICAnUEYnLFxuICAgICdQRycsXG4gICAgJ1BIJyxcbiAgICAnUEsnLFxuICAgICdQTCcsXG4gICAgJ1BNJyxcbiAgICAnUE4nLFxuICAgICdQUicsXG4gICAgJ1BTJyxcbiAgICAnUFQnLFxuICAgICdQWScsXG4gICAgJ1FBJyxcbiAgICAnUkUnLFxuICAgICdSTycsXG4gICAgJ1JTJyxcbiAgICAnUlUnLFxuICAgICdSVycsXG4gICAgJ1NBJyxcbiAgICAnU0InLFxuICAgICdTQycsXG4gICAgJ1NEJyxcbiAgICAnU0UnLFxuICAgICdTRycsXG4gICAgJ1NIJyxcbiAgICAnU0knLFxuICAgICdTSicsXG4gICAgJ1NLJyxcbiAgICAnU0wnLFxuICAgICdTTScsXG4gICAgJ1NOJyxcbiAgICAnU08nLFxuICAgICdTUicsXG4gICAgJ1NTJyxcbiAgICAnU1QnLFxuICAgICdTVicsXG4gICAgJ1NYJyxcbiAgICAnU1onLFxuICAgICdUQScsXG4gICAgJ1RDJyxcbiAgICAnVEQnLFxuICAgICdURicsXG4gICAgJ1RHJyxcbiAgICAnVEgnLFxuICAgICdUSicsXG4gICAgJ1RLJyxcbiAgICAnVEwnLFxuICAgICdUTScsXG4gICAgJ1ROJyxcbiAgICAnVE8nLFxuICAgICdUUicsXG4gICAgJ1RUJyxcbiAgICAnVFYnLFxuICAgICdUVycsXG4gICAgJ1RaJyxcbiAgICAnVUEnLFxuICAgICdVRycsXG4gICAgJ1VTJyxcbiAgICAnVVknLFxuICAgICdVWicsXG4gICAgJ1ZBJyxcbiAgICAnVkMnLFxuICAgICdWRScsXG4gICAgJ1ZHJyxcbiAgICAnVk4nLFxuICAgICdWVScsXG4gICAgJ1dGJyxcbiAgICAnV1MnLFxuICAgICdYSycsXG4gICAgJ1lFJyxcbiAgICAnWVQnLFxuICAgICdaQScsXG4gICAgJ1pNJyxcbiAgICAnWlcnLFxuICAgICdaWicsXG5dO1xuIiwiaW1wb3J0IHsgcm91bmQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFtb3VudFRyYW5zZm9ybWVyLFxuICAgIEN1c3RvbWVySW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ3VzdG9tZXJTdHJhdGVneSxcbiAgICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgU2hpcHBpbmdPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCxcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlTGlua1YyRXZlbnQsXG4gICAgU3RyaXBlTGlua1YyT3B0aW9ucyxcbiAgICBTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGUsXG4gICAgU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgU3RyaXBlUmVzdWx0LFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICBTdHJpcGVTdHJpbmdDb25zdGFudHMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgZXhwcmVzc0NoZWNrb3V0QWxsb3dlZENvdW50cnlDb2RlcyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFdpdGhTdHJpcGVPQ1NDdXN0b21lckluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGUtb2NzLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3kgaW1wbGVtZW50cyBDdXN0b21lclN0cmF0ZWd5IHtcbiAgICBwcml2YXRlIF9zdHJpcGVDbGllbnQ/OiBTdHJpcGVDbGllbnQ7XG4gICAgcHJpdmF0ZSBfc3RyaXBlRWxlbWVudHM/OiBTdHJpcGVFbGVtZW50cztcbiAgICBwcml2YXRlIF9saW5rVjJFbGVtZW50PzogU3RyaXBlRWxlbWVudDtcbiAgICBwcml2YXRlIF9hbW91bnRUcmFuc2Zvcm1lcj86IEFtb3VudFRyYW5zZm9ybWVyO1xuICAgIHByaXZhdGUgX29uQ29tcGxldGU/OiAob3JkZXJJZD86IG51bWJlcikgPT4gUHJvbWlzZTxuZXZlcj47XG4gICAgcHJpdmF0ZSBfbG9hZGluZ0luZGljYXRvckNvbnRhaW5lcj86IHN0cmluZztcbiAgICBwcml2YXRlIF9jYXB0dXJlTWV0aG9kPzogJ2F1dG9tYXRpYycgfCAnbWFudWFsJztcbiAgICBwcml2YXRlIF9jdXJyZW5jeUNvZGU/OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlOiBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHNjcmlwdExvYWRlcjogU3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBwcml2YXRlIHN0cmlwZUludGVncmF0aW9uU2VydmljZTogU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGxvYWRpbmdJbmRpY2F0b3I6IExvYWRpbmdJbmRpY2F0b3IsXG4gICAgKSB7fVxuXG4gICAgYXN5bmMgaW5pdGlhbGl6ZShcbiAgICAgICAgb3B0aW9uczogQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyAmIFdpdGhTdHJpcGVPQ1NDdXN0b21lckluaXRpYWxpemVPcHRpb25zLFxuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB7IHN0cmlwZW9jcyB9ID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoIXN0cmlwZW9jcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICAgICAgICAgIGBVbmFibGUgdG8gcHJvY2VlZCBiZWNhdXNlIFwib3B0aW9uc1wiIGFyZ3VtZW50IGlzIG5vdCBwcm92aWRlZC5gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGdhdGV3YXlJZCwgY29udGFpbmVyIH0gPSBzdHJpcGVvY3M7XG5cbiAgICAgICAgaWYgKCFjb250YWluZXIgfHwgIW1ldGhvZElkIHx8ICFnYXRld2F5SWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBOb3RJbml0aWFsaXplZEVycm9yKE5vdEluaXRpYWxpemVkRXJyb3JUeXBlLlBheW1lbnROb3RJbml0aWFsaXplZCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkUGF5bWVudE1ldGhvZChnYXRld2F5SWQsIHtcbiAgICAgICAgICAgIHBhcmFtczogeyBtZXRob2Q6IG1ldGhvZElkIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kID0gc3RhdGUuZ2V0UGF5bWVudE1ldGhvZE9yVGhyb3cobWV0aG9kSWQsIGdhdGV3YXlJZCk7XG4gICAgICAgIGNvbnN0IHsgbG9hZGluZ0NvbnRhaW5lcklkLCBidXR0b25IZWlnaHQsIG9uQ29tcGxldGUgfSA9IHN0cmlwZW9jcztcblxuICAgICAgICB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyID0gbG9hZGluZ0NvbnRhaW5lcklkO1xuXG4gICAgICAgIHRoaXMuX29uQ29tcGxldGUgPSBvbkNvbXBsZXRlO1xuXG4gICAgICAgIGlmICghaXNTdHJpcGVQYXltZW50TWV0aG9kTGlrZShwYXltZW50TWV0aG9kKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBpbml0aWFsaXphdGlvbkRhdGEgfSA9IHBheW1lbnRNZXRob2Q7XG4gICAgICAgIGNvbnN0IHsgY2FwdHVyZU1ldGhvZCB9ID0gaW5pdGlhbGl6YXRpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVKc1ZlcnNpb24gPVxuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RyaXBlSnNWZXJzaW9uKGluaXRpYWxpemF0aW9uRGF0YSk7XG5cbiAgICAgICAgdGhpcy5fY2FwdHVyZU1ldGhvZCA9IGNhcHR1cmVNZXRob2Q7XG4gICAgICAgIHRoaXMuX3N0cmlwZUNsaWVudCA9IGF3YWl0IHRoaXMuc2NyaXB0TG9hZGVyLmdldFN0cmlwZUNsaWVudChcbiAgICAgICAgICAgIGluaXRpYWxpemF0aW9uRGF0YSxcbiAgICAgICAgICAgIHN0YXRlLmdldENhcnRMb2NhbGUoKSxcbiAgICAgICAgICAgIHN0cmlwZUpzVmVyc2lvbixcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoY29udGFpbmVyLCB0aGlzLl9zdHJpcGVDbGllbnQsIGJ1dHRvbkhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZCk7XG4gICAgfVxuXG4gICAgc2lnbkluKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgc2lnbk91dCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBkZWluaXRpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoXG4gICAgICAgIGNvbnRhaW5lcjogc3RyaW5nLFxuICAgICAgICBzdHJpcGVFeHByZXNzQ2hlY2tvdXRDbGllbnQ6IFN0cmlwZUNsaWVudCxcbiAgICAgICAgYnV0dG9uSGVpZ2h0ID0gNDAsXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MgPSB0aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCk7XG4gICAgICAgIGNvbnN0IGV4cHJlc3NDaGVja291dE9wdGlvbnM6IFN0cmlwZUVsZW1lbnRzQ3JlYXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHNoaXBwaW5nQWRkcmVzc1JlcXVpcmVkOiBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgLi4uKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3NcbiAgICAgICAgICAgICAgICA/IHsgYWxsb3dlZFNoaXBwaW5nQ291bnRyaWVzOiBhd2FpdCB0aGlzLl9nZXRBdmFpbGFibGVDb3VudHJpZXMoKSB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICAuLi4oc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgID8geyBzaGlwcGluZ1JhdGVzOiBbeyBpZDogJ18nLCBhbW91bnQ6IDAsIGRpc3BsYXlOYW1lOiAnUGVuZGluZyByYXRlcycgfV0gfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3NSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBwaG9uZU51bWJlclJlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgcGF5bWVudE1ldGhvZHM6IHtcbiAgICAgICAgICAgICAgICBsaW5rOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuQVVUTyxcbiAgICAgICAgICAgICAgICBhcHBsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGdvb2dsZVBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGFtYXpvblBheTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIHBheXBhbDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgICAgIGtsYXJuYTogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLk5FVkVSLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIE1pbmltYWwgYnV0dG9uSGVpZ2h0IHZhbHVlIGlzIDQwXG4gICAgICAgICAgICBidXR0b25IZWlnaHQsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgeyBjYXJ0QW1vdW50IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0T3JUaHJvdygpO1xuXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzT3B0aW9uczogU3RyaXBlTGlua1YyT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIG1vZGU6ICdwYXltZW50JyxcbiAgICAgICAgICAgIGFtb3VudDogdGhpcy5fdG9DZW50cyhjYXJ0QW1vdW50KSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLl9nZXRDdXJyZW5jeSgpLFxuICAgICAgICAgICAgLi4uKHRoaXMuX2NhcHR1cmVNZXRob2QgPyB7IGNhcHR1cmVNZXRob2Q6IHRoaXMuX2NhcHR1cmVNZXRob2QgfSA6IHt9KSxcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyA9IHN0cmlwZUV4cHJlc3NDaGVja291dENsaWVudC5lbGVtZW50cyhlbGVtZW50c09wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuX2xpbmtWMkVsZW1lbnQgPSB0aGlzLl9zdHJpcGVFbGVtZW50cy5jcmVhdGUoXG4gICAgICAgICAgICBTdHJpcGVFbGVtZW50VHlwZS5FWFBSRVNTX0NIRUNLT1VULFxuICAgICAgICAgICAgZXhwcmVzc0NoZWNrb3V0T3B0aW9ucyxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5tb3VudChgIyR7Y29udGFpbmVyfWApO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9saW5rVjJFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKiBFdmVudHMgKiAqL1xuXG4gICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZUV2ZW50cyhtZXRob2RJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5fbGlua1YyRWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKTtcblxuICAgICAgICBpZiAoc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfQUREUkVTU19DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuU0hJUFBJTkdfUkFURV9DSEFOR0UsIGFzeW5jIChldmVudCkgPT5cbiAgICAgICAgICAgICAgICB0aGlzLl9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudCksXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ09ORklSTSwgYXN5bmMgKGV2ZW50KSA9PlxuICAgICAgICAgICAgdGhpcy5fb25Db25maXJtKGV2ZW50LCBtZXRob2RJZCksXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudC5vbihTdHJpcGVFbGVtZW50RXZlbnQuQ0FOQ0VMLCB0aGlzLl9vbkNhbmNlbCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfb25TaGlwcGluZ0FkZHJlc3NDaGFuZ2UoZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoISgnYWRkcmVzcycgaW4gZXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaGlwcGluZ0FkZHJlc3MgPSBldmVudC5hZGRyZXNzO1xuICAgICAgICAvLyBEZXBlbmRpbmcgb24gdGhlIGNvdW50cnksIHNvbWUgZmllbGRzIGNhbiBiZSBtaXNzaW5nIG9yIHBhcnRpYWxseSByZWRhY3RlZC5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBzaGlwcGluZyBhZGRyZXNzIGluIHRoZSBVUyBjYW4gb25seSBjb250YWluIGEgY2l0eSwgc3RhdGUsIGFuZCBaSVAgY29kZS5cbiAgICAgICAgLy8gVGhlIGZ1bGwgc2hpcHBpbmcgYWRkcmVzcyBhcHBlYXJzIGluIHRoZSBjb25maXJtIGV2ZW50IG9iamVjdCBhZnRlciB0aGUgcHVyY2hhc2UgaXMgY29uZmlybWVkIGluIHRoZSBicm93c2Vy4oCZcyBwYXltZW50IGludGVyZmFjZS5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZmlyc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIGxhc3ROYW1lOiAnJyxcbiAgICAgICAgICAgIHBob25lOiAnJyxcbiAgICAgICAgICAgIGNvbXBhbnk6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczE6ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHJlc3VsdCk7XG5cbiAgICAgICAgY29uc3Qgc2hpcHBpbmdSYXRlcyA9IGF3YWl0IHRoaXMuX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucygpO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZURpc3BsYXllZFByaWNlKCk7XG5cbiAgICAgICAgaWYgKCFzaGlwcGluZ1JhdGVzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGV2ZW50LnJlamVjdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgc2hpcHBpbmdSYXRlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfb25DYW5jZWwoKSB7XG4gICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kQ2FuY2VsbGVkRXJyb3IoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9vblNoaXBwaW5nUmF0ZUNoYW5nZShldmVudDogU3RyaXBlRXZlbnRUeXBlKSB7XG4gICAgICAgIGlmICgnc2hpcHBpbmdSYXRlJyBpbiBldmVudCkge1xuICAgICAgICAgICAgY29uc3QgeyBzaGlwcGluZ1JhdGUgfSA9IGV2ZW50O1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShzaGlwcGluZ1JhdGU/LmlkKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlRGlzcGxheWVkUHJpY2UoKTtcblxuICAgICAgICAgICAgZXZlbnQucmVzb2x2ZSh7fSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQ29uZmlybSBtZXRob2RzICogKi9cbiAgICBwcml2YXRlIGFzeW5jIF9vbkNvbmZpcm0oZXZlbnQ6IFN0cmlwZUV2ZW50VHlwZSwgbWV0aG9kSWQ6IHN0cmluZykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAnYmlsbGluZ0RldGFpbHMnIGluIGV2ZW50ICYmXG4gICAgICAgICAgICAnc2hpcHBpbmdBZGRyZXNzJyBpbiBldmVudCAmJlxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlQ2xpZW50ICYmXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50c1xuICAgICAgICApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3MoZXZlbnQpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdE9yZGVyKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQobWV0aG9kSWQpO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZXJyb3IsIG1ldGhvZElkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF91cGRhdGVTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzKGV2ZW50OiBTdHJpcGVMaW5rVjJFdmVudCkge1xuICAgICAgICBjb25zdCBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9XG4gICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3M/Lm5hbWU/LnNwbGl0KCcgJylbMF0gfHxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzPy5uYW1lPy5zcGxpdCgnICcpWzBdIHx8XG4gICAgICAgICAgICAnJztcbiAgICAgICAgY29uc3QgbGFzdE5hbWUgPVxuICAgICAgICAgICAgZXZlbnQuc2hpcHBpbmdBZGRyZXNzPy5uYW1lPy5zcGxpdCgnICcpWzFdIHx8XG4gICAgICAgICAgICBldmVudC5iaWxsaW5nRGV0YWlscz8ubmFtZT8uc3BsaXQoJyAnKVsxXSB8fFxuICAgICAgICAgICAgJyc7XG5cbiAgICAgICAgaWYgKHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX21hcFNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAgICAgZXZlbnQuYmlsbGluZ0RldGFpbHMsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lLFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nQWRkcmVzcyhzaGlwcGluZ0FkZHJlc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmlsbGluZ0FkZHJlc3MgPSB0aGlzLl9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgICAgIGV2ZW50LnNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnVwZGF0ZUJpbGxpbmdBZGRyZXNzKGJpbGxpbmdBZGRyZXNzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBTaGlwcGluZ0FkZHJlc3MoXG4gICAgICAgIHNoaXBwaW5nQWRkcmVzczogU3RyaXBlTGlua1YyRXZlbnRbJ3NoaXBwaW5nQWRkcmVzcyddLFxuICAgICAgICBiaWxsaW5nRGV0YWlsczogU3RyaXBlTGlua1YyRXZlbnRbJ2JpbGxpbmdEZXRhaWxzJ10sXG4gICAgICAgIGZpcnN0TmFtZTogc3RyaW5nLFxuICAgICAgICBsYXN0TmFtZTogc3RyaW5nLFxuICAgICkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5saW5lMSB8fCAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MyOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LmxpbmUyIHx8ICcnLFxuICAgICAgICAgICAgY2l0eTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5jaXR5IHx8ICcnLFxuICAgICAgICAgICAgY291bnRyeUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2VDb2RlOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgY3VzdG9tRmllbGRzOiBbXSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9tYXBCaWxsaW5nQWRkcmVzcyhcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBTdHJpcGVMaW5rVjJFdmVudFsnc2hpcHBpbmdBZGRyZXNzJ10sXG4gICAgICAgIGJpbGxpbmdEZXRhaWxzOiBTdHJpcGVMaW5rVjJFdmVudFsnYmlsbGluZ0RldGFpbHMnXSxcbiAgICAgICAgZmlyc3ROYW1lOiBzdHJpbmcsXG4gICAgICAgIGxhc3ROYW1lOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbWFpbDogYmlsbGluZ0RldGFpbHM/LmVtYWlsIHx8ICcnLFxuICAgICAgICAgICAgZmlyc3ROYW1lLFxuICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICBwaG9uZTogYmlsbGluZ0RldGFpbHM/LnBob25lIHx8ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmxpbmUxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6ICcnLFxuICAgICAgICAgICAgY2l0eTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LmNvdW50cnkgfHwgJycsXG4gICAgICAgICAgICBwb3N0YWxDb2RlOiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8ucG9zdGFsX2NvZGUgfHwgJycsXG4gICAgICAgICAgICBzdGF0ZU9yUHJvdmluY2U6IGJpbGxpbmdEZXRhaWxzPy5hZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3Byb2Nlc3NBZGRpdGlvbmFsQWN0aW9uKGVycm9yOiB1bmtub3duLCBtZXRob2RJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc1JlcXVlc3RFcnJvcihlcnJvcikgfHxcbiAgICAgICAgICAgICF0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS5pc0FkZGl0aW9uYWxBY3Rpb25FcnJvcihlcnJvci5ib2R5LmVycm9ycylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fc3RyaXBlQ2xpZW50IHx8ICF0aGlzLl9zdHJpcGVFbGVtZW50cykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYWRkaXRpb25hbEFjdGlvbkRhdGEgfSA9IGVycm9yLmJvZHkuYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQ7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuXG4gICAgICAgIGNvbnN0IHsgcGF5bWVudEludGVudCB9ID0gYXdhaXQgdGhpcy5fY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICAgICAgYWRkaXRpb25hbEFjdGlvbkRhdGEsXG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwYXltZW50UGF5bG9hZCA9IHRoaXMuX2dldFBheW1lbnRQYXlsb2FkKG1ldGhvZElkLCBwYXltZW50SW50ZW50Py5pZCB8fCB0b2tlbik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0UGF5bWVudChwYXltZW50UGF5bG9hZCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9jb21wbGV0ZUNoZWNrb3V0RmxvdygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UudGhyb3dQYXltZW50Q29uZmlybWF0aW9uUHJvY2VlZE1lc3NhZ2UoKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93KFxuICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YTogU3RyaXBlQWRkaXRpb25hbEFjdGlvblJlcXVpcmVkWydkYXRhJ10sXG4gICAgICAgIG1ldGhvZElkOiBzdHJpbmcsXG4gICAgKTogUHJvbWlzZTxTdHJpcGVSZXN1bHQgfCBuZXZlcj4ge1xuICAgICAgICBjb25zdCB7IHRva2VuLCByZWRpcmVjdF91cmwgfSA9IGFkZGl0aW9uYWxBY3Rpb25EYXRhO1xuICAgICAgICBjb25zdCBzdHJpcGVQYXltZW50RGF0YSA9IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLm1hcFN0cmlwZVBheW1lbnREYXRhKFxuICAgICAgICAgICAgdGhpcy5fc3RyaXBlRWxlbWVudHMsXG4gICAgICAgICAgICByZWRpcmVjdF91cmwsXG4gICAgICAgICk7XG4gICAgICAgIGxldCBzdHJpcGVFcnJvcjogU3RyaXBlRXJyb3IgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGlzUGF5bWVudENvbXBsZXRlZCA9IGF3YWl0IHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzUGF5bWVudENvbXBsZXRlZChcbiAgICAgICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgICAgICB0aGlzLl9zdHJpcGVDbGllbnQsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSAhaXNQYXltZW50Q29tcGxldGVkXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLl9zdHJpcGVDbGllbnQ/LmNvbmZpcm1QYXltZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50czogc3RyaXBlUGF5bWVudERhdGEuZWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogU3RyaXBlU3RyaW5nQ29uc3RhbnRzLklGX1JFUVVJUkVELFxuICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1QYXJhbXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuX3VybDogc3RyaXBlUGF5bWVudERhdGEuY29uZmlybVBhcmFtcz8ucmV0dXJuX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IGF3YWl0IHRoaXMuX3N0cmlwZUNsaWVudD8ucmV0cmlldmVQYXltZW50SW50ZW50KHRva2VuIHx8ICcnKTtcblxuICAgICAgICAgICAgc3RyaXBlRXJyb3IgPSBjb25maXJtYXRpb25SZXN1bHQ/LmVycm9yO1xuXG4gICAgICAgICAgICBpZiAoc3RyaXBlRXJyb3IgfHwgIWNvbmZpcm1hdGlvblJlc3VsdD8ucGF5bWVudEludGVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1hdGlvblJlc3VsdDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1N0cmlwZUVycm9yKHN0cmlwZUVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2NvbXBsZXRlQ2hlY2tvdXRGbG93KCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuX29uQ29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnL29yZGVyLWNvbmZpcm1hdGlvbicpO1xuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRQYXltZW50UGF5bG9hZChtZXRob2RJZDogc3RyaW5nLCB0b2tlbj86IHN0cmluZyk6IFBheW1lbnQge1xuICAgICAgICBjb25zdCBjYXJ0SWQgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCk/LmlkIHx8ICcnO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQYXlsb2FkID0ge1xuICAgICAgICAgICAgY2FydF9pZDogY2FydElkLFxuICAgICAgICAgICAgLi4uKHRva2VuID8geyBjcmVkaXRfY2FyZF90b2tlbjogeyB0b2tlbiB9IH0gOiB7fSksXG4gICAgICAgICAgICBjb25maXJtOiBmYWxzZSxcbiAgICAgICAgICAgIG1ldGhvZDogU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUuTGluayxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0aG9kSWQsXG4gICAgICAgICAgICBwYXltZW50RGF0YToge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFBheWxvYWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKiBVdGlscyAqICovXG5cbiAgICBwcml2YXRlIF9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCkge1xuICAgICAgICBjb25zdCB7IGdldENhcnRPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBsaW5lSXRlbXMgfSA9IGdldENhcnRPclRocm93KCk7XG5cbiAgICAgICAgcmV0dXJuICEhbGluZUl0ZW1zLnBoeXNpY2FsSXRlbXMubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3VwZGF0ZURpc3BsYXllZFByaWNlKCkge1xuICAgICAgICBpZiAodGhpcy5fc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IHRoaXMuX2dldEN1cnJlbmN5KCksXG4gICAgICAgICAgICAgICAgbW9kZTogJ3BheW1lbnQnLFxuICAgICAgICAgICAgICAgIGFtb3VudDogYXdhaXQgdGhpcy5fZ2V0VG90YWxQcmljZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRDdXJyZW5jeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29kZTogY3VycmVuY3lDb2RlIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2VcbiAgICAgICAgICAgICAgICAuZ2V0U3RhdGUoKVxuICAgICAgICAgICAgICAgIC5nZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5O1xuXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW5jeUNvZGUgPSBjdXJyZW5jeUNvZGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW5jeUNvZGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0VG90YWxQcmljZSgpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZENoZWNrb3V0KCk7XG5cbiAgICAgICAgY29uc3QgeyBnZXRDaGVja291dE9yVGhyb3csIGdldENhcnRPclRocm93IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBkZWNpbWFsUGxhY2VzIH0gPSBnZXRDYXJ0T3JUaHJvdygpLmN1cnJlbmN5O1xuICAgICAgICBjb25zdCB0b3RhbFByaWNlID0gcm91bmQoZ2V0Q2hlY2tvdXRPclRocm93KCkub3V0c3RhbmRpbmdCYWxhbmNlLCBkZWNpbWFsUGxhY2VzKS50b0ZpeGVkKFxuICAgICAgICAgICAgZGVjaW1hbFBsYWNlcyxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdG9DZW50cygrdG90YWxQcmljZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0QXZhaWxhYmxlQ291bnRyaWVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgY291bnRyaWVzID0gYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWRTaGlwcGluZ0NvdW50cmllcygpO1xuICAgICAgICBjb25zdCBkZWxpdmVyYWJsZUNvdW50cmllcyA9XG4gICAgICAgICAgICBjb3VudHJpZXMuZ2V0U2hpcHBpbmdDb3VudHJpZXMoKT8ubWFwKChjb3VudHJ5KSA9PiBjb3VudHJ5LmNvZGUpIHx8IFtdO1xuXG4gICAgICAgIHJldHVybiBkZWxpdmVyYWJsZUNvdW50cmllcy5maWx0ZXIoKGNvZGUpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBleHByZXNzQ2hlY2tvdXRBbGxvd2VkQ291bnRyeUNvZGVzLmluY2x1ZGVzKGNvZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9nZXRBdmFpbGFibGVTaGlwcGluZ09wdGlvbnMoKTogUHJvbWlzZTxTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGVbXSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCBjb25zaWdubWVudHMgPSBzdGF0ZS5nZXRDb25zaWdubWVudHMoKTtcblxuICAgICAgICBpZiAoIWNvbnNpZ25tZW50cz8uWzBdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb25zaWdubWVudCA9IGNvbnNpZ25tZW50c1swXTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IChjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgfHwgW10pLm1hcChcbiAgICAgICAgICAgIHRoaXMuX2dldFN0cmlwZVNoaXBwaW5nT3B0aW9uLmJpbmQodGhpcyksXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24gPSBjb25zaWdubWVudC5hdmFpbGFibGVTaGlwcGluZ09wdGlvbnM/LmZpbmQoXG4gICAgICAgICAgICAoc2hpcHBpbmdPcHRpb24pID0+IHNoaXBwaW5nT3B0aW9uLmlzUmVjb21tZW5kZWQsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSWQgPSBjb25zaWdubWVudC5zZWxlY3RlZFNoaXBwaW5nT3B0aW9uPy5pZDtcbiAgICAgICAgY29uc3QgcmVjb21tZW5kZWRJZCA9IHJlY29tbWVuZGVkU2hpcHBpbmdPcHRpb24/LmlkO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZElkKSB7XG4gICAgICAgICAgICAvLyBTZXQgc2VsZWN0ZWQgc2hpcHBpbmcgb3B0aW9uIGZpcnN0IGluIHRoZSBhcnJheSwgYXMgaXQgd2lsbCBiZSBzZWxlY3RlZCBieSBkZWZhdWx0XG4gICAgICAgICAgICBvcHRpb25zLnNvcnQoKG9wdGlvbikgPT4gKG9wdGlvbi5pZCA9PT0gc2VsZWN0ZWRJZCA/IC0xIDogMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKHJlY29tbWVuZGVkSWQpIHtcbiAgICAgICAgICAgIC8vIFNldCByZWNvbW1lbmRlZCBzaGlwcGluZyBvcHRpb24gZmlyc3QgaW4gdGhlIGFycmF5LCBhcyBpdCB3aWxsIGJlIHNlbGVjdGVkIGJ5IGRlZmF1bHRcbiAgICAgICAgICAgIG9wdGlvbnMuc29ydCgob3B0aW9uKSA9PiAob3B0aW9uLmlkID09PSByZWNvbW1lbmRlZElkID8gLTEgOiAwKSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShyZWNvbW1lbmRlZElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKG9wdGlvbnNbMF0/LmlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFN0cmlwZVNoaXBwaW5nT3B0aW9uKHsgaWQsIGNvc3QsIGRlc2NyaXB0aW9uIH06IFNoaXBwaW5nT3B0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgIGFtb3VudDogdGhpcy5fdG9DZW50cyhjb3N0KSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShvcHRpb25JZD86IHN0cmluZykge1xuICAgICAgICBpZiAoIW9wdGlvbklkIHx8IG9wdGlvbklkID09PSAnc2hpcHBpbmdfb3B0aW9uX3Vuc2VsZWN0ZWQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnNlbGVjdFNoaXBwaW5nT3B0aW9uKG9wdGlvbklkKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRBbW91bnRUcmFuc2Zvcm1lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Ftb3VudFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYW1vdW50VHJhbnNmb3JtZXI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IGdldENhcnQgfSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpO1xuICAgICAgICBjb25zdCB7IGN1cnJlbmN5IH0gPSBnZXRDYXJ0KCkgfHwge307XG5cbiAgICAgICAgaWYgKGN1cnJlbmN5KSB7XG4gICAgICAgICAgICBjb25zdCBhbW91bnRUcmFuc2Zvcm1lciA9IG5ldyBBbW91bnRUcmFuc2Zvcm1lcihjdXJyZW5jeS5kZWNpbWFsUGxhY2VzKTtcblxuICAgICAgICAgICAgcmV0dXJuIGFtb3VudFRyYW5zZm9ybWVyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdG9DZW50cyhhbW91bnQ6IG51bWJlcikge1xuICAgICAgICBjb25zdCBmYWxsYmFja1ZhbHVlID0gTWF0aC5yb3VuZChhbW91bnQgKiAxMDApO1xuICAgICAgICBjb25zdCBhbW91bnRUcmFuc2Zvcm1lciA9IHRoaXMuX2dldEFtb3VudFRyYW5zZm9ybWVyKCk7XG5cbiAgICAgICAgaWYgKGFtb3VudFRyYW5zZm9ybWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gYW1vdW50VHJhbnNmb3JtZXIudG9JbnRlZ2VyKGFtb3VudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsbGJhY2tWYWx1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF90b2dnbGVMb2FkaW5nSW5kaWNhdG9yKGlzTG9hZGluZzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAoaXNMb2FkaW5nICYmIHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5zaG93KHRoaXMuX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IGdldFNjcmlwdExvYWRlciB9IGZyb20gJ0BiaWdjb21tZXJjZS9zY3JpcHQtbG9hZGVyJztcblxuaW1wb3J0IHtcbiAgICBDdXN0b21lclN0cmF0ZWd5RmFjdG9yeSxcbiAgICB0b1Jlc29sdmFibGVNb2R1bGUsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlU2NyaXB0TG9hZGVyLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3N0cmlwZS11dGlscyc7XG5pbXBvcnQgeyBERUZBVUxUX0NPTlRBSU5FUl9TVFlMRVMsIExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3kgZnJvbSAnLi9zdHJpcGUtbGluay12Mi1jdXN0b21lci1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZVN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3k6IEN1c3RvbWVyU3RyYXRlZ3lGYWN0b3J5PFN0cmlwZUxpbmtWMkN1c3RvbWVyU3RyYXRlZ3k+ID0gKFxuICAgIHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsXG4pID0+IHtcbiAgICBjb25zdCBzdHJpcGVTY3JpcHRMb2FkZXIgPSBuZXcgU3RyaXBlU2NyaXB0TG9hZGVyKGdldFNjcmlwdExvYWRlcigpKTtcbiAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gbmV3IExvYWRpbmdJbmRpY2F0b3Ioe1xuICAgICAgICBjb250YWluZXJTdHlsZXM6IERFRkFVTFRfQ09OVEFJTkVSX1NUWUxFUyxcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgU3RyaXBlTGlua1YyQ3VzdG9tZXJTdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgc3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBuZXcgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsIHN0cmlwZVNjcmlwdExvYWRlciksXG4gICAgICAgIGxvYWRpbmdJbmRpY2F0b3IsXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVTdHJpcGVMaW5rVjJDdXN0b21lclN0cmF0ZWd5LCBbeyBpZDogJ3N0cmlwZW9jcycgfV0pO1xuIiwiaW1wb3J0IHsgcm91bmQgfSBmcm9tICdsb2Rhc2gnO1xuXG5pbXBvcnQge1xuICAgIEFtb3VudFRyYW5zZm9ybWVyLFxuICAgIENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMsXG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSxcbiAgICBpc1JlcXVlc3RFcnJvcixcbiAgICBNaXNzaW5nRGF0YUVycm9yLFxuICAgIE1pc3NpbmdEYXRhRXJyb3JUeXBlLFxuICAgIE5vdEluaXRpYWxpemVkRXJyb3IsXG4gICAgTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUsXG4gICAgUGF5bWVudCxcbiAgICBQYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcixcbiAgICBQYXltZW50TWV0aG9kRmFpbGVkRXJyb3IsXG4gICAgU2hpcHBpbmdPcHRpb24sXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvcGF5bWVudC1pbnRlZ3JhdGlvbi1hcGknO1xuaW1wb3J0IHtcbiAgICBpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlLFxuICAgIFN0cmlwZUFkZGl0aW9uYWxBY3Rpb25SZXF1aXJlZCxcbiAgICBTdHJpcGVDbGllbnQsXG4gICAgU3RyaXBlRWxlbWVudCxcbiAgICBTdHJpcGVFbGVtZW50RXZlbnQsXG4gICAgU3RyaXBlRWxlbWVudHMsXG4gICAgU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zLFxuICAgIFN0cmlwZUVsZW1lbnRUeXBlLFxuICAgIFN0cmlwZUVycm9yLFxuICAgIFN0cmlwZUV2ZW50VHlwZSxcbiAgICBTdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UsXG4gICAgU3RyaXBlTGlua1YyRXZlbnQsXG4gICAgU3RyaXBlTGlua1YyT3B0aW9ucyxcbiAgICBTdHJpcGVMaW5rVjJTaGlwcGluZ1JhdGUsXG4gICAgU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUsXG4gICAgU3RyaXBlUmVzdWx0LFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICBTdHJpcGVTdHJpbmdDb25zdGFudHMsXG59IGZyb20gJ0BiaWdjb21tZXJjZS9jaGVja291dC1zZGsvc3RyaXBlLXV0aWxzJztcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3VpJztcblxuaW1wb3J0IHsgZXhwcmVzc0NoZWNrb3V0QWxsb3dlZENvdW50cnlDb2RlcyB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IFdpdGhTdHJpcGVPQ1NDdXN0b21lckluaXRpYWxpemVPcHRpb25zIH0gZnJvbSAnLi9zdHJpcGUtb2NzLWN1c3RvbWVyLWluaXRpYWxpemUtb3B0aW9ucyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmlwZUxpbmtWMkJ1dHRvblN0cmF0ZWd5IGltcGxlbWVudHMgQ2hlY2tvdXRCdXR0b25TdHJhdGVneSB7XG4gICAgcHJpdmF0ZSBfc3RyaXBlQ2xpZW50PzogU3RyaXBlQ2xpZW50O1xuICAgIHByaXZhdGUgX3N0cmlwZUVsZW1lbnRzPzogU3RyaXBlRWxlbWVudHM7XG4gICAgcHJpdmF0ZSBfbGlua1YyRWxlbWVudD86IFN0cmlwZUVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfYW1vdW50VHJhbnNmb3JtZXI/OiBBbW91bnRUcmFuc2Zvcm1lcjtcbiAgICBwcml2YXRlIF9vbkNvbXBsZXRlPzogKG9yZGVySWQ/OiBudW1iZXIpID0+IFByb21pc2U8bmV2ZXI+O1xuICAgIHByaXZhdGUgX2xvYWRpbmdJbmRpY2F0b3JDb250YWluZXI/OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBfY3VycmVuY3lDb2RlPzogc3RyaW5nO1xuICAgIHByaXZhdGUgX2NhcHR1cmVNZXRob2Q/OiAnYXV0b21hdGljJyB8ICdtYW51YWwnO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcGF5bWVudEludGVncmF0aW9uU2VydmljZTogUGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBzY3JpcHRMb2FkZXI6IFN0cmlwZVNjcmlwdExvYWRlcixcbiAgICAgICAgcHJpdmF0ZSBzdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2U6IFN0cmlwZUludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBsb2FkaW5nSW5kaWNhdG9yOiBMb2FkaW5nSW5kaWNhdG9yLFxuICAgICkge31cblxuICAgIGFzeW5jIGluaXRpYWxpemUoXG4gICAgICAgIG9wdGlvbnM6IENoZWNrb3V0QnV0dG9uSW5pdGlhbGl6ZU9wdGlvbnMgJiBXaXRoU3RyaXBlT0NTQ3VzdG9tZXJJbml0aWFsaXplT3B0aW9ucyxcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgeyBzdHJpcGVvY3MsIGNvbnRhaW5lcklkIH0gPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgIGlmICghc3RyaXBlb2NzIHx8ICFjb250YWluZXJJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEluaXRpYWxpemVkRXJyb3IoTm90SW5pdGlhbGl6ZWRFcnJvclR5cGUuUGF5bWVudE5vdEluaXRpYWxpemVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgbWV0aG9kSWQsIGdhdGV3YXlJZCB9ID0gc3RyaXBlb2NzO1xuXG4gICAgICAgIGlmICghbWV0aG9kSWQgfHwgIWdhdGV3YXlJZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1pc3NpbmdEYXRhRXJyb3IoTWlzc2luZ0RhdGFFcnJvclR5cGUuTWlzc2luZ1BheW1lbnRNZXRob2QpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UubG9hZFBheW1lbnRNZXRob2QoZ2F0ZXdheUlkLCB7XG4gICAgICAgICAgICBwYXJhbXM6IHsgbWV0aG9kOiBtZXRob2RJZCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcGF5bWVudE1ldGhvZCA9IHN0YXRlLmdldFBheW1lbnRNZXRob2RPclRocm93KG1ldGhvZElkLCBnYXRld2F5SWQpO1xuICAgICAgICBjb25zdCB7IGxvYWRpbmdDb250YWluZXJJZCwgYnV0dG9uSGVpZ2h0LCBvbkNvbXBsZXRlIH0gPSBzdHJpcGVvY3M7XG5cbiAgICAgICAgdGhpcy5fbG9hZGluZ0luZGljYXRvckNvbnRhaW5lciA9IGxvYWRpbmdDb250YWluZXJJZDtcblxuICAgICAgICB0aGlzLl9vbkNvbXBsZXRlID0gb25Db21wbGV0ZTtcblxuICAgICAgICBpZiAoIWlzU3RyaXBlUGF5bWVudE1ldGhvZExpa2UocGF5bWVudE1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRGF0YUVycm9yKE1pc3NpbmdEYXRhRXJyb3JUeXBlLk1pc3NpbmdQYXltZW50TWV0aG9kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbGl6YXRpb25EYXRhIH0gPSBwYXltZW50TWV0aG9kO1xuICAgICAgICBjb25zdCB7IGNhcHR1cmVNZXRob2QgfSA9IGluaXRpYWxpemF0aW9uRGF0YTtcbiAgICAgICAgY29uc3Qgc3RyaXBlSnNWZXJzaW9uID1cbiAgICAgICAgICAgIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0cmlwZUpzVmVyc2lvbihpbml0aWFsaXphdGlvbkRhdGEpO1xuXG4gICAgICAgIHRoaXMuX2NhcHR1cmVNZXRob2QgPSBjYXB0dXJlTWV0aG9kO1xuICAgICAgICB0aGlzLl9zdHJpcGVDbGllbnQgPSBhd2FpdCB0aGlzLnNjcmlwdExvYWRlci5nZXRTdHJpcGVDbGllbnQoXG4gICAgICAgICAgICBpbml0aWFsaXphdGlvbkRhdGEsXG4gICAgICAgICAgICBzdGF0ZS5nZXRDYXJ0TG9jYWxlKCksXG4gICAgICAgICAgICBzdHJpcGVKc1ZlcnNpb24sXG4gICAgICAgICk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmxvYWREZWZhdWx0Q2hlY2tvdXQoKTtcblxuICAgICAgICBhd2FpdCB0aGlzLl9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQoY29udGFpbmVySWQsIHRoaXMuX3N0cmlwZUNsaWVudCwgYnV0dG9uSGVpZ2h0KTtcblxuICAgICAgICB0aGlzLl9pbml0aWFsaXplRXZlbnRzKG1ldGhvZElkKTtcbiAgICB9XG5cbiAgICBzaWduSW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICBzaWduT3V0KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZXhlY3V0ZVBheW1lbnRNZXRob2RDaGVja291dCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGRlaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX21vdW50RXhwcmVzc0NoZWNrb3V0RWxlbWVudChcbiAgICAgICAgY29udGFpbmVyOiBzdHJpbmcsXG4gICAgICAgIHN0cmlwZUV4cHJlc3NDaGVja291dENsaWVudDogU3RyaXBlQ2xpZW50LFxuICAgICAgICBidXR0b25IZWlnaHQgPSA0MCxcbiAgICApIHtcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcyA9IHRoaXMuX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKTtcbiAgICAgICAgY29uc3QgZXhwcmVzc0NoZWNrb3V0T3B0aW9uczogU3RyaXBlRWxlbWVudHNDcmVhdGVPcHRpb25zID0ge1xuICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzUmVxdWlyZWQ6IHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MsXG4gICAgICAgICAgICAuLi4oc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzc1xuICAgICAgICAgICAgICAgID8geyBhbGxvd2VkU2hpcHBpbmdDb3VudHJpZXM6IGF3YWl0IHRoaXMuX2dldEF2YWlsYWJsZUNvdW50cmllcygpIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgICAgIC4uLihzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzXG4gICAgICAgICAgICAgICAgPyB7IHNoaXBwaW5nUmF0ZXM6IFt7IGlkOiAnXycsIGFtb3VudDogMCwgZGlzcGxheU5hbWU6ICdQZW5kaW5nIHJhdGVzJyB9XSB9XG4gICAgICAgICAgICAgICAgOiB7fSksXG4gICAgICAgICAgICBiaWxsaW5nQWRkcmVzc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICAgICAgZW1haWxSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgIHBob25lTnVtYmVyUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICBwYXltZW50TWV0aG9kczoge1xuICAgICAgICAgICAgICAgIGxpbms6IFN0cmlwZVN0cmluZ0NvbnN0YW50cy5BVVRPLFxuICAgICAgICAgICAgICAgIGFwcGxlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgZ29vZ2xlUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgYW1hem9uUGF5OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAgcGF5cGFsOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICAgICAga2xhcm5hOiBTdHJpcGVTdHJpbmdDb25zdGFudHMuTkVWRVIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gTWluaW1hbCBidXR0b25IZWlnaHQgdmFsdWUgaXMgNDBcbiAgICAgICAgICAgIGJ1dHRvbkhlaWdodCxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB7IGNhcnRBbW91bnQgPSAxIH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKS5nZXRDYXJ0KCkgfHwge307XG5cbiAgICAgICAgY29uc3QgZWxlbWVudHNPcHRpb25zOiBTdHJpcGVMaW5rVjJPcHRpb25zID0ge1xuICAgICAgICAgICAgbW9kZTogJ3BheW1lbnQnLFxuICAgICAgICAgICAgYW1vdW50OiB0aGlzLl90b0NlbnRzKGNhcnRBbW91bnQpLFxuICAgICAgICAgICAgY3VycmVuY3k6IHRoaXMuX2dldEN1cnJlbmN5KCksXG4gICAgICAgICAgICAuLi4odGhpcy5fY2FwdHVyZU1ldGhvZCA/IHsgY2FwdHVyZU1ldGhvZDogdGhpcy5fY2FwdHVyZU1ldGhvZCB9IDoge30pLFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzID0gc3RyaXBlRXhwcmVzc0NoZWNrb3V0Q2xpZW50LmVsZW1lbnRzKGVsZW1lbnRzT3B0aW9ucyk7XG5cbiAgICAgICAgdGhpcy5fbGlua1YyRWxlbWVudCA9IHRoaXMuX3N0cmlwZUVsZW1lbnRzLmNyZWF0ZShcbiAgICAgICAgICAgIFN0cmlwZUVsZW1lbnRUeXBlLkVYUFJFU1NfQ0hFQ0tPVVQsXG4gICAgICAgICAgICBleHByZXNzQ2hlY2tvdXRPcHRpb25zLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9saW5rVjJFbGVtZW50Lm1vdW50KGAjJHtjb250YWluZXJ9YCk7XG4gICAgfVxuXG4gICAgLyoqIEV2ZW50cyAqICovXG5cbiAgICBwcml2YXRlIF9pbml0aWFsaXplRXZlbnRzKG1ldGhvZElkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLl9saW5rVjJFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcygpO1xuXG4gICAgICAgIGlmIChzaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKSB7XG4gICAgICAgICAgICB0aGlzLl9saW5rVjJFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5TSElQUElOR19BRERSRVNTX0NIQU5HRSwgYXN5bmMgKGV2ZW50KSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuX29uU2hpcHBpbmdBZGRyZXNzQ2hhbmdlKGV2ZW50KSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLl9saW5rVjJFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5TSElQUElOR19SQVRFX0NIQU5HRSwgYXN5bmMgKGV2ZW50KSA9PlxuICAgICAgICAgICAgICAgIHRoaXMuX29uU2hpcHBpbmdSYXRlQ2hhbmdlKGV2ZW50KSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9saW5rVjJFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5DT05GSVJNLCBhc3luYyAoZXZlbnQpID0+XG4gICAgICAgICAgICB0aGlzLl9vbkNvbmZpcm0oZXZlbnQsIG1ldGhvZElkKSxcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLl9saW5rVjJFbGVtZW50Lm9uKFN0cmlwZUVsZW1lbnRFdmVudC5DQU5DRUwsIHRoaXMuX29uQ2FuY2VsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9vblNoaXBwaW5nQWRkcmVzc0NoYW5nZShldmVudDogU3RyaXBlRXZlbnRUeXBlKSB7XG4gICAgICAgIGlmICghKCdhZGRyZXNzJyBpbiBldmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNoaXBwaW5nQWRkcmVzcyA9IGV2ZW50LmFkZHJlc3M7XG4gICAgICAgIC8vIERlcGVuZGluZyBvbiB0aGUgY291bnRyeSwgc29tZSBmaWVsZHMgY2FuIGJlIG1pc3Npbmcgb3IgcGFydGlhbGx5IHJlZGFjdGVkLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZSwgdGhlIHNoaXBwaW5nIGFkZHJlc3MgaW4gdGhlIFVTIGNhbiBvbmx5IGNvbnRhaW4gYSBjaXR5LCBzdGF0ZSwgYW5kIFpJUCBjb2RlLlxuICAgICAgICAvLyBUaGUgZnVsbCBzaGlwcGluZyBhZGRyZXNzIGFwcGVhcnMgaW4gdGhlIGNvbmZpcm0gZXZlbnQgb2JqZWN0IGFmdGVyIHRoZSBwdXJjaGFzZSBpcyBjb25maXJtZWQgaW4gdGhlIGJyb3dzZXLigJlzIHBheW1lbnQgaW50ZXJmYWNlLlxuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICBmaXJzdE5hbWU6ICcnLFxuICAgICAgICAgICAgbGFzdE5hbWU6ICcnLFxuICAgICAgICAgICAgcGhvbmU6ICcnLFxuICAgICAgICAgICAgY29tcGFueTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMTogJycsXG4gICAgICAgICAgICBhZGRyZXNzMjogJycsXG4gICAgICAgICAgICBjaXR5OiBzaGlwcGluZ0FkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogc2hpcHBpbmdBZGRyZXNzPy5jb3VudHJ5IHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogc2hpcHBpbmdBZGRyZXNzPy5wb3N0YWxfY29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogc2hpcHBpbmdBZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuXG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS51cGRhdGVTaGlwcGluZ0FkZHJlc3MocmVzdWx0KTtcblxuICAgICAgICBjb25zdCBzaGlwcGluZ1JhdGVzID0gYXdhaXQgdGhpcy5fZ2V0QXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zKCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlRGlzcGxheWVkUHJpY2UoKTtcblxuICAgICAgICBpZiAoIXNoaXBwaW5nUmF0ZXM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgZXZlbnQucmVqZWN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBzaGlwcGluZ1JhdGVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9vbkNhbmNlbCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RDYW5jZWxsZWRFcnJvcigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX29uU2hpcHBpbmdSYXRlQ2hhbmdlKGV2ZW50OiBTdHJpcGVFdmVudFR5cGUpIHtcbiAgICAgICAgaWYgKCdzaGlwcGluZ1JhdGUnIGluIGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCB7IHNoaXBwaW5nUmF0ZSB9ID0gZXZlbnQ7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZVNoaXBwaW5nT3B0aW9uQ2hhbmdlKHNoaXBwaW5nUmF0ZT8uaWQpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl91cGRhdGVEaXNwbGF5ZWRQcmljZSgpO1xuXG4gICAgICAgICAgICBldmVudC5yZXNvbHZlKHt9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBDb25maXJtIG1ldGhvZHMgKiAqL1xuICAgIHByaXZhdGUgYXN5bmMgX29uQ29uZmlybShldmVudDogU3RyaXBlRXZlbnRUeXBlLCBtZXRob2RJZDogc3RyaW5nKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICdiaWxsaW5nRGV0YWlscycgaW4gZXZlbnQgJiZcbiAgICAgICAgICAgICdzaGlwcGluZ0FkZHJlc3MnIGluIGV2ZW50ICYmXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVDbGllbnQgJiZcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzXG4gICAgICAgICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlU2hpcHBpbmdBbmRCaWxsaW5nQWRkcmVzcyhldmVudCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2Uuc3VibWl0T3JkZXIoKTtcblxuICAgICAgICAgICAgY29uc3QgcGF5bWVudFBheWxvYWQgPSB0aGlzLl9nZXRQYXltZW50UGF5bG9hZChtZXRob2RJZCk7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLnN1Ym1pdFBheW1lbnQocGF5bWVudFBheWxvYWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbihlcnJvciwgbWV0aG9kSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3VwZGF0ZVNoaXBwaW5nQW5kQmlsbGluZ0FkZHJlc3MoZXZlbnQ6IFN0cmlwZUxpbmtWMkV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MgPSB0aGlzLl9zaG91bGRSZXF1aXJlU2hpcHBpbmdBZGRyZXNzKCk7XG5cbiAgICAgICAgY29uc3QgZmlyc3ROYW1lID1cbiAgICAgICAgICAgIGV2ZW50LnNoaXBwaW5nQWRkcmVzcz8ubmFtZT8uc3BsaXQoJyAnKVswXSB8fFxuICAgICAgICAgICAgZXZlbnQuYmlsbGluZ0RldGFpbHM/Lm5hbWU/LnNwbGl0KCcgJylbMF0gfHxcbiAgICAgICAgICAgICcnO1xuICAgICAgICBjb25zdCBsYXN0TmFtZSA9XG4gICAgICAgICAgICBldmVudC5zaGlwcGluZ0FkZHJlc3M/Lm5hbWU/LnNwbGl0KCcgJylbMV0gfHxcbiAgICAgICAgICAgIGV2ZW50LmJpbGxpbmdEZXRhaWxzPy5uYW1lPy5zcGxpdCgnICcpWzFdIHx8XG4gICAgICAgICAgICAnJztcblxuICAgICAgICBpZiAoc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcykge1xuICAgICAgICAgICAgY29uc3Qgc2hpcHBpbmdBZGRyZXNzID0gdGhpcy5fbWFwU2hpcHBpbmdBZGRyZXNzKFxuICAgICAgICAgICAgICAgIGV2ZW50LnNoaXBwaW5nQWRkcmVzcyxcbiAgICAgICAgICAgICAgICBldmVudC5iaWxsaW5nRGV0YWlscyxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlU2hpcHBpbmdBZGRyZXNzKHNoaXBwaW5nQWRkcmVzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiaWxsaW5nQWRkcmVzcyA9IHRoaXMuX21hcEJpbGxpbmdBZGRyZXNzKFxuICAgICAgICAgICAgZXZlbnQuc2hpcHBpbmdBZGRyZXNzLFxuICAgICAgICAgICAgZXZlbnQuYmlsbGluZ0RldGFpbHMsXG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgKTtcblxuICAgICAgICBhd2FpdCB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UudXBkYXRlQmlsbGluZ0FkZHJlc3MoYmlsbGluZ0FkZHJlc3MpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcFNoaXBwaW5nQWRkcmVzcyhcbiAgICAgICAgc2hpcHBpbmdBZGRyZXNzOiBTdHJpcGVMaW5rVjJFdmVudFsnc2hpcHBpbmdBZGRyZXNzJ10sXG4gICAgICAgIGJpbGxpbmdEZXRhaWxzOiBTdHJpcGVMaW5rVjJFdmVudFsnYmlsbGluZ0RldGFpbHMnXSxcbiAgICAgICAgZmlyc3ROYW1lOiBzdHJpbmcsXG4gICAgICAgIGxhc3ROYW1lOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICAgIHBob25lOiBiaWxsaW5nRGV0YWlscz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LmxpbmUxIHx8ICcnLFxuICAgICAgICAgICAgYWRkcmVzczI6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8ubGluZTIgfHwgJycsXG4gICAgICAgICAgICBjaXR5OiBzaGlwcGluZ0FkZHJlc3M/LmFkZHJlc3M/LmNpdHkgfHwgJycsXG4gICAgICAgICAgICBjb3VudHJ5Q29kZTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5jb3VudHJ5IHx8ICcnLFxuICAgICAgICAgICAgcG9zdGFsQ29kZTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5wb3N0YWxfY29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZUNvZGU6IHNoaXBwaW5nQWRkcmVzcz8uYWRkcmVzcz8uc3RhdGUgfHwgJycsXG4gICAgICAgICAgICBjdXN0b21GaWVsZHM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgX21hcEJpbGxpbmdBZGRyZXNzKFxuICAgICAgICBzaGlwcGluZ0FkZHJlc3M6IFN0cmlwZUxpbmtWMkV2ZW50WydzaGlwcGluZ0FkZHJlc3MnXSxcbiAgICAgICAgYmlsbGluZ0RldGFpbHM6IFN0cmlwZUxpbmtWMkV2ZW50WydiaWxsaW5nRGV0YWlscyddLFxuICAgICAgICBmaXJzdE5hbWU6IHN0cmluZyxcbiAgICAgICAgbGFzdE5hbWU6IHN0cmluZyxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVtYWlsOiBiaWxsaW5nRGV0YWlscz8uZW1haWwgfHwgJycsXG4gICAgICAgICAgICBmaXJzdE5hbWUsXG4gICAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICAgIHBob25lOiBiaWxsaW5nRGV0YWlscz8ucGhvbmUgfHwgJycsXG4gICAgICAgICAgICBjb21wYW55OiAnJyxcbiAgICAgICAgICAgIGFkZHJlc3MxOiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8ubGluZTEgfHwgJycsXG4gICAgICAgICAgICBhZGRyZXNzMjogJycsXG4gICAgICAgICAgICBjaXR5OiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8uY2l0eSB8fCAnJyxcbiAgICAgICAgICAgIGNvdW50cnlDb2RlOiBiaWxsaW5nRGV0YWlscz8uYWRkcmVzcz8uY291bnRyeSB8fCAnJyxcbiAgICAgICAgICAgIHBvc3RhbENvZGU6IGJpbGxpbmdEZXRhaWxzPy5hZGRyZXNzPy5wb3N0YWxfY29kZSB8fCAnJyxcbiAgICAgICAgICAgIHN0YXRlT3JQcm92aW5jZTogYmlsbGluZ0RldGFpbHM/LmFkZHJlc3M/LnN0YXRlIHx8ICcnLFxuICAgICAgICAgICAgc3RhdGVPclByb3ZpbmNlQ29kZTogc2hpcHBpbmdBZGRyZXNzPy5hZGRyZXNzPy5zdGF0ZSB8fCAnJyxcbiAgICAgICAgICAgIGN1c3RvbUZpZWxkczogW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24oZXJyb3I6IHVua25vd24sIG1ldGhvZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzUmVxdWVzdEVycm9yKGVycm9yKSB8fFxuICAgICAgICAgICAgIXRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLmlzQWRkaXRpb25hbEFjdGlvbkVycm9yKGVycm9yLmJvZHkuZXJyb3JzKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLl9zdHJpcGVDbGllbnQgfHwgIXRoaXMuX3N0cmlwZUVsZW1lbnRzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTm90SW5pdGlhbGl6ZWRFcnJvcihOb3RJbml0aWFsaXplZEVycm9yVHlwZS5QYXltZW50Tm90SW5pdGlhbGl6ZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBkYXRhOiBhZGRpdGlvbmFsQWN0aW9uRGF0YSB9ID0gZXJyb3IuYm9keS5hZGRpdGlvbmFsX2FjdGlvbl9yZXF1aXJlZDtcbiAgICAgICAgY29uc3QgeyB0b2tlbiB9ID0gYWRkaXRpb25hbEFjdGlvbkRhdGE7XG5cbiAgICAgICAgY29uc3QgeyBwYXltZW50SW50ZW50IH0gPSBhd2FpdCB0aGlzLl9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWN0aW9uRGF0YSxcbiAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHBheW1lbnRQYXlsb2FkID0gdGhpcy5fZ2V0UGF5bWVudFBheWxvYWQobWV0aG9kSWQsIHBheW1lbnRJbnRlbnQ/LmlkIHx8IHRva2VuKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlTG9hZGluZ0luZGljYXRvcih0cnVlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zdWJtaXRQYXltZW50KHBheW1lbnRQYXlsb2FkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2NvbXBsZXRlQ2hlY2tvdXRGbG93KCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLnN0cmlwZUludGVncmF0aW9uU2VydmljZS50aHJvd1BheW1lbnRDb25maXJtYXRpb25Qcm9jZWVkTWVzc2FnZSgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlTG9hZGluZ0luZGljYXRvcihmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9jb25maXJtU3RyaXBlUGF5bWVudE9yVGhyb3coXG4gICAgICAgIGFkZGl0aW9uYWxBY3Rpb25EYXRhOiBTdHJpcGVBZGRpdGlvbmFsQWN0aW9uUmVxdWlyZWRbJ2RhdGEnXSxcbiAgICAgICAgbWV0aG9kSWQ6IHN0cmluZyxcbiAgICApOiBQcm9taXNlPFN0cmlwZVJlc3VsdCB8IG5ldmVyPiB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4sIHJlZGlyZWN0X3VybCB9ID0gYWRkaXRpb25hbEFjdGlvbkRhdGE7XG4gICAgICAgIGNvbnN0IHN0cmlwZVBheW1lbnREYXRhID0gdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UubWFwU3RyaXBlUGF5bWVudERhdGEoXG4gICAgICAgICAgICB0aGlzLl9zdHJpcGVFbGVtZW50cyxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybCxcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHN0cmlwZUVycm9yOiBTdHJpcGVFcnJvciB8IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXNQYXltZW50Q29tcGxldGVkID0gYXdhaXQgdGhpcy5zdHJpcGVJbnRlZ3JhdGlvblNlcnZpY2UuaXNQYXltZW50Q29tcGxldGVkKFxuICAgICAgICAgICAgICAgIG1ldGhvZElkLFxuICAgICAgICAgICAgICAgIHRoaXMuX3N0cmlwZUNsaWVudCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9ICFpc1BheW1lbnRDb21wbGV0ZWRcbiAgICAgICAgICAgICAgICA/IGF3YWl0IHRoaXMuX3N0cmlwZUNsaWVudD8uY29uZmlybVBheW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiBzdHJpcGVQYXltZW50RGF0YS5lbGVtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBTdHJpcGVTdHJpbmdDb25zdGFudHMuSUZfUkVRVUlSRUQsXG4gICAgICAgICAgICAgICAgICAgICAgY29uZmlybVBhcmFtczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5fdXJsOiBzdHJpcGVQYXltZW50RGF0YS5jb25maXJtUGFyYW1zPy5yZXR1cm5fdXJsLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogYXdhaXQgdGhpcy5fc3RyaXBlQ2xpZW50Py5yZXRyaWV2ZVBheW1lbnRJbnRlbnQodG9rZW4gfHwgJycpO1xuXG4gICAgICAgICAgICBzdHJpcGVFcnJvciA9IGNvbmZpcm1hdGlvblJlc3VsdD8uZXJyb3I7XG5cbiAgICAgICAgICAgIGlmIChzdHJpcGVFcnJvciB8fCAhY29uZmlybWF0aW9uUmVzdWx0Py5wYXltZW50SW50ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBheW1lbnRNZXRob2RGYWlsZWRFcnJvcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY29uZmlybWF0aW9uUmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcjogdW5rbm93bikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLnRocm93U3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfY29tcGxldGVDaGVja291dEZsb3coKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5fb25Db21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uQ29tcGxldGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCcvY2hlY2tvdXQvb3JkZXItY29uZmlybWF0aW9uJyk7XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2dldFBheW1lbnRQYXlsb2FkKG1ldGhvZElkOiBzdHJpbmcsIHRva2VuPzogc3RyaW5nKTogUGF5bWVudCB7XG4gICAgICAgIGNvbnN0IGNhcnRJZCA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnQoKT8uaWQgfHwgJyc7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFBheWxvYWQgPSB7XG4gICAgICAgICAgICBjYXJ0X2lkOiBjYXJ0SWQsXG4gICAgICAgICAgICAuLi4odG9rZW4gPyB7IGNyZWRpdF9jYXJkX3Rva2VuOiB7IHRva2VuIH0gfSA6IHt9KSxcbiAgICAgICAgICAgIGNvbmZpcm06IGZhbHNlLFxuICAgICAgICAgICAgbWV0aG9kOiBTdHJpcGVQYXltZW50TWV0aG9kVHlwZS5MaW5rLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXRob2RJZCxcbiAgICAgICAgICAgIHBheW1lbnREYXRhOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVkUGF5bG9hZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqIFV0aWxzICogKi9cblxuICAgIHByaXZhdGUgX3Nob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MoKSB7XG4gICAgICAgIGNvbnN0IHsgZ2V0Q2FydCB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG5cbiAgICAgICAgY29uc3QgeyBsaW5lSXRlbXMgfSA9IGdldENhcnQoKSB8fCB7fTtcblxuICAgICAgICByZXR1cm4gISFsaW5lSXRlbXM/LnBoeXNpY2FsSXRlbXMubGVuZ3RoO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX3VwZGF0ZURpc3BsYXllZFByaWNlKCkge1xuICAgICAgICBpZiAodGhpcy5fc3RyaXBlRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cmlwZUVsZW1lbnRzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IHRoaXMuX2dldEN1cnJlbmN5KCksXG4gICAgICAgICAgICAgICAgbW9kZTogJ3BheW1lbnQnLFxuICAgICAgICAgICAgICAgIGFtb3VudDogYXdhaXQgdGhpcy5fZ2V0VG90YWxQcmljZSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRDdXJyZW5jeSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5Q29kZSA9IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5nZXRTdGF0ZSgpLmdldENhcnQoKT8uY3VycmVuY3k7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW5jeUNvZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW5jeUNvZGUgPSBjdXJyZW5jeUNvZGUuY29kZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbmN5Q29kZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIF9nZXRUb3RhbFByaWNlKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkQ2hlY2tvdXQoKTtcblxuICAgICAgICBjb25zdCB7IGdldENoZWNrb3V0T3JUaHJvdywgZ2V0Q2FydCB9ID0gdGhpcy5wYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlLmdldFN0YXRlKCk7XG4gICAgICAgIGNvbnN0IHsgZGVjaW1hbFBsYWNlcyB9ID0gZ2V0Q2FydCgpPy5jdXJyZW5jeSB8fCB7fTtcbiAgICAgICAgY29uc3QgdG90YWxQcmljZSA9IHJvdW5kKGdldENoZWNrb3V0T3JUaHJvdygpLm91dHN0YW5kaW5nQmFsYW5jZSwgZGVjaW1hbFBsYWNlcykudG9GaXhlZChcbiAgICAgICAgICAgIGRlY2ltYWxQbGFjZXMsXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvQ2VudHMoK3RvdGFsUHJpY2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgX2dldEF2YWlsYWJsZUNvdW50cmllcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGNvdW50cmllcyA9IGF3YWl0IHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5sb2FkU2hpcHBpbmdDb3VudHJpZXMoKTtcbiAgICAgICAgY29uc3QgZGVsaXZlcmFibGVDb3VudHJpZXMgPVxuICAgICAgICAgICAgY291bnRyaWVzLmdldFNoaXBwaW5nQ291bnRyaWVzKCk/Lm1hcCgoY291bnRyeSkgPT4gY291bnRyeS5jb2RlKSB8fCBbXTtcblxuICAgICAgICByZXR1cm4gZGVsaXZlcmFibGVDb3VudHJpZXMuZmlsdGVyKChjb2RlKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZXhwcmVzc0NoZWNrb3V0QWxsb3dlZENvdW50cnlDb2Rlcy5pbmNsdWRlcyhjb2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfZ2V0QXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zKCk6IFByb21pc2U8U3RyaXBlTGlua1YyU2hpcHBpbmdSYXRlW10gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnRzID0gc3RhdGUuZ2V0Q29uc2lnbm1lbnRzKCk7XG5cbiAgICAgICAgaWYgKCFjb25zaWdubWVudHM/LlswXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29uc2lnbm1lbnQgPSBjb25zaWdubWVudHNbMF07XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSAoY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zIHx8IFtdKS5tYXAoXG4gICAgICAgICAgICB0aGlzLl9nZXRTdHJpcGVTaGlwcGluZ09wdGlvbi5iaW5kKHRoaXMpLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uID0gY29uc2lnbm1lbnQuYXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zPy5maW5kKFxuICAgICAgICAgICAgKHNoaXBwaW5nT3B0aW9uKSA9PiBzaGlwcGluZ09wdGlvbi5pc1JlY29tbWVuZGVkLFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBzZWxlY3RlZElkID0gY29uc2lnbm1lbnQuc2VsZWN0ZWRTaGlwcGluZ09wdGlvbj8uaWQ7XG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGVkSWQgPSByZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uPy5pZDtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRJZCkge1xuICAgICAgICAgICAgLy8gU2V0IHNlbGVjdGVkIHNoaXBwaW5nIG9wdGlvbiBmaXJzdCBpbiB0aGUgYXJyYXksIGFzIGl0IHdpbGwgYmUgc2VsZWN0ZWQgYnkgZGVmYXVsdFxuICAgICAgICAgICAgb3B0aW9ucy5zb3J0KChvcHRpb24pID0+IChvcHRpb24uaWQgPT09IHNlbGVjdGVkSWQgPyAtMSA6IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWNvbW1lbmRlZElkKSB7XG4gICAgICAgICAgICAvLyBTZXQgcmVjb21tZW5kZWQgc2hpcHBpbmcgb3B0aW9uIGZpcnN0IGluIHRoZSBhcnJheSwgYXMgaXQgd2lsbCBiZSBzZWxlY3RlZCBieSBkZWZhdWx0XG4gICAgICAgICAgICBvcHRpb25zLnNvcnQoKG9wdGlvbikgPT4gKG9wdGlvbi5pZCA9PT0gcmVjb21tZW5kZWRJZCA/IC0xIDogMCkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2UocmVjb21tZW5kZWRJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZShvcHRpb25zWzBdPy5pZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9nZXRTdHJpcGVTaGlwcGluZ09wdGlvbih7IGlkLCBjb3N0LCBkZXNjcmlwdGlvbiB9OiBTaGlwcGluZ09wdGlvbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBhbW91bnQ6IHRoaXMuX3RvQ2VudHMoY29zdCksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBfaGFuZGxlU2hpcHBpbmdPcHRpb25DaGFuZ2Uob3B0aW9uSWQ/OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCFvcHRpb25JZCB8fCBvcHRpb25JZCA9PT0gJ3NoaXBwaW5nX29wdGlvbl91bnNlbGVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudEludGVncmF0aW9uU2VydmljZS5zZWxlY3RTaGlwcGluZ09wdGlvbihvcHRpb25JZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfZ2V0QW1vdW50VHJhbnNmb3JtZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLl9hbW91bnRUcmFuc2Zvcm1lcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Ftb3VudFRyYW5zZm9ybWVyO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyBnZXRDYXJ0IH0gPSB0aGlzLnBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgY29uc3QgeyBjdXJyZW5jeSB9ID0gZ2V0Q2FydCgpIHx8IHt9O1xuXG4gICAgICAgIGlmIChjdXJyZW5jeSkge1xuICAgICAgICAgICAgY29uc3QgYW1vdW50VHJhbnNmb3JtZXIgPSBuZXcgQW1vdW50VHJhbnNmb3JtZXIoY3VycmVuY3kuZGVjaW1hbFBsYWNlcyk7XG5cbiAgICAgICAgICAgIHJldHVybiBhbW91bnRUcmFuc2Zvcm1lcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgX3RvQ2VudHMoYW1vdW50OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgZmFsbGJhY2tWYWx1ZSA9IE1hdGgucm91bmQoYW1vdW50ICogMTAwKTtcbiAgICAgICAgY29uc3QgYW1vdW50VHJhbnNmb3JtZXIgPSB0aGlzLl9nZXRBbW91bnRUcmFuc2Zvcm1lcigpO1xuXG4gICAgICAgIGlmIChhbW91bnRUcmFuc2Zvcm1lcikge1xuICAgICAgICAgICAgcmV0dXJuIGFtb3VudFRyYW5zZm9ybWVyLnRvSW50ZWdlcihhbW91bnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrVmFsdWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfdG9nZ2xlTG9hZGluZ0luZGljYXRvcihpc0xvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZyAmJiB0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3Iuc2hvdyh0aGlzLl9sb2FkaW5nSW5kaWNhdG9yQ29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ0luZGljYXRvci5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBnZXRTY3JpcHRMb2FkZXIgfSBmcm9tICdAYmlnY29tbWVyY2Uvc2NyaXB0LWxvYWRlcic7XG5cbmltcG9ydCB7XG4gICAgQ2hlY2tvdXRCdXR0b25TdHJhdGVneUZhY3RvcnksXG4gICAgdG9SZXNvbHZhYmxlTW9kdWxlLFxufSBmcm9tICdAYmlnY29tbWVyY2UvY2hlY2tvdXQtc2RrL3BheW1lbnQtaW50ZWdyYXRpb24tYXBpJztcbmltcG9ydCB7XG4gICAgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlLFxuICAgIFN0cmlwZVNjcmlwdExvYWRlcixcbn0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay9zdHJpcGUtdXRpbHMnO1xuaW1wb3J0IHsgREVGQVVMVF9DT05UQUlORVJfU1RZTEVTLCBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnQGJpZ2NvbW1lcmNlL2NoZWNrb3V0LXNkay91aSc7XG5cbmltcG9ydCBTdHJpcGVMaW5rVjJCdXR0b25TdHJhdGVneSBmcm9tICcuL3N0cmlwZS1saW5rLXYyLWJ1dHRvbi1zdHJhdGVneSc7XG5cbmNvbnN0IGNyZWF0ZUxpbmtWMkJ1dHRvblN0cmF0ZWd5OiBDaGVja291dEJ1dHRvblN0cmF0ZWd5RmFjdG9yeTxTdHJpcGVMaW5rVjJCdXR0b25TdHJhdGVneT4gPSAoXG4gICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbikgPT4ge1xuICAgIGNvbnN0IHN0cmlwZVNjcmlwdExvYWRlciA9IG5ldyBTdHJpcGVTY3JpcHRMb2FkZXIoZ2V0U2NyaXB0TG9hZGVyKCkpO1xuICAgIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3IgPSBuZXcgTG9hZGluZ0luZGljYXRvcih7XG4gICAgICAgIGNvbnRhaW5lclN0eWxlczogREVGQVVMVF9DT05UQUlORVJfU1RZTEVTLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBTdHJpcGVMaW5rVjJCdXR0b25TdHJhdGVneShcbiAgICAgICAgcGF5bWVudEludGVncmF0aW9uU2VydmljZSxcbiAgICAgICAgc3RyaXBlU2NyaXB0TG9hZGVyLFxuICAgICAgICBuZXcgU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlKHBheW1lbnRJbnRlZ3JhdGlvblNlcnZpY2UsIHN0cmlwZVNjcmlwdExvYWRlciksXG4gICAgICAgIGxvYWRpbmdJbmRpY2F0b3IsXG4gICAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHRvUmVzb2x2YWJsZU1vZHVsZShjcmVhdGVMaW5rVjJCdXR0b25TdHJhdGVneSwgW3sgaWQ6ICdzdHJpcGVvY3MnIH1dKTtcbiJdLCJuYW1lcyI6WyJNaXNzaW5nRGF0YUVycm9yVHlwZSIsIk5vdEluaXRpYWxpemVkRXJyb3JUeXBlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInRvUmVzb2x2YWJsZU1vZHVsZSIsIm1vZHVsZSIsInJlc29sdmVJZHMiLCJPYmplY3QiLCJhc3NpZ24iLCJkIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN0YW5kYXJkRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN1cGVyIiwibmFtZSIsInR5cGUiLCJzZXRQcm90b3R5cGVPZiIsInRoaXMiLCJfX3Byb3RvX18iLCJjYXB0dXJlU3RhY2tUcmFjZSIsInN0YWNrIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJQYXltZW50QXJndW1lbnRJbnZhbGlkRXJyb3IiLCJpbnZhbGlkRmllbGRzIiwiam9pbiIsImlzSG9zdGVkSW5zdHJ1bWVudExpa2UiLCJpbnN0cnVtZW50Iiwic2hvdWxkU2F2ZUluc3RydW1lbnQiLCJzaG91bGRTZXRBc0RlZmF1bHRJbnN0cnVtZW50IiwiaXNWYXVsdGVkSW5zdHJ1bWVudCIsIkJvb2xlYW4iLCJpbnN0cnVtZW50SWQiLCJNaXNzaW5nRGF0YUVycm9yIiwic3VidHlwZSIsIk1pc3NpbmdCaWxsaW5nQWRkcmVzcyIsIk1pc3NpbmdDYXJ0IiwiTWlzc2luZ0NvbnNpZ25tZW50cyIsIk1pc3NpbmdDaGVja291dCIsIk1pc3NpbmdDdXN0b21lciIsIk1pc3NpbmdDaGVja291dENvbmZpZyIsIk1pc3NpbmdPcmRlckNvbmZpZyIsIk1pc3NpbmdPcmRlciIsIk1pc3NpbmdPcmRlcklkIiwiTWlzc2luZ1BheW1lbnQiLCJNaXNzaW5nUGF5bWVudFRva2VuIiwiTWlzc2luZ1BheW1lbnRNZXRob2QiLCJNaXNzaW5nU2hpcHBpbmdBZGRyZXNzIiwiZ2V0RXJyb3JNZXNzYWdlIiwiT3JkZXJGaW5hbGl6YXRpb25Ob3RSZXF1aXJlZEVycm9yIiwiTm90SW5pdGlhbGl6ZWRFcnJvciIsIkN1c3RvbWVyTm90SW5pdGlhbGl6ZWQiLCJQYXltZW50Tm90SW5pdGlhbGl6ZWQiLCJTaGlwcGluZ05vdEluaXRpYWxpemVkIiwiU3BhbVByb3RlY3Rpb25Ob3RJbml0aWFsaXplZCIsImVycm9yIiwiUGF5bWVudE1ldGhvZENhbmNlbGxlZEVycm9yIiwiaXNJbmRpdmlkdWFsQ2FyZEVsZW1lbnRPcHRpb25zIiwiaW5kaXZpZHVhbENhcmRFbGVtZW50T3B0aW9ucyIsImNhcmROdW1iZXJFbGVtZW50T3B0aW9ucyIsImNhcmRDdmNFbGVtZW50T3B0aW9ucyIsImNhcmRFeHBpcnlFbGVtZW50T3B0aW9ucyIsIkljb25TdHlsZSIsIlN0cmlwZUVsZW1lbnRUeXBlIiwiU3RyaXBlUGF5bWVudE1ldGhvZFR5cGUiLCJTdHJpcGVWM0Vycm9yVHlwZSIsIlN0cmlwZVYzRXJyb3IiLCJBdXRoRmFpbHVyZSIsIkFQTV9SRURJUkVDVCIsIkFsaXBheSIsIklERUFMIiwiU3RyaXBlVjNQYXltZW50U3RyYXRlZ3kiLCJwYXltZW50SW50ZWdyYXRpb25TZXJ2aWNlIiwic2NyaXB0TG9hZGVyIiwiaW5pdGlhbGl6ZSIsIm9wdGlvbnMiLCJzdHJpcGV2MyIsIm1ldGhvZElkIiwiZ2F0ZXdheUlkIiwiaW5pdGlhbGl6ZU9wdGlvbnMiLCJpc0RlaW5pdGlhbGl6ZSIsInBheW1lbnRNZXRob2QiLCJnZXRTdGF0ZSIsImdldFBheW1lbnRNZXRob2RPclRocm93IiwiaW5pdGlhbGl6YXRpb25EYXRhIiwic3RyaXBlUHVibGlzaGFibGVLZXkiLCJzdHJpcGVDb25uZWN0ZWRBY2NvdW50IiwidXNlSW5kaXZpZHVhbENhcmRGaWVsZHMiLCJhbGxvd1JlZGlzcGxheUZvclN0b3JlZEluc3RydW1lbnRzIiwiX2FsbG93UmVkaXNwbGF5Rm9yU3RvcmVkSW5zdHJ1bWVudHMiLCJmb3JtIiwiZ2V0SW5pdGlhbGl6ZU9wdGlvbnMiLCJzdHJpcGVWM0NsaWVudCIsImxvYWRTdHJpcGVKcyIsImlzQ3JlZGl0Q2FyZCIsInNob3VsZFNob3dUU1ZIb3N0ZWRGb3JtIiwiaG9zdGVkRm9ybSIsIm1vdW50Q2FyZFZlcmlmaWNhdGlvbkZpZWxkcyIsInN0cmlwZUVsZW1lbnQiLCJtb3VudENhcmRGaWVsZHMiLCJleGVjdXRlIiwib3JkZXJSZXF1ZXN0IiwicGF5bWVudCIsIm9yZGVyIiwiZm9ybWF0dGVkUGF5bG9hZCIsInN0cmlwZUVycm9yIiwicGF5bWVudERhdGEiLCJzaG91bGRTdWJtaXRPcmRlckJlZm9yZUxvYWRpbmdBUE0iLCJpbmNsdWRlcyIsImlzU3RvcmVDcmVkaXRBcHBsaWVkIiwidXNlU3RvcmVDcmVkaXQiLCJnZXRDaGVja291dE9yVGhyb3ciLCJhcHBseVN0b3JlQ3JlZGl0Iiwic3VibWl0T3JkZXIiLCJsb2FkUGF5bWVudE1ldGhvZCIsInBhcmFtcyIsIm1ldGhvZCIsInN0YXRlIiwiY2xpZW50VG9rZW4iLCJleGVjdXRlV2l0aFZhdWx0ZWQiLCJyZXN1bHQiLCJjb25maXJtU3RyaXBlUGF5bWVudCIsImlkIiwidG9rZW4iLCJwYXltZW50SW50ZW50IiwiY3JlZGl0X2NhcmRfdG9rZW4iLCJ2YXVsdF9wYXltZW50X2luc3RydW1lbnQiLCJjb25maXJtIiwic2V0X2FzX2RlZmF1bHRfc3RvcmVkX2luc3RydW1lbnQiLCJDcmVkaXRDYXJkIiwiY2xpZW50X3Rva2VuIiwicGF5bWVudFBheWxvYWQiLCJidWlsZFBheW1lbnRQYXlsb2FkIiwic3VibWl0UGF5bWVudCIsInByb2Nlc3NBZGRpdGlvbmFsQWN0aW9uIiwiaGFuZGxlRW1wdHlQYXltZW50SW50ZW50RXJyb3IiLCJmaW5hbGl6ZSIsIlByb21pc2UiLCJyZWplY3QiLCJkZWluaXRpYWxpemUiLCJkZXRhY2giLCJ1bm1vdW50RWxlbWVudCIsInJlc29sdmUiLCJpc0NhbmNlbGxhdGlvbkVycm9yIiwicGF5bWVudF9pbnRlbnQiLCJsYXN0X3BheW1lbnRfZXJyb3IiLCJpbmRleE9mIiwiaXNBdXRoRXJyb3IiLCJjb2RlIiwiaXNIb3N0ZWRGaWVsZEF2YWlsYWJsZSIsImRlZmluZWRGaWVsZHMiLCJvbWl0QnkiLCJmaWVsZHMiLCJpc0VtcHR5IiwiaXNIb3N0ZWRQYXltZW50Rm9ybUVuYWJsZWQiLCJjb25maWciLCJpc0hvc3RlZEZvcm1FbmFibGVkIiwiY2xpZW50U2VjcmV0IiwicmV0dXJuVXJsIiwiZ2V0U3RyaXBlSnMiLCJjb25maXJtQWxpcGF5UGF5bWVudCIsInJldHVybl91cmwiLCJoYW5kbGVBY3Rpb25zIiwiZGF0YSIsIm1hcFN0cmlwZVBheW1lbnREYXRhIiwiY29uZmlybUlkZWFsUGF5bWVudCIsIlNlcGEiLCJjb25maXJtU2VwYURlYml0UGF5bWVudCIsImNhcmQiLCJnZXRTdHJpcGVDYXJkRWxlbWVudHMiLCJnZXRTdHJpcGVFbGVtZW50IiwiYmlsbGluZ0RldGFpbHMiLCJtYXBTdHJpcGVCaWxsaW5nRGV0YWlscyIsImdldEJpbGxpbmdBZGRyZXNzIiwiZ2V0Q3VzdG9tZXIiLCJzaG91bGRBbGxvd1JlZGlzcGxheSIsImNyZWF0ZVBheW1lbnRNZXRob2QiLCJiaWxsaW5nX2RldGFpbHMiLCJhbGxvd19yZWRpc3BsYXkiLCJiaWdwYXlfdG9rZW4iLCJKU09OIiwic3RyaW5naWZ5IiwidmFsaWRhdGUiLCJzdWJtaXQiLCJsb2FkQ3VycmVudE9yZGVyIiwic3RyaXBlQ2FyZEVsZW1lbnRzIiwic29tZSIsImJvZHkiLCJlcnJvcnMiLCJsb2FkIiwiZ2V0TG9jYWxlIiwibWFwU3RyaXBlQWRkcmVzcyIsImFkZHJlc3MiLCJjaXR5IiwiY291bnRyeUNvZGUiLCJjb3VudHJ5IiwiYWRkcmVzczEiLCJsaW5lMSIsImFkZHJlc3MyIiwibGluZTIiLCJwb3N0YWxDb2RlIiwic3RhdGVPclByb3ZpbmNlQ29kZSIsInBvc3RhbF9jb2RlIiwiYmlsbGluZ0FkZHJlc3MiLCJjdXN0b21lciIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwidHJpbSIsInppcENvZGVFbGVtZW50T3B0aW9ucyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250YWluZXJJZCIsInZhbHVlIiwiYWRkcmVzc2VzIiwiaXNCaWxsaW5nQWRkcmVzc0xpa2UiLCJjdXN0b21lckFkZHJlc3MiLCJlbWFpbCIsInBob25lIiwic3RyaXBlUGF5bWVudE1ldGhvZFR5cGUiLCJwYXltZW50X21ldGhvZCIsInN0cmlwZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJjYXJkTnVtYmVyRWxlbWVudCIsImdldEVsZW1lbnQiLCJDYXJkTnVtYmVyIiwiY3JlYXRlIiwiY2FyZEV4cGlyeUVsZW1lbnQiLCJDYXJkRXhwaXJ5IiwiY2FyZEN2Y0VsZW1lbnQiLCJDYXJkQ3ZjIiwibW91bnQiLCJmb3JtT3B0aW9ucyIsInN0b3JlQ29uZmlnIiwiZ2V0U3RvcmVDb25maWciLCJiaWdwYXlCYXNlVXJsIiwicGF5bWVudFNldHRpbmdzIiwiY3JlYXRlSG9zdGVkRm9ybSIsImF0dGFjaCIsImlzQWRkaXRpb25hbEFjdGlvbkVycm9yIiwiaXNUaHJlZURTZWN1cmVSZXF1aXJlZEVycm9yIiwiYWN0aW9uIiwiYWRkaXRpb25hbF9hY3Rpb25fcmVxdWlyZWQiLCJyZWRpcmVjdF91cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJ0aHJlZV9kc19yZXN1bHQiLCJuZWVkc0NvbmZpcm0iLCJjYXRjaGVkQ29uZmlybUVycm9yIiwiY29uZmlybUNhcmRQYXltZW50IiwiZ2V0UGF5bWVudFRva2VuIiwidW5tb3VudCIsInVuZGVmaW5lZCIsIlBheW1lbnRNZXRob2RDbGllbnRVbmF2YWlsYWJsZUVycm9yIiwiU3RyaXBlVjNTY3JpcHRMb2FkZXIiLCJzdHJpcGVXaW5kb3ciLCJzdHJpcGVBY2NvdW50IiwibG9jYWxlIiwibG9hZFNjcmlwdCIsInRoZW4iLCJTdHJpcGUiLCJiZXRhcyIsImFwaVZlcnNpb24iLCJnZXRTY3JpcHRMb2FkZXIiLCJnYXRld2F5IiwiU3RyaXBlRm9ybU1vZGUiLCJTdHJpcGVEaXNwbGF5TmFtZSIsIlN0cmlwZUxvYWRBY3Rpb25zUmVzdWx0VHlwZSIsIlN0cmlwZVN0cmluZ0NvbnN0YW50cyIsIlN0cmlwZUpzVmVyc2lvbiIsIlN0cmlwZVBheW1lbnRJbnRlbnRTdGF0dXMiLCJTdHJpcGVFbGVtZW50RXZlbnQiLCJTdHJpcGVJbnN0cnVtZW50U2V0dXBGdXR1cmVVc2FnZSIsIlN0cmlwZVNjcmlwdExvYWRlciIsImdldFN0cmlwZUNsaWVudCIsInN0cmlwZUpzVmVyc2lvbiIsImJjU3RyaXBlQ2xpZW50Iiwic3RyaXBlIiwic3RyaXBlQ2xpZW50IiwiZ2V0RWxlbWVudHMiLCJiY1N0cmlwZUVsZW1lbnRzIiwidXBkYXRlU3RyaXBlRWxlbWVudHMiLCJ1cGRhdGUiLCJmZXRjaFVwZGF0ZXMiLCJnZXRDaGVja291dFNlc3Npb24iLCJzdHJpcGVDaGVja291dFNlc3Npb24iLCJiY1N0cmlwZUNoZWNrb3V0U2Vzc2lvbiIsImluaXRDaGVja291dCIsImdldFNjcmlwdFVybCIsIlYzIiwiUGF5bWVudE1ldGhvZEZhaWxlZEVycm9yIiwiU3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlIiwiaXNNb3VudGVkIiwiY2hlY2tvdXRFdmVudHNVbnN1YnNjcmliZSIsImluaXRDaGVja291dEV2ZW50c1N1YnNjcmlwdGlvbiIsInN0cmlwZUluaXRpYWxpemF0aW9uT3B0aW9ucyIsInN1YnNjcmliZSIsInBheW1lbnRFbGVtZW50IiwiUEFZTUVOVCIsInVwZGF0ZVN0cmlwZVBheW1lbnRJbnRlbnQiLCJvbkVycm9yIiwibW91bnRFbGVtZW50IiwiZ2V0Q2hlY2tvdXQiLCJvdXRzdGFuZGluZ0JhbGFuY2UiLCJjb3Vwb25zIiwibWFwQXBwZWFyYW5jZVZhcmlhYmxlcyIsInN0eWxlcyIsImNvbG9yUHJpbWFyeSIsImZpZWxkSW5uZXJTaGFkb3ciLCJjb2xvckJhY2tncm91bmQiLCJmaWVsZEJhY2tncm91bmQiLCJjb2xvclRleHQiLCJsYWJlbFRleHQiLCJjb2xvckRhbmdlciIsImZpZWxkRXJyb3JUZXh0IiwiY29sb3JUZXh0U2Vjb25kYXJ5IiwiY29sb3JUZXh0UGxhY2Vob2xkZXIiLCJmaWVsZFBsYWNlaG9sZGVyVGV4dCIsImNvbG9ySWNvbiIsIm1hcElucHV0QXBwZWFyYW5jZVJ1bGVzIiwiYm9yZGVyQ29sb3IiLCJmaWVsZEJvcmRlciIsImNvbG9yIiwiZmllbGRUZXh0IiwiYm94U2hhZG93IiwidGhyb3dTdHJpcGVFcnJvciIsInRocm93RGlzcGxheWFibGVTdHJpcGVFcnJvciIsImVycm9yTWVzc2FnZSIsInRocm93UGF5bWVudENvbmZpcm1hdGlvblByb2NlZWRNZXNzYWdlIiwiaXNQYXltZW50Q29tcGxldGVkIiwic3RyaXBlVVBFQ2xpZW50IiwiZmVhdHVyZXMiLCJnZXRTdG9yZUNvbmZpZ09yVGhyb3ciLCJjaGVja291dFNldHRpbmdzIiwicmV0cmlldmVQYXltZW50SW50ZW50Iiwic3RhdHVzIiwiU1VDQ0VFREVEIiwiX21hcFN0cmlwZUFkZHJlc3MiLCJyZWRpcmVjdCIsIklGX1JFUVVJUkVEIiwiY29uZmlybVBhcmFtcyIsInBheW1lbnRfbWV0aG9kX2RhdGEiLCJpc1JlZGlyZWN0QWN0aW9uIiwiYWRkaXRpb25hbEFjdGlvbiIsImlzT25QYWdlQWRkaXRpb25hbEFjdGlvbiIsImdldFN0cmlwZUpzVmVyc2lvbiIsInVzZU5ld1N0cmlwZUpzVmVyc2lvbiIsIkNMT1ZFUiIsIkRFRkFVTFRfUkVTUE9OU0UiLCJoZWFkZXJzIiwiUmVxdWVzdEVycm9yIiwicmVzcG9uc2UiLCJpc1N0cmlwZVBheW1lbnRNZXRob2RMaWtlIiwic2hvcHBlckxhbmd1YWdlIiwic3VwcG9ydGVkTG9jYWxlcyIsImFyIiwiYmciLCJjcyIsImRhIiwiZGUiLCJlbCIsImVuIiwiZXMiLCJldCIsImZpIiwiZmlsIiwiZnIiLCJoZSIsImhyIiwiaHUiLCJpdCIsImphIiwia28iLCJsdCIsImx2IiwibXMiLCJtdCIsIm5iIiwibmwiLCJwbCIsInB0Iiwicm8iLCJydSIsInNrIiwic2wiLCJzdiIsInRoIiwidHIiLCJ2aSIsInpoIiwiZm9ybWF0TG9jYWxlIiwibG9jYWxlTGFuZ3VhZ2UiLCJsYW5ndWFnZSIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJjb3VudHJ5TG9jYWxlcyIsImZvcm1hdHRlZExvY2FsZSIsInRvVXBwZXJDYXNlIiwiU1RSSVBFX1VQRV9DTElFTlRfQkVUQVMiLCJTVFJJUEVfVVBFX0NMSUVOVF9BUElfVkVSU0lPTiIsImlzU3RyaXBlQWNjZWxlcmF0ZWRDaGVja291dEN1c3RvbWVyIiwiU3RyaXBlVVBFUGF5bWVudFN0cmF0ZWd5Iiwic3RyaXBlSW50ZWdyYXRpb25TZXJ2aWNlIiwic3RyaXBldXBlIiwiX2xvYWRTdHJpcGVFbGVtZW50IiwiY2F0Y2giLCJfc3RyaXBlRWxlbWVudHMiLCJfc3RyaXBlVVBFQ2xpZW50IiwicGF5bWVudFByb3ZpZGVyQ3VzdG9tZXIiLCJnZXRQYXltZW50UHJvdmlkZXJDdXN0b21lck9yVGhyb3ciLCJzdHJpcGVMaW5rQXV0aGVudGljYXRpb25TdGF0ZSIsImdldEN1c3RvbWVyT3JUaHJvdyIsImdldEJpbGxpbmdBZGRyZXNzT3JUaHJvdyIsInVwZGF0ZUJpbGxpbmdBZGRyZXNzIiwiX2V4ZWN1dGVXaXRoVmF1bHRlZCIsIl9leGVjdXRlV2l0aFN0cmlwZUNvbmZpcm1hdGlvbiIsIl9nZXRQYXltZW50UGF5bG9hZCIsIl9wcm9jZXNzQWRkaXRpb25hbEFjdGlvbldpdGhTdHJpcGVDb25maXJtYXRpb24iLCJjYXJ0SWQiLCJnZXRDYXJ0IiwiY2FydF9pZCIsIl9wcm9jZXNzVmF1bHRlZEFkZGl0aW9uYWxBY3Rpb24iLCJzdHlsZSIsInJlbmRlciIsImluaXRTdHJpcGVFbGVtZW50VXBkYXRlVHJpZ2dlciIsImVuYWJsZUxpbmsiLCJhcHBlYXJhbmNlIiwiX2xvYWRTdHJpcGVKcyIsIl9pc1N0cmlwZUVsZW1lbnRVcGRhdGVFbmFibGVkIiwidmFyaWFibGVzIiwicnVsZXMiLCJnZXRTaGlwcGluZ0FkZHJlc3MiLCJORVZFUiIsIkFVVE8iLCJ3YWxsZXRzIiwiYXBwbGVQYXkiLCJnb29nbGVQYXkiLCJsaW5rIiwiX2dldFN0cmlwZUVsZW1lbnRUZXJtcyIsIm9uIiwiUkVBRFkiLCJDSEFOR0UiLCJldmVudCIsIl91cGRhdGVTdHJpcGVMaW5rU3RhdGVCeUVsZW1lbnRUeXBlIiwiX3VwZGF0ZVN0cmlwZUVsZW1lbnQiLCJiaW5kIiwiYWRkaXRpb25hbEFjdGlvbkRhdGEiLCJfY29uZmlybVN0cmlwZVBheW1lbnRPclRocm93Iiwic3RyaXBlUGF5bWVudERhdGEiLCJjb25maXJtYXRpb25SZXN1bHQiLCJjb25maXJtUGF5bWVudCIsImdldENhcnRMb2NhbGUiLCJzaG91bGRTaG93VGVybXMiLCJ0ZXJtcyIsInBheW1lbnRFbGVtZW50VHlwZSIsImlzU3RyaXBlTGlua0VsZW1lbnRUeXBlIiwiTGluayIsInVwZGF0ZVBheW1lbnRQcm92aWRlckN1c3RvbWVyIiwic3RyaXBlU2NyaXB0TG9hZGVyIiwiaXNTdHJpcGVQYXltZW50RXZlbnQiLCJTdHJpcGVPQ1NQYXltZW50U3RyYXRlZ3kiLCJzdHJpcGVvY3MiLCJfaW5pdGlhbGl6ZVN0cmlwZUVsZW1lbnQiLCJfcHJvY2Vzc0FkZGl0aW9uYWxBY3Rpb24iLCJkZXN0cm95IiwiY3VzdG9tZXJTZXNzaW9uVG9rZW4iLCJmb250cyIsImxheW91dCIsInBheW1lbnRNZXRob2RTZWxlY3QiLCJoYW5kbGVDbG9zZVBheW1lbnRNZXRob2QiLCJ0b2dnbGVQcmVsb2FkZXIiLCJjdXN0b21lclNlc3Npb25DbGllbnRTZWNyZXQiLCJzYXZlUGF5bWVudE1ldGhvZCIsIm1heFZpc2libGVQYXltZW50TWV0aG9kcyIsImRlZmF1bHRWYWx1ZXMiLCJMT0FERVJfU1RBUlQiLCJfb25TdHJpcGVFbGVtZW50Q2hhbmdlIiwiX2NvbGxhcHNlU3RyaXBlRWxlbWVudCIsImNvbGxhcHNlIiwicGF5bWVudE1ldGhvZE9wdGlvbnMiLCJ1c19iYW5rX2FjY291bnQiLCJfc2hvdWxkU2F2ZUluc3RydW1lbnQiLCJ0b2tlbml6ZWRPcHRpb25zIiwiX2dldFRva2VuaXplZE9wdGlvbnMiLCJzZWxlY3RlZE1ldGhvZElkIiwiY2xpZW50X3NlY3JldCIsInBheW1lbnRJbnRlbnRDbGllbnRTZWNyZXQiLCJwYXltZW50X21ldGhvZF9vcHRpb25zIiwiY29sbGFwc2VkIiwic2V0dXBGdXR1cmVVc2FnZSIsInNldHVwX2Z1dHVyZV91c2FnZSIsIk9OX1NFU1NJT04iLCJPRkZfU0VTU0lPTiIsInRva2VuaXplZF9hY2giLCJTdHJpcGVDU1BheW1lbnRTdHJhdGVneSIsImdldFBheW1lbnRFbGVtZW50IiwiZWxlbWVudHNPcHRpb25zIiwiYWRhcHRpdmVQcmljaW5nIiwiYWxsb3dlZCIsIl9jcmVhdGVTdHJpcGVFbGVtZW50IiwiY3JlYXRlUGF5bWVudEVsZW1lbnQiLCJTdHJpcGVVUEVDdXN0b21lclN0cmF0ZWd5IiwiY29udGFpbmVyIiwib25FbWFpbENoYW5nZSIsImdldFN0eWxlcyIsImlzTG9hZGluZyIsImVudHJpZXMiLCJmb3JFYWNoIiwiZ2V0Q29uc2lnbm1lbnRzIiwiY29uc2lnbm1lbnRzIiwiYmlsbGluZ0VtYWlsIiwibW9kZSIsIlNISVBQSU5HIiwibGlua0F1dGhlbnRpY2F0aW9uRWxlbWVudCIsIkFVVEhFTlRJQ0FUSU9OIiwiYXV0aGVudGljYXRlZCIsImNvbXBsZXRlIiwiZGVsZXRlQ29uc2lnbm1lbnQiLCJzaWduSW4iLCJjcmVkZW50aWFscyIsInNpZ25JbkN1c3RvbWVyIiwic2lnbk91dCIsInNpZ25PdXRDdXN0b21lciIsImV4ZWN1dGVQYXltZW50TWV0aG9kQ2hlY2tvdXQiLCJjb250aW51ZVdpdGhDaGVja291dENhbGxiYWNrIiwiREVGQVVMVF9TVFlMRVMiLCJzaXplIiwiYmFja2dyb3VuZENvbG9yIiwiREVGQVVMVF9DT05UQUlORVJfU1RZTEVTIiwicG9zaXRpb24iLCJST1RBVElPTl9BTklNQVRJT04iLCJMb2FkaW5nSW5kaWNhdG9yIiwiY29udGFpbmVyU3R5bGVzIiwiZGVmaW5lQW5pbWF0aW9uIiwiYnVpbGRDb250YWluZXIiLCJpbmRpY2F0b3IiLCJidWlsZEluZGljYXRvciIsImFwcGVuZENoaWxkIiwic2hvdyIsInBhcmVudElkIiwicGFyZW50IiwidmlzaWJpbGl0eSIsIm9wYWNpdHkiLCJoaWRlIiwiaGFuZGxlVHJhbnNpdGlvbkVuZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiY3JlYXRlRWxlbWVudCIsImRpc3BsYXkiLCJib3R0b20iLCJsZWZ0IiwiaGVpZ2h0Iiwid2lkdGgiLCJyaWdodCIsInRvcCIsInRyYW5zaXRpb24iLCJzZXRTdHlsZUF0dHJpYnV0ZSIsImJvcmRlclJhZGl1cyIsImJvcmRlciIsIm1hcmdpbiIsInRyYW5zZm9ybSIsInRyYW5zZm9ybVN0eWxlIiwiYW5pbWF0aW9uIiwiZWxlbWVudCIsImF0dHJzIiwia2V5cyIsImsiLCJzZXRQcm9wZXJ0eSIsImhlYWQiLCJzaGVldCIsIkNTU1N0eWxlU2hlZXQiLCJpbnNlcnRSdWxlIiwiQW1vdW50VHJhbnNmb3JtZXIiLCJfZGVjaW1hbFBsYWNlcyIsInRvSW50ZWdlciIsImFtb3VudCIsIk1hdGgiLCJyb3VuZCIsImV4cHJlc3NDaGVja291dEFsbG93ZWRDb3VudHJ5Q29kZXMiLCJTdHJpcGVMaW5rVjJDdXN0b21lclN0cmF0ZWd5IiwibG9hZGluZ0luZGljYXRvciIsImxvYWRpbmdDb250YWluZXJJZCIsImJ1dHRvbkhlaWdodCIsIm9uQ29tcGxldGUiLCJfbG9hZGluZ0luZGljYXRvckNvbnRhaW5lciIsIl9vbkNvbXBsZXRlIiwiY2FwdHVyZU1ldGhvZCIsIl9jYXB0dXJlTWV0aG9kIiwiX3N0cmlwZUNsaWVudCIsIl9tb3VudEV4cHJlc3NDaGVja291dEVsZW1lbnQiLCJfaW5pdGlhbGl6ZUV2ZW50cyIsInN0cmlwZUV4cHJlc3NDaGVja291dENsaWVudCIsInNob3VsZFJlcXVpcmVTaGlwcGluZ0FkZHJlc3MiLCJfc2hvdWxkUmVxdWlyZVNoaXBwaW5nQWRkcmVzcyIsImV4cHJlc3NDaGVja291dE9wdGlvbnMiLCJzaGlwcGluZ0FkZHJlc3NSZXF1aXJlZCIsImFsbG93ZWRTaGlwcGluZ0NvdW50cmllcyIsIl9nZXRBdmFpbGFibGVDb3VudHJpZXMiLCJzaGlwcGluZ1JhdGVzIiwiZGlzcGxheU5hbWUiLCJiaWxsaW5nQWRkcmVzc1JlcXVpcmVkIiwiZW1haWxSZXF1aXJlZCIsInBob25lTnVtYmVyUmVxdWlyZWQiLCJwYXltZW50TWV0aG9kcyIsImFtYXpvblBheSIsInBheXBhbCIsImtsYXJuYSIsImNhcnRBbW91bnQiLCJnZXRDYXJ0T3JUaHJvdyIsIl90b0NlbnRzIiwiY3VycmVuY3kiLCJfZ2V0Q3VycmVuY3kiLCJfbGlua1YyRWxlbWVudCIsIkVYUFJFU1NfQ0hFQ0tPVVQiLCJTSElQUElOR19BRERSRVNTX0NIQU5HRSIsIl9vblNoaXBwaW5nQWRkcmVzc0NoYW5nZSIsIlNISVBQSU5HX1JBVEVfQ0hBTkdFIiwiX29uU2hpcHBpbmdSYXRlQ2hhbmdlIiwiQ09ORklSTSIsIl9vbkNvbmZpcm0iLCJDQU5DRUwiLCJfb25DYW5jZWwiLCJzaGlwcGluZ0FkZHJlc3MiLCJjb21wYW55Iiwic3RhdGVPclByb3ZpbmNlIiwiY3VzdG9tRmllbGRzIiwidXBkYXRlU2hpcHBpbmdBZGRyZXNzIiwiX2dldEF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyIsIl91cGRhdGVEaXNwbGF5ZWRQcmljZSIsImxlbmd0aCIsInNoaXBwaW5nUmF0ZSIsIl9oYW5kbGVTaGlwcGluZ09wdGlvbkNoYW5nZSIsIl91cGRhdGVTaGlwcGluZ0FuZEJpbGxpbmdBZGRyZXNzIiwiX21hcFNoaXBwaW5nQWRkcmVzcyIsIl9tYXBCaWxsaW5nQWRkcmVzcyIsIl90b2dnbGVMb2FkaW5nSW5kaWNhdG9yIiwiX2NvbXBsZXRlQ2hlY2tvdXRGbG93IiwibGluZUl0ZW1zIiwicGh5c2ljYWxJdGVtcyIsIl9nZXRUb3RhbFByaWNlIiwiX2N1cnJlbmN5Q29kZSIsImN1cnJlbmN5Q29kZSIsImxvYWRDaGVja291dCIsImRlY2ltYWxQbGFjZXMiLCJ0b3RhbFByaWNlIiwidG9GaXhlZCIsImNvdW50cmllcyIsImxvYWRTaGlwcGluZ0NvdW50cmllcyIsImdldFNoaXBwaW5nQ291bnRyaWVzIiwibWFwIiwiZmlsdGVyIiwiY29uc2lnbm1lbnQiLCJhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMiLCJfZ2V0U3RyaXBlU2hpcHBpbmdPcHRpb24iLCJyZWNvbW1lbmRlZFNoaXBwaW5nT3B0aW9uIiwiZmluZCIsInNoaXBwaW5nT3B0aW9uIiwiaXNSZWNvbW1lbmRlZCIsInNlbGVjdGVkSWQiLCJzZWxlY3RlZFNoaXBwaW5nT3B0aW9uIiwicmVjb21tZW5kZWRJZCIsInNvcnQiLCJvcHRpb24iLCJjb3N0IiwiZGVzY3JpcHRpb24iLCJvcHRpb25JZCIsInNlbGVjdFNoaXBwaW5nT3B0aW9uIiwiX2dldEFtb3VudFRyYW5zZm9ybWVyIiwiX2Ftb3VudFRyYW5zZm9ybWVyIiwiZmFsbGJhY2tWYWx1ZSIsImFtb3VudFRyYW5zZm9ybWVyIiwiU3RyaXBlTGlua1YyQnV0dG9uU3RyYXRlZ3kiLCJsb2FkRGVmYXVsdENoZWNrb3V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../checkout-sdk-js/dist/esm/integrations/stripe.js\n\n}");

/***/ })

}]);